'use babel';
import { CompositeDisposable } from 'atom';
import _ from 'lodash';
class SelectionWatcher {
    constructor(editor) {
        this.subscriptions = new CompositeDisposable();
        this.editor = editor;
        this.subscriptions.add(this.editor.onDidChangeSelectionRange(() => {
            this.getSelections();
        }));
    }
    onSelection(selectionsCallback) {
        if (typeof selectionsCallback === 'function') {
            this.selectionHandler = _.debounce(selectionsCallback, 200);
        }
        else {
            throw new Error('Event listeners must supply a callback');
        }
    }
    getSelections() {
        let selectionRanges = this.editor.selections.map(selection => {
            return selection.getBufferRange();
        });
        this.selectionHandler(selectionRanges);
    }
}
export default SelectionWatcher;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiU2VsZWN0aW9uV2F0Y2hlci5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uL2xpYi9zdGVwc2l6ZS9TZWxlY3Rpb25XYXRjaGVyLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLFdBQVcsQ0FBQztBQUdaLE9BQU8sRUFBRSxtQkFBbUIsRUFBRSxNQUFNLE1BQU0sQ0FBQztBQUMzQyxPQUFPLENBQUMsTUFBTSxRQUFRLENBQUM7QUFFdkI7SUFLRSxZQUFZLE1BQWU7UUFDekIsSUFBSSxDQUFDLGFBQWEsR0FBRyxJQUFJLG1CQUFtQixFQUFFLENBQUM7UUFDL0MsSUFBSSxDQUFDLE1BQU0sR0FBRyxNQUFNLENBQUM7UUFDckIsSUFBSSxDQUFDLGFBQWEsQ0FBQyxHQUFHLENBQ3BCLElBQUksQ0FBQyxNQUFNLENBQUMseUJBQXlCLENBQUM7WUFDcEMsSUFBSSxDQUFDLGFBQWEsRUFBRSxDQUFDO1FBQ3ZCLENBQUMsQ0FBQyxDQUNILENBQUM7SUFDSixDQUFDO0lBRUQsV0FBVyxDQUFDLGtCQUFrQjtRQUM1QixFQUFFLENBQUMsQ0FBQyxPQUFPLGtCQUFrQixLQUFLLFVBQVUsQ0FBQyxDQUFDLENBQUM7WUFDN0MsSUFBSSxDQUFDLGdCQUFnQixHQUFHLENBQUMsQ0FBQyxRQUFRLENBQUMsa0JBQWtCLEVBQUUsR0FBRyxDQUFDLENBQUM7UUFDOUQsQ0FBQztRQUFDLElBQUksQ0FBQyxDQUFDO1lBQ04sTUFBTSxJQUFJLEtBQUssQ0FBQyx3Q0FBd0MsQ0FBQyxDQUFDO1FBQzVELENBQUM7SUFDSCxDQUFDO0lBRUQsYUFBYTtRQUNYLElBQUksZUFBZSxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUMsVUFBVSxDQUFDLEdBQUcsQ0FBQyxTQUFTO1lBQ3hELE1BQU0sQ0FBQyxTQUFTLENBQUMsY0FBYyxFQUFFLENBQUM7UUFDcEMsQ0FBQyxDQUFDLENBQUM7UUFDSCxJQUFJLENBQUMsZ0JBQWdCLENBQUMsZUFBZSxDQUFDLENBQUM7SUFDekMsQ0FBQztDQUNGO0FBRUQsZUFBZSxnQkFBZ0IsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbIid1c2UgYmFiZWwnO1xuXG5pbXBvcnQgSUVkaXRvciA9IEF0b21Db3JlLklFZGl0b3I7XG5pbXBvcnQgeyBDb21wb3NpdGVEaXNwb3NhYmxlIH0gZnJvbSAnYXRvbSc7XG5pbXBvcnQgXyBmcm9tICdsb2Rhc2gnO1xuXG5jbGFzcyBTZWxlY3Rpb25XYXRjaGVyIHtcbiAgZWRpdG9yOiBJRWRpdG9yO1xuICBzZWxlY3Rpb25IYW5kbGVyOiBGdW5jdGlvbjtcbiAgc3Vic2NyaXB0aW9uczogQXJyYXk8YW55PjtcblxuICBjb25zdHJ1Y3RvcihlZGl0b3I6IElFZGl0b3IpIHtcbiAgICB0aGlzLnN1YnNjcmlwdGlvbnMgPSBuZXcgQ29tcG9zaXRlRGlzcG9zYWJsZSgpO1xuICAgIHRoaXMuZWRpdG9yID0gZWRpdG9yO1xuICAgIHRoaXMuc3Vic2NyaXB0aW9ucy5hZGQoXG4gICAgICB0aGlzLmVkaXRvci5vbkRpZENoYW5nZVNlbGVjdGlvblJhbmdlKCgpID0+IHtcbiAgICAgICAgdGhpcy5nZXRTZWxlY3Rpb25zKCk7XG4gICAgICB9KVxuICAgICk7XG4gIH1cblxuICBvblNlbGVjdGlvbihzZWxlY3Rpb25zQ2FsbGJhY2spIHtcbiAgICBpZiAodHlwZW9mIHNlbGVjdGlvbnNDYWxsYmFjayA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgdGhpcy5zZWxlY3Rpb25IYW5kbGVyID0gXy5kZWJvdW5jZShzZWxlY3Rpb25zQ2FsbGJhY2ssIDIwMCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignRXZlbnQgbGlzdGVuZXJzIG11c3Qgc3VwcGx5IGEgY2FsbGJhY2snKTtcbiAgICB9XG4gIH1cblxuICBnZXRTZWxlY3Rpb25zKCkge1xuICAgIGxldCBzZWxlY3Rpb25SYW5nZXMgPSB0aGlzLmVkaXRvci5zZWxlY3Rpb25zLm1hcChzZWxlY3Rpb24gPT4ge1xuICAgICAgcmV0dXJuIHNlbGVjdGlvbi5nZXRCdWZmZXJSYW5nZSgpO1xuICAgIH0pO1xuICAgIHRoaXMuc2VsZWN0aW9uSGFuZGxlcihzZWxlY3Rpb25SYW5nZXMpO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFNlbGVjdGlvbldhdGNoZXI7XG4iXX0=