const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./index-oyQWDnzB.js","./SpinnerAugment-BEPEN2tu.js","./SpinnerAugment-DnPofOlT.css","./index-CiMDylqQ.js","./index-McRKs1sU.css","./RemoteAgentSetup-B4R50Cmz.js","./CalloutAugment-DzngRWi1.js","./CalloutAugment-Dvw-pMXw.css","./types-DK4HA_lx.js","./TextTooltipAugment-DAVq7Vla.js","./BaseButton-DBHsDlhs.js","./BaseButton-B2NZuaj3.css","./IconButtonAugment-DT9AU8SC.js","./IconButtonAugment-CA6XnfI-.css","./Content-Bm7C6iJ1.js","./globals-D0QH3NT1.js","./Content-LuLOeTld.css","./TextTooltipAugment-CXnRMJBa.css","./index-DqflzTEb.js","./ButtonAugment-xh-SOBaV.js","./ButtonAugment-zn72hvQy.css","./github-kew-evZ8.js","./magnifying-glass-BmBw0jRN.js","./folder-Cz5snpZv.js","./arrow-up-right-from-square-Yo0BPgM2.js","./file-paths-BcSg4gks.js","./folder-opened-BLAu3pyz.js","./types-CGlLNakm.js","./file-type-utils-B3gunxPI.js","./check-56hMuF8e.js","./types-DDm27S8B.js","./utils-Rh_q5w_c.js","./ra-diff-ops-model-pDvb0wIq.js","./index-DY0Q9XhW.js","./CardAugment-RCmwRtRa.js","./CardAugment-BuBr3xQZ.css","./index-CLSyEK0S.css","./isObjectLike-C4kUqRHQ.js","./TextAreaAugment-C1Wf9cvH.js","./TextAreaAugment-J75lFxU7.css","./diff-utils-CHDUdEQq.js","./toggleHighContrast-CwIv4U26.js","./preload-helper-Dv6uf1Os.js","./toggleHighContrast-D4zjdeIP.css","./diff-utils-DTcQ2vsq.css","./folder-CQqSbZRe.css","./CopyButton-BVbGAvmE.js","./CopyButton-C581jDHd.css","./terminal-CS_V-nAg.js","./pen-to-square-DEUxz3in.js","./Keybindings-tA5aIx1O.js","./exclamation-triangle-Ovva0uhO.js","./augment-logo-DTgokSKV.js","./Keybindings-BFFBoxX3.css","./StatusIndicator-By29C4Fu.js","./StatusIndicator-D-yOSWp9.css","./trash-can-C3k9v09A.js","./trash-can-Df_FYENN.css","./design-system-init-BG5cEFim.js","./design-system-init-Be7obQsv.css","./await_block-DO_bDmS_.js","./Filespan-CId0aUQb.js","./Filespan-uhpSTama.css","./CollapseButtonAugment-CEo2LYfW.js","./CollapseButtonAugment-CLLTFP8m.css","./ellipsis-DsAFryUF.js","./keypress-DD1aQVr0.js","./MaterialIcon-BGa1zPPN.js","./MaterialIcon-BO_oU5T3.css","./VSCodeCodicon-DfXdb5mS.js","./VSCodeCodicon-DVaocTud.css","./autofix-state-d-ymFdyn.js","./chat-flags-model-CRX90O9_.js","./RemoteAgentSetup-CE-yp3a6.css","./MessageList-CLO0TaYB.js","./RemoteAgentRetry-Db_kk9DH.js","./AugmentMessage-a30kNFnq.js","./IconFilePath-BCQiczSW.js","./LanguageIcon-CV8JBzL9.js","./LanguageIcon-D78BqCXT.css","./next-edit-types-904A5ehg.js","./IconFilePath-CiKel2Kp.css","./lodash-CujEqTm9.js","./mcp-logo-C2xFPiFq.js","./AugmentMessage-WtoiG0Z-.css","./expand-QHrAftyc.js","./RemoteAgentRetry-DYgtEKQz.css","./MessageList-DRTeF5X0.css","./VirtualizedMessageList-DV2H2t1i.js","./VirtualizedMessageList-CIYMwUjL.css"])))=>i.map(i=>d[i]);
var Pm=Object.defineProperty;var Fm=(i,e,n)=>e in i?Pm(i,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):i[e]=n;var $e=(i,e,n)=>Fm(i,typeof e!="symbol"?e+"":e,n);import{al as ot,S as ue,i as de,s as ce,P as Ye,G as L,c as A,Y as fr,K as ke,e as x,f as F,R as Ke,V as Xe,W as Ze,u as d,t as $,h as b,Q as B,q as j,r as q,I as v,L as w,M as y,n as P,a9 as me,ae as pn,X as G,Z as _e,b as rt,ah as lt,ak as jn,A as Tt,af as Se,ag as Te,ab as Nt,a5 as Le,ax as $r,aE as bi,a7 as Qt,T as Ge,a8 as vn,_ as et,aj as go,aC as La,a2 as jr,aD as ds,aA as ln,a as Me,g as Mt,a0 as fo,N as mr,j as it,H as en,w as tn,x as nn,y as on,d as ut,z as rn,J as Om,F as zm,$ as Et,a1 as Rt,aa as qn,a3 as ro,k as Bm,l as Um,U as Hm,a6 as Ss,am as Fo,ap as xi,ao as V$,a4 as pr,ac as Pn,ad as xn,aG as $s,an as Dn,O as G$}from"./SpinnerAugment-BEPEN2tu.js";import{P as Ts,a as jm,B as Ao,F as Y$,L as qm,b as Wm,D as Vm,T as Gm}from"./trash-can-C3k9v09A.js";import"./design-system-init-BG5cEFim.js";import{W as jt,e as at,h as wn,i as K$,u as qr,o as Bi,d as Ym,O as Hn,M as pi}from"./BaseButton-DBHsDlhs.js";import{c as Ra,L as fs,C as Rr,a as Km,T as Ne,P as gi,M as Ui}from"./TextTooltipAugment-DAVq7Vla.js";import{C as Qo,F as Xm,D as Do,E as Da,b as Mo,d as ms,e as ps,n as gs,o as Zm,z as Pr,B as Fr,l as Jm,q as _o}from"./types-DK4HA_lx.js";import{A as Co,i as mn,t as X$,c as Qm,d as Sn,e as Na,g as ep,f as tp,h as np,j as hs,r as op,N as er,k as gr,l as rp,m as ip,n as sp,o as Ti,p as Hi,q as Z$,s as ap,u as mo,D as Pa,a as To,G as hr,v as J$,w as cp,x as ji,y as Q$,z as Es,M as ef,B as qi,E as tf,F as nf,H as Or,T as lp,I as Xn,J as hi,K as up,L as dp,O as $p,P as fp,Q as Fa,R as of,U as mp,V as pp,W as rf,b as gp,X as hp,S as vp,C as wp,Y as Zo,Z as yp}from"./folder-Cz5snpZv.js";import{C as uo,E as cn,c as bp,n as Dr,q as Nr,g as sf,I as xp,u as Is,v as Ls,x as Rs,z as Ds,y as Wi,B as Ns,w as Ps,s as af,F as Fs,J as cf,K as lf,L as _p,M as zr,N as uf,U as df,O as $f,P as ff,Q as Cp,A as mf,k as Oa}from"./arrow-up-right-from-square-Yo0BPgM2.js";import{a as Jt,R as pf}from"./types-DDm27S8B.js";import{b as Os,T as Wr,a as Ap,S as gf,v as Mp,c as kp}from"./StatusIndicator-By29C4Fu.js";import{R as za}from"./ra-diff-ops-model-pDvb0wIq.js";import{R as Tn,T as xt,C as zs,g as Sp,s as Tp}from"./check-56hMuF8e.js";import{C as Jn}from"./CalloutAugment-DzngRWi1.js";import{M as br,O as Ep,P as Ip,h as Lp,j as Ba}from"./diff-utils-CHDUdEQq.js";import{c as xr,F as Rp,g as vs,a as Dp,j as Br,C as Oo,M as hf,R as Np,G as Pp,U as Fp}from"./github-kew-evZ8.js";import{I as dt}from"./IconButtonAugment-DT9AU8SC.js";import{B as ht}from"./ButtonAugment-xh-SOBaV.js";import{E as Wn}from"./exclamation-triangle-Ovva0uhO.js";import"./isObjectLike-C4kUqRHQ.js";import{T as Je,H as Op,o as zp,t as Bp}from"./Content-Bm7C6iJ1.js";import{g as Up}from"./globals-D0QH3NT1.js";import{h as Bs,i as Hp,N as jp,m as qp,n as Wp,j as Vp,k as Gp,K as Ur,a as Us,A as Ua,R as Yp,B as Kp,P as Xp,b as Zp,C as vf,c as Jp,G as Qp,d as e1,T as t1,l as n1,M as tr,e as wf,f as o1,g as r1}from"./Keybindings-tA5aIx1O.js";import{h as vr,u as Vi}from"./await_block-DO_bDmS_.js";import{i as i1,c as Ha}from"./file-type-utils-B3gunxPI.js";import{D as we,S as Hs,T as nr,a as yf,C as s1}from"./index-DY0Q9XhW.js";import{g as ws}from"./file-paths-BcSg4gks.js";import{F as _n}from"./Filespan-CId0aUQb.js";import{a as bf,b as js,P as a1,C as xf}from"./folder-opened-BLAu3pyz.js";import{T as c1,a as qs,C as _f}from"./CollapseButtonAugment-CEo2LYfW.js";import{E as or}from"./ellipsis-DsAFryUF.js";import{_ as Gi}from"./preload-helper-Dv6uf1Os.js";import{o as ko}from"./keypress-DD1aQVr0.js";import{t as l1}from"./index-CiMDylqQ.js";import{M as zo}from"./MaterialIcon-BGa1zPPN.js";import{b as u1,c as d1,a as $1}from"./utils-Rh_q5w_c.js";import{P as Vr}from"./pen-to-square-DEUxz3in.js";import{c as f1,s as po,f as dr}from"./index-DqflzTEb.js";import{T as Cf}from"./terminal-CS_V-nAg.js";import{V as Af}from"./VSCodeCodicon-DfXdb5mS.js";import{A as lr}from"./autofix-state-d-ymFdyn.js";import{C as ja}from"./types-CGlLNakm.js";import{A as m1}from"./augment-logo-DTgokSKV.js";import{C as Mf,E as kf}from"./chat-flags-model-CRX90O9_.js";import{M as p1}from"./index-oyQWDnzB.js";import"./TextAreaAugment-C1Wf9cvH.js";import"./toggleHighContrast-CwIv4U26.js";import"./CardAugment-RCmwRtRa.js";function So(i){return Array.isArray?Array.isArray(i):Ef(i)==="[object Array]"}const g1=1/0;function h1(i){return i==null?"":function(e){if(typeof e=="string")return e;let n=e+"";return n=="0"&&1/e==-g1?"-0":n}(i)}function $o(i){return typeof i=="string"}function Sf(i){return typeof i=="number"}function v1(i){return i===!0||i===!1||function(e){return Tf(e)&&e!==null}(i)&&Ef(i)=="[object Boolean]"}function Tf(i){return typeof i=="object"}function Zn(i){return i!=null}function as(i){return!i.trim().length}function Ef(i){return i==null?i===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(i)}const w1=i=>`Missing ${i} property in key`,y1=i=>`Property 'weight' in key '${i}' must be a positive integer`,qa=Object.prototype.hasOwnProperty;class b1{constructor(e){this._keys=[],this._keyMap={};let n=0;e.forEach(t=>{let o=If(t);this._keys.push(o),this._keyMap[o.id]=o,n+=o.weight}),this._keys.forEach(t=>{t.weight/=n})}get(e){return this._keyMap[e]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function If(i){let e=null,n=null,t=null,o=1,r=null;if($o(i)||So(i))t=i,e=Wa(i),n=ys(i);else{if(!qa.call(i,"name"))throw new Error(w1("name"));const s=i.name;if(t=s,qa.call(i,"weight")&&(o=i.weight,o<=0))throw new Error(y1(s));e=Wa(s),n=ys(s),r=i.getFn}return{path:e,id:n,weight:o,src:t,getFn:r}}function Wa(i){return So(i)?i:i.split(".")}function ys(i){return So(i)?i.join("."):i}var mt={isCaseSensitive:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(i,e)=>i.score===e.score?i.idx<e.idx?-1:1:i.score<e.score?-1:1,includeMatches:!1,findAllMatches:!1,minMatchCharLength:1,location:0,threshold:.6,distance:100,useExtendedSearch:!1,getFn:function(i,e){let n=[],t=!1;const o=(r,s,c)=>{if(Zn(r))if(s[c]){const a=r[s[c]];if(!Zn(a))return;if(c===s.length-1&&($o(a)||Sf(a)||v1(a)))n.push(h1(a));else if(So(a)){t=!0;for(let l=0,u=a.length;l<u;l+=1)o(a[l],s,c+1)}else s.length&&o(a,s,c+1)}else n.push(r)};return o(i,$o(e)?e.split("."):e,0),t?n:n[0]},ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1};const x1=/[^ ]+/g;class Ws{constructor({getFn:e=mt.getFn,fieldNormWeight:n=mt.fieldNormWeight}={}){this.norm=function(t=1,o=3){const r=new Map,s=Math.pow(10,o);return{get(c){const a=c.match(x1).length;if(r.has(a))return r.get(a);const l=1/Math.pow(a,.5*t),u=parseFloat(Math.round(l*s)/s);return r.set(a,u),u},clear(){r.clear()}}}(n,3),this.getFn=e,this.isCreated=!1,this.setIndexRecords()}setSources(e=[]){this.docs=e}setIndexRecords(e=[]){this.records=e}setKeys(e=[]){this.keys=e,this._keysMap={},e.forEach((n,t)=>{this._keysMap[n.id]=t})}create(){!this.isCreated&&this.docs.length&&(this.isCreated=!0,$o(this.docs[0])?this.docs.forEach((e,n)=>{this._addString(e,n)}):this.docs.forEach((e,n)=>{this._addObject(e,n)}),this.norm.clear())}add(e){const n=this.size();$o(e)?this._addString(e,n):this._addObject(e,n)}removeAt(e){this.records.splice(e,1);for(let n=e,t=this.size();n<t;n+=1)this.records[n].i-=1}getValueForItemAtKeyId(e,n){return e[this._keysMap[n]]}size(){return this.records.length}_addString(e,n){if(!Zn(e)||as(e))return;let t={v:e,i:n,n:this.norm.get(e)};this.records.push(t)}_addObject(e,n){let t={i:n,$:{}};this.keys.forEach((o,r)=>{let s=o.getFn?o.getFn(e):this.getFn(e,o.path);if(Zn(s)){if(So(s)){let c=[];const a=[{nestedArrIndex:-1,value:s}];for(;a.length;){const{nestedArrIndex:l,value:u}=a.pop();if(Zn(u))if($o(u)&&!as(u)){let f={v:u,i:l,n:this.norm.get(u)};c.push(f)}else So(u)&&u.forEach((f,m)=>{a.push({nestedArrIndex:m,value:f})})}t.$[r]=c}else if($o(s)&&!as(s)){let c={v:s,n:this.norm.get(s)};t.$[r]=c}}}),this.records.push(t)}toJSON(){return{keys:this.keys,records:this.records}}}function Lf(i,e,{getFn:n=mt.getFn,fieldNormWeight:t=mt.fieldNormWeight}={}){const o=new Ws({getFn:n,fieldNormWeight:t});return o.setKeys(i.map(If)),o.setSources(e),o.create(),o}function vi(i,{errors:e=0,currentLocation:n=0,expectedLocation:t=0,distance:o=mt.distance,ignoreLocation:r=mt.ignoreLocation}={}){const s=e/i.length;if(r)return s;const c=Math.abs(t-n);return o?s+c/o:c?1:s}const Jo=32;function _1(i,e,n,{location:t=mt.location,distance:o=mt.distance,threshold:r=mt.threshold,findAllMatches:s=mt.findAllMatches,minMatchCharLength:c=mt.minMatchCharLength,includeMatches:a=mt.includeMatches,ignoreLocation:l=mt.ignoreLocation}={}){if(e.length>Jo)throw new Error(`Pattern length exceeds max of ${Jo}.`);const u=e.length,f=i.length,m=Math.max(0,Math.min(t,f));let p=r,_=m;const M=c>1||a,C=M?Array(f):[];let T;for(;(T=i.indexOf(e,_))>-1;){let X=vi(e,{currentLocation:T,expectedLocation:m,distance:o,ignoreLocation:l});if(p=Math.min(X,p),_=T+u,M){let K=0;for(;K<u;)C[T+K]=1,K+=1}}_=-1;let E=[],R=1,N=u+f;const J=1<<u-1;for(let X=0;X<u;X+=1){let K=0,H=N;for(;K<H;)vi(e,{errors:X,currentLocation:m+H,expectedLocation:m,distance:o,ignoreLocation:l})<=p?K=H:N=H,H=Math.floor((N-K)/2+K);N=H;let Y=Math.max(1,m-H+1),V=s?f:Math.min(m+H,f)+u,Z=Array(V+2);Z[V+1]=(1<<X)-1;for(let re=V;re>=Y;re-=1){let le=re-1,oe=n[i.charAt(le)];if(M&&(C[le]=+!!oe),Z[re]=(Z[re+1]<<1|1)&oe,X&&(Z[re]|=(E[re+1]|E[re])<<1|1|E[re+1]),Z[re]&J&&(R=vi(e,{errors:X,currentLocation:le,expectedLocation:m,distance:o,ignoreLocation:l}),R<=p)){if(p=R,_=le,_<=m)break;Y=Math.max(1,2*m-_)}}if(vi(e,{errors:X+1,currentLocation:m,expectedLocation:m,distance:o,ignoreLocation:l})>p)break;E=Z}const Q={isMatch:_>=0,score:Math.max(.001,R)};if(M){const X=function(K=[],H=mt.minMatchCharLength){let Y=[],V=-1,Z=-1,re=0;for(let le=K.length;re<le;re+=1){let oe=K[re];oe&&V===-1?V=re:oe||V===-1||(Z=re-1,Z-V+1>=H&&Y.push([V,Z]),V=-1)}return K[re-1]&&re-V>=H&&Y.push([V,re-1]),Y}(C,c);X.length?a&&(Q.indices=X):Q.isMatch=!1}return Q}function C1(i){let e={};for(let n=0,t=i.length;n<t;n+=1){const o=i.charAt(n);e[o]=(e[o]||0)|1<<t-n-1}return e}class Rf{constructor(e,{location:n=mt.location,threshold:t=mt.threshold,distance:o=mt.distance,includeMatches:r=mt.includeMatches,findAllMatches:s=mt.findAllMatches,minMatchCharLength:c=mt.minMatchCharLength,isCaseSensitive:a=mt.isCaseSensitive,ignoreLocation:l=mt.ignoreLocation}={}){if(this.options={location:n,threshold:t,distance:o,includeMatches:r,findAllMatches:s,minMatchCharLength:c,isCaseSensitive:a,ignoreLocation:l},this.pattern=a?e:e.toLowerCase(),this.chunks=[],!this.pattern.length)return;const u=(m,p)=>{this.chunks.push({pattern:m,alphabet:C1(m),startIndex:p})},f=this.pattern.length;if(f>Jo){let m=0;const p=f%Jo,_=f-p;for(;m<_;)u(this.pattern.substr(m,Jo),m),m+=Jo;if(p){const M=f-Jo;u(this.pattern.substr(M),M)}}else u(this.pattern,0)}searchIn(e){const{isCaseSensitive:n,includeMatches:t}=this.options;if(n||(e=e.toLowerCase()),this.pattern===e){let _={isMatch:!0,score:0};return t&&(_.indices=[[0,e.length-1]]),_}const{location:o,distance:r,threshold:s,findAllMatches:c,minMatchCharLength:a,ignoreLocation:l}=this.options;let u=[],f=0,m=!1;this.chunks.forEach(({pattern:_,alphabet:M,startIndex:C})=>{const{isMatch:T,score:E,indices:R}=_1(e,_,M,{location:o+C,distance:r,threshold:s,findAllMatches:c,minMatchCharLength:a,includeMatches:t,ignoreLocation:l});T&&(m=!0),f+=E,T&&R&&(u=[...u,...R])});let p={isMatch:m,score:m?f/this.chunks.length:1};return m&&t&&(p.indices=u),p}}class No{constructor(e){this.pattern=e}static isMultiMatch(e){return Va(e,this.multiRegex)}static isSingleMatch(e){return Va(e,this.singleRegex)}search(){}}function Va(i,e){const n=i.match(e);return n?n[1]:null}class Df extends No{constructor(e,{location:n=mt.location,threshold:t=mt.threshold,distance:o=mt.distance,includeMatches:r=mt.includeMatches,findAllMatches:s=mt.findAllMatches,minMatchCharLength:c=mt.minMatchCharLength,isCaseSensitive:a=mt.isCaseSensitive,ignoreLocation:l=mt.ignoreLocation}={}){super(e),this._bitapSearch=new Rf(e,{location:n,threshold:t,distance:o,includeMatches:r,findAllMatches:s,minMatchCharLength:c,isCaseSensitive:a,ignoreLocation:l})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(e){return this._bitapSearch.searchIn(e)}}class Nf extends No{constructor(e){super(e)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(e){let n,t=0;const o=[],r=this.pattern.length;for(;(n=e.indexOf(this.pattern,t))>-1;)t=n+r,o.push([n,t-1]);const s=!!o.length;return{isMatch:s,score:s?0:1,indices:o}}}const bs=[class extends No{constructor(i){super(i)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(i){const e=i===this.pattern;return{isMatch:e,score:e?0:1,indices:[0,this.pattern.length-1]}}},Nf,class extends No{constructor(i){super(i)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(i){const e=i.startsWith(this.pattern);return{isMatch:e,score:e?0:1,indices:[0,this.pattern.length-1]}}},class extends No{constructor(i){super(i)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(i){const e=!i.startsWith(this.pattern);return{isMatch:e,score:e?0:1,indices:[0,i.length-1]}}},class extends No{constructor(i){super(i)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(i){const e=!i.endsWith(this.pattern);return{isMatch:e,score:e?0:1,indices:[0,i.length-1]}}},class extends No{constructor(i){super(i)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(i){const e=i.endsWith(this.pattern);return{isMatch:e,score:e?0:1,indices:[i.length-this.pattern.length,i.length-1]}}},class extends No{constructor(i){super(i)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(i){const e=i.indexOf(this.pattern)===-1;return{isMatch:e,score:e?0:1,indices:[0,i.length-1]}}},Df],Ga=bs.length,A1=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,M1=new Set([Df.type,Nf.type]);class k1{constructor(e,{isCaseSensitive:n=mt.isCaseSensitive,includeMatches:t=mt.includeMatches,minMatchCharLength:o=mt.minMatchCharLength,ignoreLocation:r=mt.ignoreLocation,findAllMatches:s=mt.findAllMatches,location:c=mt.location,threshold:a=mt.threshold,distance:l=mt.distance}={}){this.query=null,this.options={isCaseSensitive:n,includeMatches:t,minMatchCharLength:o,findAllMatches:s,ignoreLocation:r,location:c,threshold:a,distance:l},this.pattern=n?e:e.toLowerCase(),this.query=function(u,f={}){return u.split("|").map(m=>{let p=m.trim().split(A1).filter(M=>M&&!!M.trim()),_=[];for(let M=0,C=p.length;M<C;M+=1){const T=p[M];let E=!1,R=-1;for(;!E&&++R<Ga;){const N=bs[R];let J=N.isMultiMatch(T);J&&(_.push(new N(J,f)),E=!0)}if(!E)for(R=-1;++R<Ga;){const N=bs[R];let J=N.isSingleMatch(T);if(J){_.push(new N(J,f));break}}}return _})}(this.pattern,this.options)}static condition(e,n){return n.useExtendedSearch}searchIn(e){const n=this.query;if(!n)return{isMatch:!1,score:1};const{includeMatches:t,isCaseSensitive:o}=this.options;e=o?e:e.toLowerCase();let r=0,s=[],c=0;for(let a=0,l=n.length;a<l;a+=1){const u=n[a];s.length=0,r=0;for(let f=0,m=u.length;f<m;f+=1){const p=u[f],{isMatch:_,indices:M,score:C}=p.search(e);if(!_){c=0,r=0,s.length=0;break}if(r+=1,c+=C,t){const T=p.constructor.type;M1.has(T)?s=[...s,...M]:s.push(M)}}if(r){let f={isMatch:!0,score:c/r};return t&&(f.indices=s),f}}return{isMatch:!1,score:1}}}const xs=[];function _s(i,e){for(let n=0,t=xs.length;n<t;n+=1){let o=xs[n];if(o.condition(i,e))return new o(i,e)}return new Rf(i,e)}const Vs="$and",S1="$or",Ya="$path",T1="$val",cs=i=>!(!i[Vs]&&!i[S1]),Ka=i=>({[Vs]:Object.keys(i).map(e=>({[e]:i[e]}))});function Pf(i,e,{auto:n=!0}={}){const t=o=>{let r=Object.keys(o);const s=(a=>!!a[Ya])(o);if(!s&&r.length>1&&!cs(o))return t(Ka(o));if((a=>!So(a)&&Tf(a)&&!cs(a))(o)){const a=s?o[Ya]:r[0],l=s?o[T1]:o[a];if(!$o(l))throw new Error((f=>`Invalid value for key ${f}`)(a));const u={keyId:ys(a),pattern:l};return n&&(u.searcher=_s(l,e)),u}let c={children:[],operator:r[0]};return r.forEach(a=>{const l=o[a];So(l)&&l.forEach(u=>{c.children.push(t(u))})}),c};return cs(i)||(i=Ka(i)),t(i)}function E1(i,e){const n=i.matches;e.matches=[],Zn(n)&&n.forEach(t=>{if(!Zn(t.indices)||!t.indices.length)return;const{indices:o,value:r}=t;let s={indices:o,value:r};t.key&&(s.key=t.key.src),t.idx>-1&&(s.refIndex=t.idx),e.matches.push(s)})}function I1(i,e){e.score=i.score}class ur{constructor(e,n={},t){this.options={...mt,...n},this.options.useExtendedSearch,this._keyStore=new b1(this.options.keys),this.setCollection(e,t)}setCollection(e,n){if(this._docs=e,n&&!(n instanceof Ws))throw new Error("Incorrect 'index' type");this._myIndex=n||Lf(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(e){Zn(e)&&(this._docs.push(e),this._myIndex.add(e))}remove(e=()=>!1){const n=[];for(let t=0,o=this._docs.length;t<o;t+=1){const r=this._docs[t];e(r,t)&&(this.removeAt(t),t-=1,o-=1,n.push(r))}return n}removeAt(e){this._docs.splice(e,1),this._myIndex.removeAt(e)}getIndex(){return this._myIndex}search(e,{limit:n=-1}={}){const{includeMatches:t,includeScore:o,shouldSort:r,sortFn:s,ignoreFieldNorm:c}=this.options;let a=$o(e)?$o(this._docs[0])?this._searchStringList(e):this._searchObjectList(e):this._searchLogical(e);return function(l,{ignoreFieldNorm:u=mt.ignoreFieldNorm}){l.forEach(f=>{let m=1;f.matches.forEach(({key:p,norm:_,score:M})=>{const C=p?p.weight:null;m*=Math.pow(M===0&&C?Number.EPSILON:M,(C||1)*(u?1:_))}),f.score=m})}(a,{ignoreFieldNorm:c}),r&&a.sort(s),Sf(n)&&n>-1&&(a=a.slice(0,n)),function(l,u,{includeMatches:f=mt.includeMatches,includeScore:m=mt.includeScore}={}){const p=[];return f&&p.push(E1),m&&p.push(I1),l.map(_=>{const{idx:M}=_,C={item:u[M],refIndex:M};return p.length&&p.forEach(T=>{T(_,C)}),C})}(a,this._docs,{includeMatches:t,includeScore:o})}_searchStringList(e){const n=_s(e,this.options),{records:t}=this._myIndex,o=[];return t.forEach(({v:r,i:s,n:c})=>{if(!Zn(r))return;const{isMatch:a,score:l,indices:u}=n.searchIn(r);a&&o.push({item:r,idx:s,matches:[{score:l,value:r,norm:c,indices:u}]})}),o}_searchLogical(e){const n=Pf(e,this.options),t=(c,a,l)=>{if(!c.children){const{keyId:f,searcher:m}=c,p=this._findMatches({key:this._keyStore.get(f),value:this._myIndex.getValueForItemAtKeyId(a,f),searcher:m});return p&&p.length?[{idx:l,item:a,matches:p}]:[]}const u=[];for(let f=0,m=c.children.length;f<m;f+=1){const p=c.children[f],_=t(p,a,l);if(_.length)u.push(..._);else if(c.operator===Vs)return[]}return u},o=this._myIndex.records,r={},s=[];return o.forEach(({$:c,i:a})=>{if(Zn(c)){let l=t(n,c,a);l.length&&(r[a]||(r[a]={idx:a,item:c,matches:[]},s.push(r[a])),l.forEach(({matches:u})=>{r[a].matches.push(...u)}))}}),s}_searchObjectList(e){const n=_s(e,this.options),{keys:t,records:o}=this._myIndex,r=[];return o.forEach(({$:s,i:c})=>{if(!Zn(s))return;let a=[];t.forEach((l,u)=>{a.push(...this._findMatches({key:l,value:s[u],searcher:n}))}),a.length&&r.push({idx:c,item:s,matches:a})}),r}_findMatches({key:e,value:n,searcher:t}){if(!Zn(n))return[];let o=[];if(So(n))n.forEach(({v:r,i:s,n:c})=>{if(!Zn(r))return;const{isMatch:a,score:l,indices:u}=t.searchIn(r);a&&o.push({score:l,key:e,value:r,idx:s,norm:c,indices:u})});else{const{v:r,n:s}=n,{isMatch:c,score:a,indices:l}=t.searchIn(r);c&&o.push({score:a,key:e,value:r,norm:s,indices:l})}return o}}ur.version="7.0.0",ur.createIndex=Lf,ur.parseIndex=function(i,{getFn:e=mt.getFn,fieldNormWeight:n=mt.fieldNormWeight}={}){const{keys:t,records:o}=i,r=new Ws({getFn:e,fieldNormWeight:n});return r.setKeys(t),r.setIndexRecords(o),r},ur.config=mt,ur.parseQuery=Pf,function(...i){xs.push(...i)}(k1);var Zt=(i=>(i.disableCopilot="ShouldDisableCopilot",i.disableCodeium="ShouldDisableCodeium",i.workspacePopulated="WorkspacePopulated",i.workspaceNotPopulated="WorkspaceNotPopulated",i.workspaceNotSelected="WorkspaceNotSelected",i.signInRequired="UserShouldSignIn",i.allActionsComplete="AllActionsComplete",i.syncingPermissionNeeded="SyncingPermissionNeeded",i.workspaceTooLarge="workspaceTooLarge",i.uploadingHomeDir="uploadingHomeDir",i))(Zt||{}),Gs=(i=>(i.signInInProgress="SignInInProgress",i))(Gs||{});let L1=class{constructor(){$e(this,"subscribers",new Set);$e(this,"_actions",[]);$e(this,"_currentIndex",0);$e(this,"subscribe",i=>(this.subscribers.add(i),i(this),()=>{this.subscribers.delete(i)}))}get currentCard(){return this.actions[this._currentIndex]}notifySubscribers(){this.subscribers.forEach(i=>i(this))}get actions(){return this._actions}handleMessageFromExtension(i){const e=i.data;return e.type===jt.mainPanelActions&&(this.onActionsUpdates(e.data),!0)}onActionsUpdates(i){this._actions=i,this._currentIndex=0,this.notifySubscribers()}nextAction(){this._currentIndex=(this._currentIndex+1)%this._actions.length,this.notifySubscribers()}prevAction(){this._currentIndex=(this._currentIndex-1+this._actions.length)%this._actions.length,this.notifySubscribers()}isCollapsible(i){return i===Zt.allActionsComplete}};const iE=`Augment just finished syncing with your codebase! Here is a summary of what we saw:

`;class R1{constructor(e,n){$e(this,"handleMessageFromExtension",e=>(e.data.type===jt.shouldShowSummary&&this.showProjectSummary(),!0));this._chatModel=e,this._flagsModel=n}async retryProjectSummary(e){const[n]=await Promise.all([this.generateQuestions(),this._chatModel.currentConversationModel.resendTurn(e)]);await this.attachQuestions(n)}async showProjectSummary(){const e=this.generateQuestions();await this.generateSummary();const n=await e;this.attachQuestions(n)}async generateQuestions(){const{responseText:e}=await this._chatModel.currentConversationModel.sendSilentExchange({request_message:"Give me the five most important questions a developer would need answered about this codebase. These questions should be separated by a newline. I want you to say absolutely nothing else.",model_id:this._flagsModel.modelDisplayNameToId.Overview??void 0,disableSelectedCodeDetails:!0,chatHistory:[]});return e.split(`
`).filter(n=>n.trim()!=="")}async generateSummary(){this._chatModel.extensionClient.showAugmentPanel(),await this._chatModel.currentConversationModel.sendExchange({chatItemType:uo.summaryResponse,request_message:"Provide a short summary of this project",model_id:this._flagsModel.modelDisplayNameToId.Overview??void 0,status:cn.draft,disableSelectedCodeDetails:!0,chatHistory:[]},!0)}async attachQuestions(e){const n=this._chatModel.currentConversationModel.chatHistory.findLast(bp);n&&n.request_id&&e&&this._chatModel.currentConversationModel.updateChatItem(n.request_id,{questionsLoaded:!0,questions:e})}}function D1(i){let e,n,t,o;const r=i[12].default,s=Ye(r,i,i[11],null);return{c(){e=L("div"),n=L("div"),s&&s.c(),A(n,"class",t=fr(`c-card ${i[0]}`)+" svelte-1hp682e"),ke(n,"highlighted",i[1]),ke(n,"hasTop",i[8]),ke(n,"hasBottom",i[7]),ke(n,"hasLeft",i[6]),ke(n,"hasRight",i[5]),ke(n,"reserve-border-space",i[4]),A(e,"class","c-card-container svelte-1hp682e"),A(e,"style",i[2]),ke(e,"overflow-visible",i[3])},m(c,a){x(c,e,a),F(e,n),s&&s.m(n,null),o=!0},p(c,[a]){s&&s.p&&(!o||2048&a)&&Ke(s,r,c,c[11],o?Ze(r,c[11],a,null):Xe(c[11]),null),(!o||1&a&&t!==(t=fr(`c-card ${c[0]}`)+" svelte-1hp682e"))&&A(n,"class",t),(!o||3&a)&&ke(n,"highlighted",c[1]),(!o||257&a)&&ke(n,"hasTop",c[8]),(!o||129&a)&&ke(n,"hasBottom",c[7]),(!o||65&a)&&ke(n,"hasLeft",c[6]),(!o||33&a)&&ke(n,"hasRight",c[5]),(!o||17&a)&&ke(n,"reserve-border-space",c[4]),(!o||4&a)&&A(e,"style",c[2]),(!o||8&a)&&ke(e,"overflow-visible",c[3])},i(c){o||(d(s,c),o=!0)},o(c){$(s,c),o=!1},d(c){c&&b(e),s&&s.d(c)}}}function N1(i,e,n){let t,o,r,s,c,{$$slots:a={},$$scope:l}=e,{class:u=""}=e,{highlighted:f=!1}=e,{style:m=""}=e,{overflowVisible:p=!1}=e,{borders:_=["top","bottom","left","right"]}=e,{reserveBorderSpace:M=!1}=e;return i.$$set=C=>{"class"in C&&n(0,u=C.class),"highlighted"in C&&n(1,f=C.highlighted),"style"in C&&n(2,m=C.style),"overflowVisible"in C&&n(3,p=C.overflowVisible),"borders"in C&&n(9,_=C.borders),"reserveBorderSpace"in C&&n(4,M=C.reserveBorderSpace),"$$scope"in C&&n(11,l=C.$$scope)},i.$$.update=()=>{512&i.$$.dirty&&n(10,t=_.map(C=>C.split("-")).flat()),1024&i.$$.dirty&&n(8,o=t.includes("top")),1024&i.$$.dirty&&n(7,r=t.includes("bottom")),1024&i.$$.dirty&&n(6,s=t.includes("left")),1024&i.$$.dirty&&n(5,c=t.includes("right"))},[u,f,m,p,M,c,s,r,o,_,t,l,a]}class Ff extends ue{constructor(e){super(),de(this,e,N1,D1,ce,{class:0,highlighted:1,style:2,overflowVisible:3,borders:9,reserveBorderSpace:4})}}const _i={id:null,name:"Default"};class P1{constructor(){$e(this,"models",[_i])}registerModels(e){this.models=[_i,...e]}getModels(){return this.models}getModel(e){return this.models.find(n=>n.id===e)??_i}}class F1{constructor(e,n=void 0,t,o){$e(this,"subscribers",new Set);this._msgBroker=e,this._state=n,this.validateState=t,this._storeId=o,n&&this.setStateInternal(n)}subscribe(e){return this.subscribers.add(e),e(this),()=>{this.subscribers.delete(e)}}notifySubscribers(){this.subscribers.forEach(e=>e(this))}get state(){return this._state}get storeId(){return this._storeId}shouldAcceptMessage(e,n){return e.id===this.storeId&&this.validateState(n)}update(e){const n=e(this._state);n!==void 0&&this.setStateInternal(n)}setState(e){this.setStateInternal(e)}async setStateInternal(e){JSON.stringify(this._state)!==JSON.stringify(e)&&(this._state=e,this._msgBroker.postMessage({type:jt.updateSharedWebviewState,data:e,id:this.storeId}))}async fetchStateFromExtension(){const e=await this._msgBroker.send({type:jt.getSharedWebviewState,id:this.storeId,data:{}});e.type===jt.getSharedWebviewStateResponse&&this.shouldAcceptMessage(e,e.data)&&(this._state=e.data,this.notifySubscribers())}handleMessageFromExtension(e){switch(e.data.type){case jt.updateSharedWebviewState:case jt.getSharedWebviewStateResponse:return!!this.shouldAcceptMessage(e.data,e.data.data)&&(this._state=e.data.data,this.notifySubscribers(),!0);default:return!1}}}const O1=i=>({}),Xa=i=>({slot:"icon"}),z1=i=>({}),Za=i=>({slot:"icon"});function B1(i){let e,n;return e=new Jn({props:{variant:"soft",size:1,color:i[0],$$slots:{icon:[q1],default:[j1]},$$scope:{ctx:i}}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p(t,o){const r={};1&o&&(r.color=t[0]),74&o&&(r.$$scope={dirty:o,ctx:t}),e.$set(r)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function U1(i){let e,n,t,o;return e=new Jn({props:{variant:"soft",size:1,color:i[0],$$slots:{default:[W1]},$$scope:{ctx:i}}}),t=new Jn({props:{variant:"soft",size:1,color:"info",$$slots:{icon:[G1],default:[V1]},$$scope:{ctx:i}}}),{c(){v(e.$$.fragment),n=B(),v(t.$$.fragment)},m(r,s){w(e,r,s),x(r,n,s),w(t,r,s),o=!0},p(r,s){const c={};1&s&&(c.color=r[0]),66&s&&(c.$$scope={dirty:s,ctx:r}),e.$set(c);const a={};68&s&&(a.$$scope={dirty:s,ctx:r}),t.$set(a)},i(r){o||(d(e.$$.fragment,r),d(t.$$.fragment,r),o=!0)},o(r){$(e.$$.fragment,r),$(t.$$.fragment,r),o=!1},d(r){r&&b(n),y(e,r),y(t,r)}}}function Ja(i){let e,n;return e=new dt({props:{variant:"ghost",color:"neutral",size:1,$$slots:{default:[H1]},$$scope:{ctx:i}}}),e.$on("click",i[5]),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p(t,o){const r={};64&o&&(r.$$scope={dirty:o,ctx:t}),e.$set(r)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function H1(i){let e,n;return e=new xr({}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function j1(i){let e,n,t,o;n=new br({props:{markdown:i[1]}});let r=!!i[3]&&Ja(i);return{c(){e=L("div"),v(n.$$.fragment),t=B(),r&&r.c(),A(e,"class","c-callout-wrapper svelte-fh6sa8")},m(s,c){x(s,e,c),w(n,e,null),F(e,t),r&&r.m(e,null),o=!0},p(s,c){const a={};2&c&&(a.markdown=s[1]),n.$set(a),s[3]?r?(r.p(s,c),8&c&&d(r,1)):(r=Ja(s),r.c(),d(r,1),r.m(e,null)):r&&(j(),$(r,1,1,()=>{r=null}),q())},i(s){o||(d(n.$$.fragment,s),d(r),o=!0)},o(s){$(n.$$.fragment,s),$(r),o=!1},d(s){s&&b(e),y(n),r&&r.d()}}}function q1(i){let e;const n=i[4].icon,t=Ye(n,i,i[6],Xa);return{c(){t&&t.c()},m(o,r){t&&t.m(o,r),e=!0},p(o,r){t&&t.p&&(!e||64&r)&&Ke(t,n,o,o[6],e?Ze(n,o[6],r,O1):Xe(o[6]),Xa)},i(o){e||(d(t,o),e=!0)},o(o){$(t,o),e=!1},d(o){t&&t.d(o)}}}function W1(i){let e,n;return e=new br({props:{markdown:i[1]}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p(t,o){const r={};2&o&&(r.markdown=t[1]),e.$set(r)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function V1(i){let e,n;return e=new br({props:{markdown:i[2]}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p(t,o){const r={};4&o&&(r.markdown=t[2]),e.$set(r)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function G1(i){let e;const n=i[4].icon,t=Ye(n,i,i[6],Za);return{c(){t&&t.c()},m(o,r){t&&t.m(o,r),e=!0},p(o,r){t&&t.p&&(!e||64&r)&&Ke(t,n,o,o[6],e?Ze(n,o[6],r,z1):Xe(o[6]),Za)},i(o){e||(d(t,o),e=!0)},o(o){$(t,o),e=!1},d(o){t&&t.d(o)}}}function Y1(i){let e,n,t,o,r;const s=[U1,B1],c=[];function a(f,m){return f[2]?0:1}n=a(i),t=c[n]=s[n](i);const l=i[4].default,u=Ye(l,i,i[6],null);return{c(){e=L("div"),t.c(),o=B(),u&&u.c(),A(e,"class","c-base-card svelte-fh6sa8")},m(f,m){x(f,e,m),c[n].m(e,null),F(e,o),u&&u.m(e,null),r=!0},p(f,[m]){let p=n;n=a(f),n===p?c[n].p(f,m):(j(),$(c[p],1,1,()=>{c[p]=null}),q(),t=c[n],t?t.p(f,m):(t=c[n]=s[n](f),t.c()),d(t,1),t.m(e,o)),u&&u.p&&(!r||64&m)&&Ke(u,l,f,f[6],r?Ze(l,f[6],m,null):Xe(f[6]),null)},i(f){r||(d(t),d(u,f),r=!0)},o(f){$(t),$(u,f),r=!1},d(f){f&&b(e),c[n].d(),u&&u.d(f)}}}function K1(i,e,n){let{$$slots:t={},$$scope:o}=e,{color:r}=e,{description:s}=e,{callout:c}=e,{onClose:a}=e;return i.$$set=l=>{"color"in l&&n(0,r=l.color),"description"in l&&n(1,s=l.description),"callout"in l&&n(2,c=l.callout),"onClose"in l&&n(3,a=l.onClose),"$$scope"in l&&n(6,o=l.$$scope)},[r,s,c,a,t,()=>a(),o]}let Gr=class extends ue{constructor(i){super(),de(this,i,K1,Y1,ce,{color:0,description:1,callout:2,onClose:3})}};function X1(i){let e;return{c(){e=L("div"),e.innerHTML='<div class="c-progress-bar__bar svelte-dg8hvh"></div>',A(e,"class","c-progress-bar svelte-dg8hvh")},m(n,t){x(n,e,t)},p:P,i:P,o:P,d(n){n&&b(e)}}}class Of extends ue{constructor(e){super(),de(this,e,null,X1,ce,{})}}function Qa(i,e,n){const t=i.slice();return t[9]=e[n].text,t[10]=e[n].action,t[11]=e[n].appearance,t}const Z1=i=>({}),ec=i=>({slot:"icon"});function J1(i){let e,n,t=i[9]+"";return{c(){e=G(t),n=B()},m(o,r){x(o,e,r),x(o,n,r)},p(o,r){4&r&&t!==(t=o[9]+"")&&_e(e,t)},d(o){o&&(b(e),b(n))}}}function tc(i){let e,n;return e=new ht({props:{size:2,variant:"solid",color:i[11]?i[11]:"accent",class:"c-btns-card__button",title:i[9],$$slots:{default:[J1]},$$scope:{ctx:i}}}),e.$on("click",function(){return i[7](i[10])}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p(t,o){i=t;const r={};4&o&&(r.color=i[11]?i[11]:"accent"),4&o&&(r.title=i[9]),260&o&&(r.$$scope={dirty:o,ctx:i}),e.$set(r)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function nc(i){let e,n;return e=new Of({}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function Q1(i){let e,n,t,o,r=at(i[2]),s=[];for(let l=0;l<r.length;l+=1)s[l]=tc(Qa(i,r,l));const c=l=>$(s[l],1,1,()=>{s[l]=null});let a=i[3]&&nc();return{c(){e=L("div");for(let l=0;l<s.length;l+=1)s[l].c();n=B(),a&&a.c(),t=me(),A(e,"class","c-btns-card__buttons svelte-1701q2d")},m(l,u){x(l,e,u);for(let f=0;f<s.length;f+=1)s[f]&&s[f].m(e,null);x(l,n,u),a&&a.m(l,u),x(l,t,u),o=!0},p(l,u){if(36&u){let f;for(r=at(l[2]),f=0;f<r.length;f+=1){const m=Qa(l,r,f);s[f]?(s[f].p(m,u),d(s[f],1)):(s[f]=tc(m),s[f].c(),d(s[f],1),s[f].m(e,null))}for(j(),f=r.length;f<s.length;f+=1)c(f);q()}l[3]?a?8&u&&d(a,1):(a=nc(),a.c(),d(a,1),a.m(t.parentNode,t)):a&&(j(),$(a,1,1,()=>{a=null}),q())},i(l){if(!o){for(let u=0;u<r.length;u+=1)d(s[u]);d(a),o=!0}},o(l){s=s.filter(Boolean);for(let u=0;u<s.length;u+=1)$(s[u]);$(a),o=!1},d(l){l&&(b(e),b(n),b(t)),pn(s,l),a&&a.d(l)}}}function eg(i){let e;const n=i[6].icon,t=Ye(n,i,i[8],ec);return{c(){t&&t.c()},m(o,r){t&&t.m(o,r),e=!0},p(o,r){t&&t.p&&(!e||256&r)&&Ke(t,n,o,o[8],e?Ze(n,o[8],r,Z1):Xe(o[8]),ec)},i(o){e||(d(t,o),e=!0)},o(o){$(t,o),e=!1},d(o){t&&t.d(o)}}}function tg(i){let e,n;return e=new Gr({props:{color:i[1],description:i[0],callout:i[4],$$slots:{icon:[eg],default:[Q1]},$$scope:{ctx:i}}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p(t,[o]){const r={};2&o&&(r.color=t[1]),1&o&&(r.description=t[0]),16&o&&(r.callout=t[4]),268&o&&(r.$$scope={dirty:o,ctx:t}),e.$set(r)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function ng(i,e,n){let{$$slots:t={},$$scope:o}=e,{description:r}=e,{color:s}=e,{buttons:c=[]}=e,{inProgress:a=!1}=e,{callout:l}=e;function u(f){wn.postMessage({type:jt.mainPanelPerformAction,data:f})}return i.$$set=f=>{"description"in f&&n(0,r=f.description),"color"in f&&n(1,s=f.color),"buttons"in f&&n(2,c=f.buttons),"inProgress"in f&&n(3,a=f.inProgress),"callout"in f&&n(4,l=f.callout),"$$scope"in f&&n(8,o=f.$$scope)},[r,s,c,a,l,u,t,f=>u(f),o]}let Yr=class extends ue{constructor(i){super(),de(this,i,ng,tg,ce,{description:0,color:1,buttons:2,inProgress:3,callout:4})}};function og(i){let e,n;return{c(){e=rt("svg"),n=rt("path"),A(n,"fill-rule","evenodd"),A(n,"clip-rule","evenodd"),A(n,"d","M7.49991 0.876892C3.84222 0.876892 0.877075 3.84204 0.877075 7.49972C0.877075 11.1574 3.84222 14.1226 7.49991 14.1226C11.1576 14.1226 14.1227 11.1574 14.1227 7.49972C14.1227 3.84204 11.1576 0.876892 7.49991 0.876892ZM1.82707 7.49972C1.82707 4.36671 4.36689 1.82689 7.49991 1.82689C10.6329 1.82689 13.1727 4.36671 13.1727 7.49972C13.1727 10.6327 10.6329 13.1726 7.49991 13.1726C4.36689 13.1726 1.82707 10.6327 1.82707 7.49972ZM8.24992 4.49999C8.24992 4.9142 7.91413 5.24999 7.49992 5.24999C7.08571 5.24999 6.74992 4.9142 6.74992 4.49999C6.74992 4.08577 7.08571 3.74999 7.49992 3.74999C7.91413 3.74999 8.24992 4.08577 8.24992 4.49999ZM6.00003 5.99999H6.50003H7.50003C7.77618 5.99999 8.00003 6.22384 8.00003 6.49999V9.99999H8.50003H9.00003V11H8.50003H7.50003H6.50003H6.00003V9.99999H6.50003H7.00003V6.99999H6.50003H6.00003V5.99999Z"),A(n,"fill","currentColor"),A(e,"width","15"),A(e,"height","15"),A(e,"viewBox","0 0 15 15"),A(e,"fill","none"),A(e,"xmlns","http://www.w3.org/2000/svg")},m(t,o){x(t,e,o),F(e,n)},p:P,i:P,o:P,d(t){t&&b(e)}}}class Bo extends ue{constructor(e){super(),de(this,e,null,og,ce,{})}}function rg(i){return{c:P,m:P,p:P,i:P,o:P,d:P}}function ig(i){let e,n;return e=new Gr({props:{color:"warning",description:"Current workspace contains your home directory. Augment cannot upload your home directory to the cloud. Please open a different workspace",$$slots:{icon:[$g]},$$scope:{ctx:i}}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p(t,o){const r={};8&o&&(r.$$scope={dirty:o,ctx:t}),e.$set(r)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function sg(i){let e,n;return e=new Gr({props:{color:"warning",description:`The workspace you have opened exceeds Augment's ${i[2].maxTrackableFileCount} file upload limit. Please use a .augmentignore or .gitignore to exclude files from being uploaded, or open a smaller workspace.`,$$slots:{icon:[fg]},$$scope:{ctx:i}}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p(t,o){const r={};4&o&&(r.description=`The workspace you have opened exceeds Augment's ${t[2].maxTrackableFileCount} file upload limit. Please use a .augmentignore or .gitignore to exclude files from being uploaded, or open a smaller workspace.`),8&o&&(r.$$scope={dirty:o,ctx:t}),e.$set(r)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function ag(i){let e,n;return e=new Yr({props:{color:"neutral",description:"To provide the best quality responses, Augment will index your code in our secure cloud. Your data always stays secure and private. [Learn More](https://docs.augmentcode.com/setup-augment/workspace-indexing)",callout:i[2].userTier==="community"?"You are subscribed to the Community plan, we may use any code you share to train our AI models.":void 0,buttons:[{text:"Enable Indexing",action:"grant-sync-permission"}],$$slots:{icon:[mg]},$$scope:{ctx:i}}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p(t,o){const r={};4&o&&(r.callout=t[2].userTier==="community"?"You are subscribed to the Community plan, we may use any code you share to train our AI models.":void 0),8&o&&(r.$$scope={dirty:o,ctx:t}),e.$set(r)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function cg(i){let e,n;return e=new Yr({props:{color:"warning",description:"Codeium suggestions will collide with Augment's suggestions. Turn off Codeium to fix this.",buttons:[{text:"Disable Codeium",action:"disable-codeium"}],$$slots:{icon:[pg]},$$scope:{ctx:i}}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p(t,o){const r={};8&o&&(r.$$scope={dirty:o,ctx:t}),e.$set(r)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function lg(i){let e,n;return e=new Yr({props:{color:"warning",description:"GitHub Copilot suggestions will collide with Augment's suggestions. Turn off Copilot to fix this.",buttons:[{text:"Disable Github Copilot",action:"disable-github-copilot"}],$$slots:{icon:[gg]},$$scope:{ctx:i}}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p(t,o){const r={};8&o&&(r.$$scope={dirty:o,ctx:t}),e.$set(r)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function ug(i){let e,n;return e=new Yr({props:{color:"neutral",description:"Please complete the sign-in process in your browser.",buttons:[{text:"Cancel",action:"cancel-sign-in",appearance:"neutral"}],inProgress:!0,$$slots:{icon:[hg]},$$scope:{ctx:i}}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p(t,o){const r={};8&o&&(r.$$scope={dirty:o,ctx:t}),e.$set(r)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function dg(i){let e,n;return e=new Yr({props:{color:"neutral",description:"Welcome to Augment! Sign in to your existing account or create a new one to get started.",buttons:[{text:"Start using Augment",action:"sign-in"}],$$slots:{icon:[vg]},$$scope:{ctx:i}}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p(t,o){const r={};8&o&&(r.$$scope={dirty:o,ctx:t}),e.$set(r)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function $g(i){let e,n;return e=new Wn({props:{slot:"icon"}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p:P,i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function fg(i){let e,n;return e=new Wn({props:{slot:"icon"}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p:P,i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function mg(i){let e,n;return e=new Bo({props:{slot:"icon"}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p:P,i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function pg(i){let e,n;return e=new Wn({props:{slot:"icon"}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p:P,i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function gg(i){let e,n;return e=new Wn({props:{slot:"icon"}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p:P,i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function hg(i){let e,n;return e=new Bo({props:{slot:"icon"}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p:P,i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function vg(i){let e,n;return e=new Bo({props:{slot:"icon"}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p:P,i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function wg(i){let e,n,t,o;const r=[dg,ug,lg,cg,ag,sg,ig,rg],s=[];function c(a,l){return a[0]===Zt.signInRequired?0:a[0]===Gs.signInInProgress?1:a[0]===Zt.disableCopilot?2:a[0]===Zt.disableCodeium?3:a[0]===Zt.syncingPermissionNeeded?4:a[0]===Zt.workspaceTooLarge?5:a[0]===Zt.uploadingHomeDir?6:a[0]===Zt.allActionsComplete?7:-1}return~(e=c(i))&&(n=s[e]=r[e](i)),{c(){n&&n.c(),t=me()},m(a,l){~e&&s[e].m(a,l),x(a,t,l),o=!0},p(a,[l]){let u=e;e=c(a),e===u?~e&&s[e].p(a,l):(n&&(j(),$(s[u],1,1,()=>{s[u]=null}),q()),~e?(n=s[e],n?n.p(a,l):(n=s[e]=r[e](a),n.c()),d(n,1),n.m(t.parentNode,t)):n=null)},i(a){o||(d(n),o=!0)},o(a){$(n),o=!1},d(a){a&&b(t),~e&&s[e].d(a)}}}function yg(i,e,n){let t,o=P,r=()=>(o(),o=lt(c,a=>n(2,t=a)),c);i.$$.on_destroy.push(()=>o());let{card:s}=e,{flagsModel:c}=e;return r(),i.$$set=a=>{"card"in a&&n(0,s=a.card),"flagsModel"in a&&r(n(1,c=a.flagsModel))},[s,c,t]}let bg=class extends ue{constructor(i){super(),de(this,i,yg,wg,ce,{card:0,flagsModel:1})}};class xg{constructor(e,n,t){$e(this,"_agenticExchangeStatus",Tt(Dr.notRunning));$e(this,"_isCurrConversationAgentic",Tt(!1));$e(this,"_isAutoModeApproved",Tt(!1));$e(this,"_showAutoModeWarning");$e(this,"_hasEverUsedAgent",Tt(void 0));$e(this,"_classifiedMemoriesMap",new Map);$e(this,"_disposers",[]);$e(this,"isAgenticTurnComplete",jn(this._agenticExchangeStatus,e=>e===Dr.notRunning));$e(this,"_lastConversation",Tt({chat:void 0,agent:void 0}));$e(this,"_shouldCreateNewConversation",()=>{const e=this._chatModel.currentConversationModel;return!Sn.isEmpty(e)});$e(this,"setToAgentic",async(e=!1)=>{if(mn(this._chatModel.currentConversationModel))return;let n;if(this._chatModel.flags.doUseNewDraftFunctionality){if(n=this._chatModel.currentConversationModel.id,!n&&(this._chatModel.setCurrentConversation(er),n=er),!mn(this._chatModel.currentConversationModel))if(e){const o=this._chatModel.orderedConversations().find(mn),r=o==null?void 0:o.id;r?this._chatModel.setCurrentConversation(r):(await this._chatModel.setCurrentConversation(),this._chatModel.currentConversationModel.extraData={isAgentConversation:!0,baselineTimestamp:0},n=this._chatModel.currentConversationModel.id)}else this._chatModel.currentConversationModel.extraData={isAgentConversation:!0,baselineTimestamp:0}}else{const o=this._shouldCreateNewConversation(),r=ot(this._lastConversation).agent;if(this._lastConversation.update(()=>({chat:this._chatModel.currentConversationModel.id,agent:void 0})),o||!r){const s=await this._create();s.extraData={isAgentConversation:!0},this._chatModel.deleteInvalidConversations("agent"),this._chatModel.currentConversationModel.setConversation(s),n=s.id}else this._chatModel.setCurrentConversation(r),n=r}this._chatModel.extensionClient.reportAgentSessionEvent({eventName:Mo.openedAgentConversation,conversationId:n});const t=this._chatModel.currentConversationModel.subscribe(async o=>{await this._maybeTriggerWelcomeMessage(o.id)&&t()})});$e(this,"setToChat",()=>{if(!mn(this._chatModel.currentConversationModel))return;const e=this._shouldCreateNewConversation(),n=ot(this._lastConversation).chat;if(this._lastConversation.update(()=>({chat:void 0,agent:this._chatModel.currentConversationModel.id})),e||!n)if(this._chatModel.flags.doUseNewDraftFunctionality)this._chatModel.setCurrentConversation(er),this._chatModel.currentConversationModel.extraData={isAgentConversation:!1,baselineTimestamp:0};else{const t={...Sn.create(),extraData:{isAgentConversation:!1}};this._chatModel.deleteInvalidConversations("chat"),this._chatModel.currentConversationModel.setConversation(t)}else this._chatModel.setCurrentConversation(n)});$e(this,"_maybeTriggerWelcomeMessage",async e=>{var o;const n=this._chatModel.currentConversationModel;if(n.id!==e)return!1;if(await this.refreshHasEverUsedAgent(),!Sn.isEmpty(n)||Sn.isNamed(n)||((o=n.extraData)==null?void 0:o.hasAgentOnboarded)||ot(this._hasEverUsedAgent)||(this.setHasEverUsedAgent(!0),n.setName("Welcome to the Augment Agent"),n.extraData={isAgentConversation:!0,hasAgentOnboarded:!0},!K$()))return!0;const t=await this._chatModel.extensionClient.getAgentOnboardingPrompt();return await n.sendExchange({chatItemType:uo.agentOnboarding,request_message:t,status:cn.draft}),!0});$e(this,"markDirty",()=>{const e=this._chatModel.currentConversationModel;e.extraData={...e.extraData,hasDirtyEdits:!0}});$e(this,"markClean",()=>{const e=this._chatModel.currentConversationModel;e.extraData={...e.extraData,hasDirtyEdits:!1}});$e(this,"_findAgentic",()=>this._chatModel.orderedConversations().find(mn));$e(this,"_findChat",()=>this._chatModel.orderedConversations().find(e=>!mn(e)));$e(this,"_create",async()=>({...Sn.create({personaType:await this._chatModel.currentConversationModel.decidePersonaType()}),extraData:{isAgentConversation:!0,baselineTimestamp:0}}));$e(this,"updateBaselineTimestamp",e=>{const n=Math.min(e,Date.now()),t=this._chatModel.currentConversationModel;mn(t)&&(t.extraData={...t.extraData,baselineTimestamp:n})});$e(this,"getBaselineTimestamp",()=>{const e=this._chatModel.currentConversationModel;return mn(e)?e.extraData.baselineTimestamp??0:0});$e(this,"getConversationId",()=>this._chatModel.currentConversationModel.id);$e(this,"interruptAgent",async()=>{if(ot(this._agenticExchangeStatus)===Dr.notRunning)return;await this._toolsModel.interruptAllTools(),await this._chatModel.currentConversationModel.cancelMessage();const e=this._chatModel.currentConversationModel.lastExchange;e!=null&&e.request_id&&this._classifiedMemoriesMap.delete(e.request_id)});$e(this,"_resetStateToDefaultValues",()=>{this.setHasEverUsedAgent(!1),this._chatModel.extensionClient.setAgentAutoModeApproved(!1),this._isAutoModeApproved.set(!1),this._chatModel.extensionClient.setHasEverUsedRemoteAgent(!1),this._chatModel.agentExecutionMode.set(Co.manual)});$e(this,"acceptAutoMode",()=>{this._chatModel.extensionClient.setAgentAutoModeApproved(!0),this._isAutoModeApproved.set(!0),this._chatModel.agentExecutionMode.set(Co.auto)});$e(this,"refreshAutoModeAcceptance",async()=>{const e=await this._chatModel.extensionClient.checkAgentAutoModeApproval();this._isAutoModeApproved.set(e)});$e(this,"rejectAutoMode",()=>{this._chatModel.extensionClient.setAgentAutoModeApproved(!1),this._isAutoModeApproved.set(!1),this._chatModel.agentExecutionMode.set(Co.manual)});$e(this,"setHasEverUsedAgent",e=>{this._chatModel.extensionClient.setHasEverUsedAgent(e),this._hasEverUsedAgent.set(e)});$e(this,"refreshHasEverUsedAgent",async()=>{if(ot(this.hasEverUsedAgent)!==void 0)return;const e=await this._chatModel.extensionClient.checkHasEverUsedAgent();ot(this.hasEverUsedAgent)===void 0&&this._hasEverUsedAgent.set(e)});var s;this._chatModel=e,this._toolsModel=n,this._checkpointStore=t,this._checkpointStore.registerAgentConversationModel(this);const o=Object.values(this._chatModel.conversations).some(c=>{var a;return(a=c.extraData)==null?void 0:a.isAgentConversation}),r=((s=this._chatModel.currentConversationModel.extraData)==null?void 0:s.isAgentConversation)===!0;(o||r)&&this.setHasEverUsedAgent(!0),this.refreshAutoModeAcceptance(),this.refreshHasEverUsedAgent(),this._showAutoModeWarning=jn([this._isAutoModeApproved,this._chatModel.agentExecutionMode,this._isCurrConversationAgentic],([c,a,l])=>!c&&a===Co.auto&&l),this._disposers.push(this._chatModel.currentConversationModel.subscribe(()=>{const c=this._chatModel.currentConversationModel,a=mn(c);this._isCurrConversationAgentic.set(a)})),this._disposers.push(this._chatModel.currentConversationModel.subscribe(X$(()=>{const c=Qm(this._chatModel.currentConversationModel);this._agenticExchangeStatus.set(c)},1e3,{leading:!0,trailing:!0}))),this._disposers.push(this._isCurrConversationAgentic.subscribe(c=>{c?(this._chatModel.extensionClient.setChatMode(Ra.agent),this._chatModel.specialContextInputModel.enableAgentMemories()):(this._chatModel.extensionClient.setChatMode(Ra.chat),this._chatModel.specialContextInputModel.disableAgentMemories()),this._agenticExchangeStatus.set(Dr.notRunning)})),this._disposers.push(this._chatModel.currentConversationModel.onBeforeChangeConversation((c,a)=>{var l;if(mn(c))return Sn.isEmpty(a)&&((l=a.extraData)==null?void 0:l.isAgentConversation)!==!1&&this._chatModel.conversations[a.id]===void 0&&(a={...a,extraData:{...a.extraData,isAgentConversation:!0}}),a})),this._disposers.push(this._chatModel.currentConversationModel.subscribe(c=>{const a=c.lastExchange,l=this._chatModel.flags.memoryClassificationOnFirstToken;a&&a.request_id&&l&&(a.status===cn.sent&&a.response_text&&a.response_text.length>0&&!this._classifiedMemoriesMap.has(a.request_id)&&(this._classifiedMemoriesMap.set(a.request_id,!0),Na(c,a)),!a.request_id||a.status!==cn.success&&a.status!==cn.failed&&a.status!==cn.cancelled||this._classifiedMemoriesMap.delete(a.request_id))})),this._disposers.push(this._chatModel.currentConversationModel.onSendExchange(c=>{this._chatModel.flags.memoryClassificationOnFirstToken||Na(this._chatModel.currentConversationModel,c)})),this._disposers.push(this._chatModel.currentConversationModel.onNewConversation(()=>{const c=this._chatModel.currentConversationModel.id;this._chatModel.extensionClient.setCurrentConversation(c),this._checkpointStore.maybeCreateOriginalCheckpoint()})),this._chatModel.extensionClient.setCurrentConversation(this._chatModel.currentConversationModel.id),this._disposers.push(this.isAgenticTurnComplete.subscribe(c=>{var f,m;if(!c||!mn(this._chatModel.currentConversationModel))return;const a=this._chatModel.currentConversationModel,l=ep(a);if(!l)return;const u=Xm.create();u.setFlag(Do.start);try{const p=(f=tp(a))==null?void 0:f.request_id;p&&u.setRequestId(Do.lastUserExchangeRequestId,p);const{memoriesRequestId:_,memory:M}=l;if(u.setRequestId(Do.memoriesRequestId,_),!M)return void u.setFlag(Do.emptyMemory);if(np(a))return void u.setFlag(Do.agenticTurnHasRememberToolCall);if(this._chatModel.extensionClient.callTool(((m=a.lastExchange)==null?void 0:m.request_id)??"","remember","remember",{memory:M,caller:Da.classify_and_distill,isComplexNewMemory:!1,memoriesRequestId:_},a.chatHistory.filter(C=>Nr(C)).map(hs),a.id),p){const C=op(a,p);u.setFlag(Do.removeUserExchangeMemoryFailed,!C)}}catch{u.setFlag(Do.exceptionThrown)}finally{u.setFlag(Do.end),this._chatModel.extensionClient.reportAgentSessionEvent({eventName:Mo.flushMemories,conversationId:this._chatModel.currentConversationModel.id,eventData:{flushMemoriesData:u}})}})),this._disposers.push(this.isAgenticTurnComplete.subscribe(async c=>{if(c){const a=ot(this._checkpointStore.currentCheckpoint),l=ot(this._chatModel.currentConversationModel).id;await this._chatModel.extensionClient.hasChangesSince((a==null?void 0:a.fromTimestamp)??this.getBaselineTimestamp())&&l===ot(this._chatModel.currentConversationModel).id&&this._checkpointStore.createNewCheckpoint()}})),this._disposers.push(this._checkpointStore.targetCheckpointSummary.subscribe(()=>{ot(this._checkpointStore.targetCheckpointHasChanges)?this.markDirty():this.markClean()}))}get isCurrConversationAgentic(){return this._isCurrConversationAgentic}get agentExchangeStatus(){return this._agenticExchangeStatus}async distillMemory(e){const n=this._chatModel.currentConversationModel.chatHistory.find(o=>sf(o)&&o.request_id===e);if(!(n!=null&&n.request_message))return;const{responseText:t}=await this._chatModel.currentConversationModel.sendSilentExchange({request_message:n.request_message,disableRetrieval:!0,disableSelectedCodeDetails:!0,memoriesInfo:{isDistill:!0}});try{const o=JSON.parse(t);o.content&&await this._chatModel.extensionClient.callTool(e,"remember","remember",{memory:o.content,caller:Da.classify_and_distill,isComplexNewMemory:!1},this._chatModel.currentConversationModel.chatHistory.filter(Nr).map(hs),this._chatModel.currentConversationModel.id)}catch(o){console.warn("Failed to parse JSON from distill memory response",o)}}async resetOnboarding(){this._resetStateToDefaultValues();const e=this._chatModel.currentConversationModel;mn(e)&&(e.extraData={...e.extraData,hasAgentOnboarded:!1},await this._maybeTriggerWelcomeMessage(e.id))}get showAutoModeWarning(){return this._showAutoModeWarning}get hasEverUsedAgent(){return this._hasEverUsedAgent}dispose(){this._disposers.forEach(e=>e()),this._disposers=[],this._classifiedMemoriesMap.clear()}}function oc(i){let e,n;return e=new Gr({props:{color:"accent",description:i[0],onClose:i[1],$$slots:{icon:[Ag],default:[Cg]},$$scope:{ctx:i}}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p(t,o){const r={};1&o&&(r.description=t[0]),2&o&&(r.onClose=t[1]),131076&o&&(r.$$scope={dirty:o,ctx:t}),e.$set(r)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function _g(i){let e;return{c(){e=G("Try it out")},m(n,t){x(n,e,t)},d(n){n&&b(e)}}}function Cg(i){let e,n;return e=new ht({props:{size:2,variant:"solid",color:"accent",title:"Try it out",$$slots:{default:[_g]},$$scope:{ctx:i}}}),e.$on("click",function(){Nt(i[2])&&i[2].apply(this,arguments)}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p(t,o){i=t;const r={};131072&o&&(r.$$scope={dirty:o,ctx:i}),e.$set(r)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function Ag(i){let e,n;return e=new Bo({props:{slot:"icon"}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p:P,i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function Mg(i){let e,n,t=i[3]&&oc(i);return{c(){t&&t.c(),e=me()},m(o,r){t&&t.m(o,r),x(o,e,r),n=!0},p(o,[r]){o[3]?t?(t.p(o,r),8&r&&d(t,1)):(t=oc(o),t.c(),d(t,1),t.m(e.parentNode,e)):t&&(j(),$(t,1,1,()=>{t=null}),q())},i(o){n||(d(t),n=!0)},o(o){$(t),n=!1},d(o){o&&b(e),t&&t.d(o)}}}function kg(i,e,n){let t,o,r,s,c,a,l,u,f,m=P,p=P;i.$$.on_destroy.push(()=>m()),i.$$.on_destroy.push(()=>p());const _=Se("chatModel");Te(i,_,Q=>n(13,f=Q));const M=f.flags;Te(i,M,Q=>n(12,u=Q));const C=Se(gr.key),T=Se("agentConversationModel"),E=Se(Tn.key);let R="",N=()=>{},J=()=>{};return i.$$.update=()=>{6144&i.$$.dirty&&n(9,o=u.enableAgentMode&&l===!1),5120&i.$$.dirty&&n(8,s=u.enableBackgroundAgents&&!a),3840&i.$$.dirty&&(o?(n(0,R="Agent Mode is now available"),n(1,N=async()=>{n(9,o=!1),l===!1&&T.setHasEverUsedAgent(!0)}),n(2,J=async()=>{n(9,o=!1),await T.setToAgentic()})):s&&(n(0,R="Remote Agent Mode is now available"),n(1,N=async()=>{n(8,s=!1),E.setHasEverUsedRemoteAgent(!0)}),n(2,J=async()=>{n(8,s=!1),C.handleSetToBackgroundAgent(),a===!1&&(E==null||E.setHasEverUsedRemoteAgent(!0))}))),768&i.$$.dirty&&n(3,c=o||s)},n(5,t=T.hasEverUsedAgent),p(),p=lt(t,Q=>n(11,l=Q)),n(4,r=E.hasEverUsedRemoteAgent),m(),m=lt(r,Q=>n(10,a=Q)),[R,N,J,c,r,t,_,M,s,o,a,l,u]}class Sg extends ue{constructor(e){super(),de(this,e,kg,Mg,ce,{})}}function rc(i){let e,n;return e=new Gr({props:{color:"accent",description:i[0],onClose:i[8],$$slots:{icon:[Tg]},$$scope:{ctx:i}}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p(t,o){const r={};1&o&&(r.description=t[0]),3&o&&(r.onClose=t[8]),512&o&&(r.$$scope={dirty:o,ctx:t}),e.$set(r)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function Tg(i){let e,n;return e=new Bo({props:{slot:"icon"}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p:P,i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function Eg(i){let e,n,t=i[1]&&rc(i);return{c(){t&&t.c(),e=me()},m(o,r){t&&t.m(o,r),x(o,e,r),n=!0},p(o,[r]){o[1]?t?(t.p(o,r),2&r&&d(t,1)):(t=rc(o),t.c(),d(t,1),t.m(e.parentNode,e)):t&&(j(),$(t,1,1,()=>{t=null}),q())},i(o){n||(d(t),n=!0)},o(o){$(t),n=!1},d(o){o&&b(e),t&&t.d(o)}}}function Ig(i,e,n){let t,o,r,s,c,a,l,u=P,f=P;i.$$.on_destroy.push(()=>u()),i.$$.on_destroy.push(()=>f());const m=Se("chatModel");return Te(i,m,p=>n(6,a=p)),i.$$.update=()=>{64&i.$$.dirty&&(n(3,t=a.flags),f(),f=lt(t,p=>n(7,l=p))),128&i.$$.dirty&&n(0,o=l.clientAnnouncement),64&i.$$.dirty&&(n(2,r=a.displayedAnnouncements),u(),u=lt(r,p=>n(5,c=p))),33&i.$$.dirty&&n(1,s=!!o&&o.length>0&&!c.includes(o))},[o,s,r,t,m,c,a,l,async()=>{n(1,s=!1),m.displayedAnnouncements.update(p=>(p.push(o),p)),m.saveImmediate()}]}class Lg extends ue{constructor(e){super(),de(this,e,Ig,Eg,ce,{})}}const Rg=Tt(!1);function Dg(i){let e;return{c(){e=G("Drop files to attach as context")},m(n,t){x(n,e,t)},d(n){n&&b(e)}}}function Ng(i){let e,n=i[0].enableDebugFeatures?"images (png, jpg, jpeg) and text-based files":"images (png, jpg, jpeg)";return{c(){e=G(n)},m(t,o){x(t,e,o)},p(t,o){1&o&&n!==(n=t[0].enableDebugFeatures?"images (png, jpg, jpeg) and text-based files":"images (png, jpg, jpeg)")&&_e(e,n)},d(t){t&&b(e)}}}function Pg(i){let e,n,t,o,r;const s=i[8].default,c=Ye(s,i,i[12],null),a=c||function(l){let u,f,m,p,_,M;return u=new Rp({}),m=new Ge({props:{class:"c-rich-text-editor-dropzone__text",size:2,$$slots:{default:[Dg]},$$scope:{ctx:l}}}),_=new Ge({props:{class:"c-rich-text-editor-dropzone__text",size:1,$$slots:{default:[Ng]},$$scope:{ctx:l}}}),{c(){v(u.$$.fragment),f=B(),v(m.$$.fragment),p=B(),v(_.$$.fragment)},m(C,T){w(u,C,T),x(C,f,T),w(m,C,T),x(C,p,T),w(_,C,T),M=!0},p(C,T){const E={};4096&T&&(E.$$scope={dirty:T,ctx:C}),m.$set(E);const R={};4097&T&&(R.$$scope={dirty:T,ctx:C}),_.$set(R)},i(C){M||(d(u.$$.fragment,C),d(m.$$.fragment,C),d(_.$$.fragment,C),M=!0)},o(C){$(u.$$.fragment,C),$(m.$$.fragment,C),$(_.$$.fragment,C),M=!1},d(C){C&&(b(f),b(p)),y(u,C),y(m,C),y(_,C)}}}(i);return{c(){e=L("div"),n=L("div"),a&&a.c(),A(n,"class","c-rich-text-editor-dropzone__content svelte-1f75lrb"),A(e,"class","c-rich-text-editor-dropzone svelte-1f75lrb"),A(e,"role","button"),A(e,"tabindex","-1"),ke(e,"is-active",i[1])},m(l,u){x(l,e,u),F(e,n),a&&a.m(n,null),t=!0,o||(r=[Le(window,"dragstart",i[11]),Le(window,"dragenter",i[6]),Le(window,"dragleave",i[4]),Le(window,"drop",i[5]),Le(window,"blur",i[5]),Le(e,"dragover",$r(bi(i[9]))),Le(e,"dragenter",$r(bi(i[10]))),Le(e,"drop",$r(bi(i[3])))],o=!0)},p(l,[u]){c?c.p&&(!t||4096&u)&&Ke(c,s,l,l[12],t?Ze(s,l[12],u,null):Xe(l[12]),null):a&&a.p&&(!t||1&u)&&a.p(l,t?u:-1),(!t||2&u)&&ke(e,"is-active",l[1])},i(l){t||(d(a,l),t=!0)},o(l){$(a,l),t=!1},d(l){l&&b(e),a&&a.d(l),o=!1,Qt(r)}}}const Fg="application/x-augment/drag-origin/{}";function ic(i){return Fg.replace("{}",i.instanceId)}function Og(i,e,n){let{$$slots:t={},$$scope:o}=e,{flags:r}=e,{draggingStore:s=Rg}=e;const c=Se(Bs.CONTEXT_KEY);let a;return s.subscribe(l=>n(1,a=l)),i.$$set=l=>{"flags"in l&&n(0,r=l.flags),"draggingStore"in l&&n(7,s=l.draggingStore),"$$scope"in l&&n(12,o=l.$$scope)},[r,a,c,function(l){var u,f,m,p,_;s.set(!1),(u=l.dataTransfer)!=null&&u.files&&((_=(f=c==null?void 0:c.commandManager.chain())==null?void 0:(m=f.command(({view:M,tr:C})=>{if(!M)return!0;const T=M.posAtCoords({left:l.clientX,top:l.clientY});if(T){const E=C.doc.resolve(T.pos);C.setSelection(Hp.create(C.doc,E.pos))}return!0})).insertFilesIntoEditor)==null||_.call(m,[...((p=l.dataTransfer)==null?void 0:p.files)??[]]))},function(l){l.relatedTarget&&l.relatedTarget!==document.body||s.set(!1)},()=>s.set(!1),l=>{var m,p;var u,f;u=l,f=c,(m=u.dataTransfer)!=null&&m.types.includes(ic(f))||(p=l.dataTransfer)!=null&&p.types.includes("Files")&&s.set(!0)},s,t,function(l){vn.call(this,i,l)},function(l){vn.call(this,i,l)},l=>function(u,f){var m;f.rootNode&&u.composedPath().includes(f.rootNode)&&((m=u.dataTransfer)==null||m.setData(ic(f),f.instanceId))}(l,c),o]}class zg extends ue{constructor(e){super(),de(this,e,Og,Pg,ce,{flags:0,draggingStore:7})}}const Bg=/(?:^|\s)(!\[(.+|:?)]\((\S+)(?:(?:\s+)["'](\S+)["'])?\))$/,Ug=jp.create({name:"image",addOptions:()=>({inline:!1,allowBase64:!1,HTMLAttributes:{}}),inline(){return this.options.inline},group(){return this.options.inline?"inline":"block"},draggable:!0,addAttributes:()=>({src:{default:null},alt:{default:null},title:{default:null}}),parseHTML(){return[{tag:this.options.allowBase64?"img[src]":'img[src]:not([src^="data:"])'}]},renderHTML({HTMLAttributes:i}){return["img",qp(this.options.HTMLAttributes,i)]},addCommands(){return{setImage:i=>({commands:e})=>e.insertContent({type:this.name,attrs:i})}},addInputRules(){return[Wp({find:Bg,type:this.type,getAttributes:i=>{const[,,e,n,t]=i;return{src:n,alt:e,title:t}}})]}});class Cs extends Error{constructor(n,t){super(t);$e(this,"files");this.files=n,this.name="FileError"}}class Hg extends Cs{constructor(e){super([e],`File "${e.name}" is not a supported file type`)}}function sc(i){return i.type.startsWith("image/")}function ac(i){let e,n,t;return{c(){e=L("button"),e.textContent="×",A(e,"class","c-image-chip__close svelte-1war7ei"),A(e,"aria-label","Remove image")},m(o,r){x(o,e,r),n||(t=Le(e,"click",$r(function(){Nt(i[3])&&i[3].apply(this,arguments)})),n=!0)},p(o,r){i=o},d(o){o&&b(e),n=!1,t()}}}function jg(i){let e,n,t,o={ctx:i,current:null,token:null,hasCatch:!1,pending:Xg,then:Gg,catch:Vg,value:11,blocks:[,,,]};return vr(n=i[2](i[1]),o),{c(){e=me(),o.block.c()},m(r,s){x(r,e,s),o.block.m(r,o.anchor=s),o.mount=()=>e.parentNode,o.anchor=e,t=!0},p(r,s){i=r,o.ctx=i,6&s&&n!==(n=i[2](i[1]))&&vr(n,o)||Vi(o,i,s)},i(r){t||(d(o.block),t=!0)},o(r){for(let s=0;s<3;s+=1){const c=o.blocks[s];$(c)}t=!1},d(r){r&&b(e),o.block.d(r),o.token=null,o=null}}}function qg(i){let e,n,t=(Ha(i[0])||i[0])+"";return{c(){e=L("div"),n=G(t),A(e,"class","c-image-chip__file-extension svelte-1war7ei")},m(o,r){x(o,e,r),F(e,n)},p(o,r){1&r&&t!==(t=(Ha(o[0])||o[0])+"")&&_e(n,t)},i:P,o:P,d(o){o&&b(e)}}}function Wg(i){let e,n,t;return n=new go({props:{size:1}}),{c(){e=L("div"),v(n.$$.fragment),A(e,"class","c-image-chip__loading svelte-1war7ei")},m(o,r){x(o,e,r),w(n,e,null),t=!0},p:P,i(o){t||(d(n.$$.fragment,o),t=!0)},o(o){$(n.$$.fragment,o),t=!1},d(o){o&&b(e),y(n)}}}function Vg(i){return{c:P,m:P,p:P,i:P,o:P,d:P}}function Gg(i){let e;function n(r,s){return r[11]?Kg:Yg}let t=n(i),o=t(i);return{c(){o.c(),e=me()},m(r,s){o.m(r,s),x(r,e,s)},p(r,s){t===(t=n(r))&&o?o.p(r,s):(o.d(1),o=t(r),o&&(o.c(),o.m(e.parentNode,e)))},i:P,o:P,d(r){r&&b(e),o.d(r)}}}function Yg(i){let e;return{c(){e=L("div"),e.innerHTML='<svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M14,2H6A2,2 0 0,0 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2M18,20H6V4H13V9H18V20Z"></path></svg>',A(e,"class","c-image-chip__file-icon svelte-1war7ei")},m(n,t){x(n,e,t)},p:P,d(n){n&&b(e)}}}function Kg(i){let e,n;return{c(){e=L("img"),La(e.src,n=i[11])||A(e,"src",n),A(e,"alt",""),A(e,"class","c-image-chip__image svelte-1war7ei")},m(t,o){x(t,e,o),i[9](e)},p(t,o){6&o&&!La(e.src,n=t[11])&&A(e,"src",n)},d(t){t&&b(e),i[9](null)}}}function Xg(i){let e,n,t;return n=new go({props:{size:1}}),{c(){e=L("div"),v(n.$$.fragment),A(e,"class","c-image-chip__loading svelte-1war7ei")},m(o,r){x(o,e,r),w(n,e,null),t=!0},p:P,i(o){t||(d(n.$$.fragment,o),t=!0)},o(o){$(n.$$.fragment,o),t=!1},d(o){o&&b(e),y(n)}}}function Zg(i){let e,n,t=i[6]?`${Math.round(i[6]/1024)}KB`:"",o=i[5]&&cc();return{c(){o&&o.c(),e=B(),n=G(t)},m(r,s){o&&o.m(r,s),x(r,e,s),x(r,n,s)},p(r,s){r[5]?o||(o=cc(),o.c(),o.m(e.parentNode,e)):o&&(o.d(1),o=null),64&s&&t!==(t=r[6]?`${Math.round(r[6]/1024)}KB`:"")&&_e(n,t)},i:P,o:P,d(r){r&&(b(e),b(n)),o&&o.d(r)}}}function Jg(i){let e,n,t;return n=new go({props:{size:1}}),{c(){e=L("div"),v(n.$$.fragment),A(e,"class","c-image-chip__size-loading svelte-1war7ei")},m(o,r){x(o,e,r),w(n,e,null),t=!0},p:P,i(o){t||(d(n.$$.fragment,o),t=!0)},o(o){$(n.$$.fragment,o),t=!1},d(o){o&&b(e),y(n)}}}function cc(i){let e;return{c(){e=L("span"),e.textContent="⚠️",A(e,"class","c-image-chip__warning-icon svelte-1war7ei")},m(n,t){x(n,e,t)},d(n){n&&b(e)}}}function Qg(i){let e,n,t,o,r,s,c,a,l,u,f,m,p,_,M,C,T,E=i[7](),R=E&&ac(i);const N=[Wg,qg,jg],J=[];function Q(Y,V){return 1&V&&(o=null),Y[4]?0:(o==null&&(o=!i1(Y[0])),o?1:2)}r=Q(i,-1),s=J[r]=N[r](i);const X=[Jg,Zg],K=[];function H(Y,V){return Y[4]?0:1}return p=H(i),_=K[p]=X[p](i),{c(){e=L("div"),R&&R.c(),n=B(),t=L("div"),s.c(),c=B(),a=L("div"),l=L("div"),u=G(i[0]),f=B(),m=L("div"),_.c(),A(t,"class","c-image-render__chip-preview svelte-1war7ei"),A(l,"class","c-image-chip__filename svelte-1war7ei"),A(l,"title",i[0]),A(m,"class","c-image-chip__size svelte-1war7ei"),A(a,"class","c-image-chip__info svelte-1war7ei"),A(e,"class","c-image-chip svelte-1war7ei"),A(e,"role","button"),A(e,"tabindex","0"),ke(e,"is-over-limit",i[5])},m(Y,V){x(Y,e,V),R&&R.m(e,null),F(e,n),F(e,t),J[r].m(t,null),F(e,c),F(e,a),F(a,l),F(l,u),F(a,f),F(a,m),K[p].m(m,null),M=!0,C||(T=[Le(e,"click",e0),Le(e,"keydown",i[10])],C=!0)},p(Y,[V]){128&V&&(E=Y[7]()),E?R?R.p(Y,V):(R=ac(Y),R.c(),R.m(e,n)):R&&(R.d(1),R=null);let Z=r;r=Q(Y,V),r===Z?J[r].p(Y,V):(j(),$(J[Z],1,1,()=>{J[Z]=null}),q(),s=J[r],s?s.p(Y,V):(s=J[r]=N[r](Y),s.c()),d(s,1),s.m(t,null)),(!M||1&V)&&_e(u,Y[0]),(!M||1&V)&&A(l,"title",Y[0]);let re=p;p=H(Y),p===re?K[p].p(Y,V):(j(),$(K[re],1,1,()=>{K[re]=null}),q(),_=K[p],_?_.p(Y,V):(_=K[p]=X[p](Y),_.c()),d(_,1),_.m(m,null)),(!M||32&V)&&ke(e,"is-over-limit",Y[5])},i(Y){M||(d(s),d(_),M=!0)},o(Y){$(s),$(_),M=!1},d(Y){Y&&b(e),R&&R.d(),J[r].d(),K[p].d(),C=!1,Qt(T)}}}const e0=i=>{i.preventDefault()};function t0(i,e,n){let t,{title:o}=e,{src:r}=e,{loadImage:s}=e,{removeImage:c}=e,{isLoading:a=!1}=e,{isOverLimit:l=!1}=e,{fileSizeBytes:u=0}=e,{isEditable:f}=e;return i.$$set=m=>{"title"in m&&n(0,o=m.title),"src"in m&&n(1,r=m.src),"loadImage"in m&&n(2,s=m.loadImage),"removeImage"in m&&n(3,c=m.removeImage),"isLoading"in m&&n(4,a=m.isLoading),"isOverLimit"in m&&n(5,l=m.isOverLimit),"fileSizeBytes"in m&&n(6,u=m.fileSizeBytes),"isEditable"in m&&n(7,f=m.isEditable)},[o,r,s,c,a,l,u,f,t,function(m){et[m?"unshift":"push"](()=>{t=m,n(8,t)})},m=>{(function(p){p.key!=="ArrowUp"&&p.key!=="ArrowDown"&&p.key!=="ArrowLeft"&&p.key!=="ArrowRight"||(p.preventDefault(),p.stopPropagation())})(m)}]}class n0 extends ue{constructor(e){super(),de(this,e,t0,Qg,ce,{title:0,src:1,loadImage:2,removeImage:3,isLoading:4,isOverLimit:5,fileSizeBytes:6,isEditable:7})}}async function zf(i,e=1024){return new Promise((n,t)=>{const o=document.createElement("canvas"),r=o.getContext("2d"),s=new Image;s.onload=()=>{let c=s.width,a=s.height;c>a?c>e&&(a=Math.round(a*(e/c)),c=e):a>e&&(c=Math.round(c*(e/a)),a=e),o.width=c,o.height=a,r?(r.drawImage(s,0,0,c,a),o.toBlob(l=>{l!=null?n(l):t(new Error("Failed to create blob"))})):t(new Error("Could not get canvas context"))},s.onerror=()=>t(new Error("Failed to load image")),s.src=URL.createObjectURL(i)})}var Ci=(i=>(i.collapsed="collapsed",i.preview="preview",i.full="full",i))(Ci||{});const Fi=class Fi{constructor(e){$e(this,"_tipTapExtension");$e(this,"_editor");$e(this,"_createTipTapExtension",()=>{const e=this.registerEditor,n=this.unregisterEditor,t=this.insertFilesIntoEditor;return Ug.extend({name:"file",addOptions(){var o;return{...(o=this.parent)==null?void 0:o.call(this),allowBase64:!0,preserveOnSplit:!1,defaultRenderMode:Ci.collapsed}},addAttributes(){var o;return{...(o=this.parent)==null?void 0:o.call(this),renderMode:{default:Ci.collapsed},title:{default:""},isLoading:{default:!1},fileSizeBytes:{default:0},mimeType:{default:""}}},onCreate(){var o;(o=this.parent)==null||o.call(this),e(this.editor)},onDestroy(){var o;(o=this.parent)==null||o.call(this),n()},addCommands(){var o;return{...(o=this.parent)==null?void 0:o.call(this),insertFilesIntoEditor:r=>({chain:s})=>s().command(()=>!!t(r)).focus("end").run()}},addNodeView:()=>this._createNodeView(),addProseMirrorPlugins(){var o;return[...((o=this.parent)==null?void 0:o.call(this))??[],new Gp({key:Fi.IMAGE_PASTE_HANDLER_PLUGIN_KEY,props:{handlePaste:(r,s)=>{var c,a;return(a=(c=s.clipboardData)==null?void 0:c.files)!=null&&a.length?t([...s.clipboardData.files]).okFiles.length>0&&(s.preventDefault(),!0):!1}}})]}})});$e(this,"_createNodeView",()=>({node:e})=>{var o,r;const n=document.createElement("div"),t=new n0({target:n,props:{title:String(e.attrs.title),src:String(e.attrs.src),loadImage:((o=this._options)==null?void 0:o.renderImage)??(()=>Promise.resolve(void 0)),isLoading:!!e.attrs.isLoading,fileSizeBytes:Number(e.attrs.fileSizeBytes)||0,isOverLimit:this._calculateIsOverLimit(Number(e.attrs.fileSizeBytes)||0,String(e.attrs.mimeType||"").startsWith("image/")),removeImage:async()=>{var s;if(this._editor){try{(s=this._options)!=null&&s.deleteImage&&await this._options.deleteImage(String(e.attrs.src))}catch(c){console.error("Failed to delete image:",c)}this._editor.chain().command(({tr:c,state:a})=>(a.doc.descendants((l,u)=>{if(e===l)return c.delete(u,u+l.nodeSize),!1}),!0)).focus("end").run()}},isEditable:((r=this._options)==null?void 0:r.isEditable)??(()=>!0)}});return{dom:n,destroy:()=>{t.$destroy()},update:s=>s.type.name==="file"&&(e=s,t.$set({src:String(s.attrs.src),isLoading:!!s.attrs.isLoading,fileSizeBytes:Number(s.attrs.fileSizeBytes)||0,isOverLimit:this._calculateIsOverLimit(Number(s.attrs.fileSizeBytes)||0,String(s.attrs.mimeType||"").startsWith("image/"))}),!0)}});$e(this,"registerEditor",e=>{this._editor=e});$e(this,"unregisterEditor",()=>{this._editor=void 0});$e(this,"_getImageNodeCount",()=>{if(!this._editor)return;let e=0;return this._editor.state.doc.descendants(n=>{n.type.name==="file"&&e++}),e});$e(this,"_calculateIsOverLimit",(e,n=!0)=>{var o,r;if(e===0)return!1;const t=n?(o=this._options)==null?void 0:o.maxImageSizeKb:(r=this._options)==null?void 0:r.maxTextSizeKb;return t?e>1024*t:!1});$e(this,"updateOptions",e=>{this._options={...e}});$e(this,"insertFilesIntoEditor",e=>{const{validFiles:n,errors:t}=this.validateFiles(e),o=[];for(const r of n){if(!this._editor)continue;const s=this._insertLoadingImage(this._editor,r.name);this._processImage(r,s).catch(c=>{o.push(new Cs([r],String(c)))})}return{errors:[...t,...o],okFiles:n}});this._options=e,this._tipTapExtension=this._createTipTapExtension()}validateFiles(e){const n=[],t=[];for(const s of e){const c=(o=s,r=this._options,function(a,l){const u=l||["image","text"];if(u.includes("image")&&a.type.startsWith("image/"))return!0;if(!u.includes("text"))return!1;if(a.type.startsWith("text/")||["application/json","application/xml","application/javascript","application/typescript","application/x-sh","application/x-shellscript","application/x-yaml","application/yaml"].includes(a.type))return!0;const f=a.name.toLowerCase();return!(!f.endsWith(".md")&&!f.endsWith(".markdown"))||!!["dockerfile",".gitignore",".gitattributes","makefile","readme","license","changelog","authors","contributors","copying","install","news","todo",".env",".env.example",".env.local",".env.development",".env.production"].includes(f)}(o,r==null?void 0:r.supportedFileTypes)?o:new Hg(o));c instanceof Cs?n.push(c):t.push(c)}var o,r;return{validFiles:t,errors:n}}async _processImage(e,n){var t,o,r,s;try{let c,a;if(sc(e)){const l=await zf(e);if(!l||!this._editor)return;c=new File([l],e.name,{type:e.type})}else c=e;a=sc(e)?await((o=(t=this._options)==null?void 0:t.saveImage)==null?void 0:o.call(t,c))??c.name:await((s=(r=this._options)==null?void 0:r.saveAttachment)==null?void 0:s.call(r,c))??c.name,this._updateImageNode(n,{src:a,title:c.name,isLoading:!1,fileSizeBytes:c.size,mimeType:c.type})}catch(c){throw console.error("Could not process image: ",c),this._editor&&this._removeImageNode(n),c}}get tipTapExtension(){return this._tipTapExtension}_findImageNodeBySrc(e){if(!this._editor||!e)return null;let n=null;return this._editor.state.doc.descendants((t,o)=>t.type.name!=="file"||t.attrs.src!==e||(n={node:t,pos:o},!1)),n}_insertLoadingImage(e,n){const{from:t}=e.state.selection,o=`${n}-${Date.now()}-${Math.random().toString(36).substring(2)}`;return e.chain().command(({tr:r})=>{const s=t||r.doc.content.size;return r.insert(s,[e.schema.nodes.file.create({src:o,originalName:n,title:n,renderMode:Ci.collapsed,isLoading:!0}),e.schema.nodes.paragraph.create({text:""})]),!0}).focus("end").run(),o}_updateImageNode(e,n){if(!this._editor)return;const t=this._findImageNodeBySrc(e);t&&this._editor.chain().command(({tr:o})=>(o.setNodeMarkup(t.pos,void 0,{...t.node.attrs,...n}),!0)).run()}_removeImageNode(e){if(!this._editor)return;const n=this._findImageNodeBySrc(e);n&&this._editor.chain().command(({tr:t})=>(t.delete(n.pos,n.pos+n.node.nodeSize),!0)).run()}static hasLoadingImages(e){if(!e)return!1;const n=t=>{var o;if(!t)return!1;if(t.type==="file"&&((o=t.attrs)!=null&&o.isLoading))return!0;if(t.content){if(!Array.isArray(t.content))return!1;for(const r of t.content)if(n(r))return!0}return!1};return n(e)}};$e(Fi,"IMAGE_PASTE_HANDLER_PLUGIN_KEY",new Vp("augment-prosemirror-image-paste-handler"));let Ei=Fi;const Ai=10,Mi=1024,ki=24;function o0(i){const e=function(t){if(!t)return[];const o=[],r=s=>{if(s&&(s.type==="file"&&s.attrs&&o.push({src:s.attrs.src||"",title:s.attrs.title||"",fileSizeBytes:Number(s.attrs.fileSizeBytes)||0,isLoading:!!s.attrs.isLoading}),s.content&&Array.isArray(s.content)))for(const c of s.content)r(c)};return r(t),o}(i),n=e.filter(t=>!t.isLoading);return{imageCount:n.length,imageSizeSumKb:Math.round(n.reduce((t,o)=>t+o.fileSizeBytes,0)/1024)}}function r0(i){const e=function(t){if(!t)return[];const o=[],r=s=>{if(s&&(s.type==="file"&&s.attrs&&((s.attrs.mimeType||"").startsWith("image/")||o.push({src:s.attrs.src||"",title:s.attrs.title||"",fileSizeBytes:Number(s.attrs.fileSizeBytes)||0,isLoading:!!s.attrs.isLoading})),s.content&&Array.isArray(s.content)))for(const c of s.content)r(c)};return r(t),o}(i),n=e.filter(t=>!t.isLoading);return{textSizeSumKb:Math.round(n.reduce((t,o)=>t+o.fileSizeBytes,0)/1024)}}function Bf(i){const e=o0(i),n=r0(i),{imageCount:t,imageSizeSumKb:o}=e,{textSizeSumKb:r}=n,s=t>Ai&&Ai>0,c=o>Mi&&Mi>0,a=r>ki&&ki>0,l=s||c||a,u=[s?`Up to ${Ai} images are supported.`:null,c?`Total image size exceeds the ${Mi}KB limit. Current size: ${o}KB`:null,a?`Total text file size exceeds the ${ki}KB limit. Current size: ${r}KB`:null].filter(Boolean);return{hasWarning:l,warningMessage:u.length>0?u[0]:"",warningMessages:u}}function i0(i,e,n){let{maxImages:t}=e,{saveImage:o}=e,{saveAttachment:r}=e,{deleteImage:s}=e,{renderImage:c}=e,{isEditable:a=()=>!0}=e,{changeImageMode:l}=e,{supportedFileTypes:u=["image"]}=e;const f=new Ei({changeImageMode:l,maxImages:t,saveImage:o,saveAttachment:r,deleteImage:s,renderImage:c,isEditable:a,maxImageSizeKb:Mi,maxTextSizeKb:ki,supportedFileTypes:u}),m=Se(Bs.CONTEXT_KEY).pluginManager.registerPlugin(f);return jr(m),i.$$set=p=>{"maxImages"in p&&n(0,t=p.maxImages),"saveImage"in p&&n(1,o=p.saveImage),"saveAttachment"in p&&n(2,r=p.saveAttachment),"deleteImage"in p&&n(3,s=p.deleteImage),"renderImage"in p&&n(4,c=p.renderImage),"isEditable"in p&&n(5,a=p.isEditable),"changeImageMode"in p&&n(6,l=p.changeImageMode),"supportedFileTypes"in p&&n(7,u=p.supportedFileTypes)},[t,o,r,s,c,a,l,u]}let s0=class extends ue{constructor(i){super(),de(this,i,i0,null,ce,{maxImages:0,saveImage:1,saveAttachment:2,deleteImage:3,renderImage:4,isEditable:5,changeImageMode:6,supportedFileTypes:7})}};function lc(i){return i.line_start===i.line_end?`L${i.line_start+1}`:`L${i.line_start+1}-${i.line_end+1}`}const Uf=[{id:"find",label:"find",description:"things in your code base",requiresInput:!0,requiresEditorSelection:!1,placeholderText:"What code are you looking for?",selectionReminderMessage:"Select code in the editor to find.",visible:!0,promptFactory:async i=>`Find ${i}`},{id:"explain",label:"explain",description:"how selected code works",requiresInput:!1,requiresEditorSelection:!0,placeholderText:"",selectionReminderMessage:"Select code in the editor to explain.",visible:!0,promptFactory:async()=>"Explain the selected code"},{id:"fix",label:"fix",description:"issues in selected code",requiresInput:!1,requiresEditorSelection:!0,placeholderText:"",selectionReminderMessage:"Select code in the editor to fix.",visible:!0,promptFactory:async function(i,e){const n=await async function(o){let r=[];try{r=await o.extensionClient.getDiagnostics()}catch(s){console.error("Failed to get diagnostic messages:",s)}return r}(e);let t="Fix the selected code.";return t+=function(o){if(o.length===0)return" The IDE does not report any issues on the selected code.";if(o.length===1)return` The IDE reports the following issue:

• ${lc(o[0].location)}: ${o[0].message}`;{const r=o.sort((l,u)=>l.location.line_start-u.location.line_start).reduce((l,u)=>{const f=`${u.location.line_start},${u.location.line_end}`;return l[f]||(l[f]=[]),l[f].push(u),l},{}),s=Object.entries(r).map(([l,u])=>{const[f,m]=l.split(",").map(Number),p=lc({path:"",line_start:f,line_end:m});return u.length===1?`• ${p}: ${u[0].message}`:`• ${p}:
${u.map((_,M)=>`    ${M+1}. ${_.message}`).join(`
`)}`}).join(`
`),c=Math.min(...o.map(l=>l.location.line_start)),a=Math.max(...o.map(l=>l.location.line_end));return` The IDE reports the following issues on ${c===a?`L${c+1}`:`L${c+1}-${a+1}`}:

${s}`}}(n),t}},{id:"write-test",label:"write-test",description:"add tests for selected code",requiresInput:!1,requiresEditorSelection:!0,placeholderText:"",selectionReminderMessage:"Select code in the editor to test.",visible:!0,promptFactory:async()=>"Write a test for the selected code"},{id:"document",label:"document",description:"write documentation for selected code",requiresInput:!1,requiresEditorSelection:!0,placeholderText:"",selectionReminderMessage:"Select code in the editor to document.",visible:!0,promptFactory:async()=>"Document selected code. Do not make unnecessary changes."},{id:"generate-commit-message",label:"generate-commit-message",description:"generate a commit message",requiresInput:!1,requiresEditorSelection:!1,placeholderText:"",selectionReminderMessage:"Hit enter or send to generate a commit message",visible:!0,promptFactory:async()=>""}];function Si(i){return Uf.find(e=>e.id===i)}function Hf(){return Uf.filter(i=>i.visible)}class a0{constructor(e,n){$e(this,"_model");$e(this,"_fn");$e(this,"dispose",()=>{this._model.removeAfterCommandListener(this._fn)});this._model=e,this._fn=n}}class c0{constructor(e,n){$e(this,"_activeCommand",Tt(void 0));$e(this,"_isActiveCommandRunnable",Tt(!1));$e(this,"_afterCommandListeners",[]);$e(this,"_inputText","");$e(this,"_selections",[]);$e(this,"hasActiveCommand",jn(this._activeCommand,e=>e!==void 0));$e(this,"isActiveCommandRunnable",ds(this._isActiveCommandRunnable));$e(this,"activeCommand",ds(this._activeCommand));$e(this,"activeCommandData",jn(this._activeCommand,e=>Si(e)));this._chatModel=e,this._agentConversationModel=n}get inputText(){return this._inputText}get selections(){return this._selections}setActiveCommand(e){this._activeCommand.set(e),this.updateRunnable()}setInputText(e){this._inputText=e,this.updateRunnable()}setSelections(e){this._selections=e,this.updateRunnable()}async runActiveCommand(){var t,o,r;const e=Si(ot(this._activeCommand));if(!e)return;const n=await e.promptFactory(this._inputText,this._chatModel);this._activeCommand.set(void 0),await this._chatModel.setCurrentConversation(),e.id==="generate-commit-message"?(t=this._chatModel.currentConversationModel)==null||t.generateCommitMessage():(r=this._chatModel.currentConversationModel)==null||r.sendExchange({request_message:n,rich_text_json_repr:void 0,status:cn.draft,model_id:((o=this._chatModel.currentConversationModel)==null?void 0:o.selectedModelId)??void 0}),this._chatModel.host.postMessage({type:jt.usedSlashAction}),this.reportCommandMetric(e.id),this._afterCommandListeners.forEach(s=>s(n))}reportCommandMetric(e){switch(e){case"fix":this._chatModel.extensionClient.reportWebviewClientEvent(Qo.chatUseActionFix);break;case"explain":this._chatModel.extensionClient.reportWebviewClientEvent(Qo.chatUseActionExplain);break;case"write-test":this._chatModel.extensionClient.reportWebviewClientEvent(Qo.chatUseActionWriteTest);break;case"find":this._chatModel.extensionClient.reportWebviewClientEvent(Qo.chatUseActionFind)}}cancelActiveCommand(){this._activeCommand.set(void 0),this._afterCommandListeners.forEach(e=>e(void 0))}afterCommand(e){return this._afterCommandListeners.push(e),new a0(this,e)}removeAfterCommandListener(e){this._afterCommandListeners=this._afterCommandListeners.filter(n=>n!==e)}updateRunnable(){let e=!1;const n=ot(this._activeCommand),t=Si(n);n!==void 0&&t!==void 0&&(e=!0,t!=null&&t.requiresInput&&(e=e&&this._inputText!==""),t!=null&&t.requiresEditorSelection&&(e=e&&this._selections.length>0)),this._isActiveCommandRunnable.set(e)}handleMessageFromExtension(e){const n=e.data;return n.type===jt.runSlashCommand&&(n.data==="fix"?this._createNewThreadForFix():ot(this._agentConversationModel.isCurrConversationAgentic)&&this._agentConversationModel.setToChat(),this.setActiveCommand(n.data),this.runActiveCommand(),!0)}async _createNewThreadForFix(){const e=this._chatModel.chatModeModel;if(e)if(this._chatModel.currentChatMode===fs.chat)e.setToChat();else{const n=ot(this._chatModel.agentExecutionMode);await e.createNewLocalAgentThread(n)}else{const n=ot(this._chatModel.agentExecutionMode);ot(this._agentConversationModel.isCurrConversationAgentic)||(this._agentConversationModel.setToAgentic(),this._chatModel.agentExecutionMode.set(n))}}}function uc(i,e){return function(n,t){if(n.length<=t||n.length===0)return{truncatedText:n};const o=n.split(`
`),r="... additional lines truncated ..."+(o[0].endsWith("\r")?"\r":"");let s,c="";if(o.length<2||o[0].length+o[o.length-1].length+r.length>t){const a=Math.floor(t/2);c=[n.slice(0,a),"<...>",n.slice(-a)].join(""),s=[1,1,o.length,o.length]}else{const a=[],l=[];let u=r.length+1;for(let f=0;f<Math.floor(o.length/2);f++){const m=o[f],p=o[o.length-1-f],_=m.length+p.length+2;if(u+_>t)break;u+=_,a.push(m),l.push(p)}s=[1,a.length,o.length-l.length+1,o.length],a.push(r),a.push(...l.reverse()),c=a.join(`
`)}return{truncatedText:c,shownRangeWhenTruncated:s}}(i,e).truncatedText}async function l0(i,e,n,t=1024){try{const o=function(s,c,a){const l=atob(s);let u=l.length;const f=new Uint8Array(u);for(;u--;)f[u]=l.charCodeAt(u);return new File([f],c,{type:a})}(i,e,n),r=await zf(o,t);return new Promise((s,c)=>{const a=new FileReader;a.onloadend=()=>{if(typeof a.result=="string"){const l=a.result.split(","),u=l.length>1?l[1]:a.result;s({dataUrl:u,mimeType:"image/png"})}else c(new Error("Failed to convert blob to data URL"))},a.onerror=l=>{c(new Error("FileReader error"))},a.readAsDataURL(r)})}catch(o){return console.error("Error scaling image:",o),{dataUrl:i,mimeType:n}}}async function u0(i,e=!0){if(!i.contentNodes||i.contentNodes.length===0)return i;const n=await async function(t,o=!0){const r=[];for(const s of t)if(s.type===vs.ContentImage&&s.image_content&&s.image_content.image_data){if(!o)continue;const c=s.image_content.image_data,a=s.image_content.media_type||"image/png",l=`image.${a.split("/")[1]||"png"}`,u=await l0(c,l,a);r.push({type:vs.ContentImage,image_content:{image_data:u.dataUrl,media_type:u.mimeType}})}else r.push(s);return r}(i.contentNodes,e);return{...i,contentNodes:n}}const d0={"save-file":`save-file tool call generation failed because tool input exceeded the token limit.
Please try again by limiting the file content to at most 300 lines. If more content needs to be added call save-file tool to edit the file after it has been created.
`,"str-replace-edit":`edit tool call generation failed because tool input exceeded the token limit.
Please try again by breaking down the edits into smaller chunks of at most 300 lines each. Then put as many of these chunks in a single tool call as possible up to the total limit of 300 lines.
`},Oi=class Oi{constructor(e,n,t,o){$e(this,"_disposables",[]);$e(this,"_activeTool");$e(this,"_processLastExchange",(e,n)=>{var o;if(n.stop_reason===ja.MAX_TOKENS&&this._handleMaxTokensRetry(e,n))return;const t=(o=n.structured_output_nodes)==null?void 0:o.filter(r=>r.type===Rr.TOOL_USE);for(const r of t??[]){const s=r.tool_use;if(s===void 0)continue;const c=this._conversationModel.getToolUseState(e,s.tool_use_id);c.phase===xt.new&&this._validateAndCheckTool(e,s.tool_use_id,s.tool_name,JSON.parse(s.input_json),this._conversationModel.chatHistory.reduce((a,l)=>(Nr(l)&&a.push(hs(l)),a),[])),this._markCancelledIfStale(e,s.tool_use_id,c.phase)}});$e(this,"_handleMaxTokensRetry",(e,n)=>{var a;const t=rp(n.structured_output_nodes),o=t==null?void 0:t.tool_use;if(!o||(t==null?void 0:t.type)!==Rr.TOOL_USE_START)return!1;const r=this._conversationModel.chatHistory.filter(Nr).slice(-6).filter(l=>{var u;return l.stop_reason===ja.MAX_TOKENS&&((u=l.structured_output_nodes)==null?void 0:u.some(f=>f.type===Rr.TOOL_USE_START))});if(r.length>2)return this._conversationModel.updateChatItem(e,{...n,response_text:"",display_error_message:`We encountered difficulties running the ${o.tool_name} tool after attempting ${r.length} different approaches.`,status:cn.failed}),this._conversationModel.updateToolUseState({requestId:e,toolUseId:o.tool_use_id,phase:xt.error}),!0;const s=o.tool_use_id;if(!((a=this._conversationModel.getToolUseState(e,s).result)!=null&&a.isError)){const l=function(u,f=0){const m=d0[u];if(!m)return"";switch(f){case 0:return m;case 1:return m+", be better this time.";default:return`${u} tool call generation failed because tool input exceeded the token limit. Take some care in making smaller chunks`}}(o.tool_name,r.length);this._conversationModel.updateToolUseState({requestId:e,toolUseId:s,phase:xt.error,result:{text:l,isError:!0}}),this._sendToolResultExchange(e,o.tool_use_id)}return!0});$e(this,"_validateAndCheckTool",async(e,n,t,o,r)=>{if(this._activeTool!==void 0)return void console.error("_validateAndCheckTool called while another tool is active",this._activeTool);this._activeTool={id:n,requestId:e,phase:xt.checkingSafety},this._conversationModel.updateToolUseState({requestId:e,toolUseId:n,phase:xt.checkingSafety});const s=await this._extensionClient.getToolIdentifier(t);if(!s.found)return this._activeTool=void 0,void this._reportToolError(e,n,`Tool "${t}" does not exist`);if(s.toolIdentifier.hostName===Dp.mcpHost){const l=this._conversationModel.lastExchange;if(l!=null&&l.structured_output_nodes){const u=l.structured_output_nodes.find(f=>{var m;return f.type===Rr.TOOL_USE&&((m=f.tool_use)==null?void 0:m.tool_use_id)===n});u!=null&&u.tool_use&&s.mcpToolName&&s.mcpServerName&&(u.tool_use.mcp_server_name=s.mcpServerName,u.tool_use.mcp_tool_name=s.mcpToolName)}}const c={toolName:t,input:o,agentMode:ot(this._chatModel.agentExecutionMode)},a=(await this._extensionClient.checkSafe(c)).isSafe;this._activeTool=void 0,a?await this.callTool(e,n,t,o,r,this._conversationModel.id):this._conversationModel.updateToolUseState({requestId:e,toolUseId:n,phase:xt.runnable})});$e(this,"_reportToolError",(e,n,t)=>{this._conversationModel.updateToolUseState({requestId:e,toolUseId:n,phase:xt.error,result:{isError:!0,text:t}}),this._sendToolResultExchange(e,n)});$e(this,"_sendToolResultExchange",(e,n)=>{const t=this._conversationModel.getLastToolUseState(),o=this._generateToolResultNodesFromState(e,n);(t==null?void 0:t.requestId)===e&&(t==null?void 0:t.toolUseId)===n&&o?this._conversationModel.sendExchange({request_message:"",status:cn.draft,structured_request_nodes:[{id:1,type:Km.TOOL_RESULT,tool_result_node:o}],model_id:this._conversationModel.selectedModelId??void 0}):o?this._extensionClient.reportError({originalRequestId:e,sanitizedMessage:"Tried to send tool result after conversation advanced",stackTrace:"",diagnostics:[{key:"tool_use_id",value:n}]}):this._extensionClient.reportError({originalRequestId:e,sanitizedMessage:"Tried to send tool result, but no tool result found",stackTrace:"",diagnostics:[{key:"tool_use_id",value:n},{key:"request_id",value:e}]})});$e(this,"callTool",async(e,n,t,o,r,s)=>{var c,a;if(this._activeTool===void 0){this._conversationModel.updateToolUseState({requestId:e,toolUseId:n,phase:xt.running}),this._activeTool={id:n,requestId:e,phase:xt.running};try{const l=function(p,_){if(p.contentNodes&&p.contentNodes.length>0){const M=p.contentNodes.map(C=>{if(C.type===vs.ContentText){let T="";return C.text_content&&(T=uc(C.text_content,_/p.contentNodes.length)),{...C,text_content:T}}return C});return{...p,contentNodes:M}}return{...p,text:uc(p.text,_)}}(await this._extensionClient.callTool(e,n,t,o,r,s),Oi.maxResultBytes),u=await u0(l,this._chatModel.flags.enableDebugFeatures),f=this._conversationModel.getToolUseState(e,n);if(f.phase===xt.new||f.phase===xt.cancelled)return;if(f.phase===xt.cancelling)return void this._conversationModel.updateToolUseState({requestId:e,toolUseId:n,phase:xt.cancelled,result:u});let m=u.isError?xt.error:xt.completed;this._conversationModel.updateToolUseState({requestId:e,toolUseId:n,phase:m,result:u})}catch(l){const u=this._conversationModel.getToolUseState(e,n);if(u.phase===xt.new||u.phase===xt.cancelled)return;const f=l instanceof Error?l.message:String(l);if(u.phase===xt.cancelling)return void this._conversationModel.updateToolUseState({requestId:e,toolUseId:n,phase:xt.cancelled,result:{isError:!0,text:f}});this._conversationModel.updateToolUseState({requestId:e,toolUseId:n,phase:xt.error,result:{isError:!0,text:f}})}finally{((c=this._activeTool)==null?void 0:c.id)===n&&((a=this._activeTool)==null?void 0:a.requestId)===e&&(this._activeTool=void 0)}this._sendToolResultExchange(e,n)}else console.error("callTool called while another tool is active","tried to run:",n,"active tool:",this._activeTool)});$e(this,"cancelToolRun",async(e,n)=>{var t,o;this._remoteAgentsModel&&this._remoteAgentsModel.isActive&&await this._remoteAgentsModel.interruptAgent(),this._activeTool!==void 0&&this._activeTool.requestId===e&&this._activeTool.id===n?(this._activeTool={id:n,requestId:e,phase:xt.cancelling},this._conversationModel.updateToolUseState({requestId:e,toolUseId:n,phase:xt.cancelling}),await this._extensionClient.cancelToolRun(e,n),((t=this._activeTool)==null?void 0:t.id)===n&&((o=this._activeTool)==null?void 0:o.requestId)===e&&(this._activeTool=void 0)):console.error("cancelToolRun called while another tool is active","tried to cancel:",n,"active tool:",this._activeTool)});$e(this,"skipToolRun",async(e,n)=>{this._activeTool===void 0?(this._conversationModel.updateToolUseState({requestId:e,toolUseId:n,phase:xt.cancelled,result:{isError:!0,text:"Tool did not run. User clicked `Skip` to cancel."}}),this._sendToolResultExchange(e,n)):console.error("skipToolRun called while another tool is active","tried to cancel:",n,"active tool:",this._activeTool)});$e(this,"_markCancelledIfStale",(e,n,t)=>{this._activeTool!==void 0&&this._activeTool.id===n&&this._activeTool.requestId===e||t!==xt.new&&t!==xt.checkingSafety&&t!==xt.cancelling&&t!==xt.running||this._conversationModel.updateToolUseState({requestId:e,toolUseId:n,phase:xt.cancelled})});$e(this,"cancelActiveToolRun",async()=>{this._activeTool!==void 0&&await this.cancelToolRun(this._activeTool.requestId,this._activeTool.id)});$e(this,"interruptAllTools",async()=>{sp(this._conversationModel),await this.cancelActiveToolRun();const e=this._conversationModel.lastExchange;e&&!xp(e)&&this._conversationModel.addChatItem({request_id:crypto.randomUUID(),status:cn.cancelled,chatItemType:uo.agenticTurnDelimiter})});$e(this,"interruptToolsConversation",async()=>{await this._conversationModel.cancelMessage(),await this.interruptAllTools()});$e(this,"dispose",()=>{this._disposables.forEach(e=>e.dispose())});let r;this._conversationModel=e,this._extensionClient=n,this._chatModel=t,this._remoteAgentsModel=o;const s=this._conversationModel.subscribe(l=>{const u=l.lastExchange;if(Nr(u)&&u.request_id!==void 0){const f=u.request_id;r!==f&&(this._processLastExchange(f,u),r=f)}}),c=this._conversationModel.onNewConversation(()=>{this._extensionClient.closeAllToolProcesses()}),a=this._conversationModel.onHistoryDelete(()=>{this.cancelActiveToolRun()});this._disposables.push({dispose:s},{dispose:c},{dispose:a})}_generateToolResultNodesFromState(e,n){var r,s;const t=this._conversationModel.getToolUseState(e,n);if(t.phase!==xt.cancelled&&t.phase!==xt.completed&&t.phase!==xt.error)return;let o;return(r=t.result)!=null&&r.contentNodes?(o=ip(t.result.contentNodes,this._chatModel.flags.enableDebugFeatures),{content:"",is_error:t.result.isError,request_id:t.result.requestId,tool_use_id:n,content_nodes:o}):((s=t.result)==null?void 0:s.text)!==void 0?{content:t.result.text,is_error:t.result.isError,request_id:t.result.requestId,tool_use_id:n}:void 0}async getToolCallCheckpoint(e){try{return await this._extensionClient.getToolCallCheckpoint(e)}catch(n){return void console.error("Failed to get tool call checkpoint:",n)}}};$e(Oi,"maxResultBytes",65536);let As=Oi;const $0="You can only have %MAX_AGENTS% agents at a time. Please delete some before creating a new one.",sE="You can only have %MAX_AGENTS% active agents at a time. Please pause some before creating a new one.",jf=(i,e,n,t,o)=>()=>{var l,u;if(o)return!1;const r=((l=e.draftExchange)==null?void 0:l.request_message)??"",s=(u=e.draftExchange)==null?void 0:u.rich_text_json_repr,c=()=>{e.draftExchange||e.saveDraftExchange(r,s)};if(!i.currentAgentId){if(i.isCreatingAgent)return!1;i.setIsCreatingAgent(!0),e.clearDraftExchange();const f=async()=>{try{const m=await i.createRemoteAgentFromDraft(r,e.selectedModelId??void 0);m?i==null||i.setCurrentAgent(m):c()}catch(m){console.error("Failed to create remote agent: ",m),c()}finally{i.setIsCreatingAgent(!1)}};return n?(n==null||n.isGithubAuthenticated().then(m=>{if(!m)return i.setIsCreatingAgent(!1),void c();f()}).catch(m=>{console.error("Failed to check GitHub authentication status:",m),i.setIsCreatingAgent(!1),c()}),!0):(f(),!0)}const a=e.draftExchange;if(a&&i){e.clearDraftExchange();const f=e.selectedModelId;i.sendMessage(a.request_message,f??void 0).then(m=>{m||c()}).catch(()=>{c()})}return setTimeout(()=>t==null?void 0:t.blur(),50),!0};async function wi(i,e){await i.interruptAgent(),await e.sendDraftExchange()}async function f0(i,e,n,t,o){var r,s,c;switch(i){case Ti.send:return void await wi(n,e);case Ti.addTask:{if(!((r=t.flags)!=null&&r.enableTaskList)||!o||!e.rootTaskUuid)return void await wi(n,e);const a=((c=(s=e.draftExchange)==null?void 0:s.request_message)==null?void 0:c.trim())||"";if(!a)return;try{await async function(u,f,m){if(!m)throw new Error("No root task found for current conversation");const p=function(C){if(C=C.trim(),!C)return;const T=C.indexOf(`
`),E=C.substring(0,T===-1?void 0:T),R=C.substring(T).trim().replace(/\n/g," ");return{name:E,description:R}}(f);if(!p)return;const{name:_,description:M}=p;return await u.createTask(_,M,m)}(o,a,e.rootTaskUuid)&&e.clearDraftExchange()}catch(l){console.error("Task creation failed, falling back to regular send:",l),await wi(n,e)}return}default:return void await wi(n,e)}}function m0(i,e,n,t,o,r,s,c,a){var C,T;const l=i.currentConversationModel;if(!l)return{stateName:"noConversation",showCancelButton:!1,isDisabled:!0,disabledReason:"No active conversation",action:()=>!1,cancelAction:()=>!1};const u=ot(t.activeCommand),f=ot(e.isCurrConversationAgentic),m=(((T=(C=l.draftExchange)==null?void 0:C.request_message)==null?void 0:T.length)||0)>Br,p=(()=>{var E,R;if((E=i.flags)!=null&&E.enableChatMultimodal){const N=(R=l.draftExchange)==null?void 0:R.rich_text_json_repr;return!!N&&Ei.hasLoadingImages(N)}return!1})(),{hasFileWarning:_,fileWarningMessage:M}=(()=>{var E,R;if((E=i.flags)!=null&&E.enableChatMultimodal){const N=(R=l.draftExchange)==null?void 0:R.rich_text_json_repr;if(!N)return{hasFileWarning:!1,fileWarningMessage:""};const{hasWarning:J,warningMessage:Q}=Bf(N);return{hasFileWarning:J,fileWarningMessage:Q}}return{hasFileWarning:!1,fileWarningMessage:""}})();return m?{stateName:"overCharLimit",showCancelButton:!1,isDisabled:!0,disabledReason:`Message exceeds the ${Br} character limit`,action:()=>!1,cancelAction:()=>!1}:_?{stateName:"overImageLimit",showCancelButton:!1,isDisabled:!0,disabledReason:M,action:()=>!1,cancelAction:()=>!1}:s!=null&&s.isActive?function(E,R,N,J){var Z,re,le,oe,he,ie,xe,tt;let Q=!1;E.agentOverviews&&(Q=!!E.maxRemoteAgents&&E.agentOverviews.length>=E.maxRemoteAgents);let X=!1;const K=E.isCreatingAgent||(E==null?void 0:E.isActive)&&((Z=E==null?void 0:E.currentAgent)==null?void 0:Z.status)===Jt.agentStarting,H=((re=E==null?void 0:E.currentAgent)==null?void 0:re.status)===Jt.agentFailed;if(E.currentAgentId)X=!((le=R.draftExchange)!=null&&le.request_message)||K||H;else{const Ae=E.newAgentDraft;X=!((oe=R.draftExchange)!=null&&oe.request_message)||E.isCreatingAgent||Q||!((ie=(he=Ae==null?void 0:Ae.commitRef)==null?void 0:he.github_commit_ref)!=null&&ie.repository_url)||!((xe=Ae.selectedBranch)!=null&&xe.name)}const Y=E.isCurrentAgentRunning&&!K;let V;return X&&((tt=R.draftExchange)!=null&&tt.request_message?E.isCreatingAgent?V="Creating agent...":K?V="Agent is starting...":H?V="Agent has failed and cannot accept messages":Q&&(V=$0.replace("%MAX_AGENTS%",E.maxRemoteAgents.toString())):V="Please enter a message"),{stateName:"remoteAgentMode",showCancelButton:Y,isDisabled:X,disabledReason:V,action:jf(E,R,N,J,X),cancelAction:()=>(E.interruptAgent(),!0)}}(s,l,c,a):p?{stateName:"imagesLoading",showCancelButton:!1,isDisabled:!0,action:()=>!1,cancelAction:()=>(f?e.interruptAgent().catch(E=>{console.error("Failed to interrupt agent:",E)}):n.interruptToolsConversation(),!0)}:u?{stateName:"slashCommandActive",showCancelButton:!1,isDisabled:!1,action:()=>(t.runActiveCommand(),l.clearDraftExchange(),!0),cancelAction:()=>!1}:f?{stateName:"agentMode",showCancelButton:!1,isDisabled:!l.hasDraft,action:()=>(f0(o,l,e,i,r),!0),cancelAction:()=>(e.interruptAgent().catch(E=>{console.error("Failed to interrupt agent:",E)}),!0)}:{stateName:"chatMode",showCancelButton:l.canCancelMessage,isDisabled:!l.canSendDraft,action:()=>(l.sendDraftExchange(),!0),cancelAction:p0(e,n)}}function p0(i,e){return()=>(ot(i.isCurrConversationAgentic)?i.interruptAgent().catch(n=>{console.error("Failed to interrupt agent:",n)}):e.interruptToolsConversation(),!0)}const g0=navigator.platform.toUpperCase().indexOf("MAC")>=0;var qf=(i=>(i.cmd="⌘",i.shift="⇧",i.plus="+",i.minus="-",i.at="@",i.arrowUp="↑",i.arrowDown="↓",i.enter="⏎",i.esc="⎋",i.backspace="⌫",i))(qf||{}),Wf=(i=>(i.leftBracket="[",i.rightBracket="]",i.forwardSlash="/",i.backSlash="\\",i.ctrl="Ctrl",i.L="L",i.R="R",i))(Wf||{});const Ii={cmdOrCtrl:g0?"⌘":"Ctrl"};function h0(i){let e,n=i[4].primaryText+"";return{c(){e=G(n)},m(t,o){x(t,e,o)},p(t,o){16&o&&n!==(n=t[4].primaryText+"")&&_e(e,n)},d(t){t&&b(e)}}}function dc(i){let e,n;return e=new Ge({props:{size:1,class:"c-mode-secondary-label",$$slots:{default:[v0]},$$scope:{ctx:i}}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p(t,o){const r={};272&o&&(r.$$scope={dirty:o,ctx:t}),e.$set(r)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function v0(i){let e,n=i[4].secondaryText+"";return{c(){e=G(n)},m(t,o){x(t,e,o)},p(t,o){16&o&&n!==(n=t[4].secondaryText+"")&&_e(e,n)},d(t){t&&b(e)}}}function w0(i){let e,n,t;return n=new zs({}),{c(){e=L("div"),v(n.$$.fragment),A(e,"class","c-mode-checkmark svelte-mfvmmy")},m(o,r){x(o,e,r),w(n,e,null),t=!0},i(o){t||(d(n.$$.fragment,o),t=!0)},o(o){$(n.$$.fragment,o),t=!1},d(o){o&&b(e),y(n)}}}function y0(i){let e,n,t,o,r;return o=new Ts({}),{c(){e=L("div"),n=L("span"),n.textContent="Creates new thread",t=B(),v(o.$$.fragment),A(n,"class","c-mode-right-label__text svelte-mfvmmy"),A(e,"class","c-mode-right-label svelte-mfvmmy")},m(s,c){x(s,e,c),F(e,n),F(e,t),w(o,e,null),r=!0},i(s){r||(d(o.$$.fragment,s),r=!0)},o(s){$(o.$$.fragment,s),r=!1},d(s){s&&b(e),y(o)}}}function $c(i){let e,n,t;return n=new Ge({props:{size:1,class:"c-mode-secondary-label",$$slots:{default:[b0]},$$scope:{ctx:i}}}),{c(){e=L("div"),v(n.$$.fragment),A(e,"class","c-mode-display__bottom svelte-mfvmmy"),ke(e,"c-mode-display__bottom--hidden",!i[2])},m(o,r){x(o,e,r),w(n,e,null),t=!0},p(o,r){const s={};258&r&&(s.$$scope={dirty:r,ctx:o}),n.$set(s),(!t||4&r)&&ke(e,"c-mode-display__bottom--hidden",!o[2])},i(o){t||(d(n.$$.fragment,o),t=!0)},o(o){$(n.$$.fragment,o),t=!1},d(o){o&&b(e),y(n)}}}function b0(i){let e;return{c(){e=G(i[1])},m(n,t){x(n,e,t)},p(n,t){2&t&&_e(e,n[1])},d(n){n&&b(e)}}}function x0(i){let e,n,t,o,r,s,c,a,l,u,f;var m=i[4].icon;m&&(t=ln(m,{})),r=new Ge({props:{size:1,$$slots:{default:[h0]},$$scope:{ctx:i}}});let p=i[4].secondaryText&&dc(i);const _=[y0,w0],M=[];function C(E,R){return E[0]?0:E[3]?1:-1}~(a=C(i))&&(l=M[a]=_[a](i));let T=i[1]&&$c(i);return{c(){e=L("div"),n=L("div"),t&&v(t.$$.fragment),o=B(),v(r.$$.fragment),s=B(),p&&p.c(),c=B(),l&&l.c(),u=B(),T&&T.c(),A(n,"class","c-mode-display__top svelte-mfvmmy"),A(e,"class","c-mode-display svelte-mfvmmy")},m(E,R){x(E,e,R),F(e,n),t&&w(t,n,null),F(n,o),w(r,n,null),F(n,s),p&&p.m(n,null),F(n,c),~a&&M[a].m(n,null),F(e,u),T&&T.m(e,null),f=!0},p(E,[R]){if(16&R&&m!==(m=E[4].icon)){if(t){j();const Q=t;$(Q.$$.fragment,1,0,()=>{y(Q,1)}),q()}m?(t=ln(m,{}),v(t.$$.fragment),d(t.$$.fragment,1),w(t,n,o)):t=null}const N={};272&R&&(N.$$scope={dirty:R,ctx:E}),r.$set(N),E[4].secondaryText?p?(p.p(E,R),16&R&&d(p,1)):(p=dc(E),p.c(),d(p,1),p.m(n,c)):p&&(j(),$(p,1,1,()=>{p=null}),q());let J=a;a=C(E),a!==J&&(l&&(j(),$(M[J],1,1,()=>{M[J]=null}),q()),~a?(l=M[a],l||(l=M[a]=_[a](E),l.c()),d(l,1),l.m(n,null)):l=null),E[1]?T?(T.p(E,R),2&R&&d(T,1)):(T=$c(E),T.c(),d(T,1),T.m(e,null)):T&&(j(),$(T,1,1,()=>{T=null}),q())},i(E){f||(t&&d(t.$$.fragment,E),d(r.$$.fragment,E),d(p),d(l),d(T),f=!0)},o(E){t&&$(t.$$.fragment,E),$(r.$$.fragment,E),$(p),$(l),$(T),f=!1},d(E){E&&b(e),t&&y(t),y(r),p&&p.d(),~a&&M[a].d(),T&&T.d()}}}function _0(i,e,n){let t,{isConversationAgentic:o=!1}=e,{agentExecutionMode:r}=e,{isBackgroundAgent:s=!1}=e,{willStartNewThread:c=!1}=e,{description:a=""}=e,{doShowSecondaryText:l=!0}=e,{selected:u=!1}=e;return i.$$set=f=>{"isConversationAgentic"in f&&n(5,o=f.isConversationAgentic),"agentExecutionMode"in f&&n(6,r=f.agentExecutionMode),"isBackgroundAgent"in f&&n(7,s=f.isBackgroundAgent),"willStartNewThread"in f&&n(0,c=f.willStartNewThread),"description"in f&&n(1,a=f.description),"doShowSecondaryText"in f&&n(2,l=f.doShowSecondaryText),"selected"in f&&n(3,u=f.selected)},i.$$.update=()=>{224&i.$$.dirty&&n(4,t=Hi({isConversationAgentic:o,agentExecutionMode:r,isBackgroundAgent:s}))},[c,a,l,u,t,o,r,s]}new Set(Object.values(Wf));class C0 extends ue{constructor(e){super(),de(this,e,_0,x0,ce,{isConversationAgentic:5,agentExecutionMode:6,isBackgroundAgent:7,willStartNewThread:0,description:1,doShowSecondaryText:2,selected:3})}}function A0(i){let e,n,t;return n=new C0({props:{isConversationAgentic:i[2],agentExecutionMode:i[3],isBackgroundAgent:i[5],willStartNewThread:i[6],description:i[1],selected:i[4]}}),{c(){e=L("div"),v(n.$$.fragment),A(e,"class","c-mode-display-item svelte-1kjq29y")},m(o,r){x(o,e,r),w(n,e,null),t=!0},p(o,r){const s={};4&r&&(s.isConversationAgentic=o[2]),8&r&&(s.agentExecutionMode=o[3]),32&r&&(s.isBackgroundAgent=o[5]),64&r&&(s.willStartNewThread=o[6]),2&r&&(s.description=o[1]),16&r&&(s.selected=o[4]),n.$set(s)},i(o){t||(d(n.$$.fragment,o),t=!0)},o(o){$(n.$$.fragment,o),t=!1},d(o){o&&b(e),y(n)}}}function M0(i){let e,n,t,o;const r=[{onSelect:i[9]},i[7]];let s={$$slots:{default:[A0]},$$scope:{ctx:i}};for(let c=0;c<r.length;c+=1)s=Me(s,r[c]);return n=new we.Item({props:s}),{c(){e=L("div"),v(n.$$.fragment),A(e,"class",t="c-mode-display-item-container "+i[8]+" svelte-1kjq29y"),ke(e,"c-mode-display-item--selected",i[4])},m(c,a){x(c,e,a),w(n,e,null),o=!0},p(c,[a]){const l=129&a?Mt(r,[1&a&&{onSelect:c[9]},128&a&&fo(c[7])]):{};2174&a&&(l.$$scope={dirty:a,ctx:c}),n.$set(l),(!o||256&a&&t!==(t="c-mode-display-item-container "+c[8]+" svelte-1kjq29y"))&&A(e,"class",t),(!o||272&a)&&ke(e,"c-mode-display-item--selected",c[4])},i(c){o||(d(n.$$.fragment,c),o=!0)},o(c){$(n.$$.fragment,c),o=!1},d(c){c&&b(e),y(n)}}}function k0(i,e,n){let t,o;const r=["onSelect","description","isConversationAgentic","agentExecutionMode","selected","isBackgroundAgent","willStartNewThread"];let s=mr(e,r),{onSelect:c}=e,{description:a=""}=e,{isConversationAgentic:l=!1}=e,{agentExecutionMode:u}=e,{selected:f=!1}=e,{isBackgroundAgent:m=!1}=e,{willStartNewThread:p=!1}=e;return i.$$set=_=>{e=Me(Me({},e),it(_)),n(10,s=mr(e,r)),"onSelect"in _&&n(0,c=_.onSelect),"description"in _&&n(1,a=_.description),"isConversationAgentic"in _&&n(2,l=_.isConversationAgentic),"agentExecutionMode"in _&&n(3,u=_.agentExecutionMode),"selected"in _&&n(4,f=_.selected),"isBackgroundAgent"in _&&n(5,m=_.isBackgroundAgent),"willStartNewThread"in _&&n(6,p=_.willStartNewThread)},i.$$.update=()=>{n(8,{class:t="",...o}=s,t,(n(7,o),n(10,s)))},[c,a,l,u,f,m,p,o,t,_=>{c(_)}]}class wr extends ue{constructor(e){super(),de(this,e,k0,M0,ce,{onSelect:0,description:1,isConversationAgentic:2,agentExecutionMode:3,selected:4,isBackgroundAgent:5,willStartNewThread:6})}}function S0(i){let e,n=i[4].primaryText+"";return{c(){e=G(n)},m(t,o){x(t,e,o)},p(t,o){16&o&&n!==(n=t[4].primaryText+"")&&_e(e,n)},d(t){t&&b(e)}}}function T0(i){let e,n,t;var o=i[4].icon;return o&&(e=ln(o,{props:{slot:"iconLeft"}})),{c(){e&&v(e.$$.fragment),n=me()},m(r,s){e&&w(e,r,s),x(r,n,s),t=!0},p(r,s){if(16&s&&o!==(o=r[4].icon)){if(e){j();const c=e;$(c.$$.fragment,1,0,()=>{y(c,1)}),q()}o?(e=ln(o,{props:{slot:"iconLeft"}}),v(e.$$.fragment),d(e.$$.fragment,1),w(e,n.parentNode,n)):e=null}},i(r){t||(e&&d(e.$$.fragment,r),t=!0)},o(r){e&&$(e.$$.fragment,r),t=!1},d(r){r&&b(n),e&&y(e,r)}}}function E0(i){let e,n;return e=new Oo({}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function I0(i){let e,n;return e=new Z$({}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function L0(i){let e,n,t,o;const r=[I0,E0],s=[];function c(a,l){return a[0]?0:1}return e=c(i),n=s[e]=r[e](i),{c(){n.c(),t=me()},m(a,l){s[e].m(a,l),x(a,t,l),o=!0},p(a,l){let u=e;e=c(a),e!==u&&(j(),$(s[u],1,1,()=>{s[u]=null}),q(),n=s[e],n||(n=s[e]=r[e](a),n.c()),d(n,1),n.m(t.parentNode,t))},i(a){o||(d(n),o=!0)},o(a){$(n),o=!1},d(a){a&&b(t),s[e].d(a)}}}function R0(i){let e,n;return e=new ht({props:{size:1,variant:i[1],color:i[2],disabled:i[3],$$slots:{iconRight:[L0],iconLeft:[T0],default:[S0]},$$scope:{ctx:i}}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p(t,[o]){const r={};2&o&&(r.variant=t[1]),4&o&&(r.color=t[2]),8&o&&(r.disabled=t[3]),273&o&&(r.$$scope={dirty:o,ctx:t}),e.$set(r)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function D0(i,e,n){let t,{isDropdownOpen:o}=e,{isCurrConversationAgentic:r}=e,{agentExecutionMode:s}=e,{isBackgroundAgent:c}=e,{variant:a="ghost"}=e,{color:l="neutral"}=e,{disabled:u=!1}=e;return i.$$set=f=>{"isDropdownOpen"in f&&n(0,o=f.isDropdownOpen),"isCurrConversationAgentic"in f&&n(5,r=f.isCurrConversationAgentic),"agentExecutionMode"in f&&n(6,s=f.agentExecutionMode),"isBackgroundAgent"in f&&n(7,c=f.isBackgroundAgent),"variant"in f&&n(1,a=f.variant),"color"in f&&n(2,l=f.color),"disabled"in f&&n(3,u=f.disabled)},i.$$.update=()=>{224&i.$$.dirty&&n(4,t=Hi({isConversationAgentic:r,agentExecutionMode:s,isBackgroundAgent:!!c}))},[o,a,l,u,t,r,s,c]}class Ys extends ue{constructor(e){super(),de(this,e,D0,R0,ce,{isDropdownOpen:0,isCurrConversationAgentic:5,agentExecutionMode:6,isBackgroundAgent:7,variant:1,color:2,disabled:3})}}function N0(i){let e,n,t,o,r={onOpenChange:i[16],nested:!1,$$slots:{default:[j0]},$$scope:{ctx:i}};e=new we.Root({props:r}),i[27](e);let s=i[8]&&mc(i);return{c(){v(e.$$.fragment),n=B(),s&&s.c(),t=me()},m(c,a){w(e,c,a),x(c,n,a),s&&s.m(c,a),x(c,t,a),o=!0},p(c,a){const l={};17006&a[0]|1&a[1]&&(l.$$scope={dirty:a,ctx:c}),e.$set(l),c[8]?s?(s.p(c,a),256&a[0]&&d(s,1)):(s=mc(c),s.c(),d(s,1),s.m(t.parentNode,t)):s&&(j(),$(s,1,1,()=>{s=null}),q())},i(c){o||(d(e.$$.fragment,c),d(s),o=!0)},o(c){$(e.$$.fragment,c),$(s),o=!1},d(c){c&&(b(n),b(t)),i[27](null),y(e,c),s&&s.d(c)}}}function P0(i){let e,n;return e=new Ne({props:{content:"You can only interact with your remote agent in this window.",triggerOn:[Je.Hover],side:"bottom",$$slots:{default:[W0]},$$scope:{ctx:i}}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p(t,o){const r={};1&o[1]&&(r.$$scope={dirty:o,ctx:t}),e.$set(r)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function F0(i){var t;let e,n;return e=new Ys({props:{isDropdownOpen:i[5],isCurrConversationAgentic:i[3],agentExecutionMode:i[1],isBackgroundAgent:(t=i[2])==null?void 0:t.isActive,variant:"ghost",color:"neutral"}}),{c(){v(e.$$.fragment)},m(o,r){w(e,o,r),n=!0},p(o,r){var c;const s={};32&r[0]&&(s.isDropdownOpen=o[5]),8&r[0]&&(s.isCurrConversationAgentic=o[3]),2&r[0]&&(s.agentExecutionMode=o[1]),4&r[0]&&(s.isBackgroundAgent=(c=o[2])==null?void 0:c.isActive),e.$set(s)},i(o){n||(d(e.$$.fragment,o),n=!0)},o(o){$(e.$$.fragment,o),n=!1},d(o){y(e,o)}}}function O0(i){let e,n;return e=new Ne({props:{triggerOn:[Je.Hover],side:"right",align:"start",$$slots:{content:[B0],default:[z0]},$$scope:{ctx:i}}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p(t,o){const r={};46&o[0]|1&o[1]&&(r.$$scope={dirty:o,ctx:t}),e.$set(r)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function z0(i){var t;let e,n;return e=new Ys({props:{isDropdownOpen:i[5],isCurrConversationAgentic:i[3],agentExecutionMode:i[1],isBackgroundAgent:(t=i[2])==null?void 0:t.isActive,variant:"ghost",color:"neutral"}}),{c(){v(e.$$.fragment)},m(o,r){w(e,o,r),n=!0},p(o,r){var c;const s={};32&r[0]&&(s.isDropdownOpen=o[5]),8&r[0]&&(s.isCurrConversationAgentic=o[3]),2&r[0]&&(s.agentExecutionMode=o[1]),4&r[0]&&(s.isBackgroundAgent=(c=o[2])==null?void 0:c.isActive),e.$set(s)},i(o){n||(d(e.$$.fragment,o),n=!0)},o(o){$(e.$$.fragment,o),n=!1},d(o){y(e,o)}}}function B0(i){let e,n,t,o,r,s,c,a,l;return o=new Ur({props:{icons:[`${Ii.cmdOrCtrl}`,"."]}}),a=new Ur({props:{icons:[`${Ii.cmdOrCtrl}`,`${qf.shift}`,"."]}}),{c(){e=L("div"),n=L("div"),t=G(`Toggle forward
                `),v(o.$$.fragment),r=B(),s=L("div"),c=G(`or backward
                `),v(a.$$.fragment),A(e,"slot","content"),A(e,"class","c-toggle-mode-tooltip svelte-1t5cx1d")},m(u,f){x(u,e,f),F(e,n),F(n,t),w(o,n,null),F(e,r),F(e,s),F(s,c),w(a,s,null),l=!0},p:P,i(u){l||(d(o.$$.fragment,u),d(a.$$.fragment,u),l=!0)},o(u){$(o.$$.fragment,u),$(a.$$.fragment,u),l=!1},d(u){u&&b(e),y(o),y(a)}}}function U0(i){let e,n,t,o;const r=[O0,F0],s=[];function c(a,l){return a[9]?0:1}return e=c(i),n=s[e]=r[e](i),{c(){n.c(),t=me()},m(a,l){s[e].m(a,l),x(a,t,l),o=!0},p(a,l){let u=e;e=c(a),e===u?s[e].p(a,l):(j(),$(s[u],1,1,()=>{s[u]=null}),q(),n=s[e],n?n.p(a,l):(n=s[e]=r[e](a),n.c()),d(n,1),n.m(t.parentNode,t))},i(a){o||(d(n),o=!0)},o(a){$(n),o=!1},d(a){a&&b(t),s[e].d(a)}}}function fc(i){let e,n,t,o;return e=new we.Separator({}),t=new wr({props:{onSelect:i[26],description:"Run an agent in the cloud to lighten your workload.",isBackgroundAgent:!0,selected:i[6]==="remoteAgent"}}),{c(){v(e.$$.fragment),n=B(),v(t.$$.fragment)},m(r,s){w(e,r,s),x(r,n,s),w(t,r,s),o=!0},p(r,s){const c={};64&s[0]&&(c.selected=r[6]==="remoteAgent"),t.$set(c)},i(r){o||(d(e.$$.fragment,r),d(t.$$.fragment,r),o=!0)},o(r){$(e.$$.fragment,r),$(t.$$.fragment,r),o=!1},d(r){r&&b(n),y(e,r),y(t,r)}}}function H0(i){let e,n,t,o,r,s;n=new wr({props:{onSelect:i[24],isConversationAgentic:!1,description:"Use chat for advice and general knowledge.",selected:i[6]==="chat"}}),o=new wr({props:{onSelect:i[25],isConversationAgentic:!0,description:"Work with an agent on guided tasks.",selected:i[6]==="localAgent"}});let c=i[14]&&fc(i);return{c(){e=L("div"),v(n.$$.fragment),t=B(),v(o.$$.fragment),r=B(),c&&c.c(),A(e,"class","c-mode-display-dropdown svelte-1t5cx1d")},m(a,l){x(a,e,l),w(n,e,null),F(e,t),w(o,e,null),F(e,r),c&&c.m(e,null),s=!0},p(a,l){const u={};64&l[0]&&(u.selected=a[6]==="chat"),n.$set(u);const f={};2&l[0]&&(f.onSelect=a[25]),64&l[0]&&(f.selected=a[6]==="localAgent"),o.$set(f),a[14]?c?(c.p(a,l),16384&l[0]&&d(c,1)):(c=fc(a),c.c(),d(c,1),c.m(e,null)):c&&(j(),$(c,1,1,()=>{c=null}),q())},i(a){s||(d(n.$$.fragment,a),d(o.$$.fragment,a),d(c),s=!0)},o(a){$(n.$$.fragment,a),$(o.$$.fragment,a),$(c),s=!1},d(a){a&&b(e),y(n),y(o),c&&c.d()}}}function j0(i){let e,n,t,o;return e=new we.Trigger({props:{$$slots:{default:[U0]},$$scope:{ctx:i}}}),e.$on("click",G0),t=new we.Content({props:{size:1,side:"top",align:"start",$$slots:{default:[H0]},$$scope:{ctx:i}}}),{c(){v(e.$$.fragment),n=B(),v(t.$$.fragment)},m(r,s){w(e,r,s),x(r,n,s),w(t,r,s),o=!0},p(r,s){const c={};558&s[0]|1&s[1]&&(c.$$scope={dirty:s,ctx:r}),e.$set(c);const a={};16450&s[0]|1&s[1]&&(a.$$scope={dirty:s,ctx:r}),t.$set(a)},i(r){o||(d(e.$$.fragment,r),d(t.$$.fragment,r),o=!0)},o(r){$(e.$$.fragment,r),$(t.$$.fragment,r),o=!1},d(r){r&&b(n),y(e,r),y(t,r)}}}function mc(i){let e,n,t;return n=new Ne({props:{content:i[7]?"":"Run tools automatically",triggerOn:[Je.Hover],side:"bottom",$$slots:{default:[q0]},$$scope:{ctx:i}}}),{c(){e=L("div"),v(n.$$.fragment),A(e,"class","c-toggle-mode-button__agent-toggle svelte-1t5cx1d")},m(o,r){x(o,e,r),w(n,e,null),t=!0},p(o,r){const s={};128&r[0]&&(s.content=o[7]?"":"Run tools automatically"),128&r[0]|1&r[1]&&(s.$$scope={dirty:r,ctx:o}),n.$set(s)},i(o){t||(d(n.$$.fragment,o),t=!0)},o(o){$(n.$$.fragment,o),t=!1},d(o){o&&b(e),y(n)}}}function q0(i){let e,n;return e=new jm({props:{checked:i[7],size:2,onText:"Auto",offText:"Auto",ariaLabel:"Toggle between manual and auto agent mode"}}),e.$on("change",i[20]),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p(t,o){const r={};128&o[0]&&(r.checked=t[7]),e.$set(r)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function W0(i){let e,n;return e=new Ys({props:{isDropdownOpen:!1,isCurrConversationAgentic:!0,agentExecutionMode:Co.auto,isBackgroundAgent:!0,disabled:!0,variant:"ghost",color:"accent"}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p:P,i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function V0(i){let e,n,t,o;const r=[P0,N0],s=[];function c(a,l){var u;return(u=a[2])!=null&&u.isRemoteAgentSshWindow?0:1}return n=c(i),t=s[n]=r[n](i),{c(){e=L("div"),t.c(),A(e,"class","c-toggle-mode-button svelte-1t5cx1d")},m(a,l){x(a,e,l),s[n].m(e,null),o=!0},p(a,l){let u=n;n=c(a),n===u?s[n].p(a,l):(j(),$(s[u],1,1,()=>{s[u]=null}),q(),t=s[n],t?t.p(a,l):(t=s[n]=r[n](a),t.c()),d(t,1),t.m(e,null))},i(a){o||(d(t),o=!0)},o(a){$(t),o=!1},d(a){a&&b(e),s[n].d()}}}const G0=i=>{i.stopPropagation()};function Y0(i,e,n){let t,o,r,s,c,a,l,u,f,m,p,_,M,C,T,E=P,R=P,N=P,J=P,Q=P,X=()=>(Q(),Q=lt(K,xe=>n(23,T=xe)),K);i.$$.on_destroy.push(()=>E()),i.$$.on_destroy.push(()=>R()),i.$$.on_destroy.push(()=>N()),i.$$.on_destroy.push(()=>J()),i.$$.on_destroy.push(()=>Q());let{chatModel:K=Se("chatModel")}=e;X();let{agentConversationModel:H=Se("agentConversationModel")}=e;const Y=Se(Tn.key);Te(i,Y,xe=>n(2,p=xe));const V=Se(gr.key);let Z,re=!1;function le(){V.handleSetToChat(),Z==null||Z.requestClose()}async function oe(xe){await V.handleSetToAgent(xe),C===!1&&H.setHasEverUsedAgent(!0),Z==null||Z.requestClose()}function he(){V.handleSetToBackgroundAgent(),M===!1&&(Y==null||Y.setHasEverUsedRemoteAgent(!0)),Z==null||Z.requestClose()}let ie="chat";return i.$$set=xe=>{"chatModel"in xe&&X(n(0,K=xe.chatModel)),"agentConversationModel"in xe&&n(21,H=xe.agentConversationModel)},i.$$.update=()=>{8388608&i.$$.dirty[0]&&n(14,t=T.flags.enableBackgroundAgents),8388608&i.$$.dirty[0]&&n(22,o=T.flags.enableAgentAutoMode),2097152&i.$$.dirty[0]&&(n(13,r=H.isCurrConversationAgentic),R(),R=lt(r,xe=>n(3,_=xe))),8388608&i.$$.dirty[0]&&(n(12,s=T.agentExecutionMode),E(),E=lt(s,xe=>n(1,m=xe))),2097152&i.$$.dirty[0]&&(n(11,c=H.hasEverUsedAgent),J(),J=lt(c,xe=>n(29,C=xe))),8388608&i.$$.dirty[0]&&n(9,l=T.flags.enableDebugFeatures),14&i.$$.dirty[0]&&(p.isActive?n(6,ie="remoteAgent"):n(6,ie=_?m===Co.auto?"agentAuto":"localAgent":"chat")),4194316&i.$$.dirty[0]&&n(8,u=_&&!p.isActive&&o),2&i.$$.dirty[0]&&n(7,f=m===Co.auto)},n(10,a=Y==null?void 0:Y.hasEverUsedRemoteAgent),N(),N=lt(a,xe=>n(28,M=xe)),[K,m,p,_,Z,re,ie,f,u,l,a,c,s,r,t,Y,function(xe){n(5,re=xe),xe?V.reportModeSelectorOpen():V.reportModeSelectorClose()},le,oe,he,async function(){const xe=f?Co.manual:Co.auto;await V.setToAgent(xe)},H,o,T,()=>le(),()=>oe(m),()=>he(),function(xe){et[xe?"unshift":"push"](()=>{Z=xe,n(4,Z)})}]}class K0 extends ue{constructor(e){super(),de(this,e,Y0,V0,ce,{chatModel:0,agentConversationModel:21},null,[-1,-1])}}function X0(i){let e,n,t=[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 384 512"},i[0]],o={};for(let r=0;r<t.length;r+=1)o=Me(o,t[r]);return{c(){e=rt("svg"),n=new en(!0),this.h()},l(r){e=tn(r,"svg",{xmlns:!0,"data-ds-icon":!0,viewBox:!0});var s=nn(e);n=on(s,!0),s.forEach(b),this.h()},h(){n.a=null,ut(e,o)},m(r,s){rn(r,e,s),n.m('<!--! Font Awesome Pro 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2024 Fonticons, Inc.--><path d="M32 32C32 14.3 46.3 0 64 0h256c17.7 0 32 14.3 32 32s-14.3 32-32 32h-29.5l11.4 148.2c36.7 19.9 65.7 53.2 79.5 94.7l1 3c3.3 9.8 1.6 20.5-4.4 28.8S362.3 352 352 352H32c-10.3 0-19.9-4.9-26-13.3s-7.7-19.1-4.4-28.8l1-3c13.8-41.5 42.8-74.8 79.5-94.7L93.5 64H64c-17.7 0-32-14.3-32-32m128 352h64v96c0 17.7-14.3 32-32 32s-32-14.3-32-32z"/>',e)},p(r,[s]){ut(e,o=Mt(t,[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 384 512"},1&s&&r[0]]))},i:P,o:P,d(r){r&&b(e)}}}function Z0(i,e,n){return i.$$set=t=>{n(0,e=Me(Me({},e),it(t)))},[e=it(e)]}class Vf extends ue{constructor(e){super(),de(this,e,Z0,X0,ce,{})}}function J0(i){let e,n;return e=new Os({}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function Q0(i){let e,n;return e=new Vf({}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function eh(i){let e,n,t,o;const r=[Q0,J0],s=[];function c(a,l){return a[0]?0:1}return n=c(i),t=s[n]=r[n](i),{c(){e=L("span"),t.c(),A(e,"class","c-pin-button svelte-16rnrv4")},m(a,l){x(a,e,l),s[n].m(e,null),o=!0},p(a,l){let u=n;n=c(a),n!==u&&(j(),$(s[u],1,1,()=>{s[u]=null}),q(),t=s[n],t||(t=s[n]=r[n](a),t.c()),d(t,1),t.m(e,null))},i(a){o||(d(t),o=!0)},o(a){$(t),o=!1},d(a){a&&b(e),s[n].d()}}}function th(i){let e,n;return e=new Ao.IconButton({props:{color:"neutral",$$slots:{default:[eh]},$$scope:{ctx:i}}}),e.$on("click",i[3]),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p(t,o){const r={};17&o&&(r.$$scope={dirty:o,ctx:t}),e.$set(r)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function nh(i){let e,n;return e=new Ne({props:{content:i[2],$$slots:{default:[th]},$$scope:{ctx:i}}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p(t,[o]){const r={};4&o&&(r.content=t[2]),19&o&&(r.$$scope={dirty:o,ctx:t}),e.$set(r)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function oh(i,e,n){let{isPinned:t=!1}=e,{onPin:o}=e,{title:r=t?"Unpin":"Pin to context"}=e;return i.$$set=s=>{"isPinned"in s&&n(0,t=s.isPinned),"onPin"in s&&n(1,o=s.onPin),"title"in s&&n(2,r=s.title)},[t,o,r,s=>{s.stopPropagation(),o()}]}class rh extends ue{constructor(e){super(),de(this,e,oh,nh,ce,{isPinned:0,onPin:1,title:2})}}function ih(i){let e,n,t=[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 576 512"},i[0]],o={};for(let r=0;r<t.length;r+=1)o=Me(o,t[r]);return{c(){e=rt("svg"),n=new en(!0),this.h()},l(r){e=tn(r,"svg",{xmlns:!0,"data-ds-icon":!0,viewBox:!0});var s=nn(e);n=on(s,!0),s.forEach(b),this.h()},h(){n.a=null,ut(e,o)},m(r,s){rn(r,e,s),n.m('<!--! Font Awesome Pro 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2024 Fonticons, Inc.--><path d="M156 32C100.6 32 48.8 46.6 27.1 53.6 10.3 59 0 74.5 0 91.1v312.4c0 26.1 24 44.2 48 40.2 19.8-3.3 54.8-7.7 100-7.7 54 0 97.5 25.5 112.5 35.6 7.5 5 16.8 8.4 27 8.4 11.5 0 21.6-4.2 29.3-9.9 13.4-9.8 52.3-34.1 111.2-34.1 47.7 0 80.5 4 99 7.2 23.9 4.1 49-13.8 49-40.6V91.1c0-16.5-10.3-32.1-27.1-37.5C527.2 46.6 475.4 32 420 32c-36.8 0-71.8 6.4-97.4 12.7-12.8 3.2-23.5 6.3-30.9 8.7-1.3.4-2.6.8-3.7 1.2-1.1-.4-2.4-.8-3.7-1.2-7.5-2.4-18.1-5.5-30.9-8.7C227.8 38.4 192.8 32 156 32m108 65.3v320.6c-26-13.7-67.2-29.9-116-29.9-42.9 0-77.4 3.7-100 7.1V97.3C70.3 90.6 112.4 80 156 80c31.6 0 62.6 5.6 85.9 11.3 8.6 2.1 16.1 4.2 22.1 6m48 319.2V97.3c6-1.8 13.5-3.9 22.1-6C357.4 85.6 388.4 80 420 80c43.6 0 85.7 10.6 108 17.3v297.4c-21.7-3.3-54.9-6.7-100-6.7-51.4 0-90.8 15-116 28.6z"/>',e)},p(r,[s]){ut(e,o=Mt(t,[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 576 512"},1&s&&r[0]]))},i:P,o:P,d(r){r&&b(e)}}}function sh(i,e,n){return i.$$set=t=>{n(0,e=Me(Me({},e),it(t)))},[e=it(e)]}class ah extends ue{constructor(e){super(),de(this,e,sh,ih,ce,{})}}function ch(i){let e,n,t=[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 576 512"},i[0]],o={};for(let r=0;r<t.length;r+=1)o=Me(o,t[r]);return{c(){e=rt("svg"),n=new en(!0),this.h()},l(r){e=tn(r,"svg",{xmlns:!0,"data-ds-icon":!0,viewBox:!0});var s=nn(e);n=on(s,!0),s.forEach(b),this.h()},h(){n.a=null,ut(e,o)},m(r,s){rn(r,e,s),n.m('<!--! Font Awesome Pro 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2024 Fonticons, Inc.--><path d="M384 480h48c11.4 0 21.9-6 27.6-15.9l112-192c5.8-9.9 5.8-22.1.1-32.1s-16.2-16-27.7-16H144c-11.4 0-21.9 6-27.6 15.9L48 357.1V96c0-8.8 7.2-16 16-16h117.5c4.2 0 8.3 1.7 11.3 4.7l26.5 26.5c21 21 49.5 32.8 79.2 32.8H416c8.8 0 16 7.2 16 16v32h48v-32c0-35.3-28.7-64-64-64H298.5c-17 0-33.3-6.7-45.3-18.7l-26.5-26.6c-12-12-28.3-18.7-45.3-18.7H64C28.7 32 0 60.7 0 96v320c0 35.3 28.7 64 64 64h23.7z"/>',e)},p(r,[s]){ut(e,o=Mt(t,[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 576 512"},1&s&&r[0]]))},i:P,o:P,d(r){r&&b(e)}}}function lh(i,e,n){return i.$$set=t=>{n(0,e=Me(Me({},e),it(t)))},[e=it(e)]}class uh extends ue{constructor(e){super(),de(this,e,lh,ch,ce,{})}}function dh(i){let e,n,t=[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 512 512"},i[0]],o={};for(let r=0;r<t.length;r+=1)o=Me(o,t[r]);return{c(){e=rt("svg"),n=new en(!0),this.h()},l(r){e=tn(r,"svg",{xmlns:!0,"data-ds-icon":!0,viewBox:!0});var s=nn(e);n=on(s,!0),s.forEach(b),this.h()},h(){n.a=null,ut(e,o)},m(r,s){rn(r,e,s),n.m('<!--! Font Awesome Pro 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2024 Fonticons, Inc.--><path d="M64 32C28.7 32 0 60.7 0 96v320c0 35.3 28.7 64 64 64h384c35.3 0 64-28.7 64-64V160c0-35.3-28.7-64-64-64H289.9L247 53.1A71.983 71.983 0 0 0 196.1 32zM48 96c0-8.8 7.2-16 16-16h132.1c6.4 0 12.5 2.5 17 7l45.3 45.3c7.5 7.5 17.7 11.7 28.3 11.7H448c8.8 0 16 7.2 16 16v256c0 8.8-7.2 16-16 16H64c-8.8 0-16-7.2-16-16zm305.2 168.2c6.3-3.6 9.5-11.2 6.8-17.9-1.7-4.3-3.7-8.4-5.9-12.4l-2-3.5c-2.4-4-5.1-7.9-7.9-11.5-4.5-5.7-12.6-6.8-18.9-3.1l-1.2.7c-8 4.6-17.9 3.5-25.9-1.2s-14.1-12.7-14.1-21.9V192c0-7.3-4.9-13.8-12.2-14.8-5.2-.7-10.5-1.1-15.8-1.1s-10.7.4-15.8 1.1c-7.2 1-12.2 7.5-12.2 14.8v1.4c0 9.3-6.1 17.3-14.1 21.9s-17.9 5.8-25.9 1.2l-1.2-.7c-6.3-3.6-14.4-2.6-18.9 3.1-2.9 3.7-5.5 7.5-8 11.5l-2 3.4c-2.2 4-4.2 8.2-5.9 12.5-2.7 6.8.4 14.3 6.8 17.9l1.2.7c8 4.6 12 13.8 12 23.1s-4 18.4-12 23.1l-1.2.7c-6.3 3.6-9.5 11.2-6.8 17.9 1.7 4.3 3.7 8.4 5.9 12.4l2.1 3.6c2.4 4 5 7.8 7.9 11.5 4.5 5.7 12.6 6.8 18.9 3.1l1.2-.7c8-4.6 17.9-3.5 25.9 1.2s14.1 12.7 14.1 21.9v1.4c0 7.3 4.9 13.8 12.2 14.8 5.2.7 10.5 1.1 15.8 1.1s10.7-.4 15.8-1.1c7.2-1 12.2-7.5 12.2-14.8v-1.4c0-9.3 6.1-17.3 14.1-21.9s17.9-5.8 25.9-1.2l1.2.7c6.3 3.6 14.4 2.6 18.9-3.1 2.9-3.6 5.5-7.5 7.9-11.4l2.1-3.6c2.2-4 4.2-8.1 5.9-12.4 2.7-6.8-.4-14.3-6.8-17.9l-1.2-.7c-8-4.6-12-13.8-12-23.1s4-18.5 12-23.1l1.2-.7zM221 288a35 35 0 1 1 70 0 35 35 0 1 1-70 0"/>',e)},p(r,[s]){ut(e,o=Mt(t,[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 512 512"},1&s&&r[0]]))},i:P,o:P,d(r){r&&b(e)}}}function $h(i,e,n){return i.$$set=t=>{n(0,e=Me(Me({},e),it(t)))},[e=it(e)]}class fh extends ue{constructor(e){super(),de(this,e,$h,dh,ce,{})}}function mh(i){let e,n;return e=new Us({}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function ph(i){let e,n;return e=new ah({}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function gh(i){let e,n;return e=new fh({}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function hh(i){let e,n;return e=new uh({}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function vh(i){let e,n;return e=new Y$({}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function wh(i){let e,n,t,o;const r=[vh,hh,gh,ph,mh],s=[];function c(a,l){return a[0]==="file"?0:a[0]==="folder-opened"?1:a[0]==="root-folder"?2:a[0]==="book"?3:a[0]==="rule"?4:-1}return~(e=c(i))&&(n=s[e]=r[e](i)),{c(){n&&n.c(),t=me()},m(a,l){~e&&s[e].m(a,l),x(a,t,l),o=!0},p(a,[l]){let u=e;e=c(a),e!==u&&(n&&(j(),$(s[u],1,1,()=>{s[u]=null}),q()),~e?(n=s[e],n||(n=s[e]=r[e](a),n.c()),d(n,1),n.m(t.parentNode,t)):n=null)},i(a){o||(d(n),o=!0)},o(a){$(n),o=!1},d(a){a&&b(t),~e&&s[e].d(a)}}}function yh(i,e,n){let{icon:t}=e;return i.$$set=o=>{"icon"in o&&n(0,t=o.icon)},[t]}class bh extends ue{constructor(e){super(),de(this,e,yh,wh,ce,{icon:0})}}function Li(i){switch(i){case gi.DEFAULT:return Ua;case gi.PROTOTYPER:return Xp;case gi.BRAINSTORM:return Kp;case gi.REVIEWER:return Yp;default:return Ua}}function xh(i){let e,n=i[0].label+"";return{c(){e=G(n)},m(t,o){x(t,e,o)},p(t,o){1&o&&n!==(n=t[0].label+"")&&_e(e,n)},i:P,o:P,d(t){t&&b(e)}}}function _h(i){let e,n,t,o;return e=new Us({}),t=new _n({props:{filepath:`${ms}/${ps}/${i[0].rule.path}`}}),{c(){v(e.$$.fragment),n=B(),v(t.$$.fragment)},m(r,s){w(e,r,s),x(r,n,s),w(t,r,s),o=!0},p(r,s){const c={};1&s&&(c.filepath=`${ms}/${ps}/${r[0].rule.path}`),t.$set(c)},i(r){o||(d(e.$$.fragment,r),d(t.$$.fragment,r),o=!0)},o(r){$(e.$$.fragment,r),$(t.$$.fragment,r),o=!1},d(r){r&&b(n),y(e,r),y(t,r)}}}function Ch(i){let e,n,t,o,r,s,c,a;return n=new Zp({props:{heightPx:32,floatHeight:4,animationDuration:2.25,$$slots:{default:[Lh]},$$scope:{ctx:i}}}),r=new Ge({props:{size:2,weight:"medium",$$slots:{default:[Rh]},$$scope:{ctx:i}}}),c=new Ge({props:{size:1,$$slots:{default:[Dh]},$$scope:{ctx:i}}}),{c(){e=L("div"),v(n.$$.fragment),t=B(),o=L("div"),v(r.$$.fragment),s=B(),v(c.$$.fragment),A(e,"class","c-mention-hover-contents__personality-icon svelte-11069rs"),A(o,"class","c-mention-hover-contents__personality svelte-11069rs")},m(l,u){x(l,e,u),w(n,e,null),x(l,t,u),x(l,o,u),w(r,o,null),F(o,s),w(c,o,null),a=!0},p(l,u){const f={};3&u&&(f.$$scope={dirty:u,ctx:l}),n.$set(f);const m={};3&u&&(m.$$scope={dirty:u,ctx:l}),r.$set(m);const p={};3&u&&(p.$$scope={dirty:u,ctx:l}),c.$set(p)},i(l){a||(d(n.$$.fragment,l),d(r.$$.fragment,l),d(c.$$.fragment,l),a=!0)},o(l){$(n.$$.fragment,l),$(r.$$.fragment,l),$(c.$$.fragment,l),a=!1},d(l){l&&(b(e),b(t),b(o)),y(n),y(r),y(c)}}}function Ah(i){var r,s;let e,n,t,o;return e=new vf({}),t=new _n({props:{filepath:`${i[0].selection.pathName}:L${(r=i[0].selection.fullRange)==null?void 0:r.startLineNumber}-${(s=i[0].selection.fullRange)==null?void 0:s.endLineNumber}`}}),{c(){v(e.$$.fragment),n=B(),v(t.$$.fragment)},m(c,a){w(e,c,a),x(c,n,a),w(t,c,a),o=!0},p(c,a){var u,f;const l={};1&a&&(l.filepath=`${c[0].selection.pathName}:L${(u=c[0].selection.fullRange)==null?void 0:u.startLineNumber}-${(f=c[0].selection.fullRange)==null?void 0:f.endLineNumber}`),t.$set(l)},i(c){o||(d(e.$$.fragment,c),d(t.$$.fragment,c),o=!0)},o(c){$(e.$$.fragment,c),$(t.$$.fragment,c),o=!1},d(c){c&&b(n),y(e,c),y(t,c)}}}function Mh(i){var o;let e,n,t=(i[0].userGuidelines.overLimit||((o=i[0].rulesAndGuidelinesState)==null?void 0:o.overLimit))&&pc(i);return{c(){t&&t.c(),e=me()},m(r,s){t&&t.m(r,s),x(r,e,s),n=!0},p(r,s){var c;r[0].userGuidelines.overLimit||(c=r[0].rulesAndGuidelinesState)!=null&&c.overLimit?t?(t.p(r,s),1&s&&d(t,1)):(t=pc(r),t.c(),d(t,1),t.m(e.parentNode,e)):t&&(j(),$(t,1,1,()=>{t=null}),q())},i(r){n||(d(t),n=!0)},o(r){$(t),n=!1},d(r){r&&b(e),t&&t.d(r)}}}function kh(i){let e,n,t,o,r,s,c,a;return t=new Jp({}),r=new _n({props:{class:"c-source-folder-item",filepath:i[0].sourceFolder.folderRoot}}),c=new Qp({props:{class:"guidelines-filespan",sourceFolder:i[0].sourceFolder}}),{c(){e=L("div"),n=L("div"),v(t.$$.fragment),o=B(),v(r.$$.fragment),s=B(),v(c.$$.fragment),A(n,"class","l-source-folder-name svelte-11069rs"),A(e,"class","l-mention-hover-contents__source-folder")},m(l,u){x(l,e,u),F(e,n),w(t,n,null),F(n,o),w(r,n,null),F(e,s),w(c,e,null),a=!0},p(l,u){const f={};1&u&&(f.filepath=l[0].sourceFolder.folderRoot),r.$set(f);const m={};1&u&&(m.sourceFolder=l[0].sourceFolder),c.$set(m)},i(l){a||(d(t.$$.fragment,l),d(r.$$.fragment,l),d(c.$$.fragment,l),a=!0)},o(l){$(t.$$.fragment,l),$(r.$$.fragment,l),$(c.$$.fragment,l),a=!1},d(l){l&&b(e),y(t),y(r),y(c)}}}function Sh(i){let e,n,t,o;return e=new e1({}),t=new _n({props:{filepath:i[0].externalSource.name}}),{c(){v(e.$$.fragment),n=B(),v(t.$$.fragment)},m(r,s){w(e,r,s),x(r,n,s),w(t,r,s),o=!0},p(r,s){const c={};1&s&&(c.filepath=r[0].externalSource.name),t.$set(c)},i(r){o||(d(e.$$.fragment,r),d(t.$$.fragment,r),o=!0)},o(r){$(e.$$.fragment,r),$(t.$$.fragment,r),o=!1},d(r){r&&b(n),y(e,r),y(t,r)}}}function Th(i){let e,n,t,o;return e=new bf({}),t=new _n({props:{filepath:i[0].folder.pathName}}),{c(){v(e.$$.fragment),n=B(),v(t.$$.fragment)},m(r,s){w(e,r,s),x(r,n,s),w(t,r,s),o=!0},p(r,s){const c={};1&s&&(c.filepath=r[0].folder.pathName),t.$set(c)},i(r){o||(d(e.$$.fragment,r),d(t.$$.fragment,r),o=!0)},o(r){$(e.$$.fragment,r),$(t.$$.fragment,r),o=!1},d(r){r&&b(n),y(e,r),y(t,r)}}}function Eh(i){let e,n,t,o;return e=new js({}),t=new _n({props:{filepath:i[0].recentFile.pathName}}),{c(){v(e.$$.fragment),n=B(),v(t.$$.fragment)},m(r,s){w(e,r,s),x(r,n,s),w(t,r,s),o=!0},p(r,s){const c={};1&s&&(c.filepath=r[0].recentFile.pathName),t.$set(c)},i(r){o||(d(e.$$.fragment,r),d(t.$$.fragment,r),o=!0)},o(r){$(e.$$.fragment,r),$(t.$$.fragment,r),o=!1},d(r){r&&b(n),y(e,r),y(t,r)}}}function Ih(i){let e,n,t,o;return e=new js({}),t=new _n({props:{filepath:i[0].file.pathName}}),{c(){v(e.$$.fragment),n=B(),v(t.$$.fragment)},m(r,s){w(e,r,s),x(r,n,s),w(t,r,s),o=!0},p(r,s){const c={};1&s&&(c.filepath=r[0].file.pathName),t.$set(c)},i(r){o||(d(e.$$.fragment,r),d(t.$$.fragment,r),o=!0)},o(r){$(e.$$.fragment,r),$(t.$$.fragment,r),o=!1},d(r){r&&b(n),y(e,r),y(t,r)}}}function Lh(i){let e,n,t;var o=Li(i[0].personality.type);return o&&(e=ln(o,{})),{c(){e&&v(e.$$.fragment),n=me()},m(r,s){e&&w(e,r,s),x(r,n,s),t=!0},p(r,s){if(1&s&&o!==(o=Li(r[0].personality.type))){if(e){j();const c=e;$(c.$$.fragment,1,0,()=>{y(c,1)}),q()}o?(e=ln(o,{}),v(e.$$.fragment),d(e.$$.fragment,1),w(e,n.parentNode,n)):e=null}},i(r){t||(e&&d(e.$$.fragment,r),t=!0)},o(r){e&&$(e.$$.fragment,r),t=!1},d(r){r&&b(n),e&&y(e,r)}}}function Rh(i){let e,n=i[0].label+"";return{c(){e=G(n)},m(t,o){x(t,e,o)},p(t,o){1&o&&n!==(n=t[0].label+"")&&_e(e,n)},d(t){t&&b(e)}}}function Dh(i){let e,n=i[0].personality.description+"";return{c(){e=G(n)},m(t,o){x(t,e,o)},p(t,o){1&o&&n!==(n=t[0].personality.description+"")&&_e(e,n)},d(t){t&&b(e)}}}function pc(i){let e,n,t,o;const r=[Ph,Nh],s=[];function c(a,l){var u;return(u=a[0].rulesAndGuidelinesState)!=null&&u.overLimit?0:a[0].userGuidelines.overLimit?1:-1}return~(e=c(i))&&(n=s[e]=r[e](i)),{c(){n&&n.c(),t=me()},m(a,l){~e&&s[e].m(a,l),x(a,t,l),o=!0},p(a,l){let u=e;e=c(a),e===u?~e&&s[e].p(a,l):(n&&(j(),$(s[u],1,1,()=>{s[u]=null}),q()),~e?(n=s[e],n?n.p(a,l):(n=s[e]=r[e](a),n.c()),d(n,1),n.m(t.parentNode,t)):n=null)},i(a){o||(d(n),o=!0)},o(a){$(n),o=!1},d(a){a&&b(t),~e&&s[e].d(a)}}}function Nh(i){let e,n;return e=new Ge({props:{size:1,$$slots:{default:[Fh]},$$scope:{ctx:i}}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p(t,o){const r={};3&o&&(r.$$scope={dirty:o,ctx:t}),e.$set(r)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function Ph(i){let e,n;return e=new Ge({props:{size:1,$$slots:{default:[Oh]},$$scope:{ctx:i}}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p(t,o){const r={};3&o&&(r.$$scope={dirty:o,ctx:t}),e.$set(r)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function Fh(i){let e,n=`Guidelines exceeded length limit of ${i[0].userGuidelines.lengthLimit} characters`;return{c(){e=G(n)},m(t,o){x(t,e,o)},p(t,o){1&o&&n!==(n=`Guidelines exceeded length limit of ${t[0].userGuidelines.lengthLimit} characters`)&&_e(e,n)},d(t){t&&b(e)}}}function Oh(i){let e,n=`Rules and workspace guidelines (${i[0].rulesAndGuidelinesState.totalCharacterCount} chars)
          exceeded limit of ${i[0].rulesAndGuidelinesState.lengthLimit} characters, remove some rules
          or reduce the length of your guidelines.`;return{c(){e=G(n)},m(t,o){x(t,e,o)},p(t,o){1&o&&n!==(n=`Rules and workspace guidelines (${t[0].rulesAndGuidelinesState.totalCharacterCount} chars)
          exceeded limit of ${t[0].rulesAndGuidelinesState.lengthLimit} characters, remove some rules
          or reduce the length of your guidelines.`)&&_e(e,n)},d(t){t&&b(e)}}}function zh(i){let e,n,t,o,r,s,c,a,l,u,f,m,p;const _=[Ih,Eh,Th,Sh,kh,Mh,Ah,Ch,_h,xh],M=[];function C(T,E){return 1&E&&(n=null),1&E&&(t=null),1&E&&(o=null),1&E&&(r=null),1&E&&(s=null),1&E&&(c=null),1&E&&(a=null),1&E&&(l=null),1&E&&(u=null),n==null&&(n=!(!T[0]||!Is(T[0]))),n?0:(t==null&&(t=!(!T[0]||!Ls(T[0]))),t?1:(o==null&&(o=!(!T[0]||!Rs(T[0]))),o?2:(r==null&&(r=!(!T[0]||!Ds(T[0]))),r?3:(s==null&&(s=!(!T[0]||!Wi(T[0]))),s?4:(c==null&&(c=!!(T[0]&&Ns(T[0])&&T[0].userGuidelines.enabled)),c?5:(a==null&&(a=!(!T[0]||!Ps(T[0]))),a?6:(l==null&&(l=!(!T[0]||!af(T[0]))),l?7:(u==null&&(u=!(!T[0]||!Fs(T[0]))),u?8:9))))))))}return f=C(i,-1),m=M[f]=_[f](i),{c(){e=L("div"),m.c(),A(e,"class","c-mention-hover-contents svelte-11069rs")},m(T,E){x(T,e,E),M[f].m(e,null),p=!0},p(T,[E]){let R=f;f=C(T,E),f===R?M[f].p(T,E):(j(),$(M[R],1,1,()=>{M[R]=null}),q(),m=M[f],m?m.p(T,E):(m=M[f]=_[f](T),m.c()),d(m,1),m.m(e,null))},i(T){p||(d(m),p=!0)},o(T){$(m),p=!1},d(T){T&&b(e),M[f].d()}}}function Bh(i,e,n){let{option:t}=e;return i.$$set=o=>{"option"in o&&n(0,t=o.option)},[t]}class Kr extends ue{constructor(e){super(),de(this,e,Bh,zh,ce,{option:0})}}function Uh(i){let e,n,t=[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 384 512"},i[0]],o={};for(let r=0;r<t.length;r+=1)o=Me(o,t[r]);return{c(){e=rt("svg"),n=new en(!0),this.h()},l(r){e=tn(r,"svg",{xmlns:!0,"data-ds-icon":!0,viewBox:!0});var s=nn(e);n=on(s,!0),s.forEach(b),this.h()},h(){n.a=null,ut(e,o)},m(r,s){rn(r,e,s),n.m('<!--! Font Awesome Pro 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2024 Fonticons, Inc.--><path d="M345 137c9.4-9.4 9.4-24.6 0-33.9s-24.6-9.4-33.9 0l-119 119L73 103c-9.4-9.4-24.6-9.4-33.9 0s-9.4 24.6 0 33.9l119 119L39 375c-9.4 9.4-9.4 24.6 0 33.9s24.6 9.4 33.9 0l119-119L311 409c9.4 9.4 24.6 9.4 33.9 0s9.4-24.6 0-33.9l-119-119z"/>',e)},p(r,[s]){ut(e,o=Mt(t,[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 384 512"},1&s&&r[0]]))},i:P,o:P,d(r){r&&b(e)}}}function Hh(i,e,n){return i.$$set=t=>{n(0,e=Me(Me({},e),it(t)))},[e=it(e)]}class rr extends ue{constructor(e){super(),de(this,e,Hh,Uh,ce,{})}}const jh=i=>({}),gc=i=>({slot:"chaser"}),qh=i=>({}),hc=i=>({}),Wh=i=>({}),vc=i=>({slot:"leftButtons"}),Vh=i=>({}),wc=i=>({});function yc(i){let e,n;return e=new c1({props:{class:"c-pulse-chip-warning-icon"}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function Gh(i){let e,n,t;const o=i[4].default,r=Ye(o,i,i[6],null);let s=i[3]&&yc();return{c(){e=L("div"),r&&r.c(),n=B(),s&&s.c(),A(e,"class","c-context-badge__content svelte-gkpz0s")},m(c,a){x(c,e,a),r&&r.m(e,null),F(e,n),s&&s.m(e,null),t=!0},p(c,a){r&&r.p&&(!t||64&a)&&Ke(r,o,c,c[6],t?Ze(o,c[6],a,null):Xe(c[6]),null),c[3]?s?8&a&&d(s,1):(s=yc(),s.c(),d(s,1),s.m(e,null)):s&&(j(),$(s,1,1,()=>{s=null}),q())},i(c){t||(d(r,c),d(s),t=!0)},o(c){$(r,c),$(s),t=!1},d(c){c&&b(e),r&&r.d(c),s&&s.d()}}}function Yh(i){let e;const n=i[4].chaser,t=Ye(n,i,i[6],gc);return{c(){t&&t.c()},m(o,r){t&&t.m(o,r),e=!0},p(o,r){t&&t.p&&(!e||64&r)&&Ke(t,n,o,o[6],e?Ze(n,o[6],r,jh):Xe(o[6]),gc)},i(o){e||(d(t,o),e=!0)},o(o){$(t,o),e=!1},d(o){t&&t.d(o)}}}function Kh(i){let e;const n=i[4].leftIcon,t=Ye(n,i,i[6],hc),o=t||function(r){let s,c;return s=new Y$({}),{c(){v(s.$$.fragment)},m(a,l){w(s,a,l),c=!0},i(a){c||(d(s.$$.fragment,a),c=!0)},o(a){$(s.$$.fragment,a),c=!1},d(a){y(s,a)}}}();return{c(){o&&o.c()},m(r,s){o&&o.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||64&s)&&Ke(t,n,r,r[6],e?Ze(n,r[6],s,qh):Xe(r[6]),hc)},i(r){e||(d(o,r),e=!0)},o(r){$(o,r),e=!1},d(r){o&&o.d(r)}}}function Xh(i){let e;const n=i[4].leftButtons,t=Ye(n,i,i[6],vc),o=t||function(r){let s,c,a;return c=new Ao.IconButton({props:{disabled:!0,$$slots:{default:[Kh]},$$scope:{ctx:r}}}),{c(){s=L("div"),v(c.$$.fragment),A(s,"class","c-context-badge__left-icon svelte-gkpz0s")},m(l,u){x(l,s,u),w(c,s,null),a=!0},p(l,u){const f={};64&u&&(f.$$scope={dirty:u,ctx:l}),c.$set(f)},i(l){a||(d(c.$$.fragment,l),a=!0)},o(l){$(c.$$.fragment,l),a=!1},d(l){l&&b(s),y(c)}}}(i);return{c(){o&&o.c()},m(r,s){o&&o.m(r,s),e=!0},p(r,s){t?t.p&&(!e||64&s)&&Ke(t,n,r,r[6],e?Ze(n,r[6],s,Wh):Xe(r[6]),vc):o&&o.p&&(!e||64&s)&&o.p(r,e?s:-1)},i(r){e||(d(o,r),e=!0)},o(r){$(o,r),e=!1},d(r){o&&o.d(r)}}}function bc(i){let e,n;return e=new Ao.IconButton({props:{class:"c-context-badge__remove-btn",title:i[2].title,size:i[1],variant:"ghost",color:"neutral",$$slots:{default:[Zh]},$$scope:{ctx:i}}}),e.$on("click",function(){Nt(i[2].onRemove)&&i[2].onRemove.apply(this,arguments)}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p(t,o){i=t;const r={};4&o&&(r.title=i[2].title),2&o&&(r.size=i[1]),64&o&&(r.$$scope={dirty:o,ctx:i}),e.$set(r)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function Zh(i){let e,n;return e=new rr({}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function Jh(i){let e,n,t;const o=i[4].rightButtons,r=Ye(o,i,i[6],wc);let s=i[2]&&bc(i);return{c(){r&&r.c(),e=B(),s&&s.c(),n=me()},m(c,a){r&&r.m(c,a),x(c,e,a),s&&s.m(c,a),x(c,n,a),t=!0},p(c,a){r&&r.p&&(!t||64&a)&&Ke(r,o,c,c[6],t?Ze(o,c[6],a,Vh):Xe(c[6]),wc),c[2]?s?(s.p(c,a),4&a&&d(s,1)):(s=bc(c),s.c(),d(s,1),s.m(n.parentNode,n)):s&&(j(),$(s,1,1,()=>{s=null}),q())},i(c){t||(d(r,c),d(s),t=!0)},o(c){$(r,c),$(s),t=!1},d(c){c&&(b(e),b(n)),r&&r.d(c),s&&s.d(c)}}}function Qh(i){let e,n,t;return n=new Ao.Root({props:{color:i[0],size:i[1],$$slots:{rightButtons:[Jh],leftButtons:[Xh],chaser:[Yh],default:[Gh]},$$scope:{ctx:i}}}),n.$on("click",i[5]),{c(){e=L("div"),v(n.$$.fragment),A(e,"class","c-context-badge svelte-gkpz0s")},m(o,r){x(o,e,r),w(n,e,null),t=!0},p(o,[r]){const s={};1&r&&(s.color=o[0]),2&r&&(s.size=o[1]),78&r&&(s.$$scope={dirty:r,ctx:o}),n.$set(s)},i(o){t||(d(n.$$.fragment,o),t=!0)},o(o){$(n.$$.fragment,o),t=!1},d(o){o&&b(e),y(n)}}}function e2(i,e,n){let{$$slots:t={},$$scope:o}=e,{color:r="neutral"}=e,{size:s=1}=e,{removeBtn:c}=e,{showWarning:a}=e;return i.$$set=l=>{"color"in l&&n(0,r=l.color),"size"in l&&n(1,s=l.size),"removeBtn"in l&&n(2,c=l.removeBtn),"showWarning"in l&&n(3,a=l.showWarning),"$$scope"in l&&n(6,o=l.$$scope)},[r,s,c,a,t,function(l){vn.call(this,i,l)},o]}class Uo extends ue{constructor(e){super(),de(this,e,e2,Qh,ce,{color:0,size:1,removeBtn:2,showWarning:3})}}function t2(i){let e,n;return{c(){e=rt("svg"),n=rt("path"),A(n,"fill-rule","evenodd"),A(n,"clip-rule","evenodd"),A(n,"d","M7.07095 0.650238C6.67391 0.650238 6.32977 0.925096 6.24198 1.31231L6.0039 2.36247C5.6249 2.47269 5.26335 2.62363 4.92436 2.81013L4.01335 2.23585C3.67748 2.02413 3.23978 2.07312 2.95903 2.35386L2.35294 2.95996C2.0722 3.2407 2.0232 3.6784 2.23493 4.01427L2.80942 4.92561C2.62307 5.2645 2.47227 5.62594 2.36216 6.00481L1.31209 6.24287C0.924883 6.33065 0.650024 6.6748 0.650024 7.07183V7.92897C0.650024 8.32601 0.924883 8.67015 1.31209 8.75794L2.36228 8.99603C2.47246 9.375 2.62335 9.73652 2.80979 10.0755L2.2354 10.9867C2.02367 11.3225 2.07267 11.7602 2.35341 12.041L2.95951 12.6471C3.24025 12.9278 3.67795 12.9768 4.01382 12.7651L4.92506 12.1907C5.26384 12.377 5.62516 12.5278 6.0039 12.6379L6.24198 13.6881C6.32977 14.0753 6.67391 14.3502 7.07095 14.3502H7.92809C8.32512 14.3502 8.66927 14.0753 8.75705 13.6881L8.99505 12.6383C9.37411 12.5282 9.73573 12.3773 10.0748 12.1909L10.986 12.7653C11.3218 12.977 11.7595 12.928 12.0403 12.6473L12.6464 12.0412C12.9271 11.7604 12.9761 11.3227 12.7644 10.9869L12.1902 10.076C12.3768 9.73688 12.5278 9.37515 12.638 8.99596L13.6879 8.75794C14.0751 8.67015 14.35 8.32601 14.35 7.92897V7.07183C14.35 6.6748 14.0751 6.33065 13.6879 6.24287L12.6381 6.00488C12.528 5.62578 12.3771 5.26414 12.1906 4.92507L12.7648 4.01407C12.9766 3.6782 12.9276 3.2405 12.6468 2.95975L12.0407 2.35366C11.76 2.07292 11.3223 2.02392 10.9864 2.23565L10.0755 2.80989C9.73622 2.62328 9.37437 2.47229 8.99505 2.36209L8.75705 1.31231C8.66927 0.925096 8.32512 0.650238 7.92809 0.650238H7.07095ZM4.92053 3.81251C5.44724 3.44339 6.05665 3.18424 6.71543 3.06839L7.07095 1.50024H7.92809L8.28355 3.06816C8.94267 3.18387 9.5524 3.44302 10.0794 3.81224L11.4397 2.9547L12.0458 3.56079L11.1882 4.92117C11.5573 5.44798 11.8164 6.0575 11.9321 6.71638L13.5 7.07183V7.92897L11.932 8.28444C11.8162 8.94342 11.557 9.55301 11.1878 10.0798L12.0453 11.4402L11.4392 12.0462L10.0787 11.1886C9.55192 11.5576 8.94241 11.8166 8.28355 11.9323L7.92809 13.5002H7.07095L6.71543 11.932C6.0569 11.8162 5.44772 11.5572 4.92116 11.1883L3.56055 12.046L2.95445 11.4399L3.81213 10.0794C3.4431 9.55266 3.18403 8.94326 3.06825 8.2845L1.50002 7.92897V7.07183L3.06818 6.71632C3.18388 6.05765 3.44283 5.44833 3.81171 4.92165L2.95398 3.561L3.56008 2.95491L4.92053 3.81251ZM9.02496 7.50008C9.02496 8.34226 8.34223 9.02499 7.50005 9.02499C6.65786 9.02499 5.97513 8.34226 5.97513 7.50008C5.97513 6.65789 6.65786 5.97516 7.50005 5.97516C8.34223 5.97516 9.02496 6.65789 9.02496 7.50008ZM9.92496 7.50008C9.92496 8.83932 8.83929 9.92499 7.50005 9.92499C6.1608 9.92499 5.07513 8.83932 5.07513 7.50008C5.07513 6.16084 6.1608 5.07516 7.50005 5.07516C8.83929 5.07516 9.92496 6.16084 9.92496 7.50008Z"),A(n,"fill","currentColor"),A(e,"width","15"),A(e,"height","15"),A(e,"viewBox","0 0 15 15"),A(e,"fill","none"),A(e,"xmlns","http://www.w3.org/2000/svg")},m(t,o){x(t,e,o),F(e,n)},p:P,i:P,o:P,d(t){t&&b(e)}}}class n2 extends ue{constructor(e){super(),de(this,e,null,t2,ce,{})}}function xc(i,e,n){const t=i.slice();return t[1]=e[n],t}function o2(i){let e;return{c(){e=G("Repos")},m(n,t){x(n,e,t)},d(n){n&&b(e)}}}function r2(i){let e,n=i[1].sourceFolderGroup.length+"";return{c(){e=G(n)},m(t,o){x(t,e,o)},p(t,o){2&o&&n!==(n=t[1].sourceFolderGroup.length+"")&&_e(e,n)},d(t){t&&b(e)}}}function i2(i){let e,n,t;n=new Ge({props:{size:1,$$slots:{default:[r2]},$$scope:{ctx:i}}});let o=[zm("accent"),{slot:"leftIcon"},{class:"c-multi-repo-chip__count"}],r={};for(let s=0;s<o.length;s+=1)r=Me(r,o[s]);return{c(){e=L("div"),v(n.$$.fragment),Om(e,r),ke(e,"svelte-sqp0vc",!0)},m(s,c){x(s,e,c),w(n,e,null),t=!0},p(s,c){const a={};4098&c&&(a.$$scope={dirty:c,ctx:s}),n.$set(a),ke(e,"svelte-sqp0vc",!0)},i(s){t||(d(n.$$.fragment,s),t=!0)},o(s){$(n.$$.fragment,s),t=!1},d(s){s&&b(e),y(n)}}}function s2(i){let e,n;return e=new or({}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function a2(i){let e,n;return e=new Ao.IconButton({props:{title:"Open menu",variant:"ghost",color:"neutral",size:1,$$slots:{default:[s2]},$$scope:{ctx:i}}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p(t,o){const r={};4096&o&&(r.$$scope={dirty:o,ctx:t}),e.$set(r)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function c2(i){let e;return{c(){e=G("Repos")},m(n,t){x(n,e,t)},d(n){n&&b(e)}}}function l2(i){let e,n,t=i[1].name+"";return{c(){e=G(t),n=B()},m(o,r){x(o,e,r),x(o,n,r)},p(o,r){4&r&&t!==(t=o[1].name+"")&&_e(e,t)},d(o){o&&(b(e),b(n))}}}function _c(i){let e,n;return e=new Ne({props:{content:"Edit repo instructions",$$slots:{default:[d2]},$$scope:{ctx:i}}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p(t,o){const r={};4100&o&&(r.$$scope={dirty:o,ctx:t}),e.$set(r)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function u2(i){let e,n;return e=new n2({}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function d2(i){let e,n;const t=[i[5]];let o={$$slots:{default:[u2]},$$scope:{ctx:i}};for(let r=0;r<t.length;r+=1)o=Me(o,t[r]);return e=new dt({props:o}),e.$on("click",function(){Nt(i[1].onEditGuideline)&&i[1].onEditGuideline.apply(this,arguments)}),{c(){v(e.$$.fragment)},m(r,s){w(e,r,s),n=!0},p(r,s){i=r;const c=32&s?Mt(t,[fo(i[5])]):{};4096&s&&(c.$$scope={dirty:s,ctx:i}),e.$set(c)},i(r){n||(d(e.$$.fragment,r),n=!0)},o(r){$(e.$$.fragment,r),n=!1},d(r){y(e,r)}}}function $2(i){let e,n;return e=new xr({}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function f2(i){let e,n;const t=[i[5]];let o={$$slots:{default:[$2]},$$scope:{ctx:i}};for(let r=0;r<t.length;r+=1)o=Me(o,t[r]);return e=new dt({props:o}),e.$on("click",function(){Nt(i[1].onRemove)&&i[1].onRemove.apply(this,arguments)}),{c(){v(e.$$.fragment)},m(r,s){w(e,r,s),n=!0},p(r,s){i=r;const c=32&s?Mt(t,[fo(i[5])]):{};4096&s&&(c.$$scope={dirty:s,ctx:i}),e.$set(c)},i(r){n||(d(e.$$.fragment,r),n=!0)},o(r){$(e.$$.fragment,r),n=!1},d(r){y(e,r)}}}function m2(i){let e,n,t,o,r,s=i[1].onEditGuideline&&_c(i);return t=new Ne({props:{content:"Remove repo from context",$$slots:{default:[f2]},$$scope:{ctx:i}}}),{c(){e=L("div"),s&&s.c(),n=B(),v(t.$$.fragment),o=B(),A(e,"class","c-multi-repo-chip__dropdown-item__actions svelte-sqp0vc"),A(e,"slot","iconRight"),ke(e,"c-multi-repo-chip__dropdown-item__guideline-space",i[3]&&!i[1].onEditGuideline)},m(c,a){x(c,e,a),s&&s.m(e,null),F(e,n),w(t,e,null),F(e,o),r=!0},p(c,a){c[1].onEditGuideline?s?(s.p(c,a),4&a&&d(s,1)):(s=_c(c),s.c(),d(s,1),s.m(e,n)):s&&(j(),$(s,1,1,()=>{s=null}),q());const l={};4100&a&&(l.$$scope={dirty:a,ctx:c}),t.$set(l),(!r||12&a)&&ke(e,"c-multi-repo-chip__dropdown-item__guideline-space",c[3]&&!c[1].onEditGuideline)},i(c){r||(d(s),d(t.$$.fragment,c),r=!0)},o(c){$(s),$(t.$$.fragment,c),r=!1},d(c){c&&b(e),s&&s.d(),y(t)}}}function Cc(i){let e,n;const t=[i[1],{class:"c-multi-repo-chip__dropdown-item"},{highlight:!1},{disabled:!0}];let o={$$slots:{iconRight:[m2],default:[l2]},$$scope:{ctx:i}};for(let r=0;r<t.length;r+=1)o=Me(o,t[r]);return e=new we.Item({props:o}),{c(){v(e.$$.fragment)},m(r,s){w(e,r,s),n=!0},p(r,s){const c=4&s?Mt(t,[fo(r[1]),t[1],t[2],t[3]]):{};4108&s&&(c.$$scope={dirty:s,ctx:r}),e.$set(c)},i(r){n||(d(e.$$.fragment,r),n=!0)},o(r){$(e.$$.fragment,r),n=!1},d(r){y(e,r)}}}function p2(i){let e,n,t,o;e=new we.Label({props:{$$slots:{default:[c2]},$$scope:{ctx:i}}});let r=at(i[2]),s=[];for(let a=0;a<r.length;a+=1)s[a]=Cc(xc(i,r,a));const c=a=>$(s[a],1,1,()=>{s[a]=null});return{c(){v(e.$$.fragment),n=B();for(let a=0;a<s.length;a+=1)s[a].c();t=me()},m(a,l){w(e,a,l),x(a,n,l);for(let u=0;u<s.length;u+=1)s[u]&&s[u].m(a,l);x(a,t,l),o=!0},p(a,l){const u={};if(4096&l&&(u.$$scope={dirty:l,ctx:a}),e.$set(u),44&l){let f;for(r=at(a[2]),f=0;f<r.length;f+=1){const m=xc(a,r,f);s[f]?(s[f].p(m,l),d(s[f],1)):(s[f]=Cc(m),s[f].c(),d(s[f],1),s[f].m(t.parentNode,t))}for(j(),f=r.length;f<s.length;f+=1)c(f);q()}},i(a){if(!o){d(e.$$.fragment,a);for(let l=0;l<r.length;l+=1)d(s[l]);o=!0}},o(a){$(e.$$.fragment,a),s=s.filter(Boolean);for(let l=0;l<s.length;l+=1)$(s[l]);o=!1},d(a){a&&(b(n),b(t)),y(e,a),pn(s,a)}}}function g2(i){let e,n,t,o;return e=new we.Trigger({props:{$$slots:{default:[a2]},$$scope:{ctx:i}}}),t=new we.Content({props:{$$slots:{default:[p2]},$$scope:{ctx:i}}}),{c(){v(e.$$.fragment),n=B(),v(t.$$.fragment)},m(r,s){w(e,r,s),x(r,n,s),w(t,r,s),o=!0},p(r,s){const c={};4096&s&&(c.$$scope={dirty:s,ctx:r}),e.$set(c);const a={};4108&s&&(a.$$scope={dirty:s,ctx:r}),t.$set(a)},i(r){o||(d(e.$$.fragment,r),d(t.$$.fragment,r),o=!0)},o(r){$(e.$$.fragment,r),$(t.$$.fragment,r),o=!1},d(r){r&&b(n),y(e,r),y(t,r)}}}function h2(i){let e,n;return e=new we.Root({props:{slot:"rightButtons",$$slots:{default:[g2]},$$scope:{ctx:i}}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p(t,o){const r={};4108&o&&(r.$$scope={dirty:o,ctx:t}),e.$set(r)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function v2(i){let e,n;return e=new Uo({props:{$$slots:{rightButtons:[h2],leftIcon:[i2],default:[o2]},$$scope:{ctx:i}}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p(t,[o]){const r={};4110&o&&(r.$$scope={dirty:o,ctx:t}),e.$set(r)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function w2(i,e,n){let t,o,r,s,c,a=P,l=P,u=()=>(l(),l=lt(m,p=>n(6,c=p)),m);i.$$.on_destroy.push(()=>a()),i.$$.on_destroy.push(()=>l());let{item:f}=e,{chatModel:m}=e;return u(),i.$$set=p=>{"item"in p&&n(1,f=p.item),"chatModel"in p&&u(n(0,m=p.chatModel))},i.$$.update=()=>{64&i.$$.dirty&&(n(4,t=c==null?void 0:c.specialContextInputModel),a(),a=lt(t,p=>n(7,s=p))),2&i.$$.dirty&&n(2,o=f.sourceFolderGroup.map(p=>({filePath:p.sourceFolder.folderRoot,name:ws(p.sourceFolder.folderRoot),onRemove:()=>{return _=p,s==null||s.markInactive(_),void(s==null?void 0:s.unpin(_));var _},onEditGuideline:!!p.sourceFolder.guidelinesEnabled&&(()=>{return _=p.sourceFolder.folderRoot,void(m==null?void 0:m.extensionClient.openGuidelines(_));var _})}))),4&i.$$.dirty&&n(3,r=o.some(p=>p.onEditGuideline))},[m,f,o,r,t,{size:1,variant:"ghost-block",color:"neutral"},c]}class y2 extends ue{constructor(e){super(),de(this,e,w2,v2,ce,{item:1,chatModel:0})}}function b2(i){let e,n,t,o=(i[0]??"")+"";return{c(){e=L("pre"),n=L("code"),t=G(o),A(e,"class","c-selection-preview__code svelte-mrw7pf")},m(r,s){x(r,e,s),F(e,n),F(n,t)},p(r,s){1&s&&o!==(o=(r[0]??"")+"")&&_e(t,o)},i:P,o:P,d(r){r&&b(e)}}}function x2(i){let e,n,t,o;function r(a){i[5](a)}var s=i[8].default;function c(a,l){let u={text:a[0]??"",options:{automaticLayout:!0,lineNumbers:"off",wrappingIndent:"same",padding:{top:0,bottom:0},wordWrap:"off",contextmenu:!1,wordBasedSuggestions:"off",renderLineHighlight:"none",occurrencesHighlight:"off",selectionHighlight:!1,codeLens:!1,links:!1,hover:{enabled:!1},hideCursorInOverviewRuler:!0,renderWhitespace:"none",renderFinalNewline:"on"}};return a[1]!==void 0&&(u.editorInstance=a[1]),{props:u}}return s&&(e=ln(s,c(i)),et.push(()=>Et(e,"editorInstance",r))),{c(){e&&v(e.$$.fragment),t=me()},m(a,l){e&&w(e,a,l),x(a,t,l),o=!0},p(a,l){if(s!==(s=a[8].default)){if(e){j();const u=e;$(u.$$.fragment,1,0,()=>{y(u,1)}),q()}s?(e=ln(s,c(a)),et.push(()=>Et(e,"editorInstance",r)),v(e.$$.fragment),d(e.$$.fragment,1),w(e,t.parentNode,t)):e=null}else if(s){const u={};1&l&&(u.text=a[0]??""),!n&&2&l&&(n=!0,u.editorInstance=a[1],Rt(()=>n=!1)),e.$set(u)}},i(a){o||(e&&d(e.$$.fragment,a),o=!0)},o(a){e&&$(e.$$.fragment,a),o=!1},d(a){a&&b(t),e&&y(e,a)}}}function _2(i){let e,n,t,o=(i[0]??"")+"";return{c(){e=L("pre"),n=L("code"),t=G(o),A(e,"class","c-selection-preview__code svelte-mrw7pf")},m(r,s){x(r,e,s),F(e,n),F(n,t)},p(r,s){1&s&&o!==(o=(r[0]??"")+"")&&_e(t,o)},i:P,o:P,d(r){r&&b(e)}}}function C2(i){let e,n,t=i[3]&&function(o){let r,s,c={ctx:o,current:null,token:null,hasCatch:!0,pending:_2,then:x2,catch:b2,value:8,blocks:[,,,]};return vr(o[3],c),{c(){r=me(),c.block.c()},m(a,l){x(a,r,l),c.block.m(a,c.anchor=l),c.mount=()=>r.parentNode,c.anchor=r,s=!0},p(a,l){Vi(c,o=a,l)},i(a){s||(d(c.block),s=!0)},o(a){for(let l=0;l<3;l+=1){const u=c.blocks[l];$(u)}s=!1},d(a){a&&b(r),c.block.d(a),c.token=null,c=null}}}(i);return{c(){e=L("div"),t&&t.c(),A(e,"class","c-selection-hover-contents svelte-mrw7pf"),A(e,"style",i[2])},m(o,r){x(o,e,r),t&&t.m(e,null),n=!0},p(o,[r]){o[3]&&t.p(o,r),(!n||4&r)&&A(e,"style",o[2])},i(o){n||(d(t),n=!0)},o(o){$(t),n=!1},d(o){o&&b(e),t&&t.d()}}}function A2(i,e,n){let{originalCode:t}=e;const o=Gi(()=>import("./index-oyQWDnzB.js").then(l=>l.d),__vite__mapDeps([0,1,2,3,4]),import.meta.url);let r,s="",c=!1;const a=async(l,u)=>{n(4,c=!0),n(2,s=`
         width: ${l}px;
         height: min(${u}px, 40vh);
    `)};return i.$$set=l=>{"originalCode"in l&&n(0,t=l.originalCode)},i.$$.update=()=>{2&i.$$.dirty&&(r==null||r.onDidContentSizeChange(l=>a(l.contentWidth,l.contentHeight))),18&i.$$.dirty&&r&&!c&&a(r==null?void 0:r.getContentWidth(),r==null?void 0:r.getContentHeight())},[t,r,s,o,c,function(l){r=l,n(1,r)}]}class M2 extends ue{constructor(e){super(),de(this,e,A2,C2,ce,{originalCode:0})}}function k2(i){let e,n;const t=i[2].default,o=Ye(t,i,i[3],null);return{c(){e=G(`Selection
    `),o&&o.c()},m(r,s){x(r,e,s),o&&o.m(r,s),n=!0},p(r,s){o&&o.p&&(!n||8&s)&&Ke(o,t,r,r[3],n?Ze(t,r[3],s,null):Xe(r[3]),null)},i(r){n||(d(o,r),n=!0)},o(r){$(o,r),n=!1},d(r){r&&b(e),o&&o.d(r)}}}function S2(i){let e,n;return e=new vf({props:{slot:"leftIcon"}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p:P,i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function T2(i){let e,n;return e=new Uo({props:{color:"info",removeBtn:{title:"Remove selection from context",onRemove:i[1]},$$slots:{leftIcon:[S2],default:[k2]},$$scope:{ctx:i}}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p(t,o){const r={};2&o&&(r.removeBtn={title:"Remove selection from context",onRemove:t[1]}),8&o&&(r.$$scope={dirty:o,ctx:t}),e.$set(r)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function E2(i){let e,n;return e=new M2({props:{slot:"content",originalCode:i[0]}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p(t,o){const r={};1&o&&(r.originalCode=t[0]),e.$set(r)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function I2(i){let e,n;return e=new Ne({props:{maxWidth:"",$$slots:{content:[E2],default:[T2]},$$scope:{ctx:i}}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p(t,[o]){const r={};11&o&&(r.$$scope={dirty:o,ctx:t}),e.$set(r)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function L2(i,e,n){let{$$slots:t={},$$scope:o}=e,{originalCode:r}=e,{onRemove:s}=e;return i.$$set=c=>{"originalCode"in c&&n(0,r=c.originalCode),"onRemove"in c&&n(1,s=c.onRemove),"$$scope"in c&&n(3,o=c.$$scope)},[r,s,t,o]}class R2 extends ue{constructor(e){super(),de(this,e,L2,I2,ce,{originalCode:0,onRemove:1})}}function Ac(i){let e,n,t,o;const r=[N2,D2],s=[];function c(a,l){return a[1]?0:1}return e=c(i),n=s[e]=r[e](i),{c(){n.c(),t=me()},m(a,l){s[e].m(a,l),x(a,t,l),o=!0},p(a,l){let u=e;e=c(a),e===u?s[e].p(a,l):(j(),$(s[u],1,1,()=>{s[u]=null}),q(),n=s[e],n?n.p(a,l):(n=s[e]=r[e](a),n.c()),d(n,1),n.m(t.parentNode,t))},i(a){o||(d(n),o=!0)},o(a){$(n),o=!1},d(a){a&&b(t),s[e].d(a)}}}function D2(i){let e,n;return e=new Ne({props:{content:"Edit guidelines for Augment Chat and Agent",$$slots:{default:[O2]},$$scope:{ctx:i}}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p(t,o){const r={};520&o&&(r.$$scope={dirty:o,ctx:t}),e.$set(r)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function N2(i){let e,n;return e=new Ne({props:{$$slots:{content:[H2],default:[U2]},$$scope:{ctx:i}}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p(t,o){const r={};521&o&&(r.$$scope={dirty:o,ctx:t}),e.$set(r)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function P2(i){let e;return{c(){e=G(i[3])},m(n,t){x(n,e,t)},p(n,t){8&t&&_e(e,n[3])},d(n){n&&b(e)}}}function F2(i){let e,n;return e=new qm({props:{slot:"leftIcon"}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p:P,i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function O2(i){let e,n,t,o,r;return n=new Uo({props:{$$slots:{leftIcon:[F2],default:[P2]},$$scope:{ctx:i}}}),{c(){e=L("div"),v(n.$$.fragment),A(e,"role","button"),A(e,"tabindex","0"),qn(e,"cursor","pointer")},m(s,c){x(s,e,c),w(n,e,null),t=!0,o||(r=[Le(e,"click",i[5]),Le(e,"keyup",ko("Enter",i[5]))],o=!0)},p(s,c){const a={};520&c&&(a.$$scope={dirty:c,ctx:s}),n.$set(a)},i(s){t||(d(n.$$.fragment,s),t=!0)},o(s){$(n.$$.fragment,s),t=!1},d(s){s&&b(e),y(n),o=!1,Qt(r)}}}function z2(i){let e,n,t,o;return{c(){e=L("div"),n=G(i[3]),A(e,"role","button"),A(e,"tabindex","0"),qn(e,"cursor","pointer")},m(r,s){x(r,e,s),F(e,n),t||(o=[Le(e,"click",$r(i[5])),Le(e,"keyup",ko("Enter",i[5]))],t=!0)},p(r,s){8&s&&_e(n,r[3])},d(r){r&&b(e),t=!1,Qt(o)}}}function B2(i){let e,n;return e=new Wn({props:{class:"c-user-guidelines-warning-icon",slot:"leftIcon"}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p:P,i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function U2(i){let e,n;return e=new Uo({props:{color:"warning",showWarning:!1,$$slots:{leftIcon:[B2],default:[z2]},$$scope:{ctx:i}}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p(t,o){const r={};520&o&&(r.$$scope={dirty:o,ctx:t}),e.$set(r)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function H2(i){let e,n;return e=new Kr({props:{option:i[0],slot:"content"}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p(t,o){const r={};1&o&&(r.option=t[0]),e.$set(r)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function j2(i){let e,n,t=i[2]&&Ac(i);return{c(){t&&t.c(),e=me()},m(o,r){t&&t.m(o,r),x(o,e,r),n=!0},p(o,[r]){o[2]?t?(t.p(o,r),4&r&&d(t,1)):(t=Ac(o),t.c(),d(t,1),t.m(e.parentNode,e)):t&&(j(),$(t,1,1,()=>{t=null}),q())},i(o){n||(d(t),n=!0)},o(o){$(t),n=!1},d(o){o&&b(e),t&&t.d(o)}}}function q2(i,e,n){let t,o,r,s,c,a,{item:l}=e;const u=Sp();return Te(i,u,f=>n(8,a=f)),i.$$set=f=>{"item"in f&&n(0,l=f.item)},i.$$.update=()=>{var f;1&i.$$.dirty&&n(1,t=l.showWarning),1&i.$$.dirty&&n(7,o=((f=l.userGuidelines)==null?void 0:f.enabled)??!1),256&i.$$.dirty&&n(6,r=(a==null?void 0:a.flags.enableRules)??!1),64&i.$$.dirty&&n(3,s=r?"Rules & Guidelines":"User Guidelines"),194&i.$$.dirty&&n(2,c=o||r&&t)},[l,t,c,s,u,function(){u&&u.extensionClient.openSettingsPage("guidelines")},r,o,a]}class W2 extends ue{constructor(e){super(),de(this,e,q2,j2,ce,{item:0})}}var Gf,V2={exports:{}};Gf=()=>(()=>{var i=[,(o,r,s)=>{s.r(r),s.d(r,{default:()=>l});var c,a=(c=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0,function(u={}){var f,m,p=u;function _(){function g(W){const te=I;k=h=0,I=new Map,te.forEach(fe=>{try{fe(W)}catch(ne){console.error(ne)}}),this.ob(),D&&D.Tb()}let h=0,k=0,I=new Map,D=null,U=null;this.requestAnimationFrame=function(W){h||(h=requestAnimationFrame(g.bind(this)));const te=++k;return I.set(te,W),te},this.cancelAnimationFrame=function(W){I.delete(W),h&&I.size==0&&(cancelAnimationFrame(h),h=0)},this.Rb=function(W){U&&(document.body.remove(U),U=null),W||(U=document.createElement("div"),U.style.backgroundColor="black",U.style.position="fixed",U.style.right=0,U.style.top=0,U.style.color="white",U.style.padding="4px",U.innerHTML="RIVE FPS",W=function(te){U.innerHTML="RIVE FPS "+te.toFixed(1)},document.body.appendChild(U)),D=new function(){let te=0,fe=0;this.Tb=function(){var ne=performance.now();fe?(++te,1e3<(ne-=fe)&&(W(1e3*te/ne),te=fe=0)):(fe=ne,te=0)}}},this.Ob=function(){U&&(document.body.remove(U),U=null),D=null},this.ob=function(){}}function M(g){console.assert(!0);const h=new Map;let k=-1/0;this.push=function(I){return I=I+((1<<g)-1)>>g,h.has(I)&&clearTimeout(h.get(I)),h.set(I,setTimeout(function(){h.delete(I),h.length==0?k=-1/0:I==k&&(k=Math.max(...h.keys()),console.assert(k<I))},1e3)),k=Math.max(I,k),k<<g}}p.ready=new Promise((g,h)=>{f=g,m=h});const C=p.onRuntimeInitialized;p.onRuntimeInitialized=function(){C&&C();let g=p.decodeAudio;p.decodeAudio=function(D,U){U(D=g(D))};let h=p.decodeFont;p.decodeFont=function(D,U){U(D=h(D))};const k=p.FileAssetLoader;p.ptrToAsset=D=>{let U=p.ptrToFileAsset(D);return U.isImage?p.ptrToImageAsset(D):U.isFont?p.ptrToFontAsset(D):U.isAudio?p.ptrToAudioAsset(D):U},p.CustomFileAssetLoader=k.extend("CustomFileAssetLoader",{__construct:function({loadContents:D}){this.__parent.__construct.call(this),this.Gb=D},loadContents:function(D,U){return D=p.ptrToAsset(D),this.Gb(D,U)}}),p.CDNFileAssetLoader=k.extend("CDNFileAssetLoader",{__construct:function(){this.__parent.__construct.call(this)},loadContents:function(D){let U=p.ptrToAsset(D);return(D=U.cdnUuid)!==""&&(W=U.cdnBaseUrl+"/"+D,(te=new XMLHttpRequest).responseType="arraybuffer",te.onreadystatechange=function(){te.readyState==4&&te.status==200&&(fe=>{U.decode(new Uint8Array(fe.response))})(te)},te.open("GET",W,!0),te.send(null),!0);var W,te}}),p.FallbackFileAssetLoader=k.extend("FallbackFileAssetLoader",{__construct:function(){this.__parent.__construct.call(this),this.kb=[]},addLoader:function(D){this.kb.push(D)},loadContents:function(D,U){for(let W of this.kb)if(W.loadContents(D,U))return!0;return!1}});let I=p.computeAlignment;p.computeAlignment=function(D,U,W,te,fe=1){return I.call(this,D,U,W,te,fe)}};const T="createConicGradient createImageData createLinearGradient createPattern createRadialGradient getContextAttributes getImageData getLineDash getTransform isContextLost isPointInPath isPointInStroke measureText".split(" "),E=new function(){function g(){if(!h){let Ct=function(ae,be,ft){if(be=Ie.createShader(be),Ie.shaderSource(be,ft),Ie.compileShader(be),0<((ft=Ie.getShaderInfoLog(be))||"").length)throw ft;Ie.attachShader(ae,be)};var je=document.createElement("canvas"),ze={alpha:1,depth:0,stencil:0,antialias:0,premultipliedAlpha:1,preserveDrawingBuffer:0,powerPreference:"high-performance",failIfMajorPerformanceCaveat:0,enableExtensionsByDefault:1,explicitSwapControl:1,renderViaOffscreenBackBuffer:1};let Ie;if(/iPhone|iPad|iPod/i.test(navigator.userAgent)){if(Ie=je.getContext("webgl",ze),k=1,!Ie)return console.log("No WebGL support. Image mesh will not be drawn."),!1}else if(Ie=je.getContext("webgl2",ze))k=2;else{if(!(Ie=je.getContext("webgl",ze)))return console.log("No WebGL support. Image mesh will not be drawn."),!1;k=1}if(Ie=new Proxy(Ie,{get:(ae,be)=>ae.isContextLost()?(fe||(console.error("Cannot render the mesh because the GL Context was lost. Tried to invoke ",be),fe=!0),typeof ae[be]=="function"?function(){}:void 0):typeof ae[be]=="function"?function(...ft){return ae[be].apply(ae,ft)}:ae[be],set(ae,be,ft){if(!ae.isContextLost())return ae[be]=ft,!0;fe||(console.error("Cannot render the mesh because the GL Context was lost. Tried to set property "+be),fe=!0)}}),I=Math.min(Ie.getParameter(Ie.MAX_RENDERBUFFER_SIZE),Ie.getParameter(Ie.MAX_TEXTURE_SIZE)),Ct(je=Ie.createProgram(),Ie.VERTEX_SHADER,`attribute vec2 vertex;
                attribute vec2 uv;
                uniform vec4 mat;
                uniform vec2 translate;
                varying vec2 st;
                void main() {
                    st = uv;
                    gl_Position = vec4(mat2(mat) * vertex + translate, 0, 1);
                }`),Ct(je,Ie.FRAGMENT_SHADER,`precision highp float;
                uniform sampler2D image;
                varying vec2 st;
                void main() {
                    gl_FragColor = texture2D(image, st);
                }`),Ie.bindAttribLocation(je,0,"vertex"),Ie.bindAttribLocation(je,1,"uv"),Ie.linkProgram(je),0<((ze=Ie.getProgramInfoLog(je))||"").trim().length)throw ze;D=Ie.getUniformLocation(je,"mat"),U=Ie.getUniformLocation(je,"translate"),Ie.useProgram(je),Ie.bindBuffer(Ie.ARRAY_BUFFER,Ie.createBuffer()),Ie.enableVertexAttribArray(0),Ie.enableVertexAttribArray(1),Ie.bindBuffer(Ie.ELEMENT_ARRAY_BUFFER,Ie.createBuffer()),Ie.uniform1i(Ie.getUniformLocation(je,"image"),0),Ie.pixelStorei(Ie.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),h=Ie}return!0}let h=null,k=0,I=0,D=null,U=null,W=0,te=0,fe=!1;g(),this.hc=function(){return g(),I},this.Mb=function(je){h.deleteTexture&&h.deleteTexture(je)},this.Lb=function(je){if(!g())return null;const ze=h.createTexture();return ze?(h.bindTexture(h.TEXTURE_2D,ze),h.texImage2D(h.TEXTURE_2D,0,h.RGBA,h.RGBA,h.UNSIGNED_BYTE,je),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_S,h.CLAMP_TO_EDGE),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_T,h.CLAMP_TO_EDGE),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MAG_FILTER,h.LINEAR),k==2?(h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MIN_FILTER,h.LINEAR_MIPMAP_LINEAR),h.generateMipmap(h.TEXTURE_2D)):h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MIN_FILTER,h.LINEAR),ze):null};const ne=new M(8),Re=new M(8),Pe=new M(10),Be=new M(10);this.Qb=function(je,ze,Ie,Ct,ae){if(g()){var be=ne.push(je),ft=Re.push(ze);if(h.canvas){for(var Kt of(h.canvas.width==be&&h.canvas.height==ft||(h.canvas.width=be,h.canvas.height=ft),h.viewport(0,ft-ze,je,ze),h.disable(h.SCISSOR_TEST),h.clearColor(0,0,0,0),h.clear(h.COLOR_BUFFER_BIT),h.enable(h.SCISSOR_TEST),Ie.sort((At,ao)=>ao.wb-At.wb),be=Pe.push(Ct),W!=be&&(h.bufferData(h.ARRAY_BUFFER,8*be,h.DYNAMIC_DRAW),W=be),be=0,Ie))h.bufferSubData(h.ARRAY_BUFFER,be,Kt.Ta),be+=4*Kt.Ta.length;for(var Kn of(console.assert(be==4*Ct),Ie))h.bufferSubData(h.ARRAY_BUFFER,be,Kn.Db),be+=4*Kn.Db.length;for(var Yo of(console.assert(be==8*Ct),be=Be.push(ae),te!=be&&(h.bufferData(h.ELEMENT_ARRAY_BUFFER,2*be,h.DYNAMIC_DRAW),te=be),Kt=0,Ie))h.bufferSubData(h.ELEMENT_ARRAY_BUFFER,Kt,Yo.indices),Kt+=2*Yo.indices.length;console.assert(Kt==2*ae),Yo=0,Kn=!0,be=Kt=0;for(const At of Ie){At.image.Ka!=Yo&&(h.bindTexture(h.TEXTURE_2D,At.image.Ja||null),Yo=At.image.Ka),At.mc?(h.scissor(At.Ya,ft-At.Za-At.jb,At.Ac,At.jb),Kn=!0):Kn&&(h.scissor(0,ft-ze,je,ze),Kn=!1),Ie=2/je;const ao=-2/ze;h.uniform4f(D,At.ha[0]*Ie*At.Ba,At.ha[1]*ao*At.Ca,At.ha[2]*Ie*At.Ba,At.ha[3]*ao*At.Ca),h.uniform2f(U,At.ha[4]*Ie*At.Ba+Ie*(At.Ya-At.ic*At.Ba)-1,At.ha[5]*ao*At.Ca+ao*(At.Za-At.jc*At.Ca)+1),h.vertexAttribPointer(0,2,h.FLOAT,!1,0,be),h.vertexAttribPointer(1,2,h.FLOAT,!1,0,be+4*Ct),h.drawElements(h.TRIANGLES,At.indices.length,h.UNSIGNED_SHORT,Kt),be+=4*At.Ta.length,Kt+=2*At.indices.length}console.assert(be==4*Ct),console.assert(Kt==2*ae)}}},this.canvas=function(){return g()&&h.canvas}},R=p.onRuntimeInitialized;p.onRuntimeInitialized=function(){function g(ye){switch(ye){case ne.srcOver:return"source-over";case ne.screen:return"screen";case ne.overlay:return"overlay";case ne.darken:return"darken";case ne.lighten:return"lighten";case ne.colorDodge:return"color-dodge";case ne.colorBurn:return"color-burn";case ne.hardLight:return"hard-light";case ne.softLight:return"soft-light";case ne.difference:return"difference";case ne.exclusion:return"exclusion";case ne.multiply:return"multiply";case ne.hue:return"hue";case ne.saturation:return"saturation";case ne.color:return"color";case ne.luminosity:return"luminosity"}}function h(ye){return"rgba("+((16711680&ye)>>>16)+","+((65280&ye)>>>8)+","+((255&ye)>>>0)+","+((4278190080&ye)>>>24)/255+")"}function k(){0<ft.length&&(E.Qb(be.drawWidth(),be.drawHeight(),ft,Kt,Kn),ft=[],Kn=Kt=0,be.reset(512,512));for(const ye of ae){for(const Ue of ye.H)Ue();ye.H=[]}ae.clear()}R&&R();var I=p.RenderPaintStyle;const D=p.RenderPath,U=p.RenderPaint,W=p.Renderer,te=p.StrokeCap,fe=p.StrokeJoin,ne=p.BlendMode,Re=I.fill,Pe=I.stroke,Be=p.FillRule.evenOdd;let je=1;var ze=p.RenderImage.extend("CanvasRenderImage",{__construct:function({la:ye,xa:Ue}={}){this.__parent.__construct.call(this),this.Ka=je,je=je+1&2147483647||1,this.la=ye,this.xa=Ue},__destruct:function(){this.Ja&&(E.Mb(this.Ja),URL.revokeObjectURL(this.Wa)),this.__parent.__destruct.call(this)},decode:function(ye){var Ue=this;Ue.xa&&Ue.xa(Ue);var yt=new Image;Ue.Wa=URL.createObjectURL(new Blob([ye],{type:"image/png"})),yt.onload=function(){Ue.Fb=yt,Ue.Ja=E.Lb(yt),Ue.size(yt.width,yt.height),Ue.la&&Ue.la(Ue)},yt.src=Ue.Wa}}),Ie=D.extend("CanvasRenderPath",{__construct:function(){this.__parent.__construct.call(this),this.T=new Path2D},rewind:function(){this.T=new Path2D},addPath:function(ye,Ue,yt,bt,pt,kt,St){var Ft=this.T,to=Ft.addPath;ye=ye.T;const hn=new DOMMatrix;hn.a=Ue,hn.b=yt,hn.c=bt,hn.d=pt,hn.e=kt,hn.f=St,to.call(Ft,ye,hn)},fillRule:function(ye){this.Va=ye},moveTo:function(ye,Ue){this.T.moveTo(ye,Ue)},lineTo:function(ye,Ue){this.T.lineTo(ye,Ue)},cubicTo:function(ye,Ue,yt,bt,pt,kt){this.T.bezierCurveTo(ye,Ue,yt,bt,pt,kt)},close:function(){this.T.closePath()}}),Ct=U.extend("CanvasRenderPaint",{color:function(ye){this.Xa=h(ye)},thickness:function(ye){this.Ib=ye},join:function(ye){switch(ye){case fe.miter:this.Ia="miter";break;case fe.round:this.Ia="round";break;case fe.bevel:this.Ia="bevel"}},cap:function(ye){switch(ye){case te.butt:this.Ha="butt";break;case te.round:this.Ha="round";break;case te.square:this.Ha="square"}},style:function(ye){this.Hb=ye},blendMode:function(ye){this.Eb=g(ye)},clearGradient:function(){this.ja=null},linearGradient:function(ye,Ue,yt,bt){this.ja={yb:ye,zb:Ue,bb:yt,cb:bt,Ra:[]}},radialGradient:function(ye,Ue,yt,bt){this.ja={yb:ye,zb:Ue,bb:yt,cb:bt,Ra:[],ec:!0}},addStop:function(ye,Ue){this.ja.Ra.push({color:ye,stop:Ue})},completeGradient:function(){},draw:function(ye,Ue,yt){let bt=this.Hb;var pt=this.Xa,kt=this.ja;if(ye.globalCompositeOperation=this.Eb,kt!=null){pt=kt.yb;var St=kt.zb;const to=kt.bb;var Ft=kt.cb;const hn=kt.Ra;kt.ec?(kt=to-pt,Ft-=St,pt=ye.createRadialGradient(pt,St,0,pt,St,Math.sqrt(kt*kt+Ft*Ft))):pt=ye.createLinearGradient(pt,St,to,Ft);for(let co=0,kn=hn.length;co<kn;co++)St=hn[co],pt.addColorStop(St.stop,h(St.color));this.Xa=pt,this.ja=null}switch(bt){case Pe:ye.strokeStyle=pt,ye.lineWidth=this.Ib,ye.lineCap=this.Ha,ye.lineJoin=this.Ia,ye.stroke(Ue);break;case Re:ye.fillStyle=pt,ye.fill(Ue,yt)}}});const ae=new Set;let be=null,ft=[],Kt=0,Kn=0;var Yo=p.CanvasRenderer=W.extend("Renderer",{__construct:function(ye){this.__parent.__construct.call(this),this.S=[1,0,0,1,0,0],this.C=ye.getContext("2d"),this.Ua=ye,this.H=[]},save:function(){this.S.push(...this.S.slice(this.S.length-6)),this.H.push(this.C.save.bind(this.C))},restore:function(){const ye=this.S.length-6;if(6>ye)throw"restore() called without matching save().";this.S.splice(ye),this.H.push(this.C.restore.bind(this.C))},transform:function(ye,Ue,yt,bt,pt,kt){const St=this.S,Ft=St.length-6;St.splice(Ft,6,St[Ft]*ye+St[Ft+2]*Ue,St[Ft+1]*ye+St[Ft+3]*Ue,St[Ft]*yt+St[Ft+2]*bt,St[Ft+1]*yt+St[Ft+3]*bt,St[Ft]*pt+St[Ft+2]*kt+St[Ft+4],St[Ft+1]*pt+St[Ft+3]*kt+St[Ft+5]),this.H.push(this.C.transform.bind(this.C,ye,Ue,yt,bt,pt,kt))},rotate:function(ye){const Ue=Math.sin(ye);ye=Math.cos(ye),this.transform(ye,Ue,-Ue,ye,0,0)},_drawPath:function(ye,Ue){this.H.push(Ue.draw.bind(Ue,this.C,ye.T,ye.Va===Be?"evenodd":"nonzero"))},_drawRiveImage:function(ye,Ue,yt){var bt=ye.Fb;if(bt){var pt=this.C,kt=g(Ue);this.H.push(function(){pt.globalCompositeOperation=kt,pt.globalAlpha=yt,pt.drawImage(bt,0,0),pt.globalAlpha=1})}},_getMatrix:function(ye){const Ue=this.S,yt=Ue.length-6;for(let bt=0;6>bt;++bt)ye[bt]=Ue[yt+bt]},_drawImageMesh:function(ye,Ue,yt,bt,pt,kt,St,Ft,to,hn){var co=this.C.canvas.width,kn=this.C.canvas.height;const ka=to-St,Sa=hn-Ft;St=Math.max(St,0),Ft=Math.max(Ft,0),to=Math.min(to,co),hn=Math.min(hn,kn);const Ir=to-St,Lr=hn-Ft;if(console.assert(Ir<=Math.min(ka,co)),console.assert(Lr<=Math.min(Sa,kn)),!(0>=Ir||0>=Lr)){to=Ir<ka||Lr<Sa,co=hn=1;var Ko=Math.ceil(Ir*hn),Xo=Math.ceil(Lr*co);kn=E.hc(),Ko>kn&&(hn*=kn/Ko,Ko=kn),Xo>kn&&(co*=kn/Xo,Xo=kn),be||(be=new p.DynamicRectanizer(kn),be.reset(512,512)),0>(kn=be.addRect(Ko,Xo))&&(k(),ae.add(this),kn=be.addRect(Ko,Xo),console.assert(0<=kn));var Ta=65535&kn,Ea=kn>>16;ft.push({ha:this.S.slice(this.S.length-6),image:ye,Ya:Ta,Za:Ea,ic:St,jc:Ft,Ac:Ko,jb:Xo,Ba:hn,Ca:co,Ta:new Float32Array(bt),Db:new Float32Array(pt),indices:new Uint16Array(kt),mc:to,wb:ye.Ka<<1|(to?1:0)}),Kt+=bt.length,Kn+=kt.length;var cr=this.C,Nm=g(Ue);this.H.push(function(){cr.save(),cr.resetTransform(),cr.globalCompositeOperation=Nm,cr.globalAlpha=yt;const Ia=E.canvas();Ia&&cr.drawImage(Ia,Ta,Ea,Ko,Xo,St,Ft,Ir,Lr),cr.restore()})}},_clipPath:function(ye){this.H.push(this.C.clip.bind(this.C,ye.T,ye.Va===Be?"evenodd":"nonzero"))},clear:function(){ae.add(this),this.H.push(this.C.clearRect.bind(this.C,0,0,this.Ua.width,this.Ua.height))},flush:function(){},translate:function(ye,Ue){this.transform(1,0,0,1,ye,Ue)}});p.makeRenderer=function(ye){const Ue=new Yo(ye),yt=Ue.C;return new Proxy(Ue,{get(bt,pt){if(typeof bt[pt]=="function")return function(...kt){return bt[pt].apply(bt,kt)};if(typeof yt[pt]=="function"){if(-1<T.indexOf(pt))throw Error("RiveException: Method call to '"+pt+"()' is not allowed, as the renderer cannot immediately pass through the return                 values of any canvas 2d context methods.");return function(...kt){Ue.H.push(yt[pt].bind(yt,...kt))}}return bt[pt]},set(bt,pt,kt){if(pt in yt)return Ue.H.push(()=>{yt[pt]=kt}),!0}})},p.decodeImage=function(ye,Ue){new ze({la:Ue}).decode(ye)},p.renderFactory={makeRenderPaint:function(){return new Ct},makeRenderPath:function(){return new Ie},makeRenderImage:function(){let ye=ao;return new ze({xa:()=>{ye.total++},la:()=>{if(ye.loaded++,ye.loaded===ye.total){const Ue=ye.ready;Ue&&(Ue(),ye.ready=null)}}})}};let At=p.load,ao=null;p.load=function(ye,Ue,yt=!0){const bt=new p.FallbackFileAssetLoader;return Ue!==void 0&&bt.addLoader(Ue),yt&&(Ue=new p.CDNFileAssetLoader,bt.addLoader(Ue)),new Promise(function(pt){let kt=null;ao={total:0,loaded:0,ready:function(){pt(kt)}},kt=At(ye,bt),ao.total==0&&pt(kt)})};let Dm=p.RendererWrapper.prototype.align;p.RendererWrapper.prototype.align=function(ye,Ue,yt,bt,pt=1){Dm.call(this,ye,Ue,yt,bt,pt)},I=new _,p.requestAnimationFrame=I.requestAnimationFrame.bind(I),p.cancelAnimationFrame=I.cancelAnimationFrame.bind(I),p.enableFPSCounter=I.Rb.bind(I),p.disableFPSCounter=I.Ob,I.ob=k,p.resolveAnimationFrame=k,p.cleanup=function(){be&&be.delete()}};var N,J,Q=Object.assign({},p),X="./this.program",K=typeof window=="object",H=typeof importScripts=="function",Y="";(K||H)&&(H?Y=self.location.href:typeof document<"u"&&document.currentScript&&(Y=document.currentScript.src),c&&(Y=c),Y=Y.indexOf("blob:")!==0?Y.substr(0,Y.replace(/[?#].*/,"").lastIndexOf("/")+1):"",H&&(J=g=>{var h=new XMLHttpRequest;return h.open("GET",g,!1),h.responseType="arraybuffer",h.send(null),new Uint8Array(h.response)}),N=(g,h,k)=>{var I=new XMLHttpRequest;I.open("GET",g,!0),I.responseType="arraybuffer",I.onload=()=>{I.status==200||I.status==0&&I.response?h(I.response):k()},I.onerror=k,I.send(null)});var V,Z=p.print||console.log.bind(console),re=p.printErr||console.error.bind(console);Object.assign(p,Q),Q=null,p.thisProgram&&(X=p.thisProgram),p.wasmBinary&&(V=p.wasmBinary),p.noExitRuntime,typeof WebAssembly!="object"&&st("no native wasm support detected");var le,oe,he,ie,xe,tt,Ae,He,Dt,It,un=!1;function z(){var g=le.buffer;p.HEAP8=he=new Int8Array(g),p.HEAP16=xe=new Int16Array(g),p.HEAP32=Ae=new Int32Array(g),p.HEAPU8=ie=new Uint8Array(g),p.HEAPU16=tt=new Uint16Array(g),p.HEAPU32=He=new Uint32Array(g),p.HEAPF32=Dt=new Float32Array(g),p.HEAPF64=It=new Float64Array(g)}var S,O=[],ee=[],se=[];function ve(){var g=p.preRun.shift();O.unshift(g)}var Ce,Oe=0,qe=null;function st(g){throw p.onAbort&&p.onAbort(g),re(g="Aborted("+g+")"),un=!0,g=new WebAssembly.RuntimeError(g+". Build with -sASSERTIONS for more info."),m(g),g}function Ve(g){return g.startsWith("data:application/octet-stream;base64,")}if(!Ve(Ce="canvas_advanced.wasm")){var zt=Ce;Ce=p.locateFile?p.locateFile(zt,Y):Y+zt}function Qe(g){if(g==Ce&&V)return new Uint8Array(V);if(J)return J(g);throw"both async and sync fetching of the wasm failed"}function Lt(g,h,k){return function(I){if(!V&&(K||H)){if(typeof fetch=="function"&&!I.startsWith("file://"))return fetch(I,{credentials:"same-origin"}).then(D=>{if(!D.ok)throw"failed to load wasm binary file at '"+I+"'";return D.arrayBuffer()}).catch(()=>Qe(I));if(N)return new Promise((D,U)=>{N(I,W=>D(new Uint8Array(W)),U)})}return Promise.resolve().then(()=>Qe(I))}(g).then(I=>WebAssembly.instantiate(I,h)).then(I=>I).then(k,I=>{re("failed to asynchronously prepare wasm: "+I),st(I)})}var Ot,Pt,Cn={448252:(g,h,k,I,D)=>{if(typeof window>"u"||(window.AudioContext||window.webkitAudioContext)===void 0)return 0;if(window.h===void 0){window.h={Aa:0},window.h.I={},window.h.I.ya=g,window.h.I.capture=h,window.h.I.La=k,window.h.ga={},window.h.ga.stopped=I,window.h.ga.xb=D;let U=window.h;U.D=[],U.yc=function(W){for(var te=0;te<U.D.length;++te)if(U.D[te]==null)return U.D[te]=W,te;return U.D.push(W),U.D.length-1},U.Cb=function(W){for(U.D[W]=null;0<U.D.length&&U.D[U.D.length-1]==null;)U.D.pop()},U.Sc=function(W){for(var te=0;te<U.D.length;++te)if(U.D[te]==W)return U.Cb(te)},U.ra=function(W){return U.D[W]},U.Bb=["touchend","click"],U.unlock=function(){for(var W=0;W<U.D.length;++W){var te=U.D[W];te!=null&&te.J!=null&&te.state===U.ga.xb&&te.J.resume().then(()=>{ba(te.pb)},fe=>{console.error("Failed to resume audiocontext",fe)})}U.Bb.map(function(fe){document.removeEventListener(fe,U.unlock,!0)})},U.Bb.map(function(W){document.addEventListener(W,U.unlock,!0)})}return window.h.Aa+=1,1},450430:()=>{window.h!==void 0&&(--window.h.Aa,window.h.Aa===0&&delete window.h)},450594:()=>navigator.mediaDevices!==void 0&&navigator.mediaDevices.getUserMedia!==void 0,450698:()=>{try{var g=new(window.AudioContext||window.webkitAudioContext),h=g.sampleRate;return g.close(),h}catch{return 0}},450869:(g,h,k,I,D,U)=>{if(window.h===void 0)return-1;var W={},te={};return g==window.h.I.ya&&k!=0&&(te.sampleRate=k),W.J=new(window.AudioContext||window.webkitAudioContext)(te),W.J.suspend(),W.state=window.h.ga.stopped,k=0,g!=window.h.I.ya&&(k=h),W.Z=W.J.createScriptProcessor(I,k,h),W.Z.onaudioprocess=function(fe){if(W.sa!=null&&W.sa.length!=0||(W.sa=new Float32Array(Dt.buffer,D,I*h)),g==window.h.I.capture||g==window.h.I.La){for(var ne=0;ne<h;ne+=1)for(var Re=fe.inputBuffer.getChannelData(ne),Pe=W.sa,Be=0;Be<I;Be+=1)Pe[Be*h+ne]=Re[Be];xa(U,I,D)}if(g==window.h.I.ya||g==window.h.I.La)for(_a(U,I,D),ne=0;ne<fe.outputBuffer.numberOfChannels;++ne)for(Re=fe.outputBuffer.getChannelData(ne),Pe=W.sa,Be=0;Be<I;Be+=1)Re[Be]=Pe[Be*h+ne];else for(ne=0;ne<fe.outputBuffer.numberOfChannels;++ne)fe.outputBuffer.getChannelData(ne).fill(0)},g!=window.h.I.capture&&g!=window.h.I.La||navigator.mediaDevices.getUserMedia({audio:!0,video:!1}).then(function(fe){W.Da=W.J.createMediaStreamSource(fe),W.Da.connect(W.Z),W.Z.connect(W.J.destination)}).catch(function(fe){console.log("Failed to get user media: "+fe)}),g==window.h.I.ya&&W.Z.connect(W.J.destination),W.pb=U,window.h.yc(W)},453746:g=>window.h.ra(g).J.sampleRate,453819:g=>{(g=window.h.ra(g)).Z!==void 0&&(g.Z.onaudioprocess=function(){},g.Z.disconnect(),g.Z=void 0),g.Da!==void 0&&(g.Da.disconnect(),g.Da=void 0),g.J.close(),g.J=void 0,g.pb=void 0},454219:g=>{window.h.Cb(g)},454269:g=>{(g=window.h.ra(g)).J.resume(),g.state=window.h.ga.xb},454408:g=>{(g=window.h.ra(g)).J.suspend(),g.state=window.h.ga.stopped}},An=g=>{for(;0<g.length;)g.shift()(p)},Bt=(g,h)=>{for(var k=0,I=g.length-1;0<=I;I--){var D=g[I];D==="."?g.splice(I,1):D===".."?(g.splice(I,1),k++):k&&(g.splice(I,1),k--)}if(h)for(;k;k--)g.unshift("..");return g},$n=g=>{var h=g.charAt(0)==="/",k=g.substr(-1)==="/";return(g=Bt(g.split("/").filter(I=>!!I),!h).join("/"))||h||(g="."),g&&k&&(g+="/"),(h?"/":"")+g},Gt=g=>{var h=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/.exec(g).slice(1);return g=h[0],h=h[1],g||h?(h&&(h=h.substr(0,h.length-1)),g+h):"."},gn=g=>{if(g==="/")return"/";var h=(g=(g=$n(g)).replace(/\/$/,"")).lastIndexOf("/");return h===-1?g:g.substr(h+1)},Fn=g=>(Fn=(()=>{if(typeof crypto=="object"&&typeof crypto.getRandomValues=="function")return h=>crypto.getRandomValues(h);st("initRandomDevice")})())(g);function sn(){for(var g="",h=!1,k=arguments.length-1;-1<=k&&!h;k--){if(typeof(h=0<=k?arguments[k]:"/")!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!h)return"";g=h+"/"+g,h=h.charAt(0)==="/"}return(h?"/":"")+(g=Bt(g.split("/").filter(I=>!!I),!h).join("/"))||"."}var Yt=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,Xt=(g,h,k)=>{var I=h+k;for(k=h;g[k]&&!(k>=I);)++k;if(16<k-h&&g.buffer&&Yt)return Yt.decode(g.subarray(h,k));for(I="";h<k;){var D=g[h++];if(128&D){var U=63&g[h++];if((224&D)==192)I+=String.fromCharCode((31&D)<<6|U);else{var W=63&g[h++];65536>(D=(240&D)==224?(15&D)<<12|U<<6|W:(7&D)<<18|U<<12|W<<6|63&g[h++])?I+=String.fromCharCode(D):(D-=65536,I+=String.fromCharCode(55296|D>>10,56320|1023&D))}}else I+=String.fromCharCode(D)}return I},Qn=[],We=g=>{for(var h=0,k=0;k<g.length;++k){var I=g.charCodeAt(k);127>=I?h++:2047>=I?h+=2:55296<=I&&57343>=I?(h+=4,++k):h+=3}return h},On=(g,h,k,I)=>{if(!(0<I))return 0;var D=k;I=k+I-1;for(var U=0;U<g.length;++U){var W=g.charCodeAt(U);if(55296<=W&&57343>=W&&(W=65536+((1023&W)<<10)|1023&g.charCodeAt(++U)),127>=W){if(k>=I)break;h[k++]=W}else{if(2047>=W){if(k+1>=I)break;h[k++]=192|W>>6}else{if(65535>=W){if(k+2>=I)break;h[k++]=224|W>>12}else{if(k+3>=I)break;h[k++]=240|W>>18,h[k++]=128|W>>12&63}h[k++]=128|W>>6&63}h[k++]=128|63&W}}return h[k]=0,k-D};function zn(g,h){var k=Array(We(g)+1);return g=On(g,k,0,k.length),h&&(k.length=g),k}var Bn=[];function Vn(g,h){Bn[g]={input:[],F:[],V:h},jo(g,yn)}var yn={open:function(g){var h=Bn[g.node.za];if(!h)throw new Ee(43);g.s=h,g.seekable=!1},close:function(g){g.s.V.qa(g.s)},qa:function(g){g.s.V.qa(g.s)},read:function(g,h,k,I){if(!g.s||!g.s.V.ib)throw new Ee(60);for(var D=0,U=0;U<I;U++){try{var W=g.s.V.ib(g.s)}catch{throw new Ee(29)}if(W===void 0&&D===0)throw new Ee(6);if(W==null)break;D++,h[k+U]=W}return D&&(g.node.timestamp=Date.now()),D},write:function(g,h,k,I){if(!g.s||!g.s.V.Oa)throw new Ee(60);try{for(var D=0;D<I;D++)g.s.V.Oa(g.s,h[k+D])}catch{throw new Ee(29)}return I&&(g.node.timestamp=Date.now()),D}},qt={ib:function(){e:{if(!Qn.length){var g=null;if(typeof window<"u"&&typeof window.prompt=="function"?(g=window.prompt("Input: "))!==null&&(g+=`
`):typeof readline=="function"&&(g=readline())!==null&&(g+=`
`),!g){g=null;break e}Qn=zn(g,!0)}g=Qn.shift()}return g},Oa:function(g,h){h===null||h===10?(Z(Xt(g.F,0)),g.F=[]):h!=0&&g.F.push(h)},qa:function(g){g.F&&0<g.F.length&&(Z(Xt(g.F,0)),g.F=[])},bc:function(){return{Fc:25856,Hc:5,Ec:191,Gc:35387,Dc:[3,28,127,21,4,0,1,0,17,19,26,0,18,15,23,22,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}},cc:function(){return 0},dc:function(){return[24,80]}},En={Oa:function(g,h){h===null||h===10?(re(Xt(g.F,0)),g.F=[]):h!=0&&g.F.push(h)},qa:function(g){g.F&&0<g.F.length&&(re(Xt(g.F,0)),g.F=[])}};function vt(g,h){var k=g.j?g.j.length:0;k>=h||(h=Math.max(h,k*(1048576>k?2:1.125)>>>0),k!=0&&(h=Math.max(h,256)),k=g.j,g.j=new Uint8Array(h),0<g.v&&g.j.set(k.subarray(0,g.v),0))}var fn,Un,Vt,Ut,pe={O:null,U:()=>pe.createNode(null,"/",16895,0),createNode(g,h,k,I){if((61440&k)==24576||(61440&k)==4096)throw new Ee(63);return pe.O||(pe.O={dir:{node:{Y:pe.l.Y,P:pe.l.P,ka:pe.l.ka,va:pe.l.va,ub:pe.l.ub,Ab:pe.l.Ab,vb:pe.l.vb,sb:pe.l.sb,Ea:pe.l.Ea},stream:{ba:pe.m.ba}},file:{node:{Y:pe.l.Y,P:pe.l.P},stream:{ba:pe.m.ba,read:pe.m.read,write:pe.m.write,pa:pe.m.pa,lb:pe.m.lb,nb:pe.m.nb}},link:{node:{Y:pe.l.Y,P:pe.l.P,ma:pe.l.ma},stream:{}},$a:{node:{Y:pe.l.Y,P:pe.l.P},stream:_r}}),(61440&(k=ge(g,h,k,I)).mode)==16384?(k.l=pe.O.dir.node,k.m=pe.O.dir.stream,k.j={}):(61440&k.mode)==32768?(k.l=pe.O.file.node,k.m=pe.O.file.stream,k.v=0,k.j=null):(61440&k.mode)==40960?(k.l=pe.O.link.node,k.m=pe.O.link.stream):(61440&k.mode)==8192&&(k.l=pe.O.$a.node,k.m=pe.O.$a.stream),k.timestamp=Date.now(),g&&(g.j[h]=k,g.timestamp=k.timestamp),k},Kc:g=>g.j?g.j.subarray?g.j.subarray(0,g.v):new Uint8Array(g.j):new Uint8Array(0),l:{Y(g){var h={};return h.Jc=(61440&g.mode)==8192?g.id:1,h.Mc=g.id,h.mode=g.mode,h.Oc=1,h.uid=0,h.Lc=0,h.za=g.za,(61440&g.mode)==16384?h.size=4096:(61440&g.mode)==32768?h.size=g.v:(61440&g.mode)==40960?h.size=g.link.length:h.size=0,h.Bc=new Date(g.timestamp),h.Nc=new Date(g.timestamp),h.Ic=new Date(g.timestamp),h.Jb=4096,h.Cc=Math.ceil(h.size/h.Jb),h},P(g,h){if(h.mode!==void 0&&(g.mode=h.mode),h.timestamp!==void 0&&(g.timestamp=h.timestamp),h.size!==void 0&&(h=h.size,g.v!=h))if(h==0)g.j=null,g.v=0;else{var k=g.j;g.j=new Uint8Array(h),k&&g.j.set(k.subarray(0,Math.min(h,g.v))),g.v=h}},ka(){throw Gn[44]},va:(g,h,k,I)=>pe.createNode(g,h,k,I),ub(g,h,k){if((61440&g.mode)==16384){try{var I=Ho(h,k)}catch{}if(I)for(var D in I.j)throw new Ee(55)}delete g.parent.j[g.name],g.parent.timestamp=Date.now(),g.name=k,h.j[k]=g,h.timestamp=g.parent.timestamp,g.parent=h},Ab(g,h){delete g.j[h],g.timestamp=Date.now()},vb(g,h){var k,I=Ho(g,h);for(k in I.j)throw new Ee(55);delete g.j[h],g.timestamp=Date.now()},sb(g){var h,k=[".",".."];for(h in g.j)g.j.hasOwnProperty(h)&&k.push(h);return k},Ea:(g,h,k)=>((g=pe.createNode(g,h,41471,0)).link=k,g),ma(g){if((61440&g.mode)!=40960)throw new Ee(28);return g.link}},m:{read(g,h,k,I,D){var U=g.node.j;if(D>=g.node.v)return 0;if(8<(g=Math.min(g.node.v-D,I))&&U.subarray)h.set(U.subarray(D,D+g),k);else for(I=0;I<g;I++)h[k+I]=U[D+I];return g},write(g,h,k,I,D,U){if(h.buffer===he.buffer&&(U=!1),!I)return 0;if((g=g.node).timestamp=Date.now(),h.subarray&&(!g.j||g.j.subarray)){if(U)return g.j=h.subarray(k,k+I),g.v=I;if(g.v===0&&D===0)return g.j=h.slice(k,k+I),g.v=I;if(D+I<=g.v)return g.j.set(h.subarray(k,k+I),D),I}if(vt(g,D+I),g.j.subarray&&h.subarray)g.j.set(h.subarray(k,k+I),D);else for(U=0;U<I;U++)g.j[D+U]=h[k+U];return g.v=Math.max(g.v,D+I),I},ba(g,h,k){if(k===1?h+=g.position:k===2&&(61440&g.node.mode)==32768&&(h+=g.node.v),0>h)throw new Ee(28);return h},pa(g,h,k){vt(g.node,h+k),g.node.v=Math.max(g.node.v,h+k)},lb(g,h,k,I,D){if((61440&g.node.mode)!=32768)throw new Ee(43);if(g=g.node.j,2&D||g.buffer!==he.buffer){if((0<k||k+h<g.length)&&(g=g.subarray?g.subarray(k,k+h):Array.prototype.slice.call(g,k,k+h)),k=!0,st(),!(h=void 0))throw new Ee(48);he.set(g,h)}else k=!1,h=g.byteOffset;return{o:h,M:k}},nb:(g,h,k,I)=>(pe.m.write(g,h,0,I,k,!1),0)}},Fe=null,_t={},$t=[],nt=1,ct=null,dn=!0,Ee=null,Gn={},In=(g,h={})=>{if(!(g=sn(g)))return{path:"",node:null};if(8<(h=Object.assign({gb:!0,Qa:0},h)).Qa)throw new Ee(32);g=g.split("/").filter(W=>!!W);for(var k=Fe,I="/",D=0;D<g.length;D++){var U=D===g.length-1;if(U&&h.parent)break;if(k=Ho(k,g[D]),I=$n(I+"/"+g[D]),k.wa&&(!U||U&&h.gb)&&(k=k.wa.root),!U||h.fb){for(U=0;(61440&k.mode)==40960;)if(k=ir(I),I=sn(Gt(I),k),k=In(I,{Qa:h.Qa+1}).node,40<U++)throw new Ee(32)}}return{path:I,node:k}},Eo=g=>{for(var h;;){if(g===g.parent)return g=g.U.mb,h?g[g.length-1]!=="/"?`${g}/${h}`:g+h:g;h=h?`${g.name}/${h}`:g.name,g=g.parent}},Io=(g,h)=>{for(var k=0,I=0;I<h.length;I++)k=(k<<5)-k+h.charCodeAt(I)|0;return(g+k>>>0)%ct.length},Ho=(g,h)=>{var k;if(k=(k=De(g,"x"))?k:g.l.ka?0:2)throw new Ee(k,g);for(k=ct[Io(g.id,h)];k;k=k.lc){var I=k.name;if(k.parent.id===g.id&&I===h)return k}return g.l.ka(g,h)},ge=(g,h,k,I)=>(g=new va(g,h,k,I),h=Io(g.parent.id,g.name),g.lc=ct[h],ct[h]=g),wt=g=>{var h=["r","w","rw"][3&g];return 512&g&&(h+="w"),h},De=(g,h)=>dn?0:!h.includes("r")||292&g.mode?h.includes("w")&&!(146&g.mode)||h.includes("x")&&!(73&g.mode)?2:0:2,Ht=(g,h)=>{try{return Ho(g,h),20}catch{}return De(g,"wx")},Mn=g=>{if(!(g=$t[g]))throw new Ee(8);return g},Lo=(g,h=-1)=>(Vt||((Vt=function(){this.h={}}).prototype={},Object.defineProperties(Vt.prototype,{object:{get(){return this.node},set(k){this.node=k}},flags:{get(){return this.h.flags},set(k){this.h.flags=k}},position:{get(){return this.h.position},set(k){this.h.position=k}}})),g=Object.assign(new Vt,g),h==-1&&(h=(()=>{for(var k=0;4096>=k;k++)if(!$t[k])return k;throw new Ee(33)})()),g.X=h,$t[h]=g),_r={open:g=>{g.m=_t[g.node.za].m,g.m.open&&g.m.open(g)},ba:()=>{throw new Ee(70)}},jo=(g,h)=>{_t[g]={m:h}},qo=(g,h)=>{var k=h==="/",I=!h;if(k&&Fe)throw new Ee(10);if(!k&&!I){var D=In(h,{gb:!1});if(h=D.path,(D=D.node).wa)throw new Ee(10);if((61440&D.mode)!=16384)throw new Ee(54)}h={type:g,Qc:{},mb:h,kc:[]},(g=g.U(h)).U=h,h.root=g,k?Fe=g:D&&(D.wa=h,D.U&&D.U.kc.push(h))},bn=(g,h,k)=>{var I=In(g,{parent:!0}).node;if(!(g=gn(g))||g==="."||g==="..")throw new Ee(28);var D=Ht(I,g);if(D)throw new Ee(D);if(!I.l.va)throw new Ee(63);return I.l.va(I,g,h,k)},Wo=(g,h,k)=>{k===void 0&&(k=h,h=438),bn(g,8192|h,k)},Ln=(g,h)=>{if(!sn(g))throw new Ee(44);var k=In(h,{parent:!0}).node;if(!k)throw new Ee(44);h=gn(h);var I=Ht(k,h);if(I)throw new Ee(I);if(!k.l.Ea)throw new Ee(63);k.l.Ea(k,h,g)},ir=g=>{if(!(g=In(g).node))throw new Ee(44);if(!g.l.ma)throw new Ee(28);return sn(Eo(g.parent),g.l.ma(g))},no=(g,h,k)=>{if(g==="")throw new Ee(44);if(typeof h=="string"){var I={r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090}[h];if(I===void 0)throw Error(`Unknown file open mode: ${h}`);h=I}if(k=64&h?4095&(k===void 0?438:k)|32768:0,typeof g=="object")var D=g;else{g=$n(g);try{D=In(g,{fb:!(131072&h)}).node}catch{}}if(I=!1,64&h)if(D){if(128&h)throw new Ee(20)}else D=bn(g,k,0),I=!0;if(!D)throw new Ee(44);if((61440&D.mode)==8192&&(h&=-513),65536&h&&(61440&D.mode)!=16384)throw new Ee(54);if(!I&&(k=D?(61440&D.mode)==40960?32:(61440&D.mode)==16384&&(wt(h)!=="r"||512&h)?31:De(D,wt(h)):44))throw new Ee(k);if(512&h&&!I){if(!(k=typeof(k=D)=="string"?In(k,{fb:!0}).node:k).l.P)throw new Ee(63);if((61440&k.mode)==16384)throw new Ee(31);if((61440&k.mode)!=32768)throw new Ee(28);if(I=De(k,"w"))throw new Ee(I);k.l.P(k,{size:0,timestamp:Date.now()})}return h&=-131713,(D=Lo({node:D,path:Eo(D),flags:h,seekable:!0,position:0,m:D.m,zc:[],error:!1})).m.open&&D.m.open(D),!p.logReadFiles||1&h||(Ut||(Ut={}),g in Ut||(Ut[g]=1)),D},Zr=(g,h,k)=>{if(g.X===null)throw new Ee(8);if(!g.seekable||!g.m.ba)throw new Ee(70);if(k!=0&&k!=1&&k!=2)throw new Ee(28);g.position=g.m.ba(g,h,k),g.zc=[]},Js=()=>{Ee||((Ee=function(g,h){this.name="ErrnoError",this.node=h,this.pc=function(k){this.aa=k},this.pc(g),this.message="FS error"}).prototype=Error(),Ee.prototype.constructor=Ee,[44].forEach(g=>{Gn[g]=new Ee(g),Gn[g].stack="<generic error, no stack>"}))},Cr=(g,h,k)=>{g=$n("/dev/"+g);var I=function(U,W){var te=0;return U&&(te|=365),W&&(te|=146),te}(!!h,!!k);Un||(Un=64);var D=Un++<<8;jo(D,{open:U=>{U.seekable=!1},close:()=>{k&&k.buffer&&k.buffer.length&&k(10)},read:(U,W,te,fe)=>{for(var ne=0,Re=0;Re<fe;Re++){try{var Pe=h()}catch{throw new Ee(29)}if(Pe===void 0&&ne===0)throw new Ee(6);if(Pe==null)break;ne++,W[te+Re]=Pe}return ne&&(U.node.timestamp=Date.now()),ne},write:(U,W,te,fe)=>{for(var ne=0;ne<fe;ne++)try{k(W[te+ne])}catch{throw new Ee(29)}return fe&&(U.node.timestamp=Date.now()),ne}}),Wo(g,I,D)},Vo={},Jr=void 0;function vo(){return Ae[(Jr+=4)-4>>2]}function Qs(g){if(g===void 0)return"_unknown";var h=(g=g.replace(/[^a-zA-Z0-9_]/g,"$")).charCodeAt(0);return 48<=h&&57>=h?`_${g}`:g}function Qr(g,h){return g=Qs(g),{[g]:function(){return h.apply(this,arguments)}}[g]}function ea(){this.M=[void 0],this.hb=[]}var eo=new ea,sr=void 0;function gt(g){throw new sr(g)}var oo=g=>(g||gt("Cannot use deleted val. handle = "+g),eo.get(g).value),io=g=>{switch(g){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:return eo.pa({tb:1,value:g})}};function ta(g){var h=Error,k=Qr(g,function(I){this.name=g,this.message=I,(I=Error(I).stack)!==void 0&&(this.stack=this.toString()+`
`+I.replace(/^Error(:[^\n]*)?\n/,""))});return k.prototype=Object.create(h.prototype),k.prototype.constructor=k,k.prototype.toString=function(){return this.message===void 0?this.name:`${this.name}: ${this.message}`},k}var na=void 0,oa=void 0;function an(g){for(var h="";ie[g];)h+=oa[ie[g++]];return h}var Ar=[];function Ki(){for(;Ar.length;){var g=Ar.pop();g.g.fa=!1,g.delete()}}var Mr=void 0,wo={};function Xi(g,h){for(h===void 0&&gt("ptr should not be undefined");g.A;)h=g.na(h),g=g.A;return h}var Go={};function ra(g){var h=an(g=Aa(g));return xo(g),h}function kr(g,h){var k=Go[g];return k===void 0&&gt(h+" has unknown type "+ra(g)),k}function ei(){}var Zi=!1;function ia(g){--g.count.value,g.count.value===0&&(g.G?g.L.W(g.G):g.u.i.W(g.o))}function sa(g,h,k){return h===k?g:k.A===void 0||(g=sa(g,h,k.A))===null?null:k.Pb(g)}var aa={},ca=void 0;function ti(g){throw new ca(g)}function ni(g,h){return h.u&&h.o||ti("makeClassHandle requires ptr and ptrType"),!!h.L!=!!h.G&&ti("Both smartPtrType and smartPtr must be specified"),h.count={value:1},Sr(Object.create(g,{g:{value:h}}))}function Sr(g){return typeof FinalizationRegistry>"u"?(Sr=h=>h,g):(Zi=new FinalizationRegistry(h=>{ia(h.g)}),ei=h=>{Zi.unregister(h)},(Sr=h=>{var k=h.g;return k.G&&Zi.register(h,{g:k},h),h})(g))}var oi={};function Tr(g){for(;g.length;){var h=g.pop();g.pop()(h)}}function Er(g){return this.fromWireType(Ae[g>>2])}var ar={},ri={};function Yn(g,h,k){function I(te){(te=k(te)).length!==g.length&&ti("Mismatched type converter count");for(var fe=0;fe<g.length;++fe)so(g[fe],te[fe])}g.forEach(function(te){ri[te]=h});var D=Array(h.length),U=[],W=0;h.forEach((te,fe)=>{Go.hasOwnProperty(te)?D[fe]=Go[te]:(U.push(te),ar.hasOwnProperty(te)||(ar[te]=[]),ar[te].push(()=>{D[fe]=Go[te],++W===U.length&&I(D)}))}),U.length===0&&I(D)}function ii(g){switch(g){case 1:return 0;case 2:return 1;case 4:return 2;case 8:return 3;default:throw new TypeError(`Unknown type size: ${g}`)}}function so(g,h,k={}){if(!("argPackAdvance"in h))throw new TypeError("registerType registeredInstance requires argPackAdvance");(function(I,D,U={}){var W=D.name;if(I||gt(`type "${W}" must have a positive integer typeid pointer`),Go.hasOwnProperty(I)){if(U.$b)return;gt(`Cannot register type '${W}' twice`)}Go[I]=D,delete ri[I],ar.hasOwnProperty(I)&&(D=ar[I],delete ar[I],D.forEach(te=>te()))})(g,h,k)}function Ji(g){gt(g.g.u.i.name+" instance already deleted")}function Ro(){}function Qi(g,h,k){if(g[h].B===void 0){var I=g[h];g[h]=function(){return g[h].B.hasOwnProperty(arguments.length)||gt(`Function '${k}' called with an invalid number of arguments (${arguments.length}) - expects one of (${g[h].B})!`),g[h].B[arguments.length].apply(this,arguments)},g[h].B=[],g[h].B[I.ea]=I}}function es(g,h,k){p.hasOwnProperty(g)?((k===void 0||p[g].B!==void 0&&p[g].B[k]!==void 0)&&gt(`Cannot register public name '${g}' twice`),Qi(p,g,g),p.hasOwnProperty(k)&&gt(`Cannot register multiple overloads of a function with the same number of arguments (${k})!`),p[g].B[k]=h):(p[g]=h,k!==void 0&&(p[g].Pc=k))}function ym(g,h,k,I,D,U,W,te){this.name=g,this.constructor=h,this.N=k,this.W=I,this.A=D,this.Ub=U,this.na=W,this.Pb=te,this.qb=[]}function si(g,h,k){for(;h!==k;)h.na||gt(`Expected null or instance of ${k.name}, got an instance of ${h.name}`),g=h.na(g),h=h.A;return g}function bm(g,h){return h===null?(this.Na&&gt(`null is not a valid ${this.name}`),0):(h.g||gt(`Cannot pass "${ns(h)}" as a ${this.name}`),h.g.o||gt(`Cannot pass deleted object as a pointer of type ${this.name}`),si(h.g.o,h.g.u.i,this.i))}function xm(g,h){if(h===null){if(this.Na&&gt(`null is not a valid ${this.name}`),this.ua){var k=this.Pa();return g!==null&&g.push(this.W,k),k}return 0}if(h.g||gt(`Cannot pass "${ns(h)}" as a ${this.name}`),h.g.o||gt(`Cannot pass deleted object as a pointer of type ${this.name}`),!this.ta&&h.g.u.ta&&gt(`Cannot convert argument of type ${h.g.L?h.g.L.name:h.g.u.name} to parameter type ${this.name}`),k=si(h.g.o,h.g.u.i,this.i),this.ua)switch(h.g.G===void 0&&gt("Passing raw pointer to smart pointer is illegal"),this.tc){case 0:h.g.L===this?k=h.g.G:gt(`Cannot convert argument of type ${h.g.L?h.g.L.name:h.g.u.name} to parameter type ${this.name}`);break;case 1:k=h.g.G;break;case 2:if(h.g.L===this)k=h.g.G;else{var I=h.clone();k=this.oc(k,io(function(){I.delete()})),g!==null&&g.push(this.W,k)}break;default:gt("Unsupporting sharing policy")}return k}function _m(g,h){return h===null?(this.Na&&gt(`null is not a valid ${this.name}`),0):(h.g||gt(`Cannot pass "${ns(h)}" as a ${this.name}`),h.g.o||gt(`Cannot pass deleted object as a pointer of type ${this.name}`),h.g.u.ta&&gt(`Cannot convert argument of type ${h.g.u.name} to parameter type ${this.name}`),si(h.g.o,h.g.u.i,this.i))}function yo(g,h,k,I){this.name=g,this.i=h,this.Na=k,this.ta=I,this.ua=!1,this.W=this.oc=this.Pa=this.rb=this.tc=this.nc=void 0,h.A!==void 0?this.toWireType=xm:(this.toWireType=I?bm:_m,this.K=null)}function la(g,h,k){p.hasOwnProperty(g)||ti("Replacing nonexistant public symbol"),p[g].B!==void 0&&k!==void 0?p[g].B[k]=h:(p[g]=h,p[g].ea=k)}var ai=[],ua=g=>{var h=ai[g];return h||(g>=ai.length&&(ai.length=g+1),ai[g]=h=S.get(g)),h};function Rn(g,h){var k=(g=an(g)).includes("j")?((I,D)=>{var U=[];return function(){if(U.length=0,Object.assign(U,arguments),I.includes("j")){var W=p["dynCall_"+I];W=U&&U.length?W.apply(null,[D].concat(U)):W.call(null,D)}else W=ua(D).apply(null,U);return W}})(g,h):ua(h);return typeof k!="function"&&gt(`unknown function pointer with signature ${g}: ${h}`),k}var da=void 0;function bo(g,h){var k=[],I={};throw h.forEach(function D(U){I[U]||Go[U]||(ri[U]?ri[U].forEach(D):(k.push(U),I[U]=!0))}),new da(`${g}: `+k.map(ra).join([", "]))}function ci(g,h,k,I,D){var U=h.length;2>U&&gt("argTypes array size mismatch! Must at least get return value and 'this' types!");var W=h[1]!==null&&k!==null,te=!1;for(k=1;k<h.length;++k)if(h[k]!==null&&h[k].K===void 0){te=!0;break}var fe=h[0].name!=="void",ne=U-2,Re=Array(ne),Pe=[],Be=[];return function(){if(arguments.length!==ne&&gt(`function ${g} called with ${arguments.length} arguments, expected ${ne} args!`),Be.length=0,Pe.length=W?2:1,Pe[0]=D,W){var je=h[1].toWireType(Be,this);Pe[1]=je}for(var ze=0;ze<ne;++ze)Re[ze]=h[ze+2].toWireType(Be,arguments[ze]),Pe.push(Re[ze]);if(ze=I.apply(null,Pe),te)Tr(Be);else for(var Ie=W?1:2;Ie<h.length;Ie++){var Ct=Ie===1?je:Re[Ie-2];h[Ie].K!==null&&h[Ie].K(Ct)}return je=fe?h[0].fromWireType(ze):void 0}}function li(g,h){for(var k=[],I=0;I<g;I++)k.push(He[h+4*I>>2]);return k}function $a(g,h,k){return g instanceof Object||gt(`${k} with invalid "this": ${g}`),g instanceof h.i.constructor||gt(`${k} incompatible with "this" of type ${g.constructor.name}`),g.g.o||gt(`cannot call emscripten binding method ${k} on deleted object`),si(g.g.o,g.g.u.i,h.i)}function ts(g){g>=eo.h&&--eo.get(g).tb==0&&eo.Zb(g)}function Cm(g,h,k){switch(h){case 0:return function(I){return this.fromWireType((k?he:ie)[I])};case 1:return function(I){return this.fromWireType((k?xe:tt)[I>>1])};case 2:return function(I){return this.fromWireType((k?Ae:He)[I>>2])};default:throw new TypeError("Unknown integer type: "+g)}}function ns(g){if(g===null)return"null";var h=typeof g;return h==="object"||h==="array"||h==="function"?g.toString():""+g}function Am(g,h){switch(h){case 2:return function(k){return this.fromWireType(Dt[k>>2])};case 3:return function(k){return this.fromWireType(It[k>>3])};default:throw new TypeError("Unknown float type: "+g)}}function Mm(g,h,k){switch(h){case 0:return k?function(I){return he[I]}:function(I){return ie[I]};case 1:return k?function(I){return xe[I>>1]}:function(I){return tt[I>>1]};case 2:return k?function(I){return Ae[I>>2]}:function(I){return He[I>>2]};default:throw new TypeError("Unknown integer type: "+g)}}var fa=typeof TextDecoder<"u"?new TextDecoder("utf-16le"):void 0,km=(g,h)=>{for(var k=g>>1,I=k+h/2;!(k>=I)&&tt[k];)++k;if(32<(k<<=1)-g&&fa)return fa.decode(ie.subarray(g,k));for(k="",I=0;!(I>=h/2);++I){var D=xe[g+2*I>>1];if(D==0)break;k+=String.fromCharCode(D)}return k},Sm=(g,h,k)=>{if(k===void 0&&(k=2147483647),2>k)return 0;var I=h;k=(k-=2)<2*g.length?k/2:g.length;for(var D=0;D<k;++D)xe[h>>1]=g.charCodeAt(D),h+=2;return xe[h>>1]=0,h-I},Tm=g=>2*g.length,Em=(g,h)=>{for(var k=0,I="";!(k>=h/4);){var D=Ae[g+4*k>>2];if(D==0)break;++k,65536<=D?(D-=65536,I+=String.fromCharCode(55296|D>>10,56320|1023&D)):I+=String.fromCharCode(D)}return I},Im=(g,h,k)=>{if(k===void 0&&(k=2147483647),4>k)return 0;var I=h;k=I+k-4;for(var D=0;D<g.length;++D){var U=g.charCodeAt(D);if(55296<=U&&57343>=U&&(U=65536+((1023&U)<<10)|1023&g.charCodeAt(++D)),Ae[h>>2]=U,(h+=4)+4>k)break}return Ae[h>>2]=0,h-I},Lm=g=>{for(var h=0,k=0;k<g.length;++k){var I=g.charCodeAt(k);55296<=I&&57343>=I&&++k,h+=4}return h},Rm={};function ui(g){var h=Rm[g];return h===void 0?an(g):h}var os,di=[],ma=[],rs=[],is={},pa=()=>{if(!os){var g,h={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:X||"./this.program"};for(g in is)is[g]===void 0?delete h[g]:h[g]=is[g];var k=[];for(g in h)k.push(`${g}=${h[g]}`);os=k}return os},$i=g=>g%4==0&&(g%100!=0||g%400==0),ga=[31,29,31,30,31,30,31,31,30,31,30,31],ha=[31,28,31,30,31,30,31,31,30,31,30,31];function va(g,h,k,I){g||(g=this),this.parent=g,this.U=g.U,this.wa=null,this.id=nt++,this.name=h,this.mode=k,this.l={},this.m={},this.za=I}Object.defineProperties(va.prototype,{read:{get:function(){return!(365&~this.mode)},set:function(g){g?this.mode|=365:this.mode&=-366}},write:{get:function(){return!(146&~this.mode)},set:function(g){g?this.mode|=146:this.mode&=-147}}}),Js(),ct=Array(4096),qo(pe,"/"),bn("/tmp",16895,0),bn("/home",16895,0),bn("/home/web_user",16895,0),(()=>{bn("/dev",16895,0),jo(259,{read:()=>0,write:(I,D,U,W)=>W}),Wo("/dev/null",259),Vn(1280,qt),Vn(1536,En),Wo("/dev/tty",1280),Wo("/dev/tty1",1536);var g=new Uint8Array(1024),h=0,k=()=>(h===0&&(h=Fn(g).byteLength),g[--h]);Cr("random",k),Cr("urandom",k),bn("/dev/shm",16895,0),bn("/dev/shm/tmp",16895,0)})(),(()=>{bn("/proc",16895,0);var g=bn("/proc/self",16895,0);bn("/proc/self/fd",16895,0),qo({U:()=>{var h=ge(g,"fd",16895,73);return h.l={ka:(k,I)=>{var D=Mn(+I);return(k={parent:null,U:{mb:"fake"},l:{ma:()=>D.path}}).parent=k}},h}},"/proc/self/fd")})(),Object.assign(ea.prototype,{get(g){return this.M[g]},has(g){return this.M[g]!==void 0},pa(g){var h=this.hb.pop()||this.M.length;return this.M[h]=g,h},Zb(g){this.M[g]=void 0,this.hb.push(g)}}),sr=p.BindingError=class extends Error{constructor(g){super(g),this.name="BindingError"}},eo.M.push({value:void 0},{value:null},{value:!0},{value:!1}),eo.h=eo.M.length,p.count_emval_handles=function(){for(var g=0,h=eo.h;h<eo.M.length;++h)eo.M[h]!==void 0&&++g;return g},na=p.PureVirtualError=ta("PureVirtualError");for(var wa=Array(256),fi=0;256>fi;++fi)wa[fi]=String.fromCharCode(fi);oa=wa,p.getInheritedInstanceCount=function(){return Object.keys(wo).length},p.getLiveInheritedInstances=function(){var g,h=[];for(g in wo)wo.hasOwnProperty(g)&&h.push(wo[g]);return h},p.flushPendingDeletes=Ki,p.setDelayFunction=function(g){Mr=g,Ar.length&&Mr&&Mr(Ki)},ca=p.InternalError=class extends Error{constructor(g){super(g),this.name="InternalError"}},Ro.prototype.isAliasOf=function(g){if(!(this instanceof Ro&&g instanceof Ro))return!1;var h=this.g.u.i,k=this.g.o,I=g.g.u.i;for(g=g.g.o;h.A;)k=h.na(k),h=h.A;for(;I.A;)g=I.na(g),I=I.A;return h===I&&k===g},Ro.prototype.clone=function(){if(this.g.o||Ji(this),this.g.ia)return this.g.count.value+=1,this;var g=Sr,h=Object,k=h.create,I=Object.getPrototypeOf(this),D=this.g;return(g=g(k.call(h,I,{g:{value:{count:D.count,fa:D.fa,ia:D.ia,o:D.o,u:D.u,G:D.G,L:D.L}}}))).g.count.value+=1,g.g.fa=!1,g},Ro.prototype.delete=function(){this.g.o||Ji(this),this.g.fa&&!this.g.ia&&gt("Object already scheduled for deletion"),ei(this),ia(this.g),this.g.ia||(this.g.G=void 0,this.g.o=void 0)},Ro.prototype.isDeleted=function(){return!this.g.o},Ro.prototype.deleteLater=function(){return this.g.o||Ji(this),this.g.fa&&!this.g.ia&&gt("Object already scheduled for deletion"),Ar.push(this),Ar.length===1&&Mr&&Mr(Ki),this.g.fa=!0,this},yo.prototype.Vb=function(g){return this.rb&&(g=this.rb(g)),g},yo.prototype.ab=function(g){this.W&&this.W(g)},yo.prototype.argPackAdvance=8,yo.prototype.readValueFromPointer=Er,yo.prototype.deleteObject=function(g){g!==null&&g.delete()},yo.prototype.fromWireType=function(g){function h(){return this.ua?ni(this.i.N,{u:this.nc,o:k,L:this,G:g}):ni(this.i.N,{u:this,o:g})}var k=this.Vb(g);if(!k)return this.ab(g),null;var I=function(U,W){return W=Xi(U,W),wo[W]}(this.i,k);if(I!==void 0)return I.g.count.value===0?(I.g.o=k,I.g.G=g,I.clone()):(I=I.clone(),this.ab(g),I);if(I=this.i.Ub(k),!(I=aa[I]))return h.call(this);I=this.ta?I.Kb:I.pointerType;var D=sa(k,this.i,I.i);return D===null?h.call(this):this.ua?ni(I.i.N,{u:I,o:D,L:this,G:g}):ni(I.i.N,{u:I,o:D})},da=p.UnboundTypeError=ta("UnboundTypeError");var ya={__syscall_fcntl64:function(g,h,k){Jr=k;try{var I=Mn(g);switch(h){case 0:var D=vo();return 0>D?-28:Lo(I,D).X;case 1:case 2:case 6:case 7:return 0;case 3:return I.flags;case 4:return D=vo(),I.flags|=D,0;case 5:return D=vo(),xe[D+0>>1]=2,0;case 16:case 8:default:return-28;case 9:return Ae[Ca()>>2]=28,-1}}catch(U){if(Vo===void 0||U.name!=="ErrnoError")throw U;return-U.aa}},__syscall_ioctl:function(g,h,k){Jr=k;try{var I=Mn(g);switch(h){case 21509:case 21510:case 21511:case 21512:case 21524:case 21515:return I.s?0:-59;case 21505:if(!I.s)return-59;if(I.s.V.bc){h=[3,28,127,21,4,0,1,0,17,19,26,0,18,15,23,22,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];var D=vo();Ae[D>>2]=25856,Ae[D+4>>2]=5,Ae[D+8>>2]=191,Ae[D+12>>2]=35387;for(var U=0;32>U;U++)he[D+U+17|0]=h[U]||0}return 0;case 21506:case 21507:case 21508:if(!I.s)return-59;if(I.s.V.cc)for(D=vo(),h=[],U=0;32>U;U++)h.push(he[D+U+17|0]);return 0;case 21519:return I.s?(D=vo(),Ae[D>>2]=0):-59;case 21520:return I.s?-28:-59;case 21531:if(D=vo(),!I.m.ac)throw new Ee(59);return I.m.ac(I,h,D);case 21523:return I.s?(I.s.V.dc&&(U=[24,80],D=vo(),xe[D>>1]=U[0],xe[D+2>>1]=U[1]),0):-59;default:return-28}}catch(W){if(Vo===void 0||W.name!=="ErrnoError")throw W;return-W.aa}},__syscall_openat:function(g,h,k,I){Jr=I;try{var D=h=h?Xt(ie,h):"";if(D.charAt(0)==="/")h=D;else{var U=g===-100?"/":Mn(g).path;if(D.length==0)throw new Ee(44);h=$n(U+"/"+D)}var W=I?vo():0;return no(h,k,W).X}catch(te){if(Vo===void 0||te.name!=="ErrnoError")throw te;return-te.aa}},_embind_create_inheriting_constructor:function(g,h,k){g=an(g),h=kr(h,"wrapper"),k=oo(k);var I=[].slice,D=h.i,U=D.N,W=D.A.N,te=D.A.constructor;for(var fe in g=Qr(g,function(){D.A.qb.forEach((function(ne){if(this[ne]===W[ne])throw new na(`Pure virtual function ${ne} must be implemented in JavaScript`)}).bind(this)),Object.defineProperty(this,"__parent",{value:U}),this.__construct.apply(this,I.call(arguments))}),U.__construct=function(){this===U&&gt("Pass correct 'this' to __construct");var ne=te.implement.apply(void 0,[this].concat(I.call(arguments)));ei(ne);var Re=ne.g;ne.notifyOnDestruction(),Re.ia=!0,Object.defineProperties(this,{g:{value:Re}}),Sr(this),ne=Re.o,ne=Xi(D,ne),wo.hasOwnProperty(ne)?gt(`Tried to register registered instance: ${ne}`):wo[ne]=this},U.__destruct=function(){this===U&&gt("Pass correct 'this' to __destruct"),ei(this);var ne=this.g.o;ne=Xi(D,ne),wo.hasOwnProperty(ne)?delete wo[ne]:gt(`Tried to unregister unregistered instance: ${ne}`)},g.prototype=Object.create(U),k)g.prototype[fe]=k[fe];return io(g)},_embind_finalize_value_object:function(g){var h=oi[g];delete oi[g];var k=h.Pa,I=h.W,D=h.eb;Yn([g],D.map(U=>U.Yb).concat(D.map(U=>U.rc)),U=>{var W={};return D.forEach((te,fe)=>{var ne=U[fe],Re=te.Wb,Pe=te.Xb,Be=U[fe+D.length],je=te.qc,ze=te.sc;W[te.Sb]={read:Ie=>ne.fromWireType(Re(Pe,Ie)),write:(Ie,Ct)=>{var ae=[];je(ze,Ie,Be.toWireType(ae,Ct)),Tr(ae)}}}),[{name:h.name,fromWireType:function(te){var fe,ne={};for(fe in W)ne[fe]=W[fe].read(te);return I(te),ne},toWireType:function(te,fe){for(var ne in W)if(!(ne in fe))throw new TypeError(`Missing field: "${ne}"`);var Re=k();for(ne in W)W[ne].write(Re,fe[ne]);return te!==null&&te.push(I,Re),Re},argPackAdvance:8,readValueFromPointer:Er,K:I}]})},_embind_register_bigint:function(){},_embind_register_bool:function(g,h,k,I,D){var U=ii(k);so(g,{name:h=an(h),fromWireType:function(W){return!!W},toWireType:function(W,te){return te?I:D},argPackAdvance:8,readValueFromPointer:function(W){if(k===1)var te=he;else if(k===2)te=xe;else{if(k!==4)throw new TypeError("Unknown boolean type size: "+h);te=Ae}return this.fromWireType(te[W>>U])},K:null})},_embind_register_class:function(g,h,k,I,D,U,W,te,fe,ne,Re,Pe,Be){Re=an(Re),U=Rn(D,U),te&&(te=Rn(W,te)),ne&&(ne=Rn(fe,ne)),Be=Rn(Pe,Be);var je=Qs(Re);es(je,function(){bo(`Cannot construct ${Re} due to unbound types`,[I])}),Yn([g,h,k],I?[I]:[],function(ze){if(ze=ze[0],I)var Ie=ze.i,Ct=Ie.N;else Ct=Ro.prototype;ze=Qr(je,function(){if(Object.getPrototypeOf(this)!==ae)throw new sr("Use 'new' to construct "+Re);if(be.$===void 0)throw new sr(Re+" has no accessible constructor");var Kt=be.$[arguments.length];if(Kt===void 0)throw new sr(`Tried to invoke ctor of ${Re} with invalid number of parameters (${arguments.length}) - expected (${Object.keys(be.$).toString()}) parameters instead!`);return Kt.apply(this,arguments)});var ae=Object.create(Ct,{constructor:{value:ze}});ze.prototype=ae;var be=new ym(Re,ze,ae,Be,Ie,U,te,ne);be.A&&(be.A.oa===void 0&&(be.A.oa=[]),be.A.oa.push(be)),Ie=new yo(Re,be,!0,!1),Ct=new yo(Re+"*",be,!1,!1);var ft=new yo(Re+" const*",be,!1,!0);return aa[g]={pointerType:Ct,Kb:ft},la(je,ze),[Ie,Ct,ft]})},_embind_register_class_class_function:function(g,h,k,I,D,U,W){var te=li(k,I);h=an(h),U=Rn(D,U),Yn([],[g],function(fe){function ne(){bo(`Cannot call ${Re} due to unbound types`,te)}var Re=`${(fe=fe[0]).name}.${h}`;h.startsWith("@@")&&(h=Symbol[h.substring(2)]);var Pe=fe.i.constructor;return Pe[h]===void 0?(ne.ea=k-1,Pe[h]=ne):(Qi(Pe,h,Re),Pe[h].B[k-1]=ne),Yn([],te,function(Be){if(Be=ci(Re,[Be[0],null].concat(Be.slice(1)),null,U,W),Pe[h].B===void 0?(Be.ea=k-1,Pe[h]=Be):Pe[h].B[k-1]=Be,fe.i.oa)for(const je of fe.i.oa)je.constructor.hasOwnProperty(h)||(je.constructor[h]=Be);return[]}),[]})},_embind_register_class_class_property:function(g,h,k,I,D,U,W,te){h=an(h),U=Rn(D,U),Yn([],[g],function(fe){var ne=`${(fe=fe[0]).name}.${h}`,Re={get(){bo(`Cannot access ${ne} due to unbound types`,[k])},enumerable:!0,configurable:!0};return Re.set=te?()=>{bo(`Cannot access ${ne} due to unbound types`,[k])}:()=>{gt(`${ne} is a read-only property`)},Object.defineProperty(fe.i.constructor,h,Re),Yn([],[k],function(Pe){Pe=Pe[0];var Be={get:()=>Pe.fromWireType(U(I)),enumerable:!0};return te&&(te=Rn(W,te),Be.set=je=>{var ze=[];te(I,Pe.toWireType(ze,je)),Tr(ze)}),Object.defineProperty(fe.i.constructor,h,Be),[]}),[]})},_embind_register_class_constructor:function(g,h,k,I,D,U){var W=li(h,k);D=Rn(I,D),Yn([],[g],function(te){var fe=`constructor ${(te=te[0]).name}`;if(te.i.$===void 0&&(te.i.$=[]),te.i.$[h-1]!==void 0)throw new sr(`Cannot register multiple constructors with identical number of parameters (${h-1}) for class '${te.name}'! Overload resolution is currently only performed using the parameter count, not actual type info!`);return te.i.$[h-1]=()=>{bo(`Cannot construct ${te.name} due to unbound types`,W)},Yn([],W,function(ne){return ne.splice(1,0,null),te.i.$[h-1]=ci(fe,ne,null,D,U),[]}),[]})},_embind_register_class_function:function(g,h,k,I,D,U,W,te){var fe=li(k,I);h=an(h),U=Rn(D,U),Yn([],[g],function(ne){function Re(){bo(`Cannot call ${Pe} due to unbound types`,fe)}var Pe=`${(ne=ne[0]).name}.${h}`;h.startsWith("@@")&&(h=Symbol[h.substring(2)]),te&&ne.i.qb.push(h);var Be=ne.i.N,je=Be[h];return je===void 0||je.B===void 0&&je.className!==ne.name&&je.ea===k-2?(Re.ea=k-2,Re.className=ne.name,Be[h]=Re):(Qi(Be,h,Pe),Be[h].B[k-2]=Re),Yn([],fe,function(ze){return ze=ci(Pe,ze,ne,U,W),Be[h].B===void 0?(ze.ea=k-2,Be[h]=ze):Be[h].B[k-2]=ze,[]}),[]})},_embind_register_class_property:function(g,h,k,I,D,U,W,te,fe,ne){h=an(h),D=Rn(I,D),Yn([],[g],function(Re){var Pe=`${(Re=Re[0]).name}.${h}`,Be={get(){bo(`Cannot access ${Pe} due to unbound types`,[k,W])},enumerable:!0,configurable:!0};return Be.set=fe?()=>{bo(`Cannot access ${Pe} due to unbound types`,[k,W])}:()=>{gt(Pe+" is a read-only property")},Object.defineProperty(Re.i.N,h,Be),Yn([],fe?[k,W]:[k],function(je){var ze=je[0],Ie={get(){var ae=$a(this,Re,Pe+" getter");return ze.fromWireType(D(U,ae))},enumerable:!0};if(fe){fe=Rn(te,fe);var Ct=je[1];Ie.set=function(ae){var be=$a(this,Re,Pe+" setter"),ft=[];fe(ne,be,Ct.toWireType(ft,ae)),Tr(ft)}}return Object.defineProperty(Re.i.N,h,Ie),[]}),[]})},_embind_register_emval:function(g,h){so(g,{name:h=an(h),fromWireType:function(k){var I=oo(k);return ts(k),I},toWireType:function(k,I){return io(I)},argPackAdvance:8,readValueFromPointer:Er,K:null})},_embind_register_enum:function(g,h,k,I){function D(){}k=ii(k),h=an(h),D.values={},so(g,{name:h,constructor:D,fromWireType:function(U){return this.constructor.values[U]},toWireType:function(U,W){return W.value},argPackAdvance:8,readValueFromPointer:Cm(h,k,I),K:null}),es(h,D)},_embind_register_enum_value:function(g,h,k){var I=kr(g,"enum");h=an(h),g=I.constructor,I=Object.create(I.constructor.prototype,{value:{value:k},constructor:{value:Qr(`${I.name}_${h}`,function(){})}}),g.values[k]=I,g[h]=I},_embind_register_float:function(g,h,k){k=ii(k),so(g,{name:h=an(h),fromWireType:function(I){return I},toWireType:function(I,D){return D},argPackAdvance:8,readValueFromPointer:Am(h,k),K:null})},_embind_register_function:function(g,h,k,I,D,U){var W=li(h,k);g=an(g),D=Rn(I,D),es(g,function(){bo(`Cannot call ${g} due to unbound types`,W)},h-1),Yn([],W,function(te){return la(g,ci(g,[te[0],null].concat(te.slice(1)),null,D,U),h-1),[]})},_embind_register_integer:function(g,h,k,I,D){h=an(h),D===-1&&(D=4294967295),D=ii(k);var U=te=>te;if(I===0){var W=32-8*k;U=te=>te<<W>>>W}k=h.includes("unsigned")?function(te,fe){return fe>>>0}:function(te,fe){return fe},so(g,{name:h,fromWireType:U,toWireType:k,argPackAdvance:8,readValueFromPointer:Mm(h,D,I!==0),K:null})},_embind_register_memory_view:function(g,h,k){function I(U){U>>=2;var W=He;return new D(W.buffer,W[U+1],W[U])}var D=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array][h];so(g,{name:k=an(k),fromWireType:I,argPackAdvance:8,readValueFromPointer:I},{$b:!0})},_embind_register_std_string:function(g,h){var k=(h=an(h))==="std::string";so(g,{name:h,fromWireType:function(I){var D=He[I>>2],U=I+4;if(k)for(var W=U,te=0;te<=D;++te){var fe=U+te;if(te==D||ie[fe]==0){if(W=W?Xt(ie,W,fe-W):"",ne===void 0)var ne=W;else ne+="\0",ne+=W;W=fe+1}}else{for(ne=Array(D),te=0;te<D;++te)ne[te]=String.fromCharCode(ie[U+te]);ne=ne.join("")}return xo(I),ne},toWireType:function(I,D){D instanceof ArrayBuffer&&(D=new Uint8Array(D));var U=typeof D=="string";U||D instanceof Uint8Array||D instanceof Uint8ClampedArray||D instanceof Int8Array||gt("Cannot pass non-string to std::string");var W=k&&U?We(D):D.length,te=ss(4+W+1),fe=te+4;if(He[te>>2]=W,k&&U)On(D,ie,fe,W+1);else if(U)for(U=0;U<W;++U){var ne=D.charCodeAt(U);255<ne&&(xo(fe),gt("String has UTF-16 code units that do not fit in 8 bits")),ie[fe+U]=ne}else for(U=0;U<W;++U)ie[fe+U]=D[U];return I!==null&&I.push(xo,te),te},argPackAdvance:8,readValueFromPointer:Er,K:function(I){xo(I)}})},_embind_register_std_wstring:function(g,h,k){if(k=an(k),h===2)var I=km,D=Sm,U=Tm,W=()=>tt,te=1;else h===4&&(I=Em,D=Im,U=Lm,W=()=>He,te=2);so(g,{name:k,fromWireType:function(fe){for(var ne,Re=He[fe>>2],Pe=W(),Be=fe+4,je=0;je<=Re;++je){var ze=fe+4+je*h;je!=Re&&Pe[ze>>te]!=0||(Be=I(Be,ze-Be),ne===void 0?ne=Be:(ne+="\0",ne+=Be),Be=ze+h)}return xo(fe),ne},toWireType:function(fe,ne){typeof ne!="string"&&gt(`Cannot pass non-string to C++ string type ${k}`);var Re=U(ne),Pe=ss(4+Re+h);return He[Pe>>2]=Re>>te,D(ne,Pe+4,Re+h),fe!==null&&fe.push(xo,Pe),Pe},argPackAdvance:8,readValueFromPointer:Er,K:function(fe){xo(fe)}})},_embind_register_value_object:function(g,h,k,I,D,U){oi[g]={name:an(h),Pa:Rn(k,I),W:Rn(D,U),eb:[]}},_embind_register_value_object_field:function(g,h,k,I,D,U,W,te,fe,ne){oi[g].eb.push({Sb:an(h),Yb:k,Wb:Rn(I,D),Xb:U,rc:W,qc:Rn(te,fe),sc:ne})},_embind_register_void:function(g,h){so(g,{fc:!0,name:h=an(h),argPackAdvance:0,fromWireType:function(){},toWireType:function(){}})},_emscripten_get_now_is_monotonic:()=>!0,_emval_as:function(g,h,k){g=oo(g),h=kr(h,"emval::as");var I=[],D=io(I);return He[k>>2]=D,h.toWireType(I,g)},_emval_call_method:function(g,h,k,I,D){g=di[g],h=oo(h),k=ui(k);var U=[];return He[I>>2]=io(U),g(h,k,U,D)},_emval_call_void_method:function(g,h,k,I){(g=di[g])(h=oo(h),k=ui(k),null,I)},_emval_decref:ts,_emval_get_method_caller:function(g,h){var k=function(W,te){for(var fe=Array(W),ne=0;ne<W;++ne)fe[ne]=kr(He[te+4*ne>>2],"parameter "+ne);return fe}(g,h),I=k[0];h=I.name+"_$"+k.slice(1).map(function(W){return W.name}).join("_")+"$";var D=ma[h];if(D!==void 0)return D;var U=Array(g-1);return D=function(W){var te=di.length;return di.push(W),te}((W,te,fe,ne)=>{for(var Re=0,Pe=0;Pe<g-1;++Pe)U[Pe]=k[Pe+1].readValueFromPointer(ne+Re),Re+=k[Pe+1].argPackAdvance;for(W=W[te].apply(W,U),Pe=0;Pe<g-1;++Pe)k[Pe+1].Nb&&k[Pe+1].Nb(U[Pe]);if(!I.fc)return I.toWireType(fe,W)}),ma[h]=D},_emval_get_module_property:function(g){return g=ui(g),io(p[g])},_emval_get_property:function(g,h){return g=oo(g),h=oo(h),io(g[h])},_emval_incref:function(g){4<g&&(eo.get(g).tb+=1)},_emval_new_cstring:function(g){return io(ui(g))},_emval_new_object:function(){return io({})},_emval_run_destructors:function(g){Tr(oo(g)),ts(g)},_emval_set_property:function(g,h,k){g=oo(g),h=oo(h),k=oo(k),g[h]=k},_emval_take_value:function(g,h){return g=(g=kr(g,"_emval_take_value")).readValueFromPointer(h),io(g)},abort:()=>{st("")},emscripten_asm_const_int:(g,h,k)=>{var I;for(rs.length=0,k>>=2;I=ie[h++];)k+=I!=105&k,rs.push(I==105?Ae[k]:It[k++>>1]),++k;return Cn[g].apply(null,rs)},emscripten_date_now:function(){return Date.now()},emscripten_get_now:()=>performance.now(),emscripten_memcpy_big:(g,h,k)=>ie.copyWithin(g,h,h+k),emscripten_resize_heap:g=>{var h=ie.length;if(2147483648<(g>>>=0))return!1;for(var k=1;4>=k;k*=2){var I=h*(1+.2/k);I=Math.min(I,g+100663296);var D=Math;I=Math.max(g,I);e:{D=D.min.call(D,2147483648,I+(65536-I%65536)%65536)-le.buffer.byteLength+65535>>>16;try{le.grow(D),z();var U=1;break e}catch{}U=void 0}if(U)return!0}return!1},environ_get:(g,h)=>{var k=0;return pa().forEach(function(I,D){var U=h+k;for(D=He[g+4*D>>2]=U,U=0;U<I.length;++U)he[0|D++]=I.charCodeAt(U);he[0|D]=0,k+=I.length+1}),0},environ_sizes_get:(g,h)=>{var k=pa();He[g>>2]=k.length;var I=0;return k.forEach(function(D){I+=D.length+1}),He[h>>2]=I,0},fd_close:function(g){try{var h=Mn(g);if(h.X===null)throw new Ee(8);h.Ma&&(h.Ma=null);try{h.m.close&&h.m.close(h)}catch(k){throw k}finally{$t[h.X]=null}return h.X=null,0}catch(k){if(Vo===void 0||k.name!=="ErrnoError")throw k;return k.aa}},fd_read:function(g,h,k,I){try{e:{var D=Mn(g);g=h;for(var U,W=h=0;W<k;W++){var te=He[g>>2],fe=He[g+4>>2];g+=8;var ne=D,Re=te,Pe=fe,Be=U,je=he;if(0>Pe||0>Be)throw new Ee(28);if(ne.X===null)throw new Ee(8);if((2097155&ne.flags)==1)throw new Ee(8);if((61440&ne.node.mode)==16384)throw new Ee(31);if(!ne.m.read)throw new Ee(28);var ze=Be!==void 0;if(ze){if(!ne.seekable)throw new Ee(70)}else Be=ne.position;var Ie=ne.m.read(ne,je,Re,Pe,Be);ze||(ne.position+=Ie);var Ct=Ie;if(0>Ct){var ae=-1;break e}if(h+=Ct,Ct<fe)break;U!==void 0&&(U+=Ct)}ae=h}return He[I>>2]=ae,0}catch(be){if(Vo===void 0||be.name!=="ErrnoError")throw be;return be.aa}},fd_seek:function(g,h,k,I,D){h=k+2097152>>>0<4194305-!!h?(h>>>0)+4294967296*k:NaN;try{if(isNaN(h))return 61;var U=Mn(g);return Zr(U,h,I),Pt=[U.position>>>0,(Ot=U.position,1<=+Math.abs(Ot)?0<Ot?+Math.floor(Ot/4294967296)>>>0:~~+Math.ceil((Ot-+(~~Ot>>>0))/4294967296)>>>0:0)],Ae[D>>2]=Pt[0],Ae[D+4>>2]=Pt[1],U.Ma&&h===0&&I===0&&(U.Ma=null),0}catch(W){if(Vo===void 0||W.name!=="ErrnoError")throw W;return W.aa}},fd_write:function(g,h,k,I){try{e:{var D=Mn(g);g=h;for(var U,W=h=0;W<k;W++){var te=He[g>>2],fe=He[g+4>>2];g+=8;var ne=D,Re=te,Pe=fe,Be=U,je=he;if(0>Pe||0>Be)throw new Ee(28);if(ne.X===null)throw new Ee(8);if(!(2097155&ne.flags))throw new Ee(8);if((61440&ne.node.mode)==16384)throw new Ee(31);if(!ne.m.write)throw new Ee(28);ne.seekable&&1024&ne.flags&&Zr(ne,0,2);var ze=Be!==void 0;if(ze){if(!ne.seekable)throw new Ee(70)}else Be=ne.position;var Ie=ne.m.write(ne,je,Re,Pe,Be,void 0);ze||(ne.position+=Ie);var Ct=Ie;if(0>Ct){var ae=-1;break e}h+=Ct,U!==void 0&&(U+=Ct)}ae=h}return He[I>>2]=ae,0}catch(be){if(Vo===void 0||be.name!=="ErrnoError")throw be;return be.aa}},strftime_l:(g,h,k,I)=>((D,U,W,te)=>{function fe(ae,be,ft){for(ae=typeof ae=="number"?ae.toString():ae||"";ae.length<be;)ae=ft[0]+ae;return ae}function ne(ae,be){return fe(ae,be,"0")}function Re(ae,be){function ft(Kn){return 0>Kn?-1:0<Kn?1:0}var Kt;return(Kt=ft(ae.getFullYear()-be.getFullYear()))===0&&(Kt=ft(ae.getMonth()-be.getMonth()))===0&&(Kt=ft(ae.getDate()-be.getDate())),Kt}function Pe(ae){switch(ae.getDay()){case 0:return new Date(ae.getFullYear()-1,11,29);case 1:return ae;case 2:return new Date(ae.getFullYear(),0,3);case 3:return new Date(ae.getFullYear(),0,2);case 4:return new Date(ae.getFullYear(),0,1);case 5:return new Date(ae.getFullYear()-1,11,31);case 6:return new Date(ae.getFullYear()-1,11,30)}}function Be(ae){var be=ae.ca;for(ae=new Date(new Date(ae.da+1900,0,1).getTime());0<be;){var ft=ae.getMonth(),Kt=($i(ae.getFullYear())?ga:ha)[ft];if(!(be>Kt-ae.getDate())){ae.setDate(ae.getDate()+be);break}be-=Kt-ae.getDate()+1,ae.setDate(1),11>ft?ae.setMonth(ft+1):(ae.setMonth(0),ae.setFullYear(ae.getFullYear()+1))}return ft=new Date(ae.getFullYear()+1,0,4),be=Pe(new Date(ae.getFullYear(),0,4)),ft=Pe(ft),0>=Re(be,ae)?0>=Re(ft,ae)?ae.getFullYear()+1:ae.getFullYear():ae.getFullYear()-1}var je=Ae[te+40>>2];for(var ze in te={wc:Ae[te>>2],vc:Ae[te+4>>2],Fa:Ae[te+8>>2],Sa:Ae[te+12>>2],Ga:Ae[te+16>>2],da:Ae[te+20>>2],R:Ae[te+24>>2],ca:Ae[te+28>>2],Rc:Ae[te+32>>2],uc:Ae[te+36>>2],xc:je&&je?Xt(ie,je):""},W=W?Xt(ie,W):"",je={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"})W=W.replace(new RegExp(ze,"g"),je[ze]);var Ie="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),Ct="January February March April May June July August September October November December".split(" ");for(ze in je={"%a":ae=>Ie[ae.R].substring(0,3),"%A":ae=>Ie[ae.R],"%b":ae=>Ct[ae.Ga].substring(0,3),"%B":ae=>Ct[ae.Ga],"%C":ae=>ne((ae.da+1900)/100|0,2),"%d":ae=>ne(ae.Sa,2),"%e":ae=>fe(ae.Sa,2," "),"%g":ae=>Be(ae).toString().substring(2),"%G":ae=>Be(ae),"%H":ae=>ne(ae.Fa,2),"%I":ae=>((ae=ae.Fa)==0?ae=12:12<ae&&(ae-=12),ne(ae,2)),"%j":ae=>{for(var be=0,ft=0;ft<=ae.Ga-1;be+=($i(ae.da+1900)?ga:ha)[ft++]);return ne(ae.Sa+be,3)},"%m":ae=>ne(ae.Ga+1,2),"%M":ae=>ne(ae.vc,2),"%n":()=>`
`,"%p":ae=>0<=ae.Fa&&12>ae.Fa?"AM":"PM","%S":ae=>ne(ae.wc,2),"%t":()=>"	","%u":ae=>ae.R||7,"%U":ae=>ne(Math.floor((ae.ca+7-ae.R)/7),2),"%V":ae=>{var be=Math.floor((ae.ca+7-(ae.R+6)%7)/7);if(2>=(ae.R+371-ae.ca-2)%7&&be++,be)be==53&&((ft=(ae.R+371-ae.ca)%7)==4||ft==3&&$i(ae.da)||(be=1));else{be=52;var ft=(ae.R+7-ae.ca-1)%7;(ft==4||ft==5&&$i(ae.da%400-1))&&be++}return ne(be,2)},"%w":ae=>ae.R,"%W":ae=>ne(Math.floor((ae.ca+7-(ae.R+6)%7)/7),2),"%y":ae=>(ae.da+1900).toString().substring(2),"%Y":ae=>ae.da+1900,"%z":ae=>{var be=0<=(ae=ae.uc);return ae=Math.abs(ae)/60,(be?"+":"-")+("0000"+(ae/60*100+ae%60)).slice(-4)},"%Z":ae=>ae.xc,"%%":()=>"%"},W=W.replace(/%%/g,"\0\0"),je)W.includes(ze)&&(W=W.replace(new RegExp(ze,"g"),je[ze](te)));return(ze=zn(W=W.replace(/\0\0/g,"%"),!1)).length>U?0:(he.set(ze,D),ze.length-1)})(g,h,k,I)};(function(){function g(k){if(oe=k=k.exports,le=oe.memory,z(),S=oe.__indirect_function_table,ee.unshift(oe.__wasm_call_ctors),Oe--,p.monitorRunDependencies&&p.monitorRunDependencies(Oe),Oe==0&&qe){var I=qe;qe=null,I()}return k}var h={env:ya,wasi_snapshot_preview1:ya};if(Oe++,p.monitorRunDependencies&&p.monitorRunDependencies(Oe),p.instantiateWasm)try{return p.instantiateWasm(h,g)}catch(k){re("Module.instantiateWasm callback failed with error: "+k),m(k)}(function(k,I){var D=Ce;return V||typeof WebAssembly.instantiateStreaming!="function"||Ve(D)||D.startsWith("file://")||typeof fetch!="function"?Lt(D,k,I):fetch(D,{credentials:"same-origin"}).then(U=>WebAssembly.instantiateStreaming(U,k).then(I,function(W){return re("wasm streaming compile failed: "+W),re("falling back to ArrayBuffer instantiation"),Lt(D,k,I)}))})(h,function(k){g(k.instance)}).catch(m)})();var xo=g=>(xo=oe.free)(g),ss=g=>(ss=oe.malloc)(g),ba=p._ma_device__on_notification_unlocked=g=>(ba=p._ma_device__on_notification_unlocked=oe.ma_device__on_notification_unlocked)(g);p._ma_malloc_emscripten=(g,h)=>(p._ma_malloc_emscripten=oe.ma_malloc_emscripten)(g,h),p._ma_free_emscripten=(g,h)=>(p._ma_free_emscripten=oe.ma_free_emscripten)(g,h);var mi,xa=p._ma_device_process_pcm_frames_capture__webaudio=(g,h,k)=>(xa=p._ma_device_process_pcm_frames_capture__webaudio=oe.ma_device_process_pcm_frames_capture__webaudio)(g,h,k),_a=p._ma_device_process_pcm_frames_playback__webaudio=(g,h,k)=>(_a=p._ma_device_process_pcm_frames_playback__webaudio=oe.ma_device_process_pcm_frames_playback__webaudio)(g,h,k),Ca=()=>(Ca=oe.__errno_location)(),Aa=g=>(Aa=oe.__getTypeName)(g);function Ma(){function g(){if(!mi&&(mi=!0,p.calledRun=!0,!un)){if(p.noFSInit||fn||(fn=!0,Js(),p.stdin=p.stdin,p.stdout=p.stdout,p.stderr=p.stderr,p.stdin?Cr("stdin",p.stdin):Ln("/dev/tty","/dev/stdin"),p.stdout?Cr("stdout",null,p.stdout):Ln("/dev/tty","/dev/stdout"),p.stderr?Cr("stderr",null,p.stderr):Ln("/dev/tty1","/dev/stderr"),no("/dev/stdin",0),no("/dev/stdout",1),no("/dev/stderr",1)),dn=!1,An(ee),f(p),p.onRuntimeInitialized&&p.onRuntimeInitialized(),p.postRun)for(typeof p.postRun=="function"&&(p.postRun=[p.postRun]);p.postRun.length;){var h=p.postRun.shift();se.unshift(h)}An(se)}}if(!(0<Oe)){if(p.preRun)for(typeof p.preRun=="function"&&(p.preRun=[p.preRun]);p.preRun.length;)ve();An(O),0<Oe||(p.setStatus?(p.setStatus("Running..."),setTimeout(function(){setTimeout(function(){p.setStatus("")},1),g()},1)):g())}}if(p.__embind_initialize_bindings=()=>(p.__embind_initialize_bindings=oe._embind_initialize_bindings)(),p.dynCall_iiji=(g,h,k,I,D)=>(p.dynCall_iiji=oe.dynCall_iiji)(g,h,k,I,D),p.dynCall_jiji=(g,h,k,I,D)=>(p.dynCall_jiji=oe.dynCall_jiji)(g,h,k,I,D),p.dynCall_iiiji=(g,h,k,I,D,U)=>(p.dynCall_iiiji=oe.dynCall_iiiji)(g,h,k,I,D,U),p.dynCall_iij=(g,h,k,I)=>(p.dynCall_iij=oe.dynCall_iij)(g,h,k,I),p.dynCall_jii=(g,h,k)=>(p.dynCall_jii=oe.dynCall_jii)(g,h,k),p.dynCall_viijii=(g,h,k,I,D,U,W)=>(p.dynCall_viijii=oe.dynCall_viijii)(g,h,k,I,D,U,W),p.dynCall_iiiiij=(g,h,k,I,D,U,W)=>(p.dynCall_iiiiij=oe.dynCall_iiiiij)(g,h,k,I,D,U,W),p.dynCall_iiiiijj=(g,h,k,I,D,U,W,te,fe)=>(p.dynCall_iiiiijj=oe.dynCall_iiiiijj)(g,h,k,I,D,U,W,te,fe),p.dynCall_iiiiiijj=(g,h,k,I,D,U,W,te,fe,ne)=>(p.dynCall_iiiiiijj=oe.dynCall_iiiiiijj)(g,h,k,I,D,U,W,te,fe,ne),qe=function g(){mi||Ma(),mi||(qe=g)},p.preInit)for(typeof p.preInit=="function"&&(p.preInit=[p.preInit]);0<p.preInit.length;)p.preInit.pop()();return Ma(),u.ready});const l=a},o=>{o.exports=JSON.parse(`{"name":"@rive-app/canvas","version":"2.26.4","description":"Rive's canvas based web api.","main":"rive.js","homepage":"https://rive.app","repository":{"type":"git","url":"https://github.com/rive-app/rive-wasm/tree/master/js"},"keywords":["rive","animation"],"author":"Rive","contributors":["Luigi Rosso <luigi@rive.app> (https://rive.app)","Maxwell Talbot <max@rive.app> (https://rive.app)","Arthur Vivian <arthur@rive.app> (https://rive.app)","Umberto Sonnino <umberto@rive.app> (https://rive.app)","Matthew Sullivan <matt.j.sullivan@gmail.com> (mailto:matt.j.sullivan@gmail.com)"],"license":"MIT","files":["rive.js","rive.js.map","rive.wasm","rive_fallback.wasm","rive.d.ts","rive_advanced.mjs.d.ts"],"typings":"rive.d.ts","dependencies":{},"browser":{"fs":false,"path":false}}`)},(o,r,s)=>{s.r(r),s.d(r,{Animation:()=>c.Animation});var c=s(4)},(o,r,s)=>{s.r(r),s.d(r,{Animation:()=>c});var c=function(){function a(l,u,f,m){this.animation=l,this.artboard=u,this.playing=m,this.loopCount=0,this.scrubTo=null,this.instance=new f.LinearAnimationInstance(l,u)}return Object.defineProperty(a.prototype,"name",{get:function(){return this.animation.name},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"time",{get:function(){return this.instance.time},set:function(l){this.instance.time=l},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"loopValue",{get:function(){return this.animation.loopValue},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"needsScrub",{get:function(){return this.scrubTo!==null},enumerable:!1,configurable:!0}),a.prototype.advance=function(l){this.scrubTo===null?this.instance.advance(l):(this.instance.time=0,this.instance.advance(this.scrubTo),this.scrubTo=null)},a.prototype.apply=function(l){this.instance.apply(l)},a.prototype.cleanup=function(){this.instance.delete()},a}()},(o,r,s)=>{s.r(r),s.d(r,{BLANK_URL:()=>a.BLANK_URL,registerTouchInteractions:()=>c.registerTouchInteractions,sanitizeUrl:()=>a.sanitizeUrl});var c=s(6),a=s(7)},(o,r,s)=>{s.r(r),s.d(r,{registerTouchInteractions:()=>c});var c=function(a){var l=a.canvas,u=a.artboard,f=a.stateMachines,m=f===void 0?[]:f,p=a.renderer,_=a.rive,M=a.fit,C=a.alignment,T=a.isTouchScrollEnabled,E=T!==void 0&&T,R=a.layoutScaleFactor,N=R===void 0?1:R;if(!(l&&m.length&&p&&_&&u&&typeof window<"u"))return null;var J=null,Q=!1,X=(function(K){if(Q&&K instanceof MouseEvent)K.type=="mouseup"&&(Q=!1);else{Q=E&&K.type==="touchend"&&J==="touchstart",J=K.type;var H=K.currentTarget.getBoundingClientRect(),Y=function(se,ve){var Ce,Oe;return["touchstart","touchmove"].indexOf(se.type)>-1&&(!((Ce=se.touches)===null||Ce===void 0)&&Ce.length)?(ve||se.preventDefault(),{clientX:se.touches[0].clientX,clientY:se.touches[0].clientY}):se.type==="touchend"&&(!((Oe=se.changedTouches)===null||Oe===void 0)&&Oe.length)?{clientX:se.changedTouches[0].clientX,clientY:se.changedTouches[0].clientY}:{clientX:se.clientX,clientY:se.clientY}}(K,E),V=Y.clientX,Z=Y.clientY;if(V||Z){var re=V-H.left,le=Z-H.top,oe=_.computeAlignment(M,C,{minX:0,minY:0,maxX:H.width,maxY:H.height},u.bounds,N),he=new _.Mat2D;oe.invert(he);var ie=new _.Vec2D(re,le),xe=_.mapXY(he,ie),tt=xe.x(),Ae=xe.y();switch(xe.delete(),he.delete(),ie.delete(),oe.delete(),K.type){case"mouseout":for(var He=0,Dt=m;He<Dt.length;He++)Dt[He].pointerMove(tt,Ae);break;case"touchmove":case"mouseover":case"mousemove":for(var It=0,un=m;It<un.length;It++)un[It].pointerMove(tt,Ae);break;case"touchstart":case"mousedown":for(var z=0,S=m;z<S.length;z++)S[z].pointerDown(tt,Ae);break;case"touchend":case"mouseup":for(var O=0,ee=m;O<ee.length;O++)ee[O].pointerUp(tt,Ae)}}}}).bind(void 0);return l.addEventListener("mouseover",X),l.addEventListener("mouseout",X),l.addEventListener("mousemove",X),l.addEventListener("mousedown",X),l.addEventListener("mouseup",X),l.addEventListener("touchmove",X,{passive:E}),l.addEventListener("touchstart",X,{passive:E}),l.addEventListener("touchend",X),function(){l.removeEventListener("mouseover",X),l.removeEventListener("mouseout",X),l.removeEventListener("mousemove",X),l.removeEventListener("mousedown",X),l.removeEventListener("mouseup",X),l.removeEventListener("touchmove",X),l.removeEventListener("touchstart",X),l.removeEventListener("touchend",X)}}},(o,r,s)=>{s.r(r),s.d(r,{BLANK_URL:()=>p,sanitizeUrl:()=>_});var c=/^([^\w]*)(javascript|data|vbscript)/im,a=/&#(\w+)(^\w|;)?/g,l=/&(newline|tab);/gi,u=/[\u0000-\u001F\u007F-\u009F\u2000-\u200D\uFEFF]/gim,f=/^.+(:|&colon;)/gim,m=[".","/"],p="about:blank";function _(M){if(!M)return p;var C,T=(C=M,C.replace(u,"").replace(a,function(N,J){return String.fromCharCode(J)})).replace(l,"").replace(u,"").trim();if(!T)return p;if(function(N){return m.indexOf(N[0])>-1}(T))return T;var E=T.match(f);if(!E)return T;var R=E[0];return c.test(R)?p:T}}],e={};function n(o){var r=e[o];if(r!==void 0)return r.exports;var s=e[o]={exports:{}};return i[o](s,s.exports,n),s.exports}n.d=(o,r)=>{for(var s in r)n.o(r,s)&&!n.o(o,s)&&Object.defineProperty(o,s,{enumerable:!0,get:r[s]})},n.o=(o,r)=>Object.prototype.hasOwnProperty.call(o,r),n.r=o=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(o,"__esModule",{value:!0})};var t={};return(()=>{n.r(t),n.d(t,{Alignment:()=>s,EventType:()=>N,Fit:()=>r,Layout:()=>C,LoopType:()=>J,Rive:()=>xe,RiveEventType:()=>E,RiveFile:()=>ie,RuntimeLoader:()=>T,StateMachineInput:()=>R,StateMachineInputType:()=>M,Testing:()=>He,decodeAudio:()=>Dt,decodeFont:()=>un,decodeImage:()=>It});var o,r,s,c=n(1),a=n(2),l=n(3),u=n(5),f=(o=function(z,S){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(O,ee){O.__proto__=ee}||function(O,ee){for(var se in ee)Object.prototype.hasOwnProperty.call(ee,se)&&(O[se]=ee[se])},o(z,S)},function(z,S){if(typeof S!="function"&&S!==null)throw new TypeError("Class extends value "+String(S)+" is not a constructor or null");function O(){this.constructor=z}o(z,S),z.prototype=S===null?Object.create(S):(O.prototype=S.prototype,new O)}),m=function(z,S,O,ee){return new(O||(O=Promise))(function(se,ve){function Ce(st){try{qe(ee.next(st))}catch(Ve){ve(Ve)}}function Oe(st){try{qe(ee.throw(st))}catch(Ve){ve(Ve)}}function qe(st){var Ve;st.done?se(st.value):(Ve=st.value,Ve instanceof O?Ve:new O(function(zt){zt(Ve)})).then(Ce,Oe)}qe((ee=ee.apply(z,S||[])).next())})},p=function(z,S){var O,ee,se,ve={label:0,sent:function(){if(1&se[0])throw se[1];return se[1]},trys:[],ops:[]},Ce=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return Ce.next=Oe(0),Ce.throw=Oe(1),Ce.return=Oe(2),typeof Symbol=="function"&&(Ce[Symbol.iterator]=function(){return this}),Ce;function Oe(qe){return function(st){return function(Ve){if(O)throw new TypeError("Generator is already executing.");for(;Ce&&(Ce=0,Ve[0]&&(ve=0)),ve;)try{if(O=1,ee&&(se=2&Ve[0]?ee.return:Ve[0]?ee.throw||((se=ee.return)&&se.call(ee),0):ee.next)&&!(se=se.call(ee,Ve[1])).done)return se;switch(ee=0,se&&(Ve=[2&Ve[0],se.value]),Ve[0]){case 0:case 1:se=Ve;break;case 4:return ve.label++,{value:Ve[1],done:!1};case 5:ve.label++,ee=Ve[1],Ve=[0];continue;case 7:Ve=ve.ops.pop(),ve.trys.pop();continue;default:if(!((se=(se=ve.trys).length>0&&se[se.length-1])||Ve[0]!==6&&Ve[0]!==2)){ve=0;continue}if(Ve[0]===3&&(!se||Ve[1]>se[0]&&Ve[1]<se[3])){ve.label=Ve[1];break}if(Ve[0]===6&&ve.label<se[1]){ve.label=se[1],se=Ve;break}if(se&&ve.label<se[2]){ve.label=se[2],ve.ops.push(Ve);break}se[2]&&ve.ops.pop(),ve.trys.pop();continue}Ve=S.call(z,ve)}catch(zt){Ve=[6,zt],ee=0}finally{O=se=0}if(5&Ve[0])throw Ve[1];return{value:Ve[0]?Ve[1]:void 0,done:!0}}([qe,st])}}},_=function(z){function S(){var O=z!==null&&z.apply(this,arguments)||this;return O.isHandledError=!0,O}return f(S,z),S}(Error);(function(z){z.Cover="cover",z.Contain="contain",z.Fill="fill",z.FitWidth="fitWidth",z.FitHeight="fitHeight",z.None="none",z.ScaleDown="scaleDown",z.Layout="layout"})(r||(r={})),function(z){z.Center="center",z.TopLeft="topLeft",z.TopCenter="topCenter",z.TopRight="topRight",z.CenterLeft="centerLeft",z.CenterRight="centerRight",z.BottomLeft="bottomLeft",z.BottomCenter="bottomCenter",z.BottomRight="bottomRight"}(s||(s={}));var M,C=function(){function z(S){var O,ee,se,ve,Ce,Oe,qe;this.fit=(O=S==null?void 0:S.fit)!==null&&O!==void 0?O:r.Contain,this.alignment=(ee=S==null?void 0:S.alignment)!==null&&ee!==void 0?ee:s.Center,this.layoutScaleFactor=(se=S==null?void 0:S.layoutScaleFactor)!==null&&se!==void 0?se:1,this.minX=(ve=S==null?void 0:S.minX)!==null&&ve!==void 0?ve:0,this.minY=(Ce=S==null?void 0:S.minY)!==null&&Ce!==void 0?Ce:0,this.maxX=(Oe=S==null?void 0:S.maxX)!==null&&Oe!==void 0?Oe:0,this.maxY=(qe=S==null?void 0:S.maxY)!==null&&qe!==void 0?qe:0}return z.new=function(S){var O=S.fit,ee=S.alignment,se=S.minX,ve=S.minY,Ce=S.maxX,Oe=S.maxY;return console.warn("This function is deprecated: please use `new Layout({})` instead"),new z({fit:O,alignment:ee,minX:se,minY:ve,maxX:Ce,maxY:Oe})},z.prototype.copyWith=function(S){var O=S.fit,ee=S.alignment,se=S.layoutScaleFactor,ve=S.minX,Ce=S.minY,Oe=S.maxX,qe=S.maxY;return new z({fit:O??this.fit,alignment:ee??this.alignment,layoutScaleFactor:se??this.layoutScaleFactor,minX:ve??this.minX,minY:Ce??this.minY,maxX:Oe??this.maxX,maxY:qe??this.maxY})},z.prototype.runtimeFit=function(S){return this.cachedRuntimeFit?this.cachedRuntimeFit:(O=this.fit===r.Cover?S.Fit.cover:this.fit===r.Contain?S.Fit.contain:this.fit===r.Fill?S.Fit.fill:this.fit===r.FitWidth?S.Fit.fitWidth:this.fit===r.FitHeight?S.Fit.fitHeight:this.fit===r.ScaleDown?S.Fit.scaleDown:this.fit===r.Layout?S.Fit.layout:S.Fit.none,this.cachedRuntimeFit=O,O);var O},z.prototype.runtimeAlignment=function(S){return this.cachedRuntimeAlignment?this.cachedRuntimeAlignment:(O=this.alignment===s.TopLeft?S.Alignment.topLeft:this.alignment===s.TopCenter?S.Alignment.topCenter:this.alignment===s.TopRight?S.Alignment.topRight:this.alignment===s.CenterLeft?S.Alignment.centerLeft:this.alignment===s.CenterRight?S.Alignment.centerRight:this.alignment===s.BottomLeft?S.Alignment.bottomLeft:this.alignment===s.BottomCenter?S.Alignment.bottomCenter:this.alignment===s.BottomRight?S.Alignment.bottomRight:S.Alignment.center,this.cachedRuntimeAlignment=O,O);var O},z}(),T=function(){function z(){}return z.loadRuntime=function(){c.default({locateFile:function(){return z.wasmURL}}).then(function(S){var O;for(z.runtime=S;z.callBackQueue.length>0;)(O=z.callBackQueue.shift())===null||O===void 0||O(z.runtime)}).catch(function(S){var O={message:(S==null?void 0:S.message)||"Unknown error",type:(S==null?void 0:S.name)||"Error",wasmError:S instanceof WebAssembly.CompileError||S instanceof WebAssembly.RuntimeError,originalError:S};console.debug("Rive WASM load error details:",O);var ee="https://cdn.jsdelivr.net/npm/".concat(a.name,"@").concat(a.version,"/rive_fallback.wasm");if(z.wasmURL.toLowerCase()!==ee)console.warn("Failed to load WASM from ".concat(z.wasmURL," (").concat(O.message,"), trying jsdelivr as a backup")),z.setWasmUrl(ee),z.loadRuntime();else{var se=["Could not load Rive WASM file from ".concat(z.wasmURL," or ").concat(ee,"."),"Possible reasons:","- Network connection is down","- WebAssembly is not supported in this environment","- The WASM file is corrupted or incompatible",`
Error details:`,"- Type: ".concat(O.type),"- Message: ".concat(O.message),"- WebAssembly-specific error: ".concat(O.wasmError),`
To resolve, you may need to:`,"1. Check your network connection","2. Set a new WASM source via RuntimeLoader.setWasmUrl()","3. Call RuntimeLoader.loadRuntime() again"].join(`
`);console.error(se)}})},z.getInstance=function(S){z.isLoading||(z.isLoading=!0,z.loadRuntime()),z.runtime?S(z.runtime):z.callBackQueue.push(S)},z.awaitInstance=function(){return new Promise(function(S){return z.getInstance(function(O){return S(O)})})},z.setWasmUrl=function(S){z.wasmURL=S},z.getWasmUrl=function(){return z.wasmURL},z.isLoading=!1,z.callBackQueue=[],z.wasmURL="https://unpkg.com/".concat(a.name,"@").concat(a.version,"/rive.wasm"),z}();(function(z){z[z.Number=56]="Number",z[z.Trigger=58]="Trigger",z[z.Boolean=59]="Boolean"})(M||(M={}));var E,R=function(){function z(S,O){this.type=S,this.runtimeInput=O}return Object.defineProperty(z.prototype,"name",{get:function(){return this.runtimeInput.name},enumerable:!1,configurable:!0}),Object.defineProperty(z.prototype,"value",{get:function(){return this.runtimeInput.value},set:function(S){this.runtimeInput.value=S},enumerable:!1,configurable:!0}),z.prototype.fire=function(){this.type===M.Trigger&&this.runtimeInput.fire()},z.prototype.delete=function(){this.runtimeInput=null},z}();(function(z){z[z.General=128]="General",z[z.OpenUrl=131]="OpenUrl"})(E||(E={}));var N,J,Q=function(){function z(S,O,ee,se){this.stateMachine=S,this.playing=ee,this.artboard=se,this.inputs=[],this.instance=new O.StateMachineInstance(S,se),this.initInputs(O)}return Object.defineProperty(z.prototype,"name",{get:function(){return this.stateMachine.name},enumerable:!1,configurable:!0}),Object.defineProperty(z.prototype,"statesChanged",{get:function(){for(var S=[],O=0;O<this.instance.stateChangedCount();O++)S.push(this.instance.stateChangedNameByIndex(O));return S},enumerable:!1,configurable:!0}),z.prototype.advance=function(S){this.instance.advance(S)},z.prototype.advanceAndApply=function(S){this.instance.advanceAndApply(S)},z.prototype.reportedEventCount=function(){return this.instance.reportedEventCount()},z.prototype.reportedEventAt=function(S){return this.instance.reportedEventAt(S)},z.prototype.initInputs=function(S){for(var O=0;O<this.instance.inputCount();O++){var ee=this.instance.input(O);this.inputs.push(this.mapRuntimeInput(ee,S))}},z.prototype.mapRuntimeInput=function(S,O){return S.type===O.SMIInput.bool?new R(M.Boolean,S.asBool()):S.type===O.SMIInput.number?new R(M.Number,S.asNumber()):S.type===O.SMIInput.trigger?new R(M.Trigger,S.asTrigger()):void 0},z.prototype.cleanup=function(){this.inputs.forEach(function(S){S.delete()}),this.inputs.length=0,this.instance.delete()},z}(),X=function(){function z(S,O,ee,se,ve){se===void 0&&(se=[]),ve===void 0&&(ve=[]),this.runtime=S,this.artboard=O,this.eventManager=ee,this.animations=se,this.stateMachines=ve}return z.prototype.add=function(S,O,ee){if(ee===void 0&&(ee=!0),(S=Ae(S)).length===0)this.animations.forEach(function(Lt){return Lt.playing=O}),this.stateMachines.forEach(function(Lt){return Lt.playing=O});else for(var se=this.animations.map(function(Lt){return Lt.name}),ve=this.stateMachines.map(function(Lt){return Lt.name}),Ce=0;Ce<S.length;Ce++){var Oe=se.indexOf(S[Ce]),qe=ve.indexOf(S[Ce]);if(Oe>=0||qe>=0)Oe>=0?this.animations[Oe].playing=O:this.stateMachines[qe].playing=O;else{var st=this.artboard.animationByName(S[Ce]);if(st){var Ve=new l.Animation(st,this.artboard,this.runtime,O);Ve.advance(0),Ve.apply(1),this.animations.push(Ve)}else{var zt=this.artboard.stateMachineByName(S[Ce]);if(zt){var Qe=new Q(zt,this.runtime,O,this.artboard);this.stateMachines.push(Qe)}}}}return ee&&(O?this.eventManager.fire({type:N.Play,data:this.playing}):this.eventManager.fire({type:N.Pause,data:this.paused})),O?this.playing:this.paused},z.prototype.initLinearAnimations=function(S,O){for(var ee=this.animations.map(function(qe){return qe.name}),se=0;se<S.length;se++){var ve=ee.indexOf(S[se]);if(ve>=0)this.animations[ve].playing=O;else{var Ce=this.artboard.animationByName(S[se]);if(Ce){var Oe=new l.Animation(Ce,this.artboard,this.runtime,O);Oe.advance(0),Oe.apply(1),this.animations.push(Oe)}}}},z.prototype.initStateMachines=function(S,O){for(var ee=this.stateMachines.map(function(qe){return qe.name}),se=0;se<S.length;se++){var ve=ee.indexOf(S[se]);if(ve>=0)this.stateMachines[ve].playing=O;else{var Ce=this.artboard.stateMachineByName(S[se]);if(Ce){var Oe=new Q(Ce,this.runtime,O,this.artboard);this.stateMachines.push(Oe)}else this.initLinearAnimations([S[se]],O)}}},z.prototype.play=function(S){return this.add(S,!0)},z.prototype.pause=function(S){return this.add(S,!1)},z.prototype.scrub=function(S,O){var ee=this.animations.filter(function(se){return S.includes(se.name)});return ee.forEach(function(se){return se.scrubTo=O}),ee.map(function(se){return se.name})},Object.defineProperty(z.prototype,"playing",{get:function(){return this.animations.filter(function(S){return S.playing}).map(function(S){return S.name}).concat(this.stateMachines.filter(function(S){return S.playing}).map(function(S){return S.name}))},enumerable:!1,configurable:!0}),Object.defineProperty(z.prototype,"paused",{get:function(){return this.animations.filter(function(S){return!S.playing}).map(function(S){return S.name}).concat(this.stateMachines.filter(function(S){return!S.playing}).map(function(S){return S.name}))},enumerable:!1,configurable:!0}),z.prototype.stop=function(S){var O=this,ee=[];if((S=Ae(S)).length===0)ee=this.animations.map(function(Ce){return Ce.name}).concat(this.stateMachines.map(function(Ce){return Ce.name})),this.animations.forEach(function(Ce){return Ce.cleanup()}),this.stateMachines.forEach(function(Ce){return Ce.cleanup()}),this.animations.splice(0,this.animations.length),this.stateMachines.splice(0,this.stateMachines.length);else{var se=this.animations.filter(function(Ce){return S.includes(Ce.name)});se.forEach(function(Ce){Ce.cleanup(),O.animations.splice(O.animations.indexOf(Ce),1)});var ve=this.stateMachines.filter(function(Ce){return S.includes(Ce.name)});ve.forEach(function(Ce){Ce.cleanup(),O.stateMachines.splice(O.stateMachines.indexOf(Ce),1)}),ee=se.map(function(Ce){return Ce.name}).concat(ve.map(function(Ce){return Ce.name}))}return this.eventManager.fire({type:N.Stop,data:ee}),ee},Object.defineProperty(z.prototype,"isPlaying",{get:function(){return this.animations.reduce(function(S,O){return S||O.playing},!1)||this.stateMachines.reduce(function(S,O){return S||O.playing},!1)},enumerable:!1,configurable:!0}),Object.defineProperty(z.prototype,"isPaused",{get:function(){return!this.isPlaying&&(this.animations.length>0||this.stateMachines.length>0)},enumerable:!1,configurable:!0}),Object.defineProperty(z.prototype,"isStopped",{get:function(){return this.animations.length===0&&this.stateMachines.length===0},enumerable:!1,configurable:!0}),z.prototype.atLeastOne=function(S,O){var ee;return O===void 0&&(O=!0),this.animations.length===0&&this.stateMachines.length===0&&(this.artboard.animationCount()>0?this.add([ee=this.artboard.animationByIndex(0).name],S,O):this.artboard.stateMachineCount()>0&&this.add([ee=this.artboard.stateMachineByIndex(0).name],S,O)),ee},z.prototype.handleLooping=function(){for(var S=0,O=this.animations.filter(function(se){return se.playing});S<O.length;S++){var ee=O[S];ee.loopValue===0&&ee.loopCount?(ee.loopCount=0,this.stop(ee.name)):ee.loopValue===1&&ee.loopCount?(this.eventManager.fire({type:N.Loop,data:{animation:ee.name,type:J.Loop}}),ee.loopCount=0):ee.loopValue===2&&ee.loopCount>1&&(this.eventManager.fire({type:N.Loop,data:{animation:ee.name,type:J.PingPong}}),ee.loopCount=0)}},z.prototype.handleStateChanges=function(){for(var S=[],O=0,ee=this.stateMachines.filter(function(ve){return ve.playing});O<ee.length;O++){var se=ee[O];S.push.apply(S,se.statesChanged)}S.length>0&&this.eventManager.fire({type:N.StateChange,data:S})},z.prototype.handleAdvancing=function(S){this.eventManager.fire({type:N.Advance,data:S})},z}();(function(z){z.Load="load",z.LoadError="loaderror",z.Play="play",z.Pause="pause",z.Stop="stop",z.Loop="loop",z.Draw="draw",z.Advance="advance",z.StateChange="statechange",z.RiveEvent="riveevent",z.AudioStatusChange="audiostatuschange"})(N||(N={})),function(z){z.OneShot="oneshot",z.Loop="loop",z.PingPong="pingpong"}(J||(J={}));var K,H=function(){function z(S){S===void 0&&(S=[]),this.listeners=S}return z.prototype.getListeners=function(S){return this.listeners.filter(function(O){return O.type===S})},z.prototype.add=function(S){this.listeners.includes(S)||this.listeners.push(S)},z.prototype.remove=function(S){for(var O=0;O<this.listeners.length;O++){var ee=this.listeners[O];if(ee.type===S.type&&ee.callback===S.callback){this.listeners.splice(O,1);break}}},z.prototype.removeAll=function(S){var O=this;S?this.listeners.filter(function(ee){return ee.type===S}).forEach(function(ee){return O.remove(ee)}):this.listeners.splice(0,this.listeners.length)},z.prototype.fire=function(S){this.getListeners(S.type).forEach(function(O){return O.callback(S)})},z}(),Y=function(){function z(S){this.eventManager=S,this.queue=[]}return z.prototype.add=function(S){this.queue.push(S)},z.prototype.process=function(){for(;this.queue.length>0;){var S=this.queue.shift();S!=null&&S.action&&S.action(),S!=null&&S.event&&this.eventManager.fire(S.event)}},z}();(function(z){z[z.AVAILABLE=0]="AVAILABLE",z[z.UNAVAILABLE=1]="UNAVAILABLE"})(K||(K={}));var V=function(z){function S(){var O=z!==null&&z.apply(this,arguments)||this;return O._started=!1,O._enabled=!1,O._status=K.UNAVAILABLE,O}return f(S,z),S.prototype.delay=function(O){return m(this,void 0,void 0,function(){return p(this,function(ee){return[2,new Promise(function(se){return setTimeout(se,O)})]})})},S.prototype.timeout=function(){return m(this,void 0,void 0,function(){return p(this,function(O){return[2,new Promise(function(ee,se){return setTimeout(se,50)})]})})},S.prototype.reportToListeners=function(){this.fire({type:N.AudioStatusChange}),this.removeAll()},S.prototype.enableAudio=function(){return m(this,void 0,void 0,function(){return p(this,function(O){return this._enabled||(this._enabled=!0,this._status=K.AVAILABLE,this.reportToListeners()),[2]})})},S.prototype.testAudio=function(){return m(this,void 0,void 0,function(){return p(this,function(O){switch(O.label){case 0:if(this._status!==K.UNAVAILABLE||this._audioContext===null)return[3,4];O.label=1;case 1:return O.trys.push([1,3,,4]),[4,Promise.race([this._audioContext.resume(),this.timeout()])];case 2:return O.sent(),this.enableAudio(),[3,4];case 3:return O.sent(),[3,4];case 4:return[2]}})})},S.prototype._establishAudio=function(){return m(this,void 0,void 0,function(){return p(this,function(O){switch(O.label){case 0:return this._started?[3,5]:(this._started=!0,typeof window<"u"?[3,1]:(this.enableAudio(),[3,5]));case 1:this._audioContext=new AudioContext,this.listenForUserAction(),O.label=2;case 2:return this._status!==K.UNAVAILABLE?[3,5]:[4,this.testAudio()];case 3:return O.sent(),[4,this.delay(1e3)];case 4:return O.sent(),[3,2];case 5:return[2]}})})},S.prototype.listenForUserAction=function(){var O=this;document.addEventListener("pointerdown",function(){return m(O,void 0,void 0,function(){return p(this,function(ee){return this.enableAudio(),[2]})})},{once:!0})},S.prototype.establishAudio=function(){return m(this,void 0,void 0,function(){return p(this,function(O){return this._establishAudio(),[2]})})},Object.defineProperty(S.prototype,"systemVolume",{get:function(){return this._status===K.UNAVAILABLE?(this.testAudio(),0):1},enumerable:!1,configurable:!0}),Object.defineProperty(S.prototype,"status",{get:function(){return this._status},enumerable:!1,configurable:!0}),S}(H),Z=new V,re=function(){function z(){}return z.prototype.observe=function(){},z.prototype.unobserve=function(){},z.prototype.disconnect=function(){},z}(),le=globalThis.ResizeObserver||re,oe=function(){function z(){var S=this;this._elementsMap=new Map,this._onObservedEntry=function(O){var ee=S._elementsMap.get(O.target);ee!==null?ee.onResize(O.target.clientWidth==0||O.target.clientHeight==0):S._resizeObserver.unobserve(O.target)},this._onObserved=function(O){O.forEach(S._onObservedEntry)},this._resizeObserver=new le(this._onObserved)}return z.prototype.add=function(S,O){var ee={onResize:O,element:S};return this._elementsMap.set(S,ee),this._resizeObserver.observe(S),ee},z.prototype.remove=function(S){this._resizeObserver.unobserve(S.element),this._elementsMap.delete(S.element)},z}(),he=new oe,ie=function(){function z(S){this.enableRiveAssetCDN=!0,this.referenceCount=0,this.destroyed=!1,this.src=S.src,this.buffer=S.buffer,S.assetLoader&&(this.assetLoader=S.assetLoader),this.enableRiveAssetCDN=typeof S.enableRiveAssetCDN!="boolean"||S.enableRiveAssetCDN,this.eventManager=new H,S.onLoad&&this.on(N.Load,S.onLoad),S.onLoadError&&this.on(N.LoadError,S.onLoadError)}return z.prototype.initData=function(){return m(this,void 0,void 0,function(){var S,O,ee,se;return p(this,function(ve){switch(ve.label){case 0:return this.src?(S=this,[4,tt(this.src)]):[3,2];case 1:S.buffer=ve.sent(),ve.label=2;case 2:return this.destroyed?[2]:(this.assetLoader&&(O=new this.runtime.CustomFileAssetLoader({loadContents:this.assetLoader})),ee=this,[4,this.runtime.load(new Uint8Array(this.buffer),O,this.enableRiveAssetCDN)]);case 3:if(ee.file=ve.sent(),this.destroyed)return(se=this.file)===null||se===void 0||se.delete(),this.file=null,[2];if(this.file===null)throw this.eventManager.fire({type:N.LoadError,data:null}),new Error(z.fileLoadErrorMessage);return this.eventManager.fire({type:N.Load,data:this}),[2]}})})},z.prototype.init=function(){return m(this,void 0,void 0,function(){var S;return p(this,function(O){switch(O.label){case 0:if(!this.src&&!this.buffer)throw new Error(z.missingErrorMessage);return S=this,[4,T.awaitInstance()];case 1:return S.runtime=O.sent(),this.destroyed?[2]:[4,this.initData()];case 2:return O.sent(),[2]}})})},z.prototype.on=function(S,O){this.eventManager.add({type:S,callback:O})},z.prototype.off=function(S,O){this.eventManager.remove({type:S,callback:O})},z.prototype.cleanup=function(){var S;this.referenceCount-=1,this.referenceCount<=0&&(this.removeAllRiveEventListeners(),(S=this.file)===null||S===void 0||S.delete(),this.file=null,this.destroyed=!0)},z.prototype.removeAllRiveEventListeners=function(S){this.eventManager.removeAll(S)},z.prototype.getInstance=function(){if(this.file!==null)return this.referenceCount+=1,this.file},z.missingErrorMessage="Rive source file or data buffer required",z.fileLoadErrorMessage="The file failed to load",z}(),xe=function(){function z(S){var O,ee=this;this.loaded=!1,this.destroyed=!1,this._observed=null,this.readyForPlaying=!1,this.artboard=null,this.eventCleanup=null,this.shouldDisableRiveListeners=!1,this.automaticallyHandleEvents=!1,this.enableRiveAssetCDN=!0,this._volume=1,this._artboardWidth=void 0,this._artboardHeight=void 0,this._devicePixelRatioUsed=1,this._hasZeroSize=!1,this._audioEventListener=null,this._boundDraw=null,this.durations=[],this.frameTimes=[],this.frameCount=0,this.isTouchScrollEnabled=!1,this.onCanvasResize=function(se){var ve=ee._hasZeroSize!==se;ee._hasZeroSize=se,se?ee._layout.maxX&&ee._layout.maxY||ee.resizeToCanvas():ve&&ee.resizeDrawingSurfaceToCanvas()},this.renderSecondTimer=0,this._boundDraw=this.draw.bind(this),this.canvas=S.canvas,S.canvas.constructor===HTMLCanvasElement&&(this._observed=he.add(this.canvas,this.onCanvasResize)),this.src=S.src,this.buffer=S.buffer,this.riveFile=S.riveFile,this.layout=(O=S.layout)!==null&&O!==void 0?O:new C,this.shouldDisableRiveListeners=!!S.shouldDisableRiveListeners,this.isTouchScrollEnabled=!!S.isTouchScrollEnabled,this.automaticallyHandleEvents=!!S.automaticallyHandleEvents,this.enableRiveAssetCDN=S.enableRiveAssetCDN===void 0||S.enableRiveAssetCDN,this.eventManager=new H,S.onLoad&&this.on(N.Load,S.onLoad),S.onLoadError&&this.on(N.LoadError,S.onLoadError),S.onPlay&&this.on(N.Play,S.onPlay),S.onPause&&this.on(N.Pause,S.onPause),S.onStop&&this.on(N.Stop,S.onStop),S.onLoop&&this.on(N.Loop,S.onLoop),S.onStateChange&&this.on(N.StateChange,S.onStateChange),S.onAdvance&&this.on(N.Advance,S.onAdvance),S.onload&&!S.onLoad&&this.on(N.Load,S.onload),S.onloaderror&&!S.onLoadError&&this.on(N.LoadError,S.onloaderror),S.onplay&&!S.onPlay&&this.on(N.Play,S.onplay),S.onpause&&!S.onPause&&this.on(N.Pause,S.onpause),S.onstop&&!S.onStop&&this.on(N.Stop,S.onstop),S.onloop&&!S.onLoop&&this.on(N.Loop,S.onloop),S.onstatechange&&!S.onStateChange&&this.on(N.StateChange,S.onstatechange),S.assetLoader&&(this.assetLoader=S.assetLoader),this.taskQueue=new Y(this.eventManager),this.init({src:this.src,buffer:this.buffer,riveFile:this.riveFile,autoplay:S.autoplay,animations:S.animations,stateMachines:S.stateMachines,artboard:S.artboard,useOffscreenRenderer:S.useOffscreenRenderer})}return z.new=function(S){return console.warn("This function is deprecated: please use `new Rive({})` instead"),new z(S)},z.prototype.onSystemAudioChanged=function(){this.volume=this._volume},z.prototype.init=function(S){var O=this,ee=S.src,se=S.buffer,ve=S.riveFile,Ce=S.animations,Oe=S.stateMachines,qe=S.artboard,st=S.autoplay,Ve=st!==void 0&&st,zt=S.useOffscreenRenderer,Qe=zt!==void 0&&zt;if(!this.destroyed){if(this.src=ee,this.buffer=se,this.riveFile=ve,!this.src&&!this.buffer&&!this.riveFile)throw new _(z.missingErrorMessage);var Lt=Ae(Ce),Ot=Ae(Oe);this.loaded=!1,this.readyForPlaying=!1,T.awaitInstance().then(function(Pt){O.destroyed||(O.runtime=Pt,O.removeRiveListeners(),O.deleteRiveRenderer(),O.renderer=O.runtime.makeRenderer(O.canvas,Qe),O.canvas.width||O.canvas.height||O.resizeDrawingSurfaceToCanvas(),O.initData(qe,Lt,Ot,Ve).then(function(){return O.setupRiveListeners()}).catch(function(Cn){console.error(Cn)}))}).catch(function(Pt){console.error(Pt)})}},z.prototype.setupRiveListeners=function(S){var O=this;if(this.eventCleanup&&this.eventCleanup(),!this.shouldDisableRiveListeners){var ee=(this.animator.stateMachines||[]).filter(function(ve){return ve.playing&&O.runtime.hasListeners(ve.instance)}).map(function(ve){return ve.instance}),se=this.isTouchScrollEnabled;S&&"isTouchScrollEnabled"in S&&(se=S.isTouchScrollEnabled),this.eventCleanup=(0,u.registerTouchInteractions)({canvas:this.canvas,artboard:this.artboard,stateMachines:ee,renderer:this.renderer,rive:this.runtime,fit:this._layout.runtimeFit(this.runtime),alignment:this._layout.runtimeAlignment(this.runtime),isTouchScrollEnabled:se,layoutScaleFactor:this._layout.layoutScaleFactor})}},z.prototype.removeRiveListeners=function(){this.eventCleanup&&(this.eventCleanup(),this.eventCleanup=null)},z.prototype.initializeAudio=function(){var S,O=this;Z.status==K.UNAVAILABLE&&(!((S=this.artboard)===null||S===void 0)&&S.hasAudio)&&this._audioEventListener===null&&(this._audioEventListener={type:N.AudioStatusChange,callback:function(){return O.onSystemAudioChanged()}},Z.add(this._audioEventListener),Z.establishAudio())},z.prototype.initArtboardSize=function(){this.artboard&&(this._artboardWidth=this.artboard.width=this._artboardWidth||this.artboard.width,this._artboardHeight=this.artboard.height=this._artboardHeight||this.artboard.height)},z.prototype.initData=function(S,O,ee,se){return m(this,void 0,void 0,function(){var ve,Ce,Oe;return p(this,function(qe){switch(qe.label){case 0:return qe.trys.push([0,3,,4]),this.riveFile!=null?[3,2]:(this.riveFile=new ie({src:this.src,buffer:this.buffer,enableRiveAssetCDN:this.enableRiveAssetCDN,assetLoader:this.assetLoader}),[4,this.riveFile.init()]);case 1:qe.sent(),qe.label=2;case 2:if(!this.riveFile)throw new _(z.cleanupErrorMessage);return this.file=this.riveFile.getInstance(),this.initArtboard(S,O,ee,se),this.initArtboardSize(),this.initializeAudio(),this.loaded=!0,this.eventManager.fire({type:N.Load,data:(Oe=this.src)!==null&&Oe!==void 0?Oe:"buffer"}),this.readyForPlaying=!0,this.taskQueue.process(),this.drawFrame(),[2,Promise.resolve()];case 3:return ve=qe.sent(),Ce=(st=ve)&&st.isHandledError?st.message:"Problem loading file; may be corrupt!",console.warn(Ce),this.eventManager.fire({type:N.LoadError,data:Ce}),[2,Promise.reject(Ce)];case 4:return[2]}var st})})},z.prototype.initArtboard=function(S,O,ee,se){if(this.file){var ve,Ce=S?this.file.artboardByName(S):this.file.defaultArtboard();if(!Ce){var Oe="Invalid artboard name or no default artboard";return console.warn(Oe),void this.eventManager.fire({type:N.LoadError,data:Oe})}if(this.artboard=Ce,Ce.volume=this._volume*Z.systemVolume,this.artboard.animationCount()<1)throw Oe="Artboard has no animations",this.eventManager.fire({type:N.LoadError,data:Oe}),Oe;this.animator=new X(this.runtime,this.artboard,this.eventManager),O.length>0||ee.length>0?(ve=O.concat(ee),this.animator.initLinearAnimations(O,se),this.animator.initStateMachines(ee,se)):ve=[this.animator.atLeastOne(se,!1)],this.taskQueue.add({event:{type:se?N.Play:N.Pause,data:ve}})}},z.prototype.drawFrame=function(){var S;!((S=document==null?void 0:document.timeline)===null||S===void 0)&&S.currentTime?this.loaded&&this.artboard&&!this.frameRequestId&&this._boundDraw(document.timeline.currentTime):this.startRendering()},z.prototype.draw=function(S,O){this.frameRequestId=null;var ee=performance.now();this.lastRenderTime||(this.lastRenderTime=S),this.renderSecondTimer+=S-this.lastRenderTime,this.renderSecondTimer>5e3&&(this.renderSecondTimer=0,O==null||O());var se=(S-this.lastRenderTime)/1e3;this.lastRenderTime=S;for(var ve=0,Ce=this.animator.animations.filter(function(gn){return gn.playing||gn.needsScrub}).sort(function(gn){return gn.needsScrub?-1:1});ve<Ce.length;ve++){var Oe=Ce[ve];Oe.advance(se),Oe.instance.didLoop&&(Oe.loopCount+=1),Oe.apply(1)}for(var qe=0,st=this.animator.stateMachines.filter(function(gn){return gn.playing});qe<st.length;qe++){var Ve=st[qe],zt=Ve.reportedEventCount();if(zt)for(var Qe=0;Qe<zt;Qe++){var Lt=Ve.reportedEventAt(Qe);if(Lt)if(Lt.type===E.OpenUrl){if(this.eventManager.fire({type:N.RiveEvent,data:Lt}),this.automaticallyHandleEvents){var Ot=document.createElement("a"),Pt=Lt,Cn=Pt.url,An=Pt.target,Bt=(0,u.sanitizeUrl)(Cn);Cn&&Ot.setAttribute("href",Bt),An&&Ot.setAttribute("target",An),Bt&&Bt!==u.BLANK_URL&&Ot.click()}}else this.eventManager.fire({type:N.RiveEvent,data:Lt})}Ve.advanceAndApply(se)}this.animator.stateMachines.length==0&&this.artboard.advance(se);var $n=this.renderer;$n.clear(),$n.save(),this.alignRenderer(),this._hasZeroSize||this.artboard.draw($n),$n.restore(),$n.flush(),this.animator.handleLooping(),this.animator.handleStateChanges(),this.animator.handleAdvancing(se),this.frameCount++;var Gt=performance.now();for(this.frameTimes.push(Gt),this.durations.push(Gt-ee);this.frameTimes[0]<=Gt-1e3;)this.frameTimes.shift(),this.durations.shift();this.animator.isPlaying?this.startRendering():(this.animator.isPaused||this.animator.isStopped)&&(this.lastRenderTime=0)},z.prototype.alignRenderer=function(){var S=this,O=S.renderer,ee=S.runtime,se=S._layout,ve=S.artboard;O.align(se.runtimeFit(ee),se.runtimeAlignment(ee),{minX:se.minX,minY:se.minY,maxX:se.maxX,maxY:se.maxY},ve.bounds,this._devicePixelRatioUsed*se.layoutScaleFactor)},Object.defineProperty(z.prototype,"fps",{get:function(){return this.durations.length},enumerable:!1,configurable:!0}),Object.defineProperty(z.prototype,"frameTime",{get:function(){return this.durations.length===0?0:(this.durations.reduce(function(S,O){return S+O},0)/this.durations.length).toFixed(4)},enumerable:!1,configurable:!0}),z.prototype.cleanup=function(){var S;this.destroyed=!0,this.stopRendering(),this.cleanupInstances(),this._observed!==null&&he.remove(this._observed),this.removeRiveListeners(),this.file&&((S=this.riveFile)===null||S===void 0||S.cleanup(),this.file=null),this.riveFile=null,this.deleteRiveRenderer(),this._audioEventListener!==null&&(Z.remove(this._audioEventListener),this._audioEventListener=null)},z.prototype.deleteRiveRenderer=function(){var S;(S=this.renderer)===null||S===void 0||S.delete(),this.renderer=null},z.prototype.cleanupInstances=function(){this.eventCleanup!==null&&this.eventCleanup(),this.stop(),this.artboard&&(this.artboard.delete(),this.artboard=null)},z.prototype.retrieveTextRun=function(S){var O;if(S)if(this.artboard){var ee=this.artboard.textRun(S);if(ee)return ee;console.warn("Could not access a text run with name '".concat(S,"' in the '").concat((O=this.artboard)===null||O===void 0?void 0:O.name,"' Artboard. Note that you must rename a text run node in the Rive editor to make it queryable at runtime."))}else console.warn("Tried to access text run, but the Artboard is null");else console.warn("No text run name provided")},z.prototype.getTextRunValue=function(S){var O=this.retrieveTextRun(S);return O?O.text:void 0},z.prototype.setTextRunValue=function(S,O){var ee=this.retrieveTextRun(S);ee&&(ee.text=O)},z.prototype.play=function(S,O){var ee=this;S=Ae(S),this.readyForPlaying?(this.animator.play(S),this.eventCleanup&&this.eventCleanup(),this.setupRiveListeners(),this.startRendering()):this.taskQueue.add({action:function(){return ee.play(S,O)}})},z.prototype.pause=function(S){var O=this;S=Ae(S),this.readyForPlaying?(this.eventCleanup&&this.eventCleanup(),this.animator.pause(S)):this.taskQueue.add({action:function(){return O.pause(S)}})},z.prototype.scrub=function(S,O){var ee=this;S=Ae(S),this.readyForPlaying?(this.animator.scrub(S,O||0),this.drawFrame()):this.taskQueue.add({action:function(){return ee.scrub(S,O)}})},z.prototype.stop=function(S){var O=this;S=Ae(S),this.readyForPlaying?(this.animator&&this.animator.stop(S),this.eventCleanup&&this.eventCleanup()):this.taskQueue.add({action:function(){return O.stop(S)}})},z.prototype.reset=function(S){var O,ee=S==null?void 0:S.artboard,se=Ae(S==null?void 0:S.animations),ve=Ae(S==null?void 0:S.stateMachines),Ce=(O=S==null?void 0:S.autoplay)!==null&&O!==void 0&&O;this.cleanupInstances(),this.initArtboard(ee,se,ve,Ce),this.taskQueue.process()},z.prototype.load=function(S){this.file=null,this.stop(),this.init(S)},Object.defineProperty(z.prototype,"layout",{get:function(){return this._layout},set:function(S){this._layout=S,S.maxX&&S.maxY||this.resizeToCanvas(),this.loaded&&!this.animator.isPlaying&&this.drawFrame()},enumerable:!1,configurable:!0}),z.prototype.resizeToCanvas=function(){this._layout=this.layout.copyWith({minX:0,minY:0,maxX:this.canvas.width,maxY:this.canvas.height})},z.prototype.resizeDrawingSurfaceToCanvas=function(S){if(this.canvas instanceof HTMLCanvasElement&&window){var O=this.canvas.getBoundingClientRect(),ee=O.width,se=O.height,ve=S||window.devicePixelRatio||1;if(this.devicePixelRatioUsed=ve,this.canvas.width=ve*ee,this.canvas.height=ve*se,this.resizeToCanvas(),this.drawFrame(),this.layout.fit===r.Layout){var Ce=this._layout.layoutScaleFactor;this.artboard.width=ee/Ce,this.artboard.height=se/Ce}}},Object.defineProperty(z.prototype,"source",{get:function(){return this.src},enumerable:!1,configurable:!0}),Object.defineProperty(z.prototype,"activeArtboard",{get:function(){return this.artboard?this.artboard.name:""},enumerable:!1,configurable:!0}),Object.defineProperty(z.prototype,"animationNames",{get:function(){if(!this.loaded||!this.artboard)return[];for(var S=[],O=0;O<this.artboard.animationCount();O++)S.push(this.artboard.animationByIndex(O).name);return S},enumerable:!1,configurable:!0}),Object.defineProperty(z.prototype,"stateMachineNames",{get:function(){if(!this.loaded||!this.artboard)return[];for(var S=[],O=0;O<this.artboard.stateMachineCount();O++)S.push(this.artboard.stateMachineByIndex(O).name);return S},enumerable:!1,configurable:!0}),z.prototype.stateMachineInputs=function(S){if(this.loaded){var O=this.animator.stateMachines.find(function(ee){return ee.name===S});return O==null?void 0:O.inputs}},z.prototype.retrieveInputAtPath=function(S,O){if(S)if(this.artboard){var ee=this.artboard.inputByPath(S,O);if(ee)return ee;console.warn("Could not access an input with name: '".concat(S,"', at path:'").concat(O,"'"))}else console.warn("Tried to access input: '".concat(S,"', at path: '").concat(O,"', but the Artboard is null"));else console.warn("No input name provided for path '".concat(O,"'"))},z.prototype.setBooleanStateAtPath=function(S,O,ee){var se=this.retrieveInputAtPath(S,ee);se&&(se.type===M.Boolean?se.asBool().value=O:console.warn("Input with name: '".concat(S,"', at path:'").concat(ee,"' is not a boolean")))},z.prototype.setNumberStateAtPath=function(S,O,ee){var se=this.retrieveInputAtPath(S,ee);se&&(se.type===M.Number?se.asNumber().value=O:console.warn("Input with name: '".concat(S,"', at path:'").concat(ee,"' is not a number")))},z.prototype.fireStateAtPath=function(S,O){var ee=this.retrieveInputAtPath(S,O);ee&&(ee.type===M.Trigger?ee.asTrigger().fire():console.warn("Input with name: '".concat(S,"', at path:'").concat(O,"' is not a trigger")))},z.prototype.retrieveTextAtPath=function(S,O){if(S)if(O)if(this.artboard){var ee=this.artboard.textByPath(S,O);if(ee)return ee;console.warn("Could not access text with name: '".concat(S,"', at path:'").concat(O,"'"))}else console.warn("Tried to access text: '".concat(S,"', at path: '").concat(O,"', but the Artboard is null"));else console.warn("No path provided for text '".concat(S,"'"));else console.warn("No text name provided for path '".concat(O,"'"))},z.prototype.getTextRunValueAtPath=function(S,O){var ee=this.retrieveTextAtPath(S,O);if(ee)return ee.text;console.warn("Could not get text with name: '".concat(S,"', at path:'").concat(O,"'"))},z.prototype.setTextRunValueAtPath=function(S,O,ee){var se=this.retrieveTextAtPath(S,ee);se?se.text=O:console.warn("Could not set text with name: '".concat(S,"', at path:'").concat(ee,"'"))},Object.defineProperty(z.prototype,"playingStateMachineNames",{get:function(){return this.loaded?this.animator.stateMachines.filter(function(S){return S.playing}).map(function(S){return S.name}):[]},enumerable:!1,configurable:!0}),Object.defineProperty(z.prototype,"playingAnimationNames",{get:function(){return this.loaded?this.animator.animations.filter(function(S){return S.playing}).map(function(S){return S.name}):[]},enumerable:!1,configurable:!0}),Object.defineProperty(z.prototype,"pausedAnimationNames",{get:function(){return this.loaded?this.animator.animations.filter(function(S){return!S.playing}).map(function(S){return S.name}):[]},enumerable:!1,configurable:!0}),Object.defineProperty(z.prototype,"pausedStateMachineNames",{get:function(){return this.loaded?this.animator.stateMachines.filter(function(S){return!S.playing}).map(function(S){return S.name}):[]},enumerable:!1,configurable:!0}),Object.defineProperty(z.prototype,"isPlaying",{get:function(){return this.animator.isPlaying},enumerable:!1,configurable:!0}),Object.defineProperty(z.prototype,"isPaused",{get:function(){return this.animator.isPaused},enumerable:!1,configurable:!0}),Object.defineProperty(z.prototype,"isStopped",{get:function(){return this.animator.isStopped},enumerable:!1,configurable:!0}),Object.defineProperty(z.prototype,"bounds",{get:function(){return this.artboard?this.artboard.bounds:void 0},enumerable:!1,configurable:!0}),z.prototype.on=function(S,O){this.eventManager.add({type:S,callback:O})},z.prototype.off=function(S,O){this.eventManager.remove({type:S,callback:O})},z.prototype.unsubscribe=function(S,O){console.warn("This function is deprecated: please use `off()` instead."),this.off(S,O)},z.prototype.removeAllRiveEventListeners=function(S){this.eventManager.removeAll(S)},z.prototype.unsubscribeAll=function(S){console.warn("This function is deprecated: please use `removeAllRiveEventListeners()` instead."),this.removeAllRiveEventListeners(S)},z.prototype.stopRendering=function(){this.loaded&&this.frameRequestId&&(this.runtime.cancelAnimationFrame?this.runtime.cancelAnimationFrame(this.frameRequestId):cancelAnimationFrame(this.frameRequestId),this.frameRequestId=null)},z.prototype.startRendering=function(){this.loaded&&this.artboard&&!this.frameRequestId&&(this.runtime.requestAnimationFrame?this.frameRequestId=this.runtime.requestAnimationFrame(this._boundDraw):this.frameRequestId=requestAnimationFrame(this._boundDraw))},z.prototype.enableFPSCounter=function(S){this.runtime.enableFPSCounter(S)},z.prototype.disableFPSCounter=function(){this.runtime.disableFPSCounter()},Object.defineProperty(z.prototype,"contents",{get:function(){if(this.loaded){for(var S={artboards:[]},O=0;O<this.file.artboardCount();O++){for(var ee=this.file.artboardByIndex(O),se={name:ee.name,animations:[],stateMachines:[]},ve=0;ve<ee.animationCount();ve++){var Ce=ee.animationByIndex(ve);se.animations.push(Ce.name)}for(var Oe=0;Oe<ee.stateMachineCount();Oe++){for(var qe=ee.stateMachineByIndex(Oe),st=qe.name,Ve=new this.runtime.StateMachineInstance(qe,ee),zt=[],Qe=0;Qe<Ve.inputCount();Qe++){var Lt=Ve.input(Qe);zt.push({name:Lt.name,type:Lt.type})}se.stateMachines.push({name:st,inputs:zt})}S.artboards.push(se)}return S}},enumerable:!1,configurable:!0}),Object.defineProperty(z.prototype,"volume",{get:function(){return this.artboard&&this.artboard.volume!==this._volume&&(this._volume=this.artboard.volume),this._volume},set:function(S){this._volume=S,this.artboard&&(this.artboard.volume=S*Z.systemVolume)},enumerable:!1,configurable:!0}),Object.defineProperty(z.prototype,"artboardWidth",{get:function(){var S;return this.artboard?this.artboard.width:(S=this._artboardWidth)!==null&&S!==void 0?S:0},set:function(S){this._artboardWidth=S,this.artboard&&(this.artboard.width=S)},enumerable:!1,configurable:!0}),Object.defineProperty(z.prototype,"artboardHeight",{get:function(){var S;return this.artboard?this.artboard.height:(S=this._artboardHeight)!==null&&S!==void 0?S:0},set:function(S){this._artboardHeight=S,this.artboard&&(this.artboard.height=S)},enumerable:!1,configurable:!0}),z.prototype.resetArtboardSize=function(){this.artboard?(this.artboard.resetArtboardSize(),this._artboardWidth=this.artboard.width,this._artboardHeight=this.artboard.height):(this._artboardWidth=void 0,this._artboardHeight=void 0)},Object.defineProperty(z.prototype,"devicePixelRatioUsed",{get:function(){return this._devicePixelRatioUsed},set:function(S){this._devicePixelRatioUsed=S},enumerable:!1,configurable:!0}),z.missingErrorMessage="Rive source file or data buffer required",z.cleanupErrorMessage="Attempt to use file after calling cleanup.",z}(),tt=function(z){return m(void 0,void 0,void 0,function(){var S;return p(this,function(O){switch(O.label){case 0:return S=new Request(z),[4,fetch(S)];case 1:return[4,O.sent().arrayBuffer()];case 2:return[2,O.sent()]}})})},Ae=function(z){return typeof z=="string"?[z]:z instanceof Array?z:[]},He={EventManager:H,TaskQueueManager:Y},Dt=function(z){return new Promise(function(S){return T.getInstance(function(O){O.decodeAudio(z,S)})})},It=function(z){return new Promise(function(S){return T.getInstance(function(O){O.decodeImage(z,S)})})},un=function(z){return new Promise(function(S){return T.getInstance(function(O){O.decodeFont(z,S)})})}})(),t})();var G2=V2.exports=Gf();const zi=class zi{constructor(){$e(this,"memoryUpdates",Tt(null));$e(this,"clearTimeout")}notifyMemoryUpdated(){this.clearTimeout||(this.memoryUpdates.set({timestamp:Date.now()}),clearTimeout(this.clearTimeout),this.clearTimeout=void 0,this.clearTimeout=setTimeout(()=>{this.memoryUpdates.set(null),this.clearTimeout=void 0},zi.CLEAR_DELAY_MS))}subscribe(e){return this.memoryUpdates.subscribe(e)}};$e(zi,"CLEAR_DELAY_MS",1e4);let Ms=zi;const Yf=new Ms,Y2=""+new URL("memories-dark-DhQ4ghw7.riv",import.meta.url).href,Mc=""+new URL("memories-light-Cj0fATGz.riv",import.meta.url).href;function K2(i){let e,n,t;return{c(){e=L("span"),e.textContent="Augment Memories",A(e,"role","button"),A(e,"tabindex","0")},m(o,r){x(o,e,r),n||(t=[Le(e,"click",i[3]),Le(e,"keydown",i[4])],n=!0)},p:P,d(o){o&&b(e),n=!1,Qt(t)}}}function X2(i){let e,n;return e=new Ne({props:{content:"Information that Agent remembered from previous interactions (click to open)",$$slots:{default:[K2]},$$scope:{ctx:i}}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p(t,o){const r={};2048&o&&(r.$$scope={dirty:o,ctx:t}),e.$set(r)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function Z2(i){let e;return{c(){e=L("canvas"),A(e,"slot","leftIcon"),A(e,"width","32"),A(e,"height","32"),qn(e,"width","14px"),qn(e,"height","14px")},m(n,t){x(n,e,t),i[5](e)},p:P,d(n){n&&b(e),i[5](null)}}}function J2(i){let e,n;return e=new Uo({props:{$$slots:{leftIcon:[Z2],default:[X2]},$$scope:{ctx:i}}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p(t,[o]){const r={};2049&o&&(r.$$scope={dirty:o,ctx:t}),e.$set(r)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function Q2(i,e,n){let t;Te(i,Yf,u=>n(2,t=u));let o,r,s=Mc;function c(){r&&(r==null||r.cleanup(),n(1,r=void 0)),o&&!r&&n(1,r=new G2.Rive({src:s,canvas:o,autoplay:!1,onLoad:()=>{r==null||r.resizeDrawingSurfaceToCanvas(),r==null||r.play(),r==null||r.stop()}}))}function a(u){s=u===Hm.dark?Y2:Mc,c()}function l(){r==null||r.reset()}return ro(()=>{Bm(a),a(Um())}),jr(()=>{r==null||r.cleanup()}),i.$$.update=()=>{3&i.$$.dirty&&o&&!r&&c(),4&i.$$.dirty&&(t!=null&&t.timestamp)&&(r==null||r.reset(),r==null||r.play(),setTimeout(l,2500))},[o,r,t,function(u){vn.call(this,i,u)},function(u){vn.call(this,i,u)},function(u){et[u?"unshift":"push"](()=>{o=u,n(0,o)})}]}class ev extends ue{constructor(e){super(),de(this,e,Q2,J2,ce,{})}}function kc(i){let e,n,t,o,r,s,c,a;const l=[iv,rv,ov,nv,tv],u=[];function f(m,p){return 2&p&&(e=null),2&p&&(n=null),2&p&&(t=null),2&p&&(o=null),e==null&&(e=!!Ps(m[1])),e?0:(n==null&&(n=!!Ns(m[1])),n?1:(t==null&&(t=!!cf(m[1])),t?2:(o==null&&(o=!!lf(m[1])),o?3:4)))}return r=f(i,-1),s=u[r]=l[r](i),{c(){s.c(),c=me()},m(m,p){u[r].m(m,p),x(m,c,p),a=!0},p(m,p){let _=r;r=f(m,p),r===_?u[r].p(m,p):(j(),$(u[_],1,1,()=>{u[_]=null}),q(),s=u[r],s?s.p(m,p):(s=u[r]=l[r](m),s.c()),d(s,1),s.m(c.parentNode,c))},i(m){a||(d(s),a=!0)},o(m){$(s),a=!1},d(m){m&&b(c),u[r].d(m)}}}function tv(i){let e,n,t,o,r,s;const c=[cv,av,sv],a=[];function l(u,f){return u[3]?0:u[2].iconName?1:2}return n=l(i),t=a[n]=c[n](i),{c(){e=L("div"),t.c(),A(e,"class","pulse-chip-container svelte-s9omdo")},m(u,f){x(u,e,f),a[n].m(e,null),o=!0,r||(s=Ss(zp.call(null,e,i[6])),r=!0)},p(u,f){let m=n;n=l(u),n===m?a[n].p(u,f):(j(),$(a[m],1,1,()=>{a[m]=null}),q(),t=a[n],t?t.p(u,f):(t=a[n]=c[n](u),t.c()),d(t,1),t.m(e,null))},i(u){o||(d(t),o=!0)},o(u){$(t),o=!1},d(u){u&&b(e),a[n].d(),r=!1,s()}}}function nv(i){let e,n;return e=new ev({}),e.$on("click",function(){Nt(i[2].onClick)&&i[2].onClick.apply(this,arguments)}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p(t,o){i=t},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function ov(i){let e,n;return e=new y2({props:{item:i[1],chatModel:i[0]}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p(t,o){const r={};2&o&&(r.item=t[1]),1&o&&(r.chatModel=t[0]),e.$set(r)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function rv(i){let e,n;return e=new W2({props:{item:i[1]}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p(t,o){const r={};2&o&&(r.item=t[1]),e.$set(r)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function iv(i){let e,n;return e=new R2({props:{originalCode:i[1].selection.originalCode,onRemove:i[7]}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p(t,o){const r={};2&o&&(r.originalCode=t[1].selection.originalCode),e.$set(r)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function sv(i){let e,n;return e=new Uo({props:{removeBtn:{title:i[2].removeTitle,onRemove:i[7]},showWarning:i[2].showWarning,$$slots:{default:[dv]},$$scope:{ctx:i}}}),e.$on("click",function(){Nt(i[2].onClick)&&i[2].onClick.apply(this,arguments)}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p(t,o){i=t;const r={};4&o&&(r.removeBtn={title:i[2].removeTitle,onRemove:i[7]}),4&o&&(r.showWarning=i[2].showWarning),4102&o&&(r.$$scope={dirty:o,ctx:i}),e.$set(r)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function av(i){let e,n;return e=new Uo({props:{removeBtn:{title:i[2].removeTitle,onRemove:i[7]},showWarning:i[2].showWarning,$$slots:{leftIcon:[pv],default:[mv]},$$scope:{ctx:i}}}),e.$on("click",function(){Nt(i[2].onClick)&&i[2].onClick.apply(this,arguments)}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p(t,o){i=t;const r={};4&o&&(r.removeBtn={title:i[2].removeTitle,onRemove:i[7]}),4&o&&(r.showWarning=i[2].showWarning),4102&o&&(r.$$scope={dirty:o,ctx:i}),e.$set(r)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function cv(i){let e,n;return e=new Uo({props:{removeBtn:{title:i[2].removeTitle,onRemove:i[7]},showWarning:i[2].showWarning,$$slots:{leftButtons:[wv],default:[vv]},$$scope:{ctx:i}}}),e.$on("click",function(){Nt(i[2].onClick)&&i[2].onClick.apply(this,arguments)}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p(t,o){i=t;const r={};4&o&&(r.removeBtn={title:i[2].removeTitle,onRemove:i[7]}),4&o&&(r.showWarning=i[2].showWarning),4118&o&&(r.$$scope={dirty:o,ctx:i}),e.$set(r)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function lv(i){let e,n;return e=new _n({props:{nopath:!0,filepath:i[2].filepath}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p(t,o){const r={};4&o&&(r.filepath=t[2].filepath),e.$set(r)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function uv(i){let e,n;return e=new Kr({props:{option:i[1],slot:"content"}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p(t,o){const r={};2&o&&(r.option=t[1]),e.$set(r)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function dv(i){let e,n;return e=new Ne({props:{triggerOn:[Je.Hover],$$slots:{content:[uv],default:[lv]},$$scope:{ctx:i}}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p(t,o){const r={};4102&o&&(r.$$scope={dirty:o,ctx:t}),e.$set(r)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function $v(i){let e,n;return e=new _n({props:{nopath:!0,filepath:i[2].filepath}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p(t,o){const r={};4&o&&(r.filepath=t[2].filepath),e.$set(r)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function fv(i){let e,n;return e=new Kr({props:{option:i[1],slot:"content"}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p(t,o){const r={};2&o&&(r.option=t[1]),e.$set(r)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function mv(i){let e,n;return e=new Ne({props:{triggerOn:[Je.Hover],$$slots:{content:[fv],default:[$v]},$$scope:{ctx:i}}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p(t,o){const r={};4102&o&&(r.$$scope={dirty:o,ctx:t}),e.$set(r)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function pv(i){let e,n;return e=new bh({props:{icon:i[2].iconName,slot:"leftIcon"}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p(t,o){const r={};4&o&&(r.icon=t[2].iconName),e.$set(r)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function gv(i){let e,n;return e=new _n({props:{nopath:!0,filepath:i[2].filepath}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p(t,o){const r={};4&o&&(r.filepath=t[2].filepath),e.$set(r)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function hv(i){let e,n;return e=new Kr({props:{option:i[1],slot:"content"}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p(t,o){const r={};2&o&&(r.option=t[1]),e.$set(r)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function vv(i){let e,n;return e=new Ne({props:{triggerOn:[Je.Hover],$$slots:{content:[hv],default:[gv]},$$scope:{ctx:i}}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p(t,o){const r={};4102&o&&(r.$$scope={dirty:o,ctx:t}),e.$set(r)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function wv(i){let e,n;const t=[i[4],{slot:"leftButtons"}];let o={};for(let r=0;r<t.length;r+=1)o=Me(o,t[r]);return e=new rh({props:o}),{c(){v(e.$$.fragment)},m(r,s){w(e,r,s),n=!0},p(r,s){const c=16&s?Mt(t,[fo(r[4]),t[1]]):{};e.$set(c)},i(r){n||(d(e.$$.fragment,r),n=!0)},o(r){$(e.$$.fragment,r),n=!1},d(r){y(e,r)}}}function yv(i){let e,n,t=i[1]&&kc(i);return{c(){t&&t.c(),e=me()},m(o,r){t&&t.m(o,r),x(o,e,r),n=!0},p(o,[r]){o[1]?t?(t.p(o,r),2&r&&d(t,1)):(t=kc(o),t.c(),d(t,1),t.m(e.parentNode,e)):t&&(j(),$(t,1,1,()=>{t=null}),q())},i(o){n||(d(t),n=!0)},o(o){$(t),n=!1},d(o){o&&b(e),t&&t.d(o)}}}function bv(i,e,n){let t,o,r,s,c,a,l=P,u=P,f=()=>(u(),u=lt(m,C=>n(10,a=C)),m);i.$$.on_destroy.push(()=>l()),i.$$.on_destroy.push(()=>u());let{chatModel:m}=e;f();let{item:p}=e,_=!1;const M=new Op({onHoverStart:()=>{n(8,_=!0)},onHoverEnd:()=>{n(8,_=!1)},hoverTriggerDuration:0});return i.$$set=C=>{"chatModel"in C&&f(n(0,m=C.chatModel)),"item"in C&&n(1,p=C.item)},i.$$.update=()=>{1024&i.$$.dirty&&(n(5,t=a==null?void 0:a.specialContextInputModel),l(),l=lt(t,C=>n(9,c=C))),2&i.$$.dirty&&n(2,o=(C=>{const T={onClick:void 0,removeTitle:"",filepath:"",pinnable:!0,iconName:void 0,showWarning:!1};if(Is(C))return{...T,onClick:()=>{m==null||m.extensionClient.openFile(C.file)},removeTitle:"Remove file from context",filepath:C.file.pathName};if(Ls(C))return{...T,onClick:()=>{m==null||m.extensionClient.openFile(C.recentFile)},removeTitle:"Remove file from context",filepath:C.recentFile.pathName};if(Rs(C))return{...T,onClick:()=>{m==null||m.extensionClient.openFile(C.folder)},removeTitle:"Remove folder from context",filepath:C.folder.pathName,iconName:"folder-opened"};if(Ds(C))return{...T,removeTitle:"Remove external source from context",filepath:C.label,iconName:"book"};if(Wi(C))return{...T,removeTitle:"Remove source folder from context",filepath:C.sourceFolder.folderRoot,iconName:"root-folder",pinnable:!1,showWarning:C.showWarning};if(cf(C))return{...T,iconName:"root-folder",pinnable:!1};if(Fs(C)){const E=`${ms}/${ps}/${C.rule.path}`;return{...T,onClick:()=>{m==null||m.extensionClient.openFile({repoRoot:"",pathName:E})},removeTitle:"Remove rule from context",filepath:E,iconName:"rule"}}return lf(C)?{...T,onClick:()=>{const E=m==null?void 0:m.flags.agentMemoriesFilePathName;m!=null&&m.currentConversationId&&m.extensionClient.reportAgentSessionEvent({eventName:Mo.openedMemoriesFile,conversationId:m.currentConversationId,eventData:{memoriesFileOpenData:{memoriesPathUndefined:!E}}}),m==null||m.extensionClient.openMemoriesFile()},pinnable:!1}:T})(p)),514&i.$$.dirty&&n(4,r={title:p.pinned?"Unpin":"Pin to context",onPin:()=>c==null?void 0:c.togglePinned(p),isPinned:p.pinned}),262&i.$$.dirty&&n(3,s=o.pinnable&&(_||p.pinned))},[m,p,o,s,r,t,M,()=>{c==null||c.markInactive(p),c==null||c.unpin(p)},_,c,a]}class xv extends ue{constructor(e){super(),de(this,e,bv,yv,ce,{chatModel:0,item:1})}}function Sc(i,e,n){const t=i.slice();return t[4]=e[n],t}function Tc(i){let e,n;return e=new xv({props:{item:i[4],chatModel:i[0]}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p(t,o){const r={};2&o&&(r.item=t[4]),1&o&&(r.chatModel=t[0]),e.$set(r)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function _v(i){let e,n,t,o=at(i[1]),r=[];for(let c=0;c<o.length;c+=1)r[c]=Tc(Sc(i,o,c));const s=c=>$(r[c],1,1,()=>{r[c]=null});return{c(){e=L("div"),n=L("div");for(let c=0;c<r.length;c+=1)r[c].c();A(n,"class","c-action-bar-context-container svelte-1wj2viq"),A(e,"class","c-action-bar-context svelte-1wj2viq")},m(c,a){x(c,e,a),F(e,n);for(let l=0;l<r.length;l+=1)r[l]&&r[l].m(n,null);t=!0},p(c,[a]){if(3&a){let l;for(o=at(c[1]),l=0;l<o.length;l+=1){const u=Sc(c,o,l);r[l]?(r[l].p(u,a),d(r[l],1)):(r[l]=Tc(u),r[l].c(),d(r[l],1),r[l].m(n,null))}for(j(),l=o.length;l<r.length;l+=1)s(l);q()}},i(c){if(!t){for(let a=0;a<o.length;a+=1)d(r[a]);t=!0}},o(c){r=r.filter(Boolean);for(let a=0;a<r.length;a+=1)$(r[a]);t=!1},d(c){c&&b(e),pn(r,c)}}}function Cv(i,e,n){let t,o,r=P;i.$$.on_destroy.push(()=>r());let{chatModel:s}=e,c=[];return i.$$set=a=>{"chatModel"in a&&n(0,s=a.chatModel)},i.$$.update=()=>{if(1&i.$$.dirty&&(n(2,t=s.specialContextInputModel),r(),r=lt(t,a=>n(3,o=a))),8&i.$$.dirty){const a=o.recentActiveItems,l=[],u=a.filter(f=>!Wi(f)||(l.push(f),!1));l.length>1?(u.push({id:"sourceFoldersGroup",label:"Repos",status:ap.active,sourceFolderGroup:l.sort((f,m)=>{const p=ws(f.sourceFolder.folderRoot),_=ws(m.sourceFolder.folderRoot);return p.localeCompare(_)}),referenceCount:1}),n(1,c=u.reverse())):n(1,c=a.reverse())}},[s,c,t,o]}class Av extends ue{constructor(e){super(),de(this,e,Cv,_v,ce,{chatModel:0})}}const Mv=i=>({}),Ec=i=>({}),kv=i=>({}),Ic=i=>({});function Sv(i){let e,n,t,o,r;const s=i[1].leftAlign,c=Ye(s,i,i[0],Ic),a=i[1].rightAlign,l=Ye(a,i,i[0],Ec);return{c(){e=L("div"),n=L("div"),c&&c.c(),t=B(),o=L("div"),l&&l.c(),A(n,"class","c-input-action-bar__left-align"),A(o,"class","c-input-action-bar__right-align"),A(e,"class","c-input-action-bar svelte-zhy9ha")},m(u,f){x(u,e,f),F(e,n),c&&c.m(n,null),F(e,t),F(e,o),l&&l.m(o,null),r=!0},p(u,[f]){c&&c.p&&(!r||1&f)&&Ke(c,s,u,u[0],r?Ze(s,u[0],f,kv):Xe(u[0]),Ic),l&&l.p&&(!r||1&f)&&Ke(l,a,u,u[0],r?Ze(a,u[0],f,Mv):Xe(u[0]),Ec)},i(u){r||(d(c,u),d(l,u),r=!0)},o(u){$(c,u),$(l,u),r=!1},d(u){u&&b(e),c&&c.d(u),l&&l.d(u)}}}function Tv(i,e,n){let{$$slots:t={},$$scope:o}=e;return i.$$set=r=>{"$$scope"in r&&n(0,o=r.$$scope)},[o,t]}const Ev=i=>({}),Lc=i=>({closeDropdown:i[11]}),Iv=i=>({}),Rc=i=>({}),Lv=i=>({}),Dc=i=>({}),Rv=i=>({dropdownIconSize:1024&i[0],variant:2&i[0],color:4&i[0],disabled:16384&i[0],radius:8&i[0]}),Nc=i=>({dropdownButtonDataAttr:Vv,dropdownIconSize:i[10],variant:i[1],color:i[2],disabled:i[14],radius:i[3]}),Dv=i=>({}),Pc=i=>({slot:"iconLeft"}),Nv=i=>({size:1&i[0],variant:2&i[0],color:4&i[0],radius:8&i[0],disabled:32768&i[0],highContrast:16&i[0]}),Fc=i=>({mainButtonDataAttr:Wv,size:i[0],variant:i[1],color:i[2],radius:i[3],disabled:i[15],highContrast:i[4]});function Pv(i){let e;const n=i[26].default,t=Ye(n,i,i[37],null);return{c(){t&&t.c()},m(o,r){t&&t.m(o,r),e=!0},p(o,r){t&&t.p&&(!e||64&r[1])&&Ke(t,n,o,o[37],e?Ze(n,o[37],r,null):Xe(o[37]),null)},i(o){e||(d(t,o),e=!0)},o(o){$(t,o),e=!1},d(o){t&&t.d(o)}}}function Fv(i){let e;const n=i[26].iconLeft,t=Ye(n,i,i[37],Pc);return{c(){t&&t.c()},m(o,r){t&&t.m(o,r),e=!0},p(o,r){t&&t.p&&(!e||64&r[1])&&Ke(t,n,o,o[37],e?Ze(n,o[37],r,Dv):Xe(o[37]),Pc)},i(o){e||(d(t,o),e=!0)},o(o){$(t,o),e=!1},d(o){t&&t.d(o)}}}function Oc(i){let e,n,t;return n=new Hs({props:{size:4,orientation:"vertical"}}),{c(){e=L("div"),v(n.$$.fragment),A(e,"class","c-split-button__separator svelte-1tmsqjt")},m(o,r){x(o,e,r),w(n,e,null),t=!0},i(o){t||(d(n.$$.fragment,o),t=!0)},o(o){$(n.$$.fragment,o),t=!1},d(o){o&&b(e),y(n)}}}function zc(i){let e,n,t={onOpenChange:i[16],$$slots:{default:[jv]},$$scope:{ctx:i}};return e=new we.Root({props:t}),i[36](e),{c(){v(e.$$.fragment)},m(o,r){w(e,o,r),n=!0},p(o,r){const s={};59278&r[0]|64&r[1]&&(s.$$scope={dirty:r,ctx:o}),e.$set(s)},i(o){n||(d(e.$$.fragment,o),n=!0)},o(o){$(e.$$.fragment,o),n=!1},d(o){i[36](null),y(e,o)}}}function Ov(i){let e;const n=i[26]["custom-dropdown-icon"],t=Ye(n,i,i[37],Rc);return{c(){t&&t.c()},m(o,r){t&&t.m(o,r),e=!0},p(o,r){t&&t.p&&(!e||64&r[1])&&Ke(t,n,o,o[37],e?Ze(n,o[37],r,Iv):Xe(o[37]),Rc)},i(o){e||(d(t,o),e=!0)},o(o){$(t,o),e=!1},d(o){t&&t.d(o)}}}function zv(i){let e,n;return e=new Oo({}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p:P,i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function Bv(i){let e;const n=i[26]["dropdown-icon"],t=Ye(n,i,i[37],Dc),o=t||function(r){let s,c,a,l;const u=[zv,Ov],f=[];function m(p,_){return p[9]==="chevron"?0:1}return s=m(r),c=f[s]=u[s](r),{c(){c.c(),a=me()},m(p,_){f[s].m(p,_),x(p,a,_),l=!0},p(p,_){let M=s;s=m(p),s===M?f[s].p(p,_):(j(),$(f[M],1,1,()=>{f[M]=null}),q(),c=f[s],c?c.p(p,_):(c=f[s]=u[s](p),c.c()),d(c,1),c.m(a.parentNode,a))},i(p){l||(d(c),l=!0)},o(p){$(c),l=!1},d(p){p&&b(a),f[s].d(p)}}}(i);return{c(){o&&o.c()},m(r,s){o&&o.m(r,s),e=!0},p(r,s){t?t.p&&(!e||64&s[1])&&Ke(t,n,r,r[37],e?Ze(n,r[37],s,Lv):Xe(r[37]),Dc):o&&o.p&&(!e||512&s[0]|64&s[1])&&o.p(r,e?s:[-1,-1])},i(r){e||(d(o,r),e=!0)},o(r){$(o,r),e=!1},d(r){o&&o.d(r)}}}function Uv(i){let e;const n=i[26]["dropdown-trigger"],t=Ye(n,i,i[37],Nc),o=t||function(r){let s,c;return s=new dt({props:{size:r[10],variant:r[15]?"soft":r[1],color:r[2],disabled:r[14],radius:r[3],"data-split-button-dropdown":"true",$$slots:{default:[Bv]},$$scope:{ctx:r}}}),{c(){v(s.$$.fragment)},m(a,l){w(s,a,l),c=!0},p(a,l){const u={};1024&l[0]&&(u.size=a[10]),32770&l[0]&&(u.variant=a[15]?"soft":a[1]),4&l[0]&&(u.color=a[2]),16384&l[0]&&(u.disabled=a[14]),8&l[0]&&(u.radius=a[3]),512&l[0]|64&l[1]&&(u.$$scope={dirty:l,ctx:a}),s.$set(u)},i(a){c||(d(s.$$.fragment,a),c=!0)},o(a){$(s.$$.fragment,a),c=!1},d(a){y(s,a)}}}(i);return{c(){o&&o.c()},m(r,s){o&&o.m(r,s),e=!0},p(r,s){t?t.p&&(!e||17422&s[0]|64&s[1])&&Ke(t,n,r,r[37],e?Ze(n,r[37],s,Rv):Xe(r[37]),Nc):o&&o.p&&(!e||50702&s[0]|64&s[1])&&o.p(r,e?s:[-1,-1])},i(r){e||(d(o,r),e=!0)},o(r){$(o,r),e=!1},d(r){o&&o.d(r)}}}function Hv(i){let e,n,t,o;const r=i[26]["dropdown-content"],s=Ye(r,i,i[37],Lc);return{c(){e=L("div"),s&&s.c(),A(e,"class","c-split-button__dropdown-contents svelte-1tmsqjt")},m(c,a){x(c,e,a),s&&s.m(e,null),n=!0,t||(o=Le(e,"click",i[19]),t=!0)},p(c,a){s&&s.p&&(!n||64&a[1])&&Ke(s,r,c,c[37],n?Ze(r,c[37],a,Ev):Xe(c[37]),Lc)},i(c){n||(d(s,c),n=!0)},o(c){$(s,c),n=!1},d(c){c&&b(e),s&&s.d(c),t=!1,o()}}}function jv(i){let e,n,t,o;return e=new we.Trigger({props:{$$slots:{default:[Uv]},$$scope:{ctx:i}}}),t=new we.Content({props:{size:i[13],side:i[7],align:i[8],onClickOutside:i[17],onEscapeKeyDown:i[18],$$slots:{default:[Hv]},$$scope:{ctx:i}}}),{c(){v(e.$$.fragment),n=B(),v(t.$$.fragment)},m(r,s){w(e,r,s),x(r,n,s),w(t,r,s),o=!0},p(r,s){const c={};50702&s[0]|64&s[1]&&(c.$$scope={dirty:s,ctx:r}),e.$set(c);const a={};8192&s[0]&&(a.size=r[13]),128&s[0]&&(a.side=r[7]),256&s[0]&&(a.align=r[8]),64&s[1]&&(a.$$scope={dirty:s,ctx:r}),t.$set(a)},i(r){o||(d(e.$$.fragment,r),d(t.$$.fragment,r),o=!0)},o(r){$(e.$$.fragment,r),$(t.$$.fragment,r),o=!1},d(r){r&&b(n),y(e,r),y(t,r)}}}function qv(i){let e,n,t,o,r,s;const c=i[26].button,a=Ye(c,i,i[37],Fc),l=a||function(m){let p,_;const M=[{size:m[0]},{variant:m[1]},{color:m[2]},{radius:m[3]},{disabled:m[15]},{highContrast:m[4]},{"data-split-button-main":m[6]?"true":void 0},m[20]];let C={$$slots:{iconLeft:[Fv],default:[Pv]},$$scope:{ctx:m}};for(let T=0;T<M.length;T+=1)C=Me(C,M[T]);return p=new ht({props:C}),p.$on("click",m[27]),p.$on("keyup",m[28]),p.$on("keydown",m[29]),p.$on("mousedown",m[30]),p.$on("mouseover",m[31]),p.$on("focus",m[32]),p.$on("mouseleave",m[33]),p.$on("blur",m[34]),p.$on("contextmenu",m[35]),{c(){v(p.$$.fragment)},m(T,E){w(p,T,E),_=!0},p(T,E){const R=1081439&E[0]?Mt(M,[1&E[0]&&{size:T[0]},2&E[0]&&{variant:T[1]},4&E[0]&&{color:T[2]},8&E[0]&&{radius:T[3]},32768&E[0]&&{disabled:T[15]},16&E[0]&&{highContrast:T[4]},64&E[0]&&{"data-split-button-main":T[6]?"true":void 0},1048576&E[0]&&fo(T[20])]):{};64&E[1]&&(R.$$scope={dirty:E,ctx:T}),p.$set(R)},i(T){_||(d(p.$$.fragment,T),_=!0)},o(T){$(p.$$.fragment,T),_=!1},d(T){y(p,T)}}}(i);let u=i[6]&&Oc(),f=i[6]&&zc(i);return{c(){e=L("div"),n=L("div"),l&&l.c(),t=B(),u&&u.c(),o=B(),f&&f.c(),A(n,"class","c-split-button__main svelte-1tmsqjt"),A(e,"class",r="c-split-button c-split-button--size-"+i[0]+" "+i[5]+" svelte-1tmsqjt"),ke(e,"c-split-button--has-dropdown",i[6])},m(m,p){x(m,e,p),F(e,n),l&&l.m(n,null),F(e,t),u&&u.m(e,null),F(e,o),f&&f.m(e,null),s=!0},p(m,p){a?a.p&&(!s||32799&p[0]|64&p[1])&&Ke(a,c,m,m[37],s?Ze(c,m[37],p,Nv):Xe(m[37]),Fc):l&&l.p&&(!s||1081439&p[0]|64&p[1])&&l.p(m,s?p:[-1,-1]),m[6]?u?64&p[0]&&d(u,1):(u=Oc(),u.c(),d(u,1),u.m(e,o)):u&&(j(),$(u,1,1,()=>{u=null}),q()),m[6]?f?(f.p(m,p),64&p[0]&&d(f,1)):(f=zc(m),f.c(),d(f,1),f.m(e,null)):f&&(j(),$(f,1,1,()=>{f=null}),q()),(!s||33&p[0]&&r!==(r="c-split-button c-split-button--size-"+m[0]+" "+m[5]+" svelte-1tmsqjt"))&&A(e,"class",r),(!s||97&p[0])&&ke(e,"c-split-button--has-dropdown",m[6])},i(m){s||(d(l,m),d(u),d(f),s=!0)},o(m){$(l,m),$(u),$(f),s=!1},d(m){m&&b(e),l&&l.d(m),u&&u.d(),f&&f.d()}}}const Wv="data-split-button-main",Vv="data-split-button-dropdown";function Gv(i,e,n){let t,o,r;const s=["size","variant","color","radius","disabled","highContrast","class","showDropdown","dropdownSide","dropdownAlign","onDropdownOpenChange","onDropdownClickOutside","onDropdownEscapeKeyDown","dropdownIcon","dropdownIconSize","requestCloseDropdown","requestOpenDropdown"];let c,a=mr(e,s),{$$slots:l={},$$scope:u}=e,{size:f=2}=e,{variant:m="solid"}=e,{color:p="neutral"}=e,{radius:_="medium"}=e,{disabled:M={primaryDisabled:!1,dropdownDisabled:!1}}=e,{highContrast:C=!1}=e,{class:T=""}=e,{showDropdown:E=!0}=e,{dropdownSide:R="bottom"}=e,{dropdownAlign:N="end"}=e,{onDropdownOpenChange:J}=e,{onDropdownClickOutside:Q}=e,{onDropdownEscapeKeyDown:X}=e,{dropdownIcon:K="chevron"}=e,{dropdownIconSize:H=f}=e;const Y=()=>c==null?void 0:c.requestClose();return i.$$set=V=>{e=Me(Me({},e),it(V)),n(20,a=mr(e,s)),"size"in V&&n(0,f=V.size),"variant"in V&&n(1,m=V.variant),"color"in V&&n(2,p=V.color),"radius"in V&&n(3,_=V.radius),"disabled"in V&&n(21,M=V.disabled),"highContrast"in V&&n(4,C=V.highContrast),"class"in V&&n(5,T=V.class),"showDropdown"in V&&n(6,E=V.showDropdown),"dropdownSide"in V&&n(7,R=V.dropdownSide),"dropdownAlign"in V&&n(8,N=V.dropdownAlign),"onDropdownOpenChange"in V&&n(22,J=V.onDropdownOpenChange),"onDropdownClickOutside"in V&&n(23,Q=V.onDropdownClickOutside),"onDropdownEscapeKeyDown"in V&&n(24,X=V.onDropdownEscapeKeyDown),"dropdownIcon"in V&&n(9,K=V.dropdownIcon),"dropdownIconSize"in V&&n(10,H=V.dropdownIconSize),"$$scope"in V&&n(37,u=V.$$scope)},i.$$.update=()=>{2097152&i.$$.dirty[0]&&n(15,t=typeof M=="boolean"?M:M.primaryDisabled),2097152&i.$$.dirty[0]&&n(14,o=typeof M=="boolean"?M:M.dropdownDisabled),1024&i.$$.dirty[0]&&n(13,r=H>2?2:H)},[f,m,p,_,C,T,E,R,N,K,H,Y,c,r,o,t,function(V){J&&J(V)},function(){Q&&Q()},function(){X&&X()},function(){Y()},a,M,J,Q,X,()=>c==null?void 0:c.requestOpen(),l,function(V){vn.call(this,i,V)},function(V){vn.call(this,i,V)},function(V){vn.call(this,i,V)},function(V){vn.call(this,i,V)},function(V){vn.call(this,i,V)},function(V){vn.call(this,i,V)},function(V){vn.call(this,i,V)},function(V){vn.call(this,i,V)},function(V){vn.call(this,i,V)},function(V){et[V?"unshift":"push"](()=>{c=V,n(12,c)})},u]}const Kf={Root:class extends ue{constructor(i){super(),de(this,i,Gv,qv,ce,{size:0,variant:1,color:2,radius:3,disabled:21,highContrast:4,class:5,showDropdown:6,dropdownSide:7,dropdownAlign:8,onDropdownOpenChange:22,onDropdownClickOutside:23,onDropdownEscapeKeyDown:24,dropdownIcon:9,dropdownIconSize:10,requestCloseDropdown:11,requestOpenDropdown:25},null,[-1,-1])}get requestCloseDropdown(){return this.$$.ctx[11]}get requestOpenDropdown(){return this.$$.ctx[25]}}};function Bc(i,e,n){const t=i.slice();t[21]=e[n];const o=t[2][t[21]];t[22]=o;const r=t[21]===t[11].currentConversationModel.selectedModelId;return t[23]=r,t}function Uc(i,e,n){const t=i.slice();t[26]=e[n];const o=t[26].id===t[5];return t[23]=o,t}function Yv(i){let e;const n=i[16].default,t=Ye(n,i,i[19],null);return{c(){t&&t.c()},m(o,r){t&&t.m(o,r),e=!0},p(o,r){t&&t.p&&(!e||524288&r)&&Ke(t,n,o,o[19],e?Ze(n,o[19],r,null):Xe(o[19]),null)},i(o){e||(d(t,o),e=!0)},o(o){$(t,o),e=!1},d(o){t&&t.d(o)}}}function Hc(i){let e,n,t,o=at(i[4]),r=[];for(let a=0;a<o.length;a+=1)r[a]=jc(Uc(i,o,a));const s=a=>$(r[a],1,1,()=>{r[a]=null});let c=i[8]&&qc();return{c(){for(let a=0;a<r.length;a+=1)r[a].c();e=B(),c&&c.c(),n=me()},m(a,l){for(let u=0;u<r.length;u+=1)r[u]&&r[u].m(a,l);x(a,e,l),c&&c.m(a,l),x(a,n,l),t=!0},p(a,l){if(112&l){let u;for(o=at(a[4]),u=0;u<o.length;u+=1){const f=Uc(a,o,u);r[u]?(r[u].p(f,l),d(r[u],1)):(r[u]=jc(f),r[u].c(),d(r[u],1),r[u].m(e.parentNode,e))}for(j(),u=o.length;u<r.length;u+=1)s(u);q()}a[8]?c?256&l&&d(c,1):(c=qc(),c.c(),d(c,1),c.m(n.parentNode,n)):c&&(j(),$(c,1,1,()=>{c=null}),q())},i(a){if(!t){for(let l=0;l<o.length;l+=1)d(r[l]);d(c),t=!0}},o(a){r=r.filter(Boolean);for(let l=0;l<r.length;l+=1)$(r[l]);$(c),t=!1},d(a){a&&(b(e),b(n)),pn(r,a),c&&c.d(a)}}}function Kv(i){let e,n,t=i[26].label+"";return{c(){e=G(t),n=B()},m(o,r){x(o,e,r),x(o,n,r)},p(o,r){16&r&&t!==(t=o[26].label+"")&&_e(e,t)},d(o){o&&(b(e),b(n))}}}function jc(i){let e,n;function t(){return i[17](i[26])}return e=new we.Item({props:{highlight:i[23],onSelect:t,$$slots:{default:[Kv]},$$scope:{ctx:i}}}),{c(){v(e.$$.fragment)},m(o,r){w(e,o,r),n=!0},p(o,r){i=o;const s={};48&r&&(s.highlight=i[23]),80&r&&(s.onSelect=t),524304&r&&(s.$$scope={dirty:r,ctx:i}),e.$set(s)},i(o){n||(d(e.$$.fragment,o),n=!0)},o(o){$(e.$$.fragment,o),n=!1},d(o){y(e,o)}}}function qc(i){let e,n;return e=new we.Separator({}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function Wc(i){let e,n,t,o;e=new we.Label({props:{$$slots:{default:[Xv]},$$scope:{ctx:i}}});let r=at(Object.keys(i[2])),s=[];for(let a=0;a<r.length;a+=1)s[a]=Vc(Bc(i,r,a));const c=a=>$(s[a],1,1,()=>{s[a]=null});return{c(){v(e.$$.fragment),n=B();for(let a=0;a<s.length;a+=1)s[a].c();t=me()},m(a,l){w(e,a,l),x(a,n,l);for(let u=0;u<s.length;u+=1)s[u]&&s[u].m(a,l);x(a,t,l),o=!0},p(a,l){const u={};if(524288&l&&(u.$$scope={dirty:l,ctx:a}),e.$set(u),2054&l){let f;for(r=at(Object.keys(a[2])),f=0;f<r.length;f+=1){const m=Bc(a,r,f);s[f]?(s[f].p(m,l),d(s[f],1)):(s[f]=Vc(m),s[f].c(),d(s[f],1),s[f].m(t.parentNode,t))}for(j(),f=r.length;f<s.length;f+=1)c(f);q()}},i(a){if(!o){d(e.$$.fragment,a);for(let l=0;l<r.length;l+=1)d(s[l]);o=!0}},o(a){$(e.$$.fragment,a),s=s.filter(Boolean);for(let l=0;l<s.length;l+=1)$(s[l]);o=!1},d(a){a&&(b(n),b(t)),y(e,a),pn(s,a)}}}function Xv(i){let e;return{c(){e=G("Models")},m(n,t){x(n,e,t)},d(n){n&&b(e)}}}function Zv(i){let e,n,t=i[22]+"";return{c(){e=G(t),n=B()},m(o,r){x(o,e,r),x(o,n,r)},p(o,r){4&r&&t!==(t=o[22]+"")&&_e(e,t)},d(o){o&&(b(e),b(n))}}}function Vc(i){let e,n;function t(){return i[18](i[21])}return e=new we.Item({props:{highlight:i[23],onSelect:t,$$slots:{default:[Zv]},$$scope:{ctx:i}}}),{c(){v(e.$$.fragment)},m(o,r){w(e,o,r),n=!0},p(o,r){i=o;const s={};4&r&&(s.highlight=i[23]),6&r&&(s.onSelect=t),524292&r&&(s.$$scope={dirty:r,ctx:i}),e.$set(s)},i(o){n||(d(e.$$.fragment,o),n=!0)},o(o){$(e.$$.fragment,o),n=!1},d(o){y(e,o)}}}function Jv(i){let e,n,t,o=i[7]&&Hc(i),r=i[8]&&Wc(i);return{c(){o&&o.c(),e=B(),r&&r.c(),n=me()},m(s,c){o&&o.m(s,c),x(s,e,c),r&&r.m(s,c),x(s,n,c),t=!0},p(s,c){s[7]?o?(o.p(s,c),128&c&&d(o,1)):(o=Hc(s),o.c(),d(o,1),o.m(e.parentNode,e)):o&&(j(),$(o,1,1,()=>{o=null}),q()),s[8]?r?(r.p(s,c),256&c&&d(r,1)):(r=Wc(s),r.c(),d(r,1),r.m(n.parentNode,n)):r&&(j(),$(r,1,1,()=>{r=null}),q())},i(s){t||(d(o),d(r),t=!0)},o(s){$(o),$(r),t=!1},d(s){s&&(b(e),b(n)),o&&o.d(s),r&&r.d(s)}}}function Qv(i){let e,n;return e=new Kf.Root({props:{size:1,variant:"solid",color:i[9]?"neutral":"accent",disabled:i[0],showDropdown:i[10],dropdownSide:"top",dropdownAlign:"end",$$slots:{"dropdown-content":[Jv],default:[Yv]},$$scope:{ctx:i}}}),e.$on("click",function(){Nt(i[3])&&i[3].apply(this,arguments)}),e.$on("keyup",function(){Nt(ko("Enter",i[3]))&&ko("Enter",i[3]).apply(this,arguments)}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p(t,[o]){i=t;const r={};512&o&&(r.color=i[9]?"neutral":"accent"),1&o&&(r.disabled=i[0]),1024&o&&(r.showDropdown=i[10]),524790&o&&(r.$$scope={dirty:o,ctx:i}),e.$set(r)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function ew(i,e,n){let t,o,r,s,c,a,{$$slots:l={},$$scope:u}=e,{disabled:f=!1}=e,{onSelectModel:m}=e,{modelIdToDisplayName:p}=e,{onSend:_}=e,{modeOptions:M=[]}=e,{currentMode:C}=e,{onSelectMode:T}=e;const E=Se("chatModel");if(!E)throw new Error("ChatModel not found in context");const R=Se(Tn.key);Te(i,R,Q=>n(14,c=Q));const N=Se(mo.key),{canShowTaskList:J}=N;return Te(i,J,Q=>n(15,a=Q)),i.$$set=Q=>{"disabled"in Q&&n(0,f=Q.disabled),"onSelectModel"in Q&&n(1,m=Q.onSelectModel),"modelIdToDisplayName"in Q&&n(2,p=Q.modelIdToDisplayName),"onSend"in Q&&n(3,_=Q.onSend),"modeOptions"in Q&&n(4,M=Q.modeOptions),"currentMode"in Q&&n(5,C=Q.currentMode),"onSelectMode"in Q&&n(6,T=Q.onSelectMode),"$$scope"in Q&&n(19,u=Q.$$scope)},i.$$.update=()=>{4&i.$$.dirty&&n(8,t=Object.keys(p).length>1),16&i.$$.dirty&&n(7,o=M.length>1),49536&i.$$.dirty&&n(10,r=t||a&&o&&!(c!=null&&c.isActive)),1&i.$$.dirty&&n(9,s=typeof f=="boolean"?f:f.primaryDisabled)},[f,m,p,_,M,C,T,o,t,s,r,E,R,J,c,a,l,Q=>{T(Q.id)},Q=>{m(Q)},u]}class tw extends ue{constructor(e){super(),de(this,e,ew,Qv,ce,{disabled:0,onSelectModel:1,modelIdToDisplayName:2,onSend:3,modeOptions:4,currentMode:5,onSelectMode:6})}}function nw(i){let e,n,t;var o=i[7];return o&&(e=ln(o,{})),{c(){e&&v(e.$$.fragment),n=me()},m(r,s){e&&w(e,r,s),x(r,n,s),t=!0},p(r,s){if(128&s&&o!==(o=r[7])){if(e){j();const c=e;$(c.$$.fragment,1,0,()=>{y(c,1)}),q()}o?(e=ln(o,{}),v(e.$$.fragment),d(e.$$.fragment,1),w(e,n.parentNode,n)):e=null}},i(r){t||(e&&d(e.$$.fragment,r),t=!0)},o(r){e&&$(e.$$.fragment,r),t=!1},d(r){r&&b(n),e&&y(e,r)}}}function ow(i){let e,n;return e=new Ne({props:{content:i[6],triggerOn:[Je.Hover],side:"top",delayDurationMs:500,offset:[0,iw],$$slots:{default:[nw]},$$scope:{ctx:i}}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p(t,o){const r={};64&o&&(r.content=t[6]),1048704&o&&(r.$$scope={dirty:o,ctx:t}),e.$set(r)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function rw(i){let e,n;return e=new tw({props:{disabled:{primaryDisabled:i[1],dropdownDisabled:!1},onSelectModel:i[18],onSend:i[0],modelIdToDisplayName:i[3],modeOptions:i[4],currentMode:i[2],onSelectMode:i[12],$$slots:{default:[ow]},$$scope:{ctx:i}}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p(t,[o]){const r={};2&o&&(r.disabled={primaryDisabled:t[1],dropdownDisabled:!1}),1024&o&&(r.onSelectModel=t[18]),1&o&&(r.onSend=t[0]),8&o&&(r.modelIdToDisplayName=t[3]),16&o&&(r.modeOptions=t[4]),4&o&&(r.currentMode=t[2]),1048768&o&&(r.$$scope={dirty:o,ctx:t}),e.$set(r)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}const iw=10;function sw(i,e,n){let t,o,r,s,c,a,l,u,f,m,p,_,M=P,C=P,T=P;i.$$.on_destroy.push(()=>M()),i.$$.on_destroy.push(()=>C()),i.$$.on_destroy.push(()=>T());const E=Se("chatModel");Te(i,E,K=>n(15,f=K));const R=Se("agentConversationModel");if(!E)throw new Error("ChatModel not found in context");if(!R)throw new Error("AgentConversationModel not found in context");let{primaryAction:N}=e,{isDisabled:J=!1}=e,{disabledReason:Q=""}=e,X={};return i.$$set=K=>{"primaryAction"in K&&n(0,N=K.primaryAction),"isDisabled"in K&&n(1,J=K.isDisabled),"disabledReason"in K&&n(13,Q=K.disabledReason)},i.$$.update=()=>{32768&i.$$.dirty&&n(10,t=f.currentConversationModel),32768&i.$$.dirty&&(n(9,o=f.flags),C(),C=lt(o,K=>n(16,p=K))),32768&i.$$.dirty&&(n(8,r=f.sendModeModel.mode),M(),M=lt(r,K=>n(2,m=K))),4&i.$$.dirty&&n(14,s=Pa.find(K=>K.id===m)),212992&i.$$.dirty&&n(7,c=_&&p.enableTaskList&&(s==null?void 0:s.icon)||a1),221186&i.$$.dirty&&n(6,a=J?Q:_&&p.enableTaskList?(s==null?void 0:s.label)||"Send to Agent":"Send message"),196608&i.$$.dirty&&n(4,u=_&&p.enableTaskList?Pa:[]),229380&i.$$.dirty&&(_&&p.enableTaskList||m!==Ti.addTask||(f.sendModeModel.setMode(Ti.send),f.saveImmediate())),32768&i.$$.dirty&&n(3,X=Object.fromEntries(Object.entries(f.flags.modelDisplayNameToId).map(([K,H])=>[H,K])))},n(5,l=R.isCurrConversationAgentic),T(),T=lt(l,K=>n(17,_=K)),[N,J,m,X,u,l,a,c,r,o,t,E,function(K){f.sendModeModel.setMode(K),f.saveImmediate()},Q,s,f,p,_,K=>t.setSelectedModelId(K)]}const Po=class Po{constructor(e,n){$e(this,"_disposers",[]);$e(this,"_allMentionables",Tt([]));$e(this,"_breadcrumbIds",Tt([]));$e(this,"_userQuery",Tt(""));$e(this,"_active",Tt(!1));$e(this,"_allGroups",jn([this._active,this._allMentionables],([e,n])=>e?_p(n):[]));$e(this,"_currentGroup",jn([this._breadcrumbIds,this._allGroups],([e,n])=>{if(e.length===0)return;const t=e[e.length-1];return n.find(o=>zr(o)&&o.id===t)}));$e(this,"dispose",()=>{for(const e of this._disposers)e()});$e(this,"openDropdown",()=>{this._active.set(!0)});$e(this,"closeDropdown",()=>{this._active.set(!1),this._resetState()});$e(this,"toggleDropdown",()=>ot(this._active)?(this.closeDropdown(),!1):(this.openDropdown(),!0));$e(this,"pushBreadcrumb",e=>{ot(this._active)&&this._breadcrumbIds.update(n=>[...n,e.id])});$e(this,"popBreadcrumb",()=>{ot(this._active)&&this._breadcrumbIds.update(e=>e.slice(0,-1))});$e(this,"selectMentionable",e=>{var o;const n=this._chatModel.extensionClient,t=this._chatModel.specialContextInputModel;return zr(e)&&e.type==="breadcrumb"?(this.pushBreadcrumb(e),!0):e.type==="breadcrumb-back"?(this.popBreadcrumb(),!0):uf(e)?(t.markAllActive(),this.closeDropdown(),n.reportWebviewClientEvent(Qo.chatRestoreDefaultContext),!0):e.clearContext?(t.markAllInactive(),this.closeDropdown(),n.reportWebviewClientEvent(Qo.chatClearContext),!0):e.userGuidelines?(n.openSettingsPage("guidelines"),this.closeDropdown(),!0):((o=this._insertMentionNode)==null||o.call(this,e),this.closeDropdown(),!0)});$e(this,"_displayItems",jn([this._active,this._breadcrumbIds,this._userQuery,this._currentGroup,this.allGroups],([e,n,t,o,r])=>{if(!e)return[];if(n.length>0&&o)return[{...o,type:"breadcrumb-back"},...o.group.items.slice(0,Po.SINGLE_GROUP_MAX_ITEMS).map(s=>({...s,type:"item"}))];if(t.length>0){const s=aw(ot(this._userQuery)).map(c=>({...c,type:"item"}));return r.flatMap(c=>[{...c,type:"breadcrumb"},...c.group.items.slice(0,Po.MULTI_GROUP_MAX_ITEMS).map(a=>({...a,type:"item"}))]).concat(s)}return[{...df,type:"item"},...r.map(s=>({...s,type:"breadcrumb"})),{...$f,type:"item"},{...ff,type:"item"}]}));$e(this,"_refreshSeqNum",0);$e(this,"_refreshMentionables",l1(async()=>{if(!ot(this._active))return;this._refreshSeqNum++;const e=this._refreshSeqNum,n=this._chatModel.currentConversationModel&&mn(this._chatModel.currentConversationModel),t=ot(this._userQuery),o=await this._chatModel.extensionClient.getSuggestions(t,n);e===this._refreshSeqNum&&this._allMentionables.set(Xf({query:t,mentionables:o}))},Po.REFRESH_THROTTLE_MS,{leading:!0,trailing:!0}));this._chatModel=e,this._insertMentionNode=n,this._disposers.push(this._userQuery.subscribe(this._refreshMentionables)),this._disposers.push(this._active.subscribe(this._refreshMentionables))}get allGroups(){return this._allGroups}get currentGroup(){return this._currentGroup}get breadcrumbIds(){return this._breadcrumbIds}get displayItems(){return this._displayItems}get active(){return this._active}get userQuery(){return this._userQuery}_resetState(){this._breadcrumbIds.set([]),this._userQuery.set("")}};$e(Po,"REFRESH_THROTTLE_MS",600),$e(Po,"SINGLE_GROUP_MAX_ITEMS",12),$e(Po,"MULTI_GROUP_MAX_ITEMS",6);let Ri=Po;const Xf=({query:i,mentionables:e,returnAllIfNoResults:n=!0,threshold:t=1})=>{if(i.length<=1)return e;const o=new ur(e,{keys:["label"],threshold:t,minMatchCharLength:0,ignoreLocation:!0,includeScore:!0,useExtendedSearch:!1,shouldSort:!0,findAllMatches:!0}).search(i);return o.length===0&&n?e:o.map(r=>r.item)},aw=i=>Xf({query:i,mentionables:[df,$f,ff],returnAllIfNoResults:!1,threshold:.6});function cw(i){let e,n,t,o=i[0].label+"";return{c(){e=L("span"),n=L("span"),t=G(o),A(n,"class","c-mentionable-group-label__text right"),A(e,"class","c-mentionable-group-label")},m(r,s){x(r,e,s),F(e,n),F(n,t)},p(r,s){1&s&&o!==(o=r[0].label+"")&&_e(t,o)},i:P,o:P,d(r){r&&b(e)}}}function lw(i){let e,n;return e=new t1({props:{$$slots:{text:[ww],leftIcon:[vw]},$$scope:{ctx:i}}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p(t,o){const r={};17&o&&(r.$$scope={dirty:o,ctx:t}),e.$set(r)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function uw(i){let e,n=i[0].label+"";return{c(){e=G(n)},m(t,o){x(t,e,o)},p(t,o){1&o&&n!==(n=t[0].label+"")&&_e(e,n)},i:P,o:P,d(t){t&&b(e)}}}function dw(i){let e,n;return e=new _n({props:{filepath:i[0].rule.path,$$slots:{leftIcon:[yw]},$$scope:{ctx:i}}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p(t,o){const r={};1&o&&(r.filepath=t[0].rule.path),16&o&&(r.$$scope={dirty:o,ctx:t}),e.$set(r)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function $w(i){let e,n;return e=new _n({props:{filepath:i[0].recentFile.pathName,$$slots:{leftIcon:[bw]},$$scope:{ctx:i}}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p(t,o){const r={};1&o&&(r.filepath=t[0].recentFile.pathName),16&o&&(r.$$scope={dirty:o,ctx:t}),e.$set(r)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function fw(i){let e,n;return e=new _n({props:{filepath:i[0].selection.pathName,$$slots:{leftIcon:[xw]},$$scope:{ctx:i}}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p(t,o){const r={};1&o&&(r.filepath=t[0].selection.pathName),16&o&&(r.$$scope={dirty:o,ctx:t}),e.$set(r)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function mw(i){let e,n;return e=new _n({props:{filepath:i[0].sourceFolder.folderRoot,$$slots:{leftIcon:[_w]},$$scope:{ctx:i}}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p(t,o){const r={};1&o&&(r.filepath=t[0].sourceFolder.folderRoot),16&o&&(r.$$scope={dirty:o,ctx:t}),e.$set(r)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function pw(i){let e,n;return e=new _n({props:{filepath:i[0].externalSource.name,$$slots:{leftIcon:[Cw]},$$scope:{ctx:i}}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p(t,o){const r={};1&o&&(r.filepath=t[0].externalSource.name),16&o&&(r.$$scope={dirty:o,ctx:t}),e.$set(r)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function gw(i){let e,n;return e=new _n({props:{filepath:i[0].folder.pathName,$$slots:{leftIcon:[Aw]},$$scope:{ctx:i}}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p(t,o){const r={};1&o&&(r.filepath=t[0].folder.pathName),16&o&&(r.$$scope={dirty:o,ctx:t}),e.$set(r)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function hw(i){let e,n;return e=new _n({props:{filepath:i[0].file.pathName,$$slots:{leftIcon:[Mw]},$$scope:{ctx:i}}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p(t,o){const r={};1&o&&(r.filepath=t[0].file.pathName),16&o&&(r.$$scope={dirty:o,ctx:t}),e.$set(r)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function vw(i){let e,n,t;var o=Li(i[0].personality.type);return o&&(n=ln(o,{})),{c(){e=L("span"),n&&v(n.$$.fragment),A(e,"slot","leftIcon"),A(e,"class","c-context-menu-item__icon svelte-1a2w9oo")},m(r,s){x(r,e,s),n&&w(n,e,null),t=!0},p(r,s){if(1&s&&o!==(o=Li(r[0].personality.type))){if(n){j();const c=n;$(c.$$.fragment,1,0,()=>{y(c,1)}),q()}o?(n=ln(o,{}),v(n.$$.fragment),d(n.$$.fragment,1),w(n,e,null)):n=null}},i(r){t||(n&&d(n.$$.fragment,r),t=!0)},o(r){n&&$(n.$$.fragment,r),t=!1},d(r){r&&b(e),n&&y(n)}}}function ww(i){let e,n,t=i[0].label+"";return{c(){e=L("span"),n=G(t),A(e,"slot","text")},m(o,r){x(o,e,r),F(e,n)},p(o,r){1&r&&t!==(t=o[0].label+"")&&_e(n,t)},d(o){o&&b(e)}}}function yw(i){let e,n;return e=new Us({props:{slot:"leftIcon",iconName:"rule"}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p:P,i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function bw(i){let e,n;return e=new zo({props:{slot:"leftIcon",iconName:"description"}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p:P,i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function xw(i){let e,n;return e=new zo({props:{slot:"leftIcon",iconName:"text_select_start"}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p:P,i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function _w(i){let e,n;return e=new zo({props:{slot:"leftIcon",iconName:"folder_managed"}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p:P,i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function Cw(i){let e,n;return e=new zo({props:{slot:"leftIcon",iconName:"import_contacts"}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p:P,i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function Aw(i){let e,n;return e=new zo({props:{slot:"leftIcon",iconName:"folder_open"}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p:P,i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function Mw(i){let e,n;return e=new zo({props:{slot:"leftIcon",iconName:"description"}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p:P,i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function kw(i){let e,n,t,o,r,s,c,a,l,u,f,m,p,_;const M=[hw,gw,pw,mw,fw,$w,dw,uw,lw,cw],C=[];function T(E,R){return 1&R&&(e=null),1&R&&(n=null),1&R&&(t=null),1&R&&(o=null),1&R&&(r=null),1&R&&(s=null),1&R&&(c=null),1&R&&(a=null),1&R&&(l=null),1&R&&(u=null),e==null&&(e=!!Is(E[0])),e?0:(n==null&&(n=!!Rs(E[0])),n?1:(t==null&&(t=!!Ds(E[0])),t?2:(o==null&&(o=!!Wi(E[0])),o?3:(r==null&&(r=!!Ps(E[0])),r?4:(s==null&&(s=!!Ls(E[0])),s?5:(c==null&&(c=!!Fs(E[0])),c?6:(a==null&&(a=!!zr(E[0])),a?7:(l==null&&(l=!!af(E[0])),l?8:(u==null&&(u=!!(uf(E[0])||Cp(E[0])||Ns(E[0]))),u?9:-1)))))))))}return~(f=T(i,-1))&&(m=C[f]=M[f](i)),{c(){m&&m.c(),p=me()},m(E,R){~f&&C[f].m(E,R),x(E,p,R),_=!0},p(E,R){let N=f;f=T(E,R),f===N?~f&&C[f].p(E,R):(m&&(j(),$(C[N],1,1,()=>{C[N]=null}),q()),~f?(m=C[f],m?m.p(E,R):(m=C[f]=M[f](E),m.c()),d(m,1),m.m(p.parentNode,p)):m=null)},i(E){_||(d(m),_=!0)},o(E){$(m),_=!1},d(E){E&&b(p),~f&&C[f].d(E)}}}function Sw(i){let e,n,t;var o=i[3];function r(s,c){return{props:{highlight:s[2],onSelect:s[1],$$slots:{default:[kw]},$$scope:{ctx:s}}}}return o&&(e=ln(o,r(i))),{c(){e&&v(e.$$.fragment),n=me()},m(s,c){e&&w(e,s,c),x(s,n,c),t=!0},p(s,[c]){if(8&c&&o!==(o=s[3])){if(e){j();const a=e;$(a.$$.fragment,1,0,()=>{y(a,1)}),q()}o?(e=ln(o,r(s)),v(e.$$.fragment),d(e.$$.fragment,1),w(e,n.parentNode,n)):e=null}else if(o){const a={};4&c&&(a.highlight=s[2]),2&c&&(a.onSelect=s[1]),17&c&&(a.$$scope={dirty:c,ctx:s}),e.$set(a)}},i(s){t||(e&&d(e.$$.fragment,s),t=!0)},o(s){e&&$(e.$$.fragment,s),t=!1},d(s){s&&b(n),e&&y(e,s)}}}function Tw(i,e,n){let t,{item:o}=e,{onSelect:r}=e,{highlight:s}=e;return i.$$set=c=>{"item"in c&&n(0,o=c.item),"onSelect"in c&&n(1,r=c.onSelect),"highlight"in c&&n(2,s=c.highlight)},i.$$.update=()=>{1&i.$$.dirty&&(o.type==="breadcrumb-back"?n(3,t=we.BreadcrumbBackItem):o.type==="breadcrumb"&&zr(o)?n(3,t=we.BreadcrumbItem):o.type!=="item"||zr(o)||n(3,t=we.Item))},[o,r,s,t]}class Zf extends ue{constructor(e){super(),de(this,e,Tw,Sw,ce,{item:0,onSelect:1,highlight:2})}}function Ew(i){let e,n,t=[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 512 512"},i[0]],o={};for(let r=0;r<t.length;r+=1)o=Me(o,t[r]);return{c(){e=rt("svg"),n=new en(!0),this.h()},l(r){e=tn(r,"svg",{xmlns:!0,"data-ds-icon":!0,viewBox:!0});var s=nn(e);n=on(s,!0),s.forEach(b),this.h()},h(){n.a=null,ut(e,o)},m(r,s){rn(r,e,s),n.m('<!--! Font Awesome Pro 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2024 Fonticons, Inc.--><path d="M256 48C141.1 48 48 141.1 48 256s93.1 208 208 208c13.3 0 24 10.7 24 24s-10.7 24-24 24C114.6 512 0 397.4 0 256S114.6 0 256 0s256 114.6 256 256v28c0 50.8-41.2 92-92 92-31.1 0-58.7-15.5-75.3-39.2-22 24.1-53.6 39.2-88.7 39.2-66.3 0-120-53.7-120-120s53.7-120 120-120c28.8 0 55.2 10.1 75.8 27 4.3-6.6 11.7-11 20.2-11 13.3 0 24 10.7 24 24v108c0 24.3 19.7 44 44 44s44-19.7 44-44v-28c0-114.9-93.1-208-208-208m72 208a72 72 0 1 0-144 0 72 72 0 1 0 144 0"/>',e)},p(r,[s]){ut(e,o=Mt(t,[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 512 512"},1&s&&r[0]]))},i:P,o:P,d(r){r&&b(e)}}}function Iw(i,e,n){return i.$$set=t=>{n(0,e=Me(Me({},e),it(t)))},[e=it(e)]}class Lw extends ue{constructor(e){super(),de(this,e,Iw,Ew,ce,{})}}function Rw(i){let e,n;const t=i[1].default,o=Ye(t,i,i[0],null);return{c(){e=L("span"),o&&o.c(),A(e,"class","c-input-action-bar-command svelte-7hv65t")},m(r,s){x(r,e,s),o&&o.m(e,null),n=!0},p(r,[s]){o&&o.p&&(!n||1&s)&&Ke(o,t,r,r[0],n?Ze(t,r[0],s,null):Xe(r[0]),null)},i(r){n||(d(o,r),n=!0)},o(r){$(o,r),n=!1},d(r){r&&b(e),o&&o.d(r)}}}function Dw(i,e,n){let{$$slots:t={},$$scope:o}=e;return i.$$set=r=>{"$$scope"in r&&n(0,o=r.$$scope)},[o,t]}class Yi extends ue{constructor(e){super(),de(this,e,Dw,Rw,ce,{})}}function Gc(i,e,n){const t=i.slice();return t[21]=e[n],t}function Nw(i){let e,n;return e=new Lw({}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function Pw(i){let e,n;return e=new dt({props:{size:1,variant:"ghost-block",color:"neutral",$$slots:{default:[Nw]},$$scope:{ctx:i}}}),e.$on("click",i[2]),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p(t,o){const r={};16777216&o&&(r.$$scope={dirty:o,ctx:t}),e.$set(r)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function Fw(i){let e,n;return e=new Yi({props:{$$slots:{default:[Pw]},$$scope:{ctx:i}}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p(t,o){const r={};16777216&o&&(r.$$scope={dirty:o,ctx:t}),e.$set(r)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function Yc(i){let e,n;function t(){return i[15](i[21])}return e=new Zf({props:{item:i[21],onSelect:t}}),{c(){v(e.$$.fragment)},m(o,r){w(e,o,r),n=!0},p(o,r){i=o;const s={};32&r&&(s.item=i[21]),32&r&&(s.onSelect=t),e.$set(s)},i(o){n||(d(e.$$.fragment,o),n=!0)},o(o){$(e.$$.fragment,o),n=!1},d(o){y(e,o)}}}function Kc(i){let e,n;return e=new we.Label({props:{$$slots:{default:[Ow]},$$scope:{ctx:i}}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function Ow(i){let e;return{c(){e=G("No results found")},m(n,t){x(n,e,t)},d(n){n&&b(e)}}}function zw(i){let e,n,t,o,r,s,c,a,l=at(i[5]),u=[];for(let M=0;M<l.length;M+=1)u[M]=Yc(Gc(i,l,M));const f=M=>$(u[M],1,1,()=>{u[M]=null});let m=i[6].length>0&&i[5].length===0&&Kc(i);function p(M){i[16](M)}o=new we.Separator({});let _={placeholder:"Focus context"};return i[6]!==void 0&&(_.value=i[6]),s=new we.TextFieldItem({props:_}),et.push(()=>Et(s,"value",p)),{c(){e=L("div");for(let M=0;M<u.length;M+=1)u[M].c();n=B(),m&&m.c(),t=B(),v(o.$$.fragment),r=B(),v(s.$$.fragment),A(e,"class","c-context-menu__items svelte-j63we7")},m(M,C){x(M,e,C);for(let T=0;T<u.length;T+=1)u[T]&&u[T].m(e,null);x(M,n,C),m&&m.m(M,C),x(M,t,C),w(o,M,C),x(M,r,C),w(s,M,C),a=!0},p(M,C){if(800&C){let E;for(l=at(M[5]),E=0;E<l.length;E+=1){const R=Gc(M,l,E);u[E]?(u[E].p(R,C),d(u[E],1)):(u[E]=Yc(R),u[E].c(),d(u[E],1),u[E].m(e,null))}for(j(),E=l.length;E<u.length;E+=1)f(E);q()}M[6].length>0&&M[5].length===0?m?96&C&&d(m,1):(m=Kc(M),m.c(),d(m,1),m.m(t.parentNode,t)):m&&(j(),$(m,1,1,()=>{m=null}),q());const T={};!c&&64&C&&(c=!0,T.value=M[6],Rt(()=>c=!1)),s.$set(T)},i(M){if(!a){for(let C=0;C<l.length;C+=1)d(u[C]);d(m),d(o.$$.fragment,M),d(s.$$.fragment,M),a=!0}},o(M){u=u.filter(Boolean);for(let C=0;C<u.length;C+=1)$(u[C]);$(m),$(o.$$.fragment,M),$(s.$$.fragment,M),a=!1},d(M){M&&(b(e),b(n),b(t),b(r)),pn(u,M),m&&m.d(M),y(o,M),y(s,M)}}}function Bw(i){let e,n,t,o;return e=new we.Trigger({props:{$$slots:{default:[Fw]},$$scope:{ctx:i}}}),t=new we.Content({props:{size:1,side:"top",align:"start",onClickOutside:i[1],onEscapeKeyDown:i[1],onRequestClose:i[1],$$slots:{default:[zw]},$$scope:{ctx:i}}}),t.$on("keydown",i[7]),{c(){v(e.$$.fragment),n=B(),v(t.$$.fragment)},m(r,s){w(e,r,s),x(r,n,s),w(t,r,s),o=!0},p(r,s){const c={};16777216&s&&(c.$$scope={dirty:s,ctx:r}),e.$set(c);const a={};16777312&s&&(a.$$scope={dirty:s,ctx:r}),t.$set(a)},i(r){o||(d(e.$$.fragment,r),d(t.$$.fragment,r),o=!0)},o(r){$(e.$$.fragment,r),$(t.$$.fragment,r),o=!1},d(r){r&&b(n),y(e,r),y(t,r)}}}function Uw(i){let e,n,t={open:i[4],onOpenChange:i[17],nested:!1,$$slots:{default:[Bw]},$$scope:{ctx:i}};return e=new we.Root({props:t}),i[18](e),{c(){v(e.$$.fragment)},m(o,r){w(e,o,r),n=!0},p(o,[r]){const s={};16&r&&(s.open=o[4]),1&r&&(s.onOpenChange=o[17]),16777312&r&&(s.$$scope={dirty:r,ctx:o}),e.$set(s)},i(o){n||(d(e.$$.fragment,o),n=!0)},o(o){$(e.$$.fragment,o),n=!1},d(o){i[18](null),y(e,o)}}}function Hw(i,e,n){let t,o,r,s,{onCloseDropdown:c=()=>{}}=e,{onInsertMentionable:a}=e;const l=Se("chatModel");if(!l)throw new Error("ChatModel not found in context");const u=()=>{s==null||s.focusIdx(-1)},f=()=>{s==null||s.focusIdx(0)},m=new Ri(l,C=>!!a&&a(C)),{displayItems:p,active:_,userQuery:M}=m;return Te(i,p,C=>n(5,o=C)),Te(i,_,C=>n(4,t=C)),Te(i,M,C=>n(6,r=C)),jr(m.dispose),i.$$set=C=>{"onCloseDropdown"in C&&n(0,c=C.onCloseDropdown),"onInsertMentionable"in C&&n(13,a=C.onInsertMentionable)},[c,async()=>{m.closeDropdown()},async()=>{m.toggleDropdown()&&(await Fo(),u())},s,t,o,r,async C=>{switch(C.key){case"ArrowLeft":C.preventDefault(),m.popBreadcrumb(),await Fo(),s==null||s.focusIdx(0);break;case"ArrowRight":case"ArrowDown":case"ArrowUp":case"Enter":break;default:C.defaultPrevented||u()}},f,m,p,_,M,a,async()=>{m.openDropdown(),await Fo(),u()},async C=>{m.selectMentionable(C),await Fo(),f()},function(C){r=C,M.set(r)},C=>{C||c()},function(C){et[C?"unshift":"push"](()=>{s=C,n(3,s)})}]}function jw(i){let e,n,t=[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 320 512"},i[0]],o={};for(let r=0;r<t.length;r+=1)o=Me(o,t[r]);return{c(){e=rt("svg"),n=new en(!0),this.h()},l(r){e=tn(r,"svg",{xmlns:!0,"data-ds-icon":!0,viewBox:!0});var s=nn(e);n=on(s,!0),s.forEach(b),this.h()},h(){n.a=null,ut(e,o)},m(r,s){rn(r,e,s),n.m('<!--! Font Awesome Pro 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2024 Fonticons, Inc.--><path d="M308.1 3.3c11.4 6.7 15.3 21.4 8.6 32.8l-272 464c-6.7 11.4-21.4 15.3-32.8 8.6s-15.3-21.4-8.6-32.8l272-464C282 .4 296.7-3.4 308.1 3.3"/>',e)},p(r,[s]){ut(e,o=Mt(t,[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 320 512"},1&s&&r[0]]))},i:P,o:P,d(r){r&&b(e)}}}function qw(i,e,n){return i.$$set=t=>{n(0,e=Me(Me({},e),it(t)))},[e=it(e)]}class Ww extends ue{constructor(e){super(),de(this,e,qw,jw,ce,{})}}function Xc(i,e,n){const t=i.slice();return t[17]=e[n],t}function Vw(i){let e,n;return e=new Ww({}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function Gw(i){let e,n;return e=new dt({props:{size:1,variant:"ghost-block",color:"neutral",$$slots:{default:[Vw]},$$scope:{ctx:i}}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p(t,o){const r={};1048576&o&&(r.$$scope={dirty:o,ctx:t}),e.$set(r)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function Yw(i){let e,n;return e=new Yi({props:{$$slots:{default:[Gw]},$$scope:{ctx:i}}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p(t,o){const r={};1048576&o&&(r.$$scope={dirty:o,ctx:t}),e.$set(r)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function Kw(i){let e,n,t,o=i[17].label+"";return{c(){e=G("/"),n=G(o),t=B()},m(r,s){x(r,e,s),x(r,n,s),x(r,t,s)},p(r,s){4&s&&o!==(o=r[17].label+"")&&_e(n,o)},d(r){r&&(b(e),b(n),b(t))}}}function Zc(i){let e,n;function t(){return i[10](i[17])}return e=new we.Item({props:{onSelect:t,$$slots:{default:[Kw]},$$scope:{ctx:i}}}),{c(){v(e.$$.fragment)},m(o,r){w(e,o,r),n=!0},p(o,r){i=o;const s={};4&r&&(s.onSelect=t),1048580&r&&(s.$$scope={dirty:r,ctx:i}),e.$set(s)},i(o){n||(d(e.$$.fragment,o),n=!0)},o(o){$(e.$$.fragment,o),n=!1},d(o){y(e,o)}}}function Xw(i){let e,n,t,o,r,s,c,a=at(i[2]),l=[];for(let p=0;p<a.length;p+=1)l[p]=Zc(Xc(i,a,p));const u=p=>$(l[p],1,1,()=>{l[p]=null});function f(p){i[11](p)}t=new we.Separator({});let m={placeholder:"Run an action"};return i[0]!==void 0&&(m.value=i[0]),r=new we.TextFieldItem({props:m}),et.push(()=>Et(r,"value",f)),{c(){e=L("div");for(let p=0;p<l.length;p+=1)l[p].c();n=B(),v(t.$$.fragment),o=B(),v(r.$$.fragment),A(e,"class","c-actions-menu__items svelte-1n1budr")},m(p,_){x(p,e,_);for(let M=0;M<l.length;M+=1)l[M]&&l[M].m(e,null);x(p,n,_),w(t,p,_),x(p,o,_),w(r,p,_),c=!0},p(p,_){if(132&_){let C;for(a=at(p[2]),C=0;C<a.length;C+=1){const T=Xc(p,a,C);l[C]?(l[C].p(T,_),d(l[C],1)):(l[C]=Zc(T),l[C].c(),d(l[C],1),l[C].m(e,null))}for(j(),C=a.length;C<l.length;C+=1)u(C);q()}const M={};!s&&1&_&&(s=!0,M.value=p[0],Rt(()=>s=!1)),r.$set(M)},i(p){if(!c){for(let _=0;_<a.length;_+=1)d(l[_]);d(t.$$.fragment,p),d(r.$$.fragment,p),c=!0}},o(p){l=l.filter(Boolean);for(let _=0;_<l.length;_+=1)$(l[_]);$(t.$$.fragment,p),$(r.$$.fragment,p),c=!1},d(p){p&&(b(e),b(n),b(o)),pn(l,p),y(t,p),y(r,p)}}}function Zw(i){let e,n,t,o;return e=new we.Trigger({props:{$$slots:{default:[Yw]},$$scope:{ctx:i}}}),t=new we.Content({props:{size:1,side:"top",align:"start",$$slots:{default:[Xw]},$$scope:{ctx:i}}}),t.$on("keydown",i[6]),{c(){v(e.$$.fragment),n=B(),v(t.$$.fragment)},m(r,s){w(e,r,s),x(r,n,s),w(t,r,s),o=!0},p(r,s){const c={};1048576&s&&(c.$$scope={dirty:s,ctx:r}),e.$set(c);const a={};1048581&s&&(a.$$scope={dirty:s,ctx:r}),t.$set(a)},i(r){o||(d(e.$$.fragment,r),d(t.$$.fragment,r),o=!0)},o(r){$(e.$$.fragment,r),$(t.$$.fragment,r),o=!1},d(r){r&&b(n),y(e,r),y(t,r)}}}function Jw(i){let e,n,t={onOpenChange:i[5],nested:!1,$$slots:{default:[Zw]},$$scope:{ctx:i}};return e=new we.Root({props:t}),i[12](e),{c(){v(e.$$.fragment)},m(o,r){w(e,o,r),n=!0},p(o,[r]){const s={};1048581&r&&(s.$$scope={dirty:r,ctx:o}),e.$set(s)},i(o){n||(d(e.$$.fragment,o),n=!0)},o(o){$(e.$$.fragment,o),n=!1},d(o){i[12](null),y(e,o)}}}function Qw(i,e,n){let t,o,r,s,{onCloseDropdown:c=()=>{}}=e;const a=Se("chatModel");if(Te(i,a,_=>n(13,r=_)),!a)throw new Error("ChatModel not found in context");const l=Se("slashCommandModel"),u=r.flags;Te(i,u,_=>n(9,o=_));function f(){s==null||s.focusIdx(-1)}let m="";function p(_){l.setActiveCommand(_.id),s==null||s.requestClose()}return i.$$set=_=>{"onCloseDropdown"in _&&n(8,c=_.onCloseDropdown)},i.$$.update=()=>{513&i.$$.dirty&&n(2,t=function(_,M){let C=Hf();return M||(C=C.filter(T=>T.id!=="generate-commit-message")),_===void 0?C:C.filter(T=>T.label.toLowerCase().includes(_.toLowerCase()))}(m,o.enableGenerateCommitMessage))},[m,s,t,a,u,async function(_){_?(await Fo(),f()):(c(),n(0,m=""))},async _=>{switch(_.key){case"ArrowLeft":case"ArrowRight":case"ArrowDown":case"ArrowUp":case"Enter":break;default:_.defaultPrevented||f()}},p,c,o,_=>p(_),function(_){m=_,n(0,m)},function(_){et[_?"unshift":"push"](()=>{s=_,n(1,s)})}]}function e3(i){let e,n,t=[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 448 512"},i[0]],o={};for(let r=0;r<t.length;r+=1)o=Me(o,t[r]);return{c(){e=rt("svg"),n=new en(!0),this.h()},l(r){e=tn(r,"svg",{xmlns:!0,"data-ds-icon":!0,viewBox:!0});var s=nn(e);n=on(s,!0),s.forEach(b),this.h()},h(){n.a=null,ut(e,o)},m(r,s){rn(r,e,s),n.m('<!--! Font Awesome Pro 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2024 Fonticons, Inc.--><path d="M375 73c-26-26-68.1-26-94.1 0L89 265c-43.7 43.6-43.7 114.4 0 158s114.4 43.6 158.1 0L399 271c9.4-9.4 24.6-9.4 33.9 0s9.4 24.6 0 33.9L281 457c-62.4 62.4-163.5 62.4-225.9 0S-7.4 293.4 55 231L247 39c44.7-44.7 117.3-44.7 162 0s44.7 117.2 0 161.9L225.2 384.7c-31.6 31.6-83.6 28.7-111.5-6.2-23.8-29.8-21.5-72.8 5.5-99.8L271 127c9.4-9.4 24.6-9.4 33.9 0s9.4 24.6 0 33.9L153.2 312.7c-9.7 9.7-10.6 25.1-2 35.8 10 12.5 28.7 13.6 40 2.2L375 167c26-26 26-68.1 0-94.1z"/>',e)},p(r,[s]){ut(e,o=Mt(t,[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 448 512"},1&s&&r[0]]))},i:P,o:P,d(r){r&&b(e)}}}function t3(i,e,n){return i.$$set=t=>{n(0,e=Me(Me({},e),it(t)))},[e=it(e)]}class n3 extends ue{constructor(e){super(),de(this,e,t3,e3,ce,{})}}function o3(i){let e,n,t,o,r,s,c;return n=new n3({}),{c(){e=L("label"),v(n.$$.fragment),t=B(),o=L("input"),A(e,"for",i[3]),A(e,"class","c-input-action-bar__label svelte-6rrv9"),A(o,"type","file"),o.hidden=!0,A(o,"id",i[3]),A(o,"accept",i[0])},m(a,l){x(a,e,l),w(n,e,null),x(a,t,l),x(a,o,l),r=!0,s||(c=[Le(o,"click",c3),Le(o,"input",i[4])],s=!0)},p(a,l){(!r||1&l)&&A(o,"accept",a[0])},i(a){r||(d(n.$$.fragment,a),r=!0)},o(a){$(n.$$.fragment,a),r=!1},d(a){a&&(b(e),b(t),b(o)),y(n),s=!1,Qt(c)}}}function r3(i){let e,n;return e=new dt({props:{size:1,variant:"ghost-block",color:"neutral",disabled:i[1],class:"c-input-action-bar__add-file-btn",$$slots:{default:[o3]},$$scope:{ctx:i}}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p(t,o){const r={};2&o&&(r.disabled=t[1]),133&o&&(r.$$scope={dirty:o,ctx:t}),e.$set(r)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function i3(i){let e,n,t,o,r;return t=new Ur({props:{icons:["shift"]}}),{c(){e=L("div"),n=G("Hold "),v(t.$$.fragment),o=G(" while dragging to attach"),A(e,"slot","content"),A(e,"class","c-add-file-button-tooltip svelte-6rrv9")},m(s,c){x(s,e,c),F(e,n),w(t,e,null),F(e,o),r=!0},p:P,i(s){r||(d(t.$$.fragment,s),r=!0)},o(s){$(t.$$.fragment,s),r=!1},d(s){s&&b(e),y(t)}}}function s3(i){let e,n;return e=new Ne({props:{triggerOn:[Je.Hover],delayDurationMs:300,$$slots:{content:[i3],default:[r3]},$$scope:{ctx:i}}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p(t,o){const r={};135&o&&(r.$$scope={dirty:o,ctx:t}),e.$set(r)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function a3(i){let e,n;return e=new Yi({props:{$$slots:{default:[s3]},$$scope:{ctx:i}}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p(t,[o]){const r={};135&o&&(r.$$scope={dirty:o,ctx:t}),e.$set(r)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}const c3=function(){this.value=null};function l3(i,e,n){let{accept:t="*"}=e,{disabled:o=!1}=e,{onAddFiles:r=a}=e;const s=`file-${Date.now()}-${Math.floor(1e4*Math.random())}`,c=n1();function a(l){var u,f,m;(m=(f=(u=c.commandManager)==null?void 0:u.chain())==null?void 0:f.insertFilesIntoEditor)==null||m.call(f,l)}return i.$$set=l=>{"accept"in l&&n(0,t=l.accept),"disabled"in l&&n(1,o=l.disabled),"onAddFiles"in l&&n(2,r=l.onAddFiles)},[t,o,r,s,function(l){var u;r([...((u=l.currentTarget)==null?void 0:u.files)??[]])}]}function u3(i){let e,n;return{c(){e=rt("svg"),n=rt("path"),A(n,"d","M2 3C2 2.44772 2.44772 2 3 2H12C12.5523 2 13 2.44772 13 3V12C13 12.5523 12.5523 13 12 13H3C2.44772 13 2 12.5523 2 12V3Z"),A(n,"fill","currentColor"),A(n,"fill-rule","evenodd"),A(n,"clip-rule","evenodd"),A(e,"width","15"),A(e,"height","15"),A(e,"viewBox","0 0 15 15"),A(e,"fill","none"),A(e,"xmlns","http://www.w3.org/2000/svg")},m(t,o){x(t,e,o),F(e,n)},p:P,i:P,o:P,d(t){t&&b(e)}}}class d3 extends ue{constructor(e){super(),de(this,e,null,u3,ce,{})}}function $3(i){let e,n;return e=new d3({}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function f3(i){let e,n,t;return n=new ht({props:{size:1,variant:"soft",color:"neutral",$$slots:{default:[$3]},$$scope:{ctx:i}}}),n.$on("click",i[0]),{c(){e=L("div"),v(n.$$.fragment),A(e,"class","c-cancel-button svelte-1b7ib22")},m(o,r){x(o,e,r),w(n,e,null),t=!0},p(o,[r]){const s={};4&r&&(s.$$scope={dirty:r,ctx:o}),n.$set(s)},i(o){t||(d(n.$$.fragment,o),t=!0)},o(o){$(n.$$.fragment,o),t=!1},d(o){o&&b(e),y(n)}}}function m3(i,e,n){let{cancelAction:t}=e;return i.$$set=o=>{"cancelAction"in o&&n(1,t=o.cancelAction)},[function(o){o.stopPropagation(),t()},t]}function p3(i){let e,n,t=[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 512 512"},i[0]],o={};for(let r=0;r<t.length;r+=1)o=Me(o,t[r]);return{c(){e=rt("svg"),n=new en(!0),this.h()},l(r){e=tn(r,"svg",{xmlns:!0,"data-ds-icon":!0,viewBox:!0});var s=nn(e);n=on(s,!0),s.forEach(b),this.h()},h(){n.a=null,ut(e,o)},m(r,s){rn(r,e,s),n.m('<!--! Font Awesome Pro 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2024 Fonticons, Inc.--><path d="M371.2 122.9C340.3 96.2 300 80 256 80c-97.2 0-176 78.8-176 176s78.8 176 176 176c39.7 0 76.2-13.1 105.6-35.2 10.6-8 25.6-5.8 33.6 4.8s5.8 25.6-4.8 33.6C353 463.3 306.4 480 256 480 132.3 480 32 379.7 32 256S132.3 32 256 32c57.3 0 109.6 21.5 149.2 56.9l30.5-30.5c6.6-6.6 15.6-10.3 25-10.3C480.2 48 496 63.8 496 83.3V200c0 13.3-10.7 24-24 24H355.3c-19.5 0-35.3-15.8-35.3-35.3 0-9.4 3.7-18.3 10.3-25l40.8-40.8zm76.8-9L385.9 176H448z"/>',e)},p(r,[s]){ut(e,o=Mt(t,[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 512 512"},1&s&&r[0]]))},i:P,o:P,d(r){r&&b(e)}}}function g3(i,e,n){return i.$$set=t=>{n(0,e=Me(Me({},e),it(t)))},[e=it(e)]}class h3 extends ue{constructor(e){super(),de(this,e,g3,p3,ce,{})}}function v3(i){let e;return{c(){e=G("Resend")},m(n,t){x(n,e,t)},d(n){n&&b(e)}}}function w3(i){let e,n;return e=new Ge({props:{size:1,$$slots:{default:[v3]},$$scope:{ctx:i}}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p(t,o){const r={};2&o&&(r.$$scope={dirty:o,ctx:t}),e.$set(r)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function y3(i){let e,n;return e=new h3({props:{slot:"iconLeft"}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p:P,i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function b3(i){let e,n,t;return n=new ht({props:{size:1,variant:"soft",color:"neutral",$$slots:{iconLeft:[y3],default:[w3]},$$scope:{ctx:i}}}),n.$on("click",function(){Nt(i[0])&&i[0].apply(this,arguments)}),n.$on("keyup",function(){Nt(i[0])&&i[0].apply(this,arguments)}),{c(){e=L("div"),v(n.$$.fragment),A(e,"class","c-resend-button svelte-1a3z7my")},m(o,r){x(o,e,r),w(n,e,null),t=!0},p(o,[r]){i=o;const s={};2&r&&(s.$$scope={dirty:r,ctx:i}),n.$set(s)},i(o){t||(d(n.$$.fragment,o),t=!0)},o(o){$(n.$$.fragment,o),t=!1},d(o){o&&b(e),y(n)}}}function x3(i,e,n){let{resendAction:t}=e;return i.$$set=o=>{"resendAction"in o&&n(0,t=o.resendAction)},[t]}function _3(i){let e,n,t=[{width:"15"},{height:"15"},{viewBox:"0 0 512 512"},{fill:"none"},{xmlns:"http://www.w3.org/2000/svg"},i[0]],o={};for(let r=0;r<t.length;r+=1)o=Me(o,t[r]);return{c(){e=rt("svg"),n=rt("path"),A(n,"d","M327.5 85.2c-4.5 1.7-7.5 6-7.5 10.8s3 9.1 7.5 10.8L384 128l21.2 56.5c1.7 4.5 6 7.5 10.8 7.5s9.1-3 10.8-7.5L448 128l56.5-21.2c4.5-1.7 7.5-6 7.5-10.8s-3-9.1-7.5-10.8L448 64 426.8 7.5C425.1 3 420.8 0 416 0s-9.1 3-10.8 7.5L384 64 327.5 85.2zM9.3 240C3.6 242.6 0 248.3 0 254.6s3.6 11.9 9.3 14.5L26.3 277l8.1 3.7 .6 .3 88.3 40.8L164.1 410l.3 .6 3.7 8.1 7.9 17.1c2.6 5.7 8.3 9.3 14.5 9.3s11.9-3.6 14.5-9.3l7.9-17.1 3.7-8.1 .3-.6 40.8-88.3L346 281l.6-.3 8.1-3.7 17.1-7.9c5.7-2.6 9.3-8.3 9.3-14.5s-3.6-11.9-9.3-14.5l-17.1-7.9-8.1-3.7-.6-.3-88.3-40.8L217 99.1l-.3-.6L213 90.3l-7.9-17.1c-2.6-5.7-8.3-9.3-14.5-9.3s-11.9 3.6-14.5 9.3l-7.9 17.1-3.7 8.1-.3 .6-40.8 88.3L35.1 228.1l-.6 .3-8.1 3.7L9.3 240zm83 14.5l51.2-23.6c10.4-4.8 18.7-13.1 23.5-23.5l23.6-51.2 23.6 51.2c4.8 10.4 13.1 18.7 23.5 23.5l51.2 23.6-51.2 23.6c-10.4 4.8-18.7 13.1-23.5 23.5l-23.6 51.2-23.6-51.2c-4.8-10.4-13.1-18.7-23.5-23.5L92.3 254.6zM384 384l-56.5 21.2c-4.5 1.7-7.5 6-7.5 10.8s3 9.1 7.5 10.8L384 448l21.2 56.5c1.7 4.5 6 7.5 10.8 7.5s9.1-3 10.8-7.5L448 448l56.5-21.2c4.5-1.7 7.5-6 7.5-10.8s-3-9.1-7.5-10.8L448 384l-21.2-56.5c-1.7-4.5-6-7.5-10.8-7.5s-9.1 3-10.8 7.5L384 384z"),A(n,"fill","currentColor"),ut(e,o)},m(r,s){x(r,e,s),F(e,n)},p(r,[s]){ut(e,o=Mt(t,[{width:"15"},{height:"15"},{viewBox:"0 0 512 512"},{fill:"none"},{xmlns:"http://www.w3.org/2000/svg"},1&s&&r[0]]))},i:P,o:P,d(r){r&&b(e)}}}function C3(i,e,n){return i.$$set=t=>{n(0,e=Me(Me({},e),it(t)))},[e=it(e)]}class A3 extends ue{constructor(e){super(),de(this,e,C3,_3,ce,{})}}function Jc(i){let e,n,t;return n=new Ne({props:{content:i[0]&&i[1]?i[1]:"Rewrite prompt",$$slots:{default:[T3]},$$scope:{ctx:i}}}),{c(){e=L("div"),v(n.$$.fragment),A(e,"class","c-rewrite-prompt-button svelte-1k3jvo8")},m(o,r){x(o,e,r),w(n,e,null),t=!0},p(o,r){const s={};3&r&&(s.content=o[0]&&o[1]?o[1]:"Rewrite prompt"),261&r&&(s.$$scope={dirty:r,ctx:o}),n.$set(s)},i(o){t||(d(n.$$.fragment,o),t=!0)},o(o){$(n.$$.fragment,o),t=!1},d(o){o&&b(e),y(n)}}}function M3(i){let e,n;return e=new A3({}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function k3(i){let e,n;return e=new go({props:{size:1,useCurrentColor:!0}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function S3(i){let e,n,t,o;const r=[k3,M3],s=[];function c(a,l){return a[2]?0:1}return e=c(i),n=s[e]=r[e](i),{c(){n.c(),t=me()},m(a,l){s[e].m(a,l),x(a,t,l),o=!0},p(a,l){let u=e;e=c(a),e!==u&&(j(),$(s[u],1,1,()=>{s[u]=null}),q(),n=s[e],n||(n=s[e]=r[e](a),n.c()),d(n,1),n.m(t.parentNode,t))},i(a){o||(d(n),o=!0)},o(a){$(n),o=!1},d(a){a&&b(t),s[e].d(a)}}}function T3(i){let e,n;return e=new dt({props:{disabled:i[0],size:1,variant:"ghost-block",color:"neutral",$$slots:{default:[S3]},$$scope:{ctx:i}}}),e.$on("click",i[6]),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p(t,o){const r={};1&o&&(r.disabled=t[0]),260&o&&(r.$$scope={dirty:o,ctx:t}),e.$set(r)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function E3(i){let e,n,t=i[3].flags.enablePromptEnhancer&&Jc(i);return{c(){t&&t.c(),e=me()},m(o,r){t&&t.m(o,r),x(o,e,r),n=!0},p(o,[r]){o[3].flags.enablePromptEnhancer?t?(t.p(o,r),8&r&&d(t,1)):(t=Jc(o),t.c(),d(t,1),t.m(e.parentNode,e)):t&&(j(),$(t,1,1,()=>{t=null}),q())},i(o){n||(d(t),n=!0)},o(o){$(t),n=!1},d(o){o&&b(e),t&&t.d(o)}}}function I3(i,e,n){let t,o,{onRewrite:r}=e,{isDisabled:s=!1}=e,{disabledReason:c}=e;const a=Se("chatModel");if(Te(i,a,u=>n(3,o=u)),!a)throw new Error("ChatModel not found in context");const l=Tt(!1);return Te(i,l,u=>n(2,t=u)),i.$$set=u=>{"onRewrite"in u&&n(7,r=u.onRewrite),"isDisabled"in u&&n(0,s=u.isDisabled),"disabledReason"in u&&n(1,c=u.disabledReason)},[s,c,t,o,a,l,function(){xi(l,t=!0,t);try{Promise.resolve(r()).finally(()=>{xi(l,t=!1,t)})}catch{xi(l,t=!1,t)}},r]}function L3(i){let e,n,t=[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 448 512"},i[0]],o={};for(let r=0;r<t.length;r+=1)o=Me(o,t[r]);return{c(){e=rt("svg"),n=new en(!0),this.h()},l(r){e=tn(r,"svg",{xmlns:!0,"data-ds-icon":!0,viewBox:!0});var s=nn(e);n=on(s,!0),s.forEach(b),this.h()},h(){n.a=null,ut(e,o)},m(r,s){rn(r,e,s),n.m('<!--!Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2025 Fonticons, Inc.--><path d="M224 0c-17.7 0-32 14.3-32 32v19.2C119 66 64 130.6 64 208v18.8c0 47-17.3 92.4-48.5 127.6l-7.4 8.3c-8.4 9.4-10.4 22.9-5.3 34.4S19.4 416 32 416h384c12.6 0 24-7.4 29.2-18.9s3.1-25-5.3-34.4l-7.4-8.3c-31.2-35.2-48.5-80.5-48.5-127.6V208c0-77.4-55-142-128-156.8V32c0-17.7-14.3-32-32-32m45.3 493.3c12-12 18.7-28.3 18.7-45.3H160c0 17 6.7 33.3 18.7 45.3S207 512 224 512s33.3-6.7 45.3-18.7"/>',e)},p(r,[s]){ut(e,o=Mt(t,[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 448 512"},1&s&&r[0]]))},i:P,o:P,d(r){r&&b(e)}}}function R3(i,e,n){return i.$$set=t=>{n(0,e=Me(Me({},e),it(t)))},[e=it(e)]}class D3 extends ue{constructor(e){super(),de(this,e,R3,L3,ce,{})}}function N3(i){let e,n,t=[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 640 512"},i[0]],o={};for(let r=0;r<t.length;r+=1)o=Me(o,t[r]);return{c(){e=rt("svg"),n=new en(!0),this.h()},l(r){e=tn(r,"svg",{xmlns:!0,"data-ds-icon":!0,viewBox:!0});var s=nn(e);n=on(s,!0),s.forEach(b),this.h()},h(){n.a=null,ut(e,o)},m(r,s){rn(r,e,s),n.m('<!--!Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2025 Fonticons, Inc.--><path d="M38.8 5.1C28.4-3.1 13.3-1.2 5.1 9.2s-6.3 25.5 4.1 33.7l592 464c10.4 8.2 25.5 6.3 33.7-4.1s6.3-25.5-4.1-33.7l-90.2-70.7c.2-.4.4-.9.6-1.3 5.2-11.5 3.1-25-5.3-34.4l-7.4-8.3c-31.2-35.2-48.5-80.5-48.5-127.6V208c0-77.4-55-142-128-156.8V32c0-17.7-14.3-32-32-32s-32 14.3-32 32v19.2c-42.6 8.6-79 34.2-102 69.3zM406.2 416 160 222.1v4.8c0 47-17.3 92.4-48.5 127.6l-7.4 8.3c-8.4 9.4-10.4 22.9-5.3 34.4S115.4 416 128 416zm-40.9 77.3c12-12 18.7-28.3 18.7-45.3H256c0 17 6.7 33.3 18.7 45.3S303 512 320 512s33.3-6.7 45.3-18.7"/>',e)},p(r,[s]){ut(e,o=Mt(t,[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 640 512"},1&s&&r[0]]))},i:P,o:P,d(r){r&&b(e)}}}function P3(i,e,n){return i.$$set=t=>{n(0,e=Me(Me({},e),it(t)))},[e=it(e)]}class F3 extends ue{constructor(e){super(),de(this,e,P3,N3,ce,{})}}function O3(i){let e,n;return e=new F3({}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function z3(i){let e,n;return e=new D3({}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function Qc(i){let e;return{c(){e=G(i[2])},m(n,t){x(n,e,t)},p(n,t){4&t&&_e(e,n[2])},d(n){n&&b(e)}}}function B3(i){let e,n,t,o,r;const s=[z3,O3],c=[];function a(u,f){return u[0]?0:1}e=a(i),n=c[e]=s[e](i);let l=i[1]&&i[2]&&Qc(i);return{c(){n.c(),t=B(),l&&l.c(),o=me()},m(u,f){c[e].m(u,f),x(u,t,f),l&&l.m(u,f),x(u,o,f),r=!0},p(u,f){let m=e;e=a(u),e!==m&&(j(),$(c[m],1,1,()=>{c[m]=null}),q(),n=c[e],n||(n=c[e]=s[e](u),n.c()),d(n,1),n.m(t.parentNode,t)),u[1]&&u[2]?l?l.p(u,f):(l=Qc(u),l.c(),l.m(o.parentNode,o)):l&&(l.d(1),l=null)},i(u){r||(d(n),r=!0)},o(u){$(n),r=!1},d(u){u&&(b(t),b(o)),c[e].d(u),l&&l.d(u)}}}function U3(i){let e,n;return e=new dt({props:{color:i[1]?i[3]:"neutral",size:1,variant:i[1]?"soft":"ghost-block",radius:"full",$$slots:{default:[B3]},$$scope:{ctx:i}}}),e.$on("click",i[5]),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p(t,o){const r={};10&o&&(r.color=t[1]?t[3]:"neutral"),2&o&&(r.variant=t[1]?"soft":"ghost-block"),135&o&&(r.$$scope={dirty:o,ctx:t}),e.$set(r)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function H3(i){let e,n,t,o;return n=new Ne({props:{content:i[4],hasPointerEvents:!1,triggerOn:[Je.Hover],$$slots:{default:[U3]},$$scope:{ctx:i}}}),{c(){e=L("div"),v(n.$$.fragment),A(e,"class",t="c-notify-button "+(i[0]?"c-notify-button--enabled":"")+" svelte-1yqfwnl")},m(r,s){x(r,e,s),w(n,e,null),o=!0},p(r,[s]){const c={};16&s&&(c.content=r[4]),143&s&&(c.$$scope={dirty:s,ctx:r}),n.$set(c),(!o||1&s&&t!==(t="c-notify-button "+(r[0]?"c-notify-button--enabled":"")+" svelte-1yqfwnl"))&&A(e,"class",t)},i(r){o||(d(n.$$.fragment,r),o=!0)},o(r){$(n.$$.fragment,r),o=!1},d(r){r&&b(e),y(n)}}}function j3(i,e,n){let{enabled:t=!1}=e,{isUnread:o=!1}=e,{unreadCount:r=1}=e,{statusColor:s="neutral"}=e,{tooltipText:c=""}=e;const a=V$();return i.$$set=l=>{"enabled"in l&&n(0,t=l.enabled),"isUnread"in l&&n(1,o=l.isUnread),"unreadCount"in l&&n(2,r=l.unreadCount),"statusColor"in l&&n(3,s=l.statusColor),"tooltipText"in l&&n(4,c=l.tooltipText)},[t,o,r,s,c,function(){a("toggle")}]}class q3 extends ue{constructor(e){super(),de(this,e,j3,H3,ce,{enabled:0,isUnread:1,unreadCount:2,statusColor:3,tooltipText:4})}}function W3(i){let e,n;return e=new q3({props:{enabled:i[0],isUnread:i[3],statusColor:i[1],tooltipText:i[2]}}),e.$on("toggle",i[5]),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p(t,[o]){const r={};1&o&&(r.enabled=t[0]),8&o&&(r.isUnread=t[3]),2&o&&(r.statusColor=t[1]),4&o&&(r.tooltipText=t[2]),e.$set(r)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function V3(i,e,n){let t,o,r,s,c,{agentId:a}=e,{status:l}=e,{workspaceStatus:u}=e,{hasUpdates:f=!1}=e;const m=Se("remoteAgentsModel");let p;Te(i,m,M=>n(12,c=M));let _=!1;return i.$$set=M=>{"agentId"in M&&n(6,a=M.agentId),"status"in M&&n(7,l=M.status),"workspaceStatus"in M&&n(8,u=M.workspaceStatus),"hasUpdates"in M&&n(9,f=M.hasUpdates)},i.$$.update=()=>{384&i.$$.dirty&&(u===pf.workspaceRunning?n(1,p=u1(l)):n(1,p=d1(u))),640&i.$$.dirty&&n(3,t=(l===Jt.agentIdle||l===Jt.agentFailed)&&f),4160&i.$$.dirty&&n(10,o=a??c.currentAgentId),4096&i.$$.dirty&&n(11,r=c.newAgentDraft),7168&i.$$.dirty&&(o?n(0,_=c.notificationSettings[o]??!0):r&&n(0,_=r.enableNotification)),4161&i.$$.dirty&&n(2,s=_?"You'll be notified when the agent is ready for review. Click to turn off.":"Click to turn on notifications when the agent is ready for review. "+(a===c.currentAgentId?"You will not be notified while you're actively viewing this agent.":""))},[_,p,s,t,m,async function(){if(o)m.setNotificationEnabled(o,!_);else{const M=m.newAgentDraft;if(M){m.setNewAgentDraft({...M,enableNotification:!_});try{const C=_?gs.disableNotifications:gs.enableNotifications;await m.reportRemoteAgentSetupWindowEvent(C)}catch(C){console.error("Failed to report notification toggle event:",C)}}}},a,l,u,f,o,r,c]}class Jf extends ue{constructor(e){super(),de(this,e,V3,W3,ce,{agentId:6,status:7,workspaceStatus:8,hasUpdates:9})}}const ho={Root:class extends ue{constructor(i){super(),de(this,i,Tv,Sv,ce,{})}},SendButton:class extends ue{constructor(i){super(),de(this,i,sw,rw,ce,{primaryAction:0,isDisabled:1,disabledReason:13})}},ContextMenu:class extends ue{constructor(i){super(),de(this,i,Hw,Uw,ce,{onCloseDropdown:0,onInsertMentionable:13,closeDropdown:1,openDropdown:14,toggleDropdown:2})}get closeDropdown(){return this.$$.ctx[1]}get openDropdown(){return this.$$.ctx[14]}get toggleDropdown(){return this.$$.ctx[2]}},ActionsMenu:class extends ue{constructor(i){super(),de(this,i,Qw,Jw,ce,{onCloseDropdown:8})}},AddFileButton:class extends ue{constructor(i){super(),de(this,i,l3,a3,ce,{accept:0,disabled:1,onAddFiles:2})}},ResendButton:class extends ue{constructor(i){super(),de(this,i,x3,b3,ce,{resendAction:0})}},CancelButton:class extends ue{constructor(i){super(),de(this,i,m3,f3,ce,{cancelAction:1})}},RewritePromptButton:class extends ue{constructor(i){super(),de(this,i,I3,E3,ce,{onRewrite:7,isDisabled:0,disabledReason:1})}},NotifyButton:Jf};function G3(i){let e,n,t=[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 512 512"},i[0]],o={};for(let r=0;r<t.length;r+=1)o=Me(o,t[r]);return{c(){e=rt("svg"),n=new en(!0),this.h()},l(r){e=tn(r,"svg",{xmlns:!0,"data-ds-icon":!0,viewBox:!0});var s=nn(e);n=on(s,!0),s.forEach(b),this.h()},h(){n.a=null,ut(e,o)},m(r,s){rn(r,e,s),n.m('<!--! Font Awesome Pro 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2024 Fonticons, Inc.--><path d="M192 48c22.1 0 40 17.9 40 40v40h-19.3c-6.2-14.1-20.3-24-36.7-24-22.1 0-40 17.9-40 40s17.9 40 40 40c16.4 0 30.5-9.9 36.7-24H232v96h-40c-26.5 0-48 21.5-48 48v11.3c-14.1 6.2-24 20.3-24 36.7 0 22.1 17.9 40 40 40s40-17.9 40-40c0-16.4-9.9-30.5-24-36.7V304c0-8.8 7.2-16 16-16h40v132c0 24.3-19.7 44-44 44-17.8 0-33.2-10.6-40.1-25.9-3.8-8.4-12-13.9-21.2-14.1-25.9-.7-46.7-21.9-46.7-48 0-2.6.2-5.2.6-7.6 1.4-8.5-2-17.1-8.7-22.5C57.3 334.1 48 316.2 48 296c0-19.3 8.5-36.6 22.1-48.3 8-6.9 10.5-18.3 6.1-28-2.7-6-4.2-12.6-4.2-19.7 0-18.8 10.8-35.1 26.7-43 8.1-4 13.3-12.3 13.3-21.3.1-19.3 11.7-36 28.3-43.5 6.4-2.9 11.3-8.5 13.2-15.3C158.3 60.2 173.8 48 192 48m-4 464c26.9 0 51.2-11.6 68-30 16.8 18.5 41.1 30 68 30 32.2 0 60.5-16.5 76.9-41.5 45-8 79.1-47.3 79.1-94.5v-1.6c19.8-20.2 32-47.9 32-78.4 0-27.8-10.1-53.2-26.8-72.7 1.8-7.5 2.8-15.3 2.8-23.3 0-32.6-16.3-61.5-41.1-78.8-4.5-28.9-21.8-53.5-45.9-67.8C387.5 22 356.3 0 320 0c-25.2 0-48 10.6-64 27.6C240 10.6 217.2 0 192 0c-36.3 0-67.5 22-80.9 53.4-24.2 14.3-41.5 38.9-46 67.8C40.3 138.5 24 167.4 24 200c0 8 1 15.8 2.8 23.3C10.1 242.8 0 268.2 0 296c0 30.5 12.2 58.2 32 78.4v1.6c0 47.3 34.1 86.5 79.1 94.5 16.4 25 44.7 41.5 76.9 41.5m136-48c-24.3 0-44-19.7-44-44v-68h51.3c6.2 14.1 20.3 24 36.7 24 22.1 0 40-17.9 40-40s-17.9-40-40-40c-16.4 0-30.5 9.9-36.7 24H280V160h40c8.8 0 16 7.2 16 16v11.3c-14.1 6.2-24 20.3-24 36.7 0 22.1 17.9 40 40 40s40-17.9 40-40c0-16.4-9.9-30.5-24-36.7V176c0-26.5-21.5-48-48-48h-40V88c0-22.1 17.9-40 40-40 18.2 0 33.7 12.2 38.5 28.9 1.9 6.8 6.8 12.4 13.2 15.3 16.6 7.5 28.2 24.1 28.3 43.5.1 9.1 5.2 17.3 13.3 21.3 15.9 7.9 26.7 24.2 26.7 43 0 7.1-1.5 13.7-4.2 19.7-4.4 9.7-1.9 21 6.1 28 13.5 11.8 22.1 29 22.1 48.3 0 20.2-9.3 38.1-23.9 49.9-6.7 5.4-10 14-8.7 22.5.4 2.5.6 5 .6 7.6 0 26.1-20.8 47.3-46.7 48-9.2.3-17.4 5.7-21.2 14.1-6.9 15.3-22.3 25.9-40.1 25.9M176 128a16 16 0 1 1 0 32 16 16 0 1 1 0-32m-16 208a16 16 0 1 1 0 32 16 16 0 1 1 0-32m176-112a16 16 0 1 1 32 0 16 16 0 1 1-32 0m32 96a16 16 0 1 1 0 32 16 16 0 1 1 0-32"/>',e)},p(r,[s]){ut(e,o=Mt(t,[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 512 512"},1&s&&r[0]]))},i:P,o:P,d(r){r&&b(e)}}}function Y3(i,e,n){return i.$$set=t=>{n(0,e=Me(Me({},e),it(t)))},[e=it(e)]}class K3 extends ue{constructor(e){super(),de(this,e,Y3,G3,ce,{})}}function el(i,e,n){const t=i.slice();return t[10]=e[n],t}function X3(i){let e,n=i[1].name+"";return{c(){e=G(n)},m(t,o){x(t,e,o)},p(t,o){2&o&&n!==(n=t[1].name+"")&&_e(e,n)},d(t){t&&b(e)}}}function Z3(i){let e,n,t;return n=new Ge({props:{size:1,$$slots:{default:[X3]},$$scope:{ctx:i}}}),{c(){e=L("span"),v(n.$$.fragment),A(e,"class","c-model-picker__text-wrapper")},m(o,r){x(o,e,r),w(n,e,null),t=!0},p(o,r){const s={};8194&r&&(s.$$scope={dirty:r,ctx:o}),n.$set(s)},i(o){t||(d(n.$$.fragment,o),t=!0)},o(o){$(n.$$.fragment,o),t=!1},d(o){o&&b(e),y(n)}}}function J3(i){let e,n;return e=new K3({props:{slot:"iconLeft"}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p:P,i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function Q3(i){let e,n;return e=new ht({props:{size:1,variant:"ghost-block",color:"neutral",$$slots:{iconLeft:[J3],default:[Z3]},$$scope:{ctx:i}}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p(t,o){const r={};8194&o&&(r.$$scope={dirty:o,ctx:t}),e.$set(r)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function e4(i){let e,n;return e=new Yi({props:{$$slots:{default:[Q3]},$$scope:{ctx:i}}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p(t,o){const r={};8194&o&&(r.$$scope={dirty:o,ctx:t}),e.$set(r)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function t4(i){let e,n;return e=new Ne({props:{content:`Model: ${i[1].name}`,triggerOn:[Je.Hover],offset:[0,c4],$$slots:{default:[e4]},$$scope:{ctx:i}}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p(t,o){const r={};2&o&&(r.content=`Model: ${t[1].name}`),8194&o&&(r.$$scope={dirty:o,ctx:t}),e.$set(r)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function n4(i){let e;return{c(){e=G("Internal Testing Only")},m(n,t){x(n,e,t)},d(n){n&&b(e)}}}function o4(i){let e,n=_i.name+"";return{c(){e=G(n)},m(t,o){x(t,e,o)},p:P,d(t){t&&b(e)}}}function tl(i){let e,n,t;return n=new To({}),{c(){e=L("span"),v(n.$$.fragment),A(e,"class","c-model-picker__check-icon svelte-hq3rg5")},m(o,r){x(o,e,r),w(n,e,null),t=!0},i(o){t||(d(n.$$.fragment,o),t=!0)},o(o){$(n.$$.fragment,o),t=!1},d(o){o&&b(e),y(n)}}}function r4(i){let e,n,t,o,r=i[10].id===i[1].id&&tl();return{c(){e=L("span"),e.textContent=`${i[10].name}`,n=B(),r&&r.c(),t=B(),A(e,"class","c-model-picker__item-text svelte-hq3rg5")},m(s,c){x(s,e,c),x(s,n,c),r&&r.m(s,c),x(s,t,c),o=!0},p(s,c){s[10].id===s[1].id?r?2&c&&d(r,1):(r=tl(),r.c(),d(r,1),r.m(t.parentNode,t)):r&&(j(),$(r,1,1,()=>{r=null}),q())},i(s){o||(d(r),o=!0)},o(s){$(r),o=!1},d(s){s&&(b(e),b(n),b(t)),r&&r.d(s)}}}function nl(i){let e,n;return e=new we.Item({props:{highlight:i[10].id===i[1].id,onSelect:function(){return i[8](i[10])},$$slots:{default:[r4]},$$scope:{ctx:i}}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p(t,o){i=t;const r={};2&o&&(r.highlight=i[10].id===i[1].id),8194&o&&(r.$$scope={dirty:o,ctx:i}),e.$set(r)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function i4(i){let e,n,t,o,r,s,c,a;e=new we.Label({props:{$$slots:{default:[n4]},$$scope:{ctx:i}}}),t=new we.Item({props:{onSelect:i[7],$$slots:{default:[o4]},$$scope:{ctx:i}}}),r=new we.Separator({});let l=at(i[2].getModels().filter(ol)),u=[];for(let m=0;m<l.length;m+=1)u[m]=nl(el(i,l,m));const f=m=>$(u[m],1,1,()=>{u[m]=null});return{c(){v(e.$$.fragment),n=B(),v(t.$$.fragment),o=B(),v(r.$$.fragment),s=B();for(let m=0;m<u.length;m+=1)u[m].c();c=me()},m(m,p){w(e,m,p),x(m,n,p),w(t,m,p),x(m,o,p),w(r,m,p),x(m,s,p);for(let _=0;_<u.length;_+=1)u[_]&&u[_].m(m,p);x(m,c,p),a=!0},p(m,p){const _={};8192&p&&(_.$$scope={dirty:p,ctx:m}),e.$set(_);const M={};if(8192&p&&(M.$$scope={dirty:p,ctx:m}),t.$set(M),22&p){let C;for(l=at(m[2].getModels().filter(ol)),C=0;C<l.length;C+=1){const T=el(m,l,C);u[C]?(u[C].p(T,p),d(u[C],1)):(u[C]=nl(T),u[C].c(),d(u[C],1),u[C].m(c.parentNode,c))}for(j(),C=l.length;C<u.length;C+=1)f(C);q()}},i(m){if(!a){d(e.$$.fragment,m),d(t.$$.fragment,m),d(r.$$.fragment,m);for(let p=0;p<l.length;p+=1)d(u[p]);a=!0}},o(m){$(e.$$.fragment,m),$(t.$$.fragment,m),$(r.$$.fragment,m),u=u.filter(Boolean);for(let p=0;p<u.length;p+=1)$(u[p]);a=!1},d(m){m&&(b(n),b(o),b(s),b(c)),y(e,m),y(t,m),y(r,m),pn(u,m)}}}function s4(i){let e,n,t,o;return e=new we.Trigger({props:{$$slots:{default:[t4]},$$scope:{ctx:i}}}),t=new we.Content({props:{side:"top",align:"start",$$slots:{default:[i4]},$$scope:{ctx:i}}}),{c(){v(e.$$.fragment),n=B(),v(t.$$.fragment)},m(r,s){w(e,r,s),x(r,n,s),w(t,r,s),o=!0},p(r,s){const c={};8194&s&&(c.$$scope={dirty:s,ctx:r}),e.$set(c);const a={};8194&s&&(a.$$scope={dirty:s,ctx:r}),t.$set(a)},i(r){o||(d(e.$$.fragment,r),d(t.$$.fragment,r),o=!0)},o(r){$(e.$$.fragment,r),$(t.$$.fragment,r),o=!1},d(r){r&&b(n),y(e,r),y(t,r)}}}function a4(i){let e,n,t,o={nested:!1,$$slots:{default:[s4]},$$scope:{ctx:i}};return n=new we.Root({props:o}),i[9](n),{c(){e=L("div"),v(n.$$.fragment),A(e,"class","c-model-picker svelte-hq3rg5")},m(r,s){x(r,e,s),w(n,e,null),t=!0},p(r,[s]){const c={};8194&s&&(c.$$scope={dirty:s,ctx:r}),n.$set(c)},i(r){t||(d(n.$$.fragment,r),t=!0)},o(r){$(n.$$.fragment,r),t=!1},d(r){r&&b(e),i[9](null),y(n)}}}const c4=5,ol=i=>i.id!==null;function l4(i,e,n){let t,o,r;const s=Se("modelRegistry"),c=Se("chatModel");let a;function l(u){t&&t.setSelectedModelId(u),a==null||a.requestClose()}return Te(i,c,u=>n(6,r=u)),i.$$.update=()=>{64&i.$$.dirty&&n(5,t=r.currentConversationModel),32&i.$$.dirty&&n(1,o=s.getModel((t==null?void 0:t.selectedModelId)??null))},[a,o,s,c,l,t,r,()=>l(null),u=>{l(u.id)},function(u){et[u?"unshift":"push"](()=>{a=u,n(0,a)})}]}class u4 extends ue{constructor(e){super(),de(this,e,l4,a4,ce,{})}}function rl(i){let e;function n(r,s){return r[0]===r[1]?$4:d4}let t=n(i),o=t(i);return{c(){o.c(),e=me()},m(r,s){o.m(r,s),x(r,e,s)},p(r,s){t===(t=n(r))&&o?o.p(r,s):(o.d(1),o=t(r),o&&(o.c(),o.m(e.parentNode,e)))},d(r){r&&b(e),o.d(r)}}}function d4(i){let e,n,t,o,r=i[0]+1+"",s=i[1]+1+"";return{c(){e=G("L"),n=G(r),t=G("-"),o=G(s)},m(c,a){x(c,e,a),x(c,n,a),x(c,t,a),x(c,o,a)},p(c,a){1&a&&r!==(r=c[0]+1+"")&&_e(n,r),2&a&&s!==(s=c[1]+1+"")&&_e(o,s)},d(c){c&&(b(e),b(n),b(t),b(o))}}}function $4(i){let e,n,t=i[0]+1+"";return{c(){e=G("L"),n=G(t)},m(o,r){x(o,e,r),x(o,n,r)},p(o,r){1&r&&t!==(t=o[0]+1+"")&&_e(n,t)},d(o){o&&(b(e),b(n))}}}function f4(i){let e,n,t,o=i[0]!==void 0&&i[1]!==void 0&&rl(i);return{c(){e=L("span"),n=G(i[2]),t=B(),o&&o.c(),A(e,"class","c-selection-item svelte-xiswvu")},m(r,s){x(r,e,s),F(e,n),F(e,t),o&&o.m(e,null)},p(r,[s]){4&s&&_e(n,r[2]),r[0]!==void 0&&r[1]!==void 0?o?o.p(r,s):(o=rl(r),o.c(),o.m(e,null)):o&&(o.d(1),o=null)},i:P,o:P,d(r){r&&b(e),o&&o.d()}}}function m4(i,e,n){let t,o,r,s,c,{fileSelection:a}=e;return i.$$set=l=>{"fileSelection"in l&&n(3,a=l.fileSelection)},i.$$.update=()=>{8&i.$$.dirty&&n(5,t=a.pathName||""),8&i.$$.dirty&&(a.fullRange?(n(0,s=a.fullRange.startLineNumber),n(1,c=a.fullRange.endLineNumber)):a.range&&(n(0,s=a.range.start),n(1,c=a.range.stop))),32&i.$$.dirty&&n(4,o=t.split("/").filter(l=>l.length>0)),16&i.$$.dirty&&n(2,r=o[o.length-1])},[s,c,r,a,o,t]}class p4 extends ue{constructor(e){super(),de(this,e,m4,f4,ce,{fileSelection:3})}}function il(i,e,n){const t=i.slice();return t[18]=e[n],t}function g4(i){let e,n,t,o,r,s,c,a,l,u,f,m;const p=[w4,v4],_=[];function M(C,T){var E;return C[1]!==void 0&&((E=C[1])==null?void 0:E.length)>0?0:1}return s=M(i),c=_[s]=p[s](i),{c(){e=L("p"),n=G("/"),t=G(i[2]),o=B(),r=L("div"),c.c(),a=B(),l=L("input"),A(e,"class","c-action-label svelte-34wttr"),A(l,"type","text"),A(l,"class","c-tiny-input-inline svelte-34wttr"),A(r,"class","c-max-element-inline svelte-34wttr")},m(C,T){x(C,e,T),F(e,n),F(e,t),x(C,o,T),x(C,r,T),_[s].m(r,null),F(r,a),F(r,l),u=!0,f||(m=[Le(l,"keydown",i[9]),Le(l,"keyup",i[10])],f=!0)},p(C,T){(!u||4&T)&&_e(t,C[2]);let E=s;s=M(C),s===E?_[s].p(C,T):(j(),$(_[E],1,1,()=>{_[E]=null}),q(),c=_[s],c?c.p(C,T):(c=_[s]=p[s](C),c.c()),d(c,1),c.m(r,a))},i(C){u||(d(c),u=!0)},o(C){$(c),u=!1},d(C){C&&(b(e),b(o),b(r)),_[s].d(),f=!1,Qt(m)}}}function h4(i){let e,n,t,o,r,s,c,a;return{c(){var l;e=L("p"),n=G("/"),t=G(i[2]),o=B(),r=L("input"),A(e,"class","c-action-label svelte-34wttr"),A(r,"type","text"),A(r,"class","c-max-element-inline svelte-34wttr"),A(r,"placeholder",s=(l=i[4])==null?void 0:l.placeholderText)},m(l,u){x(l,e,u),F(e,n),F(e,t),x(l,o,u),x(l,r,u),pr(r,i[0]),c||(a=[Le(r,"input",i[12]),Le(r,"keydown",i[8]),Le(r,"keyup",i[10])],c=!0)},p(l,u){var f;4&u&&_e(t,l[2]),16&u&&s!==(s=(f=l[4])==null?void 0:f.placeholderText)&&A(r,"placeholder",s),1&u&&r.value!==l[0]&&pr(r,l[0])},i:P,o:P,d(l){l&&(b(e),b(o),b(r)),c=!1,Qt(a)}}}function v4(i){var o;let e,n,t=((o=i[4])==null?void 0:o.selectionReminderMessage)+"";return{c(){e=L("span"),n=G(t),A(e,"class","c-select-code-msg")},m(r,s){x(r,e,s),F(e,n)},p(r,s){var c;16&s&&t!==(t=((c=r[4])==null?void 0:c.selectionReminderMessage)+"")&&_e(n,t)},i:P,o:P,d(r){r&&b(e)}}}function w4(i){let e,n,t=at(i[1]),o=[];for(let s=0;s<t.length;s+=1)o[s]=sl(il(i,t,s));const r=s=>$(o[s],1,1,()=>{o[s]=null});return{c(){for(let s=0;s<o.length;s+=1)o[s].c();e=me()},m(s,c){for(let a=0;a<o.length;a+=1)o[a]&&o[a].m(s,c);x(s,e,c),n=!0},p(s,c){if(2&c){let a;for(t=at(s[1]),a=0;a<t.length;a+=1){const l=il(s,t,a);o[a]?(o[a].p(l,c),d(o[a],1)):(o[a]=sl(l),o[a].c(),d(o[a],1),o[a].m(e.parentNode,e))}for(j(),a=t.length;a<o.length;a+=1)r(a);q()}},i(s){if(!n){for(let c=0;c<t.length;c+=1)d(o[c]);n=!0}},o(s){o=o.filter(Boolean);for(let c=0;c<o.length;c+=1)$(o[c]);n=!1},d(s){s&&b(e),pn(o,s)}}}function sl(i){let e,n;return e=new p4({props:{fileSelection:i[18].selection}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p(t,o){const r={};2&o&&(r.fileSelection=t[18].selection),e.$set(r)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function y4(i){let e,n,t,o,r,s,c;const a=[h4,g4],l=[];function u(f,m){return f[2]==="find"?0:1}return t=u(i),o=l[t]=a[t](i),{c(){e=L("div"),n=L("div"),o.c(),A(n,"class","c-action-row svelte-34wttr"),A(e,"class","c-action svelte-34wttr"),A(e,"role","button"),A(e,"tabindex","-1")},m(f,m){x(f,e,m),F(e,n),l[t].m(n,null),r=!0,s||(c=[Le(e,"click",i[7]),Le(e,"keydown",b4)],s=!0)},p(f,[m]){let p=t;t=u(f),t===p?l[t].p(f,m):(j(),$(l[p],1,1,()=>{l[p]=null}),q(),o=l[t],o?o.p(f,m):(o=l[t]=a[t](f),o.c()),d(o,1),o.m(n,null))},i(f){r||(d(o),r=!0)},o(f){$(o),r=!1},d(f){f&&b(e),l[t].d(),s=!1,Qt(c)}}}const b4=i=>{};function x4(i,e,n){let t,o,r,s,c,a,l,u,f=P,m=P,p=P;i.$$.on_destroy.push(()=>f()),i.$$.on_destroy.push(()=>m()),i.$$.on_destroy.push(()=>p());let _=Se("chatModel");if(!_)throw new Error("ChatModel not found in context");let M=Se("slashCommandModel");const C=()=>{const N=document.querySelector("input");N&&(N.focus(),N.select())};let T="",E=!1;function R(){M.cancelActiveCommand()}return ro(C),i.$$.update=()=>{2048&i.$$.dirty&&n(1,o=Object.values(u.selections).sort((N,J)=>N.selection.pathName.localeCompare(J.selection.pathName))),2&i.$$.dirty&&M.setSelections(o),4&i.$$.dirty&&n(4,s=Si(l)),1&i.$$.dirty&&M.setInputText(T)},n(6,t=_.specialContextInputModel),p(),p=lt(t,N=>n(11,u=N)),n(5,r=M.activeCommand),m(),m=lt(r,N=>n(2,l=N)),n(3,c=M.isActiveCommandRunnable),f(),f=lt(c,N=>n(14,a=N)),[T,o,l,c,s,r,t,C,function(N){return!(N.shiftKey||N.ctrlKey||N.metaKey)&&(N.stopPropagation(),N.key==="Enter"?(E=!0,!0):N.key==="Escape"?(R(),!0):N.key==="Backspace"&&(T===""&&R(),!0))},function(N){if(N.ctrlKey||N.metaKey||N.key==="Tab")return!1;if(N.stopPropagation(),!N.shiftKey){if(N.key==="Escape"||N.key==="Backspace")return R(),!0;if(N.key==="Enter"&&a)return M.runActiveCommand(),!0}return N.preventDefault(),!0},function(N){return!N.shiftKey&&!(N.key!=="Enter"||!E||!a)&&(E=!1,M.runActiveCommand(),!0)},u,function(){T=this.value,n(0,T)}]}class _4 extends ue{constructor(e){super(),de(this,e,x4,y4,ce,{})}}function al(i,e,n){const t=i.slice();return t[15]=e[n],t}function cl(i){let e,n;function t(){return i[8](i[15])}return e=new Zf({props:{item:i[15],highlight:i[15]===i[14],onSelect:t}}),{c(){v(e.$$.fragment)},m(o,r){w(e,o,r),n=!0},p(o,r){i=o;const s={};4&r&&(s.item=i[15]),16388&r&&(s.highlight=i[15]===i[14]),4&r&&(s.onSelect=t),e.$set(s)},i(o){n||(d(e.$$.fragment,o),n=!0)},o(o){$(e.$$.fragment,o),n=!1},d(o){y(e,o)}}}function C4(i){let e,n,t=at(i[2]),o=[];for(let s=0;s<t.length;s+=1)o[s]=cl(al(i,t,s));const r=s=>$(o[s],1,1,()=>{o[s]=null});return{c(){for(let s=0;s<o.length;s+=1)o[s].c();e=me()},m(s,c){for(let a=0;a<o.length;a+=1)o[a]&&o[a].m(s,c);x(s,e,c),n=!0},p(s,c){if(16420&c){let a;for(t=at(s[2]),a=0;a<t.length;a+=1){const l=al(s,t,a);o[a]?(o[a].p(l,c),d(o[a],1)):(o[a]=cl(l),o[a].c(),d(o[a],1),o[a].m(e.parentNode,e))}for(j(),a=t.length;a<o.length;a+=1)r(a);q()}},i(s){if(!n){for(let c=0;c<t.length;c+=1)d(o[c]);n=!0}},o(s){o=o.filter(Boolean);for(let c=0;c<o.length;c+=1)$(o[c]);n=!1},d(s){s&&b(e),pn(o,s)}}}function A4(i){let e,n;return e=new Kr({props:{slot:"mentionable",option:i[13]}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p(t,o){const r={};8192&o&&(r.option=t[13]),e.$set(r)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function M4(i){let e,n,t,o;return e=new tr.Menu.Root({props:{mentionables:i[2],onQueryUpdate:i[4],onSelectMentionable:i[5],$$slots:{default:[C4,({activeItem:r})=>({14:r}),({activeItem:r})=>r?16384:0]},$$scope:{ctx:i}}}),t=new tr.ChipTooltip({props:{$$slots:{mentionable:[A4,({mentionable:r})=>({13:r}),({mentionable:r})=>r?8192:0]},$$scope:{ctx:i}}}),{c(){v(e.$$.fragment),n=B(),v(t.$$.fragment)},m(r,s){w(e,r,s),x(r,n,s),w(t,r,s),o=!0},p(r,s){const c={};4&s&&(c.mentionables=r[2]),278532&s&&(c.$$scope={dirty:s,ctx:r}),e.$set(c);const a={};270336&s&&(a.$$scope={dirty:s,ctx:r}),t.$set(a)},i(r){o||(d(e.$$.fragment,r),d(t.$$.fragment,r),o=!0)},o(r){$(e.$$.fragment,r),$(t.$$.fragment,r),o=!1},d(r){r&&b(n),y(e,r),y(t,r)}}}function k4(i){let e,n,t={triggerCharacter:"@",onMentionItemsUpdated:i[0],$$slots:{default:[M4]},$$scope:{ctx:i}};return e=new tr.Root({props:t}),i[9](e),{c(){v(e.$$.fragment)},m(o,r){w(e,o,r),n=!0},p(o,[r]){const s={};1&r&&(s.onMentionItemsUpdated=o[0]),262148&r&&(s.$$scope={dirty:r,ctx:o}),e.$set(s)},i(o){n||(d(e.$$.fragment,o),n=!0)},o(o){$(e.$$.fragment,o),n=!1},d(o){i[9](null),y(e,o)}}}function S4(i,e,n){let t,{requestEditorFocus:o}=e,{onMentionItemsUpdated:r}=e;const s=Se("chatModel");if(!s)throw new Error("ChatModel not found in context");const c=new Ri(s,u),a=c.displayItems;let l;function u(m){return!!l&&(l.insertMention(m),c.closeDropdown(),!0)}function f(m){const p=c.selectMentionable(m);return o(),p}return Te(i,a,m=>n(2,t=m)),jr(()=>{c.dispose()}),i.$$set=m=>{"requestEditorFocus"in m&&n(6,o=m.requestEditorFocus),"onMentionItemsUpdated"in m&&n(0,r=m.onMentionItemsUpdated)},[r,l,t,a,function(m){m===void 0?c.closeDropdown():(c.openDropdown(),c.userQuery.set(m))},f,o,m=>u(m),m=>f(m),function(m){et[m?"unshift":"push"](()=>{l=m,n(1,l)})}]}class T4 extends ue{constructor(e){super(),de(this,e,S4,k4,ce,{requestEditorFocus:6,onMentionItemsUpdated:0,insertMentionNode:7})}get insertMentionNode(){return this.$$.ctx[7]}}function ll(i,e,n){const t=i.slice();return t[14]=e[n],t}function E4(i){let e,n,t,o=i[14].label+"";return{c(){e=G("/"),n=G(o),t=B()},m(r,s){x(r,e,s),x(r,n,s),x(r,t,s)},p(r,s){1&s&&o!==(o=r[14].label+"")&&_e(n,o)},d(r){r&&(b(e),b(n),b(t))}}}function ul(i){let e,n;return e=new tr.Menu.Item({props:{mentionable:i[14],$$slots:{default:[E4]},$$scope:{ctx:i}}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p(t,o){const r={};1&o&&(r.mentionable=t[14]),131073&o&&(r.$$scope={dirty:o,ctx:t}),e.$set(r)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function I4(i){let e,n,t=at(i[0]),o=[];for(let s=0;s<t.length;s+=1)o[s]=ul(ll(i,t,s));const r=s=>$(o[s],1,1,()=>{o[s]=null});return{c(){for(let s=0;s<o.length;s+=1)o[s].c();e=me()},m(s,c){for(let a=0;a<o.length;a+=1)o[a]&&o[a].m(s,c);x(s,e,c),n=!0},p(s,c){if(1&c){let a;for(t=at(s[0]),a=0;a<t.length;a+=1){const l=ll(s,t,a);o[a]?(o[a].p(l,c),d(o[a],1)):(o[a]=ul(l),o[a].c(),d(o[a],1),o[a].m(e.parentNode,e))}for(j(),a=t.length;a<o.length;a+=1)r(a);q()}},i(s){if(!n){for(let c=0;c<t.length;c+=1)d(o[c]);n=!0}},o(s){o=o.filter(Boolean);for(let c=0;c<o.length;c+=1)$(o[c]);n=!1},d(s){s&&b(e),pn(o,s)}}}function L4(i){let e,n,t=i[13].label+"";return{c(){e=L("span"),n=G(t),A(e,"slot","mentionable")},m(o,r){x(o,e,r),F(e,n)},p(o,r){8192&r&&t!==(t=o[13].label+"")&&_e(n,t)},d(o){o&&b(e)}}}function R4(i){let e,n,t,o;return e=new tr.Menu.Root({props:{mentionables:i[0],onQueryUpdate:i[5],onSelectMentionable:i[9],$$slots:{default:[I4]},$$scope:{ctx:i}}}),t=new tr.ChipTooltip({props:{$$slots:{mentionable:[L4,({mentionable:r})=>({13:r}),({mentionable:r})=>r?8192:0]},$$scope:{ctx:i}}}),{c(){v(e.$$.fragment),n=B(),v(t.$$.fragment)},m(r,s){w(e,r,s),x(r,n,s),w(t,r,s),o=!0},p(r,s){const c={};1&s&&(c.mentionables=r[0]),131073&s&&(c.$$scope={dirty:s,ctx:r}),e.$set(c);const a={};139264&s&&(a.$$scope={dirty:s,ctx:r}),t.$set(a)},i(r){o||(d(e.$$.fragment,r),d(t.$$.fragment,r),o=!0)},o(r){$(e.$$.fragment,r),$(t.$$.fragment,r),o=!1},d(r){r&&b(n),y(e,r),y(t,r)}}}function D4(i){let e,n;return e=new tr.Root({props:{pluginId:"augment-slash-actions",triggerCharacter:"/",allowedPrefixes:[],renderText:N4,$$slots:{default:[R4]},$$scope:{ctx:i}}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p(t,[o]){const r={};131073&o&&(r.$$scope={dirty:o,ctx:t}),e.$set(r)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}const N4=()=>"";function P4(i,e,n){let t,o,r,s;const c=Se("chatModel");Te(i,c,p=>n(10,s=p));const a=Se("slashCommandModel"),{activeCommand:l}=a;Te(i,l,p=>n(7,o=p));const u=Se(Bs.CONTEXT_KEY),f=s.flags;let m;return Te(i,f,p=>n(8,r=p)),i.$$.update=()=>{320&i.$$.dirty&&n(0,t=function(p,_){let M=Hf();return _||(M=M.filter(C=>C.id!=="generate-commit-message")),p===void 0?M:M.filter(C=>C.label.toLowerCase().includes(p.toLowerCase()))}(m,r.enableGenerateCommitMessage)),128&i.$$.dirty&&(o?(u.commandManager.hide(),u.commandManager.clearContent()):(u.commandManager.show(),u.commandManager.clearContent(),u.commandManager.requestFocus()))},[t,c,a,l,f,function(p){n(6,m=p)},m,o,r,p=>(a.setActiveCommand(p.id),!0)]}class F4 extends ue{constructor(e){super(),de(this,e,P4,D4,ce,{})}}const{window:ls}=Up,O4=i=>({}),dl=i=>({slot:"banner"});function $l(i){let e,n,t={requestEditorFocus:i[39],onMentionItemsUpdated:i[38]};return e=new T4({props:t}),i[57](e),{c(){v(e.$$.fragment)},m(o,r){w(e,o,r),n=!0},p(o,r){e.$set({})},i(o){n||(d(e.$$.fragment,o),n=!0)},o(o){$(e.$$.fragment,o),n=!1},d(o){i[57](null),y(e,o)}}}function fl(i){let e,n;return e=new F4({}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function ml(i){let e,n,t,o;return e=new s0({props:{saveImage:i[9].saveImage,saveAttachment:i[9].saveAttachment,deleteImage:i[9].deleteImage,renderImage:i[9].renderImage,maxImages:Ai,supportedFileTypes:i[10].enableDebugFeatures?["image","text"]:["image"]}}),t=new zg({props:{flags:i[9].flags}}),{c(){v(e.$$.fragment),n=B(),v(t.$$.fragment)},m(r,s){w(e,r,s),x(r,n,s),w(t,r,s),o=!0},p(r,s){const c={};512&s[0]&&(c.saveImage=r[9].saveImage),512&s[0]&&(c.saveAttachment=r[9].saveAttachment),512&s[0]&&(c.deleteImage=r[9].deleteImage),512&s[0]&&(c.renderImage=r[9].renderImage),1024&s[0]&&(c.supportedFileTypes=r[10].enableDebugFeatures?["image","text"]:["image"]),e.$set(c);const a={};512&s[0]&&(a.flags=r[9].flags),t.$set(a)},i(r){o||(d(e.$$.fragment,r),d(t.$$.fragment,r),o=!0)},o(r){$(e.$$.fragment,r),$(t.$$.fragment,r),o=!1},d(r){r&&b(n),y(e,r),y(t,r)}}}function pl(i){let e,n;return e=new _4({}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function z4(i){let e,n,t,o,r,s,c,a,l,u,f;e=new o1({props:{shortcuts:i[16]}});let m=!i[28].doHideAtMentions&&$l(i),p=!i[7]&&!i[28].doHideSlashActions&&fl();r=new r1({props:{placeholder:i[13]}}),c=new wf.Content({props:{content:i[27],onContentChanged:i[37]}});let _=i[9].flags.enableChatMultimodal&&!i[28].doHideMultimodalActions&&ml(i),M=i[30]&&!i[28].doHideSlashActions&&pl();return{c(){v(e.$$.fragment),n=B(),m&&m.c(),t=B(),p&&p.c(),o=B(),v(r.$$.fragment),s=B(),v(c.$$.fragment),a=B(),_&&_.c(),l=B(),M&&M.c(),u=me()},m(C,T){w(e,C,T),x(C,n,T),m&&m.m(C,T),x(C,t,T),p&&p.m(C,T),x(C,o,T),w(r,C,T),x(C,s,T),w(c,C,T),x(C,a,T),_&&_.m(C,T),x(C,l,T),M&&M.m(C,T),x(C,u,T),f=!0},p(C,T){const E={};65536&T[0]&&(E.shortcuts=C[16]),e.$set(E),C[28].doHideAtMentions?m&&(j(),$(m,1,1,()=>{m=null}),q()):m?(m.p(C,T),268435456&T[0]&&d(m,1)):(m=$l(C),m.c(),d(m,1),m.m(t.parentNode,t)),C[7]||C[28].doHideSlashActions?p&&(j(),$(p,1,1,()=>{p=null}),q()):p?268435584&T[0]&&d(p,1):(p=fl(),p.c(),d(p,1),p.m(o.parentNode,o));const R={};8192&T[0]&&(R.placeholder=C[13]),r.$set(R);const N={};134217728&T[0]&&(N.content=C[27]),c.$set(N),C[9].flags.enableChatMultimodal&&!C[28].doHideMultimodalActions?_?(_.p(C,T),268435968&T[0]&&d(_,1)):(_=ml(C),_.c(),d(_,1),_.m(l.parentNode,l)):_&&(j(),$(_,1,1,()=>{_=null}),q()),C[30]&&!C[28].doHideSlashActions?M?1342177280&T[0]&&d(M,1):(M=pl(),M.c(),d(M,1),M.m(u.parentNode,u)):M&&(j(),$(M,1,1,()=>{M=null}),q())},i(C){f||(d(e.$$.fragment,C),d(m),d(p),d(r.$$.fragment,C),d(c.$$.fragment,C),d(_),d(M),f=!0)},o(C){$(e.$$.fragment,C),$(m),$(p),$(r.$$.fragment,C),$(c.$$.fragment,C),$(_),$(M),f=!1},d(C){C&&(b(n),b(t),b(o),b(s),b(a),b(l),b(u)),y(e,C),m&&m.d(C),p&&p.d(C),y(r,C),y(c,C),_&&_.d(C),M&&M.d(C)}}}function B4(i){let e;const n=i[55].banner,t=Ye(n,i,i[59],dl);return{c(){t&&t.c()},m(o,r){t&&t.m(o,r),e=!0},p(o,r){t&&t.p&&(!e||268435456&r[1])&&Ke(t,n,o,o[59],e?Ze(n,o[59],r,O4):Xe(o[59]),dl)},i(o){e||(d(t,o),e=!0)},o(o){$(t,o),e=!1},d(o){t&&t.d(o)}}}function gl(i){let e,n;return e=new Av({props:{chatModel:i[31]}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p:P,i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function U4(i){let e,n,t=!i[28].doHideContextBar&&gl(i);return{c(){t&&t.c(),e=me()},m(o,r){t&&t.m(o,r),x(o,e,r),n=!0},p(o,r){o[28].doHideContextBar?t&&(j(),$(t,1,1,()=>{t=null}),q()):t?(t.p(o,r),268435456&r[0]&&d(t,1)):(t=gl(o),t.c(),d(t,1),t.m(e.parentNode,e))},i(o){n||(d(t),n=!0)},o(o){$(t),n=!1},d(o){o&&b(e),t&&t.d(o)}}}function hl(i){let e,n;return e=new K0({props:{chatModel:i[31],agentConversationModel:i[32]}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p:P,i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function vl(i){let e,n;return e=new ho.AddFileButton({props:{accept:i[10].enableDebugFeatures?"*":".png,.jpg,.jpeg"}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p(t,o){const r={};1024&o[0]&&(r.accept=t[10].enableDebugFeatures?"*":".png,.jpg,.jpeg"),e.$set(r)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function wl(i){let e,n;return e=new ho.ActionsMenu({props:{onCloseDropdown:i[39]}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p:P,i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function yl(i){var t;let e,n;return e=new ho.ContextMenu({props:{onCloseDropdown:i[39],onInsertMentionable:(t=i[11])==null?void 0:t.insertMentionNode}}),{c(){v(e.$$.fragment)},m(o,r){w(e,o,r),n=!0},p(o,r){var c;const s={};2048&r[0]&&(s.onInsertMentionable=(c=o[11])==null?void 0:c.insertMentionNode),e.$set(s)},i(o){n||(d(e.$$.fragment,o),n=!0)},o(o){$(e.$$.fragment,o),n=!1},d(o){y(e,o)}}}function bl(i){let e,n,t,o;return{c(){e=L("span"),n=G(i[22]),t=G("/"),o=G(Br),A(e,"class","character-counter svelte-pwtee")},m(r,s){x(r,e,s),F(e,n),F(e,t),F(e,o)},p(r,s){4194304&s[0]&&_e(n,r[22])},d(r){r&&b(e)}}}function H4(i){let e;return{c(){e=G("Beta")},m(n,t){x(n,e,t)},d(n){n&&b(e)}}}function xl(i){let e,n;return e=new u4({}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function j4(i){var C;let e,n,t,o,r,s,c,a,l=i[10].enableAgentMode&&i[2]&&hl(i),u=i[9].flags.enableChatMultimodal&&!i[28].doHideMultimodalActions&&vl(i),f=!i[7]&&!i[28].doHideSlashActions&&wl(i),m=!i[28].doHideAtMentions&&yl(i),p=i[22]>Br&&bl(i),_=((C=i[33])==null?void 0:C.isActive)&&function(T){let E,R;return E=new Wm({props:{color:"premium",size:1,variant:"soft",$$slots:{default:[H4]},$$scope:{ctx:T}}}),{c(){v(E.$$.fragment)},m(N,J){w(E,N,J),R=!0},i(N){R||(d(E.$$.fragment,N),R=!0)},o(N){$(E.$$.fragment,N),R=!1},d(N){y(E,N)}}}(i),M=i[24]&&xl();return{c(){l&&l.c(),e=B(),u&&u.c(),n=B(),f&&f.c(),t=B(),m&&m.c(),o=B(),p&&p.c(),r=B(),_&&_.c(),s=B(),M&&M.c(),c=me()},m(T,E){l&&l.m(T,E),x(T,e,E),u&&u.m(T,E),x(T,n,E),f&&f.m(T,E),x(T,t,E),m&&m.m(T,E),x(T,o,E),p&&p.m(T,E),x(T,r,E),_&&_.m(T,E),x(T,s,E),M&&M.m(T,E),x(T,c,E),a=!0},p(T,E){T[10].enableAgentMode&&T[2]?l?(l.p(T,E),1028&E[0]&&d(l,1)):(l=hl(T),l.c(),d(l,1),l.m(e.parentNode,e)):l&&(j(),$(l,1,1,()=>{l=null}),q()),T[9].flags.enableChatMultimodal&&!T[28].doHideMultimodalActions?u?(u.p(T,E),268435968&E[0]&&d(u,1)):(u=vl(T),u.c(),d(u,1),u.m(n.parentNode,n)):u&&(j(),$(u,1,1,()=>{u=null}),q()),T[7]||T[28].doHideSlashActions?f&&(j(),$(f,1,1,()=>{f=null}),q()):f?(f.p(T,E),268435584&E[0]&&d(f,1)):(f=wl(T),f.c(),d(f,1),f.m(t.parentNode,t)),T[28].doHideAtMentions?m&&(j(),$(m,1,1,()=>{m=null}),q()):m?(m.p(T,E),268435456&E[0]&&d(m,1)):(m=yl(T),m.c(),d(m,1),m.m(o.parentNode,o)),T[22]>Br?p?p.p(T,E):(p=bl(T),p.c(),p.m(r.parentNode,r)):p&&(p.d(1),p=null),T[24]?M?16777216&E[0]&&d(M,1):(M=xl(),M.c(),d(M,1),M.m(c.parentNode,c)):M&&(j(),$(M,1,1,()=>{M=null}),q())},i(T){a||(d(l),d(u),d(f),d(m),d(_),d(M),a=!0)},o(T){$(l),$(u),$(f),$(m),$(_),$(M),a=!1},d(T){T&&(b(e),b(n),b(t),b(o),b(r),b(s),b(c)),l&&l.d(T),u&&u.d(T),f&&f.d(T),m&&m.d(T),p&&p.d(T),_&&_.d(T),M&&M.d(T)}}}function _l(i){var t;let e,n;return e=new ho.NotifyButton({props:{agentId:(t=i[6])==null?void 0:t.currentAgentId}}),{c(){v(e.$$.fragment)},m(o,r){w(e,o,r),n=!0},p(o,r){var c;const s={};64&r[0]&&(s.agentId=(c=o[6])==null?void 0:c.currentAgentId),e.$set(s)},i(o){n||(d(e.$$.fragment,o),n=!0)},o(o){$(e.$$.fragment,o),n=!1},d(o){y(e,o)}}}function q4(i){let e,n,t,o;e=new ho.RewritePromptButton({props:{onRewrite:i[41],isDisabled:i[12].isDisabled,disabledReason:i[12].disabledReason}});let r=i[3]&&Cl(i);return{c(){v(e.$$.fragment),n=B(),r&&r.c(),t=me()},m(s,c){w(e,s,c),x(s,n,c),r&&r.m(s,c),x(s,t,c),o=!0},p(s,c){const a={};4096&c[0]&&(a.isDisabled=s[12].isDisabled),4096&c[0]&&(a.disabledReason=s[12].disabledReason),e.$set(a),s[3]?r?(r.p(s,c),8&c[0]&&d(r,1)):(r=Cl(s),r.c(),d(r,1),r.m(t.parentNode,t)):r&&(j(),$(r,1,1,()=>{r=null}),q())},i(s){o||(d(e.$$.fragment,s),d(r),o=!0)},o(s){$(e.$$.fragment,s),$(r),o=!1},d(s){s&&(b(n),b(t)),y(e,s),r&&r.d(s)}}}function W4(i){var t;let e,n;return e=new ho.ResendButton({props:{resendAction:(t=i[8])==null?void 0:t.resendLastExchange}}),{c(){v(e.$$.fragment)},m(o,r){w(e,o,r),n=!0},p(o,r){var c;const s={};256&r[0]&&(s.resendAction=(c=o[8])==null?void 0:c.resendLastExchange),e.$set(s)},i(o){n||(d(e.$$.fragment,o),n=!0)},o(o){$(e.$$.fragment,o),n=!1},d(o){y(e,o)}}}function V4(i){let e,n;return e=new ho.CancelButton({props:{cancelAction:i[32].interruptAgent}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p:P,i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function G4(i){let e,n;return e=new ho.CancelButton({props:{cancelAction:i[17]}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p(t,o){const r={};131072&o[0]&&(r.cancelAction=t[17]),e.$set(r)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function Cl(i){let e,n;return e=new ho.SendButton({props:{isDisabled:i[4],disabledReason:i[21],primaryAction:i[19]}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p(t,o){const r={};16&o[0]&&(r.isDisabled=t[4]),2097152&o[0]&&(r.disabledReason=t[21]),524288&o[0]&&(r.primaryAction=t[19]),e.$set(r)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function Y4(i){let e,n,t,o,r,s=i[29]&&_l(i);const c=[G4,V4,W4,q4],a=[];function l(u,f){return u[18]?0:u[14]?1:u[5]?2:3}return n=l(i),t=a[n]=c[n](i),{c(){s&&s.c(),e=B(),t.c(),o=me()},m(u,f){s&&s.m(u,f),x(u,e,f),a[n].m(u,f),x(u,o,f),r=!0},p(u,f){u[29]?s?(s.p(u,f),536870912&f[0]&&d(s,1)):(s=_l(u),s.c(),d(s,1),s.m(e.parentNode,e)):s&&(j(),$(s,1,1,()=>{s=null}),q());let m=n;n=l(u),n===m?a[n].p(u,f):(j(),$(a[m],1,1,()=>{a[m]=null}),q(),t=a[n],t?t.p(u,f):(t=a[n]=c[n](u),t.c()),d(t,1),t.m(o.parentNode,o))},i(u){r||(d(s),d(t),r=!0)},o(u){$(s),$(t),r=!1},d(u){u&&(b(e),b(o)),s&&s.d(u),a[n].d(u)}}}function K4(i){let e,n;return e=new ho.Root({props:{slot:"footer",$$slots:{rightAlign:[Y4],leftAlign:[j4]},$$scope:{ctx:i}}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p(t,o){const r={};829317116&o[0]|268435456&o[1]&&(r.$$scope={dirty:o,ctx:t}),e.$set(r)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function Al(i){let e,n,t={editable:i[1],$$slots:{footer:[K4],header:[U4],banner:[B4],default:[z4]},$$scope:{ctx:i}};return e=new wf.Root({props:t}),i[58](e),{c(){v(e.$$.fragment)},m(o,r){w(e,o,r),n=!0},p(o,r){const s={};2&r[0]&&(s.editable=o[1]),2037350396&r[0]|268435456&r[1]&&(s.$$scope={dirty:r,ctx:o}),e.$set(s)},i(o){n||(d(e.$$.fragment,o),n=!0)},o(o){$(e.$$.fragment,o),n=!1},d(o){i[58](null),y(e,o)}}}function X4(i){let e,n,t,o,r=i[20],s=Al(i);return{c(){e=L("div"),s.c(),A(e,"class","c-chat-input svelte-pwtee"),A(e,"data-testid","design-system-chat-input")},m(c,a){x(c,e,a),s.m(e,null),n=!0,t||(o=[Le(ls,"focus",i[56]),Le(ls,"blur",function(){Nt(i[9].saveImmediate)&&i[9].saveImmediate.apply(this,arguments)}),Le(ls,"beforeunload",function(){Nt(i[9].saveImmediate)&&i[9].saveImmediate.apply(this,arguments)})],t=!0)},p(c,a){i=c,1048576&a[0]&&ce(r,r=i[20])?(j(),$(s,1,1,P),q(),s=Al(i),s.c(),d(s,1),s.m(e,null)):s.p(i,a)},i(c){n||(d(s),n=!0)},o(c){$(s),n=!1},d(c){c&&b(e),s.d(c),t=!1,Qt(o)}}}function Z4(i,e,n){let t,o,r,s,c,a,l,u,f,m,p,_,M,C,T,E,R,N,J,Q,X,K,H,Y,V,Z,re,le,oe,he,ie,xe,tt,Ae,He=P,Dt=P,It=P,un=P;i.$$.on_destroy.push(()=>He()),i.$$.on_destroy.push(()=>Dt()),i.$$.on_destroy.push(()=>It()),i.$$.on_destroy.push(()=>un());let{$$slots:z={},$$scope:S}=e;const O=Se("chatModel");Te(i,O,We=>n(9,ie=We));const ee=Se("toolsWebviewModel"),se=Se("agentConversationModel"),ve=Se(Tn.key);Te(i,ve,We=>n(6,Z=We));const Ce=Se(hr.key),Oe=Se("slashCommandModel"),qe=Se(mo.key),st=O.flags;Te(i,st,We=>n(10,tt=We));const{currentConversationModel:Ve}=O;Te(i,Ve,We=>n(51,V=We));const{activeCommand:zt}=Oe;Te(i,zt,We=>n(30,Ae=We));let Qe,Lt,{editable:Ot=!0}=e,{placeholder:Pt="Ask or instruct Augment"}=e,{hasToggleModeButton:Cn=!0}=e,{hasSendButton:An=!0}=e,{richTextEditorRoot:Bt}=e;const $n=Ve.onNewConversation(()=>sn());let Gt;jr($n);let gn;const Fn=()=>Bt==null?void 0:Bt.requestFocus(),sn=()=>{var We;return(We=Bt==null?void 0:Bt.forceFocus)==null?void 0:We.call(Bt)},Yt=()=>(Bt==null||Bt.blur(),!0);let Xt=!1;const Qn=Ce==null?void 0:Ce.currentRepositoryUrl;return Te(i,Qn,We=>n(52,re=We)),i.$$set=We=>{"editable"in We&&n(1,Ot=We.editable),"placeholder"in We&&n(42,Pt=We.placeholder),"hasToggleModeButton"in We&&n(2,Cn=We.hasToggleModeButton),"hasSendButton"in We&&n(3,An=We.hasSendButton),"richTextEditorRoot"in We&&n(0,Bt=We.richTextEditorRoot),"$$scope"in We&&n(59,S=We.$$scope)},i.$$.update=()=>{var We,On,zn,Bn,Vn,yn;if(64&i.$$.dirty[0]&&n(29,t=!!(Z!=null&&Z.isActive)),64&i.$$.dirty[0]&&n(28,o=J$(Z)),1048576&i.$$.dirty[1]&&n(50,r=V.draftExchange||{rich_text_json_repr:void 0}),524288&i.$$.dirty[1]&&n(27,s=r.rich_text_json_repr||{type:"doc",content:[{type:"paragraph"}]}),64&i.$$.dirty[0]|1048576&i.$$.dirty[1]&&n(49,c=Z!=null&&Z.isActive?"remoteAgent":(We=V.extraData)!=null&&We.isAgentConversation?"localAgent":"chat"),512&i.$$.dirty[0]|1314816&i.$$.dirty[1]&&ie.conversations[V.id]&&Sn.isNew(ie.conversations[V.id])&&Qe!==c&&(n(43,Qe=c),c!=="remoteAgent"&&Fo().then(()=>sn())),1318912&i.$$.dirty[1]&&Lt!==V.id&&(n(44,Lt=V.id),c!=="remoteAgent"&&Fo().then(()=>sn())),64&i.$$.dirty[0]|16384&i.$$.dirty[1]){const qt=(On=Z==null?void 0:Z.currentAgent)==null?void 0:On.status;Gt!==Jt.agentStarting||qt!==Jt.agentRunning&&qt!==Jt.agentIdle||Fo().then(()=>sn()),n(45,Gt=qt)}if(192&i.$$.dirty[0]&&n(48,u=oe||(Z==null?void 0:Z.isActive)),1024&i.$$.dirty[0]|131072&i.$$.dirty[1]&&n(24,f=u&&tt.enableModelRegistry),512&i.$$.dirty[0]&&(n(23,m=ie.sendModeModel.mode),un(),un=lt(m,qt=>n(54,xe=qt))),577&i.$$.dirty[0]|8388608&i.$$.dirty[1]&&n(47,p=m0(ie,se,ee,Oe,xe,qe,Z,Ce,Bt)),65536&i.$$.dirty[1]&&n(18,_=p.showCancelButton),1048576&i.$$.dirty[1]&&n(22,M=((Bn=(zn=V.draftExchange)==null?void 0:zn.request_message)==null?void 0:Bn.length)||0),65536&i.$$.dirty[1]&&n(4,C=p.isDisabled),65536&i.$$.dirty[1]&&n(21,T=p.disabledReason),65536&i.$$.dirty[1]&&n(19,E=p.action),65536&i.$$.dirty[1]&&n(17,R=p.cancelAction),192&i.$$.dirty[0]|2048&i.$$.dirty[1]&&n(20,N=`${oe}-${Z==null?void 0:Z.isActive}-${Pt}`),512&i.$$.dirty[0]&&(n(15,Q=ie.currentConversationModel),It(),It=lt(Q,qt=>n(8,he=qt))),256&i.$$.dirty[0]){const qt=(Vn=he==null?void 0:he.lastExchange)==null?void 0:Vn.status,En=qt===cn.cancelled,vt=he==null?void 0:he.getLastToolUseState().phase,fn=vt===xt.cancelled;n(46,Xt=En||fn)}192&i.$$.dirty[0]|4194304&i.$$.dirty[1]&&n(14,X=!(Z!=null&&Z.isActive)&&oe&&le!==Dr.notRunning),64&i.$$.dirty[0]|1081344&i.$$.dirty[1]&&n(5,K=!(Z!=null&&Z.isActive)&&Xt&&((yn=V.draftExchange)==null?void 0:yn.request_message)===""),32&i.$$.dirty[0]|2048&i.$$.dirty[1]&&n(13,H=K?"Resend to continue":Pt),80&i.$$.dirty[0]|2097152&i.$$.dirty[1]&&n(12,Y=function(qt,En,vt){var Vt,Ut,pe;if(vt)return{isDisabled:!0,disabledReason:void 0};if(!(qt!=null&&qt.isActive))return{isDisabled:!1,disabledReason:void 0};const fn=(pe=(Ut=(Vt=qt.newAgentDraft)==null?void 0:Vt.commitRef)==null?void 0:Ut.github_commit_ref)==null?void 0:pe.repository_url;if(!fn)return{isDisabled:!1,disabledReason:void 0};const Un=En||"";return Un&&fn!==Un?{isDisabled:!0,disabledReason:"Prompt enhancer is only available when the current repository is selected"}:{isDisabled:!1,disabledReason:void 0}}(Z,re,C))},n(26,{isCurrConversationAgentic:a,agentExchangeStatus:l}=se,a,(n(25,l),He(),He=lt(l,We=>n(53,le=We)),l)),Dt(),Dt=lt(a,We=>n(7,oe=We)),n(16,J={Enter:()=>!C&&E(),Escape:()=>_?R():X?(se.interruptAgent().catch(We=>{console.error("Failed to interrupt agent:",We)}),!0):Yt()}),[Bt,Ot,Cn,An,C,K,Z,oe,he,ie,tt,gn,Y,H,X,Q,J,R,_,E,N,T,M,m,f,l,a,s,o,t,Ae,O,se,ve,st,Ve,zt,function(We){V.saveDraftExchange(We.rawText,We.richTextJsonRepr)},function(We){V.saveDraftMentions(We.current)},Fn,Qn,async function(){var We,On,zn,Bn,Vn;try{const yn=((We=V.draftExchange)==null?void 0:We.request_message)||"";if(!yn||yn.trim()==="")return;const qt=`Here is an instruction that I'd like to give you, but it needs to be improved. Rewrite and enhance this instruction to make it clearer, more specific, less ambiguous, and correct any mistakes. Do not use any tools: reply immediately with your answer, even if you're not sure. Consider the context of our conversation history when enhancing the prompt. Reply with the following format:

### BEGIN RESPONSE ###
Here is an enhanced version of the original instruction that is more specific and clear:
<augment-enhanced-prompt>enhanced prompt goes here</augment-enhanced-prompt>

### END RESPONSE ###

Here is my original instruction:`,En=(On=V.draftExchange)==null?void 0:On.rich_text_json_repr;try{let vt;Z!=null&&Z.isActive&&(vt=Z.getCurrentChatHistory().map(Fe=>({request_id:Fe.request_id||"",request_message:Fe.request_message,response_text:Fe.response_text||""})));let{responseText:fn,requestId:Un}=await V.sendSilentExchange({request_message:`${qt}

${yn}`,disableRetrieval:!1,chatHistory:vt});V.extensionClient.reportAgentRequestEvent({eventName:Zm.enhancedPrompt,conversationId:V.id,requestId:Un,chatHistoryLength:V.chatHistory.length}),V.extensionClient.reportAgentSessionEvent({eventName:Mo.enhancedPrompt,conversationId:V.id});let Vt="";const Ut=/<augment-enhanced-prompt>([\s\S]*?)<\/augment-enhanced-prompt>/,pe=fn.match(Ut);if(pe&&pe[1])Vt=pe[1].trim();else{Vt=yn,console.warn("Enhanced prompt tags not found in response, using original prompt");const Fe=document.createElement("div");Fe.className="enhance-prompt-error-tooltip",Fe.textContent="Failed to enhance prompt, sorry about that",document.body.appendChild(Fe);const _t=Bp(Fe,{content:Fe,trigger:"manual",placement:"top",theme:"error",duration:[300,2e3],onHidden:()=>{Fe.remove()}}),$t=document.querySelector(".c-rewrite-prompt-button");$t?(_t.setProps({getReferenceClientRect:()=>$t.getBoundingClientRect()}),_t.show(),setTimeout(()=>{_t.hide()},3e3)):Fe.remove()}if(Vt&&Vt.trim()!==""){const Fe=(zn=V.draftExchange)==null?void 0:zn.rich_text_json_repr;let _t;if(Fe&&typeof Fe=="object"){if(_t={...Fe},_t.content&&Array.isArray(_t.content)){const $t=[];let nt=!1;for(const ct of _t.content)if(ct.type!=="paragraph"||nt)ct.type!=="paragraph"&&$t.push(ct);else{const dn=Vt.split(`
`),Ee={type:"paragraph",content:[]};dn.forEach((Gn,In)=>{var Eo,Io;Gn.length>0&&((Eo=Ee.content)==null||Eo.push({type:"text",text:Gn})),In<dn.length-1&&((Io=Ee.content)==null||Io.push({type:"hardBreak"}))}),$t.push(Ee),nt=!0}_t.content=$t}}else _t={type:"doc",content:[{type:"paragraph",content:[{type:"text",text:Vt}]}]};V.saveDraftExchange(Vt,_t),setTimeout(()=>{sn();try{const $t=document.querySelector(".ProseMirror");if($t){const nt=$t.querySelector("p");if(nt){const ct=document.createRange(),dn=window.getSelection();ct.setStart(nt,0),ct.collapse(!0),dn&&(dn.removeAllRanges(),dn.addRange(ct))}}}catch{}},200)}else V.saveDraftExchange(En&&((Bn=V.draftExchange)==null?void 0:Bn.request_message)||"",En||{type:"doc",content:[]})}catch{V.saveDraftExchange(En&&((Vn=V.draftExchange)==null?void 0:Vn.request_message)||"",En||{type:"doc",content:[]})}sn()}catch{}},Pt,Qe,Lt,Gt,Xt,p,u,c,r,V,re,le,xe,z,()=>{t||Fn()},function(We){et[We?"unshift":"push"](()=>{gn=We,n(11,gn)})},function(We){et[We?"unshift":"push"](()=>{Bt=We,n(0,Bt)})},S]}class Qf extends ue{constructor(e){super(),de(this,e,Z4,X4,ce,{editable:1,placeholder:42,hasToggleModeButton:2,hasSendButton:3,richTextEditorRoot:0},null,[-1,-1,-1])}}const J4=i=>({}),Ml=i=>({}),Q4=i=>({}),kl=i=>({}),ey=i=>({}),Sl=i=>({}),ty=i=>({}),Tl=i=>({}),ny=i=>({}),El=i=>({}),oy=i=>({}),Il=i=>({}),ry=i=>({}),Ll=i=>({});function iy(i){let e,n,t,o,r,s,c,a,l,u,f,m,p,_,M;const C=i[1]["header-area"],T=Ye(C,i,i[0],Ll),E=i[1]["floating-area"],R=Ye(E,i,i[0],Il),N=i[1]["message-area"],J=Ye(N,i,i[0],El),Q=i[1]["divider-area"],X=Ye(Q,i,i[0],Tl),K=i[1]["actions-area"],H=Ye(K,i,i[0],Sl),Y=i[1]["input-area"],V=Ye(Y,i,i[0],kl),Z=i[1]["footer-area"],re=Ye(Z,i,i[0],Ml);return{c(){e=L("div"),n=L("div"),t=L("div"),T&&T.c(),o=B(),r=L("div"),R&&R.c(),s=B(),c=L("div"),a=L("div"),J&&J.c(),l=B(),u=L("div"),X&&X.c(),f=B(),m=L("div"),H&&H.c(),p=B(),V&&V.c(),_=B(),re&&re.c(),A(t,"class","l-chat__header svelte-84kn6v"),A(r,"class","l-chat__floating svelte-84kn6v"),A(a,"class","l-chat__msg_area_body svelte-84kn6v"),A(c,"class","l-chat__msg_area svelte-84kn6v"),A(n,"class","l-chat svelte-84kn6v"),A(n,"data-testid","main-chat"),A(n,"data-vscode-context",JSON.stringify({preventDefaultContextMenuItems:!0})),A(u,"class","l-chat__divider_area svelte-84kn6v"),A(m,"class","l-chat__input_area svelte-84kn6v"),A(e,"class","l-chat-wrapper svelte-84kn6v")},m(le,oe){x(le,e,oe),F(e,n),F(n,t),T&&T.m(t,null),F(n,o),F(n,r),R&&R.m(r,null),F(n,s),F(n,c),F(c,a),J&&J.m(a,null),F(e,l),F(e,u),X&&X.m(u,null),F(e,f),F(e,m),H&&H.m(m,null),F(m,p),V&&V.m(m,null),F(m,_),re&&re.m(m,null),M=!0},p(le,[oe]){T&&T.p&&(!M||1&oe)&&Ke(T,C,le,le[0],M?Ze(C,le[0],oe,ry):Xe(le[0]),Ll),R&&R.p&&(!M||1&oe)&&Ke(R,E,le,le[0],M?Ze(E,le[0],oe,oy):Xe(le[0]),Il),J&&J.p&&(!M||1&oe)&&Ke(J,N,le,le[0],M?Ze(N,le[0],oe,ny):Xe(le[0]),El),X&&X.p&&(!M||1&oe)&&Ke(X,Q,le,le[0],M?Ze(Q,le[0],oe,ty):Xe(le[0]),Tl),H&&H.p&&(!M||1&oe)&&Ke(H,K,le,le[0],M?Ze(K,le[0],oe,ey):Xe(le[0]),Sl),V&&V.p&&(!M||1&oe)&&Ke(V,Y,le,le[0],M?Ze(Y,le[0],oe,Q4):Xe(le[0]),kl),re&&re.p&&(!M||1&oe)&&Ke(re,Z,le,le[0],M?Ze(Z,le[0],oe,J4):Xe(le[0]),Ml)},i(le){M||(d(T,le),d(R,le),d(J,le),d(X,le),d(H,le),d(V,le),d(re,le),M=!0)},o(le){$(T,le),$(R,le),$(J,le),$(X,le),$(H,le),$(V,le),$(re,le),M=!1},d(le){le&&b(e),T&&T.d(le),R&&R.d(le),J&&J.d(le),X&&X.d(le),H&&H.d(le),V&&V.d(le),re&&re.d(le)}}}function sy(i,e,n){let{$$slots:t={},$$scope:o}=e;return i.$$set=r=>{"$$scope"in r&&n(0,o=r.$$scope)},[o,t]}class ay extends ue{constructor(e){super(),de(this,e,sy,iy,ce,{})}}class cy{constructor(e,n){$e(this,"subscribers",new Set);$e(this,"isAutofixConversation",()=>cp(this._conversationModel));$e(this,"subscribe",e=>(this.subscribers.add(e),e(this),()=>{this.subscribers.delete(e)}));$e(this,"notifySubscribers",()=>{this.subscribers.forEach(e=>e(this))});$e(this,"update",e=>{this._conversationModel.extraData={...this.extraData,...e},this.notifySubscribers(),this.sendAutofixStateUpdate()});$e(this,"shouldShowAutofixCommandInput",()=>{var e;return!((e=this.extraData.autofixIterations)!=null&&e.length)});$e(this,"launchAutofixPanel",async(e,n)=>{await this._extensionClient.launchAutofixPanel(this.conversationId,e,n)});this._conversationModel=e,this._extensionClient=n,this._conversationModel.subscribe(t=>this.notifySubscribers())}get conversationId(){return this._conversationModel.id}async sendAutofixStateUpdate(){await this._extensionClient.sendAutofixStateUpdate(this._conversationModel.extraData)}setCommand(e){this.update({autofixCommand:e})}get extraData(){return this._conversationModel.extraData}addChatItem(e){this._conversationModel.addChatItem(e)}getAutofixIteration(e){var n;return(n=this.extraData.autofixIterations)==null?void 0:n.find(t=>t.id===e)}insertNewAutofixIteration(e){this.update({autofixIterations:[...this.extraData.autofixIterations||[],e]})}updateAutofixIteration(e){const n=this.extraData.autofixIterations||[],t=n.findIndex(o=>o.id===e.id);if(t===-1)throw new Error(`No autofix iteration found with id ${e.id}`);this.update({autofixIterations:n.map((o,r)=>r===t?{...o,...e}:o)})}async handleFixWasApplied(e){var t,o;const n=(o=(t=this.extraData.autofixIterations)==null?void 0:t.at(-1))==null?void 0:o.id;if(!n)throw new Error("No latest iteration found");this.updateAutofixIteration({id:n,selectedSolutions:e}),await this.startNewAutofixIteration()}async handleUserSteering(e){var o,r;const n=(o=this.extraData.autofixIterations)==null?void 0:o.at(-1);if(!n)throw new Error("No latest iteration found");const t=(r=n.suggestedSolutions)==null?void 0:r.at(-1);if(!t)throw new Error("No latest suggested solution found");this.addChatItem({chatItemType:uo.autofixSteeringMessage,request_id:crypto.randomUUID(),status:cn.sent,response_text:e}),this.update({autofixSteeringHistory:[...this.extraData.autofixSteeringHistory||[],{requestId:crypto.randomUUID(),requestMessage:e,summary:t.summary,replacements:t.originalReplacements}]}),await this.planSolution(n.id)}async startNewAutofixIteration(){var r;const e=this.extraData.autofixCommand;if(!e)throw new Error("No command set");const n=this.extraData,t=crypto.randomUUID(),o=!((r=n.autofixIterations)!=null&&r.length);this.insertNewAutofixIteration({id:t,currentStage:lr.runTest,commandOutput:"",isFirstIteration:o}),this.addChatItem({chatItemType:uo.autofixStage,request_id:crypto.randomUUID(),iterationId:t,status:cn.sent,stage:lr.runTest}),await this.launchAutofixPanel(t,lr.runTest);try{const s=e.split(" "),c=s[0],a=s.slice(1),l=await this._extensionClient.executeCommand(t,c,a),u=l.returnCode!==0;if(this.updateAutofixIteration({id:t,commandOutput:l.output,commandFailed:u}),!u)return t}catch(s){return console.error("[ConversationModel] Error executing command:",s),this.updateAutofixIteration({id:t,commandOutput:String(s),commandFailed:!0}),t}return await this.planSolution(t),t}async planSolution(e){var r,s;const n=this.extraData.autofixCommand;if(!n)throw new Error("No command set");const t=this.getAutofixIteration(e);if(!t)throw new Error(`No iteration found with id ${e}`);this.updateAutofixIteration({id:e,currentStage:lr.applyFix}),this.addChatItem({chatItemType:uo.autofixStage,request_id:crypto.randomUUID(),iterationId:e,status:cn.sent,stage:lr.applyFix,stageCount:((r=t.suggestedSolutions)==null?void 0:r.length)||0});const o=await this._extensionClient.autofixPlan({input:n,output:((s=this.getAutofixIteration(e))==null?void 0:s.commandOutput)||""},this.extraData.autofixSteeringHistory);this.addChatItem({chatItemType:uo.autofixMessage,request_id:crypto.randomUUID(),status:cn.sent,response_text:o.summary}),this.updateAutofixIteration({id:e,suggestedSolutions:[...t.suggestedSolutions||[],o]}),await this.launchAutofixPanel(e,lr.applyFix)}handleMessageFromExtension(e){const n=e.data;switch(n.type){case jt.chatAutofixStateUpdateRequest:return this.sendAutofixStateUpdate(),!0;case jt.chatAutofixSuggestionsApplied:return this.handleFixWasApplied(n.data.selectedSolutions),!0;default:return!1}}initializeAutofixConversation(){this.update({isAutofix:!0,autofixIterations:[]});const e={chatItemType:uo.autofixMessage,request_id:crypto.randomUUID(),status:cn.success,response_text:"Autofix enables you to run your tests and suggests fixes for you. Start by typing a command to run your test such as `pytest path/to/test`"};this._conversationModel.chatHistory.push(e)}}function ly(i){let e,n;return e=new zo({props:{iconName:"play_arrow"}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p:P,i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function uy(i){let e,n,t,o,r,s;function c(l){i[2](l)}let a={placeholder:"Enter test command (e.g. pytest path/to/test.py)",variant:"surface",size:2};return i[0]!==void 0&&(a.value=i[0]),n=new nr({props:a}),et.push(()=>Et(n,"value",c)),n.$on("keydown",i[1]),r=new ht({props:{disabled:!i[0],size:2,variant:"solid",color:"accent",$$slots:{default:[ly]},$$scope:{ctx:i}}}),r.$on("click",i[3]),{c(){e=L("div"),v(n.$$.fragment),o=B(),v(r.$$.fragment),A(e,"class","command-input-container svelte-3c7cic")},m(l,u){x(l,e,u),w(n,e,null),F(e,o),w(r,e,null),s=!0},p(l,[u]){const f={};!t&&1&u&&(t=!0,f.value=l[0],Rt(()=>t=!1)),n.$set(f);const m={};1&u&&(m.disabled=!l[0]),64&u&&(m.$$scope={dirty:u,ctx:l}),r.$set(m)},i(l){s||(d(n.$$.fragment,l),d(r.$$.fragment,l),s=!0)},o(l){$(n.$$.fragment,l),$(r.$$.fragment,l),s=!1},d(l){l&&b(e),y(n),y(r)}}}function dy(i,e,n){const t=Se("autofixConversationModel");if(!t)throw new Error("AutofixConversationModel not found in context");let o="";async function r(s){return!(s.shiftKey||s.ctrlKey||s.metaKey)&&(s.stopPropagation(),s.key==="Enter"&&o.length>0?(t.setCommand(o),await t.startNewAutofixIteration(),n(0,o=""),!0):s.key==="Escape")}return ro(()=>{const s=document.querySelector("input");s&&(s.focus(),s.select())}),[o,r,function(s){o=s,n(0,o)},()=>r(new KeyboardEvent("keydown",{key:"Enter"}))]}class $y extends ue{constructor(e){super(),de(this,e,dy,uy,ce,{})}}function fy(i){let e,n,t,o,r,s;return n=new Ge({props:{size:1,color:"error",$$slots:{default:[my]},$$scope:{ctx:i}}}),r=new Ge({props:{size:1,color:"error",$$slots:{default:[py]},$$scope:{ctx:i}}}),{c(){e=L("div"),v(n.$$.fragment),t=B(),o=L("div"),v(r.$$.fragment),A(e,"class","c-lazy-loading-error"),A(o,"class","c-lazy-loading-error")},m(c,a){x(c,e,a),w(n,e,null),x(c,t,a),x(c,o,a),w(r,o,null),s=!0},i(c){s||(d(n.$$.fragment,c),d(r.$$.fragment,c),s=!0)},o(c){$(n.$$.fragment,c),$(r.$$.fragment,c),s=!1},d(c){c&&(b(e),b(t),b(o)),y(n),y(r)}}}function my(i){let e;return{c(){e=G("Failed to load agent setup. Please try closing and re-opening the panel.")},m(n,t){x(n,e,t)},d(n){n&&b(e)}}}function py(i){let e;return{c(){e=G(i[2])},m(n,t){x(n,e,t)},p:P,d(n){n&&b(e)}}}function gy(i){let e,n;return function(t){t[0]=t[1].default}(i),e=new i[0]({}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function hy(i){let e,n,t,o,r;return n=new go({props:{size:1}}),o=new Ge({props:{size:1,color:"secondary",$$slots:{default:[vy]},$$scope:{ctx:i}}}),{c(){e=L("div"),v(n.$$.fragment),t=B(),v(o.$$.fragment),A(e,"class","c-lazy-loading-container")},m(s,c){x(s,e,c),w(n,e,null),F(e,t),w(o,e,null),r=!0},i(s){r||(d(n.$$.fragment,s),d(o.$$.fragment,s),r=!0)},o(s){$(n.$$.fragment,s),$(o.$$.fragment,s),r=!1},d(s){s&&b(e),y(n),y(o)}}}function vy(i){let e;return{c(){e=G("Loading agent setup...")},m(n,t){x(n,e,t)},d(n){n&&b(e)}}}function wy(i){let e,n,t={ctx:i,current:null,token:null,hasCatch:!0,pending:hy,then:gy,catch:fy,value:1,error:2,blocks:[,,,]};return vr(Gi(()=>import("./RemoteAgentSetup-B4R50Cmz.js"),__vite__mapDeps([5,1,2,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,3,31,32,33,34,35,36,37,38,39,40,41,42,43,0,4,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73]),import.meta.url),t),{c(){e=me(),t.block.c()},m(o,r){x(o,e,r),t.block.m(o,t.anchor=r),t.mount=()=>e.parentNode,t.anchor=e,n=!0},p(o,[r]){i=o},i(o){n||(d(t.block),n=!0)},o(o){for(let r=0;r<3;r+=1){const s=t.blocks[r];$(s)}n=!1},d(o){o&&b(e),t.block.d(o),t.token=null,t=null}}}class yy extends ue{constructor(e){super(),de(this,e,null,wy,ce,{})}}function by(i){let e,n,t,o,r;return{c(){e=G("Error loading message list: "),n=G(i[0]),t=B(),o=L("br"),r=G(`
    Please consider restarting your extension.`)},m(s,c){x(s,e,c),x(s,n,c),x(s,t,c),x(s,o,c),x(s,r,c)},p(s,c){1&c&&_e(n,s[0])},d(s){s&&(b(e),b(n),b(t),b(o),b(r))}}}function xy(i){let e,n;return e=new Wn({props:{slot:"icon"}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p:P,i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function _y(i){let e,n,t;return n=new Jn({props:{variant:"soft",color:"error",$$slots:{icon:[xy],default:[by]},$$scope:{ctx:i}}}),{c(){e=L("div"),v(n.$$.fragment),A(e,"class","l-error-message svelte-1w3i40p")},m(o,r){x(o,e,r),w(n,e,null),t=!0},p(o,[r]){const s={};3&r&&(s.$$scope={dirty:r,ctx:o}),n.$set(s)},i(o){t||(d(n.$$.fragment,o),t=!0)},o(o){$(n.$$.fragment,o),t=!1},d(o){o&&b(e),y(n)}}}function Cy(i,e,n){let{errorMessage:t}=e;return i.$$set=o=>{"errorMessage"in o&&n(0,t=o.errorMessage)},[t]}class em extends ue{constructor(e){super(),de(this,e,Cy,_y,ce,{errorMessage:0})}}function Ay(i){let e,n,t={ctx:i,current:null,token:null,hasCatch:!0,pending:Iy,then:Sy,catch:ky,value:17,error:18,blocks:[,,,]};return vr(Gi(()=>import("./MessageList-CLO0TaYB.js"),__vite__mapDeps([74,1,2,10,11,75,29,30,9,12,13,14,15,16,17,8,3,24,25,31,32,27,67,68,66,71,76,6,7,23,21,26,28,33,34,35,36,37,38,39,40,41,42,43,0,4,44,45,60,63,64,19,20,46,22,47,65,77,78,79,80,81,61,62,82,83,48,49,52,84,50,51,53,85,56,57,18,86,58,59,54,55,69,70,72,87]),import.meta.url),t),{c(){e=me(),t.block.c()},m(o,r){x(o,e,r),t.block.m(o,t.anchor=r),t.mount=()=>e.parentNode,t.anchor=e,n=!0},p(o,r){Vi(t,i=o,r)},i(o){n||(d(t.block),n=!0)},o(o){for(let r=0;r<3;r+=1){const s=t.blocks[r];$(s)}n=!1},d(o){o&&b(e),t.block.d(o),t.token=null,t=null}}}function My(i){let e,n,t={ctx:i,current:null,token:null,hasCatch:!0,pending:Oy,then:Ny,catch:Dy,value:17,error:18,blocks:[,,,]};return vr(Gi(()=>import("./VirtualizedMessageList-DV2H2t1i.js"),__vite__mapDeps([88,1,2,10,11,75,29,30,9,12,13,14,15,16,17,8,3,24,25,31,32,27,67,68,66,71,76,6,7,23,21,26,28,33,34,35,36,37,38,39,40,41,42,43,0,4,44,45,60,63,64,19,20,46,22,47,65,77,78,79,80,81,61,62,82,83,48,49,52,84,50,51,53,85,56,57,18,86,58,59,54,55,69,70,72,89]),import.meta.url),t),{c(){e=me(),t.block.c()},m(o,r){x(o,e,r),t.block.m(o,t.anchor=r),t.mount=()=>e.parentNode,t.anchor=e,n=!0},p(o,r){Vi(t,i=o,r)},i(o){n||(d(t.block),n=!0)},o(o){for(let r=0;r<3;r+=1){const s=t.blocks[r];$(s)}n=!1},d(o){o&&b(e),t.block.d(o),t.token=null,t=null}}}function ky(i){let e,n,t;return n=new em({props:{errorMessage:i[18].message}}),{c(){e=L("div"),v(n.$$.fragment),A(e,"class","l-center-contents svelte-mlzu3y"),A(e,"data-testid","l-lazy-message-list-loading-error")},m(o,r){x(o,e,r),w(n,e,null),t=!0},p:P,i(o){t||(d(n.$$.fragment,o),t=!0)},o(o){$(n.$$.fragment,o),t=!1},d(o){o&&b(e),y(n)}}}function Sy(i){let e,n,t=i[3],o=Rl(i);return{c(){o.c(),e=me()},m(r,s){o.m(r,s),x(r,e,s),n=!0},p(r,s){8&s&&ce(t,t=r[3])?(j(),$(o,1,1,P),q(),o=Rl(r),o.c(),d(o,1),o.m(e.parentNode,e)):o.p(r,s)},i(r){n||(d(o),n=!0)},o(r){$(o),n=!1},d(r){r&&b(e),o.d(r)}}}function Ty(i){let e,n,t;const o=[{chatModel:i[0]},{onboardingWorkspaceModel:i[1]},i[8]];var r=i[17].default;function s(c,a){let l={};for(let u=0;u<o.length;u+=1)l=Me(l,o[u]);return a!==void 0&&259&a&&(l=Me(l,Mt(o,[1&a&&{chatModel:c[0]},2&a&&{onboardingWorkspaceModel:c[1]},256&a&&fo(c[8])]))),{props:l}}return r&&(e=ln(r,s(i))),{c(){e&&v(e.$$.fragment),n=me()},m(c,a){e&&w(e,c,a),x(c,n,a),t=!0},p(c,a){if(r!==(r=c[17].default)){if(e){j();const l=e;$(l.$$.fragment,1,0,()=>{y(l,1)}),q()}r?(e=ln(r,s(c,a)),v(e.$$.fragment),d(e.$$.fragment,1),w(e,n.parentNode,n)):e=null}else if(r){const l=259&a?Mt(o,[1&a&&{chatModel:c[0]},2&a&&{onboardingWorkspaceModel:c[1]},256&a&&fo(c[8])]):{};e.$set(l)}},i(c){t||(e&&d(e.$$.fragment,c),t=!0)},o(c){e&&$(e.$$.fragment,c),t=!1},d(c){c&&b(n),e&&y(e,c)}}}function Ey(i){let e;return{c(){e=L("div"),A(e,"class","l-center-contents svelte-mlzu3y"),A(e,"data-testid","l-lazy-message-list-center-contents")},m(n,t){x(n,e,t)},p:P,i:P,o:P,d(n){n&&b(e)}}}function Rl(i){let e,n,t,o;const r=[Ey,Ty],s=[];function c(a,l){return a[5]?0:1}return e=c(i),n=s[e]=r[e](i),{c(){n.c(),t=me()},m(a,l){s[e].m(a,l),x(a,t,l),o=!0},p(a,l){let u=e;e=c(a),e===u?s[e].p(a,l):(j(),$(s[u],1,1,()=>{s[u]=null}),q(),n=s[e],n?n.p(a,l):(n=s[e]=r[e](a),n.c()),d(n,1),n.m(t.parentNode,t))},i(a){o||(d(n),o=!0)},o(a){$(n),o=!1},d(a){a&&b(t),s[e].d(a)}}}function Iy(i){let e,n=i[3],t=Dl(i);return{c(){t.c(),e=me()},m(o,r){t.m(o,r),x(o,e,r)},p(o,r){8&r&&ce(n,n=o[3])?(t.d(1),t=Dl(o),t.c(),t.m(e.parentNode,e)):t.p(o,r)},i:P,o:P,d(o){o&&b(e),t.d(o)}}}function Ly(i){let e;return{c(){e=L("div"),e.textContent="Loading...",A(e,"class","l-center-contents svelte-mlzu3y")},m(n,t){x(n,e,t)},d(n){n&&b(e)}}}function Ry(i){let e;return{c(){e=L("div"),A(e,"class","l-center-contents svelte-mlzu3y")},m(n,t){x(n,e,t)},d(n){n&&b(e)}}}function Dl(i){let e;function n(r,s){return r[5]?Ry:Ly}let t=n(i),o=t(i);return{c(){o.c(),e=me()},m(r,s){o.m(r,s),x(r,e,s)},p(r,s){t!==(t=n(r))&&(o.d(1),o=t(r),o&&(o.c(),o.m(e.parentNode,e)))},d(r){r&&b(e),o.d(r)}}}function Dy(i){let e,n,t;return n=new em({props:{errorMessage:i[18].message}}),{c(){e=L("div"),v(n.$$.fragment),A(e,"class","l-center-contents svelte-mlzu3y"),A(e,"data-testid","l-lazy-message-list-loading-error")},m(o,r){x(o,e,r),w(n,e,null),t=!0},p:P,i(o){t||(d(n.$$.fragment,o),t=!0)},o(o){$(n.$$.fragment,o),t=!1},d(o){o&&b(e),y(n)}}}function Ny(i){let e,n,t=i[3],o=Nl(i);return{c(){o.c(),e=me()},m(r,s){o.m(r,s),x(r,e,s),n=!0},p(r,s){8&s&&ce(t,t=r[3])?(j(),$(o,1,1,P),q(),o=Nl(r),o.c(),d(o,1),o.m(e.parentNode,e)):o.p(r,s)},i(r){n||(d(o),n=!0)},o(r){$(o),n=!1},d(r){r&&b(e),o.d(r)}}}function Py(i){let e,n,t;const o=[{chatModel:i[0]},{onboardingWorkspaceModel:i[1]},i[8]];var r=i[17].default;function s(c,a){let l={};for(let u=0;u<o.length;u+=1)l=Me(l,o[u]);return a!==void 0&&259&a&&(l=Me(l,Mt(o,[1&a&&{chatModel:c[0]},2&a&&{onboardingWorkspaceModel:c[1]},256&a&&fo(c[8])]))),{props:l}}return r&&(e=ln(r,s(i))),{c(){e&&v(e.$$.fragment),n=me()},m(c,a){e&&w(e,c,a),x(c,n,a),t=!0},p(c,a){if(r!==(r=c[17].default)){if(e){j();const l=e;$(l.$$.fragment,1,0,()=>{y(l,1)}),q()}r?(e=ln(r,s(c,a)),v(e.$$.fragment),d(e.$$.fragment,1),w(e,n.parentNode,n)):e=null}else if(r){const l=259&a?Mt(o,[1&a&&{chatModel:c[0]},2&a&&{onboardingWorkspaceModel:c[1]},256&a&&fo(c[8])]):{};e.$set(l)}},i(c){t||(e&&d(e.$$.fragment,c),t=!0)},o(c){e&&$(e.$$.fragment,c),t=!1},d(c){c&&b(n),e&&y(e,c)}}}function Fy(i){let e;return{c(){e=L("div"),A(e,"class","l-center-contents svelte-mlzu3y"),A(e,"data-testid","l-lazy-message-list-center-contents")},m(n,t){x(n,e,t)},p:P,i:P,o:P,d(n){n&&b(e)}}}function Nl(i){let e,n,t,o;const r=[Fy,Py],s=[];function c(a,l){return a[5]?0:1}return e=c(i),n=s[e]=r[e](i),{c(){n.c(),t=me()},m(a,l){s[e].m(a,l),x(a,t,l),o=!0},p(a,l){let u=e;e=c(a),e===u?s[e].p(a,l):(j(),$(s[u],1,1,()=>{s[u]=null}),q(),n=s[e],n?n.p(a,l):(n=s[e]=r[e](a),n.c()),d(n,1),n.m(t.parentNode,t))},i(a){o||(d(n),o=!0)},o(a){$(n),o=!1},d(a){a&&b(t),s[e].d(a)}}}function Oy(i){let e,n=i[3],t=Pl(i);return{c(){t.c(),e=me()},m(o,r){t.m(o,r),x(o,e,r)},p(o,r){8&r&&ce(n,n=o[3])?(t.d(1),t=Pl(o),t.c(),t.m(e.parentNode,e)):t.p(o,r)},i:P,o:P,d(o){o&&b(e),t.d(o)}}}function zy(i){let e;return{c(){e=L("div"),e.textContent="Loading...",A(e,"class","l-center-contents svelte-mlzu3y")},m(n,t){x(n,e,t)},d(n){n&&b(e)}}}function By(i){let e;return{c(){e=L("div"),A(e,"class","l-center-contents svelte-mlzu3y")},m(n,t){x(n,e,t)},d(n){n&&b(e)}}}function Pl(i){let e;function n(r,s){return r[5]?By:zy}let t=n(i),o=t(i);return{c(){o.c(),e=me()},m(r,s){o.m(r,s),x(r,e,s)},p(r,s){t!==(t=n(r))&&(o.d(1),o=t(r),o&&(o.c(),o.m(e.parentNode,e)))},d(r){r&&b(e),o.d(r)}}}function Uy(i){let e,n,t,o;const r=[My,Ay],s=[];function c(a,l){return a[4]?0:1}return e=c(i),n=s[e]=r[e](i),{c(){n.c(),t=me()},m(a,l){s[e].m(a,l),x(a,t,l),o=!0},p(a,[l]){let u=e;e=c(a),e===u?s[e].p(a,l):(j(),$(s[u],1,1,()=>{s[u]=null}),q(),n=s[e],n?n.p(a,l):(n=s[e]=r[e](a),n.c()),d(n,1),n.m(t.parentNode,t))},i(a){o||(d(n),o=!0)},o(a){$(n),o=!1},d(a){a&&b(t),s[e].d(a)}}}function Hy(i,e,n){let t,o,r,s,c,a,l,u,f;const m=["chatModel","onboardingWorkspaceModel","remoteAgentsModel"];let p,_,M,C,T=mr(e,m),E=P,R=P,N=P,J=()=>(N(),N=lt(Y,V=>n(15,M=V)),Y),Q=P,X=()=>(Q(),Q=lt(K,V=>n(16,C=V)),K);i.$$.on_destroy.push(()=>E()),i.$$.on_destroy.push(()=>R()),i.$$.on_destroy.push(()=>N()),i.$$.on_destroy.push(()=>Q());let{chatModel:K}=e;X();let{onboardingWorkspaceModel:H}=e,{remoteAgentsModel:Y}=e;return J(),i.$$set=V=>{e=Me(Me({},e),it(V)),n(8,T=mr(e,m)),"chatModel"in V&&X(n(0,K=V.chatModel)),"onboardingWorkspaceModel"in V&&n(1,H=V.onboardingWorkspaceModel),"remoteAgentsModel"in V&&J(n(2,Y=V.remoteAgentsModel))},i.$$.update=()=>{var V,Z;65536&i.$$.dirty&&(n(7,t=C.currentConversationModel),E(),E=lt(t,re=>n(13,p=re))),65536&i.$$.dirty&&(n(6,o=C.flags),R(),R=lt(o,re=>n(14,_=re))),32768&i.$$.dirty&&n(9,r=M.currentAgentId),32768&i.$$.dirty&&n(10,s=M.isActive),33792&i.$$.dirty&&n(12,c=s&&((V=M.getCurrentChatHistory())==null?void 0:V.length)),33792&i.$$.dirty&&n(11,a=s&&((Z=M.agentSetupLogs)==null?void 0:Z.steps.length)!==0),15360&i.$$.dirty&&n(5,l=s?!c&&!a:p.chatHistory.length===0),17408&i.$$.dirty&&n(4,u=_.enableVirtualizedMessageList&&!s),9728&i.$$.dirty&&n(3,f=`${p.id}-${s?r:""}`)},[K,H,Y,f,u,l,o,t,T,r,s,a,c,p,_,M,C]}class jy extends ue{constructor(e){super(),de(this,e,Hy,Uy,ce,{chatModel:0,onboardingWorkspaceModel:1,remoteAgentsModel:2})}}function qy(i){let e,n,t;return n=new yy({}),{c(){e=L("div"),v(n.$$.fragment),A(e,"class","l-center-contents")},m(o,r){x(o,e,r),w(n,e,null),t=!0},p:P,i(o){t||(d(n.$$.fragment,o),t=!0)},o(o){$(n.$$.fragment,o),t=!1},d(o){o&&b(e),y(n)}}}function Wy(i){let e,n;return e=new jy({props:{chatModel:i[0],onboardingWorkspaceModel:i[1],remoteAgentsModel:i[2]}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p(t,o){const r={};1&o&&(r.chatModel=t[0]),2&o&&(r.onboardingWorkspaceModel=t[1]),4&o&&(r.remoteAgentsModel=t[2]),e.$set(r)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function Vy(i){let e,n,t,o;const r=[Wy,qy],s=[];function c(a,l){return a[4]?0:a[3]?1:-1}return~(e=c(i))&&(n=s[e]=r[e](i)),{c(){n&&n.c(),t=me()},m(a,l){~e&&s[e].m(a,l),x(a,t,l),o=!0},p(a,[l]){let u=e;e=c(a),e===u?~e&&s[e].p(a,l):(n&&(j(),$(s[u],1,1,()=>{s[u]=null}),q()),~e?(n=s[e],n?n.p(a,l):(n=s[e]=r[e](a),n.c()),d(n,1),n.m(t.parentNode,t)):n=null)},i(a){o||(d(n),o=!0)},o(a){$(n),o=!1},d(a){a&&b(t),~e&&s[e].d(a)}}}function Gy(i,e,n){let t,o,r,s=P,c=()=>(s(),s=lt(u,f=>n(5,r=f)),u);i.$$.on_destroy.push(()=>s());let{chatModel:a}=e,{onboardingWorkspaceModel:l}=e,{remoteAgentsModel:u}=e;return c(),i.$$set=f=>{"chatModel"in f&&n(0,a=f.chatModel),"onboardingWorkspaceModel"in f&&n(1,l=f.onboardingWorkspaceModel),"remoteAgentsModel"in f&&c(n(2,u=f.remoteAgentsModel))},i.$$.update=()=>{32&i.$$.dirty&&n(3,t=r.isActive&&!r.currentAgentId),8&i.$$.dirty&&n(4,o=!t)},[a,l,u,t,o,r]}class Yy extends ue{constructor(e){super(),de(this,e,Gy,Vy,ce,{chatModel:0,onboardingWorkspaceModel:1,remoteAgentsModel:2})}}function Ky(i){let e,n,t,o;return{c(){e=B(),n=L("div"),n.innerHTML='<div class="c-chat-input-dialog-hr svelte-p70shz"></div>',A(n,"class","c-chat-input-dialog-hr-handle svelte-p70shz"),A(n,"role","separator")},m(r,s){x(r,e,s),x(r,n,s),t||(o=[Le(document,"mousemove",i[1]),Le(document,"mouseup",i[2]),Le(n,"mousedown",i[0])],t=!0)},p:P,i:P,o:P,d(r){r&&(b(e),b(n)),t=!1,Qt(o)}}}function Xy(i,e,n){let{inputArea:t}=e;const o=V$();let r;return i.$$set=s=>{"inputArea"in s&&n(3,t=s.inputArea)},[s=>{r={startY:s.clientY,initialHeight:t.offsetHeight},t==null||t.classList.add("is-dragging")},s=>{if(!r)return;const c=s.clientY-r.startY;n(3,t.style.height=`${Math.max(80,r.initialHeight-c)}px`,t)},()=>{r&&(o("dragEnd"),r=void 0,t==null||t.classList.remove("is-dragging"))},t]}class Zy extends ue{constructor(e){super(),de(this,e,Xy,Ky,ce,{inputArea:3})}}function Jy(i){let e,n,t=[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 512 512"},i[0]],o={};for(let r=0;r<t.length;r+=1)o=Me(o,t[r]);return{c(){e=rt("svg"),n=new en(!0),this.h()},l(r){e=tn(r,"svg",{xmlns:!0,"data-ds-icon":!0,viewBox:!0});var s=nn(e);n=on(s,!0),s.forEach(b),this.h()},h(){n.a=null,ut(e,o)},m(r,s){rn(r,e,s),n.m('<!--! Font Awesome Pro 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2024 Fonticons, Inc.--><path d="M224 80v352h224c8.8 0 16-7.2 16-16V96c0-8.8-7.2-16-16-16zM0 96c0-35.3 28.7-64 64-64h384c35.3 0 64 28.7 64 64v320c0 35.3-28.7 64-64 64H64c-35.3 0-64-28.7-64-64zm64 24c0 13.3 10.7 24 24 24h48c13.3 0 24-10.7 24-24s-10.7-24-24-24H88c-13.3 0-24 10.7-24 24m24 72c-13.3 0-24 10.7-24 24s10.7 24 24 24h48c13.3 0 24-10.7 24-24s-10.7-24-24-24zM64 312c0 13.3 10.7 24 24 24h48c13.3 0 24-10.7 24-24s-10.7-24-24-24H88c-13.3 0-24 10.7-24 24"/>',e)},p(r,[s]){ut(e,o=Mt(t,[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 512 512"},1&s&&r[0]]))},i:P,o:P,d(r){r&&b(e)}}}function Qy(i,e,n){return i.$$set=t=>{n(0,e=Me(Me({},e),it(t)))},[e=it(e)]}class e6 extends ue{constructor(e){super(),de(this,e,Qy,Jy,ce,{})}}function Fl(i,e,n=200){return t=>function(o,r){const{onClose:s,isActive:c,threshold:a=200,resetTimeout:l=150}=r;let u,f=0,m=!1,p=!1,_={isTracking:!1,startedAtTop:!1,initialScrollTop:0,overscrollAmount:0};const M=E=>{if(!c())return;const{scrollTop:R}=o;return m||(m=!0,p=R===0,f=0,_={isTracking:p,startedAtTop:p,initialScrollTop:R,overscrollAmount:0}),p&&R===0&&E.deltaY<0&&(f+=Math.abs(E.deltaY),_.overscrollAmount=f,f>=a)?(s(),void C()):p&&R>0?(clearTimeout(u),void(u=setTimeout(()=>{C()},l))):void(p&&E.deltaY>0?C():Math.abs(E.deltaY)<7||(clearTimeout(u),u=setTimeout(()=>{C()},l)))},C=()=>{m=!1,p=!1,f=0,clearTimeout(u),_={isTracking:!1,startedAtTop:!1,initialScrollTop:0,overscrollAmount:0}},T=()=>{m&&p&&o.scrollTop>10&&C()};return o.addEventListener("wheel",M,{passive:!0}),o.addEventListener("scroll",T,{passive:!0}),{destroy(){o.removeEventListener("wheel",M),o.removeEventListener("scroll",T),clearTimeout(u)},update(E){Object.assign(r,E)}}}(t,{onClose:i,isActive:e,threshold:n})}const t6=i=>({}),Ol=i=>({}),n6=i=>({}),zl=i=>({}),o6=i=>({}),Bl=i=>({});function r6(i){let e;return{c(){e=G(i[2])},m(n,t){x(n,e,t)},p(n,t){4&t&&_e(e,n[2])},d(n){n&&b(e)}}}function Ul(i){let e,n;const t=i[4]["sort-options"],o=Ye(t,i,i[8],zl);return{c(){e=L("div"),o&&o.c(),A(e,"class","l-threads-menu__sort-options svelte-k6qn47")},m(r,s){x(r,e,s),o&&o.m(e,null),n=!0},p(r,s){o&&o.p&&(!n||256&s)&&Ke(o,t,r,r[8],n?Ze(t,r[8],s,n6):Xe(r[8]),zl)},i(r){n||(d(o,r),n=!0)},o(r){$(o,r),n=!1},d(r){r&&b(e),o&&o.d(r)}}}function Hl(i){let e,n;const t=i[4].body,o=Ye(t,i,i[8],Ol);return{c(){e=L("div"),o&&o.c(),A(e,"class","l-threads-menu__body svelte-k6qn47")},m(r,s){x(r,e,s),o&&o.m(e,null),n=!0},p(r,s){o&&o.p&&(!n||256&s)&&Ke(o,t,r,r[8],n?Ze(t,r[8],s,t6):Xe(r[8]),Ol)},i(r){n||(d(o,r),n=!0)},o(r){$(o,r),n=!1},d(r){r&&b(e),o&&o.d(r)}}}function i6(i){let e,n,t,o,r,s,c,a,l,u,f,m,p,_;s=new Ge({props:{size:1,weight:"regular",$$slots:{default:[r6]},$$scope:{ctx:i}}});const M=i[4].buttons,C=Ye(M,i,i[8],Bl);let T=i[1]&&Ul(i),E=i[1]&&Hl(i);return{c(){e=L("div"),n=L("div"),t=L("div"),o=L("div"),r=L("div"),v(s.$$.fragment),c=B(),a=L("div"),C&&C.c(),l=B(),T&&T.c(),u=B(),E&&E.c(),A(r,"class","l-threads-menu__title svelte-k6qn47"),A(r,"data-testid","threads-menu-header-title"),A(o,"class","l-threads-menu__header svelte-k6qn47"),A(o,"role","button"),A(o,"tabindex","0"),A(o,"data-testid","threads-menu-header"),A(t,"class","l-threads-menu__content svelte-k6qn47"),A(n,"class","l-threads-menu__wrapper svelte-k6qn47"),A(e,"data-testid","threads-menu"),A(e,"class",f=fr(`l-threads-menu ${i[3]}`)+" svelte-k6qn47"),ke(e,"l-threads-menu--active",i[1])},m(R,N){x(R,e,N),F(e,n),F(n,t),F(t,o),F(o,r),w(s,r,null),F(o,c),F(o,a),C&&C.m(a,null),F(t,l),T&&T.m(t,null),F(t,u),E&&E.m(t,null),i[7](e),m=!0,p||(_=[Le(o,"click",$r(bi(i[5]))),Le(o,"keydown",i[6])],p=!0)},p(R,[N]){const J={};260&N&&(J.$$scope={dirty:N,ctx:R}),s.$set(J),C&&C.p&&(!m||256&N)&&Ke(C,M,R,R[8],m?Ze(M,R[8],N,o6):Xe(R[8]),Bl),R[1]?T?(T.p(R,N),2&N&&d(T,1)):(T=Ul(R),T.c(),d(T,1),T.m(t,u)):T&&(j(),$(T,1,1,()=>{T=null}),q()),R[1]?E?(E.p(R,N),2&N&&d(E,1)):(E=Hl(R),E.c(),d(E,1),E.m(t,null)):E&&(j(),$(E,1,1,()=>{E=null}),q()),(!m||8&N&&f!==(f=fr(`l-threads-menu ${R[3]}`)+" svelte-k6qn47"))&&A(e,"class",f),(!m||10&N)&&ke(e,"l-threads-menu--active",R[1])},i(R){m||(d(s.$$.fragment,R),d(C,R),d(T),d(E),m=!0)},o(R){$(s.$$.fragment,R),$(C,R),$(T),$(E),m=!1},d(R){R&&b(e),y(s),C&&C.d(R),T&&T.d(),E&&E.d(),i[7](null),p=!1,Qt(_)}}}function s6(i,e,n){let{$$slots:t={},$$scope:o}=e,{active:r=!1}=e,{element:s}=e,{title:c=""}=e,{class:a=""}=e;return i.$$set=l=>{"active"in l&&n(1,r=l.active),"element"in l&&n(0,s=l.element),"title"in l&&n(2,c=l.title),"class"in l&&n(3,a=l.class),"$$scope"in l&&n(8,o=l.$$scope)},[s,r,c,a,t,function(l){vn.call(this,i,l)},function(l){vn.call(this,i,l)},function(l){et[l?"unshift":"push"](()=>{s=l,n(0,s)})},o]}class a6 extends ue{constructor(e){super(),de(this,e,s6,i6,ce,{active:1,element:0,title:2,class:3})}}const c6=i=>({}),jl=i=>({}),l6=i=>({}),ql=i=>({});function u6(i){let e,n;const t=i[2].title,o=Ye(t,i,i[6],ql);return{c(){e=L("div"),o&&o.c(),A(e,"class","l-thread-menu-item__title svelte-1iwlval")},m(r,s){x(r,e,s),o&&o.m(e,null),n=!0},p(r,s){o&&o.p&&(!n||64&s)&&Ke(o,t,r,r[6],n?Ze(t,r[6],s,l6):Xe(r[6]),ql)},i(r){n||(d(o,r),n=!0)},o(r){$(o,r),n=!1},d(r){r&&b(e),o&&o.d(r)}}}function d6(i){let e,n,t,o,r,s,c;n=new Ge({props:{size:1,weight:"regular",$$slots:{default:[u6]},$$scope:{ctx:i}}});const a=i[2].right,l=Ye(a,i,i[6],jl);return{c(){e=L("div"),v(n.$$.fragment),t=B(),o=L("div"),l&&l.c(),A(o,"class","l-thread-menu-item__right svelte-1iwlval"),A(e,"class","l-thread-menu-item svelte-1iwlval"),A(e,"data-testid","thread-menu-item"),A(e,"role","button"),A(e,"tabindex","0"),ke(e,"l-thread-menu-item--selected",i[0]&&i[1]),ke(e,"l-thread-menu-item--selectable",i[1])},m(u,f){x(u,e,f),w(n,e,null),F(e,t),F(e,o),l&&l.m(o,null),r=!0,s||(c=[Le(e,"click",i[3]),Le(e,"mousedown",i[4]),Le(e,"keydown",i[5])],s=!0)},p(u,[f]){const m={};64&f&&(m.$$scope={dirty:f,ctx:u}),n.$set(m),l&&l.p&&(!r||64&f)&&Ke(l,a,u,u[6],r?Ze(a,u[6],f,c6):Xe(u[6]),jl),(!r||3&f)&&ke(e,"l-thread-menu-item--selected",u[0]&&u[1]),(!r||2&f)&&ke(e,"l-thread-menu-item--selectable",u[1])},i(u){r||(d(n.$$.fragment,u),d(l,u),r=!0)},o(u){$(n.$$.fragment,u),$(l,u),r=!1},d(u){u&&b(e),y(n),l&&l.d(u),s=!1,Qt(c)}}}function $6(i,e,n){let{$$slots:t={},$$scope:o}=e,{selected:r=!1}=e,{isSelectable:s=!1}=e;return i.$$set=c=>{"selected"in c&&n(0,r=c.selected),"isSelectable"in c&&n(1,s=c.isSelectable),"$$scope"in c&&n(6,o=c.$$scope)},[r,s,t,function(c){vn.call(this,i,c)},function(c){vn.call(this,i,c)},function(c){vn.call(this,i,c)},o]}class tm extends ue{constructor(e){super(),de(this,e,$6,d6,ce,{selected:0,isSelectable:1})}}function f6(i){let e,n,t,o;return{c(){e=L("div"),n=G(i[1]),A(e,"class","c-editable-text__text svelte-1kpc8s8"),A(e,"role","button"),A(e,"tabindex","0"),ke(e,"c-editable-text--disabled",i[3])},m(r,s){x(r,e,s),F(e,n),t||(o=Le(e,"dblclick",i[4]),t=!0)},p(r,s){2&s&&_e(n,r[1]),8&s&&ke(e,"c-editable-text--disabled",r[3])},i:P,o:P,d(r){r&&b(e),t=!1,o()}}}function m6(i){let e,n,t,o;function r(a){i[15](a)}function s(a){i[16](a)}let c={size:1,variant:"surface",placeholder:i[2]};return i[5]!==void 0&&(c.textInput=i[5]),i[6]!==void 0&&(c.value=i[6]),e=new nr({props:c}),et.push(()=>Et(e,"textInput",r)),et.push(()=>Et(e,"value",s)),e.$on("click",g6),e.$on("keydown",i[7]),{c(){v(e.$$.fragment)},m(a,l){w(e,a,l),o=!0},p(a,l){const u={};4&l&&(u.placeholder=a[2]),!n&&32&l&&(n=!0,u.textInput=a[5],Rt(()=>n=!1)),!t&&64&l&&(t=!0,u.value=a[6],Rt(()=>t=!1)),e.$set(u)},i(a){o||(d(e.$$.fragment,a),o=!0)},o(a){$(e.$$.fragment,a),o=!1},d(a){y(e,a)}}}function p6(i){let e,n,t,o,r,s,c;const a=[m6,f6],l=[];function u(f,m){return!f[3]&&f[0]?0:1}return n=u(i),t=l[n]=a[n](i),{c(){e=B(),t.c(),o=me()},m(f,m){x(f,e,m),l[n].m(f,m),x(f,o,m),r=!0,s||(c=Le(document.body,"click",i[8]),s=!0)},p(f,[m]){let p=n;n=u(f),n===p?l[n].p(f,m):(j(),$(l[p],1,1,()=>{l[p]=null}),q(),t=l[n],t?t.p(f,m):(t=l[n]=a[n](f),t.c()),d(t,1),t.m(o.parentNode,o))},i(f){r||(d(t),r=!0)},o(f){$(t),r=!1},d(f){f&&(b(e),b(o)),l[n].d(f),s=!1,c()}}}const g6=i=>i.stopPropagation();function h6(i,e,n){let t,{isEditing:o=!1}=e,{value:r}=e,{cancelOnClickOutside:s=!0}=e,{placeholder:c=""}=e,{disabled:a=!1}=e,{onStartEdit:l}=e,{onAcceptEdit:u}=e,{onCancelEdit:f}=e,m=r;function p(M){o&&(u(m),n(0,o=!1),n(6,m=""),M==null||M.stopPropagation())}function _(M){o&&s&&(f(),n(0,o=!1),n(6,m=""),M==null||M.stopPropagation())}return i.$$set=M=>{"isEditing"in M&&n(0,o=M.isEditing),"value"in M&&n(1,r=M.value),"cancelOnClickOutside"in M&&n(9,s=M.cancelOnClickOutside),"placeholder"in M&&n(2,c=M.placeholder),"disabled"in M&&n(3,a=M.disabled),"onStartEdit"in M&&n(10,l=M.onStartEdit),"onAcceptEdit"in M&&n(11,u=M.onAcceptEdit),"onCancelEdit"in M&&n(12,f=M.onCancelEdit)},i.$$.update=()=>{32&i.$$.dirty&&(t==null||t.focus())},[o,r,c,a,function(M){o||a||(n(6,m=r),n(0,o=!0),l(),M==null||M.stopPropagation())},t,m,function(M){o&&(M.key==="Enter"?p(M):M.key==="Escape"&&_(M))},function(M){const C=M.target;C&&C.closest(`.${nm}`)||_(M)},s,l,u,f,p,_,function(M){t=M,n(5,t)},function(M){m=M,n(6,m)}]}class v6 extends ue{constructor(e){super(),de(this,e,h6,p6,ce,{isEditing:0,value:1,cancelOnClickOutside:9,placeholder:2,disabled:3,onStartEdit:10,onAcceptEdit:11,onCancelEdit:12,startEdit:4,acceptEdit:13,cancelEdit:14})}get startEdit(){return this.$$.ctx[4]}get acceptEdit(){return this.$$.ctx[13]}get cancelEdit(){return this.$$.ctx[14]}}function w6(i){let e,n;return{c(){e=rt("svg"),n=rt("path"),A(n,"fill-rule","evenodd"),A(n,"clip-rule","evenodd"),A(n,"d","M6 3.5C6 2.67157 6.67157 2 7.5 2C8.32843 2 9 2.67157 9 3.5C9 4.32843 8.32843 5 7.5 5C6.67157 5 6 4.32843 6 3.5ZM8 5.94999C9.14112 5.71836 10 4.70948 10 3.5C10 2.11929 8.88071 1 7.5 1C6.11929 1 5 2.11929 5 3.5C5 4.70948 5.85888 5.71836 7 5.94999V13.5C7 13.7761 7.22386 14 7.5 14C7.77614 14 8 13.7761 8 13.5V5.94999Z"),A(n,"fill","currentColor"),A(e,"width","15"),A(e,"height","15"),A(e,"viewBox","0 0 15 15"),A(e,"fill","none"),A(e,"xmlns","http://www.w3.org/2000/svg")},m(t,o){x(t,e,o),F(e,n)},p:P,i:P,o:P,d(t){t&&b(e)}}}class y6 extends ue{constructor(e){super(),de(this,e,null,w6,ce,{})}}function b6(i){let e,n;return{c(){e=rt("svg"),n=rt("path"),A(n,"fill-rule","evenodd"),A(n,"clip-rule","evenodd"),A(n,"d","M10 3.5C10 4.70948 9.14112 5.71836 8 5.94999V13.5C8 13.7761 7.77614 14 7.5 14C7.22386 14 7 13.7761 7 13.5V5.94999C5.85888 5.71836 5 4.70948 5 3.5C5 2.11929 6.11929 1 7.5 1C8.88071 1 10 2.11929 10 3.5Z"),A(n,"fill","currentColor"),A(e,"width","15"),A(e,"height","15"),A(e,"viewBox","0 0 15 15"),A(e,"fill","none"),A(e,"xmlns","http://www.w3.org/2000/svg")},m(t,o){x(t,e,o),F(e,n)},p:P,i:P,o:P,d(t){t&&b(e)}}}class x6 extends ue{constructor(e){super(),de(this,e,null,b6,ce,{})}}function _6(i){let e,n,t=[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 512 512"},i[0]],o={};for(let r=0;r<t.length;r+=1)o=Me(o,t[r]);return{c(){e=rt("svg"),n=new en(!0),this.h()},l(r){e=tn(r,"svg",{xmlns:!0,"data-ds-icon":!0,viewBox:!0});var s=nn(e);n=on(s,!0),s.forEach(b),this.h()},h(){n.a=null,ut(e,o)},m(r,s){rn(r,e,s),n.m('<!--! Font Awesome Pro 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2024 Fonticons, Inc.--><path d="M280 360c0 13.3-10.7 24-24 24s-24-10.7-24-24V81.9l-95 95c-9.4 9.4-24.6 9.4-33.9 0s-9.4-24.6 0-33.9L239 7c9.4-9.4 24.6-9.4 33.9 0L409 143c9.4 9.4 9.4 24.6 0 33.9s-24.6 9.4-33.9 0l-95-95zm32-8v-48h136c35.3 0 64 28.7 64 64v80c0 35.3-28.7 64-64 64H64c-35.3 0-64-28.7-64-64v-80c0-35.3 28.7-64 64-64h136v48H64c-8.8 0-16 7.2-16 16v80c0 8.8 7.2 16 16 16h384c8.8 0 16-7.2 16-16v-80c0-8.8-7.2-16-16-16zm72 56a24 24 0 1 1 48 0 24 24 0 1 1-48 0"/>',e)},p(r,[s]){ut(e,o=Mt(t,[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 512 512"},1&s&&r[0]]))},i:P,o:P,d(r){r&&b(e)}}}function C6(i,e,n){return i.$$set=t=>{n(0,e=Me(Me({},e),it(t)))},[e=it(e)]}class A6 extends ue{constructor(e){super(),de(this,e,C6,_6,ce,{})}}async function M6(i,e){try{const n=await async function(a,l){const u={id:a.id,name:a.name,createdAtIso:a.createdAtIso,lastInteractedAtIso:a.lastInteractedAtIso,chatHistory:a.chatHistory,feedbackStates:a.feedbackStates,toolUseStates:a.toolUseStates,draftExchange:a.draftExchange,draftActiveContextIds:a.draftActiveContextIds,requestIds:a.requestIds,isPinned:a.isPinned,lastUrl:a.lastUrl,isShareable:a.isShareable,extraData:a.extraData,personaType:a.personaType,rootTaskUuid:a.rootTaskUuid},f={version:"1.0.0",exportedAt:new Date().toISOString(),conversation:u};f.metadata={exportedBy:"Augment Debug Utils",notes:l.notes};const m=l!=null&&l.prettyPrint?2:void 0;return JSON.stringify(f,null,m)}(i,{includeMetadata:(e==null?void 0:e.includeMetadata)??!0,notes:e==null?void 0:e.notes,prettyPrint:(e==null?void 0:e.prettyPrint)??!0}),t=new Blob([n],{type:"application/json"}),o=URL.createObjectURL(t),r=document.createElement("a");r.href=o;const s=(e==null?void 0:e.filename)||i.name||"conversation",c=new Date().toISOString().slice(0,19).replace(/:/g,"-");r.download=`${s}_${c}.json`,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(o)}catch(n){throw console.error("Error downloading conversation as JSON:",n),n}}async function k6(i,e){try{const n=document.createElement("input");n.type="file",n.accept=".json,application/json",n.style.display="none";const t=new Promise(c=>{n.onchange=()=>{c(n.files?n.files[0]:null)},n.oncancel=()=>{c(null)}});document.body.appendChild(n),n.click();const o=await t;if(document.body.removeChild(n),!o)return null;const r=await o.text(),s=JSON.parse(r);if(!function(c){if(!c||typeof c!="object")return!1;const a=c;if(typeof a.version!="string"||typeof a.exportedAt!="string"||!a.conversation||typeof a.conversation!="object")return!1;const l=a.conversation;return typeof l.id=="string"&&typeof l.createdAtIso=="string"&&typeof l.lastInteractedAtIso=="string"&&!!Array.isArray(l.chatHistory)&&!(!l.feedbackStates||typeof l.feedbackStates!="object")&&!!Array.isArray(l.requestIds)}(s))throw new Error("Invalid conversation export file format");return await async function(c,a,l){const{conversation:u}=c,f={...u,id:(l==null?void 0:l.generateNewId)!==!1?crypto.randomUUID():u.id,name:l!=null&&l.namePrefix?`${l.namePrefix}${u.name||"Imported Conversation"}`:u.name,lastInteractedAtIso:new Date().toISOString()};l!=null&&l.markAsImported&&(f.extraData={...f.extraData,isImported:!0,importedAt:new Date().toISOString(),originalExportVersion:c.version});try{return a.saveConversation(f),f.id}catch(m){throw console.error("Error creating imported conversation:",m),new Error(`Failed to import conversation: ${m}`)}}(s,i,{generateNewId:(e==null?void 0:e.generateNewId)??!0,namePrefix:(e==null?void 0:e.namePrefix)??"[Imported] ",markAsImported:(e==null?void 0:e.markAsImported)??!0})}catch(n){throw console.error("Error importing conversation from file:",n),n}}const S6=i=>({}),Wl=i=>({});function Vl(i){let e,n,t,o;const r=[E6,T6],s=[];function c(a,l){return a[8]?0:1}return e=c(i),n=s[e]=r[e](i),{c(){n.c(),t=me()},m(a,l){s[e].m(a,l),x(a,t,l),o=!0},p(a,l){let u=e;e=c(a),e!==u&&(j(),$(s[u],1,1,()=>{s[u]=null}),q(),n=s[e],n||(n=s[e]=r[e](a),n.c()),d(n,1),n.m(t.parentNode,t))},i(a){o||(d(n),o=!0)},o(a){$(n),o=!1},d(a){a&&b(t),s[e].d(a)}}}function T6(i){let e,n;return e=new Ao.Root({props:{color:"accent",size:1,variant:"soft",$$slots:{default:[I6]},$$scope:{ctx:i}}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function E6(i){let e,n;return e=new Ao.Root({props:{color:"accent",size:1,variant:"solid",highContrast:!0,$$slots:{default:[L6]},$$scope:{ctx:i}}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function I6(i){let e;return{c(){e=G("Agent")},m(n,t){x(n,e,t)},d(n){n&&b(e)}}}function L6(i){let e;return{c(){e=G("Agent")},m(n,t){x(n,e,t)},d(n){n&&b(e)}}}function R6(i){let e,n,t,o,r,s=mn(i[2]);function c(u){i[29](u)}let a={value:Sn.getDisplayName(i[2]),placeholder:"Conversation name",onAcceptEdit:i[27],onStartEdit:gb,onCancelEdit:hb};i[0]!==void 0&&(a.isEditing=i[0]),n=new v6({props:a}),i[28](n),et.push(()=>Et(n,"isEditing",c));let l=s&&Vl(i);return{c(){e=L("span"),v(n.$$.fragment),o=B(),l&&l.c(),A(e,"class","l-thread-menu-item__title svelte-nvsyjc"),A(e,"data-testid","thread-menu-item-title"),A(e,"slot","title")},m(u,f){x(u,e,f),w(n,e,null),F(e,o),l&&l.m(e,null),r=!0},p(u,f){const m={};4&f[0]&&(m.value=Sn.getDisplayName(u[2])),12&f[0]&&(m.onAcceptEdit=u[27]),!t&&1&f[0]&&(t=!0,m.isEditing=u[0],Rt(()=>t=!1)),n.$set(m),4&f[0]&&(s=mn(u[2])),s?l?(l.p(u,f),4&f[0]&&d(l,1)):(l=Vl(u),l.c(),d(l,1),l.m(e,null)):l&&(j(),$(l,1,1,()=>{l=null}),q())},i(u){r||(d(n.$$.fragment,u),d(l),r=!0)},o(u){$(n.$$.fragment,u),$(l),r=!1},d(u){u&&b(e),i[28](null),y(n),l&&l.d()}}}function D6(i){let e,n;return e=new we.Root({props:{open:i[6],$$slots:{default:[cb]},$$scope:{ctx:i}}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p(t,o){const r={};64&o[0]&&(r.open=t[6]),5862&o[0]|2&o[1]&&(r.$$scope={dirty:o,ctx:t}),e.$set(r)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function N6(i){let e,n,t,o;return e=new dt({props:{size:1,variant:"soft",color:"success",title:"Save",$$slots:{default:[lb]},$$scope:{ctx:i}}}),e.$on("click",function(){Nt(i[1].acceptEdit)&&i[1].acceptEdit.apply(this,arguments)}),t=new dt({props:{size:1,variant:"soft",color:"neutral",title:"Cancel",$$slots:{default:[ub]},$$scope:{ctx:i}}}),t.$on("click",function(){Nt(i[1].cancelEdit)&&i[1].cancelEdit.apply(this,arguments)}),{c(){v(e.$$.fragment),n=B(),v(t.$$.fragment)},m(r,s){w(e,r,s),x(r,n,s),w(t,r,s),o=!0},p(r,s){i=r;const c={};2&s[1]&&(c.$$scope={dirty:s,ctx:i}),e.$set(c);const a={};2&s[1]&&(a.$$scope={dirty:s,ctx:i}),t.$set(a)},i(r){o||(d(e.$$.fragment,r),d(t.$$.fragment,r),o=!0)},o(r){$(e.$$.fragment,r),$(t.$$.fragment,r),o=!1},d(r){r&&b(n),y(e,r),y(t,r)}}}function P6(i){let e,n;return e=new or({}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function F6(i){let e,n,t;return n=new dt({props:{variant:"ghost-block",color:"neutral",size:1,title:fb,$$slots:{default:[P6]},$$scope:{ctx:i}}}),n.$on("click",i[18]),{c(){e=L("div"),v(n.$$.fragment),A(e,"class","l-thread-menu-item__options svelte-nvsyjc")},m(o,r){x(o,e,r),w(n,e,null),t=!0},p(o,r){const s={};2&r[1]&&(s.$$scope={dirty:r,ctx:o}),n.$set(s)},i(o){t||(d(n.$$.fragment,o),t=!0)},o(o){$(n.$$.fragment,o),t=!1},d(o){o&&b(e),y(n)}}}function O6(i){let e;return{c(){e=G("Options")},m(n,t){x(n,e,t)},d(n){n&&b(e)}}}function Gl(i){let e,n;return e=new we.Item({props:{class:"c-thread-menu__share-link",onSelect:i[19],$$slots:{iconLeft:[Y6],default:[j6]},$$scope:{ctx:i}}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p(t,o){const r={};4&o[0]&&(r.onSelect=t[19]),128&o[0]|2&o[1]&&(r.$$scope={dirty:o,ctx:t}),e.$set(r)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function z6(i){let e;return{c(){e=G("Share link to session")},m(n,t){x(n,e,t)},d(n){n&&b(e)}}}function B6(i){let e;return{c(){e=G("Unable to create link")},m(n,t){x(n,e,t)},d(n){n&&b(e)}}}function U6(i){let e;return{c(){e=G("Link copied")},m(n,t){x(n,e,t)},d(n){n&&b(e)}}}function H6(i){let e;return{c(){e=G("Creating link")},m(n,t){x(n,e,t)},d(n){n&&b(e)}}}function j6(i){let e;function n(r,s){return r[7]==="retrieving"?H6:r[7]==="copied"?U6:r[7]==="failure"?B6:z6}let t=n(i),o=t(i);return{c(){o.c(),e=me()},m(r,s){o.m(r,s),x(r,e,s)},p(r,s){t!==(t=n(r))&&(o.d(1),o=t(r),o&&(o.c(),o.m(e.parentNode,e)))},d(r){r&&b(e),o.d(r)}}}function q6(i){let e,n;return e=new ji({}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function W6(i){let e,n;return e=new xr({}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function V6(i){let e,n;return e=new To({}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function G6(i){let e,n;return e=new go({props:{size:1}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function Y6(i){let e,n,t,o;const r=[G6,V6,W6,q6],s=[];function c(a,l){return a[7]==="retrieving"?0:a[7]==="copied"?1:a[7]==="failure"?2:3}return e=c(i),n=s[e]=r[e](i),{c(){n.c(),t=me()},m(a,l){s[e].m(a,l),x(a,t,l),o=!0},p(a,l){let u=e;e=c(a),e!==u&&(j(),$(s[u],1,1,()=>{s[u]=null}),q(),n=s[e],n||(n=s[e]=r[e](a),n.c()),d(n,1),n.m(t.parentNode,t))},i(a){o||(d(n),o=!0)},o(a){$(n),o=!1},d(a){a&&b(t),s[e].d(a)}}}function K6(i){let e;return{c(){e=G("Rename")},m(n,t){x(n,e,t)},d(n){n&&b(e)}}}function X6(i){let e,n;return e=new Vr({props:{slot:"iconLeft"}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p:P,i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function Z6(i){let e,n=i[2].isPinned?"Unpin":"Pin";return{c(){e=G(n)},m(t,o){x(t,e,o)},p(t,o){4&o[0]&&n!==(n=t[2].isPinned?"Unpin":"Pin")&&_e(e,n)},d(t){t&&b(e)}}}function J6(i){let e,n;return e=new x6({}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function Q6(i){let e,n;return e=new y6({}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function eb(i){let e,n,t,o;const r=[Q6,J6],s=[];function c(a,l){return a[2].isPinned?0:1}return e=c(i),n=s[e]=r[e](i),{c(){n.c(),t=me()},m(a,l){s[e].m(a,l),x(a,t,l),o=!0},p(a,l){let u=e;e=c(a),e!==u&&(j(),$(s[u],1,1,()=>{s[u]=null}),q(),n=s[e],n||(n=s[e]=r[e](a),n.c()),d(n,1),n.m(t.parentNode,t))},i(a){o||(d(n),o=!0)},o(a){$(n),o=!1},d(a){a&&b(t),s[e].d(a)}}}function Yl(i){let e,n,t,o;return e=new we.Item({props:{onSelect:i[22],$$slots:{iconLeft:[nb],default:[tb]},$$scope:{ctx:i}}}),t=new we.Item({props:{onSelect:i[23],$$slots:{iconLeft:[rb],default:[ob]},$$scope:{ctx:i}}}),{c(){v(e.$$.fragment),n=B(),v(t.$$.fragment)},m(r,s){w(e,r,s),x(r,n,s),w(t,r,s),o=!0},p(r,s){const c={};64&s[0]&&(c.onSelect=r[22]),2&s[1]&&(c.$$scope={dirty:s,ctx:r}),e.$set(c);const a={};64&s[0]&&(a.onSelect=r[23]),2&s[1]&&(a.$$scope={dirty:s,ctx:r}),t.$set(a)},i(r){o||(d(e.$$.fragment,r),d(t.$$.fragment,r),o=!0)},o(r){$(e.$$.fragment,r),$(t.$$.fragment,r),o=!1},d(r){r&&b(n),y(e,r),y(t,r)}}}function tb(i){let e;return{c(){e=G("Export conversation")},m(n,t){x(n,e,t)},d(n){n&&b(e)}}}function nb(i){let e,n;return e=new Vm({props:{slot:"iconLeft"}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p:P,i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function ob(i){let e;return{c(){e=G("Import conversation")},m(n,t){x(n,e,t)},d(n){n&&b(e)}}}function rb(i){let e,n;return e=new A6({props:{slot:"iconLeft"}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p:P,i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function ib(i){let e;return{c(){e=G("Delete")},m(n,t){x(n,e,t)},d(n){n&&b(e)}}}function sb(i){let e,n;return e=new Wr({props:{slot:"iconLeft"}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p:P,i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function ab(i){let e,n,t,o,r,s,c,a,l,u;e=new we.Label({props:{$$slots:{default:[O6]},$$scope:{ctx:i}}});let f=i[10]&&i[2].isShareable&&Gl(i);o=new we.Item({props:{onSelect:i[20],$$slots:{iconLeft:[X6],default:[K6]},$$scope:{ctx:i}}}),s=new we.Item({props:{title:mb,onSelect:i[21],$$slots:{iconLeft:[eb],default:[Z6]},$$scope:{ctx:i}}});let m=i[9]&&Yl(i);return l=new we.Item({props:{title:pb,color:"error",onSelect:i[24],$$slots:{iconLeft:[sb],default:[ib]},$$scope:{ctx:i}}}),{c(){v(e.$$.fragment),n=B(),f&&f.c(),t=B(),v(o.$$.fragment),r=B(),v(s.$$.fragment),c=B(),m&&m.c(),a=B(),v(l.$$.fragment)},m(p,_){w(e,p,_),x(p,n,_),f&&f.m(p,_),x(p,t,_),w(o,p,_),x(p,r,_),w(s,p,_),x(p,c,_),m&&m.m(p,_),x(p,a,_),w(l,p,_),u=!0},p(p,_){const M={};2&_[1]&&(M.$$scope={dirty:_,ctx:p}),e.$set(M),p[10]&&p[2].isShareable?f?(f.p(p,_),1028&_[0]&&d(f,1)):(f=Gl(p),f.c(),d(f,1),f.m(t.parentNode,t)):f&&(j(),$(f,1,1,()=>{f=null}),q());const C={};66&_[0]&&(C.onSelect=p[20]),2&_[1]&&(C.$$scope={dirty:_,ctx:p}),o.$set(C);const T={};4164&_[0]&&(T.onSelect=p[21]),4&_[0]|2&_[1]&&(T.$$scope={dirty:_,ctx:p}),s.$set(T),p[9]?m?(m.p(p,_),512&_[0]&&d(m,1)):(m=Yl(p),m.c(),d(m,1),m.m(a.parentNode,a)):m&&(j(),$(m,1,1,()=>{m=null}),q());const E={};100&_[0]&&(E.onSelect=p[24]),2&_[1]&&(E.$$scope={dirty:_,ctx:p}),l.$set(E)},i(p){u||(d(e.$$.fragment,p),d(f),d(o.$$.fragment,p),d(s.$$.fragment,p),d(m),d(l.$$.fragment,p),u=!0)},o(p){$(e.$$.fragment,p),$(f),$(o.$$.fragment,p),$(s.$$.fragment,p),$(m),$(l.$$.fragment,p),u=!1},d(p){p&&(b(n),b(t),b(r),b(c),b(a)),y(e,p),f&&f.d(p),y(o,p),y(s,p),m&&m.d(p),y(l,p)}}}function cb(i){let e,n,t,o;return e=new we.Trigger({props:{$$slots:{default:[F6]},$$scope:{ctx:i}}}),t=new we.Content({props:{size:1,side:"bottom",align:"end",onClickOutside:i[25],onEscapeKeyDown:i[26],$$slots:{default:[ab]},$$scope:{ctx:i}}}),{c(){v(e.$$.fragment),n=B(),v(t.$$.fragment)},m(r,s){w(e,r,s),x(r,n,s),w(t,r,s),o=!0},p(r,s){const c={};64&s[0]|2&s[1]&&(c.$$scope={dirty:s,ctx:r}),e.$set(c);const a={};64&s[0]&&(a.onClickOutside=r[25]),64&s[0]&&(a.onEscapeKeyDown=r[26]),5862&s[0]|2&s[1]&&(a.$$scope={dirty:s,ctx:r}),t.$set(a)},i(r){o||(d(e.$$.fragment,r),d(t.$$.fragment,r),o=!0)},o(r){$(e.$$.fragment,r),$(t.$$.fragment,r),o=!1},d(r){r&&b(n),y(e,r),y(t,r)}}}function lb(i){let e,n;return e=new To({}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function ub(i){let e,n;return e=new xr({}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function db(i){let e,n,t,o,r;const s=[N6,D6],c=[];function a(f,m){return f[0]?0:1}n=a(i),t=c[n]=s[n](i);const l=i[17].right,u=Ye(l,i,i[32],Wl);return{c(){e=L("div"),t.c(),o=B(),u&&u.c(),A(e,"slot","right"),A(e,"class","l-thread-menu-item__right svelte-nvsyjc")},m(f,m){x(f,e,m),c[n].m(e,null),F(e,o),u&&u.m(e,null),r=!0},p(f,m){let p=n;n=a(f),n===p?c[n].p(f,m):(j(),$(c[p],1,1,()=>{c[p]=null}),q(),t=c[n],t?t.p(f,m):(t=c[n]=s[n](f),t.c()),d(t,1),t.m(e,o)),u&&u.p&&(!r||2&m[1])&&Ke(u,l,f,f[32],r?Ze(l,f[32],m,S6):Xe(f[32]),Wl)},i(f){r||(d(t),d(u,f),r=!0)},o(f){$(t),$(u,f),r=!1},d(f){f&&b(e),c[n].d(),u&&u.d(f)}}}function $b(i){let e,n;return e=new tm({props:{selected:i[8],isSelectable:!0,$$slots:{right:[db],title:[R6]},$$scope:{ctx:i}}}),e.$on("click",i[30]),e.$on("keydown",function(){Nt(ko("Enter",i[31]))&&ko("Enter",i[31]).apply(this,arguments)}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p(t,o){i=t;const r={};256&o[0]&&(r.selected=i[8]),6127&o[0]|2&o[1]&&(r.$$scope={dirty:o,ctx:i}),e.$set(r)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}const fb="Conversation Options",mb="Pin session",pb="Delete session",gb=()=>{},hb=()=>{};function vb(i,e,n){let t,o,r,s,c,a,l=P,u=()=>(l(),l=lt(M,H=>n(12,c=H)),M),f=P;i.$$.on_destroy.push(()=>l()),i.$$.on_destroy.push(()=>f());let{$$slots:m={},$$scope:p}=e,{conversation:_}=e,{chatModel:M}=e;u();let C,{onConversationClicked:T}=e,{deleteConversation:E}=e,{editableTitle:R}=e,{isEditingTitle:N=!1}=e,J=!1;async function Q(H){if(H!==void 0&&C===void 0){n(7,C=_.lastUrl?"copied":"retrieving");try{const Y=await M.getConversationUrl(H);navigator.clipboard.writeText(Y),n(7,C="copied")}catch(Y){console.error("Failed to get conversation URL: ",Y),n(7,C="failure")}finally{setTimeout(()=>{n(6,J=!1),n(7,C=void 0)},1200)}}}async function X(){try{await M6(_,{includeMetadata:!0,notes:`Exported from thread menu on ${new Date().toISOString()}`})}catch(H){console.error("Failed to export conversation:",H)}}async function K(){try{const H=await k6(c,{generateNewId:!0,namePrefix:"[Imported] ",markAsImported:!0});H&&c.setCurrentConversation(H)}catch(H){console.error("Failed to import conversation:",H)}}return i.$$set=H=>{"conversation"in H&&n(2,_=H.conversation),"chatModel"in H&&u(n(3,M=H.chatModel)),"onConversationClicked"in H&&n(4,T=H.onConversationClicked),"deleteConversation"in H&&n(5,E=H.deleteConversation),"editableTitle"in H&&n(1,R=H.editableTitle),"isEditingTitle"in H&&n(0,N=H.isEditingTitle),"$$scope"in H&&n(32,p=H.$$scope)},i.$$.update=()=>{8&i.$$.dirty[0]&&(n(11,t=M.flags),f(),f=lt(t,H=>n(16,a=H))),65536&i.$$.dirty[0]&&n(10,o=a.enableShareService),65536&i.$$.dirty[0]&&n(9,r=a.enableConversationDebugUtils),13&i.$$.dirty[0]&&n(8,s=_.id===M.currentConversationId&&!N)},[N,R,_,M,T,E,J,C,s,r,o,t,c,Q,X,K,a,m,()=>{n(6,J=!J)},()=>Q(_.id),H=>{n(6,J=!1),R==null||R.startEdit(H)},()=>{c.toggleConversationPinned(_.id),n(6,J=!1)},async()=>{X(),n(6,J=!1)},async()=>{K(),n(6,J=!1)},async()=>{E(_.id),n(6,J=!1)},()=>n(6,J=!1),()=>n(6,J=!1),H=>{M.renameConversation(_.id,H)},function(H){et[H?"unshift":"push"](()=>{R=H,n(1,R)})},function(H){N=H,n(0,N)},()=>T(_.id),()=>T(_.id),p]}class wb extends ue{constructor(e){super(),de(this,e,vb,$b,ce,{conversation:2,chatModel:3,onConversationClicked:4,deleteConversation:5,editableTitle:1,isEditingTitle:0},null,[-1,-1])}}function Kl(i,e,n){const t=i.slice();return t[10]=e[n],t}function Xl(i){let e,n,t,o,r,s;t=new tm({props:{$$slots:{right:[kb],title:[yb]},$$scope:{ctx:i}}});let c=at(i[1]),a=[];for(let u=0;u<c.length;u+=1)a[u]=Zl(Kl(i,c,u));const l=u=>$(a[u],1,1,()=>{a[u]=null});return{c(){e=L("div"),n=L("div"),v(t.$$.fragment),o=B(),r=L("div");for(let u=0;u<a.length;u+=1)a[u].c();A(n,"class","l-thread-group__header svelte-1c3ly67"),A(e,"class","l-thread-group")},m(u,f){x(u,e,f),F(e,n),w(t,n,null),F(e,o),F(e,r);for(let m=0;m<a.length;m+=1)a[m]&&a[m].m(r,null);s=!0},p(u,f){const m={};if(8227&f&&(m.$$scope={dirty:f,ctx:u}),t.$set(m),30&f){let p;for(c=at(u[1]),p=0;p<c.length;p+=1){const _=Kl(u,c,p);a[p]?(a[p].p(_,f),d(a[p],1)):(a[p]=Zl(_),a[p].c(),d(a[p],1),a[p].m(r,null))}for(j(),p=c.length;p<a.length;p+=1)l(p);q()}},i(u){if(!s){d(t.$$.fragment,u);for(let f=0;f<c.length;f+=1)d(a[f]);s=!0}},o(u){$(t.$$.fragment,u),a=a.filter(Boolean);for(let f=0;f<a.length;f+=1)$(a[f]);s=!1},d(u){u&&b(e),y(t),pn(a,u)}}}function yb(i){let e,n;return{c(){e=L("span"),n=G(i[0]),A(e,"slot","title")},m(t,o){x(t,e,o),F(e,n)},p(t,o){1&o&&_e(n,t[0])},d(t){t&&b(e)}}}function bb(i){let e,n;return e=new or({}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function xb(i){let e,n;return e=new dt({props:{variant:"ghost-block",color:"neutral",size:1,title:"Group options",$$slots:{default:[bb]},$$scope:{ctx:i}}}),e.$on("click",i[7]),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p(t,o){const r={};8192&o&&(r.$$scope={dirty:o,ctx:t}),e.$set(r)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function _b(i){let e,n,t,o,r=i[1].length+"",s=i[1].length>1?"s":"";return{c(){e=G("Delete "),n=G(r),t=G(" thread"),o=G(s)},m(c,a){x(c,e,a),x(c,n,a),x(c,t,a),x(c,o,a)},p(c,a){2&a&&r!==(r=c[1].length+"")&&_e(n,r),2&a&&s!==(s=c[1].length>1?"s":"")&&_e(o,s)},d(c){c&&(b(e),b(n),b(t),b(o))}}}function Cb(i){let e,n;return e=new Wr({props:{slot:"iconLeft"}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p:P,i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function Ab(i){let e,n;return e=new we.Item({props:{color:"error",onSelect:i[6],$$slots:{iconLeft:[Cb],default:[_b]},$$scope:{ctx:i}}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p(t,o){const r={};8194&o&&(r.$$scope={dirty:o,ctx:t}),e.$set(r)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function Mb(i){let e,n,t,o;return e=new we.Trigger({props:{$$slots:{default:[xb]},$$scope:{ctx:i}}}),t=new we.Content({props:{size:1,side:"bottom",align:"end",$$slots:{default:[Ab]},$$scope:{ctx:i}}}),{c(){v(e.$$.fragment),n=B(),v(t.$$.fragment)},m(r,s){w(e,r,s),x(r,n,s),w(t,r,s),o=!0},p(r,s){const c={};8224&s&&(c.$$scope={dirty:s,ctx:r}),e.$set(c);const a={};8194&s&&(a.$$scope={dirty:s,ctx:r}),t.$set(a)},i(r){o||(d(e.$$.fragment,r),d(t.$$.fragment,r),o=!0)},o(r){$(e.$$.fragment,r),$(t.$$.fragment,r),o=!1},d(r){r&&b(n),y(e,r),y(t,r)}}}function kb(i){let e,n,t;return n=new we.Root({props:{open:i[5],triggerOn:[Je.Hover,Je.Click],onHoverStart:Tb,onHoverEnd:i[8],onOpenChange:i[9],$$slots:{default:[Mb]},$$scope:{ctx:i}}}),{c(){e=L("div"),v(n.$$.fragment),A(e,"slot","right"),A(e,"class","l-thread-group__options")},m(o,r){x(o,e,r),w(n,e,null),t=!0},p(o,r){const s={};32&r&&(s.open=o[5]),32&r&&(s.onHoverEnd=o[8]),8226&r&&(s.$$scope={dirty:r,ctx:o}),n.$set(s)},i(o){t||(d(n.$$.fragment,o),t=!0)},o(o){$(n.$$.fragment,o),t=!1},d(o){o&&b(e),y(n)}}}function Zl(i){let e,n;return e=new wb({props:{conversation:i[10],chatModel:i[4],onConversationClicked:i[2],deleteConversation:i[3]}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p(t,o){const r={};2&o&&(r.conversation=t[10]),16&o&&(r.chatModel=t[4]),4&o&&(r.onConversationClicked=t[2]),8&o&&(r.deleteConversation=t[3]),e.$set(r)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function Sb(i){let e,n,t=i[1].length>0&&Xl(i);return{c(){t&&t.c(),e=me()},m(o,r){t&&t.m(o,r),x(o,e,r),n=!0},p(o,[r]){o[1].length>0?t?(t.p(o,r),2&r&&d(t,1)):(t=Xl(o),t.c(),d(t,1),t.m(e.parentNode,e)):t&&(j(),$(t,1,1,()=>{t=null}),q())},i(o){n||(d(t),n=!0)},o(o){$(t),n=!1},d(o){o&&b(e),t&&t.d(o)}}}const Tb=()=>{};function Eb(i,e,n){let{groupTitle:t}=e,{conversations:o}=e,{onConversationClicked:r}=e,{deleteConversation:s}=e,{chatModel:c}=e,a=!1;return i.$$set=l=>{"groupTitle"in l&&n(0,t=l.groupTitle),"conversations"in l&&n(1,o=l.conversations),"onConversationClicked"in l&&n(2,r=l.onConversationClicked),"deleteConversation"in l&&n(3,s=l.deleteConversation),"chatModel"in l&&n(4,c=l.chatModel)},[t,o,r,s,c,a,async function(){await c.deleteConversations(o.map(l=>l.id))},()=>n(5,a=!a),()=>n(5,a=!1),l=>{var u;l||(u=document.activeElement)!=null&&u.closest(".l-thread-group__options")&&document.activeElement instanceof HTMLElement&&document.activeElement.blur()}]}class Ib extends ue{constructor(e){super(),de(this,e,Eb,Sb,ce,{groupTitle:0,conversations:1,onConversationClicked:2,deleteConversation:3,chatModel:4})}}function Jl(i,e,n){const t=i.slice();return t[39]=e[n].label,t[40]=e[n].value,t}function Ql(i,e,n){const t=i.slice();return t[36]=e[n],t[38]=n,t}function eu(i){let e,n,t={triggerOn:[Je.Click],$$slots:{content:[Ob],default:[Rb]},$$scope:{ctx:i}};return e=new Ne({props:t}),i[28](e),{c(){v(e.$$.fragment)},m(o,r){w(e,o,r),n=!0},p(o,r){const s={};2144&r[0]|4096&r[1]&&(s.$$scope={dirty:r,ctx:o}),e.$set(s)},i(o){n||(d(e.$$.fragment,o),n=!0)},o(o){$(e.$$.fragment,o),n=!1},d(o){i[28](null),y(e,o)}}}function Lb(i){let e,n;return e=new ji({}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function Rb(i){let e,n;return e=new dt({props:{variant:"ghost-block",color:"neutral",size:1,title:"Share session",$$slots:{default:[Lb]},$$scope:{ctx:i}}}),e.$on("click",i[27]),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p(t,o){const r={};4096&o[1]&&(r.$$scope={dirty:o,ctx:t}),e.$set(r)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function Db(i){let e;return{c(){e=G("Copy link to thread")},m(n,t){x(n,e,t)},p:P,i:P,o:P,d(n){n&&b(e)}}}function Nb(i){let e;return{c(){e=G(i[6])},m(n,t){x(n,e,t)},p(n,t){64&t[0]&&_e(e,n[6])},i:P,o:P,d(n){n&&b(e)}}}function Pb(i){let e;return{c(){e=G("Copied link to clipboard!")},m(n,t){x(n,e,t)},p:P,i:P,o:P,d(n){n&&b(e)}}}function Fb(i){let e,n,t,o;return n=new go({props:{size:1,useCurrentColor:!0}}),{c(){e=L("div"),v(n.$$.fragment),t=G(" Copying link...")},m(r,s){x(r,e,s),w(n,e,null),F(e,t),o=!0},p:P,i(r){o||(d(n.$$.fragment,r),o=!0)},o(r){$(n.$$.fragment,r),o=!1},d(r){r&&b(e),y(n)}}}function Ob(i){let e,n,t,o;const r=[Fb,Pb,Nb,Db],s=[];function c(a,l){return a[5]==="retrieving"?0:a[5]==="copied"?1:a[5]==="failure"?2:3}return n=c(i),t=s[n]=r[n](i),{c(){e=L("div"),t.c(),A(e,"slot","content")},m(a,l){x(a,e,l),s[n].m(e,null),o=!0},p(a,l){let u=n;n=c(a),n===u?s[n].p(a,l):(j(),$(s[u],1,1,()=>{s[u]=null}),q(),t=s[n],t?t.p(a,l):(t=s[n]=r[n](a),t.c()),d(t,1),t.m(e,null))},i(a){o||(d(t),o=!0)},o(a){$(t),o=!1},d(a){a&&b(e),s[n].d()}}}function zb(i){let e,n;return e=new Oo({}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function Bb(i){let e,n;return e=new Ts({}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function Ub(i){let e,n;return e=new dt({props:{variant:"solid",color:"neutral",size:1,"data-testid":Qb,$$slots:{default:[Bb]},$$scope:{ctx:i}}}),e.$on("click",i[29]),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p(t,o){const r={};4096&o[1]&&(r.$$scope={dirty:o,ctx:t}),e.$set(r)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function Hb(i){let e,n,t;return n=new Ur({props:{icons:[`${Ii.cmdOrCtrl}`,"L"]}}),{c(){e=L("div"),v(n.$$.fragment),A(e,"slot","content"),A(e,"class","c-threads-menu__new-thread-tooltip-content svelte-113v40n")},m(o,r){x(o,e,r),w(n,e,null),t=!0},p:P,i(o){t||(d(n.$$.fragment,o),t=!0)},o(o){$(n.$$.fragment,o),t=!1},d(o){o&&b(e),y(n)}}}function jb(i){let e,n,t,o,r,s,c=i[1].flags.enableShareService&&i[10]&&eu(i);return t=new dt({props:{variant:"ghost-block",color:"neutral",size:1,title:i[3]?iu:ru,$$slots:{default:[zb]},$$scope:{ctx:i}}}),t.$on("click",i[14]),t.$on("keydown",ko("Enter",i[14])),r=new Ne({props:{$$slots:{content:[Hb],default:[Ub]},$$scope:{ctx:i}}}),{c(){e=L("div"),c&&c.c(),n=B(),v(t.$$.fragment),o=B(),v(r.$$.fragment),A(e,"class","c-threads-menu__right-btns svelte-113v40n"),A(e,"slot","buttons")},m(a,l){x(a,e,l),c&&c.m(e,null),F(e,n),w(t,e,null),F(e,o),w(r,e,null),s=!0},p(a,l){a[1].flags.enableShareService&&a[10]?c?(c.p(a,l),1026&l[0]&&d(c,1)):(c=eu(a),c.c(),d(c,1),c.m(e,n)):c&&(j(),$(c,1,1,()=>{c=null}),q());const u={};8&l[0]&&(u.title=a[3]?iu:ru),4096&l[1]&&(u.$$scope={dirty:l,ctx:a}),t.$set(u);const f={};4096&l[1]&&(f.$$scope={dirty:l,ctx:a}),r.$set(f)},i(a){s||(d(c),d(t.$$.fragment,a),d(r.$$.fragment,a),s=!0)},o(a){$(c),$(t.$$.fragment,a),$(r.$$.fragment,a),s=!1},d(a){a&&b(e),c&&c.d(),y(t),y(r)}}}function qb(i){let e;return{c(){e=G("Sort by:")},m(n,t){x(n,e,t)},d(n){n&&b(e)}}}function Wb(i){let e,n=i[2]==="lastMessageTimestamp"?"Last Message":"Created Date";return{c(){e=G(n)},m(t,o){x(t,e,o)},p(t,o){4&o[0]&&n!==(n=t[2]==="lastMessageTimestamp"?"Last Message":"Created Date")&&_e(e,n)},d(t){t&&b(e)}}}function Vb(i){let e,n,t,o,r;return n=new Ge({props:{size:1,$$slots:{default:[Wb]},$$scope:{ctx:i}}}),o=new Oo({}),{c(){e=L("div"),v(n.$$.fragment),t=B(),v(o.$$.fragment),A(e,"class","c-threads-menu__sort-trigger svelte-113v40n")},m(s,c){x(s,e,c),w(n,e,null),F(e,t),w(o,e,null),r=!0},p(s,c){const a={};4&c[0]|4096&c[1]&&(a.$$scope={dirty:c,ctx:s}),n.$set(a)},i(s){r||(d(n.$$.fragment,s),d(o.$$.fragment,s),r=!0)},o(s){$(n.$$.fragment,s),$(o.$$.fragment,s),r=!1},d(s){s&&b(e),y(n),y(o)}}}function Gb(i){let e,n,t=i[39]+"";return{c(){e=G(t),n=B()},m(o,r){x(o,e,r),x(o,n,r)},p:P,d(o){o&&(b(e),b(n))}}}function tu(i){let e,n;function t(){return i[25](i[40])}return e=new we.Item({props:{onSelect:t,highlight:i[2]===i[40],$$slots:{default:[Gb]},$$scope:{ctx:i}}}),{c(){v(e.$$.fragment)},m(o,r){w(e,o,r),n=!0},p(o,r){i=o;const s={};513&r[0]&&(s.onSelect=t),4&r[0]&&(s.highlight=i[2]===i[40]),4096&r[1]&&(s.$$scope={dirty:r,ctx:i}),e.$set(s)},i(o){n||(d(e.$$.fragment,o),n=!0)},o(o){$(e.$$.fragment,o),n=!1},d(o){y(e,o)}}}function Yb(i){let e,n,t=at(i[13]),o=[];for(let s=0;s<t.length;s+=1)o[s]=tu(Jl(i,t,s));const r=s=>$(o[s],1,1,()=>{o[s]=null});return{c(){for(let s=0;s<o.length;s+=1)o[s].c();e=me()},m(s,c){for(let a=0;a<o.length;a+=1)o[a]&&o[a].m(s,c);x(s,e,c),n=!0},p(s,c){if(8709&c[0]){let a;for(t=at(s[13]),a=0;a<t.length;a+=1){const l=Jl(s,t,a);o[a]?(o[a].p(l,c),d(o[a],1)):(o[a]=tu(l),o[a].c(),d(o[a],1),o[a].m(e.parentNode,e))}for(j(),a=t.length;a<o.length;a+=1)r(a);q()}},i(s){if(!n){for(let c=0;c<t.length;c+=1)d(o[c]);n=!0}},o(s){o=o.filter(Boolean);for(let c=0;c<o.length;c+=1)$(o[c]);n=!1},d(s){s&&b(e),pn(o,s)}}}function Kb(i){let e,n,t,o;return e=new we.Trigger({props:{$$slots:{default:[Vb]},$$scope:{ctx:i}}}),t=new we.Content({props:{size:1,side:"bottom",align:"start",$$slots:{default:[Yb]},$$scope:{ctx:i}}}),{c(){v(e.$$.fragment),n=B(),v(t.$$.fragment)},m(r,s){w(e,r,s),x(r,n,s),w(t,r,s),o=!0},p(r,s){const c={};4&s[0]|4096&s[1]&&(c.$$scope={dirty:s,ctx:r}),e.$set(c);const a={};517&s[0]|4096&s[1]&&(a.$$scope={dirty:s,ctx:r}),t.$set(a)},i(r){o||(d(e.$$.fragment,r),d(t.$$.fragment,r),o=!0)},o(r){$(e.$$.fragment,r),$(t.$$.fragment,r),o=!1},d(r){r&&b(n),y(e,r),y(t,r)}}}function Xb(i){let e,n,t,o,r,s;t=new Ge({props:{size:1,weight:"medium",$$slots:{default:[qb]},$$scope:{ctx:i}}});let c={$$slots:{default:[Kb]},$$scope:{ctx:i}};return r=new we.Root({props:c}),i[26](r),{c(){e=L("div"),n=L("div"),v(t.$$.fragment),o=B(),v(r.$$.fragment),A(n,"class","c-threads-menu__sort-label svelte-113v40n"),A(e,"slot","sort-options"),A(e,"class","c-threads-menu__sort-options svelte-113v40n")},m(a,l){x(a,e,l),F(e,n),w(t,n,null),F(e,o),w(r,e,null),s=!0},p(a,l){const u={};4096&l[1]&&(u.$$scope={dirty:l,ctx:a}),t.$set(u);const f={};517&l[0]|4096&l[1]&&(f.$$scope={dirty:l,ctx:a}),r.$set(f)},i(a){s||(d(t.$$.fragment,a),d(r.$$.fragment,a),s=!0)},o(a){$(t.$$.fragment,a),$(r.$$.fragment,a),s=!1},d(a){a&&b(e),y(t),i[26](null),y(r)}}}function nu(i){let e,n,t,o;return n=new Hs({props:{size:4}}),{c(){e=L("div"),v(n.$$.fragment),t=B(),A(e,"class","c-threads-menu__separator svelte-113v40n")},m(r,s){x(r,e,s),w(n,e,null),F(e,t),o=!0},i(r){o||(d(n.$$.fragment,r),o=!0)},o(r){$(n.$$.fragment,r),o=!1},d(r){r&&b(e),y(n)}}}function ou(i){let e,n,t,o;e=new Ib({props:{groupTitle:i[36].groupTitle,conversations:i[36].conversations,onConversationClicked:i[17],deleteConversation:i[18],chatModel:i[1]}});let r=i[38]<i[4].length-1&&nu();return{c(){v(e.$$.fragment),n=B(),r&&r.c(),t=me()},m(s,c){w(e,s,c),x(s,n,c),r&&r.m(s,c),x(s,t,c),o=!0},p(s,c){const a={};16&c[0]&&(a.groupTitle=s[36].groupTitle),16&c[0]&&(a.conversations=s[36].conversations),2&c[0]&&(a.chatModel=s[1]),e.$set(a),s[38]<s[4].length-1?r?16&c[0]&&d(r,1):(r=nu(),r.c(),d(r,1),r.m(t.parentNode,t)):r&&(j(),$(r,1,1,()=>{r=null}),q())},i(s){o||(d(e.$$.fragment,s),d(r),o=!0)},o(s){$(e.$$.fragment,s),$(r),o=!1},d(s){s&&(b(n),b(t)),y(e,s),r&&r.d(s)}}}function Zb(i){let e,n,t=at(i[4]),o=[];for(let s=0;s<t.length;s+=1)o[s]=ou(Ql(i,t,s));const r=s=>$(o[s],1,1,()=>{o[s]=null});return{c(){e=L("div");for(let s=0;s<o.length;s+=1)o[s].c();A(e,"slot","body"),A(e,"data-testid","threads-menu-body")},m(s,c){x(s,e,c);for(let a=0;a<o.length;a+=1)o[a]&&o[a].m(e,null);n=!0},p(s,c){if(393234&c[0]){let a;for(t=at(s[4]),a=0;a<t.length;a+=1){const l=Ql(s,t,a);o[a]?(o[a].p(l,c),d(o[a],1)):(o[a]=ou(l),o[a].c(),d(o[a],1),o[a].m(e,null))}for(j(),a=t.length;a<o.length;a+=1)r(a);q()}},i(s){if(!n){for(let c=0;c<t.length;c+=1)d(o[c]);n=!0}},o(s){o=o.filter(Boolean);for(let c=0;c<o.length;c+=1)$(o[c]);n=!1},d(s){s&&b(e),pn(o,s)}}}function Jb(i){let e,n,t,o,r;function s(a){i[30](a)}let c={active:i[3],class:nm,title:Sn.getDisplayName(i[11]),$$slots:{body:[Zb],"sort-options":[Xb],buttons:[jb]},$$scope:{ctx:i}};return i[8]!==void 0&&(c.element=i[8]),e=new a6({props:c}),et.push(()=>Et(e,"element",s)),e.$on("click",i[14]),e.$on("keydown",ko("Enter",i[14])),{c(){v(e.$$.fragment)},m(a,l){w(e,a,l),t=!0,o||(r=[Le(window,"blur",i[19]),Le(window,"keydown",ko("Escape",i[15])),Le(window,"click",i[24],!0)],o=!0)},p(a,l){const u={};8&l[0]&&(u.active=a[3]),2048&l[0]&&(u.title=Sn.getDisplayName(a[11])),3839&l[0]|4096&l[1]&&(u.$$scope={dirty:l,ctx:a}),!n&&256&l[0]&&(n=!0,u.element=a[8],Rt(()=>n=!1)),e.$set(u)},i(a){t||(d(e.$$.fragment,a),t=!0)},o(a){$(e.$$.fragment,a),t=!1},d(a){y(e,a),o=!1,Qt(r)}}}const nm="js-threads-menu",Qb="new-thread-button",ru="Show Sessions",iu="Collapse Sessions";var Wt=(i=>(i.Pinned="Pinned",i.Active="Active remote agents",i.Today="Today",i.New="New",i.ThisWeek="Last 7 days",i.ThisMonth="Last 30 days",i.Older="Older",i))(Wt||{});function e5(i,e,n){let t,o,r,s,c,a,l=P,u=()=>(l(),l=lt(p,re=>n(1,s=re)),p),f=P,m=P;i.$$.on_destroy.push(()=>l()),i.$$.on_destroy.push(()=>f()),i.$$.on_destroy.push(()=>m());let{chatModel:p}=e;u();let{onActiveChanged:_=()=>{}}=e,{active:M}=e,C=M||!1;const T=[Wt.Pinned,Wt.Active,Wt.Today,Wt.ThisWeek,Wt.ThisMonth,Wt.Older];let E=[];function R(re){M===void 0&&C!==re&&(n(3,C=re),_(re))}function N(){R(!1)}function J(){p.setCurrentConversation(),N()}let Q,X=!1,K,H,Y,V="";async function Z(re){if(re!==void 0){K&&(clearTimeout(void 0),K.requestOpen()),n(5,Q="retrieving"),n(6,V="");try{const le=await p.getConversationUrl(re);navigator.clipboard.writeText(le),n(5,Q="copied")}catch(le){const oe=le;n(5,Q="failure"),n(6,V=oe.message)}finally{setTimeout(()=>{K==null||K.requestClose()},1200)}}}return i.$$set=re=>{"chatModel"in re&&u(n(0,p=re.chatModel)),"onActiveChanged"in re&&n(21,_=re.onActiveChanged),"active"in re&&n(22,M=re.active)},i.$$.update=()=>{2&i.$$.dirty[0]&&(n(12,t=s.sortConversationsBy),f(),f=lt(t,re=>n(2,c=re))),2&i.$$.dirty[0]&&(n(11,o=s.currentConversationModel),m(),m=lt(o,re=>n(23,a=re))),8388609&i.$$.dirty[0]&&n(10,r=!!a.id&&p.isConversationShareable(a.id)),7&i.$$.dirty[0]&&(re=>{var ie;const le=new Map,oe=new Date(new Date().setHours(0,0,0,0)),he=[{age:Wt.Today,date:oe},{age:Wt.ThisWeek,date:new Date(oe.getTime()-6048e5)},{age:Wt.ThisMonth,date:new Date(oe.getTime()-2592e6)}];for(const xe of re){const tt=Sn.getTime(xe,c);let Ae=((ie=he.find(He=>tt>=He.date))==null?void 0:ie.age)||Wt.Older;xe.isPinned&&(Ae=Wt.Pinned),le.set(Ae,[...le.get(Ae)||[],xe])}n(4,E=T.map(xe=>({groupTitle:xe,conversations:le.get(xe)||[]})).filter(xe=>xe.conversations.length>0))})(s.orderedConversations(c).filter(re=>!!p.flags.enableAgentMode||!mn(re)))},[p,s,c,C,E,Q,V,K,H,Y,r,o,t,[{label:"Last Message",value:"lastMessageTimestamp"},{label:"Created Date",value:"createdAt"}],function(re){R(!C),re.stopPropagation(),re.preventDefault()},N,J,function(re){p.setCurrentConversation(re),N()},async function(re){try{X=!0,await s.deleteConversation(re)}finally{X=!1}},function(){X||N()},Z,_,M,a,re=>{H&&re.composedPath().includes(H)||N()},re=>{p.setSortConversationsBy(re),Y==null||Y.requestClose()},function(re){et[re?"unshift":"push"](()=>{Y=re,n(9,Y)})},re=>{Z(o.id),re.stopPropagation()},function(re){et[re?"unshift":"push"](()=>{K=re,n(7,K)})},re=>{J(),re.stopPropagation()},function(re){H=re,n(8,H)}]}class t5 extends ue{constructor(e){super(),de(this,e,e5,Jb,ce,{chatModel:0,onActiveChanged:21,active:22},null,[-1,-1])}}const n5=1e3,o5=[Wt.New,Wt.Pinned,Wt.Active,Wt.Today,Wt.ThisWeek,Wt.ThisMonth,Wt.Older];function r5(i){return i.sort((e,n)=>n.sortTimestamp.getTime()-e.sortTimestamp.getTime())}function i5(i,e,n){if(i.type==="remoteAgent"){const t=e===i.id?n:void 0;if(t)return t.exchanges.slice(0,20).map(r=>r.exchange.request_message||"").join(" ");const o=i.agent;return o?[o.session_summary||"",...o.turn_summaries||[]].join(" "):""}return i.conversation&&i.conversation.chatHistory?i.conversation.chatHistory.slice(0,20).filter(t=>sf(t)).map(t=>t.request_message||"").join(" "):""}function s5(i){var n,t;if(!i.agent||!((t=(n=i.agent.workspace_setup)==null?void 0:n.starting_files)!=null&&t.github_commit_ref))return"";const e=i.agent.workspace_setup.starting_files.github_commit_ref.repository_url;return[e,Q$(e),Es(e)].filter(Boolean).join(" ")}function a5(i){let e,n;return e=new ht({props:{size:1,variant:"soft",color:"neutral","data-testid":om,$$slots:{iconLeft:[u5],default:[l5]},$$scope:{ctx:i}}}),e.$on("click",i[17]),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p(t,o){const r={};524288&o&&(r.$$scope={dirty:o,ctx:t}),e.$set(r)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function c5(i){let e,n,t;return n=new Kf.Root({props:{variant:"soft",color:"neutral",radius:"medium",size:1,dropdownSide:"bottom",dropdownAlign:"end",class:"c-agent-type-dropdown__button",$$slots:{"dropdown-content":[g5],button:[p5]},$$scope:{ctx:i}}}),{c(){e=L("div"),v(n.$$.fragment),A(e,"class","new-thread-dropdown svelte-a7mgt")},m(o,r){x(o,e,r),w(n,e,null),t=!0},p(o,r){const s={};524409&r&&(s.$$scope={dirty:r,ctx:o}),n.$set(s)},i(o){t||(d(n.$$.fragment,o),t=!0)},o(o){$(n.$$.fragment,o),t=!1},d(o){o&&b(e),y(n)}}}function l5(i){let e;return{c(){e=G("New")},m(n,t){x(n,e,t)},d(n){n&&b(e)}}}function u5(i){let e,n;return e=new ef({props:{slot:"iconLeft"}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p:P,i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function d5(i){let e;return{c(){e=G("New")},m(n,t){x(n,e,t)},d(n){n&&b(e)}}}function $5(i){let e,n,t;var o=i[0].icon;return o&&(e=ln(o,{props:{slot:"iconLeft"}})),{c(){e&&v(e.$$.fragment),n=me()},m(r,s){e&&w(e,r,s),x(r,n,s),t=!0},p(r,s){if(1&s&&o!==(o=r[0].icon)){if(e){j();const c=e;$(c.$$.fragment,1,0,()=>{y(c,1)}),q()}o?(e=ln(o,{props:{slot:"iconLeft"}}),v(e.$$.fragment),d(e.$$.fragment,1),w(e,n.parentNode,n)):e=null}},i(r){t||(e&&d(e.$$.fragment,r),t=!0)},o(r){e&&$(e.$$.fragment,r),t=!1},d(r){r&&b(n),e&&y(e,r)}}}function f5(i){let e,n;return e=new ht({props:{size:1,variant:"soft",color:"neutral","data-testid":om,"data-split-button-main":!0,$$slots:{iconLeft:[$5],default:[d5]},$$scope:{ctx:i}}}),e.$on("click",i[16]),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p(t,o){const r={};524289&o&&(r.$$scope={dirty:o,ctx:t}),e.$set(r)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function m5(i){let e,n,t,o,r,s;return r=new Ur({props:{icons:[`${Ii.cmdOrCtrl}`,"L"]}}),{c(){e=L("div"),n=L("span"),t=G(i[4]),o=B(),v(r.$$.fragment),A(e,"slot","content"),A(e,"class","c-new-thread-dropdown__tooltip-content svelte-a7mgt")},m(c,a){x(c,e,a),F(e,n),F(n,t),F(e,o),w(r,e,null),s=!0},p(c,a){(!s||16&a)&&_e(t,c[4])},i(c){s||(d(r.$$.fragment,c),s=!0)},o(c){$(r.$$.fragment,c),s=!1},d(c){c&&b(e),y(r)}}}function p5(i){let e,n;return e=new Ne({props:{slot:"button",$$slots:{content:[m5],default:[f5]},$$scope:{ctx:i}}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p(t,o){const r={};524305&o&&(r.$$scope={dirty:o,ctx:t}),e.$set(r)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function su(i){let e,n;return e=new wr({props:{onSelect:i[14],isConversationAgentic:!0,tooltipSide:"right",tooltipContent:"Require approval for some tools","data-testid":w5}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p(t,o){const r={};8&o&&(r.onSelect=t[14]),e.$set(r)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function au(i){let e,n;return e=new wr({props:{onSelect:i[15],isBackgroundAgent:!0,tooltipSide:"right",tooltipContent:"Run background agents in the cloud","data-testid":y5}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p:P,i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function g5(i){let e,n,t,o,r;e=new wr({props:{onSelect:i[13],isConversationAgentic:!1,tooltipSide:"right",tooltipContent:"Ask Augment","data-testid":v5}});let s=i[5]&&su(i),c=i[6]&&au(i);return{c(){v(e.$$.fragment),n=B(),s&&s.c(),t=B(),c&&c.c(),o=me()},m(a,l){w(e,a,l),x(a,n,l),s&&s.m(a,l),x(a,t,l),c&&c.m(a,l),x(a,o,l),r=!0},p(a,l){a[5]?s?(s.p(a,l),32&l&&d(s,1)):(s=su(a),s.c(),d(s,1),s.m(t.parentNode,t)):s&&(j(),$(s,1,1,()=>{s=null}),q()),a[6]?c?(c.p(a,l),64&l&&d(c,1)):(c=au(a),c.c(),d(c,1),c.m(o.parentNode,o)):c&&(j(),$(c,1,1,()=>{c=null}),q())},i(a){r||(d(e.$$.fragment,a),d(s),d(c),r=!0)},o(a){$(e.$$.fragment,a),$(s),$(c),r=!1},d(a){a&&(b(n),b(t),b(o)),y(e,a),s&&s.d(a),c&&c.d(a)}}}function h5(i){let e,n,t,o;const r=[c5,a5],s=[];function c(a,l){return a[5]||a[6]?0:1}return e=c(i),n=s[e]=r[e](i),{c(){n.c(),t=me()},m(a,l){s[e].m(a,l),x(a,t,l),o=!0},p(a,[l]){let u=e;e=c(a),e===u?s[e].p(a,l):(j(),$(s[u],1,1,()=>{s[u]=null}),q(),n=s[e],n?n.p(a,l):(n=s[e]=r[e](a),n.c()),d(n,1),n.m(t.parentNode,t))},i(a){o||(d(n),o=!0)},o(a){$(n),o=!1},d(a){a&&b(t),s[e].d(a)}}}const om="new-thread-button",v5="new-chat-thread-button",w5="new-local-agent-manual-thread-button",y5="new-remote-agent-thread-button";function b5(i,e,n){let t,o,r,s,c,a,l,u,f,m,p=P,_=P;i.$$.on_destroy.push(()=>p()),i.$$.on_destroy.push(()=>_());const M=Se(Tn.key);Te(i,M,R=>n(10,l=R));const C=Se(gr.key),T=Se("chatModel");Te(i,T,R=>n(12,m=R));const E=Se("agentConversationModel");return i.$$.update=()=>{4096&i.$$.dirty&&n(6,t=!!T&&m.flags.enableBackgroundAgents),4096&i.$$.dirty&&n(5,o=!!T&&m.flags.enableAgentMode),3086&i.$$.dirty&&n(0,c=Hi({isConversationAgentic:!!r&&f,agentExecutionMode:s?u:void 0,isBackgroundAgent:!!M&&l.isActive})),1&i.$$.dirty&&n(4,a=c.type==="remoteAgent"?"New Remote Agent":c.type==="localAgent"?"New Agent":"New Chat")},n(2,r=E==null?void 0:E.isCurrConversationAgentic),_(),_=lt(r,R=>n(11,f=R)),n(1,s=T==null?void 0:T.agentExecutionMode),p(),p=lt(s,R=>n(3,u=R)),[c,s,r,u,a,o,t,M,C,T,l,f,m,()=>C.createNewChatThread(),()=>C.createNewLocalAgentThread(u),()=>C.createNewRemoteAgentThread(),()=>C.createThreadOfCurrentType(),()=>C.createNewChatThread()]}class x5 extends ue{constructor(e){super(),de(this,e,b5,h5,ce,{})}}function cu(i){let e;return{c(){e=L("div"),A(e,"class","update-indicator svelte-ef9b48")},m(n,t){x(n,e,t)},d(n){n&&b(e)}}}function _5(i){let e,n,t,o;n=new qi({});let r=i[0]&&cu();return{c(){e=L("div"),v(n.$$.fragment),t=B(),r&&r.c(),A(e,"class","remote-agent-icon svelte-ef9b48")},m(s,c){x(s,e,c),w(n,e,null),F(e,t),r&&r.m(e,null),o=!0},p(s,[c]){s[0]?r||(r=cu(),r.c(),r.m(e,null)):r&&(r.d(1),r=null)},i(s){o||(d(n.$$.fragment,s),o=!0)},o(s){$(n.$$.fragment,s),o=!1},d(s){s&&b(e),y(n),r&&r.d()}}}function C5(i,e,n){let{hasUpdates:t=!1}=e;return i.$$set=o=>{"hasUpdates"in o&&n(0,t=o.hasUpdates)},[t]}class A5 extends ue{constructor(e){super(),de(this,e,C5,_5,ce,{hasUpdates:0})}}function M5(i){let e,n;return{c(){e=rt("svg"),n=rt("path"),A(n,"d","M11.45 7.25C11.9167 7.68333 12.15 8.21667 12.15 8.85C12.15 9.45 11.95 9.98333 11.55 10.45C11.15 10.8833 10.65 11.1333 10.05 11.2C9.45 11.2333 8.9 11.0833 8.4 10.75C7.93333 10.3833 7.63333 9.9 7.5 9.3C6.83333 9.26667 6.18333 9.08333 5.55 8.75C4.81667 8.38333 4.2 7.85 3.7 7.15V9.4C4.06667 9.46667 4.4 9.63333 4.7 9.9C5 10.1333 5.21667 10.4167 5.35 10.75C5.51667 11.0833 5.58333 11.4 5.55 11.7C5.55 12.2 5.41667 12.65 5.15 13.05C4.91667 13.4167 4.56667 13.7 4.1 13.9C3.66667 14.0667 3.21667 14.1 2.75 14C2.28333 13.9 1.88333 13.6833 1.55 13.35C1.21667 13.0167 1 12.6333 0.9 12.2C0.833333 11.7333 0.883333 11.2833 1.05 10.85C1.25 10.3833 1.53333 10.0167 1.9 9.75C2.16667 9.58333 2.45 9.46667 2.75 9.4V4.65C2.28333 4.55 1.88333 4.33333 1.55 4C1.21667 3.66667 1 3.26667 0.9 2.8C0.833333 2.33333 0.883333 1.88333 1.05 1.45C1.25 1.01667 1.53333 0.666666 1.9 0.4C2.3 0.133333 2.73333 0 3.2 0C3.53333 0 3.85 0.0666666 4.15 0.2C4.75 0.433333 5.16667 0.849999 5.4 1.45C5.53333 1.75 5.6 2.06667 5.6 2.4C5.6 2.86667 5.46667 3.3 5.2 3.7C4.93333 4.06667 4.58333 4.35 4.15 4.55C4.01667 4.61667 3.88333 4.65 3.75 4.65C3.85 5.65 4.25 6.5 4.95 7.2C5.65 7.9 6.5 8.3 7.5 8.4C7.53333 8.26667 7.56667 8.13333 7.6 8C7.8 7.56667 8.1 7.21667 8.5 6.95C8.96667 6.65 9.46667 6.53333 10 6.6C10.5667 6.63333 11.05 6.85 11.45 7.25ZM3.75 10.4C3.48333 10.3 3.21667 10.2833 2.95 10.35C2.68333 10.3833 2.43333 10.5167 2.2 10.75C2 10.95 1.86667 11.1833 1.8 11.45C1.76667 11.7167 1.8 11.9833 1.9 12.25C2.03333 12.5167 2.21667 12.7333 2.45 12.9C2.71667 13.0667 3.01667 13.1333 3.35 13.1C3.68333 13.0667 3.96667 12.9333 4.2 12.7C4.43333 12.4667 4.56667 12.1833 4.6 11.85C4.63333 11.5167 4.56667 11.2333 4.4 11C4.23333 10.7333 4.01667 10.5333 3.75 10.4ZM3.2 3.75C3.56667 3.75 3.86667 3.65 4.1 3.45C4.36667 3.21667 4.53333 2.93333 4.6 2.6C4.66667 2.26667 4.61667 1.96667 4.45 1.7C4.28333 1.4 4.05 1.2 3.75 1.1C3.48333 0.966667 3.21667 0.933333 2.95 1C2.68333 1.03333 2.43333 1.15 2.2 1.35C2 1.55 1.86667 1.8 1.8 2.1C1.76667 2.36667 1.8 2.63333 1.9 2.9C2.03333 3.13333 2.21667 3.33333 2.45 3.5C2.68333 3.66667 2.93333 3.75 3.2 3.75ZM10.8 9.9C10.9667 9.73333 11.0833 9.53333 11.15 9.3C11.2167 9.06667 11.2167 8.85 11.15 8.65C11.1167 8.41667 11.0167 8.21667 10.85 8.05C10.7167 7.85 10.5333 7.7 10.3 7.6C10.0667 7.5 9.8 7.48333 9.5 7.55C9.23333 7.58333 9 7.7 8.8 7.9C8.6 8.1 8.46667 8.35 8.4 8.65C8.33333 8.91667 8.35 9.16667 8.45 9.4C8.55 9.63333 8.68333 9.83333 8.85 10C9.05 10.1333 9.26667 10.2333 9.5 10.3C9.73333 10.3333 9.96667 10.3167 10.2 10.25C10.4333 10.1833 10.6333 10.0667 10.8 9.9Z"),A(e,"width","15"),A(e,"height","15"),A(e,"viewBox","-1 0 15 15"),A(e,"fill","currentColor"),A(e,"xmlns","http://www.w3.org/2000/svg")},m(t,o){x(t,e,o),F(e,n)},p:P,i:P,o:P,d(t){t&&b(e)}}}class rm extends ue{constructor(e){super(),de(this,e,null,M5,ce,{})}}function k5(i){let e,n;return e=new or({}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function S5(i){let e,n;return e=new dt({props:{variant:"ghost-block",color:"neutral",size:.5,class:"c-agent-header__options-btn",$$slots:{default:[k5]},$$scope:{ctx:i}}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p(t,o){const r={};2097152&o&&(r.$$scope={dirty:o,ctx:t}),e.$set(r)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function lu(i){var s;let e,n,t,o=i[3]&&uu(i),r=i[2]&&((s=i[0].conversation)==null?void 0:s.isShareable)&&du(i);return{c(){o&&o.c(),e=B(),r&&r.c(),n=me()},m(c,a){o&&o.m(c,a),x(c,e,a),r&&r.m(c,a),x(c,n,a),t=!0},p(c,a){var l;c[3]?o?(o.p(c,a),8&a&&d(o,1)):(o=uu(c),o.c(),d(o,1),o.m(e.parentNode,e)):o&&(j(),$(o,1,1,()=>{o=null}),q()),c[2]&&((l=c[0].conversation)!=null&&l.isShareable)?r?(r.p(c,a),5&a&&d(r,1)):(r=du(c),r.c(),d(r,1),r.m(n.parentNode,n)):r&&(j(),$(r,1,1,()=>{r=null}),q())},i(c){t||(d(o),d(r),t=!0)},o(c){$(o),$(r),t=!1},d(c){c&&(b(e),b(n)),o&&o.d(c),r&&r.d(c)}}}function uu(i){let e,n;return e=new we.Item({props:{onSelect:i[13],$$slots:{iconLeft:[E5],default:[T5]},$$scope:{ctx:i}}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p(t,o){const r={};2097152&o&&(r.$$scope={dirty:o,ctx:t}),e.$set(r)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function T5(i){let e;return{c(){e=G("Rename")},m(n,t){x(n,e,t)},d(n){n&&b(e)}}}function E5(i){let e,n;return e=new Vr({props:{slot:"iconLeft"}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p:P,i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function du(i){let e,n;return e=new we.Item({props:{class:"c-thread-menu__share-link",onSelect:i[15],$$slots:{iconLeft:[U5],default:[P5]},$$scope:{ctx:i}}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p(t,o){const r={};2097248&o&&(r.$$scope={dirty:o,ctx:t}),e.$set(r)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function I5(i){let e;return{c(){e=G("Share link to session")},m(n,t){x(n,e,t)},p:P,d(n){n&&b(e)}}}function L5(i){let e;return{c(){e=G("Unable to create link")},m(n,t){x(n,e,t)},p:P,d(n){n&&b(e)}}}function R5(i){let e;return{c(){e=G("Link copied")},m(n,t){x(n,e,t)},p:P,d(n){n&&b(e)}}}function D5(i){let e;return{c(){e=G("Creating link")},m(n,t){x(n,e,t)},p:P,d(n){n&&b(e)}}}function N5(i){let e;return{c(){e=G(i[6])},m(n,t){x(n,e,t)},p(n,t){64&t&&_e(e,n[6])},d(n){n&&b(e)}}}function P5(i){let e;function n(r,s){return r[6]?N5:r[5]==="retrieving"?D5:r[5]==="copied"?R5:r[5]==="failure"?L5:I5}let t=n(i),o=t(i);return{c(){o.c(),e=me()},m(r,s){o.m(r,s),x(r,e,s)},p(r,s){t===(t=n(r))&&o?o.p(r,s):(o.d(1),o=t(r),o&&(o.c(),o.m(e.parentNode,e)))},d(r){r&&b(e),o.d(r)}}}function F5(i){let e,n;return e=new ji({}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function O5(i){let e,n;return e=new xr({}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function z5(i){let e,n;return e=new To({}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function B5(i){let e,n;return e=new go({props:{size:1}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function U5(i){let e,n,t,o;const r=[B5,z5,O5,F5],s=[];function c(a,l){return a[5]==="retrieving"?0:a[5]==="copied"?1:a[5]==="failure"?2:3}return e=c(i),n=s[e]=r[e](i),{c(){n.c(),t=me()},m(a,l){s[e].m(a,l),x(a,t,l),o=!0},p(a,l){let u=e;e=c(a),e!==u&&(j(),$(s[u],1,1,()=>{s[u]=null}),q(),n=s[e],n||(n=s[e]=r[e](a),n.c()),d(n,1),n.m(t.parentNode,t))},i(a){o||(d(n),o=!0)},o(a){$(n),o=!1},d(a){a&&b(t),s[e].d(a)}}}function H5(i){let e,n=i[0].isPinned?"Unpin":"Pin";return{c(){e=G(n)},m(t,o){x(t,e,o)},p(t,o){1&o&&n!==(n=t[0].isPinned?"Unpin":"Pin")&&_e(e,n)},d(t){t&&b(e)}}}function j5(i){let e,n,t;return n=new Os({}),{c(){e=L("div"),v(n.$$.fragment),A(e,"class","pin-icon")},m(o,r){x(o,e,r),w(n,e,null),t=!0},p:P,i(o){t||(d(n.$$.fragment,o),t=!0)},o(o){$(n.$$.fragment,o),t=!1},d(o){o&&b(e),y(n)}}}function $u(i){let e,n,t,o;return e=new we.Item({props:{onSelect:i[14],$$slots:{iconLeft:[G5],default:[V5]},$$scope:{ctx:i}}}),t=new we.Item({props:{onSelect:i[13],$$slots:{iconLeft:[K5],default:[Y5]},$$scope:{ctx:i}}}),{c(){v(e.$$.fragment),n=B(),v(t.$$.fragment)},m(r,s){w(e,r,s),x(r,n,s),w(t,r,s),o=!0},p(r,s){const c={};2097409&s&&(c.$$scope={dirty:s,ctx:r}),e.$set(c);const a={};2097152&s&&(a.$$scope={dirty:s,ctx:r}),t.$set(a)},i(r){o||(d(e.$$.fragment,r),d(t.$$.fragment,r),o=!0)},o(r){$(e.$$.fragment,r),$(t.$$.fragment,r),o=!1},d(r){r&&b(n),y(e,r),y(t,r)}}}function q5(i){let e;return{c(){e=G("Copy ID")},m(n,t){x(n,e,t)},p:P,d(n){n&&b(e)}}}function W5(i){let e,n=i[8].get(i[0].id)+"";return{c(){e=G(n)},m(t,o){x(t,e,o)},p(t,o){257&o&&n!==(n=t[8].get(t[0].id)+"")&&_e(e,n)},d(t){t&&b(e)}}}function V5(i){let e,n;function t(s,c){return 257&c&&(e=null),e==null&&(e=!!s[8].get(s[0].id)),e?W5:q5}let o=t(i,-1),r=o(i);return{c(){r.c(),n=me()},m(s,c){r.m(s,c),x(s,n,c)},p(s,c){o===(o=t(s,c))&&r?r.p(s,c):(r.d(1),r=o(s),r&&(r.c(),r.m(n.parentNode,n)))},d(s){s&&b(n),r.d(s)}}}function G5(i){let e,n;return e=new xf({props:{slot:"iconLeft"}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p:P,i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function Y5(i){let e;return{c(){e=G("Rename")},m(n,t){x(n,e,t)},d(n){n&&b(e)}}}function K5(i){let e,n;return e=new Vr({props:{slot:"iconLeft"}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p:P,i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function X5(i){let e;return{c(){e=G("Delete")},m(n,t){x(n,e,t)},d(n){n&&b(e)}}}function Z5(i){let e,n,t;return n=new Wr({}),{c(){e=L("div"),v(n.$$.fragment),A(e,"class","trash-icon svelte-1l3udf2")},m(o,r){x(o,e,r),w(n,e,null),t=!0},p:P,i(o){t||(d(n.$$.fragment,o),t=!0)},o(o){$(n.$$.fragment,o),t=!1},d(o){o&&b(e),y(n)}}}function fu(i){let e,n,t,o,r,s,c,a;return e=new we.Separator({}),t=new we.Label({props:{$$slots:{default:[J5]},$$scope:{ctx:i}}}),r=new we.Item({props:{onSelect:i[17],$$slots:{default:[Q5]},$$scope:{ctx:i}}}),c=new we.Item({props:{onSelect:i[18],$$slots:{default:[ex]},$$scope:{ctx:i}}}),{c(){v(e.$$.fragment),n=B(),v(t.$$.fragment),o=B(),v(r.$$.fragment),s=B(),v(c.$$.fragment)},m(l,u){w(e,l,u),x(l,n,u),w(t,l,u),x(l,o,u),w(r,l,u),x(l,s,u),w(c,l,u),a=!0},p(l,u){const f={};2097152&u&&(f.$$scope={dirty:u,ctx:l}),t.$set(f);const m={};1&u&&(m.onSelect=l[17]),2097152&u&&(m.$$scope={dirty:u,ctx:l}),r.$set(m);const p={};1&u&&(p.onSelect=l[18]),2097152&u&&(p.$$scope={dirty:u,ctx:l}),c.$set(p)},i(l){a||(d(e.$$.fragment,l),d(t.$$.fragment,l),d(r.$$.fragment,l),d(c.$$.fragment,l),a=!0)},o(l){$(e.$$.fragment,l),$(t.$$.fragment,l),$(r.$$.fragment,l),$(c.$$.fragment,l),a=!1},d(l){l&&(b(n),b(o),b(s)),y(e,l),y(t,l),y(r,l),y(c,l)}}}function J5(i){let e;return{c(){e=G("INTERNAL Debug Features")},m(n,t){x(n,e,t)},d(n){n&&b(e)}}}function Q5(i){let e;return{c(){e=G("Pause")},m(n,t){x(n,e,t)},d(n){n&&b(e)}}}function ex(i){let e;return{c(){e=G("Resume")},m(n,t){x(n,e,t)},d(n){n&&b(e)}}}function tx(i){let e,n,t,o,r,s,c,a,l=i[1]!=="remoteAgent"&&lu(i);t=new we.Item({props:{onSelect:i[11],$$slots:{iconLeft:[j5],default:[H5]},$$scope:{ctx:i}}});let u=i[1]==="remoteAgent"&&$u(i);s=new we.Item({props:{color:"error",onSelect:i[12],$$slots:{iconLeft:[Z5],default:[X5]},$$scope:{ctx:i}}});let f=i[1]==="remoteAgent"&&i[7]&&fu(i);return{c(){e=L("div"),l&&l.c(),n=B(),v(t.$$.fragment),o=B(),u&&u.c(),r=B(),v(s.$$.fragment),c=B(),f&&f.c(),A(e,"class","c-thread-menu svelte-1l3udf2")},m(m,p){x(m,e,p),l&&l.m(e,null),F(e,n),w(t,e,null),F(e,o),u&&u.m(e,null),F(e,r),w(s,e,null),F(e,c),f&&f.m(e,null),a=!0},p(m,p){m[1]!=="remoteAgent"?l?(l.p(m,p),2&p&&d(l,1)):(l=lu(m),l.c(),d(l,1),l.m(e,n)):l&&(j(),$(l,1,1,()=>{l=null}),q());const _={};2097153&p&&(_.$$scope={dirty:p,ctx:m}),t.$set(_),m[1]==="remoteAgent"?u?(u.p(m,p),2&p&&d(u,1)):(u=$u(m),u.c(),d(u,1),u.m(e,r)):u&&(j(),$(u,1,1,()=>{u=null}),q());const M={};2097152&p&&(M.$$scope={dirty:p,ctx:m}),s.$set(M),m[1]==="remoteAgent"&&m[7]?f?(f.p(m,p),130&p&&d(f,1)):(f=fu(m),f.c(),d(f,1),f.m(e,null)):f&&(j(),$(f,1,1,()=>{f=null}),q())},i(m){a||(d(l),d(t.$$.fragment,m),d(u),d(s.$$.fragment,m),d(f),a=!0)},o(m){$(l),$(t.$$.fragment,m),$(u),$(s.$$.fragment,m),$(f),a=!1},d(m){m&&b(e),l&&l.d(),y(t),u&&u.d(),y(s),f&&f.d()}}}function nx(i){let e,n,t,o;return e=new we.Trigger({props:{$$slots:{default:[S5]},$$scope:{ctx:i}}}),t=new we.Content({props:{size:1,side:"bottom",align:"end",$$slots:{default:[tx]},$$scope:{ctx:i}}}),{c(){v(e.$$.fragment),n=B(),v(t.$$.fragment)},m(r,s){w(e,r,s),x(r,n,s),w(t,r,s),o=!0},p(r,s){const c={};2097152&s&&(c.$$scope={dirty:s,ctx:r}),e.$set(c);const a={};2097647&s&&(a.$$scope={dirty:s,ctx:r}),t.$set(a)},i(r){o||(d(e.$$.fragment,r),d(t.$$.fragment,r),o=!0)},o(r){$(e.$$.fragment,r),$(t.$$.fragment,r),o=!1},d(r){r&&b(n),y(e,r),y(t,r)}}}function ox(i){let e,n,t;function o(s){i[19](s)}let r={nested:!1,$$slots:{default:[nx]},$$scope:{ctx:i}};return i[4]!==void 0&&(r.requestClose=i[4]),e=new we.Root({props:r}),et.push(()=>Et(e,"requestClose",o)),{c(){v(e.$$.fragment)},m(s,c){w(e,s,c),t=!0},p(s,[c]){const a={};2097647&c&&(a.$$scope={dirty:c,ctx:s}),!n&&16&c&&(n=!0,a.requestClose=s[4],Rt(()=>n=!1)),e.$set(a)},i(s){t||(d(e.$$.fragment,s),t=!0)},o(s){$(e.$$.fragment,s),t=!1},d(s){y(e,s)}}}function rx(i,e,n){let t,o,r=Se("chatModel");const s=Se(Tn.key);let c,a,{thread:l}=e,{type:u="chat"}=e,{afterDelete:f}=e,{enableShareService:m=!1}=e,{onRename:p}=e,_="";const M=Tt(new Map);return Te(i,M,C=>n(8,o=C)),i.$$set=C=>{"thread"in C&&n(0,l=C.thread),"type"in C&&n(1,u=C.type),"afterDelete"in C&&n(16,f=C.afterDelete),"enableShareService"in C&&n(2,m=C.enableShareService),"onRename"in C&&n(3,p=C.onRename)},n(7,t=r.flags.enableDebugFeatures),[l,u,m,p,c,a,_,t,o,s,M,function(){u==="remoteAgent"?s==null||s.toggleAgentPinned(l.id,l.isPinned||!1):r&&r.toggleConversationPinned(l.id)},async function(){if(u==="remoteAgent"){if(!await(s==null?void 0:s.deleteAgent(l.id)))return}else await r.deleteConversation(l.id);f==null||f()},function(){p==null||p(l.id,l.title),c()},function(){navigator.clipboard.writeText(l.id),M.update(C=>(C.set(l.id,"Copied!"),C)),setTimeout(()=>{M.update(C=>(C.delete(l.id),C))},1e3)},async function(){var T;if(!((T=l.conversation)!=null&&T.id)||a!==void 0)return;const C=r==null?void 0:r.conversations[l.conversation.id];n(5,a=C!=null&&C.lastUrl?"copied":"retrieving");try{if(r){const E=await r.getConversationUrl(l.conversation.id);navigator.clipboard.writeText(E),n(5,a="copied")}}catch(E){console.error("Failed to get conversation URL: ",E),n(6,_=E instanceof Error?E.message:"Unknown error"),n(5,a="failure")}finally{setTimeout(()=>{n(5,a=void 0)},1200)}},f,()=>s.pauseRemoteAgentWorkspace(l.id),()=>s.resumeRemoteAgentWorkspace(l.id),function(C){c=C,n(4,c)}]}class im extends ue{constructor(e){super(),de(this,e,rx,ox,ce,{thread:0,type:1,afterDelete:16,enableShareService:2,onRename:3})}}function mu(i,{delay:e=0,duration:n=400,easing:t=f1,axis:o="y",scale:r=0}={}){const s=getComputedStyle(i),c=+s.opacity,a=o==="y"?"height":"width",l=parseFloat(s[a]),u=o==="y"?"scaleY":"scaleX",f=o==="y"?["top","bottom"]:["left","right"],m=f.map(R=>`${R[0].toUpperCase()}${R.slice(1)}`),p=parseFloat(s[`padding${m[0]}`]||"0"),_=parseFloat(s[`padding${m[1]}`]||"0"),M=parseFloat(s[`margin${m[0]}`]||"0"),C=parseFloat(s[`margin${m[1]}`]||"0"),T=parseFloat(s[`border${m[0]}Width`]||"0"),E=parseFloat(s[`border${m[1]}Width`]||"0");return{delay:e,duration:n,easing:t,css:R=>{const N=r+(1-r)*R;return`overflow: hidden;opacity: ${R*c};${a}: ${R*l}px;padding-${f[0]}: ${R*p}px;padding-${f[1]}: ${R*_}px;margin-${f[0]}: ${R*M}px;margin-${f[1]}: ${R*C}px;border-${f[0]}-width: ${R*T}px;border-${f[1]}-width: ${R*E}px;transform: ${u}(${N});transform-origin: center;`}}}function pu(i,e,n){const t=i.slice();return t[35]=e[n],t[37]=n,t}function us(i){const e=i.slice(),n=e[8]?e[8](e[0].agent):{name:"Unknown",fullPath:"Unknown"};return e[38]=n,e}function ix(i){let e,n,t,o;var r=i[16].icon;return r&&(n=ln(r,{})),{c(){e=L("div"),n&&v(n.$$.fragment),A(e,"class",t="thread-type-icon thread-type-icon--"+i[16].type+" svelte-tvrz8f")},m(s,c){x(s,e,c),n&&w(n,e,null),o=!0},p(s,c){if(65536&c[0]&&r!==(r=s[16].icon)){if(n){j();const a=n;$(a.$$.fragment,1,0,()=>{y(a,1)}),q()}r?(n=ln(r,{}),v(n.$$.fragment),d(n.$$.fragment,1),w(n,e,null)):n=null}(!o||65536&c[0]&&t!==(t="thread-type-icon thread-type-icon--"+s[16].type+" svelte-tvrz8f"))&&A(e,"class",t)},i(s){o||(n&&d(n.$$.fragment,s),o=!0)},o(s){n&&$(n.$$.fragment,s),o=!1},d(s){s&&b(e),n&&y(n)}}}function sx(i){let e,n;return e=new A5({props:{hasUpdates:i[0].type==="remoteAgent"&&i[0].has_updates}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p(t,o){const r={};1&o[0]&&(r.hasUpdates=t[0].type==="remoteAgent"&&t[0].has_updates),e.$set(r)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function gu(i){let e,n,t;return n=new Ne({props:{nested:!1,hasPointerEvents:!1,content:i[0].isPinned?"Unpin thread":"Pin thread",triggerOn:[Je.Hover],$$slots:{default:[ax]},$$scope:{ctx:i}}}),{c(){e=L("div"),v(n.$$.fragment),A(e,"class","pin-icon svelte-tvrz8f"),ke(e,"is-pinned",i[0].isPinned)},m(o,r){x(o,e,r),w(n,e,null),t=!0},p(o,r){const s={};1&r[0]&&(s.content=o[0].isPinned?"Unpin thread":"Pin thread"),65&r[0]|256&r[1]&&(s.$$scope={dirty:r,ctx:o}),n.$set(s),(!t||1&r[0])&&ke(e,"is-pinned",o[0].isPinned)},i(o){t||(d(n.$$.fragment,o),t=!0)},o(o){$(n.$$.fragment,o),t=!1},d(o){o&&b(e),y(n)}}}function ax(i){let e,n,t,o,r,s;return n=new Vf({}),{c(){e=L("button"),v(n.$$.fragment),A(e,"class","pin-icon__button svelte-tvrz8f"),A(e,"type","button"),A(e,"aria-label",t=i[0].isPinned?"Unpin thread":"Pin thread")},m(c,a){x(c,e,a),w(n,e,null),o=!0,r||(s=[Le(e,"click",i[26]),Le(e,"keydown",i[27])],r=!0)},p(c,a){(!o||1&a[0]&&t!==(t=c[0].isPinned?"Unpin thread":"Pin thread"))&&A(e,"aria-label",t)},i(c){o||(d(n.$$.fragment,c),o=!0)},o(c){$(n.$$.fragment,c),o=!1},d(c){c&&b(e),y(n),r=!1,Qt(s)}}}function hu(i){let e,n;return e=new Ne({props:{nested:!1,hasPointerEvents:!1,content:`Repository: ${i[38].fullPath}`,triggerOn:[Je.Hover],$$slots:{default:[cx]},$$scope:{ctx:i}}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p(t,o){const r={};257&o[0]&&(r.content=`Repository: ${t[38].fullPath}`),257&o[0]|256&o[1]&&(r.$$scope={dirty:o,ctx:t}),e.$set(r)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function cx(i){let e,n,t,o,r,s,c,a=i[38].name+"";return t=new rm({}),{c(){e=L("div"),n=L("div"),v(t.$$.fragment),o=B(),r=L("div"),s=G(a),A(n,"class","repo-pill-icon svelte-tvrz8f"),A(r,"class","repo-pill-text svelte-tvrz8f"),A(e,"class","repo-pill svelte-tvrz8f")},m(l,u){x(l,e,u),F(e,n),w(t,n,null),F(e,o),F(e,r),F(r,s),c=!0},p(l,u){(!c||257&u[0])&&a!==(a=l[38].name+"")&&_e(s,a)},i(l){c||(d(t.$$.fragment,l),c=!0)},o(l){$(t.$$.fragment,l),c=!1},d(l){l&&b(e),y(t)}}}function vu(i){let e,n;return e=new Ne({props:{nested:!1,hasPointerEvents:!1,triggerOn:[Je.Hover],content:"Setup Script Agent",$$slots:{default:[lx]},$$scope:{ctx:i}}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function lx(i){let e,n,t;return n=new Cf({}),{c(){e=L("div"),v(n.$$.fragment),A(e,"class","setup-script-badge svelte-tvrz8f")},m(o,r){x(o,e,r),w(n,e,null),t=!0},p:P,i(o){t||(d(n.$$.fragment,o),t=!0)},o(o){$(n.$$.fragment,o),t=!1},d(o){o&&b(e),y(n)}}}function wu(i){let e,n;return e=new Ne({props:{nested:!1,hasPointerEvents:!1,triggerOn:[Je.Hover],content:yr(i[0],"conversation.hasDraft")?"Draft message":"New thread",$$slots:{default:[dx]},$$scope:{ctx:i}}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p(t,o){const r={};1&o[0]&&(r.content=yr(t[0],"conversation.hasDraft")?"Draft message":"New thread"),1&o[0]|256&o[1]&&(r.$$scope={dirty:o,ctx:t}),e.$set(r)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function ux(i){let e,n=yr(i[0],"conversation.hasDraft")?"Draft":"New";return{c(){e=G(n)},m(t,o){x(t,e,o)},p(t,o){1&o[0]&&n!==(n=yr(t[0],"conversation.hasDraft")?"Draft":"New")&&_e(e,n)},d(t){t&&b(e)}}}function dx(i){let e,n,t;return n=new Ge({props:{size:1,$$slots:{default:[ux]},$$scope:{ctx:i}}}),{c(){e=L("div"),v(n.$$.fragment),A(e,"class","draft-badge svelte-tvrz8f")},m(o,r){x(o,e,r),w(n,e,null),t=!0},p(o,r){const s={};1&r[0]|256&r[1]&&(s.$$scope={dirty:r,ctx:o}),n.$set(s)},i(o){t||(d(n.$$.fragment,o),t=!0)},o(o){$(n.$$.fragment,o),t=!1},d(o){o&&b(e),y(n)}}}function $x(i){let e,n;return e=new Ge({props:{size:1,truncate:!0,weight:i[0].type==="remoteAgent"&&i[0].has_updates?"medium":"regular",$$slots:{default:[gx]},$$scope:{ctx:i}}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p(t,o){const r={};1&o[0]&&(r.weight=t[0].type==="remoteAgent"&&t[0].has_updates?"medium":"regular"),1&o[0]|256&o[1]&&(r.$$scope={dirty:o,ctx:t}),e.$set(r)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function fx(i){let e,n,t,o,r;function s(l){i[28](l)}function c(l){i[29](l)}let a={size:1,variant:"surface",class:"edit-title-input"};return i[14]!==void 0&&(a.textInput=i[14]),i[13]!==void 0&&(a.value=i[13]),n=new nr({props:a}),et.push(()=>Et(n,"textInput",s)),et.push(()=>Et(n,"value",c)),n.$on("keydown",i[19]),n.$on("blur",i[30]),{c(){e=L("div"),v(n.$$.fragment),A(e,"class","edit-title-container svelte-tvrz8f")},m(l,u){x(l,e,u),w(n,e,null),r=!0},p(l,u){const f={};!t&&16384&u[0]&&(t=!0,f.textInput=l[14],Rt(()=>t=!1)),!o&&8192&u[0]&&(o=!0,f.value=l[13],Rt(()=>o=!1)),n.$set(f)},i(l){r||(d(n.$$.fragment,l),r=!0)},o(l){$(n.$$.fragment,l),r=!1},d(l){l&&b(e),y(n)}}}function mx(i){let e,n;return e=new Ge({props:{size:1,truncate:!0,class:"draft-title",$$slots:{default:[hx]},$$scope:{ctx:i}}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p(t,o){const r={};1&o[0]|256&o[1]&&(r.$$scope={dirty:o,ctx:t}),e.$set(r)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function px(i){let e,n;return e=new Ge({props:{size:1,truncate:!0,class:"setup-script-title",$$slots:{default:[vx]},$$scope:{ctx:i}}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p(t,o){const r={};256&o[1]&&(r.$$scope={dirty:o,ctx:t}),e.$set(r)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function gx(i){let e,n=(i[0].title||i[22](i[0])||`New ${i[21][i[0].type]}`)+"";return{c(){e=G(n)},m(t,o){x(t,e,o)},p(t,o){1&o[0]&&n!==(n=(t[0].title||t[22](t[0])||`New ${t[21][t[0].type]}`)+"")&&_e(e,n)},d(t){t&&b(e)}}}function hx(i){var t,o;let e,n=(i[0].title||((o=(t=i[0].conversation)==null?void 0:t.draftExchange)==null?void 0:o.request_message)||"New Thread")+"";return{c(){e=G(n)},m(r,s){x(r,e,s)},p(r,s){var c,a;1&s[0]&&n!==(n=(r[0].title||((a=(c=r[0].conversation)==null?void 0:c.draftExchange)==null?void 0:a.request_message)||"New Thread")+"")&&_e(e,n)},d(r){r&&b(e)}}}function vx(i){let e;return{c(){e=G("Generate a setup script")},m(n,t){x(n,e,t)},d(n){n&&b(e)}}}function wx(i){let e,n,t,o,r,s,c=i[0].type==="remoteAgent"&&i[0].is_setup_script_agent&&vu(i),a=i[10]&&wu(i);const l=[px,mx,fx,$x],u=[];function f(m,p){return m[0].type==="remoteAgent"&&m[0].is_setup_script_agent?0:m[10]?1:m[12]?2:3}return o=f(i),r=u[o]=l[o](i),{c(){e=L("div"),c&&c.c(),n=B(),a&&a.c(),t=B(),r.c(),A(e,"class","agent-title-content svelte-tvrz8f")},m(m,p){x(m,e,p),c&&c.m(e,null),F(e,n),a&&a.m(e,null),F(e,t),u[o].m(e,null),s=!0},p(m,p){m[0].type==="remoteAgent"&&m[0].is_setup_script_agent?c?1&p[0]&&d(c,1):(c=vu(m),c.c(),d(c,1),c.m(e,n)):c&&(j(),$(c,1,1,()=>{c=null}),q()),m[10]?a?(a.p(m,p),1024&p[0]&&d(a,1)):(a=wu(m),a.c(),d(a,1),a.m(e,t)):a&&(j(),$(a,1,1,()=>{a=null}),q());let _=o;o=f(m),o===_?u[o].p(m,p):(j(),$(u[_],1,1,()=>{u[_]=null}),q(),r=u[o],r?r.p(m,p):(r=u[o]=l[o](m),r.c()),d(r,1),r.m(e,null))},i(m){s||(d(c),d(a),d(r),s=!0)},o(m){$(c),$(a),$(r),s=!1},d(m){m&&b(e),c&&c.d(),a&&a.d(),u[o].d()}}}function yu(i){let e,n,t,o,r;return n=new Ap({props:{workspaceStatus:i[0].workspace_status,status:i[0].status,isExpanded:i[2]>330,hasUpdates:i[0].has_updates}}),o=new Jf({props:{agentId:i[0].agent.remote_agent_id,status:i[0].status,workspaceStatus:i[0].workspace_status}}),{c(){e=L("div"),v(n.$$.fragment),t=B(),v(o.$$.fragment),A(e,"class","agent-status svelte-tvrz8f")},m(s,c){x(s,e,c),w(n,e,null),x(s,t,c),w(o,s,c),r=!0},p(s,c){const a={};1&c[0]&&(a.workspaceStatus=s[0].workspace_status),1&c[0]&&(a.status=s[0].status),4&c[0]&&(a.isExpanded=s[2]>330),1&c[0]&&(a.hasUpdates=s[0].has_updates),n.$set(a);const l={};1&c[0]&&(l.agentId=s[0].agent.remote_agent_id),1&c[0]&&(l.status=s[0].status),1&c[0]&&(l.workspaceStatus=s[0].workspace_status),o.$set(l)},i(s){r||(d(n.$$.fragment,s),d(o.$$.fragment,s),r=!0)},o(s){$(n.$$.fragment,s),$(o.$$.fragment,s),r=!1},d(s){s&&(b(e),b(t)),y(n),y(o,s)}}}function bu(i){let e,n,t=JSON.stringify(i[17].slice(-9)),o=_u(i);return{c(){o.c(),e=me()},m(r,s){o.m(r,s),x(r,e,s),n=!0},p(r,s){131072&s[0]&&ce(t,t=JSON.stringify(r[17].slice(-9)))?(j(),$(o,1,1,P),q(),o=_u(r),o.c(),d(o,1),o.m(e.parentNode,e)):o.p(r,s)},i(r){n||(d(o),n=!0)},o(r){$(o),n=!1},d(r){r&&b(e),o.d(r)}}}function yx(i){let e,n;return{c(){e=L("div"),e.textContent="|",n=B(),A(e,"class","agent-chat-history__item svelte-tvrz8f")},m(t,o){x(t,e,o),x(t,n,o)},p:P,d(t){t&&(b(e),b(n))}}}function xu(i,e){let n,t,o;return t=new Ne({props:{delayDurationMs:0,content:Di(e[35]||"",170),side:"bottom",nested:!1,hasPointerEvents:!1,triggerOn:[Je.Hover],$$slots:{default:[yx]},$$scope:{ctx:e}}}),{key:i,first:null,c(){n=me(),v(t.$$.fragment),this.first=n},m(r,s){x(r,n,s),w(t,r,s),o=!0},p(r,s){e=r;const c={};131072&s[0]&&(c.content=Di(e[35]||"",170)),256&s[1]&&(c.$$scope={dirty:s,ctx:e}),t.$set(c)},i(r){o||(d(t.$$.fragment,r),o=!0)},o(r){$(t.$$.fragment,r),o=!1},d(r){r&&b(n),y(t,r)}}}function _u(i){let e,n,t=[],o=new Map,r=at(i[17].slice(-9));const s=c=>c[35]+"-"+c[37];for(let c=0;c<r.length;c+=1){let a=pu(i,r,c),l=s(a);o.set(l,t[c]=xu(l,a))}return{c(){e=L("div");for(let c=0;c<t.length;c+=1)t[c].c();A(e,"class","agent-chat-history svelte-tvrz8f")},m(c,a){x(c,e,a);for(let l=0;l<t.length;l+=1)t[l]&&t[l].m(e,null);n=!0},p(c,a){131072&a[0]&&(r=at(c[17].slice(-9)),j(),t=qr(t,a,s,1,c,r,o,e,Bi,xu,null,pu),q())},i(c){if(!n){for(let a=0;a<r.length;a+=1)d(t[a]);n=!0}},o(c){for(let a=0;a<t.length;a+=1)$(t[a]);n=!1},d(c){c&&b(e);for(let a=0;a<t.length;a+=1)t[a].d()}}}function Cu(i){let e,n,t;return n=new im({props:{thread:i[0],type:i[15],afterDelete:i[4],enableShareService:i[9],onRename:i[20]}}),{c(){e=L("div"),v(n.$$.fragment),A(e,"class","agent-actions svelte-tvrz8f")},m(o,r){x(o,e,r),w(n,e,null),t=!0},p(o,r){const s={};1&r[0]&&(s.thread=o[0]),32768&r[0]&&(s.type=o[15]),16&r[0]&&(s.afterDelete=o[4]),512&r[0]&&(s.enableShareService=o[9]),n.$set(s)},i(o){t||(d(n.$$.fragment,o),t=!0)},o(o){$(n.$$.fragment,o),t=!1},d(o){o&&b(e),y(n)}}}function Au(i){let e,n,t,o,r,s,c,a,l,u,f,m,p,_,M,C=i[0].type==="remoteAgent"&&i[0].agent&&i[7]&&i[7](i[0].agent);const T=[sx,ix],E=[];function R(H,Y){return H[15]==="remoteAgent"?0:1}r=R(i),s=E[r]=T[r](i);let N=!i[10]&&i[3]&&i[0].isPinned&&gu(i),J=C&&hu(us(i));f=new Ne({props:{nested:!1,hasPointerEvents:!1,content:Di(i[0].title,200),triggerOn:[Je.Hover],delayDurationMs:1e3,$$slots:{default:[wx]},$$scope:{ctx:i}}});let Q=i[0].type==="remoteAgent"&&i[0].status&&yu(i),X=i[17].length>0&&bu(i),K=i[0].id!==er&&Cu(i);return{c(){e=L("div"),n=L("div"),t=L("div"),o=L("div"),s.c(),c=B(),N&&N.c(),a=B(),J&&J.c(),l=B(),u=L("div"),v(f.$$.fragment),m=B(),Q&&Q.c(),p=B(),X&&X.c(),_=B(),K&&K.c(),A(o,"class","agent-icon svelte-tvrz8f"),A(u,"class","agent-title svelte-tvrz8f"),A(t,"class","agent-details--left svelte-tvrz8f"),A(n,"class","agent-details svelte-tvrz8f"),A(e,"class","agent-content svelte-tvrz8f")},m(H,Y){x(H,e,Y),F(e,n),F(n,t),F(t,o),E[r].m(o,null),F(t,c),N&&N.m(t,null),F(t,a),J&&J.m(t,null),F(t,l),F(t,u),w(f,u,null),F(n,m),Q&&Q.m(n,null),F(e,p),X&&X.m(e,null),F(e,_),K&&K.m(e,null),M=!0},p(H,Y){let V=r;r=R(H),r===V?E[r].p(H,Y):(j(),$(E[V],1,1,()=>{E[V]=null}),q(),s=E[r],s?s.p(H,Y):(s=E[r]=T[r](H),s.c()),d(s,1),s.m(o,null)),!H[10]&&H[3]&&H[0].isPinned?N?(N.p(H,Y),1033&Y[0]&&d(N,1)):(N=gu(H),N.c(),d(N,1),N.m(t,a)):N&&(j(),$(N,1,1,()=>{N=null}),q()),129&Y[0]&&(C=H[0].type==="remoteAgent"&&H[0].agent&&H[7]&&H[7](H[0].agent)),C?J?(J.p(us(H),Y),129&Y[0]&&d(J,1)):(J=hu(us(H)),J.c(),d(J,1),J.m(t,l)):J&&(j(),$(J,1,1,()=>{J=null}),q());const Z={};1&Y[0]&&(Z.content=Di(H[0].title,200)),29697&Y[0]|256&Y[1]&&(Z.$$scope={dirty:Y,ctx:H}),f.$set(Z),H[0].type==="remoteAgent"&&H[0].status?Q?(Q.p(H,Y),1&Y[0]&&d(Q,1)):(Q=yu(H),Q.c(),d(Q,1),Q.m(n,null)):Q&&(j(),$(Q,1,1,()=>{Q=null}),q()),H[17].length>0?X?(X.p(H,Y),131072&Y[0]&&d(X,1)):(X=bu(H),X.c(),d(X,1),X.m(e,_)):X&&(j(),$(X,1,1,()=>{X=null}),q()),H[0].id!==er?K?(K.p(H,Y),1&Y[0]&&d(K,1)):(K=Cu(H),K.c(),d(K,1),K.m(e,null)):K&&(j(),$(K,1,1,()=>{K=null}),q())},i(H){M||(d(s),d(N),d(J),d(f.$$.fragment,H),d(Q),d(X),d(K),M=!0)},o(H){$(s),$(N),$(J),$(f.$$.fragment,H),$(Q),$(X),$(K),M=!1},d(H){H&&b(e),E[r].d(),N&&N.d(),J&&J.d(),y(f),Q&&Q.d(),X&&X.d(),K&&K.d()}}}function bx(i){let e,n,t,o,r,s,c=`${i[0].title}--${i[0].isPinned}`,a=Au(i);return{c(){e=L("div"),a.c(),A(e,"class",n="agent-row agent-row--"+i[0].type+" svelte-tvrz8f"),A(e,"role","button"),A(e,"tabindex","0"),A(e,"data-testid",xx),ke(e,"agent-row--active",i[1]),ke(e,"agent-row--new",i[10]),ke(e,"agent-row--setup-script",i[0].type==="remoteAgent"&&i[0].is_setup_script_agent)},m(l,u){x(l,e,u),a.m(e,null),o=!0,r||(s=[Le(e,"click",function(){Nt(i[5])&&i[5].apply(this,arguments)}),Le(e,"keydown",i[31])],r=!0)},p(l,u){i=l,1&u[0]&&ce(c,c=`${i[0].title}--${i[0].isPinned}`)?(j(),$(a,1,1,P),q(),a=Au(i),a.c(),d(a,1),a.m(e,null)):a.p(i,u),(!o||1&u[0]&&n!==(n="agent-row agent-row--"+i[0].type+" svelte-tvrz8f"))&&A(e,"class",n),(!o||3&u[0])&&ke(e,"agent-row--active",i[1]),(!o||1025&u[0])&&ke(e,"agent-row--new",i[10]),(!o||1&u[0])&&ke(e,"agent-row--setup-script",i[0].type==="remoteAgent"&&i[0].is_setup_script_agent)},i(l){o||(d(a),Pn(()=>{o&&(t||(t=xn(e,mu,{duration:150},!0)),t.run(1))}),o=!0)},o(l){$(a),t||(t=xn(e,mu,{duration:150},!1)),t.run(0),o=!1},d(l){l&&b(e),a.d(l),l&&t&&t.end(),r=!1,Qt(s)}}}const xx="thread-list-item";function yr(i,e){return e.split(".").reduce((n,t)=>n&&n[t]!==void 0?n[t]:void 0,i)}function Di(i="",e){return i.length<=e?i:i.slice(0,e-3)+"..."}function _x(i,e,n){let t,o,r,s,c,a,l,u,f=P;i.$$.on_destroy.push(()=>f());let m,{thread:p}=e,{isSelected:_=!1}=e,{containerWidth:M=0}=e,{isExpanded:C=!1}=e,{afterDelete:T}=e,{onSelect:E}=e,{onTogglePinned:R}=e,{isFromDifferentRepo:N=()=>!1}=e,{getRepoInfo:J=()=>({name:"Unknown",fullPath:"Unknown"})}=e,{enableShareService:Q=!1}=e,X=Se("chatModel"),K=Se(Tn.key),H=!1,Y=p.title;async function V(Z){if(Z.trim()&&Z!==p.title)if(p.type==="remoteAgent")try{K&&await K.updateRemoteAgentTitle(p.id,Z)}catch(re){console.error("Failed to update remote agent title:",re)}else["chat","localAgent"].includes(p.type)&&X&&(X.renameConversation(p.id,Z),n(0,p.title=Z,p));n(12,H=!1)}return ro(()=>{const Z=re=>{H&&m&&!m.contains(re.target)&&V(Y)};return document.addEventListener("click",Z),()=>{document.removeEventListener("click",Z)}}),i.$$set=Z=>{"thread"in Z&&n(0,p=Z.thread),"isSelected"in Z&&n(1,_=Z.isSelected),"containerWidth"in Z&&n(2,M=Z.containerWidth),"isExpanded"in Z&&n(3,C=Z.isExpanded),"afterDelete"in Z&&n(4,T=Z.afterDelete),"onSelect"in Z&&n(5,E=Z.onSelect),"onTogglePinned"in Z&&n(6,R=Z.onTogglePinned),"isFromDifferentRepo"in Z&&n(7,N=Z.isFromDifferentRepo),"getRepoInfo"in Z&&n(8,J=Z.getRepoInfo),"enableShareService"in Z&&n(9,Q=Z.enableShareService)},i.$$.update=()=>{1&i.$$.dirty[0]&&n(17,t=(yr(p,"conversation.chatHistory")||[]).map(Z=>Z.request_message).filter(Boolean)),1&i.$$.dirty[0]&&n(10,o=p.isNew),1&i.$$.dirty[0]&&n(24,r=p.type==="localAgent"),1&i.$$.dirty[0]&&n(23,s=p.type==="remoteAgent"),58722304&i.$$.dirty[0]&&n(16,a=Hi({isConversationAgentic:r,agentExecutionMode:c?u:void 0,isBackgroundAgent:s})),1025&i.$$.dirty[0]&&n(15,l=p.type||(o&&yr(p,"conversation.extraData.isRemoteAgentConversation")?"remoteAgent":"chat"))},n(11,c=X==null?void 0:X.agentExecutionMode),f(),f=lt(c,Z=>n(25,u=Z)),[p,_,M,C,T,E,R,N,J,Q,o,c,H,Y,m,l,a,t,V,function(Z){Z.key==="Enter"?(Z.preventDefault(),V(Y)):Z.key==="Escape"&&(Z.preventDefault(),n(13,Y=p.title),n(12,H=!1))},function(){n(12,H=!0),n(13,Y=p.title),setTimeout(()=>m==null?void 0:m.focus(),0)},{chat:"Chat",localAgent:"Local Agent",remoteAgent:"Remote Agent"},Z=>{var le;const re=(((le=Z==null?void 0:Z.conversation)==null?void 0:le.chatHistory)||[]).find(oe=>oe.request_message);return re&&re.request_message||""},s,r,u,Z=>{Z.stopPropagation(),R(Z)},Z=>{Z.key!=="Enter"&&Z.key!==" "||(Z.stopPropagation(),R(Z))},function(Z){m=Z,n(14,m)},function(Z){Y=Z,n(13,Y)},()=>V(Y),Z=>{Z.key==="Enter"&&E()}]}class sm extends ue{constructor(e){super(),de(this,e,_x,bx,ce,{thread:0,isSelected:1,containerWidth:2,isExpanded:3,afterDelete:4,onSelect:5,onTogglePinned:6,isFromDifferentRepo:7,getRepoInfo:8,enableShareService:9},null,[-1,-1])}}function Mu(i,e,n){const t=i.slice();return t[7]=e[n],t}function Cx(i){var t;let e,n=i[3]!=="all"?`${((t=i[0].find(i[4]))==null?void 0:t.label)||""}`:"All";return{c(){e=G(n)},m(o,r){x(o,e,r)},p(o,r){var s;9&r&&n!==(n=o[3]!=="all"?`${((s=o[0].find(o[4]))==null?void 0:s.label)||""}`:"All")&&_e(e,n)},d(o){o&&b(e)}}}function Ax(i){let e,n,t,o,r,s;return n=new Ge({props:{size:1,$$slots:{default:[Cx]},$$scope:{ctx:i}}}),r=new Oo({}),{c(){e=L("div"),v(n.$$.fragment),t=B(),o=L("div"),v(r.$$.fragment),A(o,"class","dropdown-indicator svelte-errogv"),A(e,"class","c-thread-type-filter-dropdown__trigger svelte-errogv")},m(c,a){x(c,e,a),w(n,e,null),F(e,t),F(e,o),w(r,o,null),s=!0},p(c,a){const l={};1033&a&&(l.$$scope={dirty:a,ctx:c}),n.$set(l)},i(c){s||(d(n.$$.fragment,c),d(r.$$.fragment,c),s=!0)},o(c){$(n.$$.fragment,c),$(r.$$.fragment,c),s=!1},d(c){c&&b(e),y(n),y(r)}}}function Mx(i){let e,n=i[7].label+"";return{c(){e=G(n)},m(t,o){x(t,e,o)},p(t,o){1&o&&n!==(n=t[7].label+"")&&_e(e,n)},d(t){t&&b(e)}}}function kx(i){let e,n,t,o,r,s,c,a,l=i[7].count+"";return t=new Ge({props:{size:2,$$slots:{default:[Mx]},$$scope:{ctx:i}}}),{c(){e=L("div"),n=L("span"),v(t.$$.fragment),o=B(),r=L("span"),s=G(l),c=B(),A(n,"class","filter-label svelte-errogv"),A(r,"class","filter-count svelte-errogv"),A(e,"class","filter-item svelte-errogv")},m(u,f){x(u,e,f),F(e,n),w(t,n,null),F(e,o),F(e,r),F(r,s),x(u,c,f),a=!0},p(u,f){const m={};1025&f&&(m.$$scope={dirty:f,ctx:u}),t.$set(m),(!a||1&f)&&l!==(l=u[7].count+"")&&_e(s,l)},i(u){a||(d(t.$$.fragment,u),a=!0)},o(u){$(t.$$.fragment,u),a=!1},d(u){u&&(b(e),b(c)),y(t)}}}function ku(i){let e,n;function t(){return i[5](i[7])}return e=new we.Item({props:{highlight:i[3]===i[7].value,onSelect:t,$$slots:{default:[kx]},$$scope:{ctx:i}}}),{c(){v(e.$$.fragment)},m(o,r){w(e,o,r),n=!0},p(o,r){i=o;const s={};9&r&&(s.highlight=i[3]===i[7].value),7&r&&(s.onSelect=t),1025&r&&(s.$$scope={dirty:r,ctx:i}),e.$set(s)},i(o){n||(d(e.$$.fragment,o),n=!0)},o(o){$(e.$$.fragment,o),n=!1},d(o){y(e,o)}}}function Sx(i){let e,n,t=at(i[0]),o=[];for(let s=0;s<t.length;s+=1)o[s]=ku(Mu(i,t,s));const r=s=>$(o[s],1,1,()=>{o[s]=null});return{c(){e=L("div");for(let s=0;s<o.length;s+=1)o[s].c();A(e,"class","filters-list svelte-errogv")},m(s,c){x(s,e,c);for(let a=0;a<o.length;a+=1)o[a]&&o[a].m(e,null);n=!0},p(s,c){if(15&c){let a;for(t=at(s[0]),a=0;a<t.length;a+=1){const l=Mu(s,t,a);o[a]?(o[a].p(l,c),d(o[a],1)):(o[a]=ku(l),o[a].c(),d(o[a],1),o[a].m(e,null))}for(j(),a=t.length;a<o.length;a+=1)r(a);q()}},i(s){if(!n){for(let c=0;c<t.length;c+=1)d(o[c]);n=!0}},o(s){o=o.filter(Boolean);for(let c=0;c<o.length;c+=1)$(o[c]);n=!1},d(s){s&&b(e),pn(o,s)}}}function Tx(i){let e,n,t,o;return e=new we.Trigger({props:{$$slots:{default:[Ax]},$$scope:{ctx:i}}}),t=new we.Content({props:{side:"bottom",align:"start",size:1,$$slots:{default:[Sx]},$$scope:{ctx:i}}}),{c(){v(e.$$.fragment),n=B(),v(t.$$.fragment)},m(r,s){w(e,r,s),x(r,n,s),w(t,r,s),o=!0},p(r,s){const c={};1033&s&&(c.$$scope={dirty:s,ctx:r}),e.$set(c);const a={};1039&s&&(a.$$scope={dirty:s,ctx:r}),t.$set(a)},i(r){o||(d(e.$$.fragment,r),d(t.$$.fragment,r),o=!0)},o(r){$(e.$$.fragment,r),$(t.$$.fragment,r),o=!1},d(r){r&&b(n),y(e,r),y(t,r)}}}function Ex(i){let e,n,t,o;function r(c){i[6](c)}let s={$$slots:{default:[Tx]},$$scope:{ctx:i}};return i[2]!==void 0&&(s.requestClose=i[2]),n=new we.Root({props:s}),et.push(()=>Et(n,"requestClose",r)),{c(){e=L("div"),v(n.$$.fragment),A(e,"class","c-thread-type-filter-dropdown")},m(c,a){x(c,e,a),w(n,e,null),o=!0},p(c,[a]){const l={};1039&a&&(l.$$scope={dirty:a,ctx:c}),!t&&4&a&&(t=!0,l.requestClose=c[2],Rt(()=>t=!1)),n.$set(l)},i(c){o||(d(n.$$.fragment,c),o=!0)},o(c){$(n.$$.fragment,c),o=!1},d(c){c&&b(e),y(n)}}}function Ix(i,e,n){let t,o=P,r=()=>(o(),o=lt(a,l=>n(3,t=l)),a);i.$$.on_destroy.push(()=>o());let s,{threadTypeFilters:c=[]}=e,{activeThreadTypeFilter:a=Tt("all")}=e;return r(),i.$$set=l=>{"threadTypeFilters"in l&&n(0,c=l.threadTypeFilters),"activeThreadTypeFilter"in l&&r(n(1,a=l.activeThreadTypeFilter))},[c,a,s,t,l=>l.value===t,l=>{a.set(l.value),s()},function(l){s=l,n(2,s)}]}class Lx extends ue{constructor(e){super(),de(this,e,Ix,Ex,ce,{threadTypeFilters:0,activeThreadTypeFilter:1})}}function Su(i){return{isDragging:!1,startY:0,startHeight:0,currentHeight:i,hasUserResized:!1,hasDraggedThisClick:!1}}function Ni(i,e){const n=Math.floor(i-300);return Math.max(Math.min(e,n),0)}function Tu(i,e,n){return n?(i.preventDefault(),{...e,isDragging:!0,hasDraggedThisClick:!1,startY:i.clientY,startHeight:e.currentHeight}):e}function Eu(i,e,n,t){if(!t||!e.isDragging)return e;const o=i.clientY-e.startY,r=e.startHeight+o,s=Ni(n.windowHeight,n.maxContentHeight),c=Math.max(n.minHeight,Math.min(s,r));return{...e,hasDraggedThisClick:!0,currentHeight:c}}function Iu(i){const e=i.isDragging;return{...i,isDragging:!1,hasUserResized:i.hasUserResized||e}}function Lu(i){return{...i,hasDraggedThisClick:!1}}function Ru(i,e){const n=Ni(e.windowHeight,e.maxContentHeight);if(i.currentHeight>n){const t=Math.max(e.minHeight,Math.min(n,i.currentHeight));return{...i,currentHeight:t}}return i}function Du(i,e,n){const t=i.slice();return t[122]=e[n],t[124]=n,t}function Nu(i,e,n){const t=i.slice();return t[125]=e[n],t[127]=n,t}function Pu(i,e,n){const t=i.slice();return t[128]=e[n],t}function Fu(i,e,n){const t=i.slice();return t[125]=e[n],t[127]=n,t}function Rx(i){let e;return{c(){e=G("Threads")},m(n,t){x(n,e,t)},d(n){n&&b(e)}}}function Ou(i){let e,n,t,o;return n=new Lx({props:{threadTypeFilters:i[29],activeThreadTypeFilter:i[43]}}),{c(){e=L("div"),v(n.$$.fragment),A(e,"class","svelte-1lid8lb")},m(r,s){x(r,e,s),w(n,e,null),o=!0},p(r,s){const c={};536870912&s[0]&&(c.threadTypeFilters=r[29]),n.$set(c)},i(r){o||(d(n.$$.fragment,r),r&&Pn(()=>{o&&(t||(t=xn(e,po,{axis:"x",duration:150},!0)),t.run(1))}),o=!0)},o(r){$(n.$$.fragment,r),r&&(t||(t=xn(e,po,{axis:"x",duration:150},!1)),t.run(0)),o=!1},d(r){r&&b(e),y(n),r&&t&&t.end()}}}function zu(i){let e,n,t,o,r,s,c=i[11]&&Bu(i);return o=new Ne({props:{content:"Search threads",nested:!1,hasPointerEvents:!1,$$slots:{default:[Ox]},$$scope:{ctx:i}}}),{c(){e=L("div"),c&&c.c(),n=B(),t=L("div"),v(o.$$.fragment),A(t,"class","search-icon svelte-1lid8lb"),ke(t,"is-active",i[11]),A(e,"class","search-container action-button svelte-1lid8lb"),ke(e,"is-active",i[11])},m(a,l){x(a,e,l),c&&c.m(e,null),F(e,n),F(e,t),w(o,t,null),s=!0},p(a,l){a[11]?c?(c.p(a,l),2048&l[0]&&d(c,1)):(c=Bu(a),c.c(),d(c,1),c.m(e,n)):c&&(j(),$(c,1,1,()=>{c=null}),q());const u={};1&l[0]|256&l[4]&&(u.$$scope={dirty:l,ctx:a}),o.$set(u),(!s||2048&l[0])&&ke(t,"is-active",a[11]),(!s||2048&l[0])&&ke(e,"is-active",a[11])},i(a){s||(d(c),d(o.$$.fragment,a),a&&Pn(()=>{s&&(r||(r=xn(e,dr,{y:-2,duration:150},!0)),r.run(1))}),s=!0)},o(a){$(c),$(o.$$.fragment,a),a&&(r||(r=xn(e,dr,{y:-2,duration:150},!1)),r.run(0)),s=!1},d(a){a&&b(e),c&&c.d(),y(o),a&&r&&r.end()}}}function Bu(i){var m,p;let e,n,t,o,r,s,c;function a(_){i[92](_)}function l(_){i[93](_)}let u={placeholder:`Search ${i[9]==="all"?"threads":(p=(m=i[29].find(i[91]))==null?void 0:m.label)==null?void 0:p.toLowerCase()}`,size:1,variant:"surface",class:"search-input",$$slots:{iconLeft:[Dx]},$$scope:{ctx:i}};i[0]!==void 0&&(u.value=i[0]),i[10]!==void 0&&(u.textInput=i[10]),n=new nr({props:u}),et.push(()=>Et(n,"value",a)),et.push(()=>Et(n,"textInput",l)),n.$on("keydown",i[94]),n.$on("focus",i[95]),n.$on("blur",i[96]);let f=i[0]&&Uu(i);return{c(){e=L("div"),v(n.$$.fragment),r=B(),f&&f.c(),A(e,"class","search-field-container svelte-1lid8lb")},m(_,M){x(_,e,M),w(n,e,null),F(e,r),f&&f.m(e,null),c=!0},p(_,M){var T,E;const C={};536871424&M[0]&&(C.placeholder=`Search ${_[9]==="all"?"threads":(E=(T=_[29].find(_[91]))==null?void 0:T.label)==null?void 0:E.toLowerCase()}`),256&M[4]&&(C.$$scope={dirty:M,ctx:_}),!t&&1&M[0]&&(t=!0,C.value=_[0],Rt(()=>t=!1)),!o&&1024&M[0]&&(o=!0,C.textInput=_[10],Rt(()=>o=!1)),n.$set(C),_[0]?f?(f.p(_,M),1&M[0]&&d(f,1)):(f=Uu(_),f.c(),d(f,1),f.m(e,null)):f&&(j(),$(f,1,1,()=>{f=null}),q())},i(_){c||(d(n.$$.fragment,_),d(f),_&&Pn(()=>{c&&(s||(s=xn(e,po,{axis:"x",duration:150},!0)),s.run(1))}),c=!0)},o(_){$(n.$$.fragment,_),$(f),_&&(s||(s=xn(e,po,{axis:"x",duration:150},!1)),s.run(0)),c=!1},d(_){_&&b(e),y(n),f&&f.d(),_&&s&&s.end()}}}function Dx(i){let e,n,t;return n=new hf({}),{c(){e=L("div"),v(n.$$.fragment),A(e,"class","search-field-container__icon svelte-1lid8lb"),A(e,"slot","iconLeft")},m(o,r){x(o,e,r),w(n,e,null),t=!0},p:P,i(o){t||(d(n.$$.fragment,o),t=!0)},o(o){$(n.$$.fragment,o),t=!1},d(o){o&&b(e),y(n)}}}function Uu(i){let e,n,t;return n=new Ne({props:{content:"Clear search",nested:!1,$$slots:{default:[Px]},$$scope:{ctx:i}}}),{c(){e=L("div"),v(n.$$.fragment),A(e,"class","clear-search-button svelte-1lid8lb")},m(o,r){x(o,e,r),w(n,e,null),t=!0},p(o,r){const s={};256&r[4]&&(s.$$scope={dirty:r,ctx:o}),n.$set(s)},i(o){t||(d(n.$$.fragment,o),t=!0)},o(o){$(n.$$.fragment,o),t=!1},d(o){o&&b(e),y(n)}}}function Nx(i){let e,n;return e=new rr({}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function Px(i){let e,n;return e=new dt({props:{variant:"ghost",color:"neutral",size:1,$$slots:{default:[Nx]},$$scope:{ctx:i}}}),e.$on("click",i[39]),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p(t,o){const r={};256&o[4]&&(r.$$scope={dirty:o,ctx:t}),e.$set(r)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function Fx(i){let e,n;return e=new hf({}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function Ox(i){let e,n;return e=new dt({props:{variant:"ghost",color:i[0].trim()!==""?"accent":"neutral",size:1,$$slots:{default:[Fx]},$$scope:{ctx:i}}}),e.$on("click",i[38]),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p(t,o){const r={};1&o[0]&&(r.color=t[0].trim()!==""?"accent":"neutral"),256&o[4]&&(r.$$scope={dirty:o,ctx:t}),e.$set(r)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function Hu(i){let e,n,t;return n=new Ne({props:{content:"Failed to reload remote agents. Click to retry. "+i[6],nested:!1,triggerOn:[Je.Hover],hasPointerEvents:!1,$$slots:{default:[Bx]},$$scope:{ctx:i}}}),{c(){e=L("div"),v(n.$$.fragment),A(e,"class","reload-button svelte-1lid8lb")},m(o,r){x(o,e,r),w(n,e,null),t=!0},p(o,r){const s={};64&r[0]&&(s.content="Failed to reload remote agents. Click to retry. "+o[6]),256&r[4]&&(s.$$scope={dirty:r,ctx:o}),n.$set(s)},i(o){t||(d(n.$$.fragment,o),t=!0)},o(o){$(n.$$.fragment,o),t=!1},d(o){o&&b(e),y(n)}}}function zx(i){let e,n;return e=new Np({}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function Bx(i){let e,n;return e=new dt({props:{variant:"ghost-block",color:"neutral",size:1,$$slots:{default:[zx]},$$scope:{ctx:i}}}),e.$on("click",i[98]),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p(t,o){const r={};256&o[4]&&(r.$$scope={dirty:o,ctx:t}),e.$set(r)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function ju(i){let e,n,t,o,r,s,c,a=[],l=new Map,u=at(i[24]);const f=m=>`${m[128].groupTitle}`;for(let m=0;m<u.length;m+=1){let p=Pu(i,u,m),_=f(p);l.set(_,a[m]=Vu(_,p))}return{c(){e=L("div"),n=L("div");for(let m=0;m<a.length;m+=1)a[m].c();A(n,"class","agents-list-container__inner svelte-1lid8lb"),Pn(()=>i[103].call(n)),A(e,"class","agents-list svelte-1lid8lb"),qn(e,"height",i[23]),qn(e,"max-height",i[22]),Pn(()=>i[105].call(e))},m(m,p){x(m,e,p),F(e,n);for(let _=0;_<a.length;_+=1)a[_]&&a[_].m(n,null);t=$s(n,i[103].bind(n)),i[104](e),o=$s(e,i[105].bind(e)),r=!0,s||(c=Ss(i[40].call(null,e)),s=!0)},p(m,p){16793730&p[0]|1476462596&p[1]&&(u=at(m[24]),j(),a=qr(a,p,f,1,m,u,l,n,Bi,Vu,null,Pu),q()),(!r||8388608&p[0])&&qn(e,"height",m[23]),(!r||4194304&p[0])&&qn(e,"max-height",m[22])},i(m){if(!r){for(let p=0;p<u.length;p+=1)d(a[p]);r=!0}},o(m){for(let p=0;p<a.length;p+=1)$(a[p]);r=!1},d(m){m&&b(e);for(let p=0;p<a.length;p+=1)a[p].d();t(),i[104](null),o(),s=!1,c()}}}function qu(i){let e,n,t,o,r,s,c,a;return t=new Ge({props:{size:1,weight:"medium",color:"secondary",$$slots:{default:[Ux]},$$scope:{ctx:i}}}),s=new we.Root({props:{$$slots:{default:[Gx]},$$scope:{ctx:i}}}),{c(){e=L("div"),n=L("div"),v(t.$$.fragment),o=B(),r=L("div"),v(s.$$.fragment),A(r,"class","thread-group-options svelte-1lid8lb"),A(n,"class","thread-group-header-content svelte-1lid8lb"),A(e,"class","thread-group-header svelte-1lid8lb")},m(l,u){x(l,e,u),F(e,n),w(t,n,null),F(n,o),F(n,r),w(s,r,null),a=!0},p(l,u){const f={};16777216&u[0]|256&u[4]&&(f.$$scope={dirty:u,ctx:l}),t.$set(f);const m={};16777216&u[0]|256&u[4]&&(m.$$scope={dirty:u,ctx:l}),s.$set(m)},i(l){a||(d(t.$$.fragment,l),d(s.$$.fragment,l),Pn(()=>{a&&(c||(c=xn(e,po,{duration:150},!0)),c.run(1))}),a=!0)},o(l){$(t.$$.fragment,l),$(s.$$.fragment,l),c||(c=xn(e,po,{duration:150},!1)),c.run(0),a=!1},d(l){l&&b(e),y(t),y(s),l&&c&&c.end()}}}function Ux(i){let e,n=i[128].groupTitle+"";return{c(){e=G(n)},m(t,o){x(t,e,o)},p(t,o){16777216&o[0]&&n!==(n=t[128].groupTitle+"")&&_e(e,n)},d(t){t&&b(e)}}}function Hx(i){let e,n;return e=new or({}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function jx(i){let e,n;return e=new dt({props:{variant:"ghost-block",color:"neutral",size:1,title:"Group options",$$slots:{default:[Hx]},$$scope:{ctx:i}}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p(t,o){const r={};256&o[4]&&(r.$$scope={dirty:o,ctx:t}),e.$set(r)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function qx(i){let e,n,t,o,r=i[128].threads.length+"",s=i[128].threads.length>1?"s":"";return{c(){e=G("Delete "),n=G(r),t=G(" thread"),o=G(s)},m(c,a){x(c,e,a),x(c,n,a),x(c,t,a),x(c,o,a)},p(c,a){16777216&a[0]&&r!==(r=c[128].threads.length+"")&&_e(n,r),16777216&a[0]&&s!==(s=c[128].threads.length>1?"s":"")&&_e(o,s)},d(c){c&&(b(e),b(n),b(t),b(o))}}}function Wx(i){let e,n;return e=new Wr({props:{slot:"iconLeft"}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p:P,i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function Vx(i){let e,n;function t(){return i[99](i[128])}return e=new we.Item({props:{color:"error",onSelect:t,$$slots:{iconLeft:[Wx],default:[qx]},$$scope:{ctx:i}}}),{c(){v(e.$$.fragment)},m(o,r){w(e,o,r),n=!0},p(o,r){i=o;const s={};16777216&r[0]&&(s.onSelect=t),16777216&r[0]|256&r[4]&&(s.$$scope={dirty:r,ctx:i}),e.$set(s)},i(o){n||(d(e.$$.fragment,o),n=!0)},o(o){$(e.$$.fragment,o),n=!1},d(o){y(e,o)}}}function Gx(i){let e,n,t,o;return e=new we.Trigger({props:{$$slots:{default:[jx]},$$scope:{ctx:i}}}),t=new we.Content({props:{size:1,side:"bottom",align:"end",$$slots:{default:[Vx]},$$scope:{ctx:i}}}),{c(){v(e.$$.fragment),n=B(),v(t.$$.fragment)},m(r,s){w(e,r,s),x(r,n,s),w(t,r,s),o=!0},p(r,s){const c={};256&s[4]&&(c.$$scope={dirty:s,ctx:r}),e.$set(c);const a={};16777216&s[0]|256&s[4]&&(a.$$scope={dirty:s,ctx:r}),t.$set(a)},i(r){o||(d(e.$$.fragment,r),d(t.$$.fragment,r),o=!0)},o(r){$(e.$$.fragment,r),$(t.$$.fragment,r),o=!1},d(r){r&&b(n),y(e,r),y(t,r)}}}function Wu(i,e){let n,t,o;function r(){return e[100](e[125],e[128],e[127])}function s(){return e[101](e[125])}function c(...a){return e[102](e[125],...a)}return t=new sm({props:{thread:e[125],containerWidth:e[14],isSelected:e[7]===e[125].id,afterDelete:r,onSelect:s,onTogglePinned:c,isFromDifferentRepo:e[58],getRepoInfo:e[59],enableShareService:e[33],isExpanded:e[1]}}),{key:i,first:null,c(){n=me(),v(t.$$.fragment),this.first=n},m(a,l){x(a,n,l),w(t,a,l),o=!0},p(a,l){e=a;const u={};16777216&l[0]&&(u.thread=e[125]),16384&l[0]&&(u.containerWidth=e[14]),16777344&l[0]&&(u.isSelected=e[7]===e[125].id),16777344&l[0]&&(u.afterDelete=r),16777216&l[0]&&(u.onSelect=s),16777216&l[0]&&(u.onTogglePinned=c),4&l[1]&&(u.enableShareService=e[33]),2&l[0]&&(u.isExpanded=e[1]),t.$set(u)},i(a){o||(d(t.$$.fragment,a),o=!0)},o(a){$(t.$$.fragment,a),o=!1},d(a){a&&b(n),y(t,a)}}}function Vu(i,e){let n,t,o,r,s=[],c=new Map,a=e[128].groupTitle!==Wt.New&&qu(e),l=at(e[128].threads);const u=f=>`${f[125].id}-${f[125].isPinned}-${f[127]}`;for(let f=0;f<l.length;f+=1){let m=Fu(e,l,f),p=u(m);c.set(p,s[f]=Wu(p,m))}return{key:i,first:null,c(){n=me(),a&&a.c(),t=B();for(let f=0;f<s.length;f+=1)s[f].c();o=me(),this.first=n},m(f,m){x(f,n,m),a&&a.m(f,m),x(f,t,m);for(let p=0;p<s.length;p+=1)s[p]&&s[p].m(f,m);x(f,o,m),r=!0},p(f,m){(e=f)[128].groupTitle!==Wt.New?a?(a.p(e,m),16777216&m[0]&&d(a,1)):(a=qu(e),a.c(),d(a,1),a.m(t.parentNode,t)):a&&(j(),$(a,1,1,()=>{a=null}),q()),16793730&m[0]|402720772&m[1]&&(l=at(e[128].threads),j(),s=qr(s,m,u,1,e,l,c,o.parentNode,Bi,Wu,o,Fu),q())},i(f){if(!r){d(a);for(let m=0;m<l.length;m+=1)d(s[m]);r=!0}},o(f){$(a);for(let m=0;m<s.length;m+=1)$(s[m]);r=!1},d(f){f&&(b(n),b(t),b(o)),a&&a.d(f);for(let m=0;m<s.length;m+=1)s[m].d(f)}}}function Gu(i){let e,n,t,o,r,s,c,a,l,u,f,m,p,_,M,C,T,E,R,N,J,Q,X,K,H,Y=[],V=new Map;r=new Oo({}),a=new qi({props:{class:"remote-agent-icon"}}),u=new Ge({props:{size:1,$$slots:{default:[Yx]},$$scope:{ctx:i}}});let Z=(i[18]>0||i[17]>0)&&Yu(i);M=new Ne({props:{content:"Expand remote agents dashboard",nested:!1,triggerOn:[Je.Hover],hasPointerEvents:!1,$$slots:{default:[Xx]},$$scope:{ctx:i}}});let re=at(i[5]);const le=oe=>oe[125].id;for(let oe=0;oe<re.length;oe+=1){let he=Nu(i,re,oe),ie=le(he);V.set(ie,Y[oe]=Ju(ie,he))}return{c(){e=L("div"),n=L("div"),t=L("button"),o=L("div"),v(r.$$.fragment),c=B(),v(a.$$.fragment),l=B(),v(u.$$.fragment),f=B(),Z&&Z.c(),m=B(),p=L("div"),_=L("div"),v(M.$$.fragment),R=B(),N=L("div");for(let oe=0;oe<Y.length;oe+=1)Y[oe].c();A(o,"class",s="expand-toggle-button "+(i[8]?"expand-toggle-button--active":"")+" svelte-1lid8lb"),A(_,"class","home-panel-button svelte-1lid8lb"),A(p,"class","right-buttons svelte-1lid8lb"),A(t,"class",T="expand-toggle-button-container "+(i[8]?"expand-toggle-button-container--active":"")+" svelte-1lid8lb"),A(t,"aria-label",E=i[8]?"Hide recent remote agents":"Show recent remote agents"),A(t,"aria-expanded",i[8]),A(t,"type","button"),A(n,"class","active-remote-agents-header svelte-1lid8lb"),A(N,"class","active-remote-agents-list svelte-1lid8lb"),qn(N,"height",i[21]),qn(N,"max-height",i[20]),A(e,"class","active-remote-agents-section svelte-1lid8lb")},m(oe,he){x(oe,e,he),F(e,n),F(n,t),F(t,o),w(r,o,null),F(t,c),w(a,t,null),F(t,l),w(u,t,null),F(t,f),Z&&Z.m(t,null),F(t,m),F(t,p),F(p,_),w(M,_,null),F(e,R),F(e,N);for(let ie=0;ie<Y.length;ie+=1)Y[ie]&&Y[ie].m(N,null);i[110](N),X=!0,K||(H=[Le(t,"click",i[46]),Ss(i[41].call(null,N))],K=!0)},p(oe,he){(!X||256&he[0]&&s!==(s="expand-toggle-button "+(oe[8]?"expand-toggle-button--active":"")+" svelte-1lid8lb"))&&A(o,"class",s);const ie={};524288&he[0]|256&he[4]&&(ie.$$scope={dirty:he,ctx:oe}),u.$set(ie),oe[18]>0||oe[17]>0?Z?Z.p(oe,he):(Z=Yu(oe),Z.c(),Z.m(t,m)):Z&&(Z.d(1),Z=null);const xe={};2&he[1]|256&he[4]&&(xe.$$scope={dirty:he,ctx:oe}),M.$set(xe),(!X||256&he[0]&&T!==(T="expand-toggle-button-container "+(oe[8]?"expand-toggle-button-container--active":"")+" svelte-1lid8lb"))&&A(t,"class",T),(!X||256&he[0]&&E!==(E=oe[8]?"Hide recent remote agents":"Show recent remote agents"))&&A(t,"aria-label",E),(!X||256&he[0])&&A(t,"aria-expanded",oe[8]),16800&he[0]|402720772&he[1]&&(re=at(oe[5]),j(),Y=qr(Y,he,le,1,oe,re,V,N,Bi,Ju,null,Nu),q()),(!X||2097152&he[0])&&qn(N,"height",oe[21]),(!X||1048576&he[0])&&qn(N,"max-height",oe[20])},i(oe){if(!X){d(r.$$.fragment,oe),d(a.$$.fragment,oe),d(u.$$.fragment,oe),d(M.$$.fragment,oe),oe&&Pn(()=>{X&&(C||(C=xn(_,dr,{y:-2,duration:150},!0)),C.run(1))});for(let he=0;he<re.length;he+=1)d(Y[he]);oe&&Pn(()=>{X&&(J||(J=xn(N,po,{duration:150},!0)),J.run(1))}),oe&&Pn(()=>{X&&(Q||(Q=xn(e,dr,{y:5,duration:150},!0)),Q.run(1))}),X=!0}},o(oe){$(r.$$.fragment,oe),$(a.$$.fragment,oe),$(u.$$.fragment,oe),$(M.$$.fragment,oe),oe&&(C||(C=xn(_,dr,{y:-2,duration:150},!1)),C.run(0));for(let he=0;he<Y.length;he+=1)$(Y[he]);oe&&(J||(J=xn(N,po,{duration:150},!1)),J.run(0)),oe&&(Q||(Q=xn(e,dr,{y:5,duration:150},!1)),Q.run(0)),X=!1},d(oe){oe&&b(e),y(r),y(a),y(u),Z&&Z.d(),y(M),oe&&C&&C.end();for(let he=0;he<Y.length;he+=1)Y[he].d();i[110](null),oe&&J&&J.end(),oe&&Q&&Q.end(),K=!1,Qt(H)}}}function Yx(i){let e,n,t,o=i[19]===1?"":"s";return{c(){e=G(i[19]),n=G(" recent remote agent"),t=G(o)},m(r,s){x(r,e,s),x(r,n,s),x(r,t,s)},p(r,s){524288&s[0]&&_e(e,r[19]),524288&s[0]&&o!==(o=r[19]===1?"":"s")&&_e(t,o)},d(r){r&&(b(e),b(n),b(t))}}}function Yu(i){let e,n,t=i[18]>0&&Ku(i),o=i[17]>0&&Xu(i);return{c(){e=L("div"),t&&t.c(),n=B(),o&&o.c(),A(e,"class","remote-agent-indicators svelte-1lid8lb")},m(r,s){x(r,e,s),t&&t.m(e,null),F(e,n),o&&o.m(e,null)},p(r,s){r[18]>0?t?t.p(r,s):(t=Ku(r),t.c(),t.m(e,n)):t&&(t.d(1),t=null),r[17]>0?o?o.p(r,s):(o=Xu(r),o.c(),o.m(e,null)):o&&(o.d(1),o=null)},d(r){r&&b(e),t&&t.d(),o&&o.d()}}}function Ku(i){let e,n,t,o,r,s;return{c(){e=L("div"),n=L("div"),t=B(),o=L("span"),r=G(i[18]),A(n,"class","indicator-dot running-dot svelte-1lid8lb"),A(o,"class","indicator-count svelte-1lid8lb"),A(e,"class","indicator running-indicator svelte-1lid8lb"),A(e,"title",s=i[18]+" running agent"+(i[18]===1?"":"s"))},m(c,a){x(c,e,a),F(e,n),F(e,t),F(e,o),F(o,r)},p(c,a){262144&a[0]&&_e(r,c[18]),262144&a[0]&&s!==(s=c[18]+" running agent"+(c[18]===1?"":"s"))&&A(e,"title",s)},d(c){c&&b(e)}}}function Xu(i){let e,n,t,o,r,s;return{c(){e=L("div"),n=L("div"),t=B(),o=L("span"),r=G(i[17]),A(n,"class","indicator-dot changes-dot svelte-1lid8lb"),A(o,"class","indicator-count svelte-1lid8lb"),A(e,"class","indicator changes-indicator svelte-1lid8lb"),A(e,"title",s=i[17]+" agent"+(i[17]===1?"":"s")+" with changes")},m(c,a){x(c,e,a),F(e,n),F(e,t),F(e,o),F(o,r)},p(c,a){131072&a[0]&&_e(r,c[17]),131072&a[0]&&s!==(s=c[17]+" agent"+(c[17]===1?"":"s")+" with changes")&&A(e,"title",s)},d(c){c&&b(e)}}}function Kx(i){let e,n;return e=new e6({}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function Xx(i){let e,n;return e=new dt({props:{variant:"ghost",color:i[32]?"accent":"neutral",size:1,$$slots:{default:[Kx]},$$scope:{ctx:i}}}),e.$on("click",i[106]),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p(t,o){const r={};2&o[1]&&(r.color=t[32]?"accent":"neutral"),256&o[4]&&(r.$$scope={dirty:o,ctx:t}),e.$set(r)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function Zu(i){let e,n;function t(){return i[107](i[125],i[127])}function o(){return i[108](i[125])}function r(...s){return i[109](i[125],...s)}return e=new sm({props:{thread:i[125],containerWidth:i[14],isSelected:i[7]===i[125].id,afterDelete:t,onSelect:o,onTogglePinned:r,isFromDifferentRepo:i[58],getRepoInfo:i[59],enableShareService:i[33],isExpanded:!1}}),{c(){v(e.$$.fragment)},m(s,c){w(e,s,c),n=!0},p(s,c){i=s;const a={};32&c[0]&&(a.thread=i[125]),16384&c[0]&&(a.containerWidth=i[14]),160&c[0]&&(a.isSelected=i[7]===i[125].id),160&c[0]&&(a.afterDelete=t),32&c[0]&&(a.onSelect=o),32&c[0]&&(a.onTogglePinned=r),4&c[1]&&(a.enableShareService=i[33]),e.$set(a)},i(s){n||(d(e.$$.fragment,s),n=!0)},o(s){$(e.$$.fragment,s),n=!1},d(s){y(e,s)}}}function Ju(i,e){let n,t,o,r=e[8]&&Zu(e);return{key:i,first:null,c(){n=me(),r&&r.c(),t=me(),this.first=n},m(s,c){x(s,n,c),r&&r.m(s,c),x(s,t,c),o=!0},p(s,c){(e=s)[8]?r?(r.p(e,c),256&c[0]&&d(r,1)):(r=Zu(e),r.c(),d(r,1),r.m(t.parentNode,t)):r&&(j(),$(r,1,1,()=>{r=null}),q())},i(s){o||(d(r),o=!0)},o(s){$(r),o=!1},d(s){s&&(b(n),b(t)),r&&r.d(s)}}}function Zx(i){let e,n,t,o,r;const s=[e8,Qx],c=[];function a(l,u){return 1&u[0]&&(n=null),n==null&&(n=l[0].trim()!==""),n?0:1}return t=a(i,[-1,-1,-1,-1,-1]),o=c[t]=s[t](i),{c(){e=L("div"),o.c(),A(e,"class","empty-message svelte-1lid8lb")},m(l,u){x(l,e,u),c[t].m(e,null),r=!0},p(l,u){let f=t;t=a(l,u),t===f?c[t].p(l,u):(j(),$(c[f],1,1,()=>{c[f]=null}),q(),o=c[t],o?o.p(l,u):(o=c[t]=s[t](l),o.c()),d(o,1),o.m(e,null))},i(l){r||(d(o),r=!0)},o(l){$(o),r=!1},d(l){l&&b(e),c[t].d()}}}function Jx(i){let e,n=[],t=new Map,o=at(i[28]);const r=s=>s[124];for(let s=0;s<o.length;s+=1){let c=Du(i,o,s),a=r(c);t.set(a,n[s]=Qu(a))}return{c(){e=L("div");for(let s=0;s<n.length;s+=1)n[s].c();A(e,"class","loading-state svelte-1lid8lb")},m(s,c){x(s,e,c);for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(e,null)},p(s,c){268435456&c[0]&&(o=at(s[28]),n=qr(n,c,r,1,s,o,t,e,Ym,Qu,null,Du))},i:P,o:P,d(s){s&&b(e);for(let c=0;c<n.length;c+=1)n[c].d()}}}function Qx(i){let e,n;return e=new Ge({props:{size:1,color:"secondary",$$slots:{default:[t8]},$$scope:{ctx:i}}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p(t,o){const r={};256&o[4]&&(r.$$scope={dirty:o,ctx:t}),e.$set(r)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function e8(i){let e,n;return e=new Ge({props:{size:1,color:"secondary",$$slots:{default:[n8]},$$scope:{ctx:i}}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p(t,o){const r={};1&o[0]|256&o[4]&&(r.$$scope={dirty:o,ctx:t}),e.$set(r)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function t8(i){let e;return{c(){e=G("Create a new thread to get started.")},m(n,t){x(n,e,t)},d(n){n&&b(e)}}}function n8(i){let e,n,t;return{c(){e=G('No threads with "'),n=G(i[0]),t=G('" in the title.')},m(o,r){x(o,e,r),x(o,n,r),x(o,t,r)},p(o,r){1&r[0]&&_e(n,o[0])},d(o){o&&(b(e),b(n),b(t))}}}function Qu(i,e){let n;return{key:i,first:null,c(){n=L("div"),n.innerHTML='<div class="agent-content svelte-1lid8lb"><div class="agent-details svelte-1lid8lb"><div class="agent-details--left svelte-1lid8lb"><div class="agent-icon"><div class="skeleton-dot svelte-1lid8lb"></div></div> <div class="skeleton-text svelte-1lid8lb"></div></div></div></div> ',A(n,"class","agent-row skeleton-row svelte-1lid8lb"),this.first=n},m(t,o){x(t,n,o)},p(t,o){},d(t){t&&b(n)}}}function ed(i){let e,n,t;return n=new Ne({props:{content:(i[1]?i[3].isDragging:i[4].isDragging)?void 0:"Drag to resize. Click or Esc to collapse",side:"bottom",hasPointerEvents:!1,offset:[0,8],$$slots:{default:[o8]},$$scope:{ctx:i}}}),{c(){e=L("div"),v(n.$$.fragment),A(e,"class","resize-handle-container svelte-1lid8lb")},m(o,r){x(o,e,r),w(n,e,null),t=!0},p(o,r){const s={};26&r[0]&&(s.content=(o[1]?o[3].isDragging:o[4].isDragging)?void 0:"Drag to resize. Click or Esc to collapse"),26&r[0]|256&r[4]&&(s.$$scope={dirty:r,ctx:o}),n.$set(s)},i(o){t||(d(n.$$.fragment,o),t=!0)},o(o){$(n.$$.fragment,o),t=!1},d(o){o&&b(e),y(n)}}}function o8(i){let e,n,t;return{c(){e=L("button"),e.innerHTML='<div class="resize-handle-line svelte-1lid8lb"><div class="resize-handle-dash svelte-1lid8lb"></div></div>',A(e,"class","resize-handle svelte-1lid8lb"),ke(e,"resize-handle--dragging",i[1]?i[3].isDragging:i[4].isDragging),ke(e,"resize-handle--expanded",i[1])},m(o,r){x(o,e,r),n||(t=[Le(e,"mousedown",function(){Nt(i[1]?i[51]:i[54])&&(i[1]?i[51]:i[54]).apply(this,arguments)}),Le(e,"click",i[111])],n=!0)},p(o,r){i=o,26&r[0]&&ke(e,"resize-handle--dragging",i[1]?i[3].isDragging:i[4].isDragging),2&r[0]&&ke(e,"resize-handle--expanded",i[1])},d(o){o&&b(e),n=!1,Qt(t)}}}function r8(i){let e,n,t,o,r,s,c,a,l,u,f,m,p,_,M,C,T,E,R,N,J,Q,X,K,H,Y,V,Z,re,le,oe,he;Pn(i[90]),a=new Oo({}),m=new Ge({props:{size:1,class:"header-text-main",$$slots:{default:[Rx]},$$scope:{ctx:i}}});let ie=!i[11]&&i[1]&&Ou(i),xe=i[1]&&zu(i),tt=i[26]&&Hu(i);Q=new x5({});let Ae=i[1]&&!i[27]&&!i[25]&&ju(i),He=i[19]>0&&Gu(i);const Dt=[Jx,Zx],It=[];function un(S,O){return S[27]?0:S[25]?1:-1}~(Y=un(i))&&(V=It[Y]=Dt[Y](i));let z=(!i[0]&&i[1]||!i[1]&&i[8])&&ed(i);return{c(){e=L("div"),n=L("div"),t=L("div"),o=L("div"),r=L("div"),s=L("button"),c=L("div"),v(a.$$.fragment),u=B(),f=L("div"),v(m.$$.fragment),p=B(),_=L("div"),ie&&ie.c(),M=B(),xe&&xe.c(),E=B(),R=L("div"),tt&&tt.c(),N=B(),J=L("div"),v(Q.$$.fragment),X=B(),Ae&&Ae.c(),K=B(),He&&He.c(),H=B(),V&&V.c(),Z=B(),z&&z.c(),A(c,"class",l="expand-toggle-button "+(i[1]?"expand-toggle-button--active":"")+" svelte-1lid8lb"),A(f,"class","header-text svelte-1lid8lb"),A(_,"class","thread-type-filter svelte-1lid8lb"),A(s,"class",C="expand-toggle-button-container "+(i[1]?"expand-toggle-button-container--active":"")+" svelte-1lid8lb"),A(s,"aria-label",T=i[1]?"Collapse threads":"Expand threads"),A(s,"aria-expanded",i[1]),A(s,"type","button"),A(s,"data-testid",i8),A(r,"class","header-left svelte-1lid8lb"),A(J,"class","new-thread-dropdown svelte-1lid8lb"),A(R,"class","header-right svelte-1lid8lb"),A(o,"class","header svelte-1lid8lb"),A(t,"class","agents-list-container svelte-1lid8lb"),A(t,"role","region"),A(t,"aria-label","Remote agents list"),ke(t,"is-dragging",i[3].isDragging||i[4].isDragging),ke(t,"is-expanded",i[1]),A(n,"class","remote-agent-threads svelte-1lid8lb"),Pn(()=>i[112].call(n)),A(e,"class","remote-agent-threads-container svelte-1lid8lb")},m(S,O){x(S,e,O),F(e,n),F(n,t),F(t,o),F(o,r),F(r,s),F(s,c),w(a,c,null),F(s,u),F(s,f),w(m,f,null),F(s,p),F(s,_),ie&&ie.m(_,null),F(s,M),xe&&xe.m(s,null),F(o,E),F(o,R),tt&&tt.m(R,null),F(R,N),F(R,J),w(Q,J,null),F(t,X),Ae&&Ae.m(t,null),F(t,K),He&&He.m(t,null),F(n,H),~Y&&It[Y].m(n,null),F(n,Z),z&&z.m(n,null),re=$s(n,i[112].bind(n)),le=!0,oe||(he=[Le(window,"mousemove",i[88]),Le(window,"mouseup",i[89]),Le(window,"focus",i[48]),Le(window,"blur",i[49]),Le(window,"keydown",i[50]),Le(window,"resize",i[90]),Le(s,"click",i[45]),Le(s,"keydown",i[97])],oe=!0)},p(S,O){(!le||2&O[0]&&l!==(l="expand-toggle-button "+(S[1]?"expand-toggle-button--active":"")+" svelte-1lid8lb"))&&A(c,"class",l);const ee={};256&O[4]&&(ee.$$scope={dirty:O,ctx:S}),m.$set(ee),!S[11]&&S[1]?ie?(ie.p(S,O),2050&O[0]&&d(ie,1)):(ie=Ou(S),ie.c(),d(ie,1),ie.m(_,null)):ie&&(j(),$(ie,1,1,()=>{ie=null}),q()),S[1]?xe?(xe.p(S,O),2&O[0]&&d(xe,1)):(xe=zu(S),xe.c(),d(xe,1),xe.m(s,null)):xe&&(j(),$(xe,1,1,()=>{xe=null}),q()),(!le||2&O[0]&&C!==(C="expand-toggle-button-container "+(S[1]?"expand-toggle-button-container--active":"")+" svelte-1lid8lb"))&&A(s,"class",C),(!le||2&O[0]&&T!==(T=S[1]?"Collapse threads":"Expand threads"))&&A(s,"aria-label",T),(!le||2&O[0])&&A(s,"aria-expanded",S[1]),S[26]?tt?(tt.p(S,O),67108864&O[0]&&d(tt,1)):(tt=Hu(S),tt.c(),d(tt,1),tt.m(R,N)):tt&&(j(),$(tt,1,1,()=>{tt=null}),q()),!S[1]||S[27]||S[25]?Ae&&(j(),$(Ae,1,1,()=>{Ae=null}),q()):Ae?(Ae.p(S,O),167772162&O[0]&&d(Ae,1)):(Ae=ju(S),Ae.c(),d(Ae,1),Ae.m(t,K)),S[19]>0?He?(He.p(S,O),524288&O[0]&&d(He,1)):(He=Gu(S),He.c(),d(He,1),He.m(t,null)):He&&(j(),$(He,1,1,()=>{He=null}),q()),(!le||24&O[0])&&ke(t,"is-dragging",S[3].isDragging||S[4].isDragging),(!le||2&O[0])&&ke(t,"is-expanded",S[1]);let se=Y;Y=un(S),Y===se?~Y&&It[Y].p(S,O):(V&&(j(),$(It[se],1,1,()=>{It[se]=null}),q()),~Y?(V=It[Y],V?V.p(S,O):(V=It[Y]=Dt[Y](S),V.c()),d(V,1),V.m(n,Z)):V=null),!S[0]&&S[1]||!S[1]&&S[8]?z?(z.p(S,O),259&O[0]&&d(z,1)):(z=ed(S),z.c(),d(z,1),z.m(n,null)):z&&(j(),$(z,1,1,()=>{z=null}),q())},i(S){le||(d(a.$$.fragment,S),d(m.$$.fragment,S),d(ie),d(xe),d(tt),d(Q.$$.fragment,S),d(Ae),d(He),d(V),d(z),le=!0)},o(S){$(a.$$.fragment,S),$(m.$$.fragment,S),$(ie),$(xe),$(tt),$(Q.$$.fragment,S),$(Ae),$(He),$(V),$(z),le=!1},d(S){S&&b(e),y(a),y(m),ie&&ie.d(),xe&&xe.d(),tt&&tt.d(),y(Q),Ae&&Ae.d(),He&&He.d(),~Y&&It[Y].d(),z&&z.d(),re(),oe=!1,Qt(he)}}}const i8="threads-expand-button";function s8(i){if(i.id===er||i.type!=="remoteAgent")return!1;const e=new Date(i.updated_at),n=new Date().getTime()-e.getTime();return Math.floor(n/1e3/60/60)<168}const yi=25;function td(i){var e,n,t;return((t=(n=(e=i.workspace_setup)==null?void 0:e.starting_files)==null?void 0:n.github_commit_ref)==null?void 0:t.repository_url)||""}function a8(i,e,n){let t,o,r,s,c,a,l,u,f,m,p,_,M,C,T,E,R,N,J,Q,X,K,H,Y,V,Z,re,le,oe,he,ie,xe,tt,Ae,He,Dt,It,un,z,S,O,ee,se,ve,Ce,Oe,qe,st,Ve,zt,Qe=P,Lt=P;i.$$.on_destroy.push(()=>Qe()),i.$$.on_destroy.push(()=>Lt());const Ot=er,Pt=Se(Tn.key);Te(i,Pt,ge=>n(84,ee=ge));const Cn=Se(gf);Te(i,Cn,ge=>n(85,qe=ge));const An=Se(hr.key),Bt=Se(gr.key);let{chatModelProp:$n}=e,Gt=$n||Se("chatModel");Te(i,Gt,ge=>n(86,st=ge));const gn=Tt(!1);let Fn;function sn(ge){if(!ge)return new Date(0);const wt=_;return Sn.getTime(ge,wt)}Te(i,gn,ge=>n(33,zt=ge)),ro(async()=>{try{An.getRemoteUrl(),Gt&&Gt.flags&&gn.update(()=>Gt.flags.enableShareService||!1)}catch(ge){console.error("Failed to get current repository URL:",ge)}});let Yt="",Xt=!1;function Qn(){n(0,Yt=""),n(11,Xt=!1)}let We,On=0,zn=0,Bn=0;const Vn=Fl(()=>{n(1,vt=!1)},()=>vt),yn=Fl(()=>{fn.set(!1)},()=>ve);async function qt(ge,wt){if(wt&&wt.stopPropagation(),!ge.isNew)if(ge.type==="remoteAgent"){const De=await Pt.toggleAgentPinned(ge.id,ge.isPinned||!1);Cn.update(Ht=>{if(Ht)return{...Ht,pinnedAgents:De}})}else["chat","localAgent"].includes(ge.type)&&Gt&&Gt.toggleConversationPinned(ge.id)}const En=Tt("all");Te(i,En,ge=>n(9,Oe=ge));let vt=!1;const fn=Tt(!1);function Un(){if(n(1,vt=!vt),vt){fn.set(!1);const ge=nt.currentHeight||Fe.defaultHeight,wt=Ni(he.windowHeight,he.maxContentHeight),De=Math.max(he.minHeight,Math.min(wt,ge));n(3,nt={...nt,currentHeight:De})}}function Vt(){if(fn.update(ge=>!ge),n(1,vt=!1),ve){const ge=Ni(ie.windowHeight,ie.maxContentHeight),wt=Math.max(ie.minHeight,Math.min(ge,ie.defaultHeight));n(4,ct={...ct,currentHeight:wt})}}function Ut(ge){if(!ge)return!1;ge.type==="remoteAgent"&&ge.has_updates&&Pt.optimisticallyClearAgentUpdates(ge.id),Pt.setIsActive(ge.type==="remoteAgent");const wt=Bt.switchToThread(ge.type,ge.id,Ce);return wt&&(n(1,vt=!1),fn.set(!1)),wt}Te(i,fn,ge=>n(8,ve=ge));let pe=0;const Fe={threadItemHeight:yi,minHeight:75,defaultHeight:375},_t={threadItemHeight:yi,minHeight:25,defaultHeight:100};let $t,nt=Su(Fe.defaultHeight),ct=Su(_t.defaultHeight);function dn(ge){n(3,nt=Eu(ge,nt,he,vt))}function Ee(){n(3,nt=Iu(nt)),setTimeout(()=>{n(3,nt=Lu(nt))},0)}function Gn(ge){n(4,ct=Eu(ge,ct,ie,!vt&&ve))}function In(){n(4,ct=Iu(ct)),setTimeout(()=>{n(4,ct=Lu(ct))},0)}const Eo=An.currentRepositoryUrl;function Io(){ee.refreshAgentThreads()}async function Ho(ge){const wt=[],De=[];for(const Ht of ge)Ht.type==="remoteAgent"?De.push(Ht.id):wt.push(Ht.id);await Gt.deleteConversations(wt,void 0,De,Pt)}return Te(i,Eo,ge=>n(114,se=ge)),i.$$set=ge=>{"chatModelProp"in ge&&n(62,$n=ge.chatModelProp)},i.$$.update=()=>{var ge,wt;4194304&i.$$.dirty[2]&&n(82,t=ee.currentAgentId),4194304&i.$$.dirty[2]&&n(78,o=ee.agentOverviews||[]),16777216&i.$$.dirty[2]&&n(83,r=Gt?Object.values(st.orderedConversations()):[]),2097152&i.$$.dirty[2]&&n(81,s=r.find(Sn.isNew)),2621440&i.$$.dirty[2]&&n(80,c=Gt?r.filter(De=>{var Ht;return!((Ht=De.extraData)!=null&&Ht.isAgentConversation)&&De!==s}):[]),2621440&i.$$.dirty[2]&&n(79,a=Gt?r.filter(De=>{var Ht;return((Ht=De.extraData)==null?void 0:Ht.isAgentConversation)===!0&&De!==s}):[]),4194304&i.$$.dirty[2]&&n(71,l=ee.agentThreadsError),4194304&i.$$.dirty[2]&&n(70,u=ee.isLoading),4194304&i.$$.dirty[2]&&n(69,f=ee.hasFetchedOnce),8388608&i.$$.dirty[2]&&n(32,m=(ge=qe.state)==null?void 0:ge.activeWebviews.includes("home")),33554432&i.$$.dirty[2]&&(_=Ve||"lastMessageTimestamp"),16777216&i.$$.dirty[2]&&(n(30,M=st.agentExecutionMode),Qe(),Qe=lt(M,De=>n(115,Ce=De))),22020096&i.$$.dirty[2]&&n(7,C=ee.isActive?t??Ot:st.currentConversationId),21495808&i.$$.dirty[2]&&n(75,T=(()=>{var De,Ht;if(ee.isActive){if(ee.isCreatingAgent)return;const Mn=(De=st.currentConversationModel.draftExchange)==null?void 0:De.request_message;return{id:Ot,isNew:!0,type:"remoteAgent",title:Mn,updated_at:new Date().toISOString(),started_at:new Date().toISOString(),isPinned:!1,conversation:void 0,sortTimestamp:new Date}}if(s)return{id:s.id,isNew:!0,type:(Ht=s.extraData)!=null&&Ht.isAgentConversation?"localAgent":"chat",title:"",updated_at:s.lastInteractedAtIso,started_at:s.createdAtIso,isPinned:!1,conversation:s,sortTimestamp:sn(s)}})()),262144&i.$$.dirty[2]&&n(74,E=c.map(De=>({id:De.id,isNew:!1,type:"chat",title:De.name||"",updated_at:De.lastInteractedAtIso,started_at:De.createdAtIso,isPinned:De.isPinned,conversation:De,sortTimestamp:sn(De)}))),131072&i.$$.dirty[2]&&n(73,R=a.map(De=>({id:De.id,isNew:!1,type:"localAgent",title:De.name||"",updated_at:De.lastInteractedAtIso,started_at:De.createdAtIso,isPinned:De.isPinned,conversation:De,sortTimestamp:sn(De)}))),8388608&i.$$.dirty[2]&&n(77,N=((wt=qe.state)==null?void 0:wt.pinnedAgents)||{}),128&i.$$.dirty[0]|98304&i.$$.dirty[2]&&n(64,J=o.map(De=>({id:De.remote_agent_id,isNew:!1,type:"remoteAgent",title:De.title||De.session_summary,updated_at:De.updated_at,started_at:De.started_at,status:De.status,workspace_status:De.workspace_status,is_setup_script_agent:De.is_setup_script_agent,workspace_setup:De.workspace_setup||{},agent:De,sortTimestamp:new Date(De.updated_at||De.started_at),isPinned:N[De.remote_agent_id]||!1,has_updates:De.has_updates&&De.remote_agent_id!==C}))),128&i.$$.dirty[0]|8192&i.$$.dirty[2]&&n(76,Q=T&&C===T.id),30724&i.$$.dirty[2]&&n(72,X=[Q&&T,...E,...R,...J].filter(Boolean)),7172&i.$$.dirty[2]&&n(29,K=[{value:"all",label:"All threads",count:X.length},{value:"chat",label:"Chats",count:E.length},{value:"localAgent",label:"Local agents",count:R.length},{value:"remoteAgent",label:"Remote agents",count:J.length}].filter(De=>De.count>0)),513&i.$$.dirty[0]|4195328&i.$$.dirty[2]&&n(66,H=X.filter(De=>(Oe==="all"||De.type===Oe)&&function(Ht,Mn,Lo,_r){if(!Mn.trim())return!0;const jo=Mn.toLowerCase().split(/\s+/).filter(bn=>bn.length>0),qo=[Ht.title,Ht.type==="remoteAgent"?s5(Ht):"",i5(Ht,Lo,_r)].filter(Boolean).join(" ").toLowerCase();return jo.every(bn=>qo.includes(bn))}(De,Yt,ee.currentAgentId,ee.currentConversation))),512&i.$$.dirty[2]&&n(6,V=l==null?void 0:l.errorMessage),384&i.$$.dirty[2]&&n(27,Z=u&&!f),64&i.$$.dirty[0]|128&i.$$.dirty[2]&&n(26,re=!!V&&f),144&i.$$.dirty[2]&&n(25,le=f&&H.length===0),2&i.$$.dirty[0]|16&i.$$.dirty[2]&&n(24,oe=vt?function(De,Ht=n5){var Wo;const Mn=new Map,Lo=new Date(new Date().setHours(0,0,0,0)),_r=[{age:Wt.Today,date:Lo},{age:Wt.ThisWeek,date:new Date(Lo.getTime()-6048e5)},{age:Wt.ThisMonth,date:new Date(Lo.getTime()-2592e6)}];for(const Ln of De){const ir=Ln.sortTimestamp;let no=((Wo=_r.find(Zr=>ir>=Zr.date))==null?void 0:Wo.age)||Wt.Older;Ln.isPinned&&(no=Wt.Pinned),Ln.isNew&&(no=Wt.New),Mn.set(no,[...Mn.get(no)||[],Ln])}const jo=o5.map(Ln=>({groupTitle:Ln,threads:r5(Mn.get(Ln)||[])})).filter(Ln=>Ln.threads.length>0);let qo=0;const bn=[];for(const Ln of jo){const ir=[];for(const no of Ln.threads){if(qo>=Ht)break;ir.push(no),qo++}bn.push({groupTitle:Ln.groupTitle,threads:ir})}return bn}(H):[]),4&i.$$.dirty[0]|16&i.$$.dirty[2]&&n(68,he={...Fe,windowHeight:pe,maxContentHeight:H.length*yi}),16&i.$$.dirty[2]&&n(5,Dt=H.filter(s8)),36&i.$$.dirty[0]&&n(67,ie={..._t,windowHeight:pe,maxContentHeight:Dt.length*yi}),10&i.$$.dirty[0]|64&i.$$.dirty[2]&&vt&&n(3,nt=Ru(nt,he)),274&i.$$.dirty[0]|32&i.$$.dirty[2]&&!vt&&ve&&n(4,ct=Ru(ct,ie)),10&i.$$.dirty[0]&&n(23,xe=vt?`${nt.currentHeight}px`:""),10&i.$$.dirty[0]&&n(22,tt=vt?`${nt.currentHeight}px`:""),274&i.$$.dirty[0]&&n(21,Ae=!vt&&ve?`${ct.currentHeight}px`:""),274&i.$$.dirty[0]&&n(20,He=!vt&&ve?`${ct.currentHeight}px`:""),32&i.$$.dirty[0]&&n(19,It=Dt.length),4&i.$$.dirty[2]&&n(65,un=J.filter(De=>De.status===Jt.agentRunning||De.status===Jt.agentStarting)),8&i.$$.dirty[2]&&n(18,z=un.length),4&i.$$.dirty[2]&&n(63,S=J.filter(De=>!!De.has_updates&&De.status===Jt.agentIdle)),2&i.$$.dirty[2]&&n(17,O=S.length)},n(31,p=Gt?Gt.sortConversationsBy:Tt("lastMessageTimestamp")),Lt(),Lt=lt(p,ge=>n(87,Ve=ge)),n(28,Y=Array(3).fill(null)),[Yt,vt,pe,nt,ct,Dt,V,C,ve,Oe,Fn,Xt,On,zn,Bn,We,$t,O,z,It,He,Ae,tt,xe,oe,le,re,Z,Y,K,M,p,m,zt,Pt,Cn,Gt,gn,function(){n(11,Xt=!Xt),n(1,vt=Xt),Xt?setTimeout(()=>{Fn==null||Fn.focus()},30):n(0,Yt="")},Qn,Vn,yn,qt,En,fn,Un,Vt,Ut,function(){Pt.setIsPanelFocused(!0)},function(){Pt.setIsPanelFocused(!1)},function(ge){ge.key==="Escape"&&(vt?(n(1,vt=!1),ge.preventDefault(),ge.stopPropagation()):ve&&(fn.set(!1),ge.preventDefault(),ge.stopPropagation()))},function(ge){n(3,nt=Tu(ge,nt,vt))},dn,Ee,function(ge){n(4,ct=Tu(ge,ct,!vt&&ve))},Gn,In,Eo,function(ge){if(!ge||typeof ge!="object"||!("workspace_setup"in ge))return!1;const wt=td(ge);return!!wt&&!!se&&wt!==se},function(ge){if(!ge||typeof ge!="object"||!("workspace_setup"in ge))return{name:"Unknown",fullPath:"Unknown"};const wt=td(ge);return{name:Q$(wt),fullPath:Es(wt)}},Io,Ho,$n,S,J,un,H,ie,he,f,u,l,X,R,E,T,Q,N,o,a,c,s,t,r,ee,qe,st,Ve,ge=>{dn(ge),Gn(ge)},()=>{Ee(),In()},function(){n(2,pe=window.innerHeight)},ge=>ge.value===Oe,function(ge){Yt=ge,n(0,Yt)},function(ge){Fn=ge,n(10,Fn)},ge=>{ge.key==="Escape"&&Qn()},()=>{n(11,Xt=!0)},()=>{Yt.trim()||n(11,Xt=!1)},ge=>{ge.key!=="Enter"&&ge.key!==" "||(Un(),ge.stopPropagation(),ge.preventDefault())},ge=>{ge.stopPropagation(),Io()},ge=>Ho(ge.threads),(ge,wt,De)=>{if(C!==ge.id)return;const Ht=wt.threads[De+1]||wt.threads[De-1];Ht&&Ut(Ht)},ge=>Ut(ge),(ge,wt)=>qt(ge,wt),function(){zn=this.clientHeight,n(13,zn)},function(ge){et[ge?"unshift":"push"](()=>{We=ge,n(15,We)})},function(){On=this.clientHeight,n(12,On)},ge=>{ge.stopPropagation(),m?Pt.closeRemoteAgentHomePanel():Pt.showRemoteAgentHomePanel()},(ge,wt)=>{if(C!==ge.id)return;const De=Dt[wt+1]||Dt[wt-1];De&&Ut(De)},ge=>Ut(ge),(ge,wt)=>qt(ge,wt),function(ge){et[ge?"unshift":"push"](()=>{$t=ge,n(16,$t)})},()=>{if(vt){if(nt.hasDraggedThisClick)return;Un()}else{if(ct.hasDraggedThisClick)return;Vt()}},function(){Bn=this.clientWidth,n(14,Bn)}]}class c8 extends ue{constructor(e){super(),de(this,e,a8,r8,ce,{chatModelProp:62},null,[-1,-1,-1,-1,-1])}}function l8(i){let e,n;return{c(){e=rt("svg"),n=rt("path"),A(n,"d","M6.85357 3.85355L7.65355 3.05353C8.2981 2.40901 9.42858 1.96172 10.552 1.80125C11.1056 1.72217 11.6291 1.71725 12.0564 1.78124C12.4987 1.84748 12.7698 1.97696 12.8965 2.10357C13.0231 2.23018 13.1526 2.50125 13.2188 2.94357C13.2828 3.37086 13.2779 3.89439 13.1988 4.44801C13.0383 5.57139 12.591 6.70188 11.9464 7.34645L7.49999 11.7929L6.35354 10.6465C6.15827 10.4512 5.84169 10.4512 5.64643 10.6465C5.45117 10.8417 5.45117 11.1583 5.64643 11.3536L7.14644 12.8536C7.34171 13.0488 7.65829 13.0488 7.85355 12.8536L8.40073 12.3064L9.57124 14.2572C9.65046 14.3893 9.78608 14.4774 9.9389 14.4963C10.0917 14.5151 10.2447 14.4624 10.3535 14.3536L12.3535 12.3536C12.4648 12.2423 12.5172 12.0851 12.495 11.9293L12.0303 8.67679L12.6536 8.05355C13.509 7.19808 14.0117 5.82855 14.1887 4.58943C14.2784 3.9618 14.2891 3.33847 14.2078 2.79546C14.1287 2.26748 13.9519 1.74482 13.6035 1.39645C13.2552 1.04809 12.7325 0.871332 12.2045 0.792264C11.6615 0.710945 11.0382 0.721644 10.4105 0.8113C9.17143 0.988306 7.80189 1.491 6.94644 2.34642L6.32322 2.96968L3.07071 2.50504C2.91492 2.48278 2.75773 2.53517 2.64645 2.64646L0.646451 4.64645C0.537579 4.75533 0.484938 4.90829 0.50375 5.0611C0.522563 5.21391 0.61073 5.34954 0.742757 5.42876L2.69364 6.59928L2.14646 7.14645C2.0527 7.24022 2.00002 7.3674 2.00002 7.50001C2.00002 7.63261 2.0527 7.75979 2.14646 7.85356L3.64647 9.35356C3.84173 9.54883 4.15831 9.54883 4.35357 9.35356C4.54884 9.1583 4.54884 8.84172 4.35357 8.64646L3.20712 7.50001L3.85357 6.85356L6.85357 3.85355ZM10.0993 13.1936L9.12959 11.5775L11.1464 9.56067L11.4697 11.8232L10.0993 13.1936ZM3.42251 5.87041L5.43935 3.85356L3.17678 3.53034L1.80638 4.90074L3.42251 5.87041ZM2.35356 10.3535C2.54882 10.1583 2.54882 9.8417 2.35356 9.64644C2.1583 9.45118 1.84171 9.45118 1.64645 9.64644L0.646451 10.6464C0.451188 10.8417 0.451188 11.1583 0.646451 11.3535C0.841713 11.5488 1.1583 11.5488 1.35356 11.3535L2.35356 10.3535ZM3.85358 11.8536C4.04884 11.6583 4.04885 11.3417 3.85359 11.1465C3.65833 10.9512 3.34175 10.9512 3.14648 11.1465L1.14645 13.1464C0.95119 13.3417 0.951187 13.6583 1.14645 13.8535C1.34171 14.0488 1.65829 14.0488 1.85355 13.8536L3.85358 11.8536ZM5.35356 13.3535C5.54882 13.1583 5.54882 12.8417 5.35356 12.6464C5.1583 12.4512 4.84171 12.4512 4.64645 12.6464L3.64645 13.6464C3.45119 13.8417 3.45119 14.1583 3.64645 14.3535C3.84171 14.5488 4.1583 14.5488 4.35356 14.3535L5.35356 13.3535ZM9.49997 6.74881C10.1897 6.74881 10.7488 6.1897 10.7488 5.5C10.7488 4.8103 10.1897 4.25118 9.49997 4.25118C8.81026 4.25118 8.25115 4.8103 8.25115 5.5C8.25115 6.1897 8.81026 6.74881 9.49997 6.74881Z"),A(n,"fill","currentColor"),A(n,"fill-rule","evenodd"),A(n,"clip-rule","evenodd"),A(e,"width","15"),A(e,"height","15"),A(e,"viewBox","0 0 15 15"),A(e,"fill","none"),A(e,"xmlns","http://www.w3.org/2000/svg")},m(t,o){x(t,e,o),F(e,n)},p:P,i:P,o:P,d(t){t&&b(e)}}}class u8 extends ue{constructor(e){super(),de(this,e,null,l8,ce,{})}}const d8=i=>({}),nd=i=>({});function $8(i){let e,n;return e=new nf({props:{slot:"rightIcon"}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p:P,i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function f8(i){let e,n;return e=new _n({props:{class:"edit-item__filespan",size:1,filepath:i[0].relPath,$$slots:{rightIcon:[$8]},$$scope:{ctx:i}}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p(t,o){const r={};1&o&&(r.filepath=t[0].relPath),1024&o&&(r.$$scope={dirty:o,ctx:t}),e.$set(r)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function m8(i){let e,n;return e=new Ne({props:{delayDurationMs:1500,triggerOn:[Je.Hover],content:i[0].relPath,$$slots:{default:[f8]},$$scope:{ctx:i}}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p(t,o){const r={};1&o&&(r.content=t[0].relPath),1025&o&&(r.$$scope={dirty:o,ctx:t}),e.$set(r)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function od(i){let e,n;return e=new ht({props:{size:1,variant:"ghost",color:"neutral",$$slots:{default:[g8]},$$scope:{ctx:i}}}),e.$on("click",function(){Nt(i[5])&&i[5].apply(this,arguments)}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p(t,o){i=t;const r={};1026&o&&(r.$$scope={dirty:o,ctx:i}),e.$set(r)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function p8(i){let e,n;return e=new tf({props:{totalAddedLines:i[1].totalAddedLines,totalRemovedLines:i[1].totalRemovedLines}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p(t,o){const r={};2&o&&(r.totalAddedLines=t[1].totalAddedLines),2&o&&(r.totalRemovedLines=t[1].totalRemovedLines),e.$set(r)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function g8(i){let e,n;return e=new Ne({props:{triggerOn:[Je.Hover],content:"View Diff",$$slots:{default:[p8]},$$scope:{ctx:i}}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p(t,o){const r={};1026&o&&(r.$$scope={dirty:o,ctx:t}),e.$set(r)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function rd(i){let e,n,t,o,r=i[8]&&id(i),s=i[6]&&sd(i),c=i[7]&&ad(i);return{c(){e=L("div"),r&&r.c(),n=B(),s&&s.c(),t=B(),c&&c.c(),A(e,"class","edit-item__controls-container")},m(a,l){x(a,e,l),r&&r.m(e,null),F(e,n),s&&s.m(e,null),F(e,t),c&&c.m(e,null),o=!0},p(a,l){a[8]?r?(r.p(a,l),256&l&&d(r,1)):(r=id(a),r.c(),d(r,1),r.m(e,n)):r&&(j(),$(r,1,1,()=>{r=null}),q()),a[6]?s?(s.p(a,l),64&l&&d(s,1)):(s=sd(a),s.c(),d(s,1),s.m(e,t)):s&&(j(),$(s,1,1,()=>{s=null}),q()),a[7]?c?(c.p(a,l),128&l&&d(c,1)):(c=ad(a),c.c(),d(c,1),c.m(e,null)):c&&(j(),$(c,1,1,()=>{c=null}),q())},i(a){o||(d(r),d(s),d(c),o=!0)},o(a){$(r),$(s),$(c),o=!1},d(a){a&&b(e),r&&r.d(),s&&s.d(),c&&c.d()}}}function id(i){let e,n,t,o;const r=[v8,h8],s=[];function c(a,l){return a[3]?0:1}return e=c(i),n=s[e]=r[e](i),{c(){n.c(),t=me()},m(a,l){s[e].m(a,l),x(a,t,l),o=!0},p(a,l){let u=e;e=c(a),e===u?s[e].p(a,l):(j(),$(s[u],1,1,()=>{s[u]=null}),q(),n=s[e],n?n.p(a,l):(n=s[e]=r[e](a),n.c()),d(n,1),n.m(t.parentNode,t))},i(a){o||(d(n),o=!0)},o(a){$(n),o=!1},d(a){a&&b(t),s[e].d(a)}}}function h8(i){let e,n;return e=new dt({props:{size:1,variant:"ghost",color:"neutral",$$slots:{default:[x8]},$$scope:{ctx:i}}}),e.$on("click",function(){Nt(i[8])&&i[8].apply(this,arguments)}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p(t,o){i=t;const r={};1028&o&&(r.$$scope={dirty:o,ctx:i}),e.$set(r)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function v8(i){let e,n;return e=new Ne({props:{triggerOn:[Je.Hover],content:"Changes applied",class:"edit-item__controls-container__applied",$$slots:{default:[C8]},$$scope:{ctx:i}}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p(t,o){const r={};1024&o&&(r.$$scope={dirty:o,ctx:t}),e.$set(r)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function w8(i){let e,n;return e=new u8({}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function y8(i){let e,n;return e=new or({}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function b8(i){let e,n,t,o;const r=[y8,w8],s=[];function c(a,l){return a[2]?0:1}return e=c(i),n=s[e]=r[e](i),{c(){n.c(),t=me()},m(a,l){s[e].m(a,l),x(a,t,l),o=!0},p(a,l){let u=e;e=c(a),e!==u&&(j(),$(s[u],1,1,()=>{s[u]=null}),q(),n=s[e],n||(n=s[e]=r[e](a),n.c()),d(n,1),n.m(t.parentNode,t))},i(a){o||(d(n),o=!0)},o(a){$(n),o=!1},d(a){a&&b(t),s[e].d(a)}}}function x8(i){let e,n;return e=new Ne({props:{triggerOn:[Je.Hover],content:i[2]?"Applying changes...":"Apply changes",$$slots:{default:[b8]},$$scope:{ctx:i}}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p(t,o){const r={};4&o&&(r.content=t[2]?"Applying changes...":"Apply changes"),1028&o&&(r.$$scope={dirty:o,ctx:t}),e.$set(r)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function _8(i){let e,n,t;return n=new To({}),{c(){e=G(`Applied
              `),v(n.$$.fragment)},m(o,r){x(o,e,r),w(n,o,r),t=!0},i(o){t||(d(n.$$.fragment,o),t=!0)},o(o){$(n.$$.fragment,o),t=!1},d(o){o&&b(e),y(n,o)}}}function C8(i){let e,n;return e=new Ge({props:{size:1,$$slots:{default:[_8]},$$scope:{ctx:i}}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p(t,o){const r={};1024&o&&(r.$$scope={dirty:o,ctx:t}),e.$set(r)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function sd(i){let e,n;return e=new dt({props:{size:1,variant:"ghost",color:"neutral",$$slots:{default:[M8]},$$scope:{ctx:i}}}),e.$on("click",function(){Nt(i[6])&&i[6].apply(this,arguments)}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p(t,o){i=t;const r={};1024&o&&(r.$$scope={dirty:o,ctx:i}),e.$set(r)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function A8(i){let e,n;return e=new Ep({}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function M8(i){let e,n;return e=new Ne({props:{triggerOn:[Je.Hover],content:"Open File",$$slots:{default:[A8]},$$scope:{ctx:i}}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p(t,o){const r={};1024&o&&(r.$$scope={dirty:o,ctx:t}),e.$set(r)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function ad(i){let e,n;return e=new dt({props:{size:1,variant:"ghost",color:"neutral",$$slots:{default:[S8]},$$scope:{ctx:i}}}),e.$on("click",function(){Nt(i[7])&&i[7].apply(this,arguments)}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p(t,o){i=t;const r={};1024&o&&(r.$$scope={dirty:o,ctx:i}),e.$set(r)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function k8(i){let e,n;return e=new Wr({}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function S8(i){let e,n;return e=new Ne({props:{triggerOn:[Je.Hover],content:"Undo Changes",$$slots:{default:[k8]},$$scope:{ctx:i}}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p(t,o){const r={};1024&o&&(r.$$scope={dirty:o,ctx:t}),e.$set(r)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function T8(i){let e,n,t,o,r,s,c;t=new ht({props:{class:"edit-item__file-button",size:1,variant:i[4]?"soft":"ghost",color:i[4]?"accent":"neutral",$$slots:{default:[m8]},$$scope:{ctx:i}}}),t.$on("click",function(){Nt(i[5])&&i[5].apply(this,arguments)});const a=i[9].actions,l=Ye(a,i,i[10],nd);let u=i[1]&&od(i),f=(i[8]||i[6]||i[7])&&rd(i);return{c(){e=L("div"),n=L("div"),v(t.$$.fragment),o=B(),l&&l.c(),r=B(),u&&u.c(),s=B(),f&&f.c(),A(n,"class","edit-item__info-container"),A(e,"class","edit-item__container svelte-11cbs0v"),ke(e,"edit-item__container--focused",i[4])},m(m,p){x(m,e,p),F(e,n),w(t,n,null),F(e,o),l&&l.m(e,null),F(e,r),u&&u.m(e,null),F(e,s),f&&f.m(e,null),c=!0},p(m,[p]){i=m;const _={};16&p&&(_.variant=i[4]?"soft":"ghost"),16&p&&(_.color=i[4]?"accent":"neutral"),1025&p&&(_.$$scope={dirty:p,ctx:i}),t.$set(_),l&&l.p&&(!c||1024&p)&&Ke(l,a,i,i[10],c?Ze(a,i[10],p,d8):Xe(i[10]),nd),i[1]?u?(u.p(i,p),2&p&&d(u,1)):(u=od(i),u.c(),d(u,1),u.m(e,s)):u&&(j(),$(u,1,1,()=>{u=null}),q()),i[8]||i[6]||i[7]?f?(f.p(i,p),448&p&&d(f,1)):(f=rd(i),f.c(),d(f,1),f.m(e,null)):f&&(j(),$(f,1,1,()=>{f=null}),q()),(!c||16&p)&&ke(e,"edit-item__container--focused",i[4])},i(m){c||(d(t.$$.fragment,m),d(l,m),d(u),d(f),c=!0)},o(m){$(t.$$.fragment,m),$(l,m),$(u),$(f),c=!1},d(m){m&&b(e),y(t),l&&l.d(m),u&&u.d(),f&&f.d()}}}function E8(i,e,n){let{$$slots:t={},$$scope:o}=e,{qualifiedPathName:r}=e,{lineChanges:s}=e,{isApplyPending:c=!1}=e,{hasApplied:a=!1}=e,{isFocused:l=!1}=e,{onClickReview:u}=e,{onClickFile:f}=e,{onClickRevert:m}=e,{onApplyChanges:p}=e;return i.$$set=_=>{"qualifiedPathName"in _&&n(0,r=_.qualifiedPathName),"lineChanges"in _&&n(1,s=_.lineChanges),"isApplyPending"in _&&n(2,c=_.isApplyPending),"hasApplied"in _&&n(3,a=_.hasApplied),"isFocused"in _&&n(4,l=_.isFocused),"onClickReview"in _&&n(5,u=_.onClickReview),"onClickFile"in _&&n(6,f=_.onClickFile),"onClickRevert"in _&&n(7,m=_.onClickRevert),"onApplyChanges"in _&&n(8,p=_.onApplyChanges),"$$scope"in _&&n(10,o=_.$$scope)},[r,s,c,a,l,u,f,m,p,t,o]}class am extends ue{constructor(e){super(),de(this,e,E8,T8,ce,{qualifiedPathName:0,lineChanges:1,isApplyPending:2,hasApplied:3,isFocused:4,onClickReview:5,onClickFile:6,onClickRevert:7,onApplyChanges:8})}}function I8(i){let e,n,t=[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 448 512"},i[0]],o={};for(let r=0;r<t.length;r+=1)o=Me(o,t[r]);return{c(){e=rt("svg"),n=new en(!0),this.h()},l(r){e=tn(r,"svg",{xmlns:!0,"data-ds-icon":!0,viewBox:!0});var s=nn(e);n=on(s,!0),s.forEach(b),this.h()},h(){n.a=null,ut(e,o)},m(r,s){rn(r,e,s),n.m('<!--! Font Awesome Pro 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2024 Fonticons, Inc.--><path d="M337 81c9.4-9.4 9.4-24.6 0-33.9s-24.6-9.4-33.9 0l-143 143L97 127c-9.4-9.4-24.6-9.4-33.9 0s-9.4 24.6 0 33.9l80 80c9.4 9.4 24.6 9.4 33.9 0zm104 120c9.4-9.4 9.4-24.6 0-33.9s-24.6-9.4-33.9 0l-247 247L41 295c-9.4-9.4-24.6-9.4-33.9 0s-9.4 24.6 0 33.9L143 465c9.4 9.4 24.6 9.4 33.9 0z"/>',e)},p(r,[s]){ut(e,o=Mt(t,[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 448 512"},1&s&&r[0]]))},i:P,o:P,d(r){r&&b(e)}}}function L8(i,e,n){return i.$$set=t=>{n(0,e=Me(Me({},e),it(t)))},[e=it(e)]}class cm extends ue{constructor(e){super(),de(this,e,L8,I8,ce,{})}}function R8(i){let e,n,t=[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 512 512"},i[0]],o={};for(let r=0;r<t.length;r+=1)o=Me(o,t[r]);return{c(){e=rt("svg"),n=new en(!0),this.h()},l(r){e=tn(r,"svg",{xmlns:!0,"data-ds-icon":!0,viewBox:!0});var s=nn(e);n=on(s,!0),s.forEach(b),this.h()},h(){n.a=null,ut(e,o)},m(r,s){rn(r,e,s),n.m('<!--! Font Awesome Pro 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2024 Fonticons, Inc.--><path d="M135 369c9.4 9.4 24.6 9.4 33.9 0s9.4-24.6 0-33.9l-87-87L424 248c22.1 0 40 17.9 40 40v168c0 13.3 10.7 24 24 24s24-10.7 24-24V288c0-48.6-39.4-88-88-88H81.9l87-87c9.4-9.4 9.4-24.6 0-33.9s-24.6-9.4-33.9 0L7 207c-9.4 9.4-9.4 24.6 0 33.9z"/>',e)},p(r,[s]){ut(e,o=Mt(t,[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 512 512"},1&s&&r[0]]))},i:P,o:P,d(r){r&&b(e)}}}function D8(i,e,n){return i.$$set=t=>{n(0,e=Me(Me({},e),it(t)))},[e=it(e)]}class lm extends ue{constructor(e){super(),de(this,e,D8,R8,ce,{})}}function N8(i){let e,n,t;return e=new lm({}),{c(){v(e.$$.fragment),n=G(`
      Discard All`)},m(o,r){w(e,o,r),x(o,n,r),t=!0},i(o){t||(d(e.$$.fragment,o),t=!0)},o(o){$(e.$$.fragment,o),t=!1},d(o){o&&b(n),y(e,o)}}}function P8(i){let e,n;return e=new Ne({props:{triggerOn:[Je.Hover],content:i[0]?"Discard all changes":"No changes to undo",$$slots:{default:[N8]},$$scope:{ctx:i}}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p(t,o){const r={};1&o&&(r.content=t[0]?"Discard all changes":"No changes to undo"),32&o&&(r.$$scope={dirty:o,ctx:t}),e.$set(r)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function F8(i){let e,n,t;return e=new cm({}),{c(){v(e.$$.fragment),n=G(`
      Keep All`)},m(o,r){w(e,o,r),x(o,n,r),t=!0},i(o){t||(d(e.$$.fragment,o),t=!0)},o(o){$(e.$$.fragment,o),t=!1},d(o){o&&b(n),y(e,o)}}}function O8(i){let e,n;return e=new Ne({props:{triggerOn:[Je.Hover],content:i[0]?"Keep all changes and clear checkpoints":"No changes to keep",$$slots:{default:[F8]},$$scope:{ctx:i}}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p(t,o){const r={};1&o&&(r.content=t[0]?"Keep all changes and clear checkpoints":"No changes to keep"),32&o&&(r.$$scope={dirty:o,ctx:t}),e.$set(r)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function z8(i){let e,n,t,o,r;return n=new ht({props:{class:"c-bottom-controls__revert-btn",variant:"soft",color:"neutral",size:1,disabled:!i[0],$$slots:{default:[P8]},$$scope:{ctx:i}}}),n.$on("click",i[2]),o=new ht({props:{class:"c-bottom-controls__accept-btn",variant:"soft",color:"success",size:1,disabled:!i[0],$$slots:{default:[O8]},$$scope:{ctx:i}}}),o.$on("click",i[3]),{c(){e=L("div"),v(n.$$.fragment),t=B(),v(o.$$.fragment),A(e,"class","c-bottom-controls svelte-1pc5clx")},m(s,c){x(s,e,c),w(n,e,null),F(e,t),w(o,e,null),r=!0},p(s,[c]){const a={};1&c&&(a.disabled=!s[0]),33&c&&(a.$$scope={dirty:c,ctx:s}),n.$set(a);const l={};1&c&&(l.disabled=!s[0]),33&c&&(l.$$scope={dirty:c,ctx:s}),o.$set(l)},i(s){r||(d(n.$$.fragment,s),d(o.$$.fragment,s),r=!0)},o(s){$(n.$$.fragment,s),$(o.$$.fragment,s),r=!1},d(s){s&&b(e),y(n),y(o)}}}function B8(i,e,n){let t;const o=Se("checkpointStore"),{targetCheckpointHasChanges:r}=o;return Te(i,r,s=>n(0,t=s)),[t,r,async function(){await o.rejectAll()},async function(){await o.acceptAll()}]}class U8 extends ue{constructor(e){super(),de(this,e,B8,z8,ce,{})}}function cd(i,e,n){const t=i.slice();return t[30]=e[n],t}function ld(i){let e,n,t,o;function r(c){i[25](c)}let s={class:"c-agent-edits-container__block-container",$$slots:{footer:[G8],header:[V8],default:[W8]},$$scope:{ctx:i}};return i[6]!==void 0&&(s.collapsed=i[6]),n=new qs({props:s}),et.push(()=>Et(n,"collapsed",r)),{c(){e=L("div"),v(n.$$.fragment),A(e,"class","c-agent-edits-container svelte-fdz1jv")},m(c,a){x(c,e,a),w(n,e,null),o=!0},p(c,a){const l={};197&a[0]|4&a[1]&&(l.$$scope={dirty:a,ctx:c}),!t&&64&a[0]&&(t=!0,l.collapsed=c[6],Rt(()=>t=!1)),n.$set(l)},i(c){o||(d(n.$$.fragment,c),o=!0)},o(c){$(n.$$.fragment,c),o=!1},d(c){c&&b(e),y(n)}}}function H8(i){let e,n,t;return n=new Ge({props:{size:1,color:"neutral",$$slots:{default:[q8]},$$scope:{ctx:i}}}),{c(){e=L("div"),v(n.$$.fragment),A(e,"class","c-edits-list c-edits-list--empty svelte-fdz1jv")},m(o,r){x(o,e,r),w(n,e,null),t=!0},p(o,r){const s={};4&r[1]&&(s.$$scope={dirty:r,ctx:o}),n.$set(s)},i(o){t||(d(n.$$.fragment,o),t=!0)},o(o){$(n.$$.fragment,o),t=!1},d(o){o&&b(e),y(n)}}}function j8(i){let e,n,t,o=at(i[0]),r=[];for(let c=0;c<o.length;c+=1)r[c]=ud(cd(i,o,c));const s=c=>$(r[c],1,1,()=>{r[c]=null});return{c(){e=L("div"),n=L("div");for(let c=0;c<r.length;c+=1)r[c].c();A(n,"class","c-edits-section svelte-fdz1jv"),A(e,"class","c-edits-list svelte-fdz1jv")},m(c,a){x(c,e,a),F(e,n);for(let l=0;l<r.length;l+=1)r[l]&&r[l].m(n,null);t=!0},p(c,a){if(229377&a[0]){let l;for(o=at(c[0]),l=0;l<o.length;l+=1){const u=cd(c,o,l);r[l]?(r[l].p(u,a),d(r[l],1)):(r[l]=ud(u),r[l].c(),d(r[l],1),r[l].m(n,null))}for(j(),l=o.length;l<r.length;l+=1)s(l);q()}},i(c){if(!t){for(let a=0;a<o.length;a+=1)d(r[a]);t=!0}},o(c){r=r.filter(Boolean);for(let a=0;a<r.length;a+=1)$(r[a]);t=!1},d(c){c&&b(e),pn(r,c)}}}function q8(i){let e;return{c(){e=G("No changes to show")},m(n,t){x(n,e,t)},d(n){n&&b(e)}}}function ud(i){let e,n;function t(){return i[22](i[30])}function o(){return i[23](i[30])}function r(){return i[24](i[30])}return e=new am({props:{qualifiedPathName:i[30].qualifiedPathName,lineChanges:i[30].changesSummary,onClickFile:t,onClickReview:o,onClickRevert:r}}),{c(){v(e.$$.fragment)},m(s,c){w(e,s,c),n=!0},p(s,c){i=s;const a={};1&c[0]&&(a.qualifiedPathName=i[30].qualifiedPathName),1&c[0]&&(a.lineChanges=i[30].changesSummary),1&c[0]&&(a.onClickFile=t),1&c[0]&&(a.onClickReview=o),1&c[0]&&(a.onClickRevert=r),e.$set(a)},i(s){n||(d(e.$$.fragment,s),n=!0)},o(s){$(e.$$.fragment,s),n=!1},d(s){y(e,s)}}}function W8(i){let e,n,t,o;const r=[j8,H8],s=[];function c(a,l){return a[0].length>0?0:1}return e=c(i),n=s[e]=r[e](i),{c(){n.c(),t=me()},m(a,l){s[e].m(a,l),x(a,t,l),o=!0},p(a,l){let u=e;e=c(a),e===u?s[e].p(a,l):(j(),$(s[u],1,1,()=>{s[u]=null}),q(),n=s[e],n?n.p(a,l):(n=s[e]=r[e](a),n.c()),d(n,1),n.m(t.parentNode,t))},i(a){o||(d(n),o=!0)},o(a){$(n),o=!1},d(a){a&&b(t),s[e].d(a)}}}function V8(i){let e,n;return e=new fm({props:{filesCount:i[0].length,diffSummary:i[2],collapsed:i[6],hasChanges:i[7],onRevert:i[18],onKeep:i[19],slot:"header"}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p(t,o){const r={};1&o[0]&&(r.filesCount=t[0].length),4&o[0]&&(r.diffSummary=t[2]),64&o[0]&&(r.collapsed=t[6]),128&o[0]&&(r.hasChanges=t[7]),e.$set(r)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function G8(i){let e,n;return e=new U8({props:{slot:"footer"}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p:P,i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function Y8(i){let e,n,t=(i[3]&&i[4]>0&&i[0].length>0||i[5])&&ld(i);return{c(){t&&t.c(),e=me()},m(o,r){t&&t.m(o,r),x(o,e,r),n=!0},p(o,r){o[3]&&o[4]>0&&o[0].length>0||o[5]?t?(t.p(o,r),57&r[0]&&d(t,1)):(t=ld(o),t.c(),d(t,1),t.m(e.parentNode,e)):t&&(j(),$(t,1,1,()=>{t=null}),q())},i(o){n||(d(t),n=!0)},o(o){$(t),n=!1},d(o){o&&b(e),t&&t.d(o)}}}function aE(i){if(!i)return"";if(i===Number.MAX_SAFE_INTEGER)return"Now";const e=new Date(i),n=new Date,t=e.getHours(),o=`${t%12||12}:${e.getMinutes().toString().padStart(2,"0")}${t>=12?"PM":"AM"}`,r=Math.floor((n.getTime()-e.getTime())/864e5);return r===0?o:r===1?`Yesterday at ${o}`:`${r} days ago at ${o}`}function K8(i,e,n){let t,o,r,s,c,a,l,u,f,m,p,_=P;i.$$.on_destroy.push(()=>_());const M=Se("chatModel");Te(i,M,Z=>n(20,c=Z));const C=Se("agentConversationModel"),T=Se("checkpointStore"),E=Se(mo.key),{targetCheckpointSummary:R,totalCheckpointCount:N,targetCheckpoint:J,targetCheckpointHasChanges:Q}=T;Te(i,R,Z=>n(21,a=Z)),Te(i,N,Z=>n(4,u=Z)),Te(i,J,Z=>n(26,s=Z)),Te(i,Q,Z=>n(7,p=Z));const{isCurrConversationAgentic:X}=C;Te(i,X,Z=>n(3,l=Z));const{canShowTaskList:K}=E;function H(Z){M.extensionClient.openFile({repoRoot:Z.rootPath,pathName:Z.relPath,allowOutOfWorkspace:!0})}function Y(Z){const re=C.getBaselineTimestamp();M.extensionClient.showAgentReview(Z,re,s==null?void 0:s.toTimestamp,!1,!0)}function V(Z){const re=C.getBaselineTimestamp();T.revertDocumentToTimestamp(Z,re)}return Te(i,K,Z=>n(5,f=Z)),i.$$.update=()=>{2097152&i.$$.dirty[0]&&n(0,t=a.filter(Z=>Z.changesSummary&&(Z.changesSummary.totalAddedLines>0||Z.changesSummary.totalRemovedLines>0))),1&i.$$.dirty[0]&&n(2,o=t.reduce((Z,re)=>{var le,oe;return Z.totalAddedLines+=((le=re.changesSummary)==null?void 0:le.totalAddedLines)??0,Z.totalRemovedLines+=((oe=re.changesSummary)==null?void 0:oe.totalRemovedLines)??0,Z},{totalAddedLines:0,totalRemovedLines:0})),1048576&i.$$.dirty[0]&&(n(1,r=c.isPanelCollapsed),_(),_=lt(r,Z=>n(6,m=Z)))},[t,r,o,l,u,f,m,p,M,R,N,J,Q,X,K,H,Y,V,async function(){await T.rejectAll()},async function(){await T.acceptAll()},c,a,Z=>H(Z.qualifiedPathName),Z=>Y(Z.qualifiedPathName),Z=>V(Z.qualifiedPathName),function(Z){m=Z,r.set(m)}]}class X8 extends ue{constructor(e){super(),de(this,e,K8,Y8,ce,{},null,[-1,-1])}}function Z8(i){let e,n,t=[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 128 512"},i[0]],o={};for(let r=0;r<t.length;r+=1)o=Me(o,t[r]);return{c(){e=rt("svg"),n=new en(!0),this.h()},l(r){e=tn(r,"svg",{xmlns:!0,"data-ds-icon":!0,viewBox:!0});var s=nn(e);n=on(s,!0),s.forEach(b),this.h()},h(){n.a=null,ut(e,o)},m(r,s){rn(r,e,s),n.m('<!--! Font Awesome Pro 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2024 Fonticons, Inc.--><path d="M64 368a48 48 0 1 0 0 96 48 48 0 1 0 0-96m0-160a48 48 0 1 0 0 96 48 48 0 1 0 0-96m48-112a48 48 0 1 0-96 0 48 48 0 1 0 96 0"/>',e)},p(r,[s]){ut(e,o=Mt(t,[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 128 512"},1&s&&r[0]]))},i:P,o:P,d(r){r&&b(e)}}}function J8(i,e,n){return i.$$set=t=>{n(0,e=Me(Me({},e),it(t)))},[e=it(e)]}class Q8 extends ue{constructor(e){super(),de(this,e,J8,Z8,ce,{})}}function e_(i){let e,n,t=[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 512 512"},i[0]],o={};for(let r=0;r<t.length;r+=1)o=Me(o,t[r]);return{c(){e=rt("svg"),n=new en(!0),this.h()},l(r){e=tn(r,"svg",{xmlns:!0,"data-ds-icon":!0,viewBox:!0});var s=nn(e);n=on(s,!0),s.forEach(b),this.h()},h(){n.a=null,ut(e,o)},m(r,s){rn(r,e,s),n.m('<!--! Font Awesome Pro 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2024 Fonticons, Inc.--><path d="M448 464H192c-8.8 0-16-7.2-16-16v-80h-48v80c0 35.3 28.7 64 64 64h256c35.3 0 64-28.7 64-64V154.5c0-17-6.7-33.3-18.7-45.3l-90.6-90.5C390.7 6.7 374.5 0 357.5 0H192c-35.3 0-64 28.7-64 64v192h48V64c0-8.8 7.2-16 16-16h160v80c0 17.7 14.3 32 32 32h80v288c0 8.8-7.2 16-16 16M297 215c-9.4-9.4-24.6-9.4-33.9 0s-9.4 24.6 0 33.9l39 39L24 288c-13.3 0-24 10.7-24 24s10.7 24 24 24h278.1l-39 39c-9.4 9.4-9.4 24.6 0 33.9s24.6 9.4 33.9 0l80-80c9.4-9.4 9.4-24.6 0-33.9z"/>',e)},p(r,[s]){ut(e,o=Mt(t,[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 512 512"},1&s&&r[0]]))},i:P,o:P,d(r){r&&b(e)}}}function t_(i,e,n){return i.$$set=t=>{n(0,e=Me(Me({},e),it(t)))},[e=it(e)]}class n_ extends ue{constructor(e){super(),de(this,e,t_,e_,ce,{})}}function o_(i){let e,n,t=[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 576 512"},i[0]],o={};for(let r=0;r<t.length;r+=1)o=Me(o,t[r]);return{c(){e=rt("svg"),n=new en(!0),this.h()},l(r){e=tn(r,"svg",{xmlns:!0,"data-ds-icon":!0,viewBox:!0});var s=nn(e);n=on(s,!0),s.forEach(b),this.h()},h(){n.a=null,ut(e,o)},m(r,s){rn(r,e,s),n.m('<!--! Font Awesome Pro 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2024 Fonticons, Inc.--><path d="M336 448c0 8.8-7.2 16-16 16H64c-8.8 0-16-7.2-16-16V64c0-8.8 7.2-16 16-16h160v80c0 17.7 14.3 32 32 32h80v96h48V154.5c0-17-6.7-33.3-18.7-45.3l-90.6-90.5C262.7 6.7 246.5 0 229.5 0H64C28.7 0 0 28.7 0 64v384c0 35.3 28.7 64 64 64h256c35.3 0 64-28.7 64-64v-80h-48zm153-233c-9.4-9.4-24.6-9.4-33.9 0s-9.4 24.6 0 33.9l39 39-278.1.1c-13.3 0-24 10.7-24 24s10.7 24 24 24h278.1l-39 39c-9.4 9.4-9.4 24.6 0 33.9s24.6 9.4 33.9 0l80-80c9.4-9.4 9.4-24.6 0-33.9z"/>',e)},p(r,[s]){ut(e,o=Mt(t,[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 576 512"},1&s&&r[0]]))},i:P,o:P,d(r){r&&b(e)}}}function r_(i,e,n){return i.$$set=t=>{n(0,e=Me(Me({},e),it(t)))},[e=it(e)]}class i_ extends ue{constructor(e){super(),de(this,e,r_,o_,ce,{})}}function s_(i){let e,n,t=[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 512 512"},i[0]],o={};for(let r=0;r<t.length;r+=1)o=Me(o,t[r]);return{c(){e=rt("svg"),n=new en(!0),this.h()},l(r){e=tn(r,"svg",{xmlns:!0,"data-ds-icon":!0,viewBox:!0});var s=nn(e);n=on(s,!0),s.forEach(b),this.h()},h(){n.a=null,ut(e,o)},m(r,s){rn(r,e,s),n.m('<!--! Font Awesome Pro 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2024 Fonticons, Inc.--><path d="M208 416c0-26.5-21.5-48-48-48H64c-8.8 0-16-7.2-16-16V64c0-8.8 7.2-16 16-16h384c8.8 0 16 7.2 16 16v288c0 8.8-7.2 16-16 16H309.3c-10.4 0-20.5 3.4-28.8 9.6L208 432zm-.2 76.2.2-.2 101.3-76H448c35.3 0 64-28.7 64-64V64c0-35.3-28.7-64-64-64H64C28.7 0 0 28.7 0 64v288c0 35.3 28.7 64 64 64h96v80c0 6.1 3.4 11.6 8.8 14.3s11.9 2.1 16.8-1.5l17.1-12.8zM232 296c0 13.3 10.7 24 24 24s24-10.7 24-24v-64h64c13.3 0 24-10.7 24-24s-10.7-24-24-24h-64v-64c0-13.3-10.7-24-24-24s-24 10.7-24 24v64h-64c-13.3 0-24 10.7-24 24s10.7 24 24 24h64z"/>',e)},p(r,[s]){ut(e,o=Mt(t,[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 512 512"},1&s&&r[0]]))},i:P,o:P,d(r){r&&b(e)}}}function a_(i,e,n){return i.$$set=t=>{n(0,e=Me(Me({},e),it(t)))},[e=it(e)]}class um extends ue{constructor(e){super(),de(this,e,a_,s_,ce,{})}}function c_(i){let e,n;return e=new Q8({}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function l_(i){let e,n;return e=new go({props:{size:1}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function u_(i){let e,n,t,o;const r=[l_,c_],s=[];function c(a,l){return a[1]?0:1}return e=c(i),n=s[e]=r[e](i),{c(){n.c(),t=me()},m(a,l){s[e].m(a,l),x(a,t,l),o=!0},p(a,l){let u=e;e=c(a),e!==u&&(j(),$(s[u],1,1,()=>{s[u]=null}),q(),n=s[e],n||(n=s[e]=r[e](a),n.c()),d(n,1),n.m(t.parentNode,t))},i(a){o||(d(n),o=!0)},o(a){$(n),o=!1},d(a){a&&b(t),s[e].d(a)}}}function d_(i){let e,n;return e=new dt({props:{size:1,variant:"ghost-block",color:"neutral",disabled:i[1],$$slots:{default:[u_]},$$scope:{ctx:i}}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p(t,o){const r={};2&o&&(r.disabled=t[1]),1026&o&&(r.$$scope={dirty:o,ctx:t}),e.$set(r)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function $_(i){let e,n;return e=new Ne({props:{content:"More Actions",triggerOn:[Je.Hover],$$slots:{default:[d_]},$$scope:{ctx:i}}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p(t,o){const r={};1026&o&&(r.$$scope={dirty:o,ctx:t}),e.$set(r)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function f_(i){let e;return{c(){e=G("Import/Export")},m(n,t){x(n,e,t)},d(n){n&&b(e)}}}function m_(i){let e;return{c(){e=G("Export to Markdown")},m(n,t){x(n,e,t)},d(n){n&&b(e)}}}function p_(i){let e,n;return e=new i_({props:{slot:"iconLeft"}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p:P,i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function g_(i){let e;return{c(){e=G("Import from Markdown")},m(n,t){x(n,e,t)},d(n){n&&b(e)}}}function h_(i){let e,n;return e=new n_({props:{slot:"iconLeft"}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p:P,i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function v_(i){let e;return{c(){e=G("Continue in New Chat")},m(n,t){x(n,e,t)},d(n){n&&b(e)}}}function w_(i){let e,n;return e=new um({props:{slot:"iconLeft"}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p:P,i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function y_(i){let e,n,t,o,r,s,c,a;return e=new we.Label({props:{$$slots:{default:[f_]},$$scope:{ctx:i}}}),t=new we.Item({props:{onSelect:i[3],disabled:i[1],$$slots:{iconLeft:[p_],default:[m_]},$$scope:{ctx:i}}}),r=new we.Item({props:{onSelect:i[4],disabled:i[1],$$slots:{iconLeft:[h_],default:[g_]},$$scope:{ctx:i}}}),c=new we.Item({props:{onSelect:i[5],$$slots:{iconLeft:[w_],default:[v_]},$$scope:{ctx:i}}}),{c(){v(e.$$.fragment),n=B(),v(t.$$.fragment),o=B(),v(r.$$.fragment),s=B(),v(c.$$.fragment)},m(l,u){w(e,l,u),x(l,n,u),w(t,l,u),x(l,o,u),w(r,l,u),x(l,s,u),w(c,l,u),a=!0},p(l,u){const f={};1024&u&&(f.$$scope={dirty:u,ctx:l}),e.$set(f);const m={};2&u&&(m.disabled=l[1]),1024&u&&(m.$$scope={dirty:u,ctx:l}),t.$set(m);const p={};2&u&&(p.disabled=l[1]),1024&u&&(p.$$scope={dirty:u,ctx:l}),r.$set(p);const _={};1024&u&&(_.$$scope={dirty:u,ctx:l}),c.$set(_)},i(l){a||(d(e.$$.fragment,l),d(t.$$.fragment,l),d(r.$$.fragment,l),d(c.$$.fragment,l),a=!0)},o(l){$(e.$$.fragment,l),$(t.$$.fragment,l),$(r.$$.fragment,l),$(c.$$.fragment,l),a=!1},d(l){l&&(b(n),b(o),b(s)),y(e,l),y(t,l),y(r,l),y(c,l)}}}function b_(i){let e,n,t,o;return e=new we.Trigger({props:{$$slots:{default:[$_]},$$scope:{ctx:i}}}),t=new we.Content({props:{size:1,side:"bottom",align:"end",$$slots:{default:[y_]},$$scope:{ctx:i}}}),{c(){v(e.$$.fragment),n=B(),v(t.$$.fragment)},m(r,s){w(e,r,s),x(r,n,s),w(t,r,s),o=!0},p(r,s){const c={};1026&s&&(c.$$scope={dirty:s,ctx:r}),e.$set(c);const a={};1026&s&&(a.$$scope={dirty:s,ctx:r}),t.$set(a)},i(r){o||(d(e.$$.fragment,r),d(t.$$.fragment,r),o=!0)},o(r){$(e.$$.fragment,r),$(t.$$.fragment,r),o=!1},d(r){r&&b(n),y(e,r),y(t,r)}}}function x_(i){let e,n,t;function o(s){i[6](s)}let r={$$slots:{default:[b_]},$$scope:{ctx:i}};return i[0]!==void 0&&(r.requestClose=i[0]),e=new we.Root({props:r}),et.push(()=>Et(e,"requestClose",o)),{c(){v(e.$$.fragment)},m(s,c){w(e,s,c),t=!0},p(s,[c]){const a={};1026&c&&(a.$$scope={dirty:c,ctx:s}),!n&&1&c&&(n=!0,a.requestClose=s[0],Rt(()=>n=!1)),e.$set(a)},i(s){t||(d(e.$$.fragment,s),t=!0)},o(s){$(e.$$.fragment,s),t=!1},d(s){y(e,s)}}}function __(i,e,n){let t;const o=Se(mo.key),{isImportingExporting:r,rootTask:s}=o;Te(i,r,l=>n(1,t=l));const c=Se("chatModel");let a;return[a,t,r,async function(){if(t)return;const l=ot(s),u=Or(l),f={action:Pr.exportTaskList,totalTasksCount:u.total,triggeredBy:Fr.user},m=c.currentConversationModel.chatHistory,p=m.length>0&&m[m.length-1].request_id||c.currentConversationModel.id;c.currentConversationModel.extensionClient.reportAgentSessionEvent({eventName:Mo.taskListUsage,conversationId:p,eventData:{taskListUsageData:f}}),await o.exportTasksToMarkdown(),a==null||a()},async function(){if(t)return;const l=ot(s),u=Or(l),f={action:Pr.importTaskList,totalTasksCount:u.total,triggeredBy:Fr.user},m=c.currentConversationModel.chatHistory,p=m.length>0&&m[m.length-1].request_id||c.currentConversationModel.id;c.currentConversationModel.extensionClient.reportAgentSessionEvent({eventName:Mo.taskListUsage,conversationId:p,eventData:{taskListUsageData:f}}),await o.importTasksFromMarkdown(),a==null||a()},async function(){const l=ot(s);if(!l)return;const u=c.currentConversationId,f=await o.cloneHydratedTask(l);u===c.currentConversationId&&f&&await c.setCurrentConversation(void 0,!0,{newTaskUuid:f.uuid}),a==null||a()},function(l){a=l,n(0,a)}]}class C_ extends ue{constructor(e){super(),de(this,e,__,x_,ce,{})}}function A_(i){let e,n,t=[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 512 512"},i[0]],o={};for(let r=0;r<t.length;r+=1)o=Me(o,t[r]);return{c(){e=rt("svg"),n=new en(!0),this.h()},l(r){e=tn(r,"svg",{xmlns:!0,"data-ds-icon":!0,viewBox:!0});var s=nn(e);n=on(s,!0),s.forEach(b),this.h()},h(){n.a=null,ut(e,o)},m(r,s){rn(r,e,s),n.m('<!--! Font Awesome Pro 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2024 Fonticons, Inc.--><path d="M41.2 64C18.5 64 0 82.5 0 105.2c0 10.4 3.9 20.4 11 28.1l93 100.1v126c0 13.4 6.7 26 18 33.4l75.5 49.8c5.3 3.5 11.6 5.4 18 5.4 18 0 32.6-14.6 32.6-32.6v-182l93-100.1c7.1-7.6 11-17.6 11-28.1C352 82.5 333.5 64 310.8 64zm104.4 143.7L56.8 112h238.5l-88.8 95.7c-4.1 4.4-6.4 10.3-6.4 16.3v162.8l-48-31.7L152 224c0-6.1-2.3-11.9-6.4-16.3M344 392c-13.3 0-24 10.7-24 24s10.7 24 24 24h144c13.3 0 24-10.7 24-24s-10.7-24-24-24zm-24-136c0 13.3 10.7 24 24 24h144c13.3 0 24-10.7 24-24s-10.7-24-24-24H344c-13.3 0-24 10.7-24 24m88-184c-13.3 0-24 10.7-24 24s10.7 24 24 24h80c13.3 0 24-10.7 24-24s-10.7-24-24-24z"/>',e)},p(r,[s]){ut(e,o=Mt(t,[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 512 512"},1&s&&r[0]]))},i:P,o:P,d(r){r&&b(e)}}}function M_(i,e,n){return i.$$set=t=>{n(0,e=Me(Me({},e),it(t)))},[e=it(e)]}class k_ extends ue{constructor(e){super(),de(this,e,M_,A_,ce,{})}}function S_(i){let e,n,t;return n=new zs({}),{c(){e=L("span"),v(n.$$.fragment),A(e,"class","c-task-check-icon svelte-9rlaen")},m(o,r){x(o,e,r),w(n,e,null),t=!0},p:P,i(o){t||(d(n.$$.fragment,o),t=!0)},o(o){$(n.$$.fragment,o),t=!1},d(o){o&&b(e),y(n)}}}class T_ extends ue{constructor(e){super(),de(this,e,null,S_,ce,{})}}function dd(i,e,n){const t=i.slice();t[11]=e[n];const o=t[0].has(t[11].value);return t[12]=o,t}function E_(i){let e,n;return e=new k_({}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function I_(i){let e,n;return e=new dt({props:{size:1,variant:i[3]?"soft":"ghost-block",color:i[3]?"accent":"neutral",$$slots:{default:[E_]},$$scope:{ctx:i}}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p(t,o){const r={};8&o&&(r.variant=t[3]?"soft":"ghost-block"),8&o&&(r.color=t[3]?"accent":"neutral"),32768&o&&(r.$$scope={dirty:o,ctx:t}),e.$set(r)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function L_(i){let e,n;return e=new Ne({props:{content:"Filter Tasks",triggerOn:[Je.Hover],$$slots:{default:[I_]},$$scope:{ctx:i}}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p(t,o){const r={};32776&o&&(r.$$scope={dirty:o,ctx:t}),e.$set(r)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function R_(i){let e;return{c(){e=G("Select All")},m(n,t){x(n,e,t)},d(n){n&&b(e)}}}function D_(i){let e;return{c(){e=G("Clear All")},m(n,t){x(n,e,t)},d(n){n&&b(e)}}}function N_(i){let e,n,t,o,r=i[11].label+"",s=i[11].count+"";return{c(){e=G(r),n=G(" ("),t=G(s),o=G(")")},m(c,a){x(c,e,a),x(c,n,a),x(c,t,a),x(c,o,a)},p(c,a){2&a&&r!==(r=c[11].label+"")&&_e(e,r),2&a&&s!==(s=c[11].count+"")&&_e(t,s)},d(c){c&&(b(e),b(n),b(t),b(o))}}}function P_(i){let e,n,t;return e=new Ge({props:{size:1,color:i[12]?"neutral":"secondary",$$slots:{default:[N_]},$$scope:{ctx:i}}}),{c(){v(e.$$.fragment),n=B()},m(o,r){w(e,o,r),x(o,n,r),t=!0},p(o,r){const s={};3&r&&(s.color=o[12]?"neutral":"secondary"),32770&r&&(s.$$scope={dirty:r,ctx:o}),e.$set(s)},i(o){t||(d(e.$$.fragment,o),t=!0)},o(o){$(e.$$.fragment,o),t=!1},d(o){o&&b(n),y(e,o)}}}function F_(i){let e,n;return e=new lp({props:{taskState:i[11].value,size:1}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p(t,o){const r={};2&o&&(r.taskState=t[11].value),e.$set(r)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function O_(i){let e,n;return e=new T_({}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p:P,i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function z_(i){let e,n,t,o;const r=[O_,F_],s=[];function c(a,l){return a[12]?0:1}return e=c(i),n=s[e]=r[e](i),{c(){n.c(),t=B()},m(a,l){s[e].m(a,l),x(a,t,l),o=!0},p(a,l){let u=e;e=c(a),e===u?s[e].p(a,l):(j(),$(s[u],1,1,()=>{s[u]=null}),q(),n=s[e],n?n.p(a,l):(n=s[e]=r[e](a),n.c()),d(n,1),n.m(t.parentNode,t))},i(a){o||(d(n),o=!0)},o(a){$(n),o=!1},d(a){a&&b(t),s[e].d(a)}}}function $d(i){let e,n;function t(){return i[9](i[11])}return e=new we.Item({props:{onSelect:t,$$slots:{iconLeft:[z_],default:[P_]},$$scope:{ctx:i}}}),{c(){v(e.$$.fragment)},m(o,r){w(e,o,r),n=!0},p(o,r){i=o;const s={};2&r&&(s.onSelect=t),32771&r&&(s.$$scope={dirty:r,ctx:i}),e.$set(s)},i(o){n||(d(e.$$.fragment,o),n=!0)},o(o){$(e.$$.fragment,o),n=!1},d(o){y(e,o)}}}function B_(i){let e,n,t,o,r,s,c,a;e=new we.Item({props:{onSelect:i[7],$$slots:{default:[R_]},$$scope:{ctx:i}}}),t=new we.Item({props:{onSelect:i[8],$$slots:{default:[D_]},$$scope:{ctx:i}}}),r=new we.Separator({});let l=at(i[1]),u=[];for(let m=0;m<l.length;m+=1)u[m]=$d(dd(i,l,m));const f=m=>$(u[m],1,1,()=>{u[m]=null});return{c(){v(e.$$.fragment),n=B(),v(t.$$.fragment),o=B(),v(r.$$.fragment),s=B();for(let m=0;m<u.length;m+=1)u[m].c();c=me()},m(m,p){w(e,m,p),x(m,n,p),w(t,m,p),x(m,o,p),w(r,m,p),x(m,s,p);for(let _=0;_<u.length;_+=1)u[_]&&u[_].m(m,p);x(m,c,p),a=!0},p(m,p){const _={};32768&p&&(_.$$scope={dirty:p,ctx:m}),e.$set(_);const M={};if(32768&p&&(M.$$scope={dirty:p,ctx:m}),t.$set(M),19&p){let C;for(l=at(m[1]),C=0;C<l.length;C+=1){const T=dd(m,l,C);u[C]?(u[C].p(T,p),d(u[C],1)):(u[C]=$d(T),u[C].c(),d(u[C],1),u[C].m(c.parentNode,c))}for(j(),C=l.length;C<u.length;C+=1)f(C);q()}},i(m){if(!a){d(e.$$.fragment,m),d(t.$$.fragment,m),d(r.$$.fragment,m);for(let p=0;p<l.length;p+=1)d(u[p]);a=!0}},o(m){$(e.$$.fragment,m),$(t.$$.fragment,m),$(r.$$.fragment,m),u=u.filter(Boolean);for(let p=0;p<u.length;p+=1)$(u[p]);a=!1},d(m){m&&(b(n),b(o),b(s),b(c)),y(e,m),y(t,m),y(r,m),pn(u,m)}}}function U_(i){let e,n,t,o;return e=new we.Trigger({props:{$$slots:{default:[L_]},$$scope:{ctx:i}}}),t=new we.Content({props:{side:"bottom",align:"start",size:1,$$slots:{default:[B_]},$$scope:{ctx:i}}}),{c(){v(e.$$.fragment),n=B(),v(t.$$.fragment)},m(r,s){w(e,r,s),x(r,n,s),w(t,r,s),o=!0},p(r,s){const c={};32776&s&&(c.$$scope={dirty:s,ctx:r}),e.$set(c);const a={};32771&s&&(a.$$scope={dirty:s,ctx:r}),t.$set(a)},i(r){o||(d(e.$$.fragment,r),d(t.$$.fragment,r),o=!0)},o(r){$(e.$$.fragment,r),$(t.$$.fragment,r),o=!1},d(r){r&&b(n),y(e,r),y(t,r)}}}function H_(i){let e,n,t;function o(s){i[10](s)}let r={$$slots:{default:[U_]},$$scope:{ctx:i}};return i[2]!==void 0&&(r.requestClose=i[2]),e=new we.Root({props:r}),et.push(()=>Et(e,"requestClose",o)),{c(){v(e.$$.fragment)},m(s,c){w(e,s,c),t=!0},p(s,[c]){const a={};32779&c&&(a.$$scope={dirty:c,ctx:s}),!n&&4&c&&(n=!0,a.requestClose=s[2],Rt(()=>n=!1)),e.$set(a)},i(s){t||(d(e.$$.fragment,s),t=!0)},o(s){$(e.$$.fragment,s),t=!1},d(s){y(e,s)}}}function j_(i,e,n){let t,o,{taskFilters:r=[]}=e,{activeTaskFilter:s=new Set}=e;function c(u){const f=new Set(s);f.has(u)?f.delete(u):f.add(u),n(0,s=f)}function a(){const u=r.map(f=>f.value);n(0,s=new Set(u))}function l(){n(0,s=new Set)}return i.$$set=u=>{"taskFilters"in u&&n(1,r=u.taskFilters),"activeTaskFilter"in u&&n(0,s=u.activeTaskFilter)},i.$$.update=()=>{3&i.$$.dirty&&n(3,t=s.size===0||s.size<r.length)},[s,r,o,t,c,a,l,()=>a(),()=>l(),u=>{c(u.value)},function(u){o=u,n(2,o)}]}class q_ extends ue{constructor(e){super(),de(this,e,j_,H_,ce,{taskFilters:1,activeTaskFilter:0})}}function fd(i){let e,n,t,o,r,s=i[5]&&i[5].total>0&&md(i);const c=[K_,Y_,G_],a=[];function l(u,f){return u[6]?0:u[5]&&u[5].completed===u[5].total&&u[5].total>0?1:u[2]&&u[2].name?2:-1}return~(t=l(i))&&(o=a[t]=c[t](i)),{c(){e=L("div"),s&&s.c(),n=B(),o&&o.c(),A(e,"class","c-task-list-header__status svelte-qt9z9m")},m(u,f){x(u,e,f),s&&s.m(e,null),F(e,n),~t&&a[t].m(e,null),r=!0},p(u,f){u[5]&&u[5].total>0?s?(s.p(u,f),32&f&&d(s,1)):(s=md(u),s.c(),d(s,1),s.m(e,n)):s&&(j(),$(s,1,1,()=>{s=null}),q());let m=t;t=l(u),t===m?~t&&a[t].p(u,f):(o&&(j(),$(a[m],1,1,()=>{a[m]=null}),q()),~t?(o=a[t],o?o.p(u,f):(o=a[t]=c[t](u),o.c()),d(o,1),o.m(e,null)):o=null)},i(u){r||(d(s),d(o),r=!0)},o(u){$(s),$(o),r=!1},d(u){u&&b(e),s&&s.d(),~t&&a[t].d()}}}function md(i){let e,n;return e=new Ne({props:{triggerOn:[Je.Hover],content:"Completed "+i[5].completed+" of "+i[5].total+" tasks",$$slots:{default:[V_]},$$scope:{ctx:i}}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p(t,o){const r={};32&o&&(r.content="Completed "+t[5].completed+" of "+t[5].total+" tasks"),524320&o&&(r.$$scope={dirty:o,ctx:t}),e.$set(r)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function W_(i){let e,n,t,o=i[5].completed+"",r=i[5].total+"";return{c(){e=G(o),n=G("/"),t=G(r)},m(s,c){x(s,e,c),x(s,n,c),x(s,t,c)},p(s,c){32&c&&o!==(o=s[5].completed+"")&&_e(e,o),32&c&&r!==(r=s[5].total+"")&&_e(t,r)},d(s){s&&(b(e),b(n),b(t))}}}function V_(i){let e,n;return e=new up({props:{color:i[5].completed===i[5].total?"success":"info",size:1,$$slots:{default:[W_]},$$scope:{ctx:i}}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p(t,o){const r={};32&o&&(r.color=t[5].completed===t[5].total?"success":"info"),524320&o&&(r.$$scope={dirty:o,ctx:t}),e.$set(r)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function G_(i){let e,n;return e=new Ge({props:{size:1,color:"neutral",class:"c-task-list-header__task-name",$$slots:{default:[X_]},$$scope:{ctx:i}}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p(t,o){const r={};524292&o&&(r.$$scope={dirty:o,ctx:t}),e.$set(r)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function Y_(i){let e,n;return e=new Ge({props:{size:1,color:"primary",class:"c-task-list-header__task-name",$$slots:{default:[Z_]},$$scope:{ctx:i}}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p(t,o){const r={};524288&o&&(r.$$scope={dirty:o,ctx:t}),e.$set(r)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function K_(i){let e,n;return e=new Ge({props:{size:1,color:"primary",class:"c-task-list-header__task-name",$$slots:{default:[J_]},$$scope:{ctx:i}}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p(t,o){const r={};524352&o&&(r.$$scope={dirty:o,ctx:t}),e.$set(r)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function X_(i){let e,n=i[2].name+"";return{c(){e=G(n)},m(t,o){x(t,e,o)},p(t,o){4&o&&n!==(n=t[2].name+"")&&_e(e,n)},d(t){t&&b(e)}}}function Z_(i){let e;return{c(){e=G("All tasks complete")},m(n,t){x(n,e,t)},d(n){n&&b(e)}}}function J_(i){let e,n=(i[6].name||"Untitled Task")+"";return{c(){e=G(n)},m(t,o){x(t,e,o)},p(t,o){64&o&&n!==(n=(t[6].name||"Untitled Task")+"")&&_e(e,n)},d(t){t&&b(e)}}}function pd(i){let e,n;return e=new Ne({props:{content:"Run All Tasks",triggerOn:[Je.Hover],$$slots:{default:[eC]},$$scope:{ctx:i}}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p(t,o){const r={};524292&o&&(r.$$scope={dirty:o,ctx:t}),e.$set(r)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function Q_(i){let e,n;return e=new Ip({}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function eC(i){let e,n;return e=new dt({props:{size:1,variant:"ghost-block",color:"neutral",disabled:!1,$$slots:{default:[Q_]},$$scope:{ctx:i}}}),e.$on("click",i[17]),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p(t,o){const r={};524288&o&&(r.$$scope={dirty:o,ctx:t}),e.$set(r)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function tC(i){let e,n;return e=new Ts({}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function nC(i){let e,n;return e=new dt({props:{size:1,variant:"ghost-block",color:"neutral",disabled:!i[2],$$slots:{default:[tC]},$$scope:{ctx:i}}}),e.$on("click",i[12]),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p(t,o){const r={};4&o&&(r.disabled=!t[2]),524288&o&&(r.$$scope={dirty:o,ctx:t}),e.$set(r)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function oC(i){let e,n,t,o,r,s,c,a,l,u,f,m,p,_,M,C,T,E;o=new _f({}),c=new $m({});let R=i[1]&&fd(i),N=i[4]&&pd(i);function J(X){i[18](X)}m=new Ne({props:{content:"Add New Task",triggerOn:[Je.Hover],$$slots:{default:[nC]},$$scope:{ctx:i}}});let Q={taskFilters:i[3]};return i[0]!==void 0&&(Q.activeTaskFilter=i[0]),_=new q_({props:Q}),et.push(()=>Et(_,"activeTaskFilter",J)),T=new C_({}),{c(){e=L("div"),n=L("div"),t=L("div"),v(o.$$.fragment),r=B(),s=L("div"),v(c.$$.fragment),a=B(),R&&R.c(),l=B(),u=L("div"),N&&N.c(),f=B(),v(m.$$.fragment),p=B(),v(_.$$.fragment),C=B(),v(T.$$.fragment),A(t,"class","c-task-list-header__collapse-btn svelte-qt9z9m"),A(s,"class","c-task-list-header__switch-btn svelte-qt9z9m"),A(n,"class","c-task-list-header__content svelte-qt9z9m"),A(u,"class","c-task-list-header__actions svelte-qt9z9m"),A(e,"class","c-task-list-header svelte-qt9z9m")},m(X,K){x(X,e,K),F(e,n),F(n,t),w(o,t,null),F(n,r),F(n,s),w(c,s,null),F(n,a),R&&R.m(n,null),F(e,l),F(e,u),N&&N.m(u,null),F(u,f),w(m,u,null),F(u,p),w(_,u,null),F(u,C),w(T,u,null),E=!0},p(X,[K]){X[1]?R?(R.p(X,K),2&K&&d(R,1)):(R=fd(X),R.c(),d(R,1),R.m(n,null)):R&&(j(),$(R,1,1,()=>{R=null}),q()),X[4]?N?(N.p(X,K),16&K&&d(N,1)):(N=pd(X),N.c(),d(N,1),N.m(u,f)):N&&(j(),$(N,1,1,()=>{N=null}),q());const H={};524292&K&&(H.$$scope={dirty:K,ctx:X}),m.$set(H);const Y={};8&K&&(Y.taskFilters=X[3]),!M&&1&K&&(M=!0,Y.activeTaskFilter=X[0],Rt(()=>M=!1)),_.$set(Y)},i(X){E||(d(o.$$.fragment,X),d(c.$$.fragment,X),d(R),d(N),d(m.$$.fragment,X),d(_.$$.fragment,X),d(T.$$.fragment,X),E=!0)},o(X){$(o.$$.fragment,X),$(c.$$.fragment,X),$(R),$(N),$(m.$$.fragment,X),$(_.$$.fragment,X),$(T.$$.fragment,X),E=!1},d(X){X&&b(e),y(o),y(c),R&&R.d(),N&&N.d(),y(m),y(_),y(T)}}}function rC(i,e,n){let t,o,r,s,c,{notStartedTasksCount:a=0}=e,{inProgressTasksCount:l=0}=e,{completedTasksCount:u=0}=e,{cancelledTasksCount:f=0}=e,{collapsed:m=!1}=e;const p=Se(mo.key),_=Se("chatModel"),{rootTask:M,activeTask:C,taskProgress:T}=p;Te(i,M,R=>n(2,r=R)),Te(i,C,R=>n(6,c=R)),Te(i,T,R=>n(5,s=R));let{activeTaskFilter:E=new Set}=e;return i.$$set=R=>{"notStartedTasksCount"in R&&n(13,a=R.notStartedTasksCount),"inProgressTasksCount"in R&&n(14,l=R.inProgressTasksCount),"completedTasksCount"in R&&n(15,u=R.completedTasksCount),"cancelledTasksCount"in R&&n(16,f=R.cancelledTasksCount),"collapsed"in R&&n(1,m=R.collapsed),"activeTaskFilter"in R&&n(0,E=R.activeTaskFilter)},i.$$.update=()=>{4&i.$$.dirty&&n(4,t=(r==null?void 0:r.subTasksData)&&r.subTasksData.length>0),122880&i.$$.dirty&&n(3,o=[{value:Xn.NOT_STARTED,label:hi(Xn.NOT_STARTED),count:a},{value:Xn.IN_PROGRESS,label:hi(Xn.IN_PROGRESS),count:l},{value:Xn.COMPLETE,label:hi(Xn.COMPLETE),count:u},{value:Xn.CANCELLED,label:hi(Xn.CANCELLED),count:f}])},[E,m,r,o,t,s,c,p,_,M,C,T,async function(){if(r){const R=Or(r),N={action:Pr.addSubtask,totalTasksCount:R.total,triggeredBy:Fr.user};_.currentConversationModel.extensionClient.reportAgentSessionEvent({eventName:Mo.taskListUsage,conversationId:_.currentConversationModel.id,eventData:{taskListUsageData:N}});const J=await p.createTask("","",r.uuid);setTimeout(()=>{const Q=document.getElementById(`task-${J}`),X=Q==null?void 0:Q.querySelector(".c-task-tree-item__name-editable"),K=X==null?void 0:X.querySelector("input");K==null||K.focus()},100)}},a,l,u,f,()=>{const R=Or(r),N={action:Pr.runAllTasks,totalTasksCount:R.total,triggeredBy:Fr.user};_.currentConversationModel.extensionClient.reportAgentSessionEvent({eventName:Mo.taskListUsage,conversationId:_.currentConversationModel.id,eventData:{taskListUsageData:N}}),p.runAllTasks()},function(R){E=R,n(0,E)}]}class iC extends ue{constructor(e){super(),de(this,e,rC,oC,ce,{notStartedTasksCount:13,inProgressTasksCount:14,completedTasksCount:15,cancelledTasksCount:16,collapsed:1,activeTaskFilter:0})}}function gd(i){let e,n,t,o;function r(c){i[17](c)}let s={class:"c-task-list-container__block-container",$$slots:{header:[uC],default:[lC]},$$scope:{ctx:i}};return i[9]!==void 0&&(s.collapsed=i[9]),n=new qs({props:s}),et.push(()=>Et(n,"collapsed",r)),{c(){e=L("div"),v(n.$$.fragment),A(e,"class","c-task-list-container svelte-yamkbz")},m(c,a){x(c,e,a),w(n,e,null),o=!0},p(c,a){const l={};2097789&a&&(l.$$scope={dirty:a,ctx:c}),!t&&512&a&&(t=!0,l.collapsed=c[9],Rt(()=>t=!1)),n.$set(l)},i(c){o||(d(n.$$.fragment,c),o=!0)},o(c){$(n.$$.fragment,c),o=!1},d(c){c&&b(e),y(n)}}}function sC(i){let e,n,t;return n=new Ge({props:{size:1,color:"neutral",$$slots:{default:[cC]},$$scope:{ctx:i}}}),{c(){e=L("div"),v(n.$$.fragment),A(e,"class","c-tasks-list c-tasks-list--empty svelte-yamkbz")},m(o,r){x(o,e,r),w(n,e,null),t=!0},p(o,r){const s={};2097152&r&&(s.$$scope={dirty:r,ctx:o}),n.$set(s)},i(o){t||(d(n.$$.fragment,o),t=!0)},o(o){$(n.$$.fragment,o),t=!1},d(o){o&&b(e),y(n)}}}function aC(i){let e,n,t;return n=new $p({props:{task:i[6],taskStore:i[11],editable:!0}}),{c(){e=L("div"),v(n.$$.fragment),A(e,"class","c-tasks-list svelte-yamkbz")},m(o,r){x(o,e,r),w(n,e,null),t=!0},p(o,r){const s={};64&r&&(s.task=o[6]),n.$set(s)},i(o){t||(d(n.$$.fragment,o),t=!0)},o(o){$(n.$$.fragment,o),t=!1},d(o){o&&b(e),y(n)}}}function cC(i){let e;return{c(){e=G("No tasks to show")},m(n,t){x(n,e,t)},d(n){n&&b(e)}}}function lC(i){let e,n,t,o;const r=[aC,sC],s=[];function c(a,l){var u,f;return(u=a[6])!=null&&u.isVisible&&((f=a[6].subTasksData)!=null&&f.length)?0:1}return e=c(i),n=s[e]=r[e](i),{c(){n.c(),t=me()},m(a,l){s[e].m(a,l),x(a,t,l),o=!0},p(a,l){let u=e;e=c(a),e===u?s[e].p(a,l):(j(),$(s[u],1,1,()=>{s[u]=null}),q(),n=s[e],n?n.p(a,l):(n=s[e]=r[e](a),n.c()),d(n,1),n.m(t.parentNode,t))},i(a){o||(d(n),o=!0)},o(a){$(n),o=!1},d(a){a&&b(t),s[e].d(a)}}}function uC(i){let e,n,t;function o(s){i[16](s)}let r={notStartedTasksCount:i[5],inProgressTasksCount:i[4],completedTasksCount:i[3],cancelledTasksCount:i[2],collapsed:i[9],slot:"header"};return i[0]!==void 0&&(r.activeTaskFilter=i[0]),e=new iC({props:r}),et.push(()=>Et(e,"activeTaskFilter",o)),{c(){v(e.$$.fragment)},m(s,c){w(e,s,c),t=!0},p(s,c){const a={};32&c&&(a.notStartedTasksCount=s[5]),16&c&&(a.inProgressTasksCount=s[4]),8&c&&(a.completedTasksCount=s[3]),4&c&&(a.cancelledTasksCount=s[2]),512&c&&(a.collapsed=s[9]),!n&&1&c&&(n=!0,a.activeTaskFilter=s[0],Rt(()=>n=!1)),e.$set(a)},i(s){t||(d(e.$$.fragment,s),t=!0)},o(s){$(e.$$.fragment,s),t=!1},d(s){y(e,s)}}}function dC(i){let e,n,t=i[8]&&i[1]&&gd(i);return{c(){t&&t.c(),e=me()},m(o,r){t&&t.m(o,r),x(o,e,r),n=!0},p(o,[r]){o[8]&&o[1]?t?(t.p(o,r),258&r&&d(t,1)):(t=gd(o),t.c(),d(t,1),t.m(e.parentNode,e)):t&&(j(),$(t,1,1,()=>{t=null}),q())},i(o){n||(d(t),n=!0)},o(o){$(t),n=!1},d(o){o&&b(e),t&&t.d(o)}}}function $C(i,e,n){let t,o,r,s,c,a,l,u,f,m,p,_=P;i.$$.on_destroy.push(()=>_());const M=Se("chatModel");Te(i,M,X=>n(15,f=X));const C=Se("agentConversationModel"),T=Se(mo.key),{isCurrConversationAgentic:E}=C;Te(i,E,X=>n(8,m=X));const{rootTask:R}=T;Te(i,R,X=>n(1,u=X));let N=new Set(Object.values(Xn)),J=!1;function Q(X,K=0){let H={notStarted:0,inProgress:0,completed:0,cancelled:0};if(!X)return H;if(K!==0&&(X.state===Xn.NOT_STARTED?H.notStarted++:X.state===Xn.IN_PROGRESS?H.inProgress++:X.state===Xn.COMPLETE?H.completed++:X.state===Xn.CANCELLED&&H.cancelled++),X.subTasksData&&X.subTasksData.length>0)for(const Y of X.subTasksData){const V=Q(Y,K+1);H.notStarted+=V.notStarted,H.inProgress+=V.inProgress,H.completed+=V.completed,H.cancelled+=V.cancelled}return H}return ro(()=>{const X=ot(R);if(X&&!J){J=!0;const K=Or(X),H={action:Pr.viewTaskList,totalTasksCount:K.total,triggeredBy:Fr.user},Y=M.currentConversationModel.chatHistory,V=Y.length>0&&Y[Y.length-1].request_id||M.currentConversationModel.id;M.currentConversationModel.extensionClient.reportAgentSessionEvent({eventName:Mo.taskListUsage,conversationId:V,eventData:{taskListUsageData:H}})}}),i.$$.update=()=>{32768&i.$$.dirty&&(n(7,t=f.isPanelCollapsed),_(),_=lt(t,X=>n(9,p=X))),3&i.$$.dirty&&n(6,o=u?dp(u,N):void 0),2&i.$$.dirty&&n(14,r=Q(u)),16384&i.$$.dirty&&n(5,s=r.notStarted),16384&i.$$.dirty&&n(4,c=r.inProgress),16384&i.$$.dirty&&n(3,a=r.completed),16384&i.$$.dirty&&n(2,l=r.cancelled)},[N,u,l,a,c,s,o,t,m,p,M,T,E,R,r,f,function(X){N=X,n(0,N)},function(X){p=X,t.set(p)}]}class fC extends ue{constructor(e){super(),de(this,e,$C,dC,ce,{})}}function mC(i){let e,n;return e=new fC({}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function pC(i){let e,n;return e=new X8({}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function gC(i){let e,n,t,o,r;const s=[pC,mC],c=[];function a(l,u){return l[0]===Nn.agentEdits||!l[1]||l[2].isActive?0:l[0]===Nn.tasks?1:-1}return~(t=a(i))&&(o=c[t]=s[t](i)),{c(){e=L("div"),n=L("div"),o&&o.c(),A(n,"class","c-swappable-panel__content svelte-fjwpdg"),A(e,"class","c-swappable-panel svelte-fjwpdg")},m(l,u){x(l,e,u),F(e,n),~t&&c[t].m(n,null),r=!0},p(l,[u]){let f=t;t=a(l),t!==f&&(o&&(j(),$(c[f],1,1,()=>{c[f]=null}),q()),~t?(o=c[t],o||(o=c[t]=s[t](l),o.c()),d(o,1),o.m(n,null)):o=null)},i(l){r||(d(o),r=!0)},o(l){$(o),r=!1},d(l){l&&b(e),~t&&c[t].d()}}}var Nn=(i=>(i.agentEdits="agent_edits",i.tasks="tasks",i))(Nn||{});const dm=Symbol("swappable-panel-context");function hC(i,e,n){let t,o,r;const s=Se(mo.key),{canShowTaskList:c}=s;Te(i,c,u=>n(1,o=u)),Se("chatModel");const a=Se(Tn.key);Te(i,a,u=>n(2,r=u));const l=Tt(Nn.agentEdits);return Te(i,l,u=>n(0,t=u)),Dn(dm,{activePanel:l,togglePanel:()=>{xi(l,t=t===Nn.agentEdits?Nn.tasks:Nn.agentEdits,t)}}),[t,o,r,c,a,l]}class vC extends ue{constructor(e){super(),de(this,e,hC,gC,ce,{})}}function wC(i){let e,n,t;return n=new fp({}),{c(){e=L("div"),v(n.$$.fragment),A(e,"class","c-switch-mode-button__content svelte-1t2edyt")},m(o,r){x(o,e,r),w(n,e,null),t=!0},p:P,i(o){t||(d(n.$$.fragment,o),t=!0)},o(o){$(n.$$.fragment,o),t=!1},d(o){o&&b(e),y(n)}}}function yC(i){let e,n,t;return n=new nf({}),{c(){e=L("div"),v(n.$$.fragment),A(e,"class","c-switch-mode-button__content svelte-1t2edyt")},m(o,r){x(o,e,r),w(n,e,null),t=!0},p:P,i(o){t||(d(n.$$.fragment,o),t=!0)},o(o){$(n.$$.fragment,o),t=!1},d(o){o&&b(e),y(n)}}}function bC(i){let e,n,t,o,r,s;return t=new ht({props:{variant:i[0]===Nn.tasks?"soft":"ghost",color:i[0]===Nn.tasks?"accent":"neutral",size:1,class:"c-switch-mode-button__tasks-btn",$$slots:{default:[wC]},$$scope:{ctx:i}}}),t.$on("click",i[5]),r=new ht({props:{variant:i[0]===Nn.agentEdits?"soft":"ghost",color:i[0]===Nn.agentEdits?"accent":"neutral",size:1,class:"c-switch-mode-button__changes-btn",$$slots:{default:[yC]},$$scope:{ctx:i}}}),r.$on("click",i[5]),{c(){e=L("div"),n=L("div"),v(t.$$.fragment),o=B(),v(r.$$.fragment),A(n,"class","c-switch-mode-button__group svelte-1t2edyt"),A(e,"class","c-switch-mode-button svelte-1t2edyt")},m(c,a){x(c,e,a),F(e,n),w(t,n,null),F(n,o),w(r,n,null),s=!0},p(c,a){const l={};1&a&&(l.variant=c[0]===Nn.tasks?"soft":"ghost"),1&a&&(l.color=c[0]===Nn.tasks?"accent":"neutral"),64&a&&(l.$$scope={dirty:a,ctx:c}),t.$set(l);const u={};1&a&&(u.variant=c[0]===Nn.agentEdits?"soft":"ghost"),1&a&&(u.color=c[0]===Nn.agentEdits?"accent":"neutral"),64&a&&(u.$$scope={dirty:a,ctx:c}),r.$set(u)},i(c){s||(d(t.$$.fragment,c),d(r.$$.fragment,c),s=!0)},o(c){$(t.$$.fragment,c),$(r.$$.fragment,c),s=!1},d(c){c&&b(e),y(t),y(r)}}}function xC(i){let e,n,t=i[2]&&i[3]&&function(o){let r,s;return r=new Ne({props:{content:o[1],triggerOn:[Je.Hover],side:"top",$$slots:{default:[bC]},$$scope:{ctx:o}}}),{c(){v(r.$$.fragment)},m(c,a){w(r,c,a),s=!0},p(c,a){const l={};2&a&&(l.content=c[1]),65&a&&(l.$$scope={dirty:a,ctx:c}),r.$set(l)},i(c){s||(d(r.$$.fragment,c),s=!0)},o(c){$(r.$$.fragment,c),s=!1},d(c){y(r,c)}}}(i);return{c(){t&&t.c(),e=me()},m(o,r){t&&t.m(o,r),x(o,e,r),n=!0},p(o,[r]){o[2]&&o[3]&&t.p(o,r)},i(o){n||(d(t),n=!0)},o(o){$(t),n=!1},d(o){o&&b(e),t&&t.d(o)}}}function _C(i,e,n){let t,o;const r=Se(dm),s=Se(mo.key),c=r==null?void 0:r.activePanel;return Te(i,c,a=>n(0,o=a)),i.$$.update=()=>{1&i.$$.dirty&&n(1,t=o===Nn.agentEdits?"Switch to Tasks view":"Switch to Changes view")},[o,t,r,s,c,async function(){r==null||r.togglePanel()}]}class $m extends ue{constructor(e){super(),de(this,e,_C,xC,ce,{})}}const CC=i=>({}),hd=i=>({}),AC=i=>({}),vd=i=>({});function wd(i){let e,n,t;return n=new $m({}),{c(){e=L("div"),v(n.$$.fragment),A(e,"class","c-agent-edits-header__switch-btn")},m(o,r){x(o,e,r),w(n,e,null),t=!0},i(o){t||(d(n.$$.fragment,o),t=!0)},o(o){$(n.$$.fragment,o),t=!1},d(o){o&&b(e),y(n)}}}function MC(i){let e,n,t,o,r=i[0]===1?"":"s";return{c(){e=G(i[0]),n=G(" file"),t=G(r),o=G(" changed")},m(s,c){x(s,e,c),x(s,n,c),x(s,t,c),x(s,o,c)},p(s,c){1&c&&_e(e,s[0]),1&c&&r!==(r=s[0]===1?"":"s")&&_e(t,r)},d(s){s&&(b(e),b(n),b(t),b(o))}}}function yd(i){let e,n,t;return n=new tf({props:{totalAddedLines:i[1].totalAddedLines,totalRemovedLines:i[1].totalRemovedLines}}),{c(){e=L("div"),v(n.$$.fragment),A(e,"class","c-agent-edits-header__summary")},m(o,r){x(o,e,r),w(n,e,null),t=!0},p(o,r){const s={};2&r&&(s.totalAddedLines=o[1].totalAddedLines),2&r&&(s.totalRemovedLines=o[1].totalRemovedLines),n.$set(s)},i(o){t||(d(n.$$.fragment,o),t=!0)},o(o){$(n.$$.fragment,o),t=!1},d(o){o&&b(e),y(n)}}}function bd(i){let e,n,t,o,r=i[4]&&xd(i),s=i[5]&&_d(i);const c=i[9].actions,a=Ye(c,i,i[10],hd);return{c(){e=L("div"),r&&r.c(),n=B(),s&&s.c(),t=B(),a&&a.c(),A(e,"class","c-agent-edits-header__actions")},m(l,u){x(l,e,u),r&&r.m(e,null),F(e,n),s&&s.m(e,null),F(e,t),a&&a.m(e,null),o=!0},p(l,u){l[4]?r?(r.p(l,u),16&u&&d(r,1)):(r=xd(l),r.c(),d(r,1),r.m(e,n)):r&&(j(),$(r,1,1,()=>{r=null}),q()),l[5]?s?(s.p(l,u),32&u&&d(s,1)):(s=_d(l),s.c(),d(s,1),s.m(e,t)):s&&(j(),$(s,1,1,()=>{s=null}),q()),a&&a.p&&(!o||1024&u)&&Ke(a,c,l,l[10],o?Ze(c,l[10],u,CC):Xe(l[10]),hd)},i(l){o||(d(r),d(s),d(a,l),o=!0)},o(l){$(r),$(s),$(a,l),o=!1},d(l){l&&b(e),r&&r.d(),s&&s.d(),a&&a.d(l)}}}function xd(i){let e,n;return e=new ht({props:{class:"c-agent-edits-header__revert-btn",variant:"soft",color:"neutral",size:1,$$slots:{default:[SC]},$$scope:{ctx:i}}}),e.$on("click",function(){Nt(i[4])&&i[4].apply(this,arguments)}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p(t,o){i=t;const r={};1024&o&&(r.$$scope={dirty:o,ctx:i}),e.$set(r)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function kC(i){let e,n,t,o;return e=new lm({}),{c(){v(e.$$.fragment),n=B(),t=L("span"),t.textContent="Discard All",A(t,"class","c-agent-edits-header__revert-btn__text")},m(r,s){w(e,r,s),x(r,n,s),x(r,t,s),o=!0},p:P,i(r){o||(d(e.$$.fragment,r),o=!0)},o(r){$(e.$$.fragment,r),o=!1},d(r){r&&(b(n),b(t)),y(e,r)}}}function SC(i){let e,n;return e=new Ne({props:{triggerOn:[Je.Hover],content:"Discard all changes",$$slots:{default:[kC]},$$scope:{ctx:i}}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p(t,o){const r={};1024&o&&(r.$$scope={dirty:o,ctx:t}),e.$set(r)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function _d(i){let e,n;return e=new ht({props:{class:"c-agent-edits-header__accept-btn",variant:"soft",color:"success",size:1,$$slots:{default:[EC]},$$scope:{ctx:i}}}),e.$on("click",function(){Nt(i[5])&&i[5].apply(this,arguments)}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p(t,o){i=t;const r={};1024&o&&(r.$$scope={dirty:o,ctx:i}),e.$set(r)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function TC(i){let e,n,t,o;return e=new cm({}),{c(){v(e.$$.fragment),n=B(),t=L("span"),t.textContent="Keep All",A(t,"class","c-agent-edits-header__accept-btn__text")},m(r,s){w(e,r,s),x(r,n,s),x(r,t,s),o=!0},p:P,i(r){o||(d(e.$$.fragment,r),o=!0)},o(r){$(e.$$.fragment,r),o=!1},d(r){r&&(b(n),b(t)),y(e,r)}}}function EC(i){let e,n;return e=new Ne({props:{triggerOn:[Je.Hover],content:"Keep all changes and clear checkpoints",$$slots:{default:[TC]},$$scope:{ctx:i}}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p(t,o){const r={};1024&o&&(r.$$scope={dirty:o,ctx:t}),e.$set(r)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function IC(i){let e,n,t,o,r,s,c,a,l,u;o=new _f({});let f=i[6].enableTaskList&&wd();const m=i[9].text,p=Ye(m,i,i[10],vd),_=p||function(T){let E,R;return E=new Ge({props:{size:1,color:"neutral",$$slots:{default:[MC]},$$scope:{ctx:T}}}),{c(){v(E.$$.fragment)},m(N,J){w(E,N,J),R=!0},p(N,J){const Q={};1025&J&&(Q.$$scope={dirty:J,ctx:N}),E.$set(Q)},i(N){R||(d(E.$$.fragment,N),R=!0)},o(N){$(E.$$.fragment,N),R=!1},d(N){y(E,N)}}}(i);let M=i[3]&&yd(i),C=(i[2]&&i[3]&&(i[4]||i[5])||i[8].actions)&&bd(i);return{c(){e=L("div"),n=L("div"),t=L("div"),v(o.$$.fragment),r=B(),f&&f.c(),s=B(),c=L("div"),_&&_.c(),a=B(),M&&M.c(),l=B(),C&&C.c(),A(t,"class","c-agent-edits-header__collapse-btn"),A(c,"class","c-agent-edits-header__info-container"),A(n,"class","c-agent-edits-header__content"),A(e,"class","c-agent-edits-header svelte-1lfr6nx")},m(T,E){x(T,e,E),F(e,n),F(n,t),w(o,t,null),F(n,r),f&&f.m(n,null),F(n,s),F(n,c),_&&_.m(c,null),F(n,a),M&&M.m(n,null),F(e,l),C&&C.m(e,null),u=!0},p(T,[E]){T[6].enableTaskList?f?64&E&&d(f,1):(f=wd(),f.c(),d(f,1),f.m(n,s)):f&&(j(),$(f,1,1,()=>{f=null}),q()),p?p.p&&(!u||1024&E)&&Ke(p,m,T,T[10],u?Ze(m,T[10],E,AC):Xe(T[10]),vd):_&&_.p&&(!u||1&E)&&_.p(T,u?E:-1),T[3]?M?(M.p(T,E),8&E&&d(M,1)):(M=yd(T),M.c(),d(M,1),M.m(n,null)):M&&(j(),$(M,1,1,()=>{M=null}),q()),T[2]&&T[3]&&(T[4]||T[5])||T[8].actions?C?(C.p(T,E),316&E&&d(C,1)):(C=bd(T),C.c(),d(C,1),C.m(e,null)):C&&(j(),$(C,1,1,()=>{C=null}),q())},i(T){u||(d(o.$$.fragment,T),d(f),d(_,T),d(M),d(C),u=!0)},o(T){$(o.$$.fragment,T),$(f),$(_,T),$(M),$(C),u=!1},d(T){T&&b(e),y(o),f&&f.d(),_&&_.d(T),M&&M.d(),C&&C.d()}}}function LC(i,e,n){let t,{$$slots:o={},$$scope:r}=e;const s=G$(o);let{filesCount:c}=e,{diffSummary:a}=e,{collapsed:l}=e,{hasChanges:u}=e,{onRevert:f}=e,{onKeep:m}=e;const p=Se("chatModel").flags;return Te(i,p,_=>n(6,t=_)),i.$$set=_=>{"filesCount"in _&&n(0,c=_.filesCount),"diffSummary"in _&&n(1,a=_.diffSummary),"collapsed"in _&&n(2,l=_.collapsed),"hasChanges"in _&&n(3,u=_.hasChanges),"onRevert"in _&&n(4,f=_.onRevert),"onKeep"in _&&n(5,m=_.onKeep),"$$scope"in _&&n(10,r=_.$$scope)},[c,a,l,u,f,m,t,p,s,o,r]}class fm extends ue{constructor(e){super(),de(this,e,LC,IC,ce,{filesCount:0,diffSummary:1,collapsed:2,hasChanges:3,onRevert:4,onKeep:5})}}function Cd(i,e,n){const t=i.slice();t[21]=e[n];const o=t[1]===t[21].file.new_path||t[1]===t[21].file.old_path;return t[22]=o,t}function RC(i){let e,n,t;return n=new Ge({props:{size:1,color:"neutral",$$slots:{default:[NC]},$$scope:{ctx:i}}}),{c(){e=L("div"),v(n.$$.fragment),A(e,"class","c-edits-list c-edits-list--empty svelte-ut8b0v")},m(o,r){x(o,e,r),w(n,e,null),t=!0},p(o,r){const s={};33554436&r&&(s.$$scope={dirty:r,ctx:o}),n.$set(s)},i(o){t||(d(n.$$.fragment,o),t=!0)},o(o){$(n.$$.fragment,o),t=!1},d(o){o&&b(e),y(n)}}}function DC(i){let e,n,t,o;function r(c){i[19](c)}let s={class:"c-agent-edits-container__block-container",$$slots:{header:[VC],default:[HC]},$$scope:{ctx:i}};return i[0]!==void 0&&(s.collapsed=i[0]),n=new qs({props:s}),et.push(()=>Et(n,"collapsed",r)),{c(){e=L("div"),v(n.$$.fragment),A(e,"class","c-agent-edits-container svelte-ut8b0v")},m(c,a){x(c,e,a),w(n,e,null),o=!0},p(c,a){const l={};33558523&a&&(l.$$scope={dirty:a,ctx:c}),!t&&1&a&&(t=!0,l.collapsed=c[0],Rt(()=>t=!1)),n.$set(l)},i(c){o||(d(n.$$.fragment,c),o=!0)},o(c){$(n.$$.fragment,c),o=!1},d(c){c&&b(e),y(n)}}}function NC(i){let e;return{c(){e=G(i[2])},m(n,t){x(n,e,t)},p(n,t){4&t&&_e(e,n[2])},d(n){n&&b(e)}}}function Ad(i){let e,n;return e=new Ne({props:{content:"Toggle collapse unchanged regions",triggerOn:[Je.Hover],$$slots:{default:[FC]},$$scope:{ctx:i}}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p(t,o){const r={};33554432&o&&(r.$$scope={dirty:o,ctx:t}),e.$set(r)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function PC(i){let e,n;return e=new Af({props:{icon:"map"}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p:P,i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function FC(i){let e,n;return e=new dt({props:{color:"neutral",size:1,variant:"soft",$$slots:{default:[PC]},$$scope:{ctx:i}}}),e.$on("click",i[13]),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p(t,o){const r={};33554432&o&&(r.$$scope={dirty:o,ctx:t}),e.$set(r)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function OC(i){let e,n,t=i[22]&&Ad(i);return{c(){e=L("div"),t&&t.c(),A(e,"slot","actions")},m(o,r){x(o,e,r),t&&t.m(e,null),n=!0},p(o,r){o[22]?t?(t.p(o,r),386&r&&d(t,1)):(t=Ad(o),t.c(),d(t,1),t.m(e,null)):t&&(j(),$(t,1,1,()=>{t=null}),q())},i(o){n||(d(t),n=!0)},o(o){$(t),n=!1},d(o){o&&b(e),t&&t.d()}}}function Md(i){let e,n,t,o;function r(){return i[16](i[21])}function s(){return i[17](i[21])}function c(){return i[18](i[21])}return n=new am({props:{qualifiedPathName:i[21].qualifiedPathName,lineChanges:i[21].changesSummary,isFocused:i[22],onClickFile:i[3]?r:void 0,onClickReview:i[4]?s:void 0,onClickRevert:i[5]?c:void 0,$$slots:{actions:[OC]},$$scope:{ctx:i}}}),{c(){e=L("div"),v(n.$$.fragment),A(e,"class","c-edit")},m(a,l){x(a,e,l),w(n,e,null),o=!0},p(a,l){i=a;const u={};384&l&&(u.qualifiedPathName=i[21].qualifiedPathName),384&l&&(u.lineChanges=i[21].changesSummary),386&l&&(u.isFocused=i[22]),392&l&&(u.onClickFile=i[3]?r:void 0),400&l&&(u.onClickReview=i[4]?s:void 0),416&l&&(u.onClickRevert=i[5]?c:void 0),33554818&l&&(u.$$scope={dirty:l,ctx:i}),n.$set(u)},i(a){o||(d(n.$$.fragment,a),a&&Pn(()=>{o&&(t||(t=xn(e,po,{},!0)),t.run(1))}),o=!0)},o(a){$(n.$$.fragment,a),a&&(t||(t=xn(e,po,{},!1)),t.run(0)),o=!1},d(a){a&&b(e),y(n),a&&t&&t.end()}}}function kd(i){let e,n,t;return n=new ht({props:{color:"neutral",size:1,variant:"soft",$$slots:{default:[UC]},$$scope:{ctx:i}}}),n.$on("click",i[12]),{c(){e=L("div"),v(n.$$.fragment),A(e,"class","c-show-more-container svelte-ut8b0v")},m(o,r){x(o,e,r),w(n,e,null),t=!0},p(o,r){const s={};33554816&r&&(s.$$scope={dirty:r,ctx:o}),n.$set(s)},i(o){t||(d(n.$$.fragment,o),t=!0)},o(o){$(n.$$.fragment,o),t=!1},d(o){o&&b(e),y(n)}}}function zC(i){let e,n,t,o,r,s,c,a=i[7].length-Hr+"";return s=new Oo({props:{slot:"iconRight"}}),{c(){e=L("span"),n=G("Show "),t=G(a),o=G(" more files"),r=B(),v(s.$$.fragment)},m(l,u){x(l,e,u),F(e,n),F(e,t),F(e,o),x(l,r,u),w(s,l,u),c=!0},p(l,u){(!c||128&u)&&a!==(a=l[7].length-Hr+"")&&_e(t,a)},i(l){c||(d(s.$$.fragment,l),c=!0)},o(l){$(s.$$.fragment,l),c=!1},d(l){l&&(b(e),b(r)),y(s,l)}}}function BC(i){let e,n,t,o;return t=new Z$({props:{slot:"iconRight"}}),{c(){e=L("span"),e.textContent="Show less",n=B(),v(t.$$.fragment)},m(r,s){x(r,e,s),x(r,n,s),w(t,r,s),o=!0},p:P,i(r){o||(d(t.$$.fragment,r),o=!0)},o(r){$(t.$$.fragment,r),o=!1},d(r){r&&(b(e),b(n)),y(t,r)}}}function UC(i){let e,n,t,o;const r=[BC,zC],s=[];function c(a,l){return a[8]?0:1}return e=c(i),n=s[e]=r[e](i),{c(){n.c(),t=me()},m(a,l){s[e].m(a,l),x(a,t,l),o=!0},p(a,l){let u=e;e=c(a),e===u?s[e].p(a,l):(j(),$(s[u],1,1,()=>{s[u]=null}),q(),n=s[e],n?n.p(a,l):(n=s[e]=r[e](a),n.c()),d(n,1),n.m(t.parentNode,t))},i(a){o||(d(n),o=!0)},o(a){$(n),o=!1},d(a){a&&b(t),s[e].d(a)}}}function HC(i){let e,n,t,o,r=at(i[8]?i[7]:i[7].slice(0,Hr)),s=[];for(let l=0;l<r.length;l+=1)s[l]=Md(Cd(i,r,l));const c=l=>$(s[l],1,1,()=>{s[l]=null});let a=i[11]&&kd(i);return{c(){e=L("div"),n=L("div");for(let l=0;l<s.length;l+=1)s[l].c();t=B(),a&&a.c(),A(n,"class","c-edits-section svelte-ut8b0v"),A(e,"class","c-edits-list svelte-ut8b0v")},m(l,u){x(l,e,u),F(e,n);for(let f=0;f<s.length;f+=1)s[f]&&s[f].m(n,null);F(n,t),a&&a.m(n,null),o=!0},p(l,u){if(8634&u){let f;for(r=at(l[8]?l[7]:l[7].slice(0,Hr)),f=0;f<r.length;f+=1){const m=Cd(l,r,f);s[f]?(s[f].p(m,u),d(s[f],1)):(s[f]=Md(m),s[f].c(),d(s[f],1),s[f].m(n,t))}for(j(),f=r.length;f<s.length;f+=1)c(f);q()}l[11]?a?(a.p(l,u),2048&u&&d(a,1)):(a=kd(l),a.c(),d(a,1),a.m(n,null)):a&&(j(),$(a,1,1,()=>{a=null}),q())},i(l){if(!o){for(let u=0;u<r.length;u+=1)d(s[u]);d(a),o=!0}},o(l){s=s.filter(Boolean);for(let u=0;u<s.length;u+=1)$(s[u]);$(a),o=!1},d(l){l&&b(e),pn(s,l),a&&a.d()}}}function jC(i){let e,n,t,o,r;return o=new Af({props:{icon:"diff-multiple"}}),{c(){e=L("div"),e.textContent="See full diff",n=B(),t=L("div"),v(o.$$.fragment),A(e,"class","c-agent-edits-header__buttons__text--long svelte-ut8b0v"),A(t,"class","c-agent-edits-header__buttons__text--short svelte-ut8b0v")},m(s,c){x(s,e,c),x(s,n,c),x(s,t,c),w(o,t,null),r=!0},p:P,i(s){r||(d(o.$$.fragment,s),r=!0)},o(s){$(o.$$.fragment,s),r=!1},d(s){s&&(b(e),b(n),b(t)),y(o)}}}function qC(i){let e,n;return e=new ht({props:{color:"neutral",size:1,variant:"soft",disabled:i[9],$$slots:{default:[jC]},$$scope:{ctx:i}}}),e.$on("click",function(){Nt(i[6])&&i[6].apply(this,arguments)}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p(t,o){i=t;const r={};512&o&&(r.disabled=i[9]),33554432&o&&(r.$$scope={dirty:o,ctx:i}),e.$set(r)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function WC(i){let e,n,t,o,r,s,c,a,l,u,f=i[7].length+"",m=i[7].length===1?"":"s";return l=new Ne({props:{content:i[9]?Ba:void 0,$$slots:{default:[qC]},$$scope:{ctx:i}}}),{c(){e=L("div"),n=L("div"),t=G(f),o=G(" file"),r=G(m),s=G(" changed"),c=B(),a=L("div"),v(l.$$.fragment),A(n,"class","c-agent-edits-header__actions__count"),A(a,"class","c-agent-edits-header__buttons svelte-ut8b0v"),A(e,"class","c-agent-edits-header__actions svelte-ut8b0v"),A(e,"slot","text")},m(p,_){x(p,e,_),F(e,n),F(n,t),F(n,o),F(n,r),F(n,s),F(e,c),F(e,a),w(l,a,null),u=!0},p(p,_){(!u||128&_)&&f!==(f=p[7].length+"")&&_e(t,f),(!u||128&_)&&m!==(m=p[7].length===1?"":"s")&&_e(r,m);const M={};512&_&&(M.content=p[9]?Ba:void 0),33555008&_&&(M.$$scope={dirty:_,ctx:p}),l.$set(M)},i(p){u||(d(l.$$.fragment,p),u=!0)},o(p){$(l.$$.fragment,p),u=!1},d(p){p&&b(e),y(l)}}}function VC(i){let e,n;return e=new fm({props:{filesCount:i[7].length,diffSummary:i[10],collapsed:i[0],hasChanges:!0,slot:"header",$$slots:{text:[WC]},$$scope:{ctx:i}}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p(t,o){const r={};128&o&&(r.filesCount=t[7].length),1024&o&&(r.diffSummary=t[10]),1&o&&(r.collapsed=t[0]),33555136&o&&(r.$$scope={dirty:o,ctx:t}),e.$set(r)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function GC(i){let e,n,t,o;const r=[DC,RC],s=[];function c(a,l){return a[7].length>0?0:1}return e=c(i),n=s[e]=r[e](i),{c(){n.c(),t=me()},m(a,l){s[e].m(a,l),x(a,t,l),o=!0},p(a,[l]){let u=e;e=c(a),e===u?s[e].p(a,l):(j(),$(s[u],1,1,()=>{s[u]=null}),q(),n=s[e],n?n.p(a,l):(n=s[e]=r[e](a),n.c()),d(n,1),n.m(t.parentNode,t))},i(a){o||(d(n),o=!0)},o(a){$(n),o=!1},d(a){a&&b(t),s[e].d(a)}}}const Hr=3;function YC(i,e,n){let t,o,r,s,c,{changedFiles:a=[]}=e,{collapsed:l=!1}=e,{focusedFilePath:u=null}=e,{emptyMessage:f="No changes to show"}=e,{onFileClick:m}=e,{onReviewClick:p}=e,{onRevertClick:_}=e,{onOpenDiffView:M}=e;const C=Se("chatModel");let T=!1;return i.$$set=E=>{"changedFiles"in E&&n(14,a=E.changedFiles),"collapsed"in E&&n(0,l=E.collapsed),"focusedFilePath"in E&&n(1,u=E.focusedFilePath),"emptyMessage"in E&&n(2,f=E.emptyMessage),"onFileClick"in E&&n(3,m=E.onFileClick),"onReviewClick"in E&&n(4,p=E.onReviewClick),"onRevertClick"in E&&n(5,_=E.onRevertClick),"onOpenDiffView"in E&&n(6,M=E.onOpenDiffView)},i.$$.update=()=>{16384&i.$$.dirty&&n(15,o=a.map(E=>{const R=Fa.generateDiff(E.old_path,E.new_path,E.old_contents||"",E.new_contents||""),N=Fa.getDiffObjectStats(R),J={totalAddedLines:N.additions,totalRemovedLines:N.deletions};return{file:E,qualifiedPathName:{rootPath:"",relPath:E.new_path||E.old_path},changesSummary:J}})),32768&i.$$.dirty&&n(7,r=o.filter(E=>E.changesSummary.totalAddedLines>0||E.changesSummary.totalRemovedLines>0)),128&i.$$.dirty&&n(11,t=r.length>Hr),128&i.$$.dirty&&n(10,s=r.reduce((E,R)=>(E.totalAddedLines+=R.changesSummary.totalAddedLines,E.totalRemovedLines+=R.changesSummary.totalRemovedLines,E),{totalAddedLines:0,totalRemovedLines:0})),16384&i.$$.dirty&&n(9,c=a.length>Lp)},[l,u,f,m,p,_,M,r,T,c,s,t,function(){n(8,T=!T)},function(){C.extensionClient.toggleCollapseUnchangedRegions()},a,o,E=>m(E.file.new_path||E.file.old_path),E=>p(E.file),E=>_(E.file),function(E){l=E,n(0,l)}]}class KC extends ue{constructor(e){super(),de(this,e,YC,GC,ce,{changedFiles:14,collapsed:0,focusedFilePath:1,emptyMessage:2,onFileClick:3,onReviewClick:4,onRevertClick:5,onOpenDiffView:6})}}function XC(i){let e,n,t=[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 512 512"},i[0]],o={};for(let r=0;r<t.length;r+=1)o=Me(o,t[r]);return{c(){e=rt("svg"),n=new en(!0),this.h()},l(r){e=tn(r,"svg",{xmlns:!0,"data-ds-icon":!0,viewBox:!0});var s=nn(e);n=on(s,!0),s.forEach(b),this.h()},h(){n.a=null,ut(e,o)},m(r,s){rn(r,e,s),n.m('<!--! Font Awesome Pro 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2024 Fonticons, Inc.--><path d="M305.8 2.1C314.4 5.9 320 14.5 320 24v48h16c66.3 0 120 53.7 120 120v163.7c32.5 10.2 56 40.5 56 76.3 0 44.2-35.8 80-80 80s-80-35.8-80-80c0-35.8 23.5-66.1 56-76.3V192c0-39.8-32.2-72-72-72h-16v48c0 9.5-5.6 18.1-14.2 21.9s-18.8 2.3-25.8-4.1l-80-72c-5.1-4.6-7.9-11-7.9-17.8s2.9-13.3 7.9-17.8l80-72c7-6.3 17.2-7.9 25.8-4.1M112 80a32 32 0 1 0-64 0 32 32 0 1 0 64 0m-8 76.3v199.3c32.5 10.2 56 40.5 56 76.3 0 44.2-35.8 80-80 80s-80-35.8-80-80c0-35.8 23.5-66.1 56-76.3V156.3C23.5 146.1 0 115.8 0 80 0 35.8 35.8 0 80 0s80 35.8 80 80c0 35.8-23.5 66.1-56 76.3m8 275.7a32 32 0 1 0-64 0 32 32 0 1 0 64 0m320 32a32 32 0 1 0 0-64 32 32 0 1 0 0 64"/>',e)},p(r,[s]){ut(e,o=Mt(t,[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 512 512"},1&s&&r[0]]))},i:P,o:P,d(r){r&&b(e)}}}function ZC(i,e,n){return i.$$set=t=>{n(0,e=Me(Me({},e),it(t)))},[e=it(e)]}class JC extends ue{constructor(e){super(),de(this,e,ZC,XC,ce,{})}}function Sd(i){let e,n,t,o,r=i[8].length>0&&Td(i),s=i[10]&&!i[1]&&Ed(i);return{c(){e=L("div"),n=L("div"),r&&r.c(),t=B(),s&&s.c(),A(n,"class","c-agent-footer__status svelte-1fkxsim"),A(e,"class","c-agent-footer svelte-1fkxsim")},m(c,a){x(c,e,a),F(e,n),r&&r.m(n,null),F(e,t),s&&s.m(e,null),o=!0},p(c,a){c[8].length>0?r?(r.p(c,a),256&a&&d(r,1)):(r=Td(c),r.c(),d(r,1),r.m(n,null)):r&&(j(),$(r,1,1,()=>{r=null}),q()),c[10]&&!c[1]?s?(s.p(c,a),1026&a&&d(s,1)):(s=Ed(c),s.c(),d(s,1),s.m(e,null)):s&&(j(),$(s,1,1,()=>{s=null}),q())},i(c){o||(d(r),d(s),o=!0)},o(c){$(r),$(s),o=!1},d(c){c&&b(e),r&&r.d(),s&&s.d()}}}function Td(i){let e,n;return e=new KC({props:{changedFiles:i[8],collapsed:!i[11],focusedFilePath:i[7],emptyMessage:i[9]?"Loading...":"No changes to show",onReviewClick:i[18],onOpenDiffView:i[21],onFileClick:i[6]}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p(t,o){const r={};256&o&&(r.changedFiles=t[8]),2048&o&&(r.collapsed=!t[11]),128&o&&(r.focusedFilePath=t[7]),512&o&&(r.emptyMessage=t[9]?"Loading...":"No changes to show"),4364&o&&(r.onOpenDiffView=t[21]),64&o&&(r.onFileClick=t[6]),e.$set(r)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function Ed(i){let e,n,t,o=i[8].length>0&&Id(i),r=!i[1]&&Ld(i);return{c(){e=L("div"),o&&o.c(),n=B(),r&&r.c(),A(e,"class","c-agent-footer__buttons svelte-1fkxsim")},m(s,c){x(s,e,c),o&&o.m(e,null),F(e,n),r&&r.m(e,null),t=!0},p(s,c){s[8].length>0?o?(o.p(s,c),256&c&&d(o,1)):(o=Id(s),o.c(),d(o,1),o.m(e,n)):o&&(j(),$(o,1,1,()=>{o=null}),q()),s[1]?r&&(j(),$(r,1,1,()=>{r=null}),q()):r?(r.p(s,c),2&c&&d(r,1)):(r=Ld(s),r.c(),d(r,1),r.m(e,null))},i(s){t||(d(o),d(r),t=!0)},o(s){$(o),$(r),t=!1},d(s){s&&b(e),o&&o.d(),r&&r.d()}}}function Id(i){let e,n,t;return n=new Ne({props:{triggerOn:[Je.Hover],content:"Create a GitHub pull request with the changes",$$slots:{default:[o7]},$$scope:{ctx:i}}}),{c(){e=L("div"),v(n.$$.fragment),A(e,"class","c-agent-footer__button svelte-1fkxsim")},m(o,r){x(o,e,r),w(n,e,null),t=!0},p(o,r){const s={};67108884&r&&(s.$$scope={dirty:r,ctx:o}),n.$set(s)},i(o){t||(d(n.$$.fragment,o),t=!0)},o(o){$(n.$$.fragment,o),t=!1},d(o){o&&b(e),y(n)}}}function QC(i){let e;return{c(){e=G("Create a PR")},m(n,t){x(n,e,t)},d(n){n&&b(e)}}}function e7(i){let e;return{c(){e=G("Creating a PR...")},m(n,t){x(n,e,t)},d(n){n&&b(e)}}}function t7(i){let e;function n(r,s){return r[4]?e7:QC}let t=n(i),o=t(i);return{c(){o.c(),e=me()},m(r,s){o.m(r,s),x(r,e,s)},p(r,s){t!==(t=n(r))&&(o.d(1),o=t(r),o&&(o.c(),o.m(e.parentNode,e)))},d(r){r&&b(e),o.d(r)}}}function n7(i){let e,n;return e=new JC({props:{slot:"iconRight"}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p:P,i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function o7(i){var t;let e,n;return e=new ht({props:{size:2,variant:"soft",color:"neutral",class:"c-agent-footer__open-btn",disabled:[Jt.agentUnspecified,Jt.agentPending,Jt.agentStarting].includes((t=i[2])==null?void 0:t.status),$$slots:{iconRight:[n7],default:[t7]},$$scope:{ctx:i}}}),e.$on("click",i[19]),{c(){v(e.$$.fragment)},m(o,r){w(e,o,r),n=!0},p(o,r){var c;const s={};4&r&&(s.disabled=[Jt.agentUnspecified,Jt.agentPending,Jt.agentStarting].includes((c=o[2])==null?void 0:c.status)),67108880&r&&(s.$$scope={dirty:r,ctx:o}),e.$set(s)},i(o){n||(d(e.$$.fragment,o),n=!0)},o(o){$(e.$$.fragment,o),n=!1},d(o){y(e,o)}}}function Ld(i){let e,n,t;return n=new Ne({props:{triggerOn:[Je.Hover],content:"SSH into the remote agent's workspace in a new VSCode window",$$slots:{default:[u7]},$$scope:{ctx:i}}}),{c(){e=L("div"),v(n.$$.fragment),A(e,"class","c-agent-footer__button svelte-1fkxsim")},m(o,r){x(o,e,r),w(n,e,null),t=!0},p(o,r){const s={};67109924&r&&(s.$$scope={dirty:r,ctx:o}),n.$set(s)},i(o){t||(d(n.$$.fragment,o),t=!0)},o(o){$(n.$$.fragment,o),t=!1},d(o){o&&b(e),y(n)}}}function r7(i){let e;return{c(){e=G("Open remote workspace")},m(n,t){x(n,e,t)},d(n){n&&b(e)}}}function i7(i){let e;return{c(){e=G("Connecting...")},m(n,t){x(n,e,t)},d(n){n&&b(e)}}}function s7(i){let e;function n(r,s){return r[5]?i7:r7}let t=n(i),o=t(i);return{c(){o.c(),e=me()},m(r,s){o.m(r,s),x(r,e,s)},p(r,s){t!==(t=n(r))&&(o.d(1),o=t(r),o&&(o.c(),o.m(e.parentNode,e)))},d(r){r&&b(e),o.d(r)}}}function a7(i){let e,n;return e=new mf({}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function c7(i){let e,n;return e=new go({props:{size:1,useCurrentColor:!0}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function l7(i){let e,n,t,o;const r=[c7,a7],s=[];function c(a,l){return a[5]?0:1}return e=c(i),n=s[e]=r[e](i),{c(){n.c(),t=me()},m(a,l){s[e].m(a,l),x(a,t,l),o=!0},p(a,l){let u=e;e=c(a),e!==u&&(j(),$(s[u],1,1,()=>{s[u]=null}),q(),n=s[e],n||(n=s[e]=r[e](a),n.c()),d(n,1),n.m(t.parentNode,t))},i(a){o||(d(n),o=!0)},o(a){$(n),o=!1},d(a){a&&b(t),s[e].d(a)}}}function u7(i){var t;let e,n;return e=new ht({props:{size:2,variant:"soft",color:"accent",class:"c-agent-footer__open-btn",disabled:[Jt.agentUnspecified,Jt.agentPending,Jt.agentStarting].includes((t=i[2])==null?void 0:t.status)||i[5],$$slots:{iconRight:[l7],default:[s7]},$$scope:{ctx:i}}}),e.$on("click",i[22]),{c(){v(e.$$.fragment)},m(o,r){w(e,o,r),n=!0},p(o,r){var c;const s={};36&r&&(s.disabled=[Jt.agentUnspecified,Jt.agentPending,Jt.agentStarting].includes((c=o[2])==null?void 0:c.status)||o[5]),67108896&r&&(s.$$scope={dirty:r,ctx:o}),e.$set(s)},i(o){n||(d(e.$$.fragment,o),n=!0)},o(o){$(e.$$.fragment,o),n=!1},d(o){y(e,o)}}}function d7(i){let e,n,t,o;Pn(i[20]);let r=i[2]&&Sd(i);return{c(){r&&r.c(),e=me()},m(s,c){r&&r.m(s,c),x(s,e,c),n=!0,t||(o=Le(window,"resize",i[20]),t=!0)},p(s,[c]){s[2]?r?(r.p(s,c),4&c&&d(r,1)):(r=Sd(s),r.c(),d(r,1),r.m(e.parentNode,e)):r&&(j(),$(r,1,1,()=>{r=null}),q())},i(s){n||(d(r),n=!0)},o(s){$(r),n=!1},d(s){s&&b(e),r&&r.d(s),t=!1,o()}}}function $7(i,e,n){let t,o,r,s,c,a,l,u,f,m,p;const _=Se(Tn.key);Te(i,_,K=>n(3,f=K));const M=Se("chatModel");Te(i,M,K=>n(23,m=K));const C=Se(of),T=Se(hr.key),E=Tt(""),R=mp(E);Te(i,R,K=>n(12,p=K)),ro(async()=>{try{const{remoteUrl:K,error:H}=await T.getRemoteUrl();if(H)throw new Error(H);E.set(K)}catch(K){console.error("Failed to get current repository URL:",K)}});let N=!1,J=0;async function Q(K){if(!K)return;const H=_.agentOverviews.find(Y=>Y.remote_agent_id===K);H&&await _.sshToRemoteAgent(H)}let X=!1;return i.$$.update=()=>{var K;1&i.$$.dirty&&n(11,t=J>660),8&i.$$.dirty&&n(2,o=f==null?void 0:f.currentAgent),4&i.$$.dirty&&n(10,r=o==null?void 0:o.remote_agent_id),8&i.$$.dirty&&n(9,s=f==null?void 0:f.isCurrentAgentDetailsLoading),8&i.$$.dirty&&n(8,c=$1(((K=f.currentConversation)==null?void 0:K.exchanges)??[])),8&i.$$.dirty&&n(7,a=f.focusedFilePath),8&i.$$.dirty&&n(1,l=f.isRemoteAgentSshWindow),2&i.$$.dirty&&n(6,u=l?H=>{M.extensionClient.openFile({repoRoot:"",pathName:H})}:void 0)},[J,l,o,f,N,X,u,a,c,s,r,t,p,_,M,C,R,Q,async function(K){const H=K.new_path||K.old_path;f.openDiffInBuffer(K.old_contents||"",K.new_contents||"",H)},function(){var Y;if(!((Y=f.currentAgent)!=null&&Y.remote_agent_id))return void console.error("No current agent ID found");_.reportRemoteAgentEvent({eventName:Jm.createdPR,remoteAgentId:f.currentAgent.remote_agent_id,eventData:{createdPRData:{}}}),n(4,N=!0);const K=m.currentConversationModel,H=K==null?void 0:K.selectedModelId;f.sendMessage("Please create a pull request with the changes you've made.",H??void 0).then(()=>{n(4,N=!1)}).catch(V=>{console.error("Error sending PR creation request:",V),n(4,N=!1)})},function(){n(0,J=window.innerHeight)},()=>{C.set(-1),f.showRemoteAgentDiffPanel({turnIdx:-1,changedFiles:c,userPrompt:"",sessionSummary:"",isShowingAggregateChanges:!0,isAgentFromDifferentRepo:p(o)})},()=>{n(5,X=!0),Q(r).then(()=>{n(5,X=!1)})}]}class f7 extends ue{constructor(e){super(),de(this,e,$7,d7,ce,{})}}function Rd(i){var le;let e,n,t,o,r,s,c,a,l,u,f,m,p,_,M,C,T,E,R,N,J,Q;o=new Ge({props:{size:2,weight:"medium",$$slots:{default:[m7]},$$scope:{ctx:i}}}),s=new Ne({props:{content:"View full script in editor",side:"bottom",$$slots:{default:[h7]},$$scope:{ctx:i}}});const X=[w7,v7],K=[];function H(oe,he){return oe[1].length>0?0:1}l=H(i),u=K[l]=X[l](i);let Y=((le=i[5])==null?void 0:le.status)&&Dd(i);function V(oe){i[15](oe)}let Z={placeholder:"Script name",size:2,$$slots:{iconLeft:[M7]},$$scope:{ctx:i}};i[2]!==void 0&&(Z.value=i[2]),_=new nr({props:Z}),et.push(()=>Et(_,"value",V)),_.$on("blur",i[16]),E=new Ne({props:{content:"Save the setup script in your machine's home directory",triggerOn:[Je.Hover],$$slots:{default:[S7]},$$scope:{ctx:i}}}),N=new Ne({props:{content:"Save the setup script in the Git repository, for your team to use when you push your changes",triggerOn:[Je.Hover],$$slots:{default:[E7]},$$scope:{ctx:i}}});let re=i[4]&&Nd(i);return{c(){e=L("div"),n=L("div"),t=L("div"),v(o.$$.fragment),r=B(),v(s.$$.fragment),c=B(),a=L("div"),u.c(),f=B(),Y&&Y.c(),m=B(),p=L("div"),v(_.$$.fragment),C=B(),T=L("div"),v(E.$$.fragment),R=B(),v(N.$$.fragment),J=B(),re&&re.c(),A(t,"class","header-content__title svelte-bf326k"),A(a,"class","header-content__title svelte-bf326k"),A(n,"class","header-content svelte-bf326k"),A(T,"class","input-group location-buttons svelte-bf326k"),A(p,"class","save-bar-content svelte-bf326k"),A(e,"class","setup-script-save-bar svelte-bf326k")},m(oe,he){x(oe,e,he),F(e,n),F(n,t),w(o,t,null),F(t,r),w(s,t,null),F(n,c),F(n,a),K[l].m(a,null),F(a,f),Y&&Y.m(a,null),F(e,m),F(e,p),w(_,p,null),F(p,C),F(p,T),w(E,T,null),F(T,R),w(N,T,null),F(p,J),re&&re.m(p,null),Q=!0},p(oe,he){var It;const ie={};4194304&he&&(ie.$$scope={dirty:he,ctx:oe}),o.$set(ie);const xe={};4194336&he&&(xe.$$scope={dirty:he,ctx:oe}),s.$set(xe);let tt=l;l=H(oe),l===tt?K[l].p(oe,he):(j(),$(K[tt],1,1,()=>{K[tt]=null}),q(),u=K[l],u?u.p(oe,he):(u=K[l]=X[l](oe),u.c()),d(u,1),u.m(a,f)),(It=oe[5])!=null&&It.status?Y?(Y.p(oe,he),32&he&&d(Y,1)):(Y=Dd(oe),Y.c(),d(Y,1),Y.m(a,null)):Y&&(j(),$(Y,1,1,()=>{Y=null}),q());const Ae={};4194304&he&&(Ae.$$scope={dirty:he,ctx:oe}),!M&&4&he&&(M=!0,Ae.value=oe[2],Rt(()=>M=!1)),_.$set(Ae);const He={};4194316&he&&(He.$$scope={dirty:he,ctx:oe}),E.$set(He);const Dt={};4194316&he&&(Dt.$$scope={dirty:he,ctx:oe}),N.$set(Dt),oe[4]?re?(re.p(oe,he),16&he&&d(re,1)):(re=Nd(oe),re.c(),d(re,1),re.m(p,null)):re&&(j(),$(re,1,1,()=>{re=null}),q())},i(oe){Q||(d(o.$$.fragment,oe),d(s.$$.fragment,oe),d(u),d(Y),d(_.$$.fragment,oe),d(E.$$.fragment,oe),d(N.$$.fragment,oe),d(re),Q=!0)},o(oe){$(o.$$.fragment,oe),$(s.$$.fragment,oe),$(u),$(Y),$(_.$$.fragment,oe),$(E.$$.fragment,oe),$(N.$$.fragment,oe),$(re),Q=!1},d(oe){oe&&b(e),y(o),y(s),K[l].d(),Y&&Y.d(),y(_),y(E),y(N),re&&re.d()}}}function m7(i){let e;return{c(){e=G("Setup script")},m(n,t){x(n,e,t)},d(n){n&&b(e)}}}function p7(i){let e;return{c(){e=G("View")},m(n,t){x(n,e,t)},d(n){n&&b(e)}}}function g7(i){let e,n;return e=new mf({props:{slot:"iconLeft"}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p:P,i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function h7(i){let e,n;return e=new ht({props:{variant:"ghost-block",color:"neutral",size:1,$$slots:{iconLeft:[g7],default:[p7]},$$scope:{ctx:i}}}),e.$on("click",i[12]),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p(t,o){const r={};4194304&o&&(r.$$scope={dirty:o,ctx:t}),e.$set(r)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function v7(i){let e,n;return e=new Ge({props:{size:1,color:"secondary",class:"header-content__version-count",$$slots:{default:[y7]},$$scope:{ctx:i}}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p(t,o){const r={};4194304&o&&(r.$$scope={dirty:o,ctx:t}),e.$set(r)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function w7(i){let e,n,t,o,r,s,c;return n=new Ne({props:{content:i[0]===0?"":"Switch to previous script",triggerOn:[Je.Hover],$$slots:{default:[x7]},$$scope:{ctx:i}}}),o=new Ge({props:{size:1,color:"secondary",class:"header-content__version-count",$$slots:{default:[_7]},$$scope:{ctx:i}}}),s=new Ne({props:{content:i[0]===i[1].length-1?"":"Switch to next script",triggerOn:[Je.Hover],$$slots:{default:[A7]},$$scope:{ctx:i}}}),{c(){e=L("div"),v(n.$$.fragment),t=B(),v(o.$$.fragment),r=B(),v(s.$$.fragment),A(e,"class","version-navigation svelte-bf326k")},m(a,l){x(a,e,l),w(n,e,null),F(e,t),w(o,e,null),F(e,r),w(s,e,null),c=!0},p(a,l){const u={};1&l&&(u.content=a[0]===0?"":"Switch to previous script"),4194305&l&&(u.$$scope={dirty:l,ctx:a}),n.$set(u);const f={};4194307&l&&(f.$$scope={dirty:l,ctx:a}),o.$set(f);const m={};3&l&&(m.content=a[0]===a[1].length-1?"":"Switch to next script"),4194307&l&&(m.$$scope={dirty:l,ctx:a}),s.$set(m)},i(a){c||(d(n.$$.fragment,a),d(o.$$.fragment,a),d(s.$$.fragment,a),c=!0)},o(a){$(n.$$.fragment,a),$(o.$$.fragment,a),$(s.$$.fragment,a),c=!1},d(a){a&&b(e),y(n),y(o),y(s)}}}function y7(i){let e;return{c(){e=G("No versions")},m(n,t){x(n,e,t)},d(n){n&&b(e)}}}function b7(i){let e,n;return e=new yf({}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function x7(i){let e,n;return e=new dt({props:{variant:"ghost-block",size:1,disabled:i[0]===0,title:"Previous version",$$slots:{default:[b7]},$$scope:{ctx:i}}}),e.$on("click",i[13]),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p(t,o){const r={};1&o&&(r.disabled=t[0]===0),4194304&o&&(r.$$scope={dirty:o,ctx:t}),e.$set(r)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function _7(i){let e,n,t,o=i[0]+1+"",r=i[1].length+"";return{c(){e=G(o),n=G(" of "),t=G(r)},m(s,c){x(s,e,c),x(s,n,c),x(s,t,c)},p(s,c){1&c&&o!==(o=s[0]+1+"")&&_e(e,o),2&c&&r!==(r=s[1].length+"")&&_e(t,r)},d(s){s&&(b(e),b(n),b(t))}}}function C7(i){let e,n;return e=new s1({}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function A7(i){let e,n;return e=new dt({props:{variant:"ghost-block",size:1,disabled:i[0]===i[1].length-1,title:"Next version",$$slots:{default:[C7]},$$scope:{ctx:i}}}),e.$on("click",i[14]),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p(t,o){const r={};3&o&&(r.disabled=t[0]===t[1].length-1),4194304&o&&(r.$$scope={dirty:o,ctx:t}),e.$set(r)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function Dd(i){let e,n,t;return n=new pp({props:{commandResult:i[5].status===xt.completed?"success":i[5].status===xt.error?"error":"loading"}}),{c(){e=L("div"),v(n.$$.fragment),A(e,"class","header-content__actions")},m(o,r){x(o,e,r),w(n,e,null),t=!0},p(o,r){const s={};32&r&&(s.commandResult=o[5].status===xt.completed?"success":o[5].status===xt.error?"error":"loading"),n.$set(s)},i(o){t||(d(n.$$.fragment,o),t=!0)},o(o){$(n.$$.fragment,o),t=!1},d(o){o&&b(e),y(n)}}}function M7(i){let e,n;return e=new js({props:{slot:"iconLeft"}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p:P,i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function k7(i){let e;return{c(){e=G("Save locally")},m(n,t){x(n,e,t)},d(n){n&&b(e)}}}function S7(i){let e,n;return e=new ht({props:{variant:"solid",color:"accent",disabled:i[3]||!i[2]||!Pd,$$slots:{default:[k7]},$$scope:{ctx:i}}}),e.$on("click",i[17]),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p(t,o){const r={};12&o&&(r.disabled=t[3]||!t[2]||!Pd),4194304&o&&(r.$$scope={dirty:o,ctx:t}),e.$set(r)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function T7(i){let e;return{c(){e=G("Save in repo")},m(n,t){x(n,e,t)},d(n){n&&b(e)}}}function E7(i){let e,n;return e=new ht({props:{variant:"solid",color:"accent",disabled:i[3]||!i[2],$$slots:{default:[T7]},$$scope:{ctx:i}}}),e.$on("click",i[18]),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p(t,o){const r={};12&o&&(r.disabled=t[3]||!t[2]),4194304&o&&(r.$$scope={dirty:o,ctx:t}),e.$set(r)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function Nd(i){let e,n,t;return n=new Ge({props:{size:1,color:"error",$$slots:{default:[I7]},$$scope:{ctx:i}}}),{c(){e=L("div"),v(n.$$.fragment),A(e,"class","error-message svelte-bf326k")},m(o,r){x(o,e,r),w(n,e,null),t=!0},p(o,r){const s={};4194320&r&&(s.$$scope={dirty:r,ctx:o}),n.$set(s)},i(o){t||(d(n.$$.fragment,o),t=!0)},o(o){$(n.$$.fragment,o),t=!1},d(o){o&&b(e),y(n)}}}function I7(i){let e;return{c(){e=G(i[4])},m(n,t){x(n,e,t)},p(n,t){16&t&&_e(e,n[4])},d(n){n&&b(e)}}}function L7(i){let e,n,t=i[1].length>0&&Rd(i);return{c(){t&&t.c(),e=me()},m(o,r){t&&t.m(o,r),x(o,e,r),n=!0},p(o,[r]){o[1].length>0?t?(t.p(o,r),2&r&&d(t,1)):(t=Rd(o),t.c(),d(t,1),t.m(e.parentNode,e)):t&&(j(),$(t,1,1,()=>{t=null}),q())},i(o){n||(d(t),n=!0)},o(o){$(t),n=!1},d(o){o&&b(e),t&&t.d(o)}}}let Pd="home";function R7(i,e,n){let t,o,r,s;const c=Se(Tn.key);Te(i,c,C=>n(11,s=C));const a=Se("chatModel");let l="setup.sh",u=!1,f="",m=0;const p=C=>{const T=document.querySelector(`[data-tool-id="${C}"]`);T&&T.scrollIntoView({behavior:"smooth",block:"start"})};function _(C=1){n(0,m=Math.max(0,Math.min(t.length-1,m+C)));const T=t[m];T!=null&&T.id&&(p(T.id),setTimeout(()=>{p(T.id)},500))}async function M(C){var T,E,R,N,J,Q;if(l&&C)if(r!=null&&r.content)try{n(3,u=!0),n(4,f="");const X=l.endsWith(".sh")?l:`${l}.sh`,K=await c.saveSetupScript(X,r.content,C);let H;if(!K.success||!K.path)return void n(4,f=K.error||"Failed to save setup script");if(H=(await c.listSetupScripts()).find(re=>re.path===K.path),!H)return void n(4,f="Failed to save script");const Y=s==null?void 0:s.currentAgent,V=(R=(E=(T=Y==null?void 0:Y.workspace_setup)==null?void 0:T.starting_files)==null?void 0:E.github_commit_ref)==null?void 0:R.git_ref,Z=(Q=(J=(N=Y==null?void 0:Y.workspace_setup)==null?void 0:N.starting_files)==null?void 0:J.github_commit_ref)==null?void 0:Q.repository_url;c.saveLastRemoteAgentSetup(Z||null,V||null,K.path),c.setCurrentAgent(void 0)}catch(X){n(4,f=X instanceof Error?X.message:"Unknown error occurred")}finally{n(3,u=!1)}else n(4,f="No script content to save");else n(4,f="Please provide both script name and location")}return i.$$.update=()=>{var T;var C;2048&i.$$.dirty&&n(1,(C=((T=s.currentConversation)==null?void 0:T.exchanges)||[],t=C&&Array.isArray(C)?C.flatMap(E=>(E.exchange.response_nodes||[]).filter(R=>{var N,J;return R.type===Rr.TOOL_USE&&((N=R.tool_use)==null?void 0:N.tool_name)==="setup-script"&&((J=R.tool_use)==null?void 0:J.input_json)}).map(R=>{var N;try{const J=typeof R.tool_use.input_json=="string"?JSON.parse(R.tool_use.input_json):R.tool_use.input_json,Q=s.getToolUseState(R.tool_use.tool_use_id),X=((N=E.exchange)==null?void 0:N.request_id)||E.request_id||"";return X||console.warn("SetupScriptSaveBar: Missing request_id for an exchange",E),{content:J.script_content||"",timestamp:R.timestamp,status:Q.phase,requestId:X,id:R.tool_use.tool_use_id}}catch(J){return console.error("Failed to parse setup script JSON:",J),null}})).filter(E=>E!==null&&E.content!==""):[])),2&i.$$.dirty&&n(10,o=t.length),1024&i.$$.dirty&&n(0,m=o-1),3&i.$$.dirty&&n(5,r=t[m])},[m,t,l,u,f,r,c,a,_,M,o,s,()=>{a.extensionClient.openScratchFile(r==null?void 0:r.content,"shellscript")},()=>_(-1),()=>_(1),function(C){l=C,n(2,l)},()=>{l?l.endsWith(".sh")||n(2,l+=".sh"):n(2,l="setup.sh")},()=>M("home"),()=>M("git")]}class D7 extends ue{constructor(e){super(),de(this,e,R7,L7,ce,{})}}function Fd(i){let e,n;return e=new Jn({props:{color:i[3],size:1,$$slots:{icon:[z7],default:[N7]},$$scope:{ctx:i}}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p(t,o){const r={};8&o&&(r.color=t[3]),2070&o&&(r.$$scope={dirty:o,ctx:t}),e.$set(r)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function N7(i){let e,n,t=i[1]===Hn.inProgress?` ${i[2].progress}%`:"";return{c(){e=G(i[4]),n=G(t)},m(o,r){x(o,e,r),x(o,n,r)},p(o,r){16&r&&_e(e,o[4]),6&r&&t!==(t=o[1]===Hn.inProgress?` ${o[2].progress}%`:"")&&_e(n,t)},d(o){o&&(b(e),b(n))}}}function P7(i){let e,n,t;return n=new rf({}),{c(){e=L("div"),v(n.$$.fragment),A(e,"class","c-orientation-status--spin-icon svelte-1a8540p")},m(o,r){x(o,e,r),w(n,e,null),t=!0},i(o){t||(d(n.$$.fragment,o),t=!0)},o(o){$(n.$$.fragment,o),t=!1},d(o){o&&b(e),y(n)}}}function F7(i){let e,n;return e=new Wn({}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function O7(i){let e,n;return e=new To({}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function z7(i){let e,n,t,o;const r=[O7,F7,P7],s=[];function c(a,l){return a[1]===Hn.succeeded?0:a[1]===Hn.failed?1:2}return e=c(i),n=s[e]=r[e](i),{c(){n.c(),t=me()},m(a,l){s[e].m(a,l),x(a,t,l),o=!0},p(a,l){let u=e;e=c(a),e!==u&&(j(),$(s[u],1,1,()=>{s[u]=null}),q(),n=s[e],n||(n=s[e]=r[e](a),n.c()),d(n,1),n.m(t.parentNode,t))},i(a){o||(d(n),o=!0)},o(a){$(n),o=!1},d(a){a&&b(t),s[e].d(a)}}}function B7(i){let e,n,t,o,r=i[0]&&Fd(i);return{c(){r&&r.c(),e=me()},m(s,c){r&&r.m(s,c),x(s,e,c),n=!0,t||(o=Le(window,"message",i[5].onMessageFromExtension),t=!0)},p(s,[c]){s[0]?r?(r.p(s,c),1&c&&d(r,1)):(r=Fd(s),r.c(),d(r,1),r.m(e.parentNode,e)):r&&(j(),$(r,1,1,()=>{r=null}),q())},i(s){n||(d(r),n=!0)},o(s){$(r),n=!1},d(s){s&&b(e),r&&r.d(s),t=!1,o()}}}function U7(i,e,n){let t,o;const r=new Ui(wn),s=Tt({state:Hn.idle});Te(i,s,m=>n(2,o=m));const c=jn(s,m=>m.state);Te(i,c,m=>n(1,t=m));const a={handleMessageFromExtension:m=>!(!m.data||m.data.type!==jt.orientationStatusUpdate)&&(s.set(m.data.data),!0)};let l,u;ro(()=>{r.registerConsumer(a),wn.postMessage({type:jt.getOrientationStatus})});let f=!1;return i.$$.update=()=>{var m;2&i.$$.dirty&&n(3,l=(m=t)===Hn.succeeded?"success":m===Hn.failed||m===Hn.aborted?"error":"warning"),6&i.$$.dirty&&n(4,u=function(p,_){return p===Hn.succeeded?"Orientation complete! Check out `.augment/rules` folder.":p===Hn.failed?_.errorMessage?`Orientation failed: ${_.errorMessage}`:"Orientation failed":p===Hn.aborted?_.errorMessage?`Orientation aborted: ${_.errorMessage}`:"Orientation aborted":"Orienting to codebase and creating rules in `.augment/rules` folder... "}(t,o)),3&i.$$.dirty&&(f?t!==Hn.succeeded&&t!==Hn.failed&&t!==Hn.aborted||setTimeout(()=>{n(0,f=!1)},3e3):t===Hn.inProgress&&n(0,f=!0))},[f,t,o,l,u,r,s,c]}class H7 extends ue{constructor(e){super(),de(this,e,U7,B7,ce,{})}}function Od(i){let e,n;return e=new Jn({props:{color:"error",size:1,$$slots:{icon:[q7],default:[j7]},$$scope:{ctx:i}}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function j7(i){let e;return{c(){e=G("Syncing disabled")},m(n,t){x(n,e,t)},d(n){n&&b(e)}}}function q7(i){let e,n;return e=new gp({}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function W7(i){let e,n,t=i[1].syncEnabledState==="disabled"&&Od(i);return{c(){t&&t.c(),e=me()},m(o,r){t&&t.m(o,r),x(o,e,r),n=!0},p(o,[r]){o[1].syncEnabledState==="disabled"?t?2&r&&d(t,1):(t=Od(o),t.c(),d(t,1),t.m(e.parentNode,e)):t&&(j(),$(t,1,1,()=>{t=null}),q())},i(o){n||(d(t),n=!0)},o(o){$(t),n=!1},d(o){o&&b(e),t&&t.d(o)}}}function V7(i,e,n){let t,o=P,r=()=>(o(),o=lt(s,c=>n(1,t=c)),s);i.$$.on_destroy.push(()=>o());let{contextModel:s}=e;return r(),i.$$set=c=>{"contextModel"in c&&r(n(0,s=c.contextModel))},[s,t]}class G7 extends ue{constructor(e){super(),de(this,e,V7,W7,ce,{contextModel:0})}}function zd(i){let e,n;return e=new Jn({props:{color:i[2],size:1,$$slots:{icon:[Z7],default:[Y7]},$$scope:{ctx:i}}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p(t,o){const r={};4&o&&(r.color=t[2]),89&o&&(r.$$scope={dirty:o,ctx:t}),e.$set(r)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function Y7(i){var o;let e,n,t=((o=i[0])==null?void 0:o.status)===_o.done?"":` ${i[4]}%`;return{c(){e=G(i[3]),n=G(t)},m(r,s){x(r,e,s),x(r,n,s)},p(r,s){var c;8&s&&_e(e,r[3]),17&s&&t!==(t=((c=r[0])==null?void 0:c.status)===_o.done?"":` ${r[4]}%`)&&_e(n,t)},d(r){r&&(b(e),b(n))}}}function K7(i){let e,n,t;return n=new rf({}),{c(){e=L("div"),v(n.$$.fragment),A(e,"class","c-sync-status--spin-icon svelte-18a88kw")},m(o,r){x(o,e,r),w(n,e,null),t=!0},i(o){t||(d(n.$$.fragment,o),t=!0)},o(o){$(n.$$.fragment,o),t=!1},d(o){o&&b(e),y(n)}}}function X7(i){let e,n;return e=new To({}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function Z7(i){let e,n,t,o;const r=[X7,K7],s=[];function c(a,l){var u;return((u=a[0])==null?void 0:u.status)===_o.done?0:1}return e=c(i),n=s[e]=r[e](i),{c(){n.c(),t=me()},m(a,l){s[e].m(a,l),x(a,t,l),o=!0},p(a,l){let u=e;e=c(a),e!==u&&(j(),$(s[u],1,1,()=>{s[u]=null}),q(),n=s[e],n||(n=s[e]=r[e](a),n.c()),d(n,1),n.m(t.parentNode,t))},i(a){o||(d(n),o=!0)},o(a){$(n),o=!1},d(a){a&&b(t),s[e].d(a)}}}function J7(i){let e,n,t=!isNaN(i[4])&&i[1],o=t&&zd(i);return{c(){o&&o.c(),e=me()},m(r,s){o&&o.m(r,s),x(r,e,s),n=!0},p(r,[s]){18&s&&(t=!isNaN(r[4])&&r[1]),t?o?(o.p(r,s),18&s&&d(o,1)):(o=zd(r),o.c(),d(o,1),o.m(e.parentNode,e)):o&&(j(),$(o,1,1,()=>{o=null}),q())},i(r){n||(d(o),n=!0)},o(r){$(o),n=!1},d(r){r&&b(e),o&&o.d(r)}}}function Q7(i,e,n){let t,o,r,s,{progress:c}=e;return i.$$set=a=>{"progress"in a&&n(0,c=a.progress)},i.$$.update=()=>{var a;1&i.$$.dirty&&n(4,t=!(a=c)||a.totalFiles<=0?NaN:a.status===_o.done?100:Math.floor(a.syncedCount/a.totalFiles*100)),1&i.$$.dirty&&n(2,s=(c==null?void 0:c.status)===_o.done?"success":"info"),1&i.$$.dirty&&n(3,o=(c==null?void 0:c.status)===_o.done?"Indexing complete.":"Indexing codebase..."),3&i.$$.dirty&&(r?(c==null?void 0:c.status)===_o.done&&setTimeout(()=>{n(1,r=!1)},3e3):c&&c.status!==_o.done&&(c.status===_o.longRunning||c.newlyTrackedFolders.length>0)&&n(1,r=!0))},n(1,r=!1),[c,r,s,o,t]}class e9 extends ue{constructor(e){super(),de(this,e,Q7,J7,ce,{progress:0})}}function t9(i){let e,n,t,o,r,s;return e=new G7({props:{contextModel:i[0]}}),t=new e9({props:{progress:i[1].syncProgress}}),r=new H7({}),{c(){v(e.$$.fragment),n=B(),v(t.$$.fragment),o=B(),v(r.$$.fragment)},m(c,a){w(e,c,a),x(c,n,a),w(t,c,a),x(c,o,a),w(r,c,a),s=!0},p(c,[a]){const l={};1&a&&(l.contextModel=c[0]),e.$set(l);const u={};2&a&&(u.progress=c[1].syncProgress),t.$set(u)},i(c){s||(d(e.$$.fragment,c),d(t.$$.fragment,c),d(r.$$.fragment,c),s=!0)},o(c){$(e.$$.fragment,c),$(t.$$.fragment,c),$(r.$$.fragment,c),s=!1},d(c){c&&(b(n),b(o)),y(e,c),y(t,c),y(r,c)}}}function n9(i,e,n){let t,o=P,r=()=>(o(),o=lt(s,c=>n(1,t=c)),s);i.$$.on_destroy.push(()=>o());let{contextModel:s}=e;return r(),i.$$set=c=>{"contextModel"in c&&r(n(0,s=c.contextModel))},[s,t]}class o9 extends ue{constructor(e){super(),de(this,e,n9,t9,ce,{contextModel:0})}}function r9(i){let e,n;return e=new or({}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function i9(i){let e,n;return e=new dt({props:{variant:"ghost-block",color:"neutral",size:1,title:"Agent options",$$slots:{default:[r9]},$$scope:{ctx:i}}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p(t,o){const r={};524288&o&&(r.$$scope={dirty:o,ctx:t}),e.$set(r)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function Bd(i){let e,n;return e=new we.Item({props:{onSelect:i[13],$$slots:{iconLeft:[a9],default:[s9]},$$scope:{ctx:i}}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p(t,o){const r={};1&o&&(r.onSelect=t[13]),524288&o&&(r.$$scope={dirty:o,ctx:t}),e.$set(r)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function s9(i){let e;return{c(){e=G("Rename")},m(n,t){x(n,e,t)},d(n){n&&b(e)}}}function a9(i){let e,n;return e=new Vr({props:{slot:"iconLeft"}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p:P,i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function Ud(i){let e,n;return e=new we.Item({props:{title:"Pin or unpin agent",onSelect:i[14],$$slots:{iconLeft:[l9],default:[c9]},$$scope:{ctx:i}}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p(t,o){const r={};16&o&&(r.onSelect=t[14]),524296&o&&(r.$$scope={dirty:o,ctx:t}),e.$set(r)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function c9(i){let e,n=i[3]?"Unpin":"Pin";return{c(){e=G(n)},m(t,o){x(t,e,o)},p(t,o){8&o&&n!==(n=t[3]?"Unpin":"Pin")&&_e(e,n)},d(t){t&&b(e)}}}function l9(i){let e,n;return e=new Os({props:{class:"pin-icon"}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p:P,i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function u9(i){let e;return{c(){e=G("Copy ID")},m(n,t){x(n,e,t)},p:P,d(n){n&&b(e)}}}function d9(i){let e,n=i[7].get(i[1])+"";return{c(){e=G(n)},m(t,o){x(t,e,o)},p(t,o){130&o&&n!==(n=t[7].get(t[1])+"")&&_e(e,n)},d(t){t&&b(e)}}}function $9(i){let e,n;function t(s,c){return 130&c&&(e=null),e==null&&(e=!!s[7].get(s[1])),e?d9:u9}let o=t(i,-1),r=o(i);return{c(){r.c(),n=me()},m(s,c){r.m(s,c),x(s,n,c)},p(s,c){o===(o=t(s,c))&&r?r.p(s,c):(r.d(1),r=o(s),r&&(r.c(),r.m(n.parentNode,n)))},d(s){s&&b(n),r.d(s)}}}function f9(i){let e,n;return e=new xf({props:{slot:"iconLeft"}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p:P,i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function m9(i){let e;return{c(){e=G("Share")},m(n,t){x(n,e,t)},p:P,d(n){n&&b(e)}}}function p9(i){let e,n=i[8].get(i[1])+"";return{c(){e=G(n)},m(t,o){x(t,e,o)},p(t,o){258&o&&n!==(n=t[8].get(t[1])+"")&&_e(e,n)},d(t){t&&b(e)}}}function g9(i){let e,n;function t(s,c){return 258&c&&(e=null),e==null&&(e=!!s[8].get(s[1])),e?p9:m9}let o=t(i,-1),r=o(i);return{c(){r.c(),n=me()},m(s,c){r.m(s,c),x(s,n,c)},p(s,c){o===(o=t(s,c))&&r?r.p(s,c):(r.d(1),r=o(s),r&&(r.c(),r.m(n.parentNode,n)))},d(s){s&&b(n),r.d(s)}}}function h9(i){let e,n;return e=new ji({props:{slot:"iconLeft"}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p:P,i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function Hd(i){let e,n,t,o,r,s;return e=new we.Separator({}),t=new we.Label({props:{$$slots:{default:[v9]},$$scope:{ctx:i}}}),r=new we.Item({props:{disabled:!0,$$slots:{default:[w9]},$$scope:{ctx:i}}}),{c(){v(e.$$.fragment),n=B(),v(t.$$.fragment),o=B(),v(r.$$.fragment)},m(c,a){w(e,c,a),x(c,n,a),w(t,c,a),x(c,o,a),w(r,c,a),s=!0},p(c,a){const l={};524288&a&&(l.$$scope={dirty:a,ctx:c}),t.$set(l);const u={};524292&a&&(u.$$scope={dirty:a,ctx:c}),r.$set(u)},i(c){s||(d(e.$$.fragment,c),d(t.$$.fragment,c),d(r.$$.fragment,c),s=!0)},o(c){$(e.$$.fragment,c),$(t.$$.fragment,c),$(r.$$.fragment,c),s=!1},d(c){c&&(b(n),b(o)),y(e,c),y(t,c),y(r,c)}}}function v9(i){let e;return{c(){e=G("Branch")},m(n,t){x(n,e,t)},d(n){n&&b(e)}}}function w9(i){let e;return{c(){e=G(i[2])},m(n,t){x(n,e,t)},p(n,t){4&t&&_e(e,n[2])},d(n){n&&b(e)}}}function y9(i){let e,n,t,o,r,s,c,a,l=i[5]&&Bd(i),u=i[4]&&Ud(i);t=new we.Item({props:{onSelect:i[15],$$slots:{iconLeft:[f9],default:[$9]},$$scope:{ctx:i}}}),r=new we.Item({props:{onSelect:i[16],$$slots:{iconLeft:[h9],default:[g9]},$$scope:{ctx:i}}});let f=i[2]&&Hd(i);return{c(){l&&l.c(),e=B(),u&&u.c(),n=B(),v(t.$$.fragment),o=B(),v(r.$$.fragment),s=B(),f&&f.c(),c=me()},m(m,p){l&&l.m(m,p),x(m,e,p),u&&u.m(m,p),x(m,n,p),w(t,m,p),x(m,o,p),w(r,m,p),x(m,s,p),f&&f.m(m,p),x(m,c,p),a=!0},p(m,p){m[5]?l?(l.p(m,p),32&p&&d(l,1)):(l=Bd(m),l.c(),d(l,1),l.m(e.parentNode,e)):l&&(j(),$(l,1,1,()=>{l=null}),q()),m[4]?u?(u.p(m,p),16&p&&d(u,1)):(u=Ud(m),u.c(),d(u,1),u.m(n.parentNode,n)):u&&(j(),$(u,1,1,()=>{u=null}),q());const _={};524418&p&&(_.$$scope={dirty:p,ctx:m}),t.$set(_);const M={};64&p&&(M.onSelect=m[16]),524546&p&&(M.$$scope={dirty:p,ctx:m}),r.$set(M),m[2]?f?(f.p(m,p),4&p&&d(f,1)):(f=Hd(m),f.c(),d(f,1),f.m(c.parentNode,c)):f&&(j(),$(f,1,1,()=>{f=null}),q())},i(m){a||(d(l),d(u),d(t.$$.fragment,m),d(r.$$.fragment,m),d(f),a=!0)},o(m){$(l),$(u),$(t.$$.fragment,m),$(r.$$.fragment,m),$(f),a=!1},d(m){m&&(b(e),b(n),b(o),b(s),b(c)),l&&l.d(m),u&&u.d(m),y(t,m),y(r,m),f&&f.d(m)}}}function b9(i){let e,n,t,o;return e=new we.Trigger({props:{$$slots:{default:[i9]},$$scope:{ctx:i}}}),t=new we.Content({props:{size:1,side:"bottom",align:"end",$$slots:{default:[y9]},$$scope:{ctx:i}}}),{c(){v(e.$$.fragment),n=B(),v(t.$$.fragment)},m(r,s){w(e,r,s),x(r,n,s),w(t,r,s),o=!0},p(r,s){const c={};524288&s&&(c.$$scope={dirty:s,ctx:r}),e.$set(c);const a={};524799&s&&(a.$$scope={dirty:s,ctx:r}),t.$set(a)},i(r){o||(d(e.$$.fragment,r),d(t.$$.fragment,r),o=!0)},o(r){$(e.$$.fragment,r),$(t.$$.fragment,r),o=!1},d(r){r&&b(n),y(e,r),y(t,r)}}}function x9(i){let e,n,t;function o(s){i[17](s)}let r={nested:!1,$$slots:{default:[b9]},$$scope:{ctx:i}};return i[6]!==void 0&&(r.requestClose=i[6]),e=new we.Root({props:r}),et.push(()=>Et(e,"requestClose",o)),{c(){v(e.$$.fragment)},m(s,c){w(e,s,c),t=!0},p(s,[c]){const a={};524799&c&&(a.$$scope={dirty:c,ctx:s}),!n&&64&c&&(n=!0,a.requestClose=s[6],Rt(()=>n=!1)),e.$set(a)},i(s){t||(d(e.$$.fragment,s),t=!0)},o(s){$(e.$$.fragment,s),t=!1},d(s){y(e,s)}}}function _9(i,e,n){let t,o,{agentId:r}=e,{selectedBranch:s}=e,{isPinned:c=!1}=e,{togglePinned:a}=e,{enableRename:l=!1}=e,{isEditing:u=!1}=e,f=()=>{};const m=Tt(new Map);Te(i,m,T=>n(7,t=T));const p=Tt(new Map);Te(i,p,T=>n(8,o=T));const _=Se(Tn.key);function M(){navigator.clipboard.writeText(r),m.update(T=>(T.set(r,"Copied!"),T)),setTimeout(()=>{m.update(T=>(T.delete(r),T))},1e3)}async function C(){try{const T=await(_==null?void 0:_.getConversationUrl(r));T&&navigator.clipboard.writeText(T),p.update(E=>(E.set(r,"Link copied!"),E)),setTimeout(()=>{p.update(E=>(E.delete(r),E))},1e3)}catch(T){console.error("Failed to get conversation URL: ",T)}}return i.$$set=T=>{"agentId"in T&&n(1,r=T.agentId),"selectedBranch"in T&&n(2,s=T.selectedBranch),"isPinned"in T&&n(3,c=T.isPinned),"togglePinned"in T&&n(4,a=T.togglePinned),"enableRename"in T&&n(5,l=T.enableRename),"isEditing"in T&&n(0,u=T.isEditing)},[u,r,s,c,a,l,f,t,o,m,p,M,C,()=>{setTimeout(()=>{n(0,u=!0)},20)},()=>{a()},()=>{M()},()=>{C(),f()},function(T){f=T,n(6,f)}]}class mm extends ue{constructor(e){super(),de(this,e,_9,x9,ce,{agentId:1,selectedBranch:2,isPinned:3,togglePinned:4,enableRename:5,isEditing:0})}}function jd(i){let e,n,t,o;n=new Ge({props:{size:i[4],weight:i[9],color:i[10],$$slots:{default:[M9]},$$scope:{ctx:i}}});let r=i[8]&&qd(i);return{c(){e=L("div"),v(n.$$.fragment),t=B(),r&&r.c(),A(e,"class","c-inline-edit-text-augment__input svelte-jmt5pf")},m(s,c){x(s,e,c),w(n,e,null),F(e,t),r&&r.m(e,null),o=!0},p(s,c){const a={};16&c[0]&&(a.size=s[4]),512&c[0]&&(a.weight=s[9]),1024&c[0]&&(a.color=s[10]),41100&c[0]|64&c[1]&&(a.$$scope={dirty:c,ctx:s}),n.$set(a),s[8]?r?(r.p(s,c),256&c[0]&&d(r,1)):(r=qd(s),r.c(),d(r,1),r.m(e,null)):r&&(j(),$(r,1,1,()=>{r=null}),q())},i(s){o||(d(n.$$.fragment,s),d(r),o=!0)},o(s){$(n.$$.fragment,s),$(r),o=!1},d(s){s&&b(e),y(n),r&&r.d()}}}function C9(i){let e,n,t;return{c(){e=L("input"),qn(e,"field-sizing","content"),A(e,"class","c-inline-edit-text-augment__input-field svelte-jmt5pf"),A(e,"type","text"),A(e,"placeholder",i[2]),e.disabled=i[3]},m(o,r){x(o,e,r),i[33](e),pr(e,i[15]),n||(t=[Le(e,"input",i[34]),Le(e,"keydown",i[16]),Le(e,"blur",i[19])],n=!0)},p(o,r){4&r[0]&&A(e,"placeholder",o[2]),8&r[0]&&(e.disabled=o[3]),32768&r[0]&&e.value!==o[15]&&pr(e,o[15])},d(o){o&&b(e),i[33](null),n=!1,Qt(t)}}}function A9(i){let e,n,t;return{c(){e=L("textarea"),qn(e,"field-sizing","content"),A(e,"class","c-inline-edit-text-augment__input-field svelte-jmt5pf"),A(e,"placeholder",i[2]),e.disabled=i[3],A(e,"rows","1")},m(o,r){x(o,e,r),i[31](e),pr(e,i[15]),n||(t=[Le(e,"input",i[32]),Le(e,"keydown",i[16]),Le(e,"blur",i[19])],n=!0)},p(o,r){4&r[0]&&A(e,"placeholder",o[2]),8&r[0]&&(e.disabled=o[3]),32768&r[0]&&pr(e,o[15])},d(o){o&&b(e),i[31](null),n=!1,Qt(t)}}}function M9(i){let e;function n(r,s){return r[7]?A9:C9}let t=n(i),o=t(i);return{c(){o.c(),e=me()},m(r,s){o.m(r,s),x(r,e,s)},p(r,s){t===(t=n(r))&&o?o.p(r,s):(o.d(1),o=t(r),o&&(o.c(),o.m(e.parentNode,e)))},d(r){r&&b(e),o.d(r)}}}function qd(i){let e,n;return e=new dt({props:{size:1,variant:i[11],color:i[12],disabled:i[3],$$slots:{default:[k9]},$$scope:{ctx:i}}}),e.$on("click",i[18]),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p(t,o){const r={};2048&o[0]&&(r.variant=t[11]),4096&o[0]&&(r.color=t[12]),8&o[0]&&(r.disabled=t[3]),64&o[1]&&(r.$$scope={dirty:o,ctx:t}),e.$set(r)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function k9(i){let e,n;return e=new zs({}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function S9(i){let e,n=(i[0]||i[2])+"";return{c(){e=G(n)},m(t,o){x(t,e,o)},p(t,o){5&o[0]&&n!==(n=(t[0]||t[2])+"")&&_e(e,n)},d(t){t&&b(e)}}}function T9(i){let e,n,t,o,r,s,c,a,l,u=i[6]&&!i[3]&&i[1]&&jd(i);const f=i[30].default,m=Ye(f,i,i[37],null),p=m||function(_){let M,C;return M=new Ge({props:{size:_[4],weight:_[9],color:_[10],value:_[0],placeholder:_[2],$$slots:{default:[S9]},$$scope:{ctx:_}}}),{c(){v(M.$$.fragment)},m(T,E){w(M,T,E),C=!0},p(T,E){const R={};16&E[0]&&(R.size=T[4]),512&E[0]&&(R.weight=T[9]),1024&E[0]&&(R.color=T[10]),1&E[0]&&(R.value=T[0]),4&E[0]&&(R.placeholder=T[2]),5&E[0]|64&E[1]&&(R.$$scope={dirty:E,ctx:T}),M.$set(R)},i(T){C||(d(M.$$.fragment,T),C=!0)},o(T){$(M.$$.fragment,T),C=!1},d(T){y(M,T)}}}(i);return{c(){e=L("div"),u&&u.c(),n=B(),t=L("div"),p&&p.c(),A(t,"class","c-inline-edit-text-augment__text svelte-jmt5pf"),A(t,"role","button"),A(t,"tabindex",o=i[6]&&!i[3]?0:void 0),A(t,"aria-label",r=i[0]||i[2]),ke(t,"c-inline-edit-text-augment__text--editable",i[6]&&!i[3]),A(e,"class",s="c-inline-edit-text-augment "+i[5]+" svelte-jmt5pf"),ke(e,"c-inline-edit-text-augment--is-editing",i[1]),ke(e,"c-inline-edit-text-augment--disabled",i[3]),ke(e,"c-inline-edit-text-augment--is-editable",i[6])},m(_,M){x(_,e,M),u&&u.m(e,null),F(e,n),F(e,t),p&&p.m(t,null),i[36](e),c=!0,a||(l=[Le(t,"click",i[20]),Le(t,"keydown",i[35])],a=!0)},p(_,M){_[6]&&!_[3]&&_[1]?u?(u.p(_,M),74&M[0]&&d(u,1)):(u=jd(_),u.c(),d(u,1),u.m(e,n)):u&&(j(),$(u,1,1,()=>{u=null}),q()),m?m.p&&(!c||64&M[1])&&Ke(m,f,_,_[37],c?Ze(f,_[37],M,null):Xe(_[37]),null):p&&p.p&&(!c||1557&M[0])&&p.p(_,c?M:[-1,-1]),(!c||72&M[0]&&o!==(o=_[6]&&!_[3]?0:void 0))&&A(t,"tabindex",o),(!c||5&M[0]&&r!==(r=_[0]||_[2]))&&A(t,"aria-label",r),(!c||72&M[0])&&ke(t,"c-inline-edit-text-augment__text--editable",_[6]&&!_[3]),(!c||32&M[0]&&s!==(s="c-inline-edit-text-augment "+_[5]+" svelte-jmt5pf"))&&A(e,"class",s),(!c||34&M[0])&&ke(e,"c-inline-edit-text-augment--is-editing",_[1]),(!c||40&M[0])&&ke(e,"c-inline-edit-text-augment--disabled",_[3]),(!c||96&M[0])&&ke(e,"c-inline-edit-text-augment--is-editable",_[6])},i(_){c||(d(u),d(p,_),c=!0)},o(_){$(u),$(p,_),c=!1},d(_){_&&b(e),u&&u.d(),p&&p.d(_),i[36](null),a=!1,Qt(l)}}}function E9(i,e,n){let t,o,{$$slots:r={},$$scope:s}=e,{value:c=""}=e,{placeholder:a=""}=e,{disabled:l=!1}=e,{size:u=2}=e,{class:f=""}=e,{isEditing:m=!1}=e,{isEditable:p=!0}=e,{multiline:_=!0}=e,{showCommitButton:M=!0}=e,{commitOnBlur:C=!0}=e,{commitOnEnter:T=!0}=e,{allowCtrlEnterForNewline:E=!0}=e,{doubleClickToEdit:R=!0}=e,{singleClickToEdit:N=!1}=e,{weight:J}=e,{color:Q}=e,{onCancelEdit:X=ie=>{}}=e,{onStartEdit:K=()=>{}}=e,{onChange:H=(ie,xe)=>{}}=e,{outsideNode:Y}=e,{commitButtonVariant:V="classic"}=e,{commitButtonColor:Z="accent"}=e,re=c;function le(){n(15,re=c),n(1,m=!1),X(c)}function oe(){p&&!l&&(m||(K(),n(1,m=!0)),setTimeout(()=>{t==null||t.focus()},0))}function he(){const ie=re.trim(),xe=c;ie!==xe&&(n(0,c=ie),H(ie,xe)),setTimeout(()=>{t==null||t.blur()},0),n(1,m=!1)}return ro(()=>{const ie=xe=>{var tt;m&&((tt=Y||o)==null?void 0:tt.contains(xe.target))===!1&&(C?he():le())};return document.addEventListener("click",ie),()=>{document.removeEventListener("click",ie)}}),i.$$set=ie=>{"value"in ie&&n(0,c=ie.value),"placeholder"in ie&&n(2,a=ie.placeholder),"disabled"in ie&&n(3,l=ie.disabled),"size"in ie&&n(4,u=ie.size),"class"in ie&&n(5,f=ie.class),"isEditing"in ie&&n(1,m=ie.isEditing),"isEditable"in ie&&n(6,p=ie.isEditable),"multiline"in ie&&n(7,_=ie.multiline),"showCommitButton"in ie&&n(8,M=ie.showCommitButton),"commitOnBlur"in ie&&n(21,C=ie.commitOnBlur),"commitOnEnter"in ie&&n(22,T=ie.commitOnEnter),"allowCtrlEnterForNewline"in ie&&n(23,E=ie.allowCtrlEnterForNewline),"doubleClickToEdit"in ie&&n(24,R=ie.doubleClickToEdit),"singleClickToEdit"in ie&&n(25,N=ie.singleClickToEdit),"weight"in ie&&n(9,J=ie.weight),"color"in ie&&n(10,Q=ie.color),"onCancelEdit"in ie&&n(26,X=ie.onCancelEdit),"onStartEdit"in ie&&n(27,K=ie.onStartEdit),"onChange"in ie&&n(28,H=ie.onChange),"outsideNode"in ie&&n(29,Y=ie.outsideNode),"commitButtonVariant"in ie&&n(11,V=ie.commitButtonVariant),"commitButtonColor"in ie&&n(12,Z=ie.commitButtonColor),"$$scope"in ie&&n(37,s=ie.$$scope)},i.$$.update=()=>{3&i.$$.dirty[0]&&(m||n(15,re=c)),2&i.$$.dirty[0]&&m&&oe()},[c,m,a,l,u,f,p,_,M,J,Q,V,Z,t,o,re,function(ie){T&&ie.key==="Enter"?_&&E&&(ie.ctrlKey||ie.metaKey||ie.altKey||ie.shiftKey)||(ie.preventDefault(),he()):ie.key==="Escape"&&(ie.preventDefault(),le())},oe,he,function(){C&&m&&he()},function(ie){(N||R&&ie.detail===2)&&oe()},C,T,E,R,N,X,K,H,Y,r,function(ie){et[ie?"unshift":"push"](()=>{t=ie,n(13,t)})},function(){re=this.value,n(15,re),n(1,m),n(0,c)},function(ie){et[ie?"unshift":"push"](()=>{t=ie,n(13,t)})},function(){re=this.value,n(15,re),n(1,m),n(0,c)},ie=>{ie.key==="Enter"&&oe()},function(ie){et[ie?"unshift":"push"](()=>{o=ie,n(14,o)})},s]}class I9 extends ue{constructor(e){super(),de(this,e,E9,T9,ce,{value:0,placeholder:2,disabled:3,size:4,class:5,isEditing:1,isEditable:6,multiline:7,showCommitButton:8,commitOnBlur:21,commitOnEnter:22,allowCtrlEnterForNewline:23,doubleClickToEdit:24,singleClickToEdit:25,weight:9,color:10,onCancelEdit:26,onStartEdit:27,onChange:28,outsideNode:29,commitButtonVariant:11,commitButtonColor:12},null,[-1,-1])}}const L9=i=>({}),Wd=i=>({}),R9=i=>({}),Vd=i=>({}),D9=i=>({}),Gd=i=>({}),N9=i=>({}),Yd=i=>({}),P9=i=>({}),Kd=i=>({}),F9=i=>({}),Xd=i=>({}),O9=i=>({}),Zd=i=>({});function Jd(i){let e,n;return e=new dt({props:{size:.5,class:"c-thread-header__title-icon",variant:"ghost-block",disabled:!i[2],color:"neutral",title:"Edit Thread Title",$$slots:{default:[z9]},$$scope:{ctx:i}}}),e.$on("click",i[9]),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p(t,o){const r={};4&o&&(r.disabled=!t[2]),32768&o&&(r.$$scope={dirty:o,ctx:t}),e.$set(r)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function z9(i){let e,n;const t=i[11].icon,o=Ye(t,i,i[15],Xd);return{c(){e=L("span"),o&&o.c(),A(e,"class","c-thread-header__title-icon-content")},m(r,s){x(r,e,s),o&&o.m(e,null),n=!0},p(r,s){o&&o.p&&(!n||32768&s)&&Ke(o,t,r,r[15],n?Ze(t,r[15],s,F9):Xe(r[15]),Xd)},i(r){n||(d(o,r),n=!0)},o(r){$(o,r),n=!1},d(r){r&&b(e),o&&o.d(r)}}}function Qd(i){let e;const n=i[11].title,t=Ye(n,i,i[15],Yd),o=t||function(r){let s,c;return s=new Ne({props:{content:"Rename",nested:!1,hasPointerEvents:!1,class:"c-thread-header__title-text",$$slots:{default:[B9]},$$scope:{ctx:r}}}),{c(){v(s.$$.fragment)},m(a,l){w(s,a,l),c=!0},p(a,l){const u={};32935&l&&(u.$$scope={dirty:l,ctx:a}),s.$set(u)},i(a){c||(d(s.$$.fragment,a),c=!0)},o(a){$(s.$$.fragment,a),c=!1},d(a){y(s,a)}}}(i);return{c(){o&&o.c()},m(r,s){o&&o.m(r,s),e=!0},p(r,s){t?t.p&&(!e||32768&s)&&Ke(t,n,r,r[15],e?Ze(n,r[15],s,N9):Xe(r[15]),Yd):o&&o.p&&(!e||167&s)&&o.p(r,e?s:-1)},i(r){e||(d(o,r),e=!0)},o(r){$(o,r),e=!1},d(r){o&&o.d(r)}}}function B9(i){let e,n,t;function o(s){i[13](s)}let r={outsideNode:i[7],size:1,weight:"bold",value:i[1]||"New Thread",color:"primary",isEditable:i[2],showCommitButton:!1,singleClickToEdit:!0,onChange:i[5]};return i[0]!==void 0&&(r.isEditing=i[0]),e=new I9({props:r}),et.push(()=>Et(e,"isEditing",o)),{c(){v(e.$$.fragment)},m(s,c){w(e,s,c),t=!0},p(s,c){const a={};128&c&&(a.outsideNode=s[7]),2&c&&(a.value=s[1]||"New Thread"),4&c&&(a.isEditable=s[2]),32&c&&(a.onChange=s[5]),!n&&1&c&&(n=!0,a.isEditing=s[0],Rt(()=>n=!1)),e.$set(a)},i(s){t||(d(e.$$.fragment,s),t=!0)},o(s){$(e.$$.fragment,s),t=!1},d(s){y(e,s)}}}function e$(i){let e;const n=i[11]["title-actions"],t=Ye(n,i,i[15],Gd);return{c(){t&&t.c()},m(o,r){t&&t.m(o,r),e=!0},p(o,r){t&&t.p&&(!e||32768&r)&&Ke(t,n,o,o[15],e?Ze(n,o[15],r,D9):Xe(o[15]),Gd)},i(o){e||(d(t,o),e=!0)},o(o){$(t,o),e=!1},d(o){t&&t.d(o)}}}function t$(i){let e,n;const t=i[11]["info-row"],o=Ye(t,i,i[15],Vd);return{c(){e=L("div"),o&&o.c(),A(e,"class","c-thread-header__info-row svelte-16e10uw")},m(r,s){x(r,e,s),o&&o.m(e,null),n=!0},p(r,s){o&&o.p&&(!n||32768&s)&&Ke(o,t,r,r[15],n?Ze(t,r[15],s,R9):Xe(r[15]),Vd)},i(r){n||(d(o,r),n=!0)},o(r){$(o,r),n=!1},d(r){r&&b(e),o&&o.d(r)}}}function U9(i){let e,n,t,o,r,s,c,a,l,u,f,m,p,_;Pn(i[12]);const M=i[11].banner,C=Ye(M,i,i[15],Zd);let T=i[4]&&Jd(i);const E=i[11]["title-notice"],R=Ye(E,i,i[15],Kd);let N=!i[3]&&Qd(i),J=!i[0]&&e$(i),Q=!i[8]&&t$(i);const X=i[11].status,K=Ye(X,i,i[15],Wd);return{c(){e=L("div"),n=L("div"),C&&C.c(),t=B(),o=L("div"),T&&T.c(),r=B(),s=L("div"),R&&R.c(),c=B(),N&&N.c(),a=B(),J&&J.c(),l=B(),Q&&Q.c(),u=B(),f=L("div"),K&&K.c(),A(n,"class","c-thread-header__banner svelte-16e10uw"),A(s,"class","c-thread-header__title-main svelte-16e10uw"),A(o,"class","c-thread-header__title svelte-16e10uw"),A(f,"class","c-thread-header__status svelte-16e10uw"),A(e,"class","c-thread-header svelte-16e10uw"),ke(e,"c-thread-header--is-editing",i[2]&&i[0]),ke(e,"c-thread-header--is-editable",i[2])},m(H,Y){x(H,e,Y),F(e,n),C&&C.m(n,null),F(e,t),F(e,o),T&&T.m(o,null),F(o,r),F(o,s),R&&R.m(s,null),F(s,c),N&&N.m(s,null),F(o,a),J&&J.m(o,null),F(e,l),Q&&Q.m(e,null),F(e,u),F(e,f),K&&K.m(f,null),i[14](e),m=!0,p||(_=Le(window,"resize",i[12]),p=!0)},p(H,[Y]){C&&C.p&&(!m||32768&Y)&&Ke(C,M,H,H[15],m?Ze(M,H[15],Y,O9):Xe(H[15]),Zd),H[4]?T?(T.p(H,Y),16&Y&&d(T,1)):(T=Jd(H),T.c(),d(T,1),T.m(o,r)):T&&(j(),$(T,1,1,()=>{T=null}),q()),R&&R.p&&(!m||32768&Y)&&Ke(R,E,H,H[15],m?Ze(E,H[15],Y,P9):Xe(H[15]),Kd),H[3]?N&&(j(),$(N,1,1,()=>{N=null}),q()):N?(N.p(H,Y),8&Y&&d(N,1)):(N=Qd(H),N.c(),d(N,1),N.m(s,null)),H[0]?J&&(j(),$(J,1,1,()=>{J=null}),q()):J?(J.p(H,Y),1&Y&&d(J,1)):(J=e$(H),J.c(),d(J,1),J.m(o,null)),H[8]?Q&&(j(),$(Q,1,1,()=>{Q=null}),q()):Q?(Q.p(H,Y),256&Y&&d(Q,1)):(Q=t$(H),Q.c(),d(Q,1),Q.m(e,u)),K&&K.p&&(!m||32768&Y)&&Ke(K,X,H,H[15],m?Ze(X,H[15],Y,L9):Xe(H[15]),Wd),(!m||5&Y)&&ke(e,"c-thread-header--is-editing",H[2]&&H[0]),(!m||4&Y)&&ke(e,"c-thread-header--is-editable",H[2])},i(H){m||(d(C,H),d(T),d(R,H),d(N),d(J),d(Q),d(K,H),m=!0)},o(H){$(C,H),$(T),$(R,H),$(N),$(J),$(Q),$(K,H),m=!1},d(H){H&&b(e),C&&C.d(H),T&&T.d(),R&&R.d(H),N&&N.d(),J&&J.d(),Q&&Q.d(),K&&K.d(H),i[14](null),p=!1,_()}}}function H9(i,e,n){let t,o,{$$slots:r={},$$scope:s}=e,{title:c=""}=e,{isSquished:a=!1}=e,{isEditing:l=!1}=e,{isEditable:u=!0}=e,{hideTitle:f=!1}=e,{showEditIcon:m=!0}=e,{onRename:p=M=>{}}=e,_=0;return i.$$set=M=>{"title"in M&&n(1,c=M.title),"isSquished"in M&&n(10,a=M.isSquished),"isEditing"in M&&n(0,l=M.isEditing),"isEditable"in M&&n(2,u=M.isEditable),"hideTitle"in M&&n(3,f=M.hideTitle),"showEditIcon"in M&&n(4,m=M.showEditIcon),"onRename"in M&&n(5,p=M.onRename),"$$scope"in M&&n(15,s=M.$$scope)},i.$$.update=()=>{1088&i.$$.dirty&&n(8,t=a||_<700)},[l,c,u,f,m,p,_,o,t,function(){n(0,l=u&&!0)},a,r,function(){n(6,_=window.innerHeight)},function(M){l=M,n(0,l)},function(M){et[M?"unshift":"push"](()=>{o=M,n(7,o)})},s]}class pm extends ue{constructor(e){super(),de(this,e,H9,U9,ce,{title:1,isSquished:10,isEditing:0,isEditable:2,hideTitle:3,showEditIcon:4,onRename:5})}}function n$(i){let e,n,t,o;function r(c){i[17](c)}let s={title:i[9]?"Generate a setup script":i[6],hideTitle:i[9],isEditable:!i[9],showEditIcon:!1,onRename:i[13],$$slots:{"info-row":[nA],"title-actions":[K9],"title-notice":[Y9],banner:[V9],default:[j9]},$$scope:{ctx:i}};return i[4]!==void 0&&(s.isEditing=i[4]),n=new pm({props:s}),et.push(()=>Et(n,"isEditing",r)),{c(){e=L("div"),v(n.$$.fragment),A(e,"class","c-agent-header svelte-12lv7h"),ke(e,"c-agent-header--setup-script",i[9]),ke(e,"is-in-remote",i[8])},m(c,a){x(c,e,a),w(n,e,null),o=!0},p(c,a){const l={};576&a&&(l.title=c[9]?"Generate a setup script":c[6]),512&a&&(l.hideTitle=c[9]),512&a&&(l.isEditable=!c[9]),264119&a&&(l.$$scope={dirty:a,ctx:c}),!t&&16&a&&(t=!0,l.isEditing=c[4],Rt(()=>t=!1)),n.$set(l),(!o||512&a)&&ke(e,"c-agent-header--setup-script",c[9]),(!o||256&a)&&ke(e,"is-in-remote",c[8])},i(c){o||(d(n.$$.fragment,c),o=!0)},o(c){$(n.$$.fragment,c),o=!1},d(c){c&&b(e),y(n)}}}function o$(i){let e,n;return e=new qi({props:{slot:"icon"}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function j9(i){let e,n,t=i[9]&&o$();return{c(){t&&t.c(),e=me()},m(o,r){t&&t.m(o,r),x(o,e,r),n=!0},p(o,r){o[9]?t?512&r&&d(t,1):(t=o$(),t.c(),d(t,1),t.m(e.parentNode,e)):t&&(j(),$(t,1,1,()=>{t=null}),q())},i(o){n||(d(t),n=!0)},o(o){$(t),n=!1},d(o){o&&b(e),t&&t.d(o)}}}function q9(i){let e,n,t,o,r;return t=new Cf({}),{c(){e=L("span"),n=L("div"),v(t.$$.fragment),o=G(`
            Generate a setup script`),A(n,"class","c-setup-script-badge svelte-12lv7h"),A(e,"class","c-agent-header-banner__text svelte-12lv7h")},m(s,c){x(s,e,c),F(e,n),w(t,n,null),F(e,o),r=!0},i(s){r||(d(t.$$.fragment,s),r=!0)},o(s){$(t.$$.fragment,s),r=!1},d(s){s&&b(e),y(t)}}}function W9(i){let e,n,t,o,r;return n=new qi({}),{c(){e=L("div"),v(n.$$.fragment),t=B(),o=L("div"),o.innerHTML='<div class="c-agent-header-banner__text svelte-12lv7h">Running in the cloud</div> <div class="c-agent-header-banner__text c-agent-header-banner__text--secondary svelte-12lv7h">Workspace opened via SSH in this VSCode window</div>',A(o,"class","c-agent-header-banner__stack svelte-12lv7h"),A(e,"class","c-agent-header-banner__with-icon svelte-12lv7h")},m(s,c){x(s,e,c),w(n,e,null),F(e,t),F(e,o),r=!0},i(s){r||(d(n.$$.fragment,s),r=!0)},o(s){$(n.$$.fragment,s),r=!1},d(s){s&&b(e),y(n)}}}function r$(i){let e,n;return e=new mm({props:{agentId:i[1],selectedBranch:i[5],isPinned:i[7],togglePinned:i[12]}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p(t,o){const r={};2&o&&(r.agentId=t[1]),32&o&&(r.selectedBranch=t[5]),128&o&&(r.isPinned=t[7]),e.$set(r)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function V9(i){var u;let e,n,t,o,r;const s=[W9,q9],c=[];function a(f,m){var p;return f[8]?0:(p=f[0])!=null&&p.is_setup_script_agent?1:-1}~(e=a(i))&&(n=c[e]=s[e](i));let l=i[1]&&(i[8]||((u=i[0])==null?void 0:u.is_setup_script_agent))&&r$(i);return{c(){n&&n.c(),t=B(),o=L("div"),l&&l.c(),A(o,"class","c-agent-header__actions svelte-12lv7h")},m(f,m){~e&&c[e].m(f,m),x(f,t,m),x(f,o,m),l&&l.m(o,null),r=!0},p(f,m){var _;let p=e;e=a(f),e!==p&&(n&&(j(),$(c[p],1,1,()=>{c[p]=null}),q()),~e?(n=c[e],n||(n=c[e]=s[e](f),n.c()),d(n,1),n.m(t.parentNode,t)):n=null),f[1]&&(f[8]||(_=f[0])!=null&&_.is_setup_script_agent)?l?(l.p(f,m),259&m&&d(l,1)):(l=r$(f),l.c(),d(l,1),l.m(o,null)):l&&(j(),$(l,1,1,()=>{l=null}),q())},i(f){r||(d(n),d(l),r=!0)},o(f){$(n),$(l),r=!1},d(f){f&&(b(t),b(o)),~e&&c[e].d(f),l&&l.d()}}}function i$(i){let e,n,t;return n=new Ge({props:{size:1,truncate:!0,weight:"medium",$$slots:{default:[G9]},$$scope:{ctx:i}}}),{c(){e=L("div"),v(n.$$.fragment),A(e,"class","c-agent-title-content svelte-12lv7h")},m(o,r){x(o,e,r),w(n,e,null),t=!0},i(o){t||(d(n.$$.fragment,o),t=!0)},o(o){$(n.$$.fragment,o),t=!1},d(o){o&&b(e),y(n)}}}function G9(i){let e,n,t,o;return{c(){e=G("We've tasked an agent to generate a setup script for your repository."),n=L("span"),n.textContent="..",t=B(),o=L("span"),o.textContent=`Once created, save it to use in a new remote agent, to install dependencies &
                configure the env before the agent starts.`,A(n,"class","c-agent-title-content__long-text-alternative svelte-12lv7h"),A(o,"class","c-agent-title-content__long-text svelte-12lv7h")},m(r,s){x(r,e,s),x(r,n,s),x(r,t,s),x(r,o,s)},p:P,d(r){r&&(b(e),b(n),b(t),b(o))}}}function Y9(i){let e,n,t=i[9]&&i$(i);return{c(){e=L("div"),t&&t.c(),A(e,"slot","title-notice")},m(o,r){x(o,e,r),t&&t.m(e,null),n=!0},p(o,r){o[9]?t?512&r&&d(t,1):(t=i$(o),t.c(),d(t,1),t.m(e,null)):t&&(j(),$(t,1,1,()=>{t=null}),q())},i(o){n||(d(t),n=!0)},o(o){$(t),n=!1},d(o){o&&b(e),t&&t.d()}}}function s$(i){let e,n,t;function o(s){i[16](s)}let r={agentId:i[1],selectedBranch:i[5],isPinned:i[7],togglePinned:i[12],enableRename:!0};return i[4]!==void 0&&(r.isEditing=i[4]),e=new mm({props:r}),et.push(()=>Et(e,"isEditing",o)),{c(){v(e.$$.fragment)},m(s,c){w(e,s,c),t=!0},p(s,c){const a={};2&c&&(a.agentId=s[1]),32&c&&(a.selectedBranch=s[5]),128&c&&(a.isPinned=s[7]),!n&&16&c&&(n=!0,a.isEditing=s[4],Rt(()=>n=!1)),e.$set(a)},i(s){t||(d(e.$$.fragment,s),t=!0)},o(s){$(e.$$.fragment,s),t=!1},d(s){y(e,s)}}}function K9(i){var o;let e,n,t=i[1]&&!(i[8]||(o=i[0])!=null&&o.is_setup_script_agent)&&s$(i);return{c(){e=L("div"),t&&t.c(),A(e,"slot","title-actions"),A(e,"class","c-agent-header__menu svelte-12lv7h")},m(r,s){x(r,e,s),t&&t.m(e,null),n=!0},p(r,s){var c;!r[1]||r[8]||(c=r[0])!=null&&c.is_setup_script_agent?t&&(j(),$(t,1,1,()=>{t=null}),q()):t?(t.p(r,s),259&s&&d(t,1)):(t=s$(r),t.c(),d(t,1),t.m(e,null))},i(r){n||(d(t),n=!0)},o(r){$(t),n=!1},d(r){r&&b(e),t&&t.d()}}}function X9(i){let e;return{c(){e=G(i[10])},m(n,t){x(n,e,t)},p(n,t){1024&t&&_e(e,n[10])},d(n){n&&b(e)}}}function Z9(i){let e,n,t;return n=new Ge({props:{size:1,$$slots:{default:[X9]},$$scope:{ctx:i}}}),{c(){e=L("div"),v(n.$$.fragment),A(e,"class","c-agent-info-value svelte-12lv7h")},m(o,r){x(o,e,r),w(n,e,null),t=!0},p(o,r){const s={};263168&r&&(s.$$scope={dirty:r,ctx:o}),n.$set(s)},i(o){t||(d(n.$$.fragment,o),t=!0)},o(o){$(n.$$.fragment,o),t=!1},d(o){o&&b(e),y(n)}}}function J9(i){let e,n,t,o,r;return n=new Pp({}),o=new Ne({props:{content:`Repository: ${i[2]}`,triggerOn:[Je.Hover],$$slots:{default:[Z9]},$$scope:{ctx:i}}}),{c(){e=L("a"),v(n.$$.fragment),t=B(),v(o.$$.fragment),A(e,"href",i[2]),A(e,"class","c-agent-info-item svelte-12lv7h")},m(s,c){x(s,e,c),w(n,e,null),F(e,t),w(o,e,null),r=!0},p(s,c){const a={};4&c&&(a.content=`Repository: ${s[2]}`),263168&c&&(a.$$scope={dirty:c,ctx:s}),o.$set(a),(!r||4&c)&&A(e,"href",s[2])},i(s){r||(d(n.$$.fragment,s),d(o.$$.fragment,s),r=!0)},o(s){$(n.$$.fragment,s),$(o.$$.fragment,s),r=!1},d(s){s&&b(e),y(n),y(o)}}}function Q9(i){let e;return{c(){e=G(i[5])},m(n,t){x(n,e,t)},p(n,t){32&t&&_e(e,n[5])},d(n){n&&b(e)}}}function eA(i){let e,n,t;return n=new Ge({props:{size:1,$$slots:{default:[Q9]},$$scope:{ctx:i}}}),{c(){e=L("div"),v(n.$$.fragment),A(e,"class","c-agent-info-value svelte-12lv7h")},m(o,r){x(o,e,r),w(n,e,null),t=!0},p(o,r){const s={};262176&r&&(s.$$scope={dirty:r,ctx:o}),n.$set(s)},i(o){t||(d(n.$$.fragment,o),t=!0)},o(o){$(n.$$.fragment,o),t=!1},d(o){o&&b(e),y(n)}}}function tA(i){let e,n,t,o,r,s;return n=new rm({}),o=new Ne({props:{content:`Started on branch: ${i[5]}`,triggerOn:[Je.Hover],$$slots:{default:[eA]},$$scope:{ctx:i}}}),{c(){e=L("a"),v(n.$$.fragment),t=B(),v(o.$$.fragment),A(e,"href",r=`${i[2]}/tree/${i[5]}`),A(e,"class","c-agent-info-item svelte-12lv7h")},m(c,a){x(c,e,a),w(n,e,null),F(e,t),w(o,e,null),s=!0},p(c,a){const l={};32&a&&(l.content=`Started on branch: ${c[5]}`),262176&a&&(l.$$scope={dirty:a,ctx:c}),o.$set(l),(!s||36&a&&r!==(r=`${c[2]}/tree/${c[5]}`))&&A(e,"href",r)},i(c){s||(d(n.$$.fragment,c),d(o.$$.fragment,c),s=!0)},o(c){$(n.$$.fragment,c),$(o.$$.fragment,c),s=!1},d(c){c&&b(e),y(n),y(o)}}}function nA(i){let e,n,t,o,r;return n=new Ao.Root({props:{color:"neutral",radius:"full",$$slots:{default:[J9]},$$scope:{ctx:i}}}),o=new Ao.Root({props:{color:"neutral",radius:"full",$$slots:{default:[tA]},$$scope:{ctx:i}}}),{c(){e=L("div"),v(n.$$.fragment),t=B(),v(o.$$.fragment),A(e,"slot","info-row"),A(e,"class","c-agent-info-row svelte-12lv7h")},m(s,c){x(s,e,c),w(n,e,null),F(e,t),w(o,e,null),r=!0},p(s,c){const a={};263172&c&&(a.$$scope={dirty:c,ctx:s}),n.$set(a);const l={};262180&c&&(l.$$scope={dirty:c,ctx:s}),o.$set(l)},i(s){r||(d(n.$$.fragment,s),d(o.$$.fragment,s),r=!0)},o(s){$(n.$$.fragment,s),$(o.$$.fragment,s),r=!1},d(s){s&&b(e),y(n),y(o)}}}function oA(i){let e,n,t,o;Pn(i[15]);let r=i[0]&&n$(i);return{c(){r&&r.c(),e=me()},m(s,c){r&&r.m(s,c),x(s,e,c),n=!0,t||(o=Le(window,"resize",i[15]),t=!0)},p(s,[c]){s[0]?r?(r.p(s,c),1&c&&d(r,1)):(r=n$(s),r.c(),d(r,1),r.m(e.parentNode,e)):r&&(j(),$(r,1,1,()=>{r=null}),q())},i(s){n||(d(r),n=!0)},o(s){$(r),n=!1},d(s){s&&b(e),r&&r.d(s),t=!1,o()}}}function rA(i,e,n){let t,o,r,s,c,a,l,u,f,m,p=0;const _=Se(Tn.key);Te(i,_,C=>n(14,m=C));let M=!1;return i.$$.update=()=>{var C,T,E,R,N,J;16384&i.$$.dirty&&n(0,t=m==null?void 0:m.currentAgent),1&i.$$.dirty&&n(1,o=t==null?void 0:t.remote_agent_id),1&i.$$.dirty&&n(2,r=((E=(T=(C=t==null?void 0:t.workspace_setup)==null?void 0:C.starting_files)==null?void 0:T.github_commit_ref)==null?void 0:E.repository_url)||""),4&i.$$.dirty&&n(10,s=Es(r)),1&i.$$.dirty&&n(6,c=(t==null?void 0:t.title)??(t==null?void 0:t.session_summary)??""),1&i.$$.dirty&&n(9,a=(t==null?void 0:t.is_setup_script_agent)||!1),16386&i.$$.dirty&&n(7,l=o&&(m==null?void 0:m.pinnedAgents[o])||!1),16384&i.$$.dirty&&n(8,u=m==null?void 0:m.isRemoteAgentSshWindow),1&i.$$.dirty&&n(5,f=(J=(N=(R=t==null?void 0:t.workspace_setup)==null?void 0:R.starting_files)==null?void 0:N.github_commit_ref)==null?void 0:J.git_ref)},[t,o,r,p,M,f,c,l,u,a,s,_,function(){o&&(_==null||_.toggleAgentPinned(o,l))},async function(C){if(C.trim()&&C!==c&&o)try{_&&await _.updateRemoteAgentTitle(o,C)}catch(T){console.error("Failed to update remote agent title:",T)}},m,function(){n(3,p=window.innerHeight)},function(C){M=C,n(4,M)},function(C){M=C,n(4,M)}]}class iA extends ue{constructor(e){super(),de(this,e,rA,oA,ce,{})}}function sA(i){let e,n,t=[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 384 512"},i[0]],o={};for(let r=0;r<t.length;r+=1)o=Me(o,t[r]);return{c(){e=rt("svg"),n=new en(!0),this.h()},l(r){e=tn(r,"svg",{xmlns:!0,"data-ds-icon":!0,viewBox:!0});var s=nn(e);n=on(s,!0),s.forEach(b),this.h()},h(){n.a=null,ut(e,o)},m(r,s){rn(r,e,s),n.m('<!--! Font Awesome Pro 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2024 Fonticons, Inc.--><path d="M175 505c9.4 9.4 24.6 9.4 33.9 0L345 369c9.4-9.4 9.4-24.6 0-33.9s-24.6-9.4-33.9 0l-95 95L216 24c0-13.3-10.7-24-24-24s-24 10.7-24 24v406.1L73 335c-9.4-9.4-24.6-9.4-33.9 0s-9.4 24.6 0 33.9z"/>',e)},p(r,[s]){ut(e,o=Mt(t,[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 384 512"},1&s&&r[0]]))},i:P,o:P,d(r){r&&b(e)}}}function aA(i,e,n){return i.$$set=t=>{n(0,e=Me(Me({},e),it(t)))},[e=it(e)]}class cA extends ue{constructor(e){super(),de(this,e,aA,sA,ce,{})}}const gm=Symbol("conversationNavigationItems");function lA(){return Se(gm)}function a$(i){let e,n,t,o,r,s,c,a;return n=new Hs({props:{size:1,orientation:"vertical"}}),r=new Ne({props:{content:"Previous",side:"bottom",nested:!1,$$slots:{default:[dA]},$$scope:{ctx:i}}}),c=new Ne({props:{content:"Next",side:"bottom",nested:!1,$$slots:{default:[fA]},$$scope:{ctx:i}}}),{c(){e=L("div"),v(n.$$.fragment),t=B(),o=L("div"),v(r.$$.fragment),s=B(),v(c.$$.fragment),A(o,"class","c-conversation-navigation__buttons svelte-12q4trs"),A(e,"class","c-conversation-navigation svelte-12q4trs")},m(l,u){x(l,e,u),w(n,e,null),F(e,t),F(e,o),w(r,o,null),F(o,s),w(c,o,null),a=!0},p(l,u){const f={};258&u&&(f.$$scope={dirty:u,ctx:l}),r.$set(f);const m={};257&u&&(m.$$scope={dirty:u,ctx:l}),c.$set(m)},i(l){a||(d(n.$$.fragment,l),d(r.$$.fragment,l),d(c.$$.fragment,l),a=!0)},o(l){$(n.$$.fragment,l),$(r.$$.fragment,l),$(c.$$.fragment,l),a=!1},d(l){l&&b(e),y(n),y(r),y(c)}}}function uA(i){let e,n;return e=new hp({}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function dA(i){let e,n;return e=new dt({props:{variant:"ghost-block",color:"neutral",size:.5,disabled:!i[1],$$slots:{default:[uA]},$$scope:{ctx:i}}}),e.$on("click",i[4]),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p(t,o){const r={};2&o&&(r.disabled=!t[1]),256&o&&(r.$$scope={dirty:o,ctx:t}),e.$set(r)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function $A(i){let e,n;return e=new cA({}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function fA(i){let e,n;return e=new dt({props:{variant:"ghost-block",color:"neutral",size:.5,disabled:!i[0],$$slots:{default:[$A]},$$scope:{ctx:i}}}),e.$on("click",i[3]),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p(t,o){const r={};1&o&&(r.disabled=!t[0]),256&o&&(r.$$scope={dirty:o,ctx:t}),e.$set(r)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function mA(i){let e,n,t=(i[0]||i[1])&&a$(i);return{c(){t&&t.c(),e=me()},m(o,r){t&&t.m(o,r),x(o,e,r),n=!0},p(o,[r]){o[0]||o[1]?t?(t.p(o,r),3&r&&d(t,1)):(t=a$(o),t.c(),d(t,1),t.m(e.parentNode,e)):t&&(j(),$(t,1,1,()=>{t=null}),q())},i(o){n||(d(t),n=!0)},o(o){$(t),n=!1},d(o){o&&b(e),t&&t.d(o)}}}function pA(i,e,n){let t,o,r,s;const c=lA();Te(i,c,l=>n(6,s=l));const a=l=>{if(!l)return;const u=document==null?void 0:document.querySelector(`[data-timestamp-id="${l}"]`);if(u&&u.offsetParent){const f=u.offsetTop;u.offsetParent.scrollTo({top:f,behavior:"smooth"})}};return i.$$.update=()=>{64&i.$$.dirty&&n(5,t=s.all.indexOf(s.current)),96&i.$$.dirty&&n(1,o=s.all[t-1]),96&i.$$.dirty&&n(0,r=s.all[t+1])},[r,o,c,function(){a(r)},function(){a(o)},t,s]}function gA(i){let e,n;const t=i[2].default,o=Ye(t,i,i[1],null);return{c(){e=L("div"),o&&o.c(),A(e,"data-timestamp-id",i[0])},m(r,s){x(r,e,s),o&&o.m(e,null),n=!0},p(r,[s]){o&&o.p&&(!n||2&s)&&Ke(o,t,r,r[1],n?Ze(t,r[1],s,null):Xe(r[1]),null),(!n||1&s)&&A(e,"data-timestamp-id",r[0])},i(r){n||(d(o,r),n=!0)},o(r){$(o,r),n=!1},d(r){r&&b(e),o&&o.d(r)}}}function hA(i,e,n){let{$$slots:t={},$$scope:o}=e,{id:r}=e;return i.$$set=s=>{"id"in s&&n(0,r=s.id),"$$scope"in s&&n(1,o=s.$$scope)},[r,o,t]}const vA={Controls:class extends ue{constructor(i){super(),de(this,i,pA,mA,ce,{})}},Item:class extends ue{constructor(i){super(),de(this,i,hA,gA,ce,{id:0})}}};function wA(i){let e,n;return e=new ef({}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function yA(i){let e,n;return e=new Fp({}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function bA(i){let e,n,t,o;const r=[yA,wA],s=[];function c(a,l){return a[1]?0:1}return e=c(i),n=s[e]=r[e](i),{c(){n.c(),t=me()},m(a,l){s[e].m(a,l),x(a,t,l),o=!0},p(a,l){let u=e;e=c(a),e!==u&&(j(),$(s[u],1,1,()=>{s[u]=null}),q(),n=s[e],n||(n=s[e]=r[e](a),n.c()),d(n,1),n.m(t.parentNode,t))},i(a){o||(d(n),o=!0)},o(a){$(n),o=!1},d(a){a&&b(t),s[e].d(a)}}}function c$(i){var r;let e,n,t,o;return e=new im({props:{thread:i[4],type:i[1]?"localAgent":"chat",enableShareService:(r=i[2].flags)==null?void 0:r.enableShareService,onRename:i[8]}}),t=new vA.Controls({}),{c(){v(e.$$.fragment),n=B(),v(t.$$.fragment)},m(s,c){w(e,s,c),x(s,n,c),w(t,s,c),o=!0},p(s,c){var l;const a={};16&c&&(a.thread=s[4]),2&c&&(a.type=s[1]?"localAgent":"chat"),4&c&&(a.enableShareService=(l=s[2].flags)==null?void 0:l.enableShareService),e.$set(a)},i(s){o||(d(e.$$.fragment,s),d(t.$$.fragment,s),o=!0)},o(s){$(e.$$.fragment,s),$(t.$$.fragment,s),o=!1},d(s){s&&b(n),y(e,s),y(t,s)}}}function xA(i){let e,n,t=!i[5]&&c$(i);return{c(){e=L("div"),t&&t.c(),A(e,"slot","title-actions"),A(e,"class","c-thread-header__menu svelte-eyi124")},m(o,r){x(o,e,r),t&&t.m(e,null),n=!0},p(o,r){o[5]?t&&(j(),$(t,1,1,()=>{t=null}),q()):t?(t.p(o,r),32&r&&d(t,1)):(t=c$(o),t.c(),d(t,1),t.m(e,null))},i(o){n||(d(t),n=!0)},o(o){$(t),n=!1},d(o){o&&b(e),t&&t.d()}}}function _A(i){let e,n,t;function o(s){i[12](s)}let r={onRename:i[7],title:i[0],$$slots:{"title-actions":[xA],icon:[bA]},$$scope:{ctx:i}};return i[3]!==void 0&&(r.isEditing=i[3]),e=new pm({props:r}),et.push(()=>Et(e,"isEditing",o)),{c(){v(e.$$.fragment)},m(s,c){w(e,s,c),t=!0},p(s,[c]){const a={};1&c&&(a.title=s[0]),16438&c&&(a.$$scope={dirty:c,ctx:s}),!n&&8&c&&(n=!0,a.isEditing=s[3],Rt(()=>n=!1)),e.$set(a)},i(s){t||(d(e.$$.fragment,s),t=!0)},o(s){$(e.$$.fragment,s),t=!1},d(s){y(e,s)}}}function CA(i,e,n){let t,o,r,s,c,a,l,u;const f=Se("chatModel");Te(i,f,p=>n(2,u=p));let m=!1;return i.$$.update=()=>{var p,_;4&i.$$.dirty&&n(11,t=u.currentConversationModel),2048&i.$$.dirty&&n(5,o=Sn.isNew(t)),4&i.$$.dirty&&n(10,r=u.currentConversationId||""),2048&i.$$.dirty&&n(1,s=((p=t==null?void 0:t.extraData)==null?void 0:p.isAgentConversation)===!0),1028&i.$$.dirty&&n(9,c=u.conversations[r]),514&i.$$.dirty&&n(0,a=(c==null?void 0:c.name)||((_=((c==null?void 0:c.chatHistory)||[]).find(M=>M.request_message))==null?void 0:_.request_message)||""||"New "+(s?"Agent":"Chat")),1539&i.$$.dirty&&n(4,l={id:r,type:s?"localAgent":"chat",title:a,isPinned:(c==null?void 0:c.isPinned)||!1,conversation:{id:r,isShareable:(c==null?void 0:c.isShareable)||!1}})},[a,s,u,m,l,o,f,function(p){f.renameConversation(r,p)},function(){setTimeout(()=>{n(3,m=!0)},10)},c,r,t,function(p){m=p,n(3,m)}]}class AA extends ue{constructor(e){super(),de(this,e,CA,_A,ce,{})}}function MA(i){let e,n;return e=new AA({}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function kA(i){let e,n;return e=new iA({}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function SA(i){let e,n,t,o;const r=[kA,MA],s=[];function c(a,l){var u;return(u=a[1])!=null&&u.isActive?0:a[0]?1:-1}return~(e=c(i))&&(n=s[e]=r[e](i)),{c(){n&&n.c(),t=me()},m(a,l){~e&&s[e].m(a,l),x(a,t,l),o=!0},p(a,[l]){let u=e;e=c(a),e!==u&&(n&&(j(),$(s[u],1,1,()=>{s[u]=null}),q()),~e?(n=s[e],n||(n=s[e]=r[e](a),n.c()),d(n,1),n.m(t.parentNode,t)):n=null)},i(a){o||(d(n),o=!0)},o(a){$(n),o=!1},d(a){a&&b(t),~e&&s[e].d(a)}}}function TA(i,e,n){let t,o,r;const s=Se(Tn.key);Te(i,s,a=>n(1,r=a));const c=Se("chatModel");return Te(i,c,a=>n(4,o=a)),i.$$.update=()=>{16&i.$$.dirty&&n(0,t=o.currentConversationId)},[t,r,s,c,o]}class EA extends ue{constructor(e){super(),de(this,e,TA,SA,ce,{})}}function IA(i){let e,n,t;return e=new zo({props:{iconName:"play_arrow"}}),{c(){v(e.$$.fragment),n=G(`
    Feedback`)},m(o,r){w(e,o,r),x(o,n,r),t=!0},p:P,i(o){t||(d(e.$$.fragment,o),t=!0)},o(o){$(e.$$.fragment,o),t=!1},d(o){o&&b(n),y(e,o)}}}function LA(i){let e,n,t,o,r,s;function c(l){i[3](l)}let a={disabled:i[1],variant:"surface",size:2};return i[0]!==void 0&&(a.value=i[0]),n=new nr({props:a}),et.push(()=>Et(n,"value",c)),n.$on("keydown",i[2]),r=new ht({props:{disabled:!i[0]||i[1],size:2,variant:"solid",color:"accent",$$slots:{default:[IA]},$$scope:{ctx:i}}}),r.$on("click",i[4]),{c(){e=L("div"),v(n.$$.fragment),o=B(),v(r.$$.fragment),A(e,"class","simple-input-container svelte-16gfgo6")},m(l,u){x(l,e,u),w(n,e,null),F(e,o),w(r,e,null),s=!0},p(l,[u]){const f={};2&u&&(f.disabled=l[1]),!t&&1&u&&(t=!0,f.value=l[0],Rt(()=>t=!1)),n.$set(f);const m={};3&u&&(m.disabled=!l[0]||l[1]),128&u&&(m.$$scope={dirty:u,ctx:l}),r.$set(m)},i(l){s||(d(n.$$.fragment,l),d(r.$$.fragment,l),s=!0)},o(l){$(n.$$.fragment,l),$(r.$$.fragment,l),s=!1},d(l){l&&b(e),y(n),y(r)}}}function RA(i,e,n){const t=Se("autofixConversationModel");if(!t)throw new Error("AutofixConversationModel not found in context");let o="",r=!1;async function s(c){if(c.shiftKey||c.ctrlKey||c.metaKey)return!1;if(c.stopPropagation(),c.key==="Enter"&&o.length>0){n(1,r=!0);try{await t.handleUserSteering(o)}finally{n(1,r=!1)}return n(0,o=""),!0}return c.key==="Escape"}return ro(()=>{const c=document.querySelector("input");c&&(c.focus(),c.select())}),[o,r,s,function(c){o=c,n(0,o)},()=>s(new KeyboardEvent("keydown",{key:"Enter"}))]}class DA extends ue{constructor(e){super(),de(this,e,RA,LA,ce,{})}}function l$(i){let e,n,t;return n=new Ne({props:{class:"full-width-button",content:i[0],triggerOn:[Je.Hover],$$slots:{default:[PA]},$$scope:{ctx:i}}}),{c(){e=L("div"),v(n.$$.fragment),A(e,"class","create-agent-footer svelte-34my2")},m(o,r){x(o,e,r),w(n,e,null),t=!0},p(o,r){const s={};1&r&&(s.content=o[0]),131084&r&&(s.$$scope={dirty:r,ctx:o}),n.$set(s)},i(o){t||(d(n.$$.fragment,o),t=!0)},o(o){$(n.$$.fragment,o),t=!1},d(o){o&&b(e),y(n)}}}function NA(i){let e;return{c(){e=G("Create agent")},m(n,t){x(n,e,t)},d(n){n&&b(e)}}}function PA(i){let e,n;return e=new ht({props:{variant:"solid",color:"accent",size:2,loading:i[3],disabled:i[2],$$slots:{default:[NA]},$$scope:{ctx:i}}}),e.$on("click",i[5]),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p(t,o){const r={};8&o&&(r.loading=t[3]),4&o&&(r.disabled=t[2]),131072&o&&(r.$$scope={dirty:o,ctx:t}),e.$set(r)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function FA(i){let e,n,t=i[1]&&l$(i);return{c(){t&&t.c(),e=me()},m(o,r){t&&t.m(o,r),x(o,e,r),n=!0},p(o,[r]){o[1]?t?(t.p(o,r),2&r&&d(t,1)):(t=l$(o),t.c(),d(t,1),t.m(e.parentNode,e)):t&&(j(),$(t,1,1,()=>{t=null}),q())},i(o){n||(d(t),n=!0)},o(o){$(t),n=!1},d(o){o&&b(e),t&&t.d(o)}}}function OA(i,e,n){let t,o,r,s,c,a,l,u,f,m,p,_;const M=Se(Tn.key);Te(i,M,R=>n(12,_=R));const C=Se(hr.key),T=Se("chatModel"),E=jf(M,T.currentConversationModel,C);return i.$$.update=()=>{var R,N,J;4096&i.$$.dirty&&n(8,t=((R=_.newAgentDraft)==null?void 0:R.commitRef)??null),4096&i.$$.dirty&&n(7,o=((N=_.newAgentDraft)==null?void 0:N.selectedBranch)??null),4096&i.$$.dirty&&(r=((J=_.newAgentDraft)==null?void 0:J.setupScript)??null),4096&i.$$.dirty&&n(3,s=_.isCreatingAgent),4096&i.$$.dirty&&n(11,c=!!_.maxRemoteAgents&&_.agentOverviews.length>=_.maxRemoteAgents),4096&i.$$.dirty&&n(10,a=!!_.maxActiveRemoteAgents&&_.agentOverviews.filter(Q=>Q.workspace_status===pf.workspaceRunning).length>=_.maxActiveRemoteAgents),7168&i.$$.dirty&&n(9,l=c?`You have reached the maximum number of ${_.maxRemoteAgents} remote agents.`:a?`You have reached the maximum number of ${_.maxActiveRemoteAgents} active remote agents.`:""),4992&i.$$.dirty&&n(0,u=(()=>{var H;const Q=(H=t==null?void 0:t.github_commit_ref)==null?void 0:H.repository_url,X=o==null?void 0:o.name,K=_.remoteAgentCreationError;return l||K||!Q&&"Please select a repository"||!X&&"Please select a branch"||(!(Q&&X)&&Q&&X?"Loading branch data...":"")||""})()),1&i.$$.dirty&&n(2,f=!!u),4096&i.$$.dirty&&n(6,m=_.isActive&&!_.currentAgentId),64&i.$$.dirty&&n(1,p=m)},[u,p,f,s,M,async function(){try{await M.reportRemoteAgentSetupWindowEvent(gs.clickCreateAgent)}catch(R){console.error("Failed to report click create agent event:",R)}try{M.setRemoteAgentCreationError(null),E(),M.saveLastRemoteAgentSetup((t==null?void 0:t.github_commit_ref.repository_url)||null,(o==null?void 0:o.name)||null,(r==null?void 0:r.path)||null)}catch(R){console.error("Failed to create agent:",R)}},m,o,t,l,a,c,_]}class zA extends ue{constructor(e){super(),de(this,e,OA,FA,ce,{})}}function BA(i){let e;return{c(){e=G(`Agent Auto mode allows Augment to run commands automatically on your behalf without your
        explicit approval. Changes can be destructive -- proceed with caution.`)},m(n,t){x(n,e,t)},d(n){n&&b(e)}}}function UA(i){let e;return{c(){e=G("Accept")},m(n,t){x(n,e,t)},d(n){n&&b(e)}}}function HA(i){let e;return{c(){e=G("Back to Manual Mode")},m(n,t){x(n,e,t)},d(n){n&&b(e)}}}function jA(i){let e,n,t,o,r,s,c,a;return n=new Ge({props:{size:2,$$slots:{default:[BA]},$$scope:{ctx:i}}}),r=new ht({props:{size:1,variant:"solid",color:"accent",class:"c-agent-auto-mode-warning__button",$$slots:{default:[UA]},$$scope:{ctx:i}}}),r.$on("click",i[1]),c=new ht({props:{size:1,variant:"solid",color:"neutral",class:"c-agent-auto-mode-warning__button",$$slots:{default:[HA]},$$scope:{ctx:i}}}),c.$on("click",i[2]),{c(){e=L("div"),v(n.$$.fragment),t=B(),o=L("div"),v(r.$$.fragment),s=B(),v(c.$$.fragment),A(o,"class","c-agent-auto-mode-warning__buttons"),A(e,"class","c-agent-auto-mode-warning__content")},m(l,u){x(l,e,u),w(n,e,null),F(e,t),F(e,o),w(r,o,null),F(o,s),w(c,o,null),a=!0},p(l,u){const f={};8&u&&(f.$$scope={dirty:u,ctx:l}),n.$set(f);const m={};8&u&&(m.$$scope={dirty:u,ctx:l}),r.$set(m);const p={};8&u&&(p.$$scope={dirty:u,ctx:l}),c.$set(p)},i(l){a||(d(n.$$.fragment,l),d(r.$$.fragment,l),d(c.$$.fragment,l),a=!0)},o(l){$(n.$$.fragment,l),$(r.$$.fragment,l),$(c.$$.fragment,l),a=!1},d(l){l&&b(e),y(n),y(r),y(c)}}}function qA(i){let e,n;return e=new Wn({props:{slot:"icon"}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p:P,i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function WA(i){let e,n,t;return n=new Jn({props:{color:"warning",variant:"soft",size:1,$$slots:{icon:[qA],default:[jA]},$$scope:{ctx:i}}}),{c(){e=L("div"),v(n.$$.fragment),A(e,"class","c-agent-auto-mode-warning svelte-ffctgo")},m(o,r){x(o,e,r),w(n,e,null),t=!0},p(o,[r]){const s={};8&r&&(s.$$scope={dirty:r,ctx:o}),n.$set(s)},i(o){t||(d(n.$$.fragment,o),t=!0)},o(o){$(n.$$.fragment,o),t=!1},d(o){o&&b(e),y(n)}}}function VA(i){const e=Se("agentConversationModel");return[e,()=>e.acceptAutoMode(),()=>e.rejectAutoMode()]}class GA extends ue{constructor(e){super(),de(this,e,VA,WA,ce,{})}}const YA=i=>({}),u$=i=>({}),KA=i=>({}),d$=i=>({});function XA(i){let e;return{c(){e=G(i[0])},m(n,t){x(n,e,t)},p(n,t){1&t&&_e(e,n[0])},d(n){n&&b(e)}}}function ZA(i){let e,n,t,o;const r=i[2]["left-content"],s=Ye(r,i,i[3],d$),c=s||function(u){let f,m;return f=new Ge({props:{size:1,color:"neutral",$$slots:{default:[XA]},$$scope:{ctx:u}}}),{c(){v(f.$$.fragment)},m(p,_){w(f,p,_),m=!0},p(p,_){const M={};9&_&&(M.$$scope={dirty:_,ctx:p}),f.$set(M)},i(p){m||(d(f.$$.fragment,p),m=!0)},o(p){$(f.$$.fragment,p),m=!1},d(p){y(f,p)}}}(i),a=i[2]["right-content"],l=Ye(a,i,i[3],u$);return{c(){e=L("div"),c&&c.c(),n=B(),l&&l.c(),A(e,"class",t=fr(`c-chat-input-banner c-chat-input-banner--${i[1]}`)+" svelte-125x5mm")},m(u,f){x(u,e,f),c&&c.m(e,null),F(e,n),l&&l.m(e,null),o=!0},p(u,[f]){s?s.p&&(!o||8&f)&&Ke(s,r,u,u[3],o?Ze(r,u[3],f,KA):Xe(u[3]),d$):c&&c.p&&(!o||1&f)&&c.p(u,o?f:-1),l&&l.p&&(!o||8&f)&&Ke(l,a,u,u[3],o?Ze(a,u[3],f,YA):Xe(u[3]),u$),(!o||2&f&&t!==(t=fr(`c-chat-input-banner c-chat-input-banner--${u[1]}`)+" svelte-125x5mm"))&&A(e,"class",t)},i(u){o||(d(c,u),d(l,u),o=!0)},o(u){$(c,u),$(l,u),o=!1},d(u){u&&b(e),c&&c.d(u),l&&l.d(u)}}}function JA(i,e,n){let{$$slots:t={},$$scope:o}=e,{text:r}=e,{color:s="accent"}=e;return i.$$set=c=>{"text"in c&&n(0,r=c.text),"color"in c&&n(1,s=c.color),"$$scope"in c&&n(3,o=c.$$scope)},[r,s,t,o]}class Ks extends ue{constructor(e){super(),de(this,e,JA,ZA,ce,{text:0,color:1})}}function QA(i){let e;return{c(){e=G("Upgrade Now")},m(n,t){x(n,e,t)},d(n){n&&b(e)}}}function $$(i){let e,n;return e=new Ne({props:{content:"Dismiss",triggerOn:[Je.Hover],$$slots:{default:[tM]},$$scope:{ctx:i}}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p(t,o){const r={};132&o&&(r.$$scope={dirty:o,ctx:t}),e.$set(r)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function eM(i){let e,n;return e=new rr({}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function tM(i){let e,n;return e=new dt({props:{size:1,variant:"ghost-block",color:"neutral","data-testid":"dismiss-subscription-warning-button",$$slots:{default:[eM]},$$scope:{ctx:i}}}),e.$on("click",function(){Nt(i[2])&&i[2].apply(this,arguments)}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p(t,o){i=t;const r={};128&o&&(r.$$scope={dirty:o,ctx:i}),e.$set(r)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function nM(i){let e,n,t,o,r;t=new ht({props:{size:1,variant:"solid",color:i[4]?"error":"warning","data-testid":"subscription-page-button",$$slots:{default:[QA]},$$scope:{ctx:i}}}),t.$on("click",i[5]);let s=!i[0]&&!i[1]&&$$(i);return{c(){e=L("div"),n=L("div"),v(t.$$.fragment),o=B(),s&&s.c(),A(n,"class","l-subscription-warning__upgrade-btn svelte-1m82ryz"),ke(n,"is-error",i[4]),A(e,"class","l-subscription-warning__right svelte-1m82ryz"),A(e,"slot","right-content")},m(c,a){x(c,e,a),F(e,n),w(t,n,null),F(e,o),s&&s.m(e,null),r=!0},p(c,a){const l={};16&a&&(l.color=c[4]?"error":"warning"),128&a&&(l.$$scope={dirty:a,ctx:c}),t.$set(l),(!r||16&a)&&ke(n,"is-error",c[4]),c[0]||c[1]?s&&(j(),$(s,1,1,()=>{s=null}),q()):s?(s.p(c,a),3&a&&d(s,1)):(s=$$(c),s.c(),d(s,1),s.m(e,null))},i(c){r||(d(t.$$.fragment,c),d(s),r=!0)},o(c){$(t.$$.fragment,c),$(s),r=!1},d(c){c&&b(e),y(t),s&&s.d()}}}function oM(i){let e,n;return e=new Ks({props:{text:i[3],color:i[4]?"error":"warning",$$slots:{"right-content":[nM]},$$scope:{ctx:i}}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p(t,[o]){const r={};8&o&&(r.text=t[3]),16&o&&(r.color=t[4]?"error":"warning"),151&o&&(r.$$scope={dirty:o,ctx:t}),e.$set(r)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function rM(i,e,n){let t,{daysRemaining:o=null}=e,{isInactive:r=!1}=e,{usageBalanceDepleted:s=!1}=e,{onDismiss:c}=e,a="";return i.$$set=l=>{"daysRemaining"in l&&n(6,o=l.daysRemaining),"isInactive"in l&&n(0,r=l.isInactive),"usageBalanceDepleted"in l&&n(1,s=l.usageBalanceDepleted),"onDismiss"in l&&n(2,c=l.onDismiss)},i.$$.update=()=>{67&i.$$.dirty&&n(3,a=r?"Your subscription is no longer active":s?"You are out of user messages":`Your subscription expires in ${o} days`),3&i.$$.dirty&&n(4,t=r||s)},[r,s,c,a,t,function(){wn.postMessage({type:jt.augmentLink,data:"https://app.augmentcode.com/account"})},o]}class iM extends ue{constructor(e){super(),de(this,e,rM,oM,ce,{daysRemaining:6,isInactive:0,usageBalanceDepleted:1,onDismiss:2})}}function sM(i){let e,n,t,o,r,s,c;return o=new Ne({props:{content:"Yes, never show again",triggerOn:[Je.Hover],$$slots:{default:[lM]},$$scope:{ctx:i}}}),s=new Ne({props:{content:"No, dismiss once",triggerOn:[Je.Hover],$$slots:{default:[dM]},$$scope:{ctx:i}}}),{c(){e=L("span"),e.textContent="Never show again?",n=B(),t=L("div"),v(o.$$.fragment),r=B(),v(s.$$.fragment),A(e,"class","l-thread-length-warning__confirmation-text svelte-et9fl8"),A(t,"class","l-thread-length-warning__confirmation-buttons svelte-et9fl8")},m(a,l){x(a,e,l),x(a,n,l),x(a,t,l),w(o,t,null),F(t,r),w(s,t,null),c=!0},p(a,l){const u={};128&l&&(u.$$scope={dirty:l,ctx:a}),o.$set(u);const f={};128&l&&(f.$$scope={dirty:l,ctx:a}),s.$set(f)},i(a){c||(d(o.$$.fragment,a),d(s.$$.fragment,a),c=!0)},o(a){$(o.$$.fragment,a),$(s.$$.fragment,a),c=!1},d(a){a&&(b(e),b(n),b(t)),y(o),y(s)}}}function aM(i){let e,n,t,o;return e=new Ne({props:{content:"New Thread",triggerOn:[Je.Hover,Je.Click],$$slots:{default:[fM]},$$scope:{ctx:i}}}),t=new Ne({props:{content:"Dismiss",triggerOn:[Je.Hover],$$slots:{default:[pM]},$$scope:{ctx:i}}}),{c(){v(e.$$.fragment),n=B(),v(t.$$.fragment)},m(r,s){w(e,r,s),x(r,n,s),w(t,r,s),o=!0},p(r,s){const c={};129&s&&(c.$$scope={dirty:s,ctx:r}),e.$set(c);const a={};128&s&&(a.$$scope={dirty:s,ctx:r}),t.$set(a)},i(r){o||(d(e.$$.fragment,r),d(t.$$.fragment,r),o=!0)},o(r){$(e.$$.fragment,r),$(t.$$.fragment,r),o=!1},d(r){r&&b(n),y(e,r),y(t,r)}}}function cM(i){let e,n;return e=new To({}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function lM(i){let e,n;return e=new dt({props:{size:1,variant:"ghost-block",color:"neutral","data-testid":"never-show-again-button",$$slots:{default:[cM]},$$scope:{ctx:i}}}),e.$on("click",i[3]),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p(t,o){const r={};128&o&&(r.$$scope={dirty:o,ctx:t}),e.$set(r)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function uM(i){let e,n;return e=new rr({}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function dM(i){let e,n;return e=new dt({props:{size:1,variant:"ghost-block",color:"neutral","data-testid":"cancel-confirmation-button",$$slots:{default:[uM]},$$scope:{ctx:i}}}),e.$on("click",i[4]),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p(t,o){const r={};128&o&&(r.$$scope={dirty:o,ctx:t}),e.$set(r)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function $M(i){let e,n;return e=new um({}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function fM(i){let e,n;return e=new dt({props:{size:1,variant:"ghost-block",color:"neutral","data-testid":"new-thread-warning-button",$$slots:{default:[$M]},$$scope:{ctx:i}}}),e.$on("click",function(){Nt(i[0])&&i[0].apply(this,arguments)}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p(t,o){i=t;const r={};128&o&&(r.$$scope={dirty:o,ctx:i}),e.$set(r)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function mM(i){let e,n;return e=new rr({}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function pM(i){let e,n;return e=new dt({props:{size:1,variant:"ghost-block",color:"neutral","data-testid":"dismiss-thread-warning-button",$$slots:{default:[mM]},$$scope:{ctx:i}}}),e.$on("click",i[2]),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p(t,o){const r={};128&o&&(r.$$scope={dirty:o,ctx:t}),e.$set(r)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function gM(i){let e,n,t,o;const r=[aM,sM],s=[];function c(a,l){return a[1]?1:0}return n=c(i),t=s[n]=r[n](i),{c(){e=L("div"),t.c(),A(e,"class","l-thread-length-warning__buttons svelte-et9fl8"),A(e,"slot","right-content")},m(a,l){x(a,e,l),s[n].m(e,null),o=!0},p(a,l){let u=n;n=c(a),n===u?s[n].p(a,l):(j(),$(s[u],1,1,()=>{s[u]=null}),q(),t=s[n],t?t.p(a,l):(t=s[n]=r[n](a),t.c()),d(t,1),t.m(e,null))},i(a){o||(d(t),o=!0)},o(a){$(t),o=!1},d(a){a&&b(e),s[n].d()}}}function hM(i){let e,n;return e=new Ks({props:{text:"Long threads can lead to worse results.",$$slots:{"right-content":[gM]},$$scope:{ctx:i}}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p(t,[o]){const r={};131&o&&(r.$$scope={dirty:o,ctx:t}),e.$set(r)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function vM(i,e,n){let{onNewThreadClick:t}=e,{onDismiss:o}=e,{onNeverShowAgain:r}=e,s=!1;return i.$$set=c=>{"onNewThreadClick"in c&&n(0,t=c.onNewThreadClick),"onDismiss"in c&&n(5,o=c.onDismiss),"onNeverShowAgain"in c&&n(6,r=c.onNeverShowAgain)},[t,s,function(){n(1,s=!0)},function(){r()},function(){o()},o,r]}class wM extends ue{constructor(e){super(),de(this,e,vM,hM,ce,{onNewThreadClick:0,onDismiss:5,onNeverShowAgain:6})}}function yM(i){let e,n,t,o,r,s,c;return o=new Ne({props:{content:"Yes, hide for this session",triggerOn:[Je.Hover],$$slots:{default:[_M]},$$scope:{ctx:i}}}),s=new Ne({props:{content:"No, dismiss once",triggerOn:[Je.Hover],$$slots:{default:[AM]},$$scope:{ctx:i}}}),{c(){e=L("span"),e.textContent="Hide for this session?",n=B(),t=L("div"),v(o.$$.fragment),r=B(),v(s.$$.fragment),A(e,"class","l-conversation-history-warning__confirmation-text svelte-1py4g0t"),A(t,"class","l-conversation-history-warning__confirmation-buttons svelte-1py4g0t")},m(a,l){x(a,e,l),x(a,n,l),x(a,t,l),w(o,t,null),F(t,r),w(s,t,null),c=!0},p(a,l){const u={};128&l&&(u.$$scope={dirty:l,ctx:a}),o.$set(u);const f={};128&l&&(f.$$scope={dirty:l,ctx:a}),s.$set(f)},i(a){c||(d(o.$$.fragment,a),d(s.$$.fragment,a),c=!0)},o(a){$(o.$$.fragment,a),$(s.$$.fragment,a),c=!1},d(a){a&&(b(e),b(n),b(t)),y(o),y(s)}}}function bM(i){let e,n,t,o;return e=new Ne({props:{content:"Delete all conversations",triggerOn:[Je.Hover,Je.Click],$$slots:{default:[kM]},$$scope:{ctx:i}}}),t=new Ne({props:{content:"Dismiss",triggerOn:[Je.Hover],$$slots:{default:[TM]},$$scope:{ctx:i}}}),{c(){v(e.$$.fragment),n=B(),v(t.$$.fragment)},m(r,s){w(e,r,s),x(r,n,s),w(t,r,s),o=!0},p(r,s){const c={};129&s&&(c.$$scope={dirty:s,ctx:r}),e.$set(c);const a={};128&s&&(a.$$scope={dirty:s,ctx:r}),t.$set(a)},i(r){o||(d(e.$$.fragment,r),d(t.$$.fragment,r),o=!0)},o(r){$(e.$$.fragment,r),$(t.$$.fragment,r),o=!1},d(r){r&&b(n),y(e,r),y(t,r)}}}function xM(i){let e,n;return e=new To({}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function _M(i){let e,n;return e=new dt({props:{size:1,variant:"ghost-block",color:"neutral","data-testid":"hide-conversation-history-warning-for-session-button",$$slots:{default:[xM]},$$scope:{ctx:i}}}),e.$on("click",i[3]),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p(t,o){const r={};128&o&&(r.$$scope={dirty:o,ctx:t}),e.$set(r)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function CM(i){let e,n;return e=new rr({}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function AM(i){let e,n;return e=new dt({props:{size:1,variant:"ghost-block",color:"neutral","data-testid":"cancel-conversation-history-confirmation-button",$$slots:{default:[CM]},$$scope:{ctx:i}}}),e.$on("click",i[4]),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p(t,o){const r={};128&o&&(r.$$scope={dirty:o,ctx:t}),e.$set(r)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function MM(i){let e,n;return e=new Gm({}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function kM(i){let e,n;return e=new dt({props:{size:1,variant:"ghost-block",color:"neutral","data-testid":"delete-all-history-warning-button",$$slots:{default:[MM]},$$scope:{ctx:i}}}),e.$on("click",function(){Nt(i[0])&&i[0].apply(this,arguments)}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p(t,o){i=t;const r={};128&o&&(r.$$scope={dirty:o,ctx:i}),e.$set(r)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function SM(i){let e,n;return e=new rr({}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function TM(i){let e,n;return e=new dt({props:{size:1,variant:"ghost-block",color:"neutral","data-testid":"dismiss-conversation-history-warning-button",$$slots:{default:[SM]},$$scope:{ctx:i}}}),e.$on("click",i[2]),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p(t,o){const r={};128&o&&(r.$$scope={dirty:o,ctx:t}),e.$set(r)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function EM(i){let e,n,t,o;const r=[bM,yM],s=[];function c(a,l){return a[1]?1:0}return n=c(i),t=s[n]=r[n](i),{c(){e=L("div"),t.c(),A(e,"class","l-conversation-history-warning__buttons svelte-1py4g0t"),A(e,"slot","right-content")},m(a,l){x(a,e,l),s[n].m(e,null),o=!0},p(a,l){let u=n;n=c(a),n===u?s[n].p(a,l):(j(),$(s[u],1,1,()=>{s[u]=null}),q(),t=s[n],t?t.p(a,l):(t=s[n]=r[n](a),t.c()),d(t,1),t.m(e,null))},i(a){o||(d(t),o=!0)},o(a){$(t),o=!1},d(a){a&&b(e),s[n].d()}}}function IM(i){let e,n;return e=new Ks({props:{text:"Large conversation histories can lead to worse performance.",color:"warning",$$slots:{"right-content":[EM]},$$scope:{ctx:i}}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p(t,[o]){const r={};131&o&&(r.$$scope={dirty:o,ctx:t}),e.$set(r)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function LM(i,e,n){let{onDeleteAllHistory:t}=e,{onDismiss:o}=e,{onHideForSession:r}=e,s=!1;return i.$$set=c=>{"onDeleteAllHistory"in c&&n(0,t=c.onDeleteAllHistory),"onDismiss"in c&&n(5,o=c.onDismiss),"onHideForSession"in c&&n(6,r=c.onHideForSession)},[t,s,function(){n(1,s=!0)},function(){r()},function(){o()},o,r]}class RM extends ue{constructor(e){super(),de(this,e,LM,IM,ce,{onDeleteAllHistory:0,onDismiss:5,onHideForSession:6})}}class DM{constructor(e,n,t,o){$e(this,"_disposables",[]);$e(this,"_chatHistoryCheckpoints");$e(this,"_currentCheckpoint",Tt({request_id:crypto.randomUUID(),uuid:crypto.randomUUID(),chatItemType:uo.agenticCheckpointDelimiter,status:cn.draft,fromTimestamp:0,toTimestamp:Number.MAX_SAFE_INTEGER}));$e(this,"checkpoints");$e(this,"uuidToIdx");$e(this,"_targetCheckpointIdx",Tt(void 0));$e(this,"targetCheckpoint");$e(this,"isTargetCheckpointLatest");$e(this,"totalCheckpointCount");$e(this,"_targetCheckpointSummary",Tt([]));$e(this,"targetCheckpointSummary",ds(this._targetCheckpointSummary));$e(this,"targetCheckpointHasChanges",jn(this.targetCheckpointSummary,e=>e.some(n=>{var t,o;return(((t=n.changesSummary)==null?void 0:t.totalAddedLines)??!1)||(((o=n.changesSummary)==null?void 0:o.totalRemovedLines)??!1)})));$e(this,"_doNothingOnAgentDisabled",e=>(...n)=>{this._flagsModel.enableAgentMode&&e(...n)});$e(this,"_doNothingOnNotAgentConversation",e=>(...n)=>{if(this._flagsModel.enableAgentMode&&mn(ot(this._conversationModel)))return e(...n)});$e(this,"_refreshAgentEditsImmediate",async()=>{const e=this._targetCheckpoint;if(!e)return;const n=this._agentConversationModel?this._agentConversationModel.getBaselineTimestamp():0,t=await this.getCheckpointSummary({...e,fromTimestamp:n,toTimestamp:Number.MAX_SAFE_INTEGER});this._targetCheckpointSummary.set(t)});$e(this,"_refreshAgentEdits",X$(this._refreshAgentEditsImmediate,500,{leading:!0,trailing:!0}));$e(this,"_revertToTimestamp",this._doNothingOnNotAgentConversation(async e=>{await this._extensionClient.revertToTimestamp(e),this.createNewCheckpoint(),this._refreshAgentEdits()}));$e(this,"maybeCreateOriginalCheckpoint",this._doNothingOnNotAgentConversation(()=>{const e=ot(this._conversationModel);e.chatHistory.some(Oa)||(Sn.isEmpty(e)||Sn.isNew(e))&&ot(this.checkpoints).length===0&&this.createNewCheckpoint()}));$e(this,"dispose",()=>{this._disposables.forEach(e=>e.dispose())});this._flagsModel=e,this._conversationModel=n,this._extensionClient=t,this._agentConversationModel=o,this._chatHistoryCheckpoints=jn([this._conversationModel],([r],s)=>{var a,l,u,f;const c=r.chatHistory.filter(Oa);(c==null?void 0:c.length)===((a=ot(this._chatHistoryCheckpoints))==null?void 0:a.length)&&((l=c==null?void 0:c.at(-1))==null?void 0:l.uuid)===((f=(u=ot(this._chatHistoryCheckpoints))==null?void 0:u.at(-1))==null?void 0:f.uuid)||(this._currentCheckpoint.update(m=>{var p;return{...m,fromTimestamp:((p=c.at(-1))==null?void 0:p.toTimestamp)??0,toTimestamp:Number.MAX_SAFE_INTEGER}}),s(c))}),this.checkpoints=jn([this._chatHistoryCheckpoints,this._currentCheckpoint],([r,s])=>[...r,s].filter(c=>c.status!==cn.draft)),this.totalCheckpointCount=jn(this.checkpoints,r=>r.length),this.uuidToIdx=jn(this.checkpoints,r=>new Map(r.map((s,c)=>[s.uuid,c]))),this.targetCheckpoint=jn([this.targetCheckpointIdx,this.checkpoints],([r,s])=>s.at(r??-1)),this.isTargetCheckpointLatest=jn([this.targetCheckpointIdx,this.checkpoints],([r,s])=>r===s.length-1||r===void 0),[this._conversationModel.onSendExchange(this._doNothingOnNotAgentConversation(()=>{ot(this._currentCheckpoint).status===cn.draft&&this._currentCheckpoint.update(r=>({...r,status:cn.sent}))})),this.targetCheckpoint.subscribe(this._doNothingOnAgentDisabled(()=>{this._refreshAgentEdits()})),this.checkpoints.subscribe(this._doNothingOnAgentDisabled(()=>{ot(this.isTargetCheckpointLatest)&&this._refreshAgentEdits()})),this._conversationModel.onNewConversation(()=>{this.targetCheckpointIdx.set(void 0),this._targetCheckpointSummary.set([]),this._refreshAgentEdits()}),this._conversationModel.onSendExchange(this._doNothingOnAgentDisabled(()=>this.targetCheckpointIdx.set(void 0)))].forEach(r=>{this._disposables.push({dispose:r})})}registerAgentConversationModel(e){this._agentConversationModel=e}get targetCheckpointIdx(){return{subscribe:this._targetCheckpointIdx.subscribe,set:()=>this._targetCheckpointIdx.set(void 0),update:()=>this._targetCheckpointIdx.set(void 0)}}get currentCheckpoint(){return this._currentCheckpoint}get _checkpoints(){return ot(this.checkpoints)}get _targetCheckpoint(){return ot(this.targetCheckpoint)}getCheckpointIdxForTimestamp(e){return this._checkpoints.findIndex(n=>n.fromTimestamp<=e&&n.toTimestamp>=e)}getCheckpointAtIdx(e){return this._checkpoints.at(e)}createNewCheckpoint(e={}){const n=ot(this._currentCheckpoint),t=Date.now(),o={...n,status:cn.success,toTimestamp:t,...e};this._currentCheckpoint.set({request_id:crypto.randomUUID(),uuid:crypto.randomUUID(),chatItemType:uo.agenticCheckpointDelimiter,status:cn.draft,fromTimestamp:t,toTimestamp:Number.MAX_SAFE_INTEGER}),this._conversationModel.addChatItem(o)}async getCheckpointSummary(e){return(await this._extensionClient.getAgentEditList(e.fromTimestamp,e.toTimestamp)).edits}async getCheckpointIdxSummary(e){const n=this._checkpoints.at(e);return n?this.getCheckpointSummary(n):[]}async revertToCheckpoint(e){const n=ot(this.uuidToIdx).get(e);if(n===void 0)return!1;const t=this._checkpoints.at(n);if(!t)return!1;const o=ot(this._conversationModel).id,r=await this._extensionClient.revertToTimestamp(t.toTimestamp);return(r||ot(this._conversationModel).id===o)&&this.createNewCheckpoint({revertTarget:{uuid:e}}),r}async revertDocumentToTimestamp(e,n){const t=ot(this._conversationModel).id,o=await this._extensionClient.revertToTimestamp(n,[e]);return o&&ot(this._conversationModel).id===t&&this.createNewCheckpoint({revertTarget:{filePath:e}}),o}async acceptAll(){const e=this._checkpoints.at(-1);if(e){const n=e.toTimestamp;return mn(ot(this._conversationModel))&&this._agentConversationModel&&this._agentConversationModel.updateBaselineTimestamp(n),await this._extensionClient.acceptAllAgentEdits(),this._refreshAgentEdits(),!0}return!1}async rejectAll(){var n;const e=await this._extensionClient.openConfirmationModal({title:"Discard All Changes",message:"Are you sure you want to discard all changes? This will apply to all changes whether made by the agent or yourself.",confirmButtonText:"Discard",cancelButtonText:"Cancel"});if(e){const t=((n=this._agentConversationModel)==null?void 0:n.getBaselineTimestamp())??0;mn(ot(this._conversationModel))&&this._agentConversationModel&&this._agentConversationModel.updateBaselineTimestamp(t),await this._revertToTimestamp(t),this._refreshAgentEdits()}return e}handleMessageFromExtension(e){switch(e.data.type){case jt.chatAgentEditListHasUpdates:this._refreshAgentEdits();break;case jt.chatMemoryHasUpdates:Yf.notifyMemoryUpdated()}return!0}async updateBaselineTimestamp(e){mn(ot(this._conversationModel))&&this._agentConversationModel&&(this._agentConversationModel.updateBaselineTimestamp(e),this._refreshAgentEdits())}}function Pi(i){const e=Object.prototype.toString.call(i);return i instanceof Date||typeof i=="object"&&e==="[object Date]"?new i.constructor(+i):typeof i=="number"||e==="[object Number]"||typeof i=="string"||e==="[object String]"?new Date(i):new Date(NaN)}const NM=864e5;function f$(i){const e=Pi(i);return e.setHours(0,0,0,0),e}function m$(i){const e=Pi(i),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+i-+n}function PM(i,e){const n=Pi(i),t=Pi(e),o=p$(n,t),r=Math.abs(function(c,a){const l=f$(c),u=f$(a),f=+l-m$(l),m=+u-m$(u);return Math.round((f-m)/NM)}(n,t));n.setDate(n.getDate()-o*r);const s=o*(r-+(p$(n,t)===-o));return s===0?0:s}function p$(i,e){const n=i.getFullYear()-e.getFullYear()||i.getMonth()-e.getMonth()||i.getDate()-e.getDate()||i.getHours()-e.getHours()||i.getMinutes()-e.getMinutes()||i.getSeconds()-e.getSeconds()||i.getMilliseconds()-e.getMilliseconds();return n<0?-1:n>0?1:n}const lo=class lo{constructor(e,n,t){$e(this,"pollInterval",null);$e(this,"subscriptionInfo",Tt(null));$e(this,"isDismissed",Tt(!1));$e(this,"dispose",()=>{this.pollInterval&&(clearInterval(this.pollInterval),this.pollInterval=null)});if(this.extensionClient=e,t!==void 0)this.isDismissed.set(t);else try{const o=localStorage.getItem(lo.localStorageKey);if(o){const{dismissed:r,timestamp:s}=JSON.parse(o),c=new Date(s),a=new Date,l=c.toDateString()!==a.toDateString();r&&!l?this.isDismissed.set(!0):localStorage.removeItem(lo.localStorageKey)}}catch(o){console.error("Failed to read from localStorage:",o)}n!==void 0?this.subscriptionInfo.set(n):(this.fetchSubscriptionInfo(),this.startPolling())}get info(){return this.subscriptionInfo}get dismissed(){return this.isDismissed}dismiss(){this.isDismissed.set(!0);try{localStorage.setItem(lo.localStorageKey,JSON.stringify({dismissed:!0,timestamp:new Date().toISOString()}))}catch(e){console.error("Failed to write to localStorage:",e)}}shouldShowWarning(e){if(e==null)return!1;if(e.type==="inactive_subscription"||e.usageBalanceDepleted)return!0;if(e.type==="active_subscription"&&e.daysRemaining!==void 0){let n=!1;return this.isDismissed.subscribe(t=>n=t)(),!n&&e.daysRemaining<=lo.warningThresholdDays}return!1}async fetchSubscriptionInfo(){try{const e=await this.extensionClient.getSubscriptionInfo(),n=this.parseSubscriptionInfo(e);this.subscriptionInfo.set(n)}catch(e){console.error("Error fetching subscription info:",e)}}parseSubscriptionInfo(e){let n,t,o="unknown";if(e.data.enterprise)o="enterprise";else if(e.data.activeSubscription){if(o="active_subscription",e.data.activeSubscription.endDate){const r=new Date(e.data.activeSubscription.endDate);r.getFullYear()>2e3&&(n=Math.max(0,PM(r,new Date)))}t=e.data.activeSubscription.usageBalanceDepleted}else e.data.inactiveSubscription&&(o="inactive_subscription");return{type:o,daysRemaining:n,usageBalanceDepleted:t}}startPolling(){this.pollInterval=setInterval(()=>{this.fetchSubscriptionInfo()},lo.pollIntervalMs)}};$e(lo,"pollIntervalMs",3e4),$e(lo,"warningThresholdDays",14),$e(lo,"localStorageKey","subscription-warning-dismissed");let ks=lo;const g$="thread-length-warning-never-show",h$="conversation-history-warning-hide-for-session";function v$(i,e,n){const t=i.slice();return t[4]=e[n],t}function w$(i){let e,n,t;return n=new Jn({props:{variant:"soft",color:"warning",size:1,$$slots:{icon:[OM],default:[FM]},$$scope:{ctx:i}}}),{c(){e=L("div"),v(n.$$.fragment),A(e,"class","c-file-warning svelte-i3ko6e")},m(o,r){x(o,e,r),w(n,e,null),t=!0},p(o,r){const s={};129&r&&(s.$$scope={dirty:r,ctx:o}),n.$set(s)},i(o){t||(d(n.$$.fragment,o),t=!0)},o(o){$(n.$$.fragment,o),t=!1},d(o){o&&b(e),y(n)}}}function y$(i){let e,n,t=i[4]+"";return{c(){e=L("div"),n=G(t),A(e,"class","c-file-warning__line svelte-i3ko6e")},m(o,r){x(o,e,r),F(e,n)},p(o,r){1&r&&t!==(t=o[4]+"")&&_e(n,t)},d(o){o&&b(e)}}}function FM(i){let e,n=at(i[0]),t=[];for(let o=0;o<n.length;o+=1)t[o]=y$(v$(i,n,o));return{c(){e=L("div");for(let o=0;o<t.length;o+=1)t[o].c();A(e,"class","c-file-warning__message svelte-i3ko6e")},m(o,r){x(o,e,r);for(let s=0;s<t.length;s+=1)t[s]&&t[s].m(e,null)},p(o,r){if(1&r){let s;for(n=at(o[0]),s=0;s<n.length;s+=1){const c=v$(o,n,s);t[s]?t[s].p(c,r):(t[s]=y$(c),t[s].c(),t[s].m(e,null))}for(;s<t.length;s+=1)t[s].d(1);t.length=n.length}},d(o){o&&b(e),pn(t,o)}}}function OM(i){let e,n;return e=new Wn({props:{slot:"icon"}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p:P,i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function zM(i){let e,n,t=i[1]&&w$(i);return{c(){t&&t.c(),e=me()},m(o,r){t&&t.m(o,r),x(o,e,r),n=!0},p(o,[r]){o[1]?t?(t.p(o,r),2&r&&d(t,1)):(t=w$(o),t.c(),d(t,1),t.m(e.parentNode,e)):t&&(j(),$(t,1,1,()=>{t=null}),q())},i(o){n||(d(t),n=!0)},o(o){$(t),n=!1},d(o){o&&b(e),t&&t.d(o)}}}function BM(i,e,n){let t,o,r,{richTextContent:s}=e;return i.$$set=c=>{"richTextContent"in c&&n(2,s=c.richTextContent)},i.$$.update=()=>{4&i.$$.dirty&&n(3,t=Bf(s)),8&i.$$.dirty&&n(1,{hasWarning:o,warningMessages:r}=t,o,(n(0,r),n(3,t),n(2,s)))},[r,o,s,t]}class UM extends ue{constructor(e){super(),de(this,e,BM,zM,ce,{richTextContent:2})}}function b$(i){let e,n;return e=new c8({props:{chatModelProp:i[34]}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p:P,i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function x$(i){let e,n;return e=new EA({}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function HM(i){let e,n,t,o=i[27]&&b$(i),r=i[26]&&x$();return{c(){e=L("div"),o&&o.c(),n=B(),r&&r.c(),A(e,"class","l-chat-header svelte-19xjh29")},m(s,c){x(s,e,c),o&&o.m(e,null),F(e,n),r&&r.m(e,null),t=!0},p(s,c){s[27]?o?(o.p(s,c),134217728&c[0]&&d(o,1)):(o=b$(s),o.c(),d(o,1),o.m(e,n)):o&&(j(),$(o,1,1,()=>{o=null}),q()),s[26]?r?67108864&c[0]&&d(r,1):(r=x$(),r.c(),d(r,1),r.m(e,null)):r&&(j(),$(r,1,1,()=>{r=null}),q())},i(s){t||(d(o),d(r),t=!0)},o(s){$(o),$(r),t=!1},d(s){s&&b(e),o&&o.d(),r&&r.d()}}}function _$(i){let e,n;return e=new t5({props:{chatModel:i[34]}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p:P,i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function jM(i){let e,n,t=i[25]&&_$(i);return{c(){e=L("div"),t&&t.c(),A(e,"class","l-chat-top-bars")},m(o,r){x(o,e,r),t&&t.m(e,null),n=!0},p(o,r){o[25]?t?(t.p(o,r),33554432&r[0]&&d(t,1)):(t=_$(o),t.c(),d(t,1),t.m(e,null)):t&&(j(),$(t,1,1,()=>{t=null}),q())},i(o){n||(d(t),n=!0)},o(o){$(t),n=!1},d(o){o&&b(e),t&&t.d()}}}function qM(i){let e,n;return e=new Yy({props:{chatModel:i[34],onboardingWorkspaceModel:i[41],remoteAgentsModel:i[35],slot:"message-area"}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p:P,i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function WM(i){let e,n,t,o,r,s,c,a;n=new o9({props:{contextModel:i[32]}}),o=new Lg({});let l=i[21]&&C$(),u=i[9].enableAgentMode&&i[8]&&A$(i),f=i[22]&&M$(i);return{c(){e=L("div"),v(n.$$.fragment),t=B(),v(o.$$.fragment),r=B(),l&&l.c(),s=B(),u&&u.c(),c=B(),f&&f.c(),A(e,"class","l-chat-actions-area svelte-19xjh29")},m(m,p){x(m,e,p),w(n,e,null),F(e,t),w(o,e,null),F(e,r),l&&l.m(e,null),F(e,s),u&&u.m(e,null),F(e,c),f&&f.m(e,null),a=!0},p(m,p){m[21]?l?2097152&p[0]&&d(l,1):(l=C$(),l.c(),d(l,1),l.m(e,s)):l&&(j(),$(l,1,1,()=>{l=null}),q()),m[9].enableAgentMode&&m[8]?u?(u.p(m,p),768&p[0]&&d(u,1)):(u=A$(m),u.c(),d(u,1),u.m(e,c)):u&&(j(),$(u,1,1,()=>{u=null}),q()),m[22]?f?(f.p(m,p),4194304&p[0]&&d(f,1)):(f=M$(m),f.c(),d(f,1),f.m(e,null)):f&&(j(),$(f,1,1,()=>{f=null}),q())},i(m){a||(d(n.$$.fragment,m),d(o.$$.fragment,m),d(l),d(u),d(f),a=!0)},o(m){$(n.$$.fragment,m),$(o.$$.fragment,m),$(l),$(u),$(f),a=!1},d(m){m&&b(e),y(n),y(o),l&&l.d(),u&&u.d(),f&&f.d()}}}function VM(i){let e,n;return e=new D7({}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p:P,i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function GM(i){let e,n;return e=new f7({}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p:P,i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function C$(i){let e,n;return e=new Sg({}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function A$(i){let e,n,t,o;const r=[KM,YM],s=[];function c(a,l){return a[30]?0:1}return e=c(i),n=s[e]=r[e](i),{c(){n.c(),t=me()},m(a,l){s[e].m(a,l),x(a,t,l),o=!0},p(a,l){let u=e;e=c(a),e!==u&&(j(),$(s[u],1,1,()=>{s[u]=null}),q(),n=s[e],n||(n=s[e]=r[e](a),n.c()),d(n,1),n.m(t.parentNode,t))},i(a){o||(d(n),o=!0)},o(a){$(n),o=!1},d(a){a&&b(t),s[e].d(a)}}}function YM(i){let e,n;return e=new vC({}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function KM(i){let e,n;return e=new GA({}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function M$(i){let e,n;return e=new bg({props:{card:i[7].currentCard,flagsModel:i[9]}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p(t,o){const r={};128&o[0]&&(r.card=t[7].currentCard),512&o[0]&&(r.flagsModel=t[9]),e.$set(r)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function XM(i){let e,n,t,o,r;const s=[GM,VM,WM],c=[];function a(l,u){var f;return l[18]?0:l[5].isActive&&((f=l[5].currentAgent)!=null&&f.is_setup_script_agent)&&l[5].currentConversation?1:l[24]?2:-1}return~(e=a(i))&&(n=c[e]=s[e](i)),o=new UM({props:{richTextContent:i[11]}}),{c(){n&&n.c(),t=B(),v(o.$$.fragment)},m(l,u){~e&&c[e].m(l,u),x(l,t,u),w(o,l,u),r=!0},p(l,u){let f=e;e=a(l),e===f?~e&&c[e].p(l,u):(n&&(j(),$(c[f],1,1,()=>{c[f]=null}),q()),~e?(n=c[e],n?n.p(l,u):(n=c[e]=s[e](l),n.c()),d(n,1),n.m(t.parentNode,t)):n=null);const m={};2048&u[0]&&(m.richTextContent=l[11]),o.$set(m)},i(l){r||(d(n),d(o.$$.fragment,l),r=!0)},o(l){$(n),$(o.$$.fragment,l),r=!1},d(l){l&&b(t),~e&&c[e].d(l),y(o,l)}}}function k$(i){let e,n,t;function o(s){i[74](s)}let r={};return i[10]!==void 0&&(r.inputArea=i[10]),e=new Zy({props:r}),et.push(()=>Et(e,"inputArea",o)),e.$on("dragEnd",i[75]),{c(){v(e.$$.fragment)},m(s,c){w(e,s,c),t=!0},p(s,c){const a={};!n&&1024&c[0]&&(n=!0,a.inputArea=s[10],Rt(()=>n=!1)),e.$set(a)},i(s){t||(d(e.$$.fragment,s),t=!0)},o(s){$(e.$$.fragment,s),t=!1},d(s){y(e,s)}}}function ZM(i){let e,n,t=i[13]&&k$(i);return{c(){t&&t.c(),e=me()},m(o,r){t&&t.m(o,r),x(o,e,r),n=!0},p(o,r){o[13]?t?(t.p(o,r),8192&r[0]&&d(t,1)):(t=k$(o),t.c(),d(t,1),t.m(e.parentNode,e)):t&&(j(),$(t,1,1,()=>{t=null}),q())},i(o){n||(d(t),n=!0)},o(o){$(t),n=!1},d(o){o&&b(e),t&&t.d(o)}}}function JM(i){let e,n,t,o;function r(c){i[72](c)}let s={editable:!i[30],placeholder:i[23],$$slots:{banner:[ik]},$$scope:{ctx:i}};return i[0]!==void 0&&(s.richTextEditorRoot=i[0]),n=new Qf({props:s}),et.push(()=>Et(n,"richTextEditorRoot",r)),{c(){e=L("div"),v(n.$$.fragment),A(e,"class","l-input-area-design-system svelte-19xjh29"),ke(e,"l-input-area-design-system--tall",i[17]),ke(e,"l-input-area-design-system--shrunk",i[16]),ke(e,"l-input-area-design-system--editor-focused",i[29]),ke(e,"l-input-area-design-system--has-banner",i[12])},m(c,a){x(c,e,a),w(n,e,null),i[73](e),o=!0},p(c,a){const l={};1073741824&a[0]&&(l.editable=!c[30]),8388608&a[0]&&(l.placeholder=c[23]),524358&a[0]|536870912&a[2]&&(l.$$scope={dirty:a,ctx:c}),!t&&1&a[0]&&(t=!0,l.richTextEditorRoot=c[0],Rt(()=>t=!1)),n.$set(l),(!o||131072&a[0])&&ke(e,"l-input-area-design-system--tall",c[17]),(!o||65536&a[0])&&ke(e,"l-input-area-design-system--shrunk",c[16]),(!o||536870912&a[0])&&ke(e,"l-input-area-design-system--editor-focused",c[29]),(!o||4096&a[0])&&ke(e,"l-input-area-design-system--has-banner",c[12])},i(c){o||(d(n.$$.fragment,c),o=!0)},o(c){$(n.$$.fragment,c),o=!1},d(c){c&&b(e),y(n),i[73](null)}}}function QM(i){let e,n;return e=new Ff({props:{borders:["top"],style:"padding-top: 0;",overflowVisible:!0,$$slots:{default:[sk]},$$scope:{ctx:i}}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p(t,o){const r={};536870912&o[2]&&(r.$$scope={dirty:o,ctx:t}),e.$set(r)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function ek(i){let e,n,t;return n=new Qf({props:{editable:!0,hasSendButton:!1}}),{c(){e=L("div"),v(n.$$.fragment),A(e,"class","l-chat-setup-area l-input-area-design-system svelte-19xjh29")},m(o,r){x(o,e,r),w(n,e,null),i[69](e),t=!0},p:P,i(o){t||(d(n.$$.fragment,o),t=!0)},o(o){$(n.$$.fragment,o),t=!1},d(o){o&&b(e),y(n),i[69](null)}}}function tk(i){let e,n;return e=new Ff({props:{borders:["top"],style:"padding-top: 0;",overflowVisible:!0,$$slots:{default:[ak]},$$scope:{ctx:i}}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p(t,o){const r={};536870912&o[2]&&(r.$$scope={dirty:o,ctx:t}),e.$set(r)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function nk(i){let e,n;return e=new wM({props:{onNewThreadClick:i[71],onDismiss:i[47],onNeverShowAgain:i[48]}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p:P,i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function ok(i){let e,n;return e=new RM({props:{onDeleteAllHistory:i[46],onDismiss:i[44],onHideForSession:i[45]}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p:P,i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function rk(i){let e,n;return e=new iM({props:{daysRemaining:i[6].daysRemaining??null,usageBalanceDepleted:i[6].usageBalanceDepleted||!1,isInactive:i[6].type==="inactive_subscription",onDismiss:i[70]}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p(t,o){const r={};64&o[0]&&(r.daysRemaining=t[6].daysRemaining??null),64&o[0]&&(r.usageBalanceDepleted=t[6].usageBalanceDepleted||!1),64&o[0]&&(r.isInactive=t[6].type==="inactive_subscription"),e.$set(r)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function ik(i){let e,n,t,o;const r=[rk,ok,nk],s=[];function c(a,l){return a[2]&&a[6]?0:a[19]?1:a[1]?2:-1}return~(e=c(i))&&(n=s[e]=r[e](i)),{c(){n&&n.c(),t=me()},m(a,l){~e&&s[e].m(a,l),x(a,t,l),o=!0},p(a,l){let u=e;e=c(a),e===u?~e&&s[e].p(a,l):(n&&(j(),$(s[u],1,1,()=>{s[u]=null}),q()),~e?(n=s[e],n?n.p(a,l):(n=s[e]=r[e](a),n.c()),d(n,1),n.m(t.parentNode,t)):n=null)},i(a){o||(d(n),o=!0)},o(a){$(n),o=!1},d(a){a&&b(t),~e&&s[e].d(a)}}}function sk(i){let e,n;return e=new DA({}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function ak(i){let e,n;return e=new $y({}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function ck(i){let e,n,t,o;const r=[tk,ek,QM,JM],s=[];function c(a,l){return a[3]===Zo.autofixCommand?0:a[14]?1:a[3]===Zo.autofixPrompt?2:a[14]?-1:3}return~(e=c(i))&&(n=s[e]=r[e](i)),{c(){n&&n.c(),t=me()},m(a,l){~e&&s[e].m(a,l),x(a,t,l),o=!0},p(a,l){let u=e;e=c(a),e===u?~e&&s[e].p(a,l):(n&&(j(),$(s[u],1,1,()=>{s[u]=null}),q()),~e?(n=s[e],n?n.p(a,l):(n=s[e]=r[e](a),n.c()),d(n,1),n.m(t.parentNode,t)):n=null)},i(a){o||(d(n),o=!0)},o(a){$(n),o=!1},d(a){a&&b(t),~e&&s[e].d(a)}}}function lk(i){let e,n;return e=new zA({}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function uk(i){let e,n,t,o,r;return n=new ay({props:{$$slots:{"footer-area":[lk],"input-area":[ck],"divider-area":[ZM],"actions-area":[XM],"message-area":[qM],"floating-area":[jM],"header-area":[HM]},$$scope:{ctx:i}}}),{c(){e=L("div"),v(n.$$.fragment),A(e,"class","chat svelte-19xjh29")},m(s,c){x(s,e,c),w(n,e,null),t=!0,o||(r=[Le(window,"message",i[31].onMessageFromExtension),Le(window,"beforeunload",i[67]),Le(window,"keydown",i[68])],o=!0)},p(s,c){const a={};1877966831&c[0]|536870912&c[2]&&(a.$$scope={dirty:c,ctx:s}),n.$set(a)},i(s){t||(d(n.$$.fragment,s),t=!0)},o(s){$(n.$$.fragment,s),t=!1},d(s){s&&b(e),y(n),o=!1,Qt(r)}}}function dk(i,e,n){let t,o,r,s,c,a,l,u,f,m,p,_,M,C,T,E,R,N,J,Q,X,K,H,Y,V,Z,re,le,oe,he,ie,xe,tt,Ae,He,Dt,It,un,z,S=P,O=P,ee=P;i.$$.on_destroy.push(()=>S()),i.$$.on_destroy.push(()=>O()),i.$$.on_destroy.push(()=>ee());let{initialConversation:se}=e,{initialFlags:ve}=e,{initialSubscriptionInfo:Ce}=e,{initialSubscriptionDismissed:Oe}=e;const qe=new Ui(wn);let st,Ve=new vp,zt=new L1;Te(i,zt,pe=>n(7,xe=pe)),qe.registerConsumer(zt);let Qe=new wp(qe,wn,Ve,{initialConversation:se,initialFlags:ve,onLoaded:()=>{if(Qe.flags.enableAgentMode){const pe=re.currentChatMode;pe?pe===fs.remoteAgent&&Qe.flags.enableBackgroundAgents?Yt.handleSetToBackgroundAgent():pe===fs.agent?Yt.handleSetToAgent(ot(re.agentExecutionMode)):Yt.handleSetToChat():Yt.handleSetToAgent(ot(re.agentExecutionMode))}else st.setToChat()}});Te(i,Qe,pe=>n(4,re=pe));const Lt=new hr(qe),Ot=new Tn({msgBroker:qe,isActive:!1,flagsModel:Qe.flags,host:wn,gitRefModel:Lt});Te(i,Ot,pe=>n(5,le=pe));let Pt=new As(Qe.currentConversationModel,Qe.extensionClient,Qe,Ot);const Cn=new DM(Qe.flags,Qe.currentConversationModel,Qe.extensionClient);qe.registerConsumer(Cn),qe.registerConsumer(Qe),qe.registerConsumer(Qe.specialContextInputModel);const An=new cy(Qe.currentConversationModel,Qe.extensionClient);Te(i,An,pe=>n(64,Ae=pe)),qe.registerConsumer(An),st=new xg(Qe,Pt,Cn);const Bt=new mo(Qe,Qe.extensionClient,Qe.currentConversationModel,st);qe.registerConsumer(Bt);const{showAutoModeWarning:$n}=st;Te(i,$n,pe=>n(30,z=pe));const Gt=new za(qe);qe.registerConsumer(Ot),Dn(Tn.key,Ot),Dn(hr.key,Lt),Dn(za.key,Gt),Dn(mo.key,Bt);const gn=Tt(-1);Dn(of,gn);const Fn={agentOverviews:[],selectedAgentId:void 0,activeWebviews:["chat"],pinnedAgents:{}},sn=new F1(qe,Fn,Mp,kp);Te(i,sn,pe=>n(66,It=pe)),qe.registerConsumer(sn),Dn(gf,sn);const Yt=new gr(Qe,st,Ot);qe.registerConsumer(Yt),Dn(gr.key,Yt),Qe.setChatModeModel(Yt);let Xt=sn.state;const Qn=new c0(Qe,st);qe.registerConsumer(Qn);const We=new ks(Qe.extensionClient,Ce,Oe),On=new R1(Qe,Qe.flags);qe.registerConsumer(On);const zn=new P1;Tp(Qe),Dn("autofixConversationModel",An),Dn("agentConversationModel",st),Dn("toolsWebviewModel",Pt),Dn("checkpointStore",Cn),Dn("slashCommandModel",Qn),Dn("modelRegistry",zn),Dn("subscriptionModel",We);const Bn=re.flags;Te(i,Bn,pe=>n(9,He=pe));const{isCurrConversationAgentic:Vn}=st;Te(i,Vn,pe=>n(8,tt=pe));let yn=0,qt=!1;const En=We.info;Te(i,En,pe=>n(6,oe=pe));const vt=We.dismissed;Te(i,vt,pe=>n(62,he=pe)),qe.registerConsumer(new class{constructor(pe){this._agentConversationModel=pe}handleMessageFromExtension(pe){return pe.data.type===jt.resetAgentOnboarding&&(this._agentConversationModel.resetOnboarding(),!0)}}(st));let fn,Un=!1,Vt,Ut;return ro(()=>{le.isRemoteAgentSshWindow&&le.remoteAgentSshWindowId&&(Yt.setToRemoteAgent(le.remoteAgentSshWindowId),Ot.setCurrentAgent(le.remoteAgentSshWindowId),Ot.setIsActive(!0));const pe=[Pt.dispose,Ot.dispose,We.dispose];return()=>{pe.forEach(Fe=>Fe==null?void 0:Fe())}}),function(pe={all:[],current:""}){const Fe=Tt(pe);Dn(gm,Fe)}(),i.$$set=pe=>{"initialConversation"in pe&&n(51,se=pe.initialConversation),"initialFlags"in pe&&n(52,ve=pe.initialFlags),"initialSubscriptionInfo"in pe&&n(53,Ce=pe.initialSubscriptionInfo),"initialSubscriptionDismissed"in pe&&n(54,Oe=pe.initialSubscriptionDismissed)},i.$$.update=()=>{var pe,Fe,_t;32&i.$$.dirty[0]&&(($t,nt,ct)=>{nt&&$t.update(dn=>{if(!dn)return ct;const Ee=new Set(dn.activeWebviews);return nt.isActive?Ee.add("chat"):Ee.delete("chat"),{...dn,activeWebviews:Array.from(Ee),agentOverviews:nt.agentOverviews,selectedAgentId:nt.currentAgentId,pinnedAgents:nt.pinnedAgents}})})(sn,le,Fn),32&i.$$.dirty[0]|16&i.$$.dirty[2]&&(($t,nt,ct,dn,Ee)=>{if(JSON.stringify($t)!==JSON.stringify(nt.state)&&nt){const{selectedAgentId:Gn,pinnedAgents:In}=nt.state||{};Gn!==ct.currentAgentId&&(dn.extensionClient.showAugmentPanel(),ct.setIsActive(!0),Ee.setToRemoteAgent(Gn),ct.setCurrentAgent(Gn)),In&&JSON.stringify(In)!==JSON.stringify(ct.pinnedAgents)&&ct.setPinnedAgents(In)}})(Xt,It,le,Qe,Yt),16&i.$$.dirty[0]&&zn.registerModels(Object.entries(re.flags.modelRegistry||{}).map(([$t,nt])=>({name:$t,id:nt}))),32&i.$$.dirty[0]&&n(60,t=!le.isRemoteAgentSshWindow),16&i.$$.dirty[0]&&(n(28,o=re.flagsLoaded),O(),O=lt(o,$t=>n(65,Dt=$t))),544&i.$$.dirty[0]&&n(61,r=He.doUseNewDraftFunctionality||le.isActive),512&i.$$.dirty[0]|1610612736&i.$$.dirty[1]|8&i.$$.dirty[2]&&n(27,s=Dt&&He.fullFeatured&&t&&r),512&i.$$.dirty[0]|8&i.$$.dirty[2]&&n(26,c=Dt&&He.doUseNewDraftFunctionality&&He.fullFeatured),512&i.$$.dirty[0]|1610612736&i.$$.dirty[1]|8&i.$$.dirty[2]&&n(25,a=Dt&&!r&&He.fullFeatured&&t),32&i.$$.dirty[0]&&n(59,l=J$(le)),268435456&i.$$.dirty[1]|4&i.$$.dirty[2]&&n(24,u=!Ae.isAutofixConversation()&&!l.doHideStatusBars),4&i.$$.dirty[2]&&n(3,f=Ae.isAutofixConversation()?Ae.shouldShowAutofixCommandInput()?Zo.autofixCommand:Zo.autofixPrompt:Zo.normal),32&i.$$.dirty[0]&&n(58,m=le.isCreatingAgent||le.isActive&&((pe=le.currentAgent)==null?void 0:pe.status)===Jt.agentStarting),288&i.$$.dirty[0]|134217728&i.$$.dirty[1]&&n(23,p=m?"Remote Agent is starting":le.isActive?le.currentAgentId?"Ask Remote Agent to edit code, run tests, create a pull request":"Fix this bug, tackle this ticket, review comments in my pull request":tt?"Ask or instruct Augment Agent":"Ask or instruct Augment"),128&i.$$.dirty[0]&&n(22,_=xe.actions.length>0),128&i.$$.dirty[0]&&n(21,M=xe.actions.includes(Zt.allActionsComplete)),16&i.$$.dirty[0]&&(n(20,C=re.currentConversationModel.totalCharactersStore),S(),S=lt(C,$t=>n(63,ie=$t))),32&i.$$.dirty[0]|16777216&i.$$.dirty[1]|2&i.$$.dirty[2]&&n(19,T=(()=>{if(function(){try{const nt=sessionStorage.getItem(h$);return!!nt&&JSON.parse(nt).hideForSession===!0}catch(nt){return console.error("Failed to read conversation history warning preference from sessionStorage:",nt),!1}}()||le.isActive||yn>0&&Date.now()-yn<36e5)return!1;const $t=Qe.flags.conversationHistorySizeThresholdBytes/2;return ie>$t})()),32&i.$$.dirty[0]|33554432&i.$$.dirty[1]|2&i.$$.dirty[2]&&n(1,E=!qt&&!function(){try{const $t=localStorage.getItem(g$);return!!$t&&JSON.parse($t).neverShow===!0}catch($t){return console.error("Failed to read thread length warning preference from localStorage:",$t),!1}}()&&ie>6e5&&!le.isActive),32&i.$$.dirty[0]&&n(18,R=le.isActive&&le.currentAgent&&!((Fe=le.currentAgent)!=null&&Fe.is_setup_script_agent)),64&i.$$.dirty[0]|1&i.$$.dirty[2]&&n(2,N=!(!oe||he)&&We.shouldShowWarning(oe)),32&i.$$.dirty[0]&&($t=>{const nt=$t.isRemoteAgentSshWindow,ct=$t.remoteAgentSshWindowId;Un===nt&&fn===ct||(Un=nt,fn=ct,nt&&ct&&(Yt.setToRemoteAgent(ct),$t.setCurrentAgent(ct),$t.setIsActive(!0)))})(le),32&i.$$.dirty[0]&&n(17,J=le.isActive),32&i.$$.dirty[0]&&n(16,Q=le.isActive&&le.currentAgentId),1&i.$$.dirty[0]&&(n(15,X=((_t=Ut==null?void 0:Ut.isFocused)==null?void 0:_t.call(Ut))||Tt(!1)),ee(),ee=lt(X,$t=>n(29,un=$t))),32&i.$$.dirty[0]&&n(14,K=le.isActive&&!le.currentAgentId),8&i.$$.dirty[0]&&n(13,H=f!==Zo.autofixCommand&&f!==Zo.autofixPrompt),6&i.$$.dirty[0]&&n(12,Y=N||E),16&i.$$.dirty[0]&&n(57,V=re.currentConversationModel.draftExchange),67108864&i.$$.dirty[1]&&n(11,Z=V==null?void 0:V.rich_text_json_repr)},[Ut,E,N,f,re,le,oe,xe,tt,He,Vt,Z,Y,H,K,X,Q,J,R,T,C,M,_,p,u,a,c,s,o,un,z,qe,Ve,zt,Qe,Ot,An,$n,sn,Yt,We,On,Bn,Vn,function(){n(55,yn=Date.now())},function(){(function(){try{const pe={hideForSession:!0,timestamp:new Date().toISOString()};sessionStorage.setItem(h$,JSON.stringify(pe))}catch(pe){console.error("Failed to save conversation history warning preference to sessionStorage:",pe)}})(),n(55,yn=Date.now())},async function(){const pe=Object.keys(Qe.conversations);pe.length>0&&await Qe.deleteConversations(pe)},function(){n(56,qt=!0)},function(){(function(){try{const pe={neverShow:!0,timestamp:new Date().toISOString()};localStorage.setItem(g$,JSON.stringify(pe))}catch(pe){console.error("Failed to save thread length warning preference to localStorage:",pe)}})(),n(56,qt=!0)},En,vt,se,ve,Ce,Oe,yn,qt,V,m,l,t,r,he,ie,Ae,Dt,It,()=>{re.saveImmediate()},pe=>function(Fe,_t,$t,nt,ct){var dn,Ee;Fe.key==="Enter"&&!Fe.shiftKey&&ct&&ct.isFocused&&!ot(ct.isFocused())&&ct.forceFocus(),!Fe.ctrlKey&&!Fe.metaKey||Fe.key!=="l"||Fe.shiftKey||(nt?nt.createThreadOfCurrentType():$t.isActive?$t.setCurrentAgent(void 0):(_t.setCurrentConversation(),_t.extensionClient.reportWebviewClientEvent(Qo.chatNewConversation)),Fe.preventDefault()),_t.flags.enableDebugFeatures&&(Fe.ctrlKey||Fe.metaKey)&&Fe.key==="."&&!Fe.shiftKey&&nt&&(nt.toggleChatAgentMode(),Fe.preventDefault()),_t.flags.enableDebugFeatures&&(Fe.ctrlKey||Fe.metaKey)&&Fe.key==="."&&Fe.shiftKey&&nt&&(nt.toggleChatAgentMode(!0),Fe.preventDefault()),_t.flags.enableDebugFeatures&&!$t.isActive&&((Fe.ctrlKey||Fe.metaKey)&&Fe.shiftKey&&Fe.key==="l"&&(_t.popCurrentConversation(),Fe.preventDefault()),Fe.altKey&&Fe.code==="BracketRight"&&(_t.setCurrentConversation((dn=_t.nextConversation)==null?void 0:dn.id,!1),Fe.preventDefault()),Fe.altKey&&Fe.code==="BracketLeft"&&(_t.setCurrentConversation((Ee=_t.previousConversation)==null?void 0:Ee.id,!1),Fe.preventDefault()),(Fe.ctrlKey||Fe.metaKey)&&Fe.key==="]"&&(_t.currentConversationModel.focusModel.focusNext(),Fe.preventDefault()),(Fe.ctrlKey||Fe.metaKey)&&Fe.key==="["&&(_t.currentConversationModel.focusModel.focusPrev(),Fe.preventDefault()),Fe.key==="Escape"&&(_t.currentConversationModel.focusModel.setFocusIdx(void 0),Fe.preventDefault()))}(pe,Qe,Ot,Yt,Ut),function(pe){et[pe?"unshift":"push"](()=>{Vt=pe,n(10,Vt)})},()=>We.dismiss(),()=>Qe.setCurrentConversation(),function(pe){Ut=pe,n(0,Ut)},function(pe){et[pe?"unshift":"push"](()=>{Vt=pe,n(10,Vt)})},function(pe){Vt=pe,n(10,Vt)},()=>{Q&&(Ut==null||Ut.requestFocus())}]}class $k extends ue{constructor(e){super(),de(this,e,dk,uk,ce,{initialConversation:51,initialFlags:52,initialSubscriptionInfo:53,initialSubscriptionDismissed:54},null,[-1,-1,-1])}}function S$(i){let e,n,t,o,r,s,c,a;n=new Ge({props:{size:1,$$slots:{default:[fk]},$$scope:{ctx:i}}}),o=new Ge({props:{size:1,$$slots:{default:[mk]},$$scope:{ctx:i}}}),s=new Ge({props:{size:1,$$slots:{default:[pk]},$$scope:{ctx:i}}});let l=i[0]!=="intellij"&&E$(i);return{c(){e=L("div"),v(n.$$.fragment),t=B(),v(o.$$.fragment),r=B(),v(s.$$.fragment),c=B(),l&&l.c(),A(e,"class","c-augment-features svelte-1jb2nyh")},m(u,f){x(u,e,f),w(n,e,null),F(e,t),w(o,e,null),F(e,r),w(s,e,null),F(e,c),l&&l.m(e,null),a=!0},p(u,f){const m={};2&f&&(m.$$scope={dirty:f,ctx:u}),n.$set(m);const p={};2&f&&(p.$$scope={dirty:f,ctx:u}),o.$set(p);const _={};3&f&&(_.$$scope={dirty:f,ctx:u}),s.$set(_),u[0]!=="intellij"?l?1&f&&d(l,1):(l=E$(u),l.c(),d(l,1),l.m(e,null)):l&&(j(),$(l,1,1,()=>{l=null}),q())},i(u){a||(d(n.$$.fragment,u),d(o.$$.fragment,u),d(s.$$.fragment,u),d(l),a=!0)},o(u){$(n.$$.fragment,u),$(o.$$.fragment,u),$(s.$$.fragment,u),$(l),a=!1},d(u){u&&b(e),y(n),y(o),y(s),l&&l.d()}}}function fk(i){let e;return{c(){e=G("Augment Features:")},m(n,t){x(n,e,t)},d(n){n&&b(e)}}}function mk(i){let e,n,t;return{c(){e=L("a"),e.textContent="Chat",n=G(` &
      `),t=L("a"),t.textContent="Agent,",A(e,"href","https://docs.augmentcode.com/using-augment/chat"),A(e,"class","svelte-1jb2nyh"),A(t,"href","https://docs.augmentcode.com/using-augment/agent"),A(t,"class","svelte-1jb2nyh")},m(o,r){x(o,e,r),x(o,n,r),x(o,t,r)},p:P,d(o){o&&(b(e),b(n),b(t))}}}function T$(i){let e,n,t;return{c(){e=G(`,
        `),n=L("a"),n.textContent="Instructions",t=G(","),A(n,"href","https://docs.augmentcode.com/using-augment/instructions"),A(n,"class","svelte-1jb2nyh")},m(o,r){x(o,e,r),x(o,n,r),x(o,t,r)},d(o){o&&(b(e),b(n),b(t))}}}function pk(i){let e,n,t=i[0]!=="intellij"&&T$();return{c(){e=L("a"),e.textContent="Code Completions",t&&t.c(),n=me(),A(e,"href","https://docs.augmentcode.com/using-augment/completions"),A(e,"class","svelte-1jb2nyh")},m(o,r){x(o,e,r),t&&t.m(o,r),x(o,n,r)},p(o,r){o[0]!=="intellij"?t||(t=T$(),t.c(),t.m(n.parentNode,n)):t&&(t.d(1),t=null)},d(o){o&&(b(e),b(n)),t&&t.d(o)}}}function E$(i){let e,n;return e=new Ge({props:{size:1,$$slots:{default:[gk]},$$scope:{ctx:i}}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function gk(i){let e;return{c(){e=L("a"),e.textContent="Next Edit",A(e,"href","https://docs.augmentcode.com/using-augment/next-edit"),A(e,"class","svelte-1jb2nyh")},m(n,t){x(n,e,t)},p:P,d(n){n&&b(e)}}}function hk(i){let e,n,t=i[0]!==void 0&&S$(i);return{c(){t&&t.c(),e=me()},m(o,r){t&&t.m(o,r),x(o,e,r),n=!0},p(o,[r]){o[0]!==void 0?t?(t.p(o,r),1&r&&d(t,1)):(t=S$(o),t.c(),d(t,1),t.m(e.parentNode,e)):t&&(j(),$(t,1,1,()=>{t=null}),q())},i(o){n||(d(t),n=!0)},o(o){$(t),n=!1},d(o){o&&b(e),t&&t.d(o)}}}function vk(i,e,n){let{client:t}=e;return i.$$set=o=>{"client"in o&&n(0,t=o.client)},[t]}class hm extends ue{constructor(e){super(),de(this,e,vk,hk,ce,{client:0})}}function wk(i){let e,n;return{c(){e=rt("svg"),n=rt("ellipse"),A(n,"cx","51"),A(n,"cy","4.5"),A(n,"rx","51"),A(n,"ry","4.5"),A(n,"fill","currentColor"),A(e,"width","102"),A(e,"height","9"),A(e,"viewBox","0 0 102 9"),A(e,"fill","none"),A(e,"xmlns","http://www.w3.org/2000/svg")},m(t,o){x(t,e,o),F(e,n)},p:P,i:P,o:P,d(t){t&&b(e)}}}class yk extends ue{constructor(e){super(),de(this,e,null,wk,ce,{})}}function I$(i){let e,n,t;return n=new yk({}),{c(){e=L("div"),v(n.$$.fragment),A(e,"class","c-augment-logo-animated__shadow svelte-hwxi20")},m(o,r){x(o,e,r),w(n,e,null),t=!0},i(o){t||(d(n.$$.fragment,o),t=!0)},o(o){$(n.$$.fragment,o),t=!1},d(o){o&&b(e),y(n)}}}function bk(i){let e,n,t,o;const r=i[8].default,s=Ye(r,i,i[7],null),c=s||function(l){let u,f;return u=new m1({}),{c(){v(u.$$.fragment)},m(m,p){w(u,m,p),f=!0},i(m){f||(d(u.$$.fragment,m),f=!0)},o(m){$(u.$$.fragment,m),f=!1},d(m){y(u,m)}}}();let a=i[0]&&I$();return{c(){e=L("div"),n=L("div"),c&&c.c(),t=B(),a&&a.c(),A(n,"class","c-augment-logo-animated__icon svelte-hwxi20"),A(e,"class","c-augment-logo-animated svelte-hwxi20"),A(e,"style",i[2]),ke(e,"c-augment-logo-animated--animated",i[1])},m(l,u){x(l,e,u),F(e,n),c&&c.m(n,null),F(e,t),a&&a.m(e,null),o=!0},p(l,[u]){s&&s.p&&(!o||128&u)&&Ke(s,r,l,l[7],o?Ze(r,l[7],u,null):Xe(l[7]),null),l[0]?a?1&u&&d(a,1):(a=I$(),a.c(),d(a,1),a.m(e,null)):a&&(j(),$(a,1,1,()=>{a=null}),q()),(!o||4&u)&&A(e,"style",l[2]),(!o||2&u)&&ke(e,"c-augment-logo-animated--animated",l[1])},i(l){o||(d(c,l),d(a),o=!0)},o(l){$(c,l),$(a),o=!1},d(l){l&&b(e),c&&c.d(l),a&&a.d()}}}function xk(i,e,n){let t,o,{$$slots:r={},$$scope:s}=e,{heightPx:c=160}=e,{floatHeight:a=20}=e,{animationDuration:l=3}=e,{showShadow:u=!0}=e,{animated:f=!0}=e;return i.$$set=m=>{"heightPx"in m&&n(3,c=m.heightPx),"floatHeight"in m&&n(4,a=m.floatHeight),"animationDuration"in m&&n(5,l=m.animationDuration),"showShadow"in m&&n(0,u=m.showShadow),"animated"in m&&n(1,f=m.animated),"$$scope"in m&&n(7,s=m.$$scope)},i.$$.update=()=>{8&i.$$.dirty&&n(6,t=Math.round(.875*c)),120&i.$$.dirty&&n(2,o=`
    --augment-logo-height: ${c}px;
    --augment-logo-icon-size: ${t}px;
    --augment-logo-float-height: ${a}px;
    --animation-duration: ${l}s;
  `)},[u,f,o,c,a,l,t,s,r]}class vm extends ue{constructor(e){super(),de(this,e,xk,bk,ce,{heightPx:3,floatHeight:4,animationDuration:5,showShadow:0,animated:1})}}const _k=i=>({}),L$=i=>({}),Ck=i=>({}),R$=i=>({});function D$(i){let e,n;const t=i[2].logo,o=Ye(t,i,i[1],R$);return{c(){e=L("div"),o&&o.c(),A(e,"class","c-onboarding-layout__logo svelte-72kwkw")},m(r,s){x(r,e,s),o&&o.m(e,null),n=!0},p(r,s){o&&o.p&&(!n||2&s)&&Ke(o,t,r,r[1],n?Ze(t,r[1],s,Ck):Xe(r[1]),R$)},i(r){n||(d(o,r),n=!0)},o(r){$(o,r),n=!1},d(r){r&&b(e),o&&o.d(r)}}}function N$(i){let e,n;const t=i[2].error,o=Ye(t,i,i[1],L$);return{c(){e=L("div"),o&&o.c(),A(e,"class","c-onboarding-layout__error svelte-72kwkw")},m(r,s){x(r,e,s),o&&o.m(e,null),n=!0},p(r,s){o&&o.p&&(!n||2&s)&&Ke(o,t,r,r[1],n?Ze(t,r[1],s,_k):Xe(r[1]),L$)},i(r){n||(d(o,r),n=!0)},o(r){$(o,r),n=!1},d(r){r&&b(e),o&&o.d(r)}}}function Ak(i){let e,n,t,o,r,s=i[0].logo&&D$(i);const c=i[2].default,a=Ye(c,i,i[1],null);let l=i[0].error&&N$(i);return{c(){e=L("div"),s&&s.c(),n=B(),t=L("div"),a&&a.c(),o=B(),l&&l.c(),A(t,"class","c-onboarding-layout__content svelte-72kwkw"),A(e,"class","c-onboarding-layout svelte-72kwkw"),ke(e,"c-onboarding-layout__has-logo",i[0].logo)},m(u,f){x(u,e,f),s&&s.m(e,null),F(e,n),F(e,t),a&&a.m(t,null),F(e,o),l&&l.m(e,null),r=!0},p(u,[f]){u[0].logo?s?(s.p(u,f),1&f&&d(s,1)):(s=D$(u),s.c(),d(s,1),s.m(e,n)):s&&(j(),$(s,1,1,()=>{s=null}),q()),a&&a.p&&(!r||2&f)&&Ke(a,c,u,u[1],r?Ze(c,u[1],f,null):Xe(u[1]),null),u[0].error?l?(l.p(u,f),1&f&&d(l,1)):(l=N$(u),l.c(),d(l,1),l.m(e,null)):l&&(j(),$(l,1,1,()=>{l=null}),q()),(!r||1&f)&&ke(e,"c-onboarding-layout__has-logo",u[0].logo)},i(u){r||(d(s),d(a,u),d(l),r=!0)},o(u){$(s),$(a,u),$(l),r=!1},d(u){u&&b(e),s&&s.d(),a&&a.d(u),l&&l.d()}}}function Mk(i,e,n){let{$$slots:t={},$$scope:o}=e;const r=G$(t);return i.$$set=s=>{"$$scope"in s&&n(1,o=s.$$scope)},[r,o,t]}class Xs extends ue{constructor(e){super(),de(this,e,Mk,Ak,ce,{})}}function kk(i){let e;return{c(){e=G(i[0])},m(n,t){x(n,e,t)},p(n,t){1&t&&_e(e,n[0])},d(n){n&&b(e)}}}function Sk(i){let e;return{c(){e=G(i[1])},m(n,t){x(n,e,t)},p(n,t){2&t&&_e(e,n[1])},d(n){n&&b(e)}}}function Tk(i){let e,n,t,o,r;return n=new Ge({props:{size:2,weight:"bold",class:"c-sign-in__welcome",$$slots:{default:[kk]},$$scope:{ctx:i}}}),o=new Ge({props:{size:1,$$slots:{default:[Sk]},$$scope:{ctx:i}}}),{c(){e=L("div"),v(n.$$.fragment),t=B(),v(o.$$.fragment),A(e,"class","c-sign-in__title svelte-yuxz62")},m(s,c){x(s,e,c),w(n,e,null),F(e,t),w(o,e,null),r=!0},p(s,[c]){const a={};5&c&&(a.$$scope={dirty:c,ctx:s}),n.$set(a);const l={};6&c&&(l.$$scope={dirty:c,ctx:s}),o.$set(l)},i(s){r||(d(n.$$.fragment,s),d(o.$$.fragment,s),r=!0)},o(s){$(n.$$.fragment,s),$(o.$$.fragment,s),r=!1},d(s){s&&b(e),y(n),y(o)}}}function Ek(i,e,n){let{title:t}=e,{subtitle:o}=e;return i.$$set=r=>{"title"in r&&n(0,t=r.title),"subtitle"in r&&n(1,o=r.subtitle)},[t,o]}class wm extends ue{constructor(e){super(),de(this,e,Ek,Tk,ce,{title:0,subtitle:1})}}function Ik(i){let e,n,t,o,r,s;return{c(){e=rt("svg"),n=rt("g"),t=rt("path"),o=rt("defs"),r=rt("clipPath"),s=rt("rect"),A(t,"d","M16 7.99201C16 3.58042 12.416 0 8 0C3.584 0 0 3.58042 0 7.99201C0 10.4216 1.104 12.6114 2.832 14.0819C2.848 14.0979 2.864 14.0979 2.864 14.1139C3.008 14.2258 3.152 14.3377 3.312 14.4496C3.392 14.4975 3.456 14.5614 3.536 14.6254C4.816 15.4885 6.352 16 8.016 16C9.68 16 11.216 15.4885 12.496 14.6254C12.576 14.5774 12.64 14.5135 12.72 14.4655C12.864 14.3536 13.024 14.2418 13.168 14.1299C13.184 14.1139 13.2 14.1139 13.2 14.0979C14.896 12.6114 16 10.4216 16 7.99201ZM8 14.993C6.496 14.993 5.12 14.5135 3.984 13.7143C4 13.5864 4.032 13.4585 4.064 13.3307C4.16 12.979 4.304 12.6434 4.48 12.3397C4.656 12.036 4.864 11.7642 5.12 11.5245C5.36 11.2847 5.648 11.0609 5.936 10.8851C6.24 10.7093 6.56 10.5814 6.912 10.4855C7.264 10.3896 7.632 10.3417 8 10.3417C8.592 10.3417 9.136 10.4535 9.632 10.6613C10.128 10.8691 10.56 11.1568 10.928 11.5085C11.296 11.8761 11.584 12.3077 11.792 12.8032C11.904 13.0909 11.984 13.3946 12.032 13.7143C10.88 14.5135 9.504 14.993 8 14.993ZM5.552 7.59241C5.408 7.27273 5.344 6.92108 5.344 6.56943C5.344 6.21778 5.408 5.86613 5.552 5.54645C5.696 5.22677 5.888 4.93906 6.128 4.6993C6.368 4.45954 6.656 4.26773 6.976 4.12388C7.296 3.98002 7.648 3.91608 8 3.91608C8.368 3.91608 8.704 3.98002 9.024 4.12388C9.344 4.26773 9.632 4.45954 9.872 4.6993C10.112 4.93906 10.304 5.22677 10.448 5.54645C10.592 5.86613 10.656 6.21778 10.656 6.56943C10.656 6.93706 10.592 7.27273 10.448 7.59241C10.304 7.91209 10.112 8.1998 9.872 8.43956C9.632 8.67932 9.344 8.87113 9.024 9.01499C8.384 9.28671 7.6 9.28671 6.96 9.01499C6.64 8.87113 6.352 8.67932 6.112 8.43956C5.872 8.1998 5.68 7.91209 5.552 7.59241ZM12.976 12.8991C12.976 12.8671 12.96 12.8511 12.96 12.8192C12.8 12.3237 12.576 11.8442 12.272 11.4126C11.968 10.981 11.616 10.5974 11.184 10.2777C10.864 10.038 10.512 9.83017 10.144 9.67033C10.32 9.55844 10.48 9.41459 10.608 9.28671C10.848 9.04695 11.056 8.79121 11.232 8.5035C11.408 8.21579 11.536 7.91209 11.632 7.57642C11.728 7.24076 11.76 6.9051 11.76 6.56943C11.76 6.04196 11.664 5.54645 11.472 5.0989C11.28 4.65135 11.008 4.25175 10.656 3.9001C10.32 3.56444 9.904 3.29271 9.456 3.1009C9.008 2.90909 8.512 2.81319 7.984 2.81319C7.456 2.81319 6.96 2.90909 6.512 3.1009C6.064 3.29271 5.648 3.56444 5.312 3.91608C4.976 4.25175 4.704 4.66733 4.512 5.11489C4.32 5.56244 4.224 6.05794 4.224 6.58541C4.224 6.93706 4.272 7.27273 4.368 7.59241C4.464 7.92807 4.592 8.23177 4.768 8.51948C4.928 8.80719 5.152 9.06294 5.392 9.3027C5.536 9.44655 5.696 9.57443 5.872 9.68631C5.488 9.86214 5.136 10.0699 4.832 10.3097C4.416 10.6294 4.048 11.013 3.744 11.4286C3.44 11.8601 3.216 12.3237 3.056 12.8352C3.04 12.8671 3.04 12.8991 3.04 12.9151C1.776 11.6364 0.992 9.91009 0.992 7.99201C0.992 4.13986 4.144 0.991009 8 0.991009C11.856 0.991009 15.008 4.13986 15.008 7.99201C15.008 9.91009 14.224 11.6364 12.976 12.8991Z"),A(t,"fill","currentColor"),A(n,"clip-path","url(#clip0_9570_7560)"),A(s,"width","16"),A(s,"height","16"),A(s,"fill","currentColor"),A(r,"id","clip0_9570_7560"),A(e,"width","16"),A(e,"height","16"),A(e,"viewBox","0 0 16 16"),A(e,"fill","none"),A(e,"xmlns","http://www.w3.org/2000/svg")},m(c,a){x(c,e,a),F(e,n),F(n,t),F(e,o),F(o,r),F(r,s)},p:P,i:P,o:P,d(c){c&&b(e)}}}class Lk extends ue{constructor(e){super(),de(this,e,null,Ik,ce,{})}}function Rk(i){let e;return{c(){e=G("Sign In")},m(n,t){x(n,e,t)},d(n){n&&b(e)}}}function Dk(i){let e,n;return e=new Lk({props:{slot:"iconLeft"}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p:P,i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function Nk(i){let e,n,t,o,r,s,c;return n=new wm({props:{title:"Welcome!",subtitle:"Please sign in below."}}),o=new ht({props:{variant:"solid",color:"accent","data-testid":"sign-in-button",$$slots:{iconLeft:[Dk],default:[Rk]},$$scope:{ctx:i}}}),o.$on("click",i[1]),s=new hm({props:{client:i[0]}}),{c(){e=L("div"),v(n.$$.fragment),t=B(),v(o.$$.fragment),r=B(),v(s.$$.fragment),A(e,"class","c-sign-in svelte-77uw5c")},m(a,l){x(a,e,l),w(n,e,null),F(e,t),w(o,e,null),F(e,r),w(s,e,null),c=!0},p(a,l){const u={};8&l&&(u.$$scope={dirty:l,ctx:a}),o.$set(u);const f={};1&l&&(f.client=a[0]),s.$set(f)},i(a){c||(d(n.$$.fragment,a),d(o.$$.fragment,a),d(s.$$.fragment,a),c=!0)},o(a){$(n.$$.fragment,a),$(o.$$.fragment,a),$(s.$$.fragment,a),c=!1},d(a){a&&b(e),y(n),y(o),y(s)}}}function Pk(i){let e,n;return e=new vm({props:{slot:"logo"}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p:P,i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function Fk(i){let e,n,t,o;return e=new Xs({props:{$$slots:{logo:[Pk],default:[Nk]},$$scope:{ctx:i}}}),{c(){v(e.$$.fragment)},m(r,s){w(e,r,s),n=!0,t||(o=Le(window,"message",i[2]),t=!0)},p(r,[s]){const c={};9&s&&(c.$$scope={dirty:s,ctx:r}),e.$set(c)},i(r){n||(d(e.$$.fragment,r),n=!0)},o(r){$(e.$$.fragment,r),n=!1},d(r){y(e,r),t=!1,o()}}}function Ok(i,e,n){let t;return wn.postMessage({type:jt.signInLoaded}),[t,function(){wn.postMessage({type:jt.mainPanelPerformAction,data:"sign-in"})},o=>{const r=o.data;r.type===jt.signInLoadedResponse&&n(0,t=r.data.client)}]}class zk extends ue{constructor(e){super(),de(this,e,Ok,Fk,ce,{})}}const Bk=i=>({}),P$=i=>({slot:"icon"}),Uk=i=>({}),F$=i=>({slot:"icon"});function Hk(i){let e,n;return e=new Jn({props:{variant:"soft",size:1,color:i[0],$$slots:{icon:[Vk],default:[Wk]},$$scope:{ctx:i}}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p(t,o){const r={};1&o&&(r.color=t[0]),74&o&&(r.$$scope={dirty:o,ctx:t}),e.$set(r)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function jk(i){let e,n,t,o;return e=new Jn({props:{variant:"soft",size:1,color:i[0],$$slots:{default:[Gk]},$$scope:{ctx:i}}}),t=new Jn({props:{variant:"soft",size:1,color:"info",$$slots:{icon:[Kk],default:[Yk]},$$scope:{ctx:i}}}),{c(){v(e.$$.fragment),n=B(),v(t.$$.fragment)},m(r,s){w(e,r,s),x(r,n,s),w(t,r,s),o=!0},p(r,s){const c={};1&s&&(c.color=r[0]),66&s&&(c.$$scope={dirty:s,ctx:r}),e.$set(c);const a={};68&s&&(a.$$scope={dirty:s,ctx:r}),t.$set(a)},i(r){o||(d(e.$$.fragment,r),d(t.$$.fragment,r),o=!0)},o(r){$(e.$$.fragment,r),$(t.$$.fragment,r),o=!1},d(r){r&&b(n),y(e,r),y(t,r)}}}function O$(i){let e,n;return e=new dt({props:{variant:"ghost",color:"neutral",size:1,$$slots:{default:[qk]},$$scope:{ctx:i}}}),e.$on("click",i[5]),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p(t,o){const r={};64&o&&(r.$$scope={dirty:o,ctx:t}),e.$set(r)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function qk(i){let e,n;return e=new xr({}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function Wk(i){let e,n,t,o;n=new br({props:{markdown:i[1]}});let r=!!i[3]&&O$(i);return{c(){e=L("div"),v(n.$$.fragment),t=B(),r&&r.c(),A(e,"class","c-callout-wrapper svelte-fh6sa8")},m(s,c){x(s,e,c),w(n,e,null),F(e,t),r&&r.m(e,null),o=!0},p(s,c){const a={};2&c&&(a.markdown=s[1]),n.$set(a),s[3]?r?(r.p(s,c),8&c&&d(r,1)):(r=O$(s),r.c(),d(r,1),r.m(e,null)):r&&(j(),$(r,1,1,()=>{r=null}),q())},i(s){o||(d(n.$$.fragment,s),d(r),o=!0)},o(s){$(n.$$.fragment,s),$(r),o=!1},d(s){s&&b(e),y(n),r&&r.d()}}}function Vk(i){let e;const n=i[4].icon,t=Ye(n,i,i[6],P$);return{c(){t&&t.c()},m(o,r){t&&t.m(o,r),e=!0},p(o,r){t&&t.p&&(!e||64&r)&&Ke(t,n,o,o[6],e?Ze(n,o[6],r,Bk):Xe(o[6]),P$)},i(o){e||(d(t,o),e=!0)},o(o){$(t,o),e=!1},d(o){t&&t.d(o)}}}function Gk(i){let e,n;return e=new br({props:{markdown:i[1]}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p(t,o){const r={};2&o&&(r.markdown=t[1]),e.$set(r)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function Yk(i){let e,n;return e=new br({props:{markdown:i[2]}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p(t,o){const r={};4&o&&(r.markdown=t[2]),e.$set(r)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function Kk(i){let e;const n=i[4].icon,t=Ye(n,i,i[6],F$);return{c(){t&&t.c()},m(o,r){t&&t.m(o,r),e=!0},p(o,r){t&&t.p&&(!e||64&r)&&Ke(t,n,o,o[6],e?Ze(n,o[6],r,Uk):Xe(o[6]),F$)},i(o){e||(d(t,o),e=!0)},o(o){$(t,o),e=!1},d(o){t&&t.d(o)}}}function Xk(i){let e,n,t,o,r;const s=[jk,Hk],c=[];function a(f,m){return f[2]?0:1}n=a(i),t=c[n]=s[n](i);const l=i[4].default,u=Ye(l,i,i[6],null);return{c(){e=L("div"),t.c(),o=B(),u&&u.c(),A(e,"class","c-base-card svelte-fh6sa8")},m(f,m){x(f,e,m),c[n].m(e,null),F(e,o),u&&u.m(e,null),r=!0},p(f,[m]){let p=n;n=a(f),n===p?c[n].p(f,m):(j(),$(c[p],1,1,()=>{c[p]=null}),q(),t=c[n],t?t.p(f,m):(t=c[n]=s[n](f),t.c()),d(t,1),t.m(e,o)),u&&u.p&&(!r||64&m)&&Ke(u,l,f,f[6],r?Ze(l,f[6],m,null):Xe(f[6]),null)},i(f){r||(d(t),d(u,f),r=!0)},o(f){$(t),$(u,f),r=!1},d(f){f&&b(e),c[n].d(),u&&u.d(f)}}}function Zk(i,e,n){let{$$slots:t={},$$scope:o}=e,{color:r}=e,{description:s}=e,{callout:c}=e,{onClose:a}=e;return i.$$set=l=>{"color"in l&&n(0,r=l.color),"description"in l&&n(1,s=l.description),"callout"in l&&n(2,c=l.callout),"onClose"in l&&n(3,a=l.onClose),"$$scope"in l&&n(6,o=l.$$scope)},[r,s,c,a,t,()=>a(),o]}class Zs extends ue{constructor(e){super(),de(this,e,Zk,Xk,ce,{color:0,description:1,callout:2,onClose:3})}}function z$(i,e,n){const t=i.slice();return t[9]=e[n].text,t[10]=e[n].action,t[11]=e[n].appearance,t}const Jk=i=>({}),B$=i=>({slot:"icon"});function Qk(i){let e,n,t=i[9]+"";return{c(){e=G(t),n=B()},m(o,r){x(o,e,r),x(o,n,r)},p(o,r){4&r&&t!==(t=o[9]+"")&&_e(e,t)},d(o){o&&(b(e),b(n))}}}function U$(i){let e,n;return e=new ht({props:{size:2,variant:"solid",color:i[11]?i[11]:"accent",class:"c-btns-card__button",title:i[9],$$slots:{default:[Qk]},$$scope:{ctx:i}}}),e.$on("click",function(){return i[7](i[10])}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p(t,o){i=t;const r={};4&o&&(r.color=i[11]?i[11]:"accent"),4&o&&(r.title=i[9]),260&o&&(r.$$scope={dirty:o,ctx:i}),e.$set(r)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function H$(i){let e,n;return e=new Of({}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function eS(i){let e,n,t,o,r=at(i[2]),s=[];for(let l=0;l<r.length;l+=1)s[l]=U$(z$(i,r,l));const c=l=>$(s[l],1,1,()=>{s[l]=null});let a=i[3]&&H$();return{c(){e=L("div");for(let l=0;l<s.length;l+=1)s[l].c();n=B(),a&&a.c(),t=me(),A(e,"class","c-btns-card__buttons svelte-1701q2d")},m(l,u){x(l,e,u);for(let f=0;f<s.length;f+=1)s[f]&&s[f].m(e,null);x(l,n,u),a&&a.m(l,u),x(l,t,u),o=!0},p(l,u){if(36&u){let f;for(r=at(l[2]),f=0;f<r.length;f+=1){const m=z$(l,r,f);s[f]?(s[f].p(m,u),d(s[f],1)):(s[f]=U$(m),s[f].c(),d(s[f],1),s[f].m(e,null))}for(j(),f=r.length;f<s.length;f+=1)c(f);q()}l[3]?a?8&u&&d(a,1):(a=H$(),a.c(),d(a,1),a.m(t.parentNode,t)):a&&(j(),$(a,1,1,()=>{a=null}),q())},i(l){if(!o){for(let u=0;u<r.length;u+=1)d(s[u]);d(a),o=!0}},o(l){s=s.filter(Boolean);for(let u=0;u<s.length;u+=1)$(s[u]);$(a),o=!1},d(l){l&&(b(e),b(n),b(t)),pn(s,l),a&&a.d(l)}}}function tS(i){let e;const n=i[6].icon,t=Ye(n,i,i[8],B$);return{c(){t&&t.c()},m(o,r){t&&t.m(o,r),e=!0},p(o,r){t&&t.p&&(!e||256&r)&&Ke(t,n,o,o[8],e?Ze(n,o[8],r,Jk):Xe(o[8]),B$)},i(o){e||(d(t,o),e=!0)},o(o){$(t,o),e=!1},d(o){t&&t.d(o)}}}function nS(i){let e,n;return e=new Zs({props:{color:i[1],description:i[0],callout:i[4],$$slots:{icon:[tS],default:[eS]},$$scope:{ctx:i}}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p(t,[o]){const r={};2&o&&(r.color=t[1]),1&o&&(r.description=t[0]),16&o&&(r.callout=t[4]),268&o&&(r.$$scope={dirty:o,ctx:t}),e.$set(r)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function oS(i,e,n){let{$$slots:t={},$$scope:o}=e,{description:r}=e,{color:s}=e,{buttons:c=[]}=e,{inProgress:a=!1}=e,{callout:l}=e;function u(f){wn.postMessage({type:jt.mainPanelPerformAction,data:f})}return i.$$set=f=>{"description"in f&&n(0,r=f.description),"color"in f&&n(1,s=f.color),"buttons"in f&&n(2,c=f.buttons),"inProgress"in f&&n(3,a=f.inProgress),"callout"in f&&n(4,l=f.callout),"$$scope"in f&&n(8,o=f.$$scope)},[r,s,c,a,l,u,t,f=>u(f),o]}class Xr extends ue{constructor(e){super(),de(this,e,oS,nS,ce,{description:0,color:1,buttons:2,inProgress:3,callout:4})}}function rS(i){return{c:P,m:P,p:P,i:P,o:P,d:P}}function iS(i){let e,n;return e=new Zs({props:{color:"warning",description:"Current workspace contains your home directory. Augment cannot upload your home directory to the cloud. Please open a different workspace",$$slots:{icon:[$S]},$$scope:{ctx:i}}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p(t,o){const r={};8&o&&(r.$$scope={dirty:o,ctx:t}),e.$set(r)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function sS(i){let e,n;return e=new Zs({props:{color:"warning",description:`The workspace you have opened exceeds Augment's ${i[2].maxTrackableFileCount} file upload limit. Please use a .augmentignore or .gitignore to exclude files from being uploaded, or open a smaller workspace.`,$$slots:{icon:[fS]},$$scope:{ctx:i}}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p(t,o){const r={};4&o&&(r.description=`The workspace you have opened exceeds Augment's ${t[2].maxTrackableFileCount} file upload limit. Please use a .augmentignore or .gitignore to exclude files from being uploaded, or open a smaller workspace.`),8&o&&(r.$$scope={dirty:o,ctx:t}),e.$set(r)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function aS(i){let e,n;return e=new Xr({props:{color:"neutral",description:"To provide the best quality responses, Augment will index your code in our secure cloud. Your data always stays secure and private. [Learn More](https://docs.augmentcode.com/setup-augment/workspace-indexing)",callout:i[2].userTier==="community"?"You are subscribed to the Community plan, we may use any code you share to train our AI models.":void 0,buttons:[{text:"Enable Indexing",action:"grant-sync-permission"}],$$slots:{icon:[mS]},$$scope:{ctx:i}}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p(t,o){const r={};4&o&&(r.callout=t[2].userTier==="community"?"You are subscribed to the Community plan, we may use any code you share to train our AI models.":void 0),8&o&&(r.$$scope={dirty:o,ctx:t}),e.$set(r)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function cS(i){let e,n;return e=new Xr({props:{color:"warning",description:"Codeium suggestions will collide with Augment's suggestions. Turn off Codeium to fix this.",buttons:[{text:"Disable Codeium",action:"disable-codeium"}],$$slots:{icon:[pS]},$$scope:{ctx:i}}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p(t,o){const r={};8&o&&(r.$$scope={dirty:o,ctx:t}),e.$set(r)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function lS(i){let e,n;return e=new Xr({props:{color:"warning",description:"GitHub Copilot suggestions will collide with Augment's suggestions. Turn off Copilot to fix this.",buttons:[{text:"Disable Github Copilot",action:"disable-github-copilot"}],$$slots:{icon:[gS]},$$scope:{ctx:i}}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p(t,o){const r={};8&o&&(r.$$scope={dirty:o,ctx:t}),e.$set(r)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function uS(i){let e,n;return e=new Xr({props:{color:"neutral",description:"Please complete the sign-in process in your browser.",buttons:[{text:"Cancel",action:"cancel-sign-in",appearance:"neutral"}],inProgress:!0,$$slots:{icon:[hS]},$$scope:{ctx:i}}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p(t,o){const r={};8&o&&(r.$$scope={dirty:o,ctx:t}),e.$set(r)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function dS(i){let e,n;return e=new Xr({props:{color:"neutral",description:"Welcome to Augment! Sign in to your existing account or create a new one to get started.",buttons:[{text:"Start using Augment",action:"sign-in"}],$$slots:{icon:[vS]},$$scope:{ctx:i}}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p(t,o){const r={};8&o&&(r.$$scope={dirty:o,ctx:t}),e.$set(r)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function $S(i){let e,n;return e=new Wn({props:{slot:"icon"}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p:P,i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function fS(i){let e,n;return e=new Wn({props:{slot:"icon"}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p:P,i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function mS(i){let e,n;return e=new Bo({props:{slot:"icon"}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p:P,i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function pS(i){let e,n;return e=new Wn({props:{slot:"icon"}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p:P,i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function gS(i){let e,n;return e=new Wn({props:{slot:"icon"}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p:P,i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function hS(i){let e,n;return e=new Bo({props:{slot:"icon"}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p:P,i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function vS(i){let e,n;return e=new Bo({props:{slot:"icon"}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p:P,i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function wS(i){let e,n,t,o;const r=[dS,uS,lS,cS,aS,sS,iS,rS],s=[];function c(a,l){return a[0]===Zt.signInRequired?0:a[0]===Gs.signInInProgress?1:a[0]===Zt.disableCopilot?2:a[0]===Zt.disableCodeium?3:a[0]===Zt.syncingPermissionNeeded?4:a[0]===Zt.workspaceTooLarge?5:a[0]===Zt.uploadingHomeDir?6:a[0]===Zt.allActionsComplete?7:-1}return~(e=c(i))&&(n=s[e]=r[e](i)),{c(){n&&n.c(),t=me()},m(a,l){~e&&s[e].m(a,l),x(a,t,l),o=!0},p(a,[l]){let u=e;e=c(a),e===u?~e&&s[e].p(a,l):(n&&(j(),$(s[u],1,1,()=>{s[u]=null}),q()),~e?(n=s[e],n?n.p(a,l):(n=s[e]=r[e](a),n.c()),d(n,1),n.m(t.parentNode,t)):n=null)},i(a){o||(d(n),o=!0)},o(a){$(n),o=!1},d(a){a&&b(t),~e&&s[e].d(a)}}}function yS(i,e,n){let t,o=P,r=()=>(o(),o=lt(c,a=>n(2,t=a)),c);i.$$.on_destroy.push(()=>o());let{card:s}=e,{flagsModel:c}=e;return r(),i.$$set=a=>{"card"in a&&n(0,s=a.card),"flagsModel"in a&&r(n(1,c=a.flagsModel))},[s,c,t]}class bS extends ue{constructor(e){super(),de(this,e,yS,wS,ce,{card:0,flagsModel:1})}}class xS{constructor(){$e(this,"subscribers",new Set);$e(this,"_actions",[]);$e(this,"_currentIndex",0);$e(this,"subscribe",e=>(this.subscribers.add(e),e(this),()=>{this.subscribers.delete(e)}))}get currentCard(){return this.actions[this._currentIndex]}notifySubscribers(){this.subscribers.forEach(e=>e(this))}get actions(){return this._actions}handleMessageFromExtension(e){const n=e.data;return n.type===jt.mainPanelActions&&(this.onActionsUpdates(n.data),!0)}onActionsUpdates(e){this._actions=e,this._currentIndex=0,this.notifySubscribers()}nextAction(){this._currentIndex=(this._currentIndex+1)%this._actions.length,this.notifySubscribers()}prevAction(){this._currentIndex=(this._currentIndex-1+this._actions.length)%this._actions.length,this.notifySubscribers()}isCollapsible(e){return e===Zt.allActionsComplete}}function _S(i){let e,n,t;return e=new yf({}),{c(){v(e.$$.fragment),n=G(`
        Back`)},m(o,r){w(e,o,r),x(o,n,r),t=!0},i(o){t||(d(e.$$.fragment,o),t=!0)},o(o){$(e.$$.fragment,o),t=!1},d(o){o&&b(n),y(e,o)}}}function CS(i){let e;return{c(){e=G("Index Codebase")},m(n,t){x(n,e,t)},d(n){n&&b(e)}}}function AS(i){let e;return{c(){e=G(`Indexing allows Augment to make tailored code suggestions and explain common practices or
        patterns.`)},m(n,t){x(n,e,t)},d(n){n&&b(e)}}}function MS(i){let e;return{c(){e=L("a"),e.textContent="Learn More",A(e,"href","https://docs.augmentcode.com/setup-augment/workspace-indexing"),A(e,"class","svelte-f8zg6u")},m(n,t){x(n,e,t)},p:P,d(n){n&&b(e)}}}function kS(i){let e,n,t;return n=new Ge({props:{size:1,$$slots:{default:[MS]},$$scope:{ctx:i}}}),{c(){e=G(`Your data always stays secure, private and anonymized.
        `),v(n.$$.fragment)},m(o,r){x(o,e,r),w(n,o,r),t=!0},p(o,r){const s={};4096&r&&(s.$$scope={dirty:r,ctx:o}),n.$set(s)},i(o){t||(d(n.$$.fragment,o),t=!0)},o(o){$(n.$$.fragment,o),t=!1},d(o){o&&b(e),y(n,o)}}}function SS(i){let e,n=(i[2]??j$)+"";return{c(){e=G(n)},m(t,o){x(t,e,o)},p(t,o){4&o&&n!==(n=(t[2]??j$)+"")&&_e(e,n)},d(t){t&&b(e)}}}function TS(i){let e,n;return e=new yp({props:{slot:"iconLeft"}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p:P,i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function ES(i){let e,n;return e=new ht({props:{variant:"outline",color:"neutral",size:2,$$slots:{iconLeft:[TS],default:[SS]},$$scope:{ctx:i}}}),e.$on("click",i[7]),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p(t,o){const r={};4100&o&&(r.$$scope={dirty:o,ctx:t}),e.$set(r)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function IS(i){let e;return{c(){e=G("Index Codebase")},m(n,t){x(n,e,t)},d(n){n&&b(e)}}}function LS(i){let e,n,t,o,r,s,c,a,l,u,f,m,p,_=K$(),M=_&&function(C){let T,E,R;return E=new ht({props:{variant:"ghost",color:"neutral",size:1,$$slots:{default:[_S]},$$scope:{ctx:C}}}),E.$on("click",C[8]),{c(){T=L("div"),v(E.$$.fragment),A(T,"class","c-back-button-container svelte-f8zg6u")},m(N,J){x(N,T,J),w(E,T,null),R=!0},p(N,J){const Q={};4096&J&&(Q.$$scope={dirty:J,ctx:N}),E.$set(Q)},i(N){R||(d(E.$$.fragment,N),R=!0)},o(N){$(E.$$.fragment,N),R=!1},d(N){N&&b(T),y(E)}}}(i);return t=new Ge({props:{size:2,weight:"bold",class:"c-awaiting-syncing-permission__title",$$slots:{default:[CS]},$$scope:{ctx:i}}}),s=new Ge({props:{size:1,$$slots:{default:[AS]},$$scope:{ctx:i}}}),a=new Ge({props:{size:1,$$slots:{default:[kS]},$$scope:{ctx:i}}}),u=new Ne({props:{content:"Open a new project",$$slots:{default:[ES]},$$scope:{ctx:i}}}),m=new ht({props:{variant:"solid",color:"accent",size:2,disabled:!i[2]||i[3],loading:i[1],$$slots:{default:[IS]},$$scope:{ctx:i}}}),m.$on("click",i[6]),{c(){M&&M.c(),e=B(),n=L("div"),v(t.$$.fragment),o=B(),r=L("div"),v(s.$$.fragment),c=B(),v(a.$$.fragment),l=B(),v(u.$$.fragment),f=B(),v(m.$$.fragment),A(r,"class","c-awaiting-syncing-permission__text svelte-f8zg6u"),A(n,"class","c-awaiting-syncing-permission svelte-f8zg6u")},m(C,T){M&&M.m(C,T),x(C,e,T),x(C,n,T),w(t,n,null),F(n,o),F(n,r),w(s,r,null),F(r,c),w(a,r,null),F(n,l),w(u,n,null),F(n,f),w(m,n,null),p=!0},p(C,T){_&&M.p(C,T);const E={};4096&T&&(E.$$scope={dirty:T,ctx:C}),t.$set(E);const R={};4096&T&&(R.$$scope={dirty:T,ctx:C}),s.$set(R);const N={};4096&T&&(N.$$scope={dirty:T,ctx:C}),a.$set(N);const J={};4100&T&&(J.$$scope={dirty:T,ctx:C}),u.$set(J);const Q={};12&T&&(Q.disabled=!C[2]||C[3]),2&T&&(Q.loading=C[1]),4096&T&&(Q.$$scope={dirty:T,ctx:C}),m.$set(Q)},i(C){p||(d(M),d(t.$$.fragment,C),d(s.$$.fragment,C),d(a.$$.fragment,C),d(u.$$.fragment,C),d(m.$$.fragment,C),p=!0)},o(C){$(M),$(t.$$.fragment,C),$(s.$$.fragment,C),$(a.$$.fragment,C),$(u.$$.fragment,C),$(m.$$.fragment,C),p=!1},d(C){C&&(b(e),b(n)),M&&M.d(C),y(t),y(s),y(a),y(u),y(m)}}}function RS(i){let e,n,t;return n=new bS({props:{card:i[0].currentCard,flagsModel:i[5]}}),{c(){e=L("div"),v(n.$$.fragment),A(e,"slot","error")},m(o,r){x(o,e,r),w(n,e,null),t=!0},p(o,r){const s={};1&r&&(s.card=o[0].currentCard),n.$set(s)},i(o){t||(d(n.$$.fragment,o),t=!0)},o(o){$(n.$$.fragment,o),t=!1},d(o){o&&b(e),y(n)}}}function DS(i){let e,n,t,o;return e=new Xs({props:{$$slots:{error:[RS],default:[LS]},$$scope:{ctx:i}}}),{c(){v(e.$$.fragment)},m(r,s){w(e,r,s),n=!0,t||(o=Le(window,"message",i[9]),t=!0)},p(r,[s]){const c={};4111&s&&(c.$$scope={dirty:s,ctx:r}),e.$set(c)},i(r){n||(d(e.$$.fragment,r),n=!0)},o(r){$(e.$$.fragment,r),n=!1},d(r){y(e,r),t=!1,o()}}}const j$="Open a folder";function NS(i,e,n){let t;const o=new Ui(wn);let r=new xS;Te(i,r,f=>n(0,t=f)),o.registerConsumer(r);const s=new Mf,c=new kf(wn,o,s);let a,l=!1,u=!1;return wn.postMessage({type:jt.awaitingSyncingPermissionLoaded}),i.$$.update=()=>{1&i.$$.dirty&&n(3,u=t.currentCard===Zt.workspaceTooLarge||t.currentCard===Zt.uploadingHomeDir)},[t,l,a,u,r,s,function(){n(1,l=!0),c.grantSyncPermission()},function(){c.openProjectFolder()},function(){c.closeProjectFolder()},function(f){const m=f.data;switch(m.type){case jt.awaitingSyncingPermissionInitialize:{const{enableDebugFeatures:p,maxTrackableFileCount:_,userTier:M}=m.data;n(2,a=m.data.workspaceName),s.update({enableDebugFeatures:p,maxTrackableFileCount:_,userTier:M});break}case jt.mainPanelActions:r.onActionsUpdates(function(p){const _=new Set([Zt.workspaceNotSelected,Zt.workspaceTooLarge,Zt.uploadingHomeDir]);return p.filter(M=>_.has(M))}(m.data))}}]}class PS extends ue{constructor(e){super(),de(this,e,NS,DS,ce,{})}}function FS(i){let e,n;return{c(){e=rt("svg"),n=rt("path"),A(n,"fill-rule","evenodd"),A(n,"clip-rule","evenodd"),A(n,"d","M8.14645 3.14645C8.34171 2.95118 8.65829 2.95118 8.85355 3.14645L12.8536 7.14645C13.0488 7.34171 13.0488 7.65829 12.8536 7.85355L8.85355 11.8536C8.65829 12.0488 8.34171 12.0488 8.14645 11.8536C7.95118 11.6583 7.95118 11.3417 8.14645 11.1464L11.2929 8H2.5C2.22386 8 2 7.77614 2 7.5C2 7.22386 2.22386 7 2.5 7H11.2929L8.14645 3.85355C7.95118 3.65829 7.95118 3.34171 8.14645 3.14645Z"),A(n,"fill","currentColor"),A(e,"width","15"),A(e,"height","15"),A(e,"viewBox","0 0 15 15"),A(e,"fill","none"),A(e,"xmlns","http://www.w3.org/2000/svg")},m(t,o){x(t,e,o),F(e,n)},p:P,i:P,o:P,d(t){t&&b(e)}}}class OS extends ue{constructor(e){super(),de(this,e,null,FS,ce,{})}}function zS(i){let e,n;return{c(){e=rt("svg"),n=rt("path"),A(n,"fill-rule","evenodd"),A(n,"clip-rule","evenodd"),A(n,"d","M2 3.5C2 3.22386 2.22386 3 2.5 3H12.5C12.7761 3 13 3.22386 13 3.5V9.5C13 9.77614 12.7761 10 12.5 10H2.5C2.22386 10 2 9.77614 2 9.5V3.5ZM2 10.9146C1.4174 10.7087 1 10.1531 1 9.5V3.5C1 2.67157 1.67157 2 2.5 2H12.5C13.3284 2 14 2.67157 14 3.5V9.5C14 10.1531 13.5826 10.7087 13 10.9146V11.5C13 12.3284 12.3284 13 11.5 13H3.5C2.67157 13 2 12.3284 2 11.5V10.9146ZM12 11V11.5C12 11.7761 11.7761 12 11.5 12H3.5C3.22386 12 3 11.7761 3 11.5V11H12ZM5 6.5C5 6.22386 5.22386 6 5.5 6H7V4.5C7 4.22386 7.22386 4 7.5 4C7.77614 4 8 4.22386 8 4.5V6H9.5C9.77614 6 10 6.22386 10 6.5C10 6.77614 9.77614 7 9.5 7H8V8.5C8 8.77614 7.77614 9 7.5 9C7.22386 9 7 8.77614 7 8.5V7H5.5C5.22386 7 5 6.77614 5 6.5Z"),A(n,"fill","currentColor"),A(e,"width","15"),A(e,"height","15"),A(e,"viewBox","0 0 15 15"),A(e,"fill","none"),A(e,"xmlns","http://www.w3.org/2000/svg")},m(t,o){x(t,e,o),F(e,n)},p:P,i:P,o:P,d(t){t&&b(e)}}}class BS extends ue{constructor(e){super(),de(this,e,null,zS,ce,{})}}function US(i){let e;return{c(){e=G("Create a new project")},m(n,t){x(n,e,t)},d(n){n&&b(e)}}}function HS(i){let e,n;return e=new Vr({props:{slot:"iconLeft"}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p:P,i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function q$(i){let e,n,t,o,r,s,c;function a(f){i[9](f)}function l(f){i[10](f)}let u={color:i[2]?"error":"neutral",placeholder:"Project Name"};return i[1]!==void 0&&(u.value=i[1]),i[3]!==void 0&&(u.textInput=i[3]),n=new nr({props:u}),et.push(()=>Et(n,"value",a)),et.push(()=>Et(n,"textInput",l)),n.$on("keydown",i[11]),s=new dt({props:{disabled:i[4],$$slots:{default:[jS]},$$scope:{ctx:i}}}),s.$on("click",i[12]),{c(){e=L("div"),v(n.$$.fragment),r=B(),v(s.$$.fragment),A(e,"class","c-folder-selection__project-name-input svelte-1hmau15")},m(f,m){x(f,e,m),w(n,e,null),F(e,r),w(s,e,null),c=!0},p(f,m){const p={};4&m&&(p.color=f[2]?"error":"neutral"),!t&&2&m&&(t=!0,p.value=f[1],Rt(()=>t=!1)),!o&&8&m&&(o=!0,p.textInput=f[3],Rt(()=>o=!1)),n.$set(p);const _={};16&m&&(_.disabled=f[4]),16384&m&&(_.$$scope={dirty:m,ctx:f}),s.$set(_)},i(f){c||(d(n.$$.fragment,f),d(s.$$.fragment,f),c=!0)},o(f){$(n.$$.fragment,f),$(s.$$.fragment,f),c=!1},d(f){f&&b(e),y(n),y(s)}}}function jS(i){let e,n;return e=new OS({}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function qS(i){let e;return{c(){e=G("Open a local folder")},m(n,t){x(n,e,t)},d(n){n&&b(e)}}}function WS(i){let e,n;return e=new bf({props:{slot:"iconLeft"}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p:P,i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function VS(i){let e;return{c(){e=G("Clone a repository")},m(n,t){x(n,e,t)},d(n){n&&b(e)}}}function GS(i){let e,n;return e=new BS({props:{slot:"iconLeft"}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p:P,i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function YS(i){let e,n,t,o,r,s,c,a,l,u,f,m,p;n=new wm({props:{title:"Welcome back!",subtitle:"Please open a project folder to begin."}}),r=new ht({props:{variant:"outline",color:"neutral",size:2,alignment:"left",$$slots:{iconLeft:[HS],default:[US]},$$scope:{ctx:i}}}),r.$on("click",i[8]);let _=i[0]&&q$(i);return a=new ht({props:{variant:"outline",color:"neutral",size:2,alignment:"left",$$slots:{iconLeft:[WS],default:[qS]},$$scope:{ctx:i}}}),a.$on("click",i[6]),u=new ht({props:{variant:"outline",color:"neutral",size:2,alignment:"left",$$slots:{iconLeft:[GS],default:[VS]},$$scope:{ctx:i}}}),u.$on("click",i[7]),m=new hm({}),{c(){e=L("div"),v(n.$$.fragment),t=B(),o=L("div"),v(r.$$.fragment),s=B(),_&&_.c(),c=B(),v(a.$$.fragment),l=B(),v(u.$$.fragment),f=B(),v(m.$$.fragment),A(o,"class","c-folder-selection__buttons svelte-1hmau15"),A(e,"class","c-folder-selection svelte-1hmau15")},m(M,C){x(M,e,C),w(n,e,null),F(e,t),F(e,o),w(r,o,null),F(o,s),_&&_.m(o,null),F(o,c),w(a,o,null),F(o,l),w(u,o,null),F(e,f),w(m,e,null),p=!0},p(M,C){const T={};16384&C&&(T.$$scope={dirty:C,ctx:M}),r.$set(T),M[0]?_?(_.p(M,C),1&C&&d(_,1)):(_=q$(M),_.c(),d(_,1),_.m(o,c)):_&&(j(),$(_,1,1,()=>{_=null}),q());const E={};16384&C&&(E.$$scope={dirty:C,ctx:M}),a.$set(E);const R={};16384&C&&(R.$$scope={dirty:C,ctx:M}),u.$set(R)},i(M){p||(d(n.$$.fragment,M),d(r.$$.fragment,M),d(_),d(a.$$.fragment,M),d(u.$$.fragment,M),d(m.$$.fragment,M),p=!0)},o(M){$(n.$$.fragment,M),$(r.$$.fragment,M),$(_),$(a.$$.fragment,M),$(u.$$.fragment,M),$(m.$$.fragment,M),p=!1},d(M){M&&b(e),y(n),y(r),_&&_.d(),y(a),y(u),y(m)}}}function KS(i){let e,n;return e=new vm({props:{slot:"logo"}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p:P,i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function W$(i){let e,n;return e=new Jn({props:{variant:"soft",color:"error",size:1,$$slots:{icon:[ZS],default:[XS]},$$scope:{ctx:i}}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function XS(i){let e;return{c(){e=G("Must contain only letters, numbers, hyphens, underscores, and spaces")},m(n,t){x(n,e,t)},d(n){n&&b(e)}}}function ZS(i){let e,n;return e=new Wn({props:{slot:"icon"}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p:P,i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function JS(i){let e,n,t=i[2]&&W$(i);return{c(){e=L("div"),t&&t.c(),A(e,"slot","error")},m(o,r){x(o,e,r),t&&t.m(e,null),n=!0},p(o,r){o[2]?t?4&r&&d(t,1):(t=W$(o),t.c(),d(t,1),t.m(e,null)):t&&(j(),$(t,1,1,()=>{t=null}),q())},i(o){n||(d(t),n=!0)},o(o){$(t),n=!1},d(o){o&&b(e),t&&t.d()}}}function QS(i){let e,n;return e=new Xs({props:{$$slots:{error:[JS],logo:[KS],default:[YS]},$$scope:{ctx:i}}}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},p(t,[o]){const r={};16415&o&&(r.$$scope={dirty:o,ctx:t}),e.$set(r)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function eT(i,e,n){const t=new kf(wn,new Ui(wn),new Mf);function o(u){t.createProject(u)}let r,s=!1,c="",a=!0,l=!1;return i.$$.update=()=>{7&i.$$.dirty&&(n(2,l=!/^[a-zA-Z0-9\-_ ]+$/.test(c)&&c.trim().length>0),n(4,a=!s||!c.trim().length||l))},[s,c,l,r,a,o,function(){t.openProjectFolder()},function(){t.cloneRepository()},function(){s?n(0,s=!1):(n(0,s=!0),setTimeout(()=>{r==null||r.focus()},0))},function(u){c=u,n(1,c)},function(u){r=u,n(3,r)},u=>{u.key!=="Enter"||a||(u.preventDefault(),o(c.trim()))},()=>o(c.trim())]}class tT extends ue{constructor(e){super(),de(this,e,eT,QS,ce,{})}}function nT(i){let e,n;return e=new tT({}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function oT(i){let e,n;return e=new PS({}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function rT(i){let e,n;return e=new $k({}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function iT(i){let e,n;return e=new zk({}),{c(){v(e.$$.fragment)},m(t,o){w(e,t,o),n=!0},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function sT(i){let e,n,t,o;const r=[iT,rT,oT,nT],s=[];function c(a,l){return a[0]===pi.signIn?0:a[0]===pi.chat?1:a[0]===pi.awaitingSyncingPermission?2:a[0]===pi.folderSelection?3:-1}return~(n=c(i))&&(t=s[n]=r[n](i)),{c(){e=L("main"),t&&t.c()},m(a,l){x(a,e,l),~n&&s[n].m(e,null),o=!0},p(a,l){let u=n;n=c(a),n!==u&&(t&&(j(),$(s[u],1,1,()=>{s[u]=null}),q()),~n?(t=s[n],t||(t=s[n]=r[n](a),t.c()),d(t,1),t.m(e,null)):t=null)},i(a){o||(d(t),o=!0)},o(a){$(t),o=!1},d(a){a&&b(e),~n&&s[n].d()}}}function aT(i){let e,n,t,o;return e=new p1.Root({props:{$$slots:{default:[sT]},$$scope:{ctx:i}}}),{c(){v(e.$$.fragment)},m(r,s){w(e,r,s),n=!0,t||(o=Le(window,"message",i[1]),t=!0)},p(r,[s]){const c={};5&s&&(c.$$scope={dirty:s,ctx:r}),e.$set(c)},i(r){n||(d(e.$$.fragment,r),n=!0)},o(r){$(e.$$.fragment,r),n=!1},d(r){y(e,r),t=!1,o()}}}function cT(i,e,n){let t;return wn.postMessage({type:jt.mainPanelLoaded}),[t,o=>{const r=o.data;r.type===jt.mainPanelDisplayApp&&n(0,t=r.data)}]}class lT extends ue{constructor(e){super(),de(this,e,cT,aT,ce,{})}}(async function(){wn&&wn.initialize&&await wn.initialize(),new lT({target:document.getElementById("app")})})();export{OS as A,rm as B,vA as C,zg as D,Ei as F,ho as I,s0 as R,iE as S,$0 as a,sE as b,T4 as c,Av as d,d3 as e,aE as f,lA as g,am as h};
