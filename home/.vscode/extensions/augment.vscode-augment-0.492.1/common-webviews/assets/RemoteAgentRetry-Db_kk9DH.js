var ln=Object.defineProperty;var un=(o,e,n)=>e in o?ln(o,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):o[e]=n;var te=(o,e,n)=>un(o,typeof e!="symbol"?e+"":e,n);import{g as dn,c as Jt,F as $n,R as mn,D as pn,d as gn,I as Gt,e as fn,f as Me,h as hn}from"./main-panel-CpWlwgqG.js";import{S as Zt,T as Ue,R as qe}from"./check-56hMuF8e.js";import{R as Je,b as pe,a as Se}from"./types-DDm27S8B.js";import{g as Ye,a as vn,h as wn,b as xn,c as yn,d as Cn,e as _n,f as kn,j as Ge,k as Xe,l as jt,n as Ae,E as oe,o as Qe,S as bn,p as Le}from"./arrow-up-right-from-square-Yo0BPgM2.js";import{S as Z,i as j,s as W,a9 as Q,e as v,u as $,q as N,t as p,r as H,h,af as ie,ag as le,a as xe,F as et,G as M,I as C,Q as P,X as F,c as x,J as tt,K as V,L as _,f as R,a5 as ne,g as Ze,a0 as In,Z as K,M as k,a7 as ze,ax as Sn,P as ye,R as Ce,V as _e,W as ke,n as U,ah as ge,am as Wt,a8 as Tn,_ as re,a2 as Kt,$ as Pe,a1 as Be,aE as Ne,Y as nt,a6 as Yt,ab as be,a3 as fe,aj as he,T as ee,b as me,ap as Rn,ae as Xt,aA as st,H as En,w as Mn,x as An,y as Ln,d as ot,z as Fn,j as rt,ac as it,ad as Te}from"./SpinnerAugment-BEPEN2tu.js";import{M as qn}from"./MaterialIcon-BGa1zPPN.js";import{o as Qt}from"./keypress-DD1aQVr0.js";import{A as ct,a as Y}from"./autofix-state-d-ymFdyn.js";import{t as zn}from"./index-CiMDylqQ.js";import{bc as Ke,bd as Pn,aq as Bn,be as Nn,bf as en,bg as Hn,bh as Dn,bi as On,bj as Ve,bk as Un}from"./AugmentMessage-a30kNFnq.js";import{T as He}from"./Content-Bm7C6iJ1.js";import{E as Vn,a as tn,b as Jn}from"./folder-Cz5snpZv.js";import{e as De,f as Gn,g as Zn,E as jn,h as Wn,T as nn}from"./Keybindings-tA5aIx1O.js";import{B as Oe}from"./ButtonAugment-xh-SOBaV.js";import{P as Kn,C as Yn}from"./folder-opened-BLAu3pyz.js";import{E as Xn}from"./expand-QHrAftyc.js";import{P as Qn}from"./pen-to-square-DEUxz3in.js";import{T as Ie}from"./TextTooltipAugment-DAVq7Vla.js";import{I as ve}from"./IconButtonAugment-DT9AU8SC.js";import{C as es,a as ts,M as ns,O as ss}from"./diff-utils-CHDUdEQq.js";import{B as sn}from"./trash-can-C3k9v09A.js";import{e as Fe}from"./BaseButton-DBHsDlhs.js";import{C as os}from"./CardAugment-RCmwRtRa.js";import{C as on,a as rn}from"./CollapseButtonAugment-CEo2LYfW.js";import{M as rs,S as is}from"./index-oyQWDnzB.js";import{C as cs}from"./github-kew-evZ8.js";import{a as Re}from"./index-DqflzTEb.js";import{s as as}from"./utils-Rh_q5w_c.js";function yi(o){return o.map(e=>{var n;return(n=e[0])==null?void 0:n.turn.timestamp}).filter(Boolean)??[]}function Ci(o,e={items:[]}){let n=e,t=new Map,s=new Set;const r=dn();function i(l){n=l,r.update(u=>({...u,all:l.items??[]}))}const c=new IntersectionObserver(l=>{let u=!1;l.forEach(d=>{const m=d.target.getAttribute("data-timestamp-id");m&&(d.intersectionRatio>=.1?s.has(m)||(s.add(m),u=!0):s.has(m)&&(s.delete(m),u=!0))}),u&&function(){const d=Array.from(s).toSorted((m,g)=>m.localeCompare(g));d.length>0&&r.update(m=>({...m,current:d[0]}))}()},{root:o,rootMargin:"0px",threshold:[0,.1,.5,1]});function a(){c&&(t.clear(),s.clear(),o.querySelectorAll("[data-timestamp-id]").forEach(l=>{const u=l.getAttribute("data-timestamp-id");!u||n.items&&!n.items.includes(u)||(t.set(u,l),c.observe(l))}))}return a(),i(e),{update(l){i(l),a()},destroy(){c.disconnect(),t.clear(),s.clear()}}}const ls=(o,e,n,t)=>{const s={retryMessage:void 0,showGeneratingResponse:!1,showResumingRemoteAgent:!1,showAwaitingUserInput:!1,showRunningSpacer:!1,showStopped:!1,remoteAgentErrorConfig:void 0,showPaused:!1};if(e===Ae.running){const r=o==null?void 0:o.lastExchange;if(r!=null&&r.isRetriable&&(r!=null&&r.display_error_message))s.retryMessage=r.display_error_message;else if(n||t.isActive){const i=t.isActive?t.getLastToolUseState():o.getLastToolUseState();if(t.isActive){const c=t.currentAgent;(c==null?void 0:c.workspace_status)===Je.workspaceResuming?s.showResumingRemoteAgent=!0:i.phase!==Ue.running?s.showGeneratingResponse=!0:s.showRunningSpacer=!0}else i.phase!==Ue.running?s.showGeneratingResponse=!0:s.showRunningSpacer=!0}else s.showGeneratingResponse=!0}else e===Ae.awaitingUserAction?(s.showAwaitingUserInput=!0,s.showRunningSpacer=!0):((r,i)=>{var d;const c=(d=r==null?void 0:r.lastExchange)==null?void 0:d.status,a=c===oe.cancelled,l=r==null?void 0:r.getLastToolUseState().phase,u=l===Ue.cancelled;return!i.isActive&&(a||u)})(o,t)&&(s.showStopped=!0);if(t.isActive){const r=t.currentAgent;(r==null?void 0:r.workspace_status)===Je.workspacePaused&&(s.showPaused=!0)}return s},_i=(o,e,n,t)=>{const s=o.currentConversationModel,r=((d,m)=>m.isActive?m.getCurrentChatHistory():d.chatHistory.filter(g=>Ye(g)||vn(g)||wn(g)||xn(g)||yn(g)||Cn(g)||_n(g)||kn(g)||Ge(g)||Xe(g)))(s,t),i=(d=>d.reduce((m,g,w)=>(Ye(g)&&jt(g)&&m.length>0||Xe(g)&&m.length>0?m[m.length-1].push({turn:g,idx:w}):m.push([{turn:g,idx:w}]),m),[]))(r),c=((d,m)=>{if(m.isActive){const g=m.currentAgent;return(g==null?void 0:g.workspace_status)===Je.workspaceResuming||m.isCurrentAgentRunning?Ae.running:Ae.notRunning}return d})(e,t),a=ls(s,c,n,t),l=!t.isActive,u=!!t.isActive;if(t.isActive){if(t.sendMessageError&&t.currentAgentId){const d=t.currentAgentId,m=t.sendMessageError;a.remoteAgentErrorConfig={error:m,onRetry:m.canRetry&&m.failedExchangeId?()=>t.retryFailedMessage(d,m.failedExchangeId):void 0,onDelete:m.type===Zt.agentFailed?()=>t.deleteAgent(d):void 0}}else if(t.agentChatHistoryError&&t.currentAgentId){const d=t.currentAgentId;a.remoteAgentErrorConfig={error:t.agentChatHistoryError,onRetry:()=>t.refreshAgentChatHistory(d)}}}return{chatHistory:r,groupedChatHistory:i,lastGroupConfig:a,doShowFloatingButtons:l,doShowAgentSetupLogs:u}};function at(o){let e,n,t,s,r,i,c,a;const l=[o[4][o[1]]];let u={};for(let g=0;g<l.length;g+=1)u=xe(u,l[g]);n=new qn({props:u});let d=[{class:"stage-container"},o[1]?et(o[3][o[1]]):{},{role:"button"},{tabindex:"0"}],m={};for(let g=0;g<d.length;g+=1)m=xe(m,d[g]);return{c(){e=M("div"),C(n.$$.fragment),t=P(),s=M("div"),r=F(o[1]),x(s,"class","message svelte-1etsput"),tt(e,m),V(e,"active",o[0]),V(e,"svelte-1etsput",!0)},m(g,w){v(g,e,w),_(n,e,null),R(e,t),R(e,s),R(s,r),i=!0,c||(a=[ne(e,"click",o[5]),ne(e,"keydown",Qt("Enter",o[5]))],c=!0)},p(g,w){const A=18&w?Ze(l,[In(g[4][g[1]])]):{};n.$set(A),(!i||2&w)&&K(r,g[1]),tt(e,m=Ze(d,[{class:"stage-container"},2&w&&(g[1]?et(g[3][g[1]]):{}),{role:"button"},{tabindex:"0"}])),V(e,"active",g[0]),V(e,"svelte-1etsput",!0)},i(g){i||($(n.$$.fragment,g),i=!0)},o(g){p(n.$$.fragment,g),i=!1},d(g){g&&h(e),k(n),c=!1,ze(a)}}}function us(o){let e,n,t=o[1]&&at(o);return{c(){t&&t.c(),e=Q()},m(s,r){t&&t.m(s,r),v(s,e,r),n=!0},p(s,[r]){s[1]?t?(t.p(s,r),2&r&&$(t,1)):(t=at(s),t.c(),$(t,1),t.m(e.parentNode,e)):t&&(N(),p(t,1,1,()=>{t=null}),H())},i(s){n||($(t),n=!0)},o(s){p(t),n=!1},d(s){s&&h(e),t&&t.d(s)}}}function ds(o,e,n){let t,s,r,i,{stage:c}=e,{iterationId:a}=e,{stageCount:l}=e;const u=ie("autofixConversationModel");le(o,u,g=>n(10,i=g));const d={[Y.retesting]:"info",[Y.testRunning]:"info",[Y.testFailed]:"error",[Y.testPassed]:"success",[Y.generatingSolutions]:"info",[Y.suggestedSolutions]:"warning",[Y.selectedSolutions]:"success"},m={[Y.retesting]:{iconName:"cached",color:"#FFFFFF"},[Y.testRunning]:{iconName:"cached",color:"#FFFFFF"},[Y.testFailed]:{iconName:"error",color:"#DB3B4B"},[Y.testPassed]:{iconName:"check_circle",color:"#388A34"},[Y.generatingSolutions]:{iconName:"cached",color:"#FFFFFF"},[Y.suggestedSolutions]:{iconName:"edit",color:"#FFFFFF"},[Y.selectedSolutions]:{iconName:"edit",color:"#FFFFFF"}};return o.$$set=g=>{"stage"in g&&n(6,c=g.stage),"iterationId"in g&&n(7,a=g.iterationId),"stageCount"in g&&n(8,l=g.stageCount)},o.$$.update=()=>{var g,w,A;1152&o.$$.dirty&&n(9,t=i==null?void 0:i.getAutofixIteration(a)),1600&o.$$.dirty&&n(0,s=t&&((A=(w=(g=i.extraData)==null?void 0:g.autofixIterations)==null?void 0:w.at(-1))==null?void 0:A.id)===t.id&&t.currentStage===c),833&o.$$.dirty&&n(1,r=function(f,I,L,B){var E;return f?I===ct.runTest?f.commandFailed===void 0&&B?f.isFirstIteration?Y.testRunning:Y.retesting:f.commandFailed===!0?Y.testFailed:Y.testPassed:I===ct.applyFix?L===(((E=f.suggestedSolutions)==null?void 0:E.length)||0)?f.selectedSolutions?Y.selectedSolutions:Y.generatingSolutions:Y.suggestedSolutions:null:null}(t,c,l,s))},[s,r,u,d,m,()=>{r!==Y.generatingSolutions&&u.launchAutofixPanel(a,c)},c,a,l,t,i]}class ki extends Z{constructor(e){super(),j(this,e,ds,us,W,{stage:6,iterationId:7,stageCount:8})}}function bi(o,e){const n=Math.abs(o);let t=200,s=500;typeof e=="number"?t=e:e&&(t=e.baseThreshold??200,s=e.predictTime??500);const r=n*s/1e3;return Math.max(t,r)}function Ii(o,e=10){const n=Math.abs(o);return n>1e3?2*e:n>500?1.5*e:n>200?e:.5*e}function lt(o){const{scrollTop:e,clientHeight:n,scrollHeight:t}=o;return t-e-n}function Si(o,e={}){let n=e,t={scrollTop:0,scrollBottom:0,scrollHeight:0,scrolledIntoBottom:!0,scrolledAwayFromBottom:!0};const s=()=>{var f,I,L;const{scrollTop:r,scrollHeight:i,offsetHeight:c}=o,a=lt(o),l=r>t.scrollTop+1,u=i-t.scrollHeight,d=!(u<0&&t.scrollBottom<-u)&&r<t.scrollTop-1&&a>t.scrollBottom+1,m=i>c,g=((B,E=40)=>lt(B)<=E)(o),w=g&&m&&l,A=d||!m;w&&!t.scrolledIntoBottom?(f=n.onScrollIntoBottom)==null||f.call(n):A&&!t.scrolledAwayFromBottom&&((I=n.onScrollAwayFromBottom)==null||I.call(n)),t={scrollTop:r,scrollBottom:a,scrolledIntoBottom:w,scrolledAwayFromBottom:A,scrollHeight:i},(L=n.onScroll)==null||L.call(n,r)};return o.addEventListener("scroll",s),{update(r){n=r},destroy(){o.removeEventListener("scroll",s)}}}function Ti(o,e){var r;let n=o.offsetHeight,t=e;const s=new ResizeObserver(i=>{var a;const c=i[0].contentRect.height;i.length===1?c!==n&&((a=t.onHeightChange)==null||a.call(t,c),n=c):console.warn("Unexpected number of resize entries: ",i)});return s.observe(o),(r=t==null?void 0:t.onHeightChange)==null||r.call(t,n),{update(i){t=i},destroy:()=>s.disconnect()}}function Ri(o,e){let n=e;const t=zn(()=>{n.onSeen()},1e3,{leading:!0,trailing:!0}),s=new IntersectionObserver(i=>{i.length===1?i[0].isIntersecting&&t():console.warn("Unexpected number of intersection entries: ",i)},{threshold:.5}),r=()=>{s.disconnect(),n.track&&s.observe(o)};return r(),{update(i){const c=n;n=i,n.track!==c.track&&r()},destroy:()=>{s.disconnect(),n.onSeen()}}}function ut(o){let e,n,t,s=o[6]&&dt(o);return n=new mn({props:{changeImageMode:o[32],saveImage:o[9].saveImage,saveAttachment:o[9].saveAttachment,deleteImage:o[9].deleteImage,renderImage:o[9].renderImage,isEditable:o[33],supportedFileTypes:o[9].flags.enableDebugFeatures?["image","text"]:["image"]}}),{c(){s&&s.c(),e=P(),C(n.$$.fragment)},m(r,i){s&&s.m(r,i),v(r,e,i),_(n,r,i),t=!0},p(r,i){r[6]?s?(s.p(r,i),64&i[0]&&$(s,1)):(s=dt(r),s.c(),$(s,1),s.m(e.parentNode,e)):s&&(N(),p(s,1,1,()=>{s=null}),H());const c={};258&i[0]&&(c.changeImageMode=r[32]),512&i[0]&&(c.saveImage=r[9].saveImage),512&i[0]&&(c.saveAttachment=r[9].saveAttachment),512&i[0]&&(c.deleteImage=r[9].deleteImage),512&i[0]&&(c.renderImage=r[9].renderImage),64&i[0]&&(c.isEditable=r[33]),512&i[0]&&(c.supportedFileTypes=r[9].flags.enableDebugFeatures?["image","text"]:["image"]),n.$set(c)},i(r){t||($(s),$(n.$$.fragment,r),t=!0)},o(r){p(s),p(n.$$.fragment,r),t=!1},d(r){r&&h(e),s&&s.d(r),k(n,r)}}}function dt(o){let e,n;return e=new pn({props:{flags:o[9].flags}}),{c(){C(e.$$.fragment)},m(t,s){_(e,t,s),n=!0},p(t,s){const r={};512&s[0]&&(r.flags=t[9].flags),e.$set(r)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){p(e.$$.fragment,t),n=!1},d(t){k(e,t)}}}function $s(o){var A;let e,n,t,s,r,i,c,a,l,u,d=o[9].flags.enableChatMultimodal&&ut(o);n=new Gn({props:{shortcuts:o[13]}});let m={requestEditorFocus:o[22],onMentionItemsUpdated:o[21]};s=new Jt({props:m}),o[34](s),i=new Zn({props:{placeholder:o[2]}}),a=new De.Content({props:{content:((A=o[7])==null?void 0:A.richTextJsonRepr)??o[3],onContentChanged:o[20]}});const g=o[29].default,w=ye(g,o,o[37],null);return{c(){d&&d.c(),e=P(),C(n.$$.fragment),t=P(),C(s.$$.fragment),r=P(),C(i.$$.fragment),c=P(),C(a.$$.fragment),l=P(),w&&w.c()},m(f,I){d&&d.m(f,I),v(f,e,I),_(n,f,I),v(f,t,I),_(s,f,I),v(f,r,I),_(i,f,I),v(f,c,I),_(a,f,I),v(f,l,I),w&&w.m(f,I),u=!0},p(f,I){var J;f[9].flags.enableChatMultimodal?d?(d.p(f,I),512&I[0]&&$(d,1)):(d=ut(f),d.c(),$(d,1),d.m(e.parentNode,e)):d&&(N(),p(d,1,1,()=>{d=null}),H());const L={};8192&I[0]&&(L.shortcuts=f[13]),n.$set(L),s.$set({});const B={};4&I[0]&&(B.placeholder=f[2]),i.$set(B);const E={};136&I[0]&&(E.content=((J=f[7])==null?void 0:J.richTextJsonRepr)??f[3]),a.$set(E),w&&w.p&&(!u||64&I[1])&&Ce(w,g,f,f[37],u?ke(g,f[37],I,null):_e(f[37]),null)},i(f){u||($(d),$(n.$$.fragment,f),$(s.$$.fragment,f),$(i.$$.fragment,f),$(a.$$.fragment,f),$(w,f),u=!0)},o(f){p(d),p(n.$$.fragment,f),p(s.$$.fragment,f),p(i.$$.fragment,f),p(a.$$.fragment,f),p(w,f),u=!1},d(f){f&&(h(e),h(t),h(r),h(c),h(l)),d&&d.d(f),k(n,f),o[34](null),k(s,f),k(i,f),k(a,f),w&&w.d(f)}}}function $t(o){let e,n;return e=new gn({props:{chatModel:o[16]}}),{c(){C(e.$$.fragment)},m(t,s){_(e,t,s),n=!0},p:U,i(t){n||($(e.$$.fragment,t),n=!0)},o(t){p(e.$$.fragment,t),n=!1},d(t){k(e,t)}}}function ms(o){let e,n,t=o[6]&&$t(o);return{c(){t&&t.c(),e=Q()},m(s,r){t&&t.m(s,r),v(s,e,r),n=!0},p(s,r){s[6]?t?(t.p(s,r),64&r[0]&&$(t,1)):(t=$t(s),t.c(),$(t,1),t.m(e.parentNode,e)):t&&(N(),p(t,1,1,()=>{t=null}),H())},i(s){n||($(t),n=!0)},o(s){p(t),n=!1},d(s){s&&h(e),t&&t.d(s)}}}function mt(o){let e,n,t,s=o[6]&&pt(o),r=o[4]&&gt(o);return{c(){s&&s.c(),e=Q(),r&&r.c(),n=Q()},m(i,c){s&&s.m(i,c),v(i,e,c),r&&r.m(i,c),v(i,n,c),t=!0},p(i,c){i[6]?s?(s.p(i,c),64&c[0]&&$(s,1)):(s=pt(i),s.c(),$(s,1),s.m(e.parentNode,e)):s&&(N(),p(s,1,1,()=>{s=null}),H()),i[4]?r?(r.p(i,c),16&c[0]&&$(r,1)):(r=gt(i),r.c(),$(r,1),r.m(n.parentNode,n)):r&&(N(),p(r,1,1,()=>{r=null}),H())},i(i){t||($(s),$(r),t=!0)},o(i){p(s),p(r),t=!1},d(i){i&&(h(e),h(n)),s&&s.d(i),r&&r.d(i)}}}function pt(o){let e,n,t;return e=new Gt.Root({props:{$$slots:{rightAlign:[fs],leftAlign:[ps]},$$scope:{ctx:o}}}),{c(){C(e.$$.fragment),n=P()},m(s,r){_(e,s,r),v(s,n,r),t=!0},p(s,r){const i={};17408&r[0]|64&r[1]&&(i.$$scope={dirty:r,ctx:s}),e.$set(i)},i(s){t||($(e.$$.fragment,s),t=!0)},o(s){p(e.$$.fragment,s),t=!1},d(s){s&&h(n),k(e,s)}}}function ps(o){var t;let e,n;return e=new Gt.ContextMenu({props:{slot:"leftAlign",onCloseDropdown:o[22],onInsertMentionable:(t=o[10])==null?void 0:t.insertMentionNode}}),{c(){C(e.$$.fragment)},m(s,r){_(e,s,r),n=!0},p(s,r){var c;const i={};1024&r[0]&&(i.onInsertMentionable=(c=s[10])==null?void 0:c.insertMentionNode),e.$set(i)},i(s){n||($(e.$$.fragment,s),n=!0)},o(s){p(e.$$.fragment,s),n=!1},d(s){k(e,s)}}}function gs(o){let e,n;return e=new Kn({}),{c(){C(e.$$.fragment)},m(t,s){_(e,t,s),n=!0},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){p(e.$$.fragment,t),n=!1},d(t){k(e,t)}}}function fs(o){let e,n;return e=new Oe({props:{size:1,variant:"solid",disabled:!o[14],color:"accent",$$slots:{default:[gs]},$$scope:{ctx:o}}}),e.$on("click",o[18]),{c(){C(e.$$.fragment)},m(t,s){_(e,t,s),n=!0},p(t,s){const r={};16384&s[0]&&(r.disabled=!t[14]),64&s[1]&&(r.$$scope={dirty:s,ctx:t}),e.$set(r)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){p(e.$$.fragment,t),n=!1},d(t){k(e,t)}}}function gt(o){let e,n,t;return n=new Oe({props:{variant:"solid",color:"neutral",size:1,$$slots:{iconLeft:[vs],default:[hs]},$$scope:{ctx:o}}}),n.$on("click",o[31]),{c(){e=M("div"),C(n.$$.fragment),x(e,"class","c-user-msg__collapse-button svelte-q0brxu")},m(s,r){v(s,e,r),_(n,e,null),t=!0},p(s,r){const i={};64&r[1]&&(i.$$scope={dirty:r,ctx:s}),n.$set(i)},i(s){t||($(n.$$.fragment,s),t=!0)},o(s){p(n.$$.fragment,s),t=!1},d(s){s&&h(e),k(n)}}}function hs(o){let e;return{c(){e=M("span"),e.textContent="Expand"},m(n,t){v(n,e,t)},p:U,d(n){n&&h(e)}}}function vs(o){let e,n;return e=new Xn({props:{slot:"iconLeft"}}),{c(){C(e.$$.fragment)},m(t,s){_(e,t,s),n=!0},p:U,i(t){n||($(e.$$.fragment,t),n=!0)},o(t){p(e.$$.fragment,t),n=!1},d(t){k(e,t)}}}function ws(o){let e,n,t=(o[6]||!o[4])&&mt(o);return{c(){t&&t.c(),e=Q()},m(s,r){t&&t.m(s,r),v(s,e,r),n=!0},p(s,r){s[6]||!s[4]?t?(t.p(s,r),80&r[0]&&$(t,1)):(t=mt(s),t.c(),$(t,1),t.m(e.parentNode,e)):t&&(N(),p(t,1,1,()=>{t=null}),H())},i(s){n||($(t),n=!0)},o(s){p(t),n=!1},d(s){s&&h(e),t&&t.d(s)}}}function xs(o){let e,n,t,s,r,i={editable:o[6],$$slots:{footer:[ws],header:[ms],default:[$s]},$$scope:{ctx:o}};return n=new De.Root({props:i}),o[35](n),n.$on("click",ys),n.$on("dblclick",o[17]),{c(){e=M("div"),C(n.$$.fragment),x(e,"class","c-chat-input svelte-q0brxu"),x(e,"role","button"),x(e,"tabindex","-1"),V(e,"is-collapsed",o[4]),V(e,"is-editing",o[6])},m(c,a){v(c,e,a),_(n,e,null),o[36](e),t=!0,s||(r=[ne(window,"mousedown",o[19]),ne(e,"mousedown",Sn(o[30]))],s=!0)},p(c,a){const l={};64&a[0]&&(l.editable=c[6]),26623&a[0]|64&a[1]&&(l.$$scope={dirty:a,ctx:c}),n.$set(l),(!t||16&a[0])&&V(e,"is-collapsed",c[4]),(!t||64&a[0])&&V(e,"is-editing",c[6])},i(c){t||($(n.$$.fragment,c),t=!0)},o(c){p(n.$$.fragment,c),t=!1},d(c){c&&h(e),o[35](null),k(n),o[36](null),s=!1,ze(r)}}}const ys=o=>o.stopPropagation();function Cs(o,e,n){let t,s,r,i,c,a,l,u=U;o.$$.on_destroy.push(()=>u());let{$$slots:d={},$$scope:m}=e;const g=ie("chatModel");le(o,g,b=>n(9,l=b));const w=ie(qe.key);let{requestId:A}=e,{placeholder:f="Edit your message..."}=e,{content:I}=e,{collapsed:L=!1}=e,{onSubmitEdit:B}=e,{onCancelEdit:E}=e,{setIsCollapsed:J}=e,{userExpanded:T}=e,S,D,q,y=!1,X=[];async function z(){r&&(n(0,T=!0),L&&J(!1),n(6,y=!0),await Wt(),$e())}function G(){return!(!i||!S)&&(B(S,X),!0)}function O(){return n(0,T=!1),n(6,y=!1),n(7,S=void 0),E(),!0}const $e=()=>q==null?void 0:q.forceFocus();let se;return o.$$set=b=>{"requestId"in b&&n(1,A=b.requestId),"placeholder"in b&&n(2,f=b.placeholder),"content"in b&&n(3,I=b.content),"collapsed"in b&&n(4,L=b.collapsed),"onSubmitEdit"in b&&n(23,B=b.onSubmitEdit),"onCancelEdit"in b&&n(24,E=b.onCancelEdit),"setIsCollapsed"in b&&n(5,J=b.setIsCollapsed),"userExpanded"in b&&n(0,T=b.userExpanded),"$$scope"in b&&n(37,m=b.$$scope)},o.$$.update=()=>{512&o.$$.dirty[0]&&(n(15,t=l.currentConversationModel),u(),u=ge(t,b=>n(8,a=b))),268435968&o.$$.dirty[0]&&n(27,r=l.flags.enableEditableHistory&&!s),134218184&o.$$.dirty[0]&&n(14,i=y&&r&&S!==void 0&&S.rawText.trim()!==""&&S.rawText!==I&&S.richTextJsonRepr!==I&&!a.awaitingReply&&!$n.hasLoadingImages(S.richTextJsonRepr))},n(28,s=!!(w!=null&&w.isActive)),n(13,c={Enter:G,Escape:O}),[T,A,f,I,L,J,y,S,a,l,D,q,se,c,i,t,g,z,G,O,function(b){b!==S&&n(7,S=b)},function(b){X=b.current},()=>q==null?void 0:q.requestFocus(),B,E,()=>{z()},function(){return se},r,s,d,function(b){Tn.call(this,o,b)},()=>{n(0,T=!0),J(!1)},b=>{A&&b&&a.updateChatItem(A,{rich_text_json_repr:b})},()=>y,function(b){re[b?"unshift":"push"](()=>{D=b,n(10,D)})},function(b){re[b?"unshift":"push"](()=>{q=b,n(11,q)})},function(b){re[b?"unshift":"push"](()=>{se=b,n(12,se)})},m]}class _s extends Z{constructor(e){super(),j(this,e,Cs,xs,W,{requestId:1,placeholder:2,content:3,collapsed:4,onSubmitEdit:23,onCancelEdit:24,setIsCollapsed:5,userExpanded:0,requestStartEdit:25,getEditorContainer:26},null,[-1,-1])}get requestStartEdit(){return this.$$.ctx[25]}get getEditorContainer(){return this.$$.ctx[26]}}const ae=class ae{constructor(e){te(this,"_tipTapExtension");te(this,"_resizeObserver");te(this,"_checkHeight",e=>{var t,s;const n=e.getBoundingClientRect().height;(s=(t=this._options).onResize)==null||s.call(t,n)});te(this,"_setResizeObserver",e=>{var t;const n=(t=e.view)==null?void 0:t.dom;n&&(this._resizeObserver=new ResizeObserver(s=>{for(const r of s)this._checkHeight(r.target)}),this._resizeObserver.observe(n),this._checkHeight(n))});te(this,"_clearResizeObserver",()=>{var e;(e=this._resizeObserver)==null||e.disconnect(),this._resizeObserver=void 0});te(this,"updateOptions",e=>{this._options={...this._options,...e}});this._options=e;const n=ae._getNextPluginId(),t=this._setResizeObserver,s=this._clearResizeObserver,r=this._checkHeight;this._tipTapExtension=jn.create({name:n,onCreate:function(){var c;((c=this.editor.view)==null?void 0:c.dom)&&(t(this.editor),this.editor.on("destroy",s))},onUpdate:function(){var c;const i=(c=this.editor.view)==null?void 0:c.dom;i&&r(i)},onDestroy:()=>{var i;(i=this._resizeObserver)==null||i.disconnect(),this._resizeObserver=void 0}})}get tipTapExtension(){return this._tipTapExtension}};te(ae,"_sequenceId",0),te(ae,"RESIZE_OBSERVER_PLUGIN_KEY_BASE","augment-resize-observer-plugin-{}"),te(ae,"_getSequenceId",()=>ae._sequenceId++),te(ae,"_getNextPluginId",()=>{const e=ae._getSequenceId().toString();return ae.RESIZE_OBSERVER_PLUGIN_KEY_BASE.replace("{}",e)});let je=ae;function ks(o,e,n){let{height:t=0}=e;const s=a=>{n(0,t=a)},r=ie(Wn.CONTEXT_KEY),i=new je({onResize:s}),c=r.pluginManager.registerPlugin(i);return Kt(c),o.$$set=a=>{"height"in a&&n(0,t=a.height)},i.updateOptions({onResize:s}),[t]}let bs=class extends Z{constructor(o){super(),j(this,o,ks,null,W,{height:0})}};function Is(o){let e,n,t;function s(i){o[21](i)}let r={};return o[6]!==void 0&&(r.height=o[6]),e=new bs({props:r}),re.push(()=>Pe(e,"height",s)),{c(){C(e.$$.fragment)},m(i,c){_(e,i,c),t=!0},p(i,c){const a={};!n&&64&c&&(n=!0,a.height=i[6],Be(()=>n=!1)),e.$set(a)},i(i){t||($(e.$$.fragment,i),t=!0)},o(i){p(e.$$.fragment,i),t=!1},d(i){k(e,i)}}}function Ss(o){let e,n,t;function s(i){o[23](i)}let r={collapsed:o[7],content:o[3]??o[1],requestId:o[2],onSubmitEdit:o[13],onCancelEdit:o[5],setIsCollapsed:o[11],$$slots:{default:[Is]},$$scope:{ctx:o}};return o[8]!==void 0&&(r.userExpanded=o[8]),e=new _s({props:r}),o[22](e),re.push(()=>Pe(e,"userExpanded",s)),{c(){C(e.$$.fragment)},m(i,c){_(e,i,c),t=!0},p(i,c){const a={};128&c&&(a.collapsed=i[7]),10&c&&(a.content=i[3]??i[1]),4&c&&(a.requestId=i[2]),32&c&&(a.onCancelEdit=i[5]),134217792&c&&(a.$$scope={dirty:c,ctx:i}),!n&&256&c&&(n=!0,a.userExpanded=i[8],Be(()=>n=!1)),e.$set(a)},i(i){t||($(e.$$.fragment,i),t=!0)},o(i){p(e.$$.fragment,i),t=!1},d(i){o[22](null),k(e,i)}}}function Ts(o){let e,n,t;return n=new Pn({props:{items:o[10]}}),{c(){e=M("div"),C(n.$$.fragment),x(e,"slot","edit"),x(e,"class","c-user-msg__actions svelte-1dv083n")},m(s,r){v(s,e,r),_(n,e,null),t=!0},p(s,r){const i={};1024&r&&(i.items=s[10]),n.$set(i)},i(s){t||($(n.$$.fragment,s),t=!0)},o(s){p(n.$$.fragment,s),t=!1},d(s){s&&h(e),k(n)}}}function Rs(o){let e,n,t,s;return e=new Ke({props:{timestamp:o[4],$$slots:{edit:[Ts],content:[Ss]},$$scope:{ctx:o}}}),{c(){C(e.$$.fragment)},m(r,i){_(e,r,i),n=!0,t||(s=[ne(window,"keydown",Qt("Escape",o[12])),ne(window,"mousedown",o[12])],t=!0)},p(r,[i]){const c={};16&i&&(c.timestamp=r[4]),134219758&i&&(c.$$scope={dirty:i,ctx:r}),e.$set(c)},i(r){n||($(e.$$.fragment,r),n=!0)},o(r){p(e.$$.fragment,r),n=!1},d(r){k(e,r),t=!1,ze(s)}}}function Es(o,e,n){let t,s,r,i,c,a,l,u=U,d=()=>(u(),u=ge(m,y=>n(20,l=y)),m);o.$$.on_destroy.push(()=>u());let{chatModel:m}=e;d();let{msg:g}=e,{requestId:w}=e,{richTextJsonRepr:A}=e,{timestamp:f}=e,{onStartEdit:I=()=>{}}=e,{onAcceptEdit:L=()=>{}}=e,{onCancelEdit:B=()=>{}}=e;const E=ie(qe.key);let J=!1,T=!1;async function S(y){await Wt(),n(7,J=y&&r&&!T)}const D=y=>{c&&w&&(S(!1),q==null||q.requestStartEdit(),I(),y.stopPropagation())};let q;return o.$$set=y=>{"chatModel"in y&&d(n(0,m=y.chatModel)),"msg"in y&&n(1,g=y.msg),"requestId"in y&&n(2,w=y.requestId),"richTextJsonRepr"in y&&n(3,A=y.richTextJsonRepr),"timestamp"in y&&n(4,f=y.timestamp),"onStartEdit"in y&&n(14,I=y.onStartEdit),"onAcceptEdit"in y&&n(15,L=y.onAcceptEdit),"onCancelEdit"in y&&n(5,B=y.onCancelEdit)},o.$$.update=()=>{var y,X;1048580&o.$$.dirty&&n(19,s=w===void 0||w===((X=(y=l==null?void 0:l.currentConversationModel)==null?void 0:y.lastExchange)==null?void 0:X.request_id)),524288&o.$$.dirty&&n(16,r=!s&&!0),1310724&o.$$.dirty&&n(17,c=w!==void 0&&l.flags.fullFeatured&&l.flags.enableEditableHistory&&!t),131072&o.$$.dirty&&n(10,a=[...c?[{label:"Edit message",action:D,id:"edit-message",disabled:!1,icon:Qn}]:[]]),65600&o.$$.dirty&&i&&r&&(q!=null&&q.getEditorContainer())&&i&&r&&S(!(J&&i<120)&&i>120)},n(18,t=!!(E!=null&&E.isActive)),n(6,i=0),[m,g,w,A,f,B,i,J,T,q,a,S,()=>{},function(y,X){if(!w)return;m.currentConversationModel.clearHistoryFrom(w);const z=l.flags.enableChatMultimodal&&y.richTextJsonRepr?m.currentConversationModel.createStructuredRequestNodes(y.richTextJsonRepr):void 0;m.currentConversationModel.sendExchange({request_message:y.rawText,rich_text_json_repr:y.richTextJsonRepr,status:oe.draft,mentioned_items:X,structured_request_nodes:z}),L()},I,L,r,c,t,s,l,function(y){i=y,n(6,i)},function(y){re[y?"unshift":"push"](()=>{q=y,n(9,q)})},function(y){T=y,n(8,T)}]}class Ms extends Z{constructor(e){super(),j(this,e,Es,Rs,W,{chatModel:0,msg:1,requestId:2,richTextJsonRepr:3,timestamp:4,onStartEdit:14,onAcceptEdit:15,onCancelEdit:5})}}function ft(o){let e,n;return e=new Ms({props:{msg:o[1].request_message??"",richTextJsonRepr:o[11],chatModel:o[0],requestId:o[9],timestamp:o[1].timestamp}}),{c(){C(e.$$.fragment)},m(t,s){_(e,t,s),n=!0},p(t,s){const r={};2&s&&(r.msg=t[1].request_message??""),2048&s&&(r.richTextJsonRepr=t[11]),1&s&&(r.chatModel=t[0]),512&s&&(r.requestId=t[9]),2&s&&(r.timestamp=t[1].timestamp),e.$set(r)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){p(e.$$.fragment,t),n=!1},d(t){k(e,t)}}}function ht(o){let e,n,t;function s(a,l){return a[1].display_error_message?Fs:a[1].response_text&&a[1].response_text.length>0?Ls:As}let r=s(o),i=r(o),c=o[9]&&vt(o);return{c(){e=M("div"),i.c(),n=P(),c&&c.c(),x(e,"class","c-msg-list__turn-response-failure svelte-1d1manc")},m(a,l){v(a,e,l),i.m(e,null),R(e,n),c&&c.m(e,null),t=!0},p(a,l){r===(r=s(a))&&i?i.p(a,l):(i.d(1),i=r(a),i&&(i.c(),i.m(e,n))),a[9]?c?(c.p(a,l),512&l&&$(c,1)):(c=vt(a),c.c(),$(c,1),c.m(e,null)):c&&(N(),p(c,1,1,()=>{c=null}),H())},i(a){t||($(c),t=!0)},o(a){p(c),t=!1},d(a){a&&h(e),i.d(),c&&c.d()}}}function As(o){let e,n,t,s;return{c(){e=F(`We encountered an issue sending your message. Please
        `),n=M("button"),n.textContent="try again",x(n,"class","svelte-1d1manc")},m(r,i){v(r,e,i),v(r,n,i),t||(s=ne(n,"click",Ne(o[15])),t=!0)},p:U,d(r){r&&(h(e),h(n)),t=!1,s()}}}function Ls(o){let e,n,t,s,r;return{c(){e=F(`Connection lost. Please
        `),n=M("button"),n.textContent="try again",t=F(`
        to restart the conversation!`),x(n,"class","svelte-1d1manc")},m(i,c){v(i,e,c),v(i,n,c),v(i,t,c),s||(r=ne(n,"click",Ne(o[15])),s=!0)},p:U,d(i){i&&(h(e),h(n),h(t)),s=!1,r()}}}function Fs(o){let e,n=o[1].display_error_message+"";return{c(){e=F(n)},m(t,s){v(t,e,s)},p(t,s){2&s&&n!==(n=t[1].display_error_message+"")&&K(e,n)},d(t){t&&h(e)}}}function vt(o){let e,n,t,s,r,i,c,a;function l(d){o[21](d)}let u={onOpenChange:o[16],content:o[7],triggerOn:[He.Hover],$$slots:{default:[zs]},$$scope:{ctx:o}};return o[8]!==void 0&&(u.requestClose=o[8]),i=new Ie({props:u}),re.push(()=>Pe(i,"requestClose",l)),{c(){e=M("div"),n=M("span"),t=F("Request ID: "),s=F(o[9]),r=P(),C(i.$$.fragment),x(e,"class","c-msg-list__request-id svelte-1d1manc")},m(d,m){v(d,e,m),R(e,n),R(n,t),R(n,s),R(e,r),_(i,e,null),a=!0},p(d,m){(!a||512&m)&&K(s,d[9]);const g={};128&m&&(g.content=d[7]),16777216&m&&(g.$$scope={dirty:m,ctx:d}),!c&&256&m&&(c=!0,g.requestClose=d[8],Be(()=>c=!1)),i.$set(g)},i(d){a||($(i.$$.fragment,d),a=!0)},o(d){p(i.$$.fragment,d),a=!1},d(d){d&&h(e),k(i)}}}function qs(o){let e,n;return e=new Yn({}),{c(){C(e.$$.fragment)},m(t,s){_(e,t,s),n=!0},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){p(e.$$.fragment,t),n=!1},d(t){k(e,t)}}}function zs(o){let e,n;return e=new ve({props:{variant:"ghost",color:"neutral",size:1,$$slots:{default:[qs]},$$scope:{ctx:o}}}),e.$on("click",o[17]),{c(){C(e.$$.fragment)},m(t,s){_(e,t,s),n=!0},p(t,s){const r={};16777216&s&&(r.$$scope={dirty:s,ctx:t}),e.$set(r)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){p(e.$$.fragment,t),n=!1},d(t){k(e,t)}}}function Ps(o){let e,n,t,s,r,i=!o[10]&&!Ge(o[1])&&!o[12],c=i&&ft(o);t=new Bn({props:{chatModel:o[6],turn:o[1],turnIndex:o[3],requestId:o[9],isLastTurn:o[2],showName:!o[10],group:o[5],showFooter:!Qe(o[1])||o[1].status===oe.cancelled,markdown:o[1].response_text??"",timestamp:o[1].timestamp,messageListContainer:o[4]}});let a=o[1].status===oe.failed&&ht(o);return{c(){e=M("div"),c&&c.c(),n=P(),C(t.$$.fragment),s=P(),a&&a.c(),x(e,"class","c-msg-list__turn svelte-1d1manc")},m(l,u){v(l,e,u),c&&c.m(e,null),R(e,n),_(t,e,null),R(e,s),a&&a.m(e,null),r=!0},p(l,[u]){5122&u&&(i=!l[10]&&!Ge(l[1])&&!l[12]),i?c?(c.p(l,u),5122&u&&$(c,1)):(c=ft(l),c.c(),$(c,1),c.m(e,n)):c&&(N(),p(c,1,1,()=>{c=null}),H());const d={};64&u&&(d.chatModel=l[6]),2&u&&(d.turn=l[1]),8&u&&(d.turnIndex=l[3]),512&u&&(d.requestId=l[9]),4&u&&(d.isLastTurn=l[2]),1024&u&&(d.showName=!l[10]),32&u&&(d.group=l[5]),2&u&&(d.showFooter=!Qe(l[1])||l[1].status===oe.cancelled),2&u&&(d.markdown=l[1].response_text??""),2&u&&(d.timestamp=l[1].timestamp),16&u&&(d.messageListContainer=l[4]),t.$set(d),l[1].status===oe.failed?a?(a.p(l,u),2&u&&$(a,1)):(a=ht(l),a.c(),$(a,1),a.m(e,null)):a&&(N(),p(a,1,1,()=>{a=null}),H())},i(l){r||($(c),$(t.$$.fragment,l),$(a),r=!0)},o(l){p(c),p(t.$$.fragment,l),p(a),r=!1},d(l){l&&h(e),c&&c.d(),k(t),a&&a.d()}}}function Bs(o,e,n){let t,s,r,i,c,a,l,u,d,m,g=U,w=()=>(g(),g=ge(f,y=>n(6,u=y)),f),A=U;o.$$.on_destroy.push(()=>g()),o.$$.on_destroy.push(()=>A());let{chatModel:f}=e;w();let{turn:I}=e,{isLastTurn:L=!1}=e,{turnIndex:B=0}=e,{messageListContainer:E}=e,{group:J}=e;const T=ie(qe.key);le(o,T,y=>n(20,m=y));let S,D="Copy request ID",q=()=>{};return o.$$set=y=>{"chatModel"in y&&w(n(0,f=y.chatModel)),"turn"in y&&n(1,I=y.turn),"isLastTurn"in y&&n(2,L=y.isLastTurn),"turnIndex"in y&&n(3,B=y.turnIndex),"messageListContainer"in y&&n(4,E=y.messageListContainer),"group"in y&&n(5,J=y.group)},o.$$.update=()=>{var y;2&o.$$.dirty&&n(9,t=I.request_id),64&o.$$.dirty&&(n(13,s=u==null?void 0:u.currentConversationModel),A(),A=ge(s,X=>n(23,d=X))),1048576&o.$$.dirty&&n(19,r=(m==null?void 0:m.isActive)&&((y=m==null?void 0:m.currentAgent)==null?void 0:y.is_setup_script_agent)===!0),8&o.$$.dirty&&n(18,i=B===0),786432&o.$$.dirty&&n(12,c=r&&i),66&o.$$.dirty&&n(11,a=u.flags.enableRichTextHistory?I.rich_text_json_repr:void 0),2&o.$$.dirty&&n(10,l=jt(I))},[f,I,L,B,E,J,u,D,q,t,l,a,c,s,T,()=>{d.resendTurn(I)},function(y){y||(clearTimeout(S),S=void 0,n(7,D="Copy request ID"))},async function(){t&&(await navigator.clipboard.writeText(t),n(7,D="Copied!"),clearTimeout(S),S=setTimeout(q,1500))},i,r,m,function(y){q=y,n(8,q)}]}class Ei extends Z{constructor(e){super(),j(this,e,Bs,Ps,W,{chatModel:0,turn:1,isLastTurn:2,turnIndex:3,messageListContainer:4,group:5})}}function Ns(o){let e,n,t,s,r,i,c;const a=o[15].default,l=ye(a,o,o[14],null);return{c(){e=M("div"),l&&l.c(),x(e,"class",n=nt(`c-msg-list__item ${o[5]}`)+" svelte-1s0uz2w"),x(e,"style",t=`min-height: calc(${o[4]}px - (var(--msg-list-item-spacing) * 2));`),x(e,"data-request-id",o[6])},m(u,d){v(u,e,d),l&&l.m(e,null),o[16](e),r=!0,i||(c=Yt(s=Nn.call(null,e,{follow:!o[2]&&o[1],scrollContainer:o[3],disableScrollUp:!0,smooth:!0,bottom:!0})),i=!0)},p(u,[d]){l&&l.p&&(!r||16384&d)&&Ce(l,a,u,u[14],r?ke(a,u[14],d,null):_e(u[14]),null),(!r||32&d&&n!==(n=nt(`c-msg-list__item ${u[5]}`)+" svelte-1s0uz2w"))&&x(e,"class",n),(!r||16&d&&t!==(t=`min-height: calc(${u[4]}px - (var(--msg-list-item-spacing) * 2));`))&&x(e,"style",t),(!r||64&d)&&x(e,"data-request-id",u[6]),s&&be(s.update)&&14&d&&s.update.call(null,{follow:!u[2]&&u[1],scrollContainer:u[3],disableScrollUp:!0,smooth:!0,bottom:!0})},i(u){r||($(l,u),r=!0)},o(u){p(l,u),r=!1},d(u){u&&h(e),l&&l.d(u),o[16](null),i=!1,c()}}}function Hs(o,e,n){let t,s,r,i,c=U,a=U,l=()=>(a(),a=ge(g,T=>n(13,i=T)),g);o.$$.on_destroy.push(()=>c()),o.$$.on_destroy.push(()=>a());let{$$slots:u={},$$scope:d}=e,{requestId:m}=e,{chatModel:g}=e;l();let w,{isLastItem:A=!1}=e,{userControlsScroll:f=!1}=e,{releaseScroll:I=()=>{}}=e,{messageListContainer:L}=e,{minHeight:B}=e,{class:E=""}=e,{dataRequestId:J}=e;return fe(()=>{L&&A&&en(L,{smooth:!0,onScrollFinish:I})}),o.$$set=T=>{"requestId"in T&&n(9,m=T.requestId),"chatModel"in T&&l(n(0,g=T.chatModel)),"isLastItem"in T&&n(1,A=T.isLastItem),"userControlsScroll"in T&&n(2,f=T.userControlsScroll),"releaseScroll"in T&&n(10,I=T.releaseScroll),"messageListContainer"in T&&n(3,L=T.messageListContainer),"minHeight"in T&&n(4,B=T.minHeight),"class"in T&&n(5,E=T.class),"dataRequestId"in T&&n(6,J=T.dataRequestId),"$$scope"in T&&n(14,d=T.$$scope)},o.$$.update=()=>{var T,S;8192&o.$$.dirty&&(n(8,t=(T=i==null?void 0:i.currentConversationModel)==null?void 0:T.focusModel),c(),c=ge(t,D=>n(12,r=D))),4608&o.$$.dirty&&n(11,s=((S=r.focusedItem)==null?void 0:S.request_id)===m),2048&o.$$.dirty&&s&&L&&w&&Hn(L,w,{topBuffer:0,smooth:!0,scrollDuration:100,onScrollFinish:I})},[g,A,f,L,B,E,J,w,t,m,I,s,r,i,d,u,function(T){re[T?"unshift":"push"](()=>{w=T,n(7,w)})}]}class Mi extends Z{constructor(e){super(),j(this,e,Hs,Ns,W,{requestId:9,chatModel:0,isLastItem:1,userControlsScroll:2,releaseScroll:10,messageListContainer:3,minHeight:4,class:5,dataRequestId:6})}}function Ds(o){let e;return{c(){e=F("Generating response...")},m(n,t){v(n,e,t)},d(n){n&&h(e)}}}function wt(o){let e,n;return e=new sn.Root({props:{color:"neutral",size:1,$$slots:{default:[Us]},$$scope:{ctx:o}}}),{c(){C(e.$$.fragment)},m(t,s){_(e,t,s),n=!0},p(t,s){const r={};1029&s&&(r.$$scope={dirty:s,ctx:t}),e.$set(r)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){p(e.$$.fragment,t),n=!1},d(t){k(e,t)}}}function Os(o){let e,n;return{c(){e=M("span"),n=F(o[2]),x(e,"class","c-gen-response__timer svelte-148snxl"),V(e,"is_minutes",o[0]>=60)},m(t,s){v(t,e,s),R(e,n)},p(t,s){4&s&&K(n,t[2]),1&s&&V(e,"is_minutes",t[0]>=60)},d(t){t&&h(e)}}}function Us(o){let e,n;return e=new ee({props:{type:"monospace",size:1,weight:"light",color:"secondary",$$slots:{default:[Os]},$$scope:{ctx:o}}}),{c(){C(e.$$.fragment)},m(t,s){_(e,t,s),n=!0},p(t,s){const r={};1029&s&&(r.$$scope={dirty:s,ctx:t}),e.$set(r)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){p(e.$$.fragment,t),n=!1},d(t){k(e,t)}}}function Vs(o){let e,n,t,s,r,i,c;t=new he({props:{size:1}}),r=new ee({props:{size:1,weight:"light",color:"secondary",$$slots:{default:[Ds]},$$scope:{ctx:o}}});let a=o[1]&&wt(o);return{c(){e=M("div"),n=M("span"),C(t.$$.fragment),s=P(),C(r.$$.fragment),i=P(),a&&a.c(),x(n,"class","c-gen-response__text svelte-148snxl"),x(e,"class","c-gen-response svelte-148snxl")},m(l,u){v(l,e,u),R(e,n),_(t,n,null),R(n,s),_(r,n,null),R(e,i),a&&a.m(e,null),c=!0},p(l,[u]){const d={};1024&u&&(d.$$scope={dirty:u,ctx:l}),r.$set(d),l[1]?a?(a.p(l,u),2&u&&$(a,1)):(a=wt(l),a.c(),$(a,1),a.m(e,null)):a&&(N(),p(a,1,1,()=>{a=null}),H())},i(l){c||($(t.$$.fragment,l),$(r.$$.fragment,l),$(a),c=!0)},o(l){p(t.$$.fragment,l),p(r.$$.fragment,l),p(a),c=!1},d(l){l&&h(e),k(t),k(r),a&&a.d()}}}function Js(o,e,n){let t,s,r,{timeToTimerMs:i=5e3}=e,c=0,a=Date.now(),l=!1;function u(){n(0,c=Math.floor((Date.now()-a)/1e3))}function d(){n(1,l=!0),u(),r=setInterval(u,1e3)}return fe(function(){return s=setTimeout(d,i),a=Date.now(),()=>{n(0,c=0),n(1,l=!1),clearTimeout(s),clearInterval(r)}}),o.$$set=m=>{"timeToTimerMs"in m&&n(3,i=m.timeToTimerMs)},o.$$.update=()=>{1&o.$$.dirty&&n(2,t=function(m){return m>=60?`${Math.floor(m/60)}:${String(m%60).padStart(2,"0")}`:`0:${String(m).padStart(2,"0")}`}(c))},[c,l,t,i]}class Gs extends Z{constructor(e){super(),j(this,e,Js,Vs,W,{timeToTimerMs:3})}}class de{constructor(e){te(this,"type","plainText");this.text=e}}class Ee{constructor(e){te(this,"type","specialBlock");this.text=e}}function We(o){return o.map(e=>e.text).join("")}function Zs(o){let e,n,t,s,r=(!o[0].status||o[0].status===oe.success)&&o[4]===We(o[3]);e=new ns({props:{renderers:o[5],markdown:o[1]+o[4]}});let i=r&&xt(o);return{c(){C(e.$$.fragment),n=P(),i&&i.c(),t=Q()},m(c,a){_(e,c,a),v(c,n,a),i&&i.m(c,a),v(c,t,a),s=!0},p(c,a){const l={};18&a&&(l.markdown=c[1]+c[4]),e.$set(l),25&a&&(r=(!c[0].status||c[0].status===oe.success)&&c[4]===We(c[3])),r?i?(i.p(c,a),25&a&&$(i,1)):(i=xt(c),i.c(),$(i,1),i.m(t.parentNode,t)):i&&(N(),p(i,1,1,()=>{i=null}),H())},i(c){s||($(e.$$.fragment,c),$(i),s=!0)},o(c){p(e.$$.fragment,c),p(i),s=!1},d(c){c&&(h(n),h(t)),k(e,c),i&&i.d(c)}}}function js(o){let e;function n(r,i){return r[0].display_error_message?Xs:r[0].response_text&&r[0].response_text.length>0?Ys:Ks}let t=n(o),s=t(o);return{c(){e=M("div"),s.c(),x(e,"class","c-msg-failure svelte-9a9fi8")},m(r,i){v(r,e,i),s.m(e,null)},p(r,i){t===(t=n(r))&&s?s.p(r,i):(s.d(1),s=t(r),s&&(s.c(),s.m(e,null)))},i:U,o:U,d(r){r&&h(e),s.d()}}}function Ws(o){let e,n;return e=new Gs({}),{c(){C(e.$$.fragment)},m(t,s){_(e,t,s),n=!0},p:U,i(t){n||($(e.$$.fragment,t),n=!0)},o(t){p(e.$$.fragment,t),n=!1},d(t){k(e,t)}}}function xt(o){let e;const n=o[7].default,t=ye(n,o,o[8],null);return{c(){t&&t.c()},m(s,r){t&&t.m(s,r),e=!0},p(s,r){t&&t.p&&(!e||256&r)&&Ce(t,n,s,s[8],e?ke(n,s[8],r,null):_e(s[8]),null)},i(s){e||($(t,s),e=!0)},o(s){p(t,s),e=!1},d(s){t&&t.d(s)}}}function Ks(o){let e,n,t=o[2]&&yt(o);return{c(){e=F("We encountered an issue sending your message."),t&&t.c(),n=F(".")},m(s,r){v(s,e,r),t&&t.m(s,r),v(s,n,r)},p(s,r){s[2]?t?t.p(s,r):(t=yt(s),t.c(),t.m(n.parentNode,n)):t&&(t.d(1),t=null)},d(s){s&&(h(e),h(n)),t&&t.d(s)}}}function Ys(o){let e,n,t=o[2]&&Ct(o);return{c(){e=F("Connection lost."),t&&t.c(),n=Q()},m(s,r){v(s,e,r),t&&t.m(s,r),v(s,n,r)},p(s,r){s[2]?t?t.p(s,r):(t=Ct(s),t.c(),t.m(n.parentNode,n)):t&&(t.d(1),t=null)},d(s){s&&(h(e),h(n)),t&&t.d(s)}}}function Xs(o){let e,n=o[0].display_error_message+"";return{c(){e=F(n)},m(t,s){v(t,e,s)},p(t,s){1&s&&n!==(n=t[0].display_error_message+"")&&K(e,n)},d(t){t&&h(e)}}}function yt(o){let e,n,t,s;return{c(){e=F(`Please
            `),n=M("button"),n.textContent="try again",x(n,"class","svelte-9a9fi8")},m(r,i){v(r,e,i),v(r,n,i),t||(s=ne(n,"click",Ne(function(){be(o[2])&&o[2].apply(this,arguments)})),t=!0)},p(r,i){o=r},d(r){r&&(h(e),h(n)),t=!1,s()}}}function Ct(o){let e,n,t,s,r;return{c(){e=F(`Please
            `),n=M("button"),n.textContent="try again",t=F("."),x(n,"class","svelte-9a9fi8")},m(i,c){v(i,e,c),v(i,n,c),v(i,t,c),s||(r=ne(n,"click",Ne(function(){be(o[2])&&o[2].apply(this,arguments)})),s=!0)},p(i,c){o=i},d(i){i&&(h(e),h(n),h(t)),s=!1,r()}}}function Qs(o){let e,n,t,s;const r=[Ws,js,Zs],i=[];function c(a,l){return(!a[0].status||a[0].status===oe.sent)&&a[4].length<=0?0:a[0].status===oe.failed?1:2}return e=c(o),n=i[e]=r[e](o),{c(){n.c(),t=Q()},m(a,l){i[e].m(a,l),v(a,t,l),s=!0},p(a,l){let u=e;e=c(a),e===u?i[e].p(a,l):(N(),p(i[u],1,1,()=>{i[u]=null}),H(),n=i[e],n?n.p(a,l):(n=i[e]=r[e](a),n.c()),$(n,1),n.m(t.parentNode,t))},i(a){s||($(n),s=!0)},o(a){p(n),s=!1},d(a){a&&h(t),i[e].d(a)}}}function eo(o){let e,n;return e=new Ke({props:{isAugment:!0,$$slots:{content:[Qs]},$$scope:{ctx:o}}}),{c(){C(e.$$.fragment)},m(t,s){_(e,t,s),n=!0},p(t,[s]){const r={};287&s&&(r.$$scope={dirty:s,ctx:t}),e.$set(r)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){p(e.$$.fragment,t),n=!1},d(t){k(e,t)}}}function to(o,e,n){let t,s,{$$slots:r={},$$scope:i}=e,{turn:c}=e,{preamble:a=""}=e,{resendTurn:l}=e,{markdownBlocks:u=[]}=e,d={code:es,codespan:ts,link:Dn};return fe(()=>{if(c.seen_state===bn.seen)return void n(0,c.response_text=We(t),c);let m=Date.now();const g=function*(f){for(const I of f)if(I.type==="specialBlock")yield I.text;else for(const L of I.text)yield L}(t);let w=g.next();const A=()=>{let f=Date.now();const I=Math.round((f-m)/8);let L="";for(let B=0;B<I&&!w.done;B++)L+=w.value,w=g.next();n(0,c.response_text+=L,c),m=f,w.done||requestAnimationFrame(A)};A()}),o.$$set=m=>{"turn"in m&&n(0,c=m.turn),"preamble"in m&&n(1,a=m.preamble),"resendTurn"in m&&n(2,l=m.resendTurn),"markdownBlocks"in m&&n(6,u=m.markdownBlocks),"$$scope"in m&&n(8,i=m.$$scope)},o.$$.update=()=>{1&o.$$.dirty&&n(0,c.response_text=c.response_text??"",c),65&o.$$.dirty&&n(3,t=c.response_text?[new de(c.response_text)]:u),1&o.$$.dirty&&n(4,s=c.response_text??"")},[c,a,l,t,s,d,u,r,i]}class no extends Z{constructor(e){super(),j(this,e,to,eo,W,{turn:0,preamble:1,resendTurn:2,markdownBlocks:6})}}function so(o){let e,n,t,s;return e=new De.Content({props:{content:o[2]}}),t=new Jt({props:{requestEditorFocus:o[4]}}),{c(){C(e.$$.fragment),n=P(),C(t.$$.fragment)},m(r,i){_(e,r,i),v(r,n,i),_(t,r,i),s=!0},p:U,i(r){s||($(e.$$.fragment,r),$(t.$$.fragment,r),s=!0)},o(r){p(e.$$.fragment,r),p(t.$$.fragment,r),s=!1},d(r){r&&h(n),k(e,r),k(t,r)}}}function oo(o){let e,n,t={slot:"content",$$slots:{default:[so]},$$scope:{ctx:o}};return e=new De.Root({props:t}),o[7](e),{c(){C(e.$$.fragment)},m(s,r){_(e,s,r),n=!0},p(s,r){const i={};512&r&&(i.$$scope={dirty:r,ctx:s}),e.$set(i)},i(s){n||($(e.$$.fragment,s),n=!0)},o(s){p(e.$$.fragment,s),n=!1},d(s){o[7](null),k(e,s)}}}function ro(o){let e,n,t,s;return e=new Ke({props:{$$slots:{content:[oo]},$$scope:{ctx:o}}}),t=new no({props:{turn:o[1],markdownBlocks:o[3]}}),{c(){C(e.$$.fragment),n=P(),C(t.$$.fragment)},m(r,i){_(e,r,i),v(r,n,i),_(t,r,i),s=!0},p(r,[i]){const c={};513&i&&(c.$$scope={dirty:i,ctx:r}),e.$set(c)},i(r){s||($(e.$$.fragment,r),$(t.$$.fragment,r),s=!0)},o(r){p(e.$$.fragment,r),p(t.$$.fragment,r),s=!1},d(r){r&&h(n),k(e,r),k(t,r)}}}function io(o,e,n){let{flagsModel:t}=e,{turn:s}=e;const r={seen_state:s.seen_state,status:oe.success},i=[[new Ee("[**Chat**](https://docs.augmentcode.com/using-augment/chat)"),new de(": Explore your codebase, get up to speed on unfamiliar code, and work through technical problems using natural language.")],[new Ee("[**Code Completions**](https://docs.augmentcode.com/using-augment/completions)"),new de(": Receive intelligent code suggestions that take your entire codebase into account as you type.")],[new Ee("[**Instructions**](https://docs.augmentcode.com/using-augment/instructions)"),new de(": Use natural language prompts to write or modify code, applied as a diff for your review.")]];t.suggestedEditsAvailable&&i.push([new Ee("[**Suggested Edits**](https://docs.augmentcode.com/using-augment/suggested-edits)"),new de(": Take your completions beyond the cursor and across your workspace.")]);let c,a=[new de(`Welcome to Augment!

Augment can help you understand code, debug issues, and ship faster with its deep understanding of your codebase. Here is what Augment can do for you:

`),...i.flatMap((l,u)=>[new de(`${u+1}. `),...l,new de(`

`)]),new de("Ask questions to learn more! Just remember to tag **@Augment** when asking about Augment's capabilities.")];return o.$$set=l=>{"flagsModel"in l&&n(5,t=l.flagsModel),"turn"in l&&n(6,s=l.turn)},[c,r,{type:"doc",content:[{type:"paragraph",content:[{type:"text",text:"What can "},{type:"mention",attrs:{id:"Augment",label:"Augment",data:{id:"Augment",label:"Augment"}}},{type:"text",text:" do?"}]}]},a,function(){c==null||c.requestFocus()},t,s,function(l){re[l?"unshift":"push"](()=>{c=l,n(0,c)})}]}class Ai extends Z{constructor(e){super(),j(this,e,io,ro,W,{flagsModel:5,turn:6})}}function co(o){let e,n;return{c(){e=me("svg"),n=me("path"),x(n,"d","M6.04995 2.74998C6.04995 2.44623 5.80371 2.19998 5.49995 2.19998C5.19619 2.19998 4.94995 2.44623 4.94995 2.74998V12.25C4.94995 12.5537 5.19619 12.8 5.49995 12.8C5.80371 12.8 6.04995 12.5537 6.04995 12.25V2.74998ZM10.05 2.74998C10.05 2.44623 9.80371 2.19998 9.49995 2.19998C9.19619 2.19998 8.94995 2.44623 8.94995 2.74998V12.25C8.94995 12.5537 9.19619 12.8 9.49995 12.8C9.80371 12.8 10.05 12.5537 10.05 12.25V2.74998Z"),x(n,"fill","currentColor"),x(n,"fill-rule","evenodd"),x(n,"clip-rule","evenodd"),x(e,"width","15"),x(e,"height","15"),x(e,"viewBox","0 0 15 15"),x(e,"fill","none"),x(e,"xmlns","http://www.w3.org/2000/svg")},m(t,s){v(t,e,s),R(e,n)},p:U,i:U,o:U,d(t){t&&h(e)}}}class ao extends Z{constructor(e){super(),j(this,e,null,co,W,{})}}function lo(o){let e,n,t,s,r;return n=new ao({}),{c(){e=M("span"),C(n.$$.fragment),t=F(`
  Waiting for user input`),s=F(o[0]),x(e,"class","c-gen-response svelte-5is5us")},m(i,c){v(i,e,c),_(n,e,null),R(e,t),R(e,s),r=!0},p(i,[c]){(!r||1&c)&&K(s,i[0])},i(i){r||($(n.$$.fragment,i),r=!0)},o(i){p(n.$$.fragment,i),r=!1},d(i){i&&h(e),k(n)}}}function uo(o,e,n){let t=".";return fe(()=>{const s=setInterval(()=>{n(0,t=t.length>=3?".":t+".")},500);return()=>clearInterval(s)}),[t]}class Li extends Z{constructor(e){super(),j(this,e,uo,lo,W,{})}}function $o(o){let e;return{c(){e=F("Resuming remote agent...")},m(n,t){v(n,e,t)},d(n){n&&h(e)}}}function _t(o){let e,n;return e=new sn.Root({props:{color:"neutral",size:1,$$slots:{default:[po]},$$scope:{ctx:o}}}),{c(){C(e.$$.fragment)},m(t,s){_(e,t,s),n=!0},p(t,s){const r={};1029&s&&(r.$$scope={dirty:s,ctx:t}),e.$set(r)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){p(e.$$.fragment,t),n=!1},d(t){k(e,t)}}}function mo(o){let e,n;return{c(){e=M("span"),n=F(o[2]),x(e,"class","c-resuming-agent__timer svelte-16pyinb"),V(e,"is_minutes",o[0]>=60)},m(t,s){v(t,e,s),R(e,n)},p(t,s){4&s&&K(n,t[2]),1&s&&V(e,"is_minutes",t[0]>=60)},d(t){t&&h(e)}}}function po(o){let e,n;return e=new ee({props:{type:"monospace",size:1,weight:"light",color:"secondary",$$slots:{default:[mo]},$$scope:{ctx:o}}}),{c(){C(e.$$.fragment)},m(t,s){_(e,t,s),n=!0},p(t,s){const r={};1029&s&&(r.$$scope={dirty:s,ctx:t}),e.$set(r)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){p(e.$$.fragment,t),n=!1},d(t){k(e,t)}}}function go(o){let e,n,t,s,r,i,c;t=new he({props:{size:1}}),r=new ee({props:{size:1,weight:"light",color:"secondary",$$slots:{default:[$o]},$$scope:{ctx:o}}});let a=o[1]&&_t(o);return{c(){e=M("div"),n=M("span"),C(t.$$.fragment),s=P(),C(r.$$.fragment),i=P(),a&&a.c(),x(n,"class","c-resuming-agent__text svelte-16pyinb"),x(e,"class","c-resuming-agent svelte-16pyinb")},m(l,u){v(l,e,u),R(e,n),_(t,n,null),R(n,s),_(r,n,null),R(e,i),a&&a.m(e,null),c=!0},p(l,[u]){const d={};1024&u&&(d.$$scope={dirty:u,ctx:l}),r.$set(d),l[1]?a?(a.p(l,u),2&u&&$(a,1)):(a=_t(l),a.c(),$(a,1),a.m(e,null)):a&&(N(),p(a,1,1,()=>{a=null}),H())},i(l){c||($(t.$$.fragment,l),$(r.$$.fragment,l),$(a),c=!0)},o(l){p(t.$$.fragment,l),p(r.$$.fragment,l),p(a),c=!1},d(l){l&&h(e),k(t),k(r),a&&a.d()}}}function fo(o,e,n){let t,s,r,{timeToTimerMs:i=5e3}=e,c=0,a=Date.now(),l=!1;function u(){n(0,c=Math.floor((Date.now()-a)/1e3))}function d(){n(1,l=!0),u(),r=setInterval(u,1e3)}return fe(function(){return s=setTimeout(d,i),a=Date.now(),()=>{n(0,c=0),n(1,l=!1),clearTimeout(s),clearInterval(r)}}),o.$$set=m=>{"timeToTimerMs"in m&&n(3,i=m.timeToTimerMs)},o.$$.update=()=>{1&o.$$.dirty&&n(2,t=function(m){return m>=60?`${Math.floor(m/60)}:${String(m%60).padStart(2,"0")}`:`0:${String(m).padStart(2,"0")}`}(c))},[c,l,t,i]}class Fi extends Z{constructor(e){super(),j(this,e,fo,go,W,{timeToTimerMs:3})}}function ho(o){let e,n,t,s,r;return n=new he({props:{size:1}}),{c(){e=M("span"),C(n.$$.fragment),t=P(),s=F(o[0]),x(e,"class","c-retry-response svelte-1lxm8qk")},m(i,c){v(i,e,c),_(n,e,null),R(e,t),R(e,s),r=!0},p(i,[c]){(!r||1&c)&&K(s,i[0])},i(i){r||($(n.$$.fragment,i),r=!0)},o(i){p(n.$$.fragment,i),r=!1},d(i){i&&h(e),k(n)}}}function vo(o,e,n){let{message:t="Retrying..."}=e;return o.$$set=s=>{"message"in s&&n(0,t=s.message)},[t]}class qi extends Z{constructor(e){super(),j(this,e,vo,ho,W,{message:0})}}function wo(o){let e,n,t;return e=new fn({}),{c(){C(e.$$.fragment),n=F(`
    Stopped`)},m(s,r){_(e,s,r),v(s,n,r),t=!0},i(s){t||($(e.$$.fragment,s),t=!0)},o(s){p(e.$$.fragment,s),t=!1},d(s){s&&h(n),k(e,s)}}}function xo(o){let e,n,t;return n=new ee({props:{size:1,$$slots:{default:[wo]},$$scope:{ctx:o}}}),{c(){e=M("span"),C(n.$$.fragment),x(e,"class","c-stopped svelte-lv19x6")},m(s,r){v(s,e,r),_(n,e,null),t=!0},p(s,[r]){const i={};1&r&&(i.$$scope={dirty:r,ctx:s}),n.$set(i)},i(s){t||($(n.$$.fragment,s),t=!0)},o(s){p(n.$$.fragment,s),t=!1},d(s){s&&h(e),k(n)}}}class zi extends Z{constructor(e){super(),j(this,e,null,xo,W,{})}}function yo(o){let e,n;return{c(){e=me("svg"),n=me("path"),x(n,"fill-rule","evenodd"),x(n,"clip-rule","evenodd"),x(n,"d","M4.85355 2.14645C5.04882 2.34171 5.04882 2.65829 4.85355 2.85355L3.70711 4H9C11.4853 4 13.5 6.01472 13.5 8.5C13.5 10.9853 11.4853 13 9 13H5C4.72386 13 4.5 12.7761 4.5 12.5C4.5 12.2239 4.72386 12 5 12H9C10.933 12 12.5 10.433 12.5 8.5C12.5 6.567 10.933 5 9 5H3.70711L4.85355 6.14645C5.04882 6.34171 5.04882 6.65829 4.85355 6.85355C4.65829 7.04882 4.34171 7.04882 4.14645 6.85355L2.14645 4.85355C1.95118 4.65829 1.95118 4.34171 2.14645 4.14645L4.14645 2.14645C4.34171 1.95118 4.65829 1.95118 4.85355 2.14645Z"),x(n,"fill","currentColor"),x(e,"width","15"),x(e,"height","15"),x(e,"viewBox","0 0 15 15"),x(e,"fill","none"),x(e,"xmlns","http://www.w3.org/2000/svg")},m(t,s){v(t,e,s),R(e,n)},p:U,i:U,o:U,d(t){t&&h(e)}}}class cn extends Z{constructor(e){super(),j(this,e,null,yo,W,{})}}function Co(o){let e,n,t;return{c(){e=me("svg"),n=me("path"),t=me("path"),x(n,"fill-rule","evenodd"),x(n,"clip-rule","evenodd"),x(n,"d","M3.1784 5.56111C3.17842 5.85569 3.41722 6.09449 3.71173 6.09444L9.92275 6.09447C10.0585 6.09447 10.1929 6.06857 10.3189 6.01818L13.9947 4.54786C14.1973 4.46681 14.33 4.27071 14.3301 4.05261C14.33 3.83458 14.1973 3.63846 13.9948 3.55744L10.3189 2.08711C10.1929 2.0367 10.0584 2.01083 9.92278 2.01079L3.71173 2.01079C3.41722 2.01084 3.17844 2.24962 3.1784 2.54412L3.1784 5.56111ZM9.92275 5.0278L4.2451 5.02781L4.24509 3.07749L9.92278 3.07745L11.5339 3.72196L12.2527 4.05263C12.2527 4.05263 11.8167 4.25864 11.534 4.38331C10.9139 4.65675 9.92275 5.0278 9.92275 5.0278Z"),x(n,"fill","currentColor"),x(t,"fill-rule","evenodd"),x(t,"clip-rule","evenodd"),x(t,"d","M8.53346 1.59998C8.53346 1.30543 8.29468 1.06665 8.00013 1.06665C7.70558 1.06665 7.4668 1.30543 7.4668 1.59998V3.07746L8.53346 3.07745V1.59998ZM8.53346 5.0278L7.4668 5.0278V14.4C7.4668 14.6945 7.70558 14.9333 8.00013 14.9333C8.29468 14.9333 8.53346 14.6945 8.53346 14.4V5.0278Z"),x(t,"fill","currentColor"),x(e,"width","15"),x(e,"height","15"),x(e,"viewBox","0 0 15 15"),x(e,"fill","none"),x(e,"xmlns","http://www.w3.org/2000/svg")},m(s,r){v(s,e,r),R(e,n),R(e,t)},p:U,i:U,o:U,d(s){s&&h(e)}}}class an extends Z{constructor(e){super(),j(this,e,null,Co,W,{})}}function kt(o){let e,n,t,s,r;return n=new os({props:{size:1,insetContent:!0,variant:"ghost",class:"c-checkpoint-tag","data-testid":"checkpoint-version-tag",$$slots:{default:[To]},$$scope:{ctx:o}}}),n.$on("click",o[17]),s=new ve({props:{variant:o[6]?"soft":"ghost-block",color:"neutral",size:1,disabled:o[6]||o[4],class:"c-revert-button","data-testid":"revert-button",$$slots:{default:[Eo]},$$scope:{ctx:o}}}),s.$on("click",o[12]),{c(){e=M("div"),C(n.$$.fragment),t=P(),C(s.$$.fragment),x(e,"class","c-checkpoint-container svelte-q20gs5"),x(e,"data-checkpoint-number",o[0]),V(e,"c-checkpoint-container--target-checkpoint",o[6]),V(e,"c-checkpoint-container--dimmed-marker",o[5])},m(i,c){v(i,e,c),_(n,e,null),R(e,t),_(s,e,null),r=!0},p(i,c){const a={};1048778&c&&(a.$$scope={dirty:c,ctx:i}),n.$set(a);const l={};64&c&&(l.variant=i[6]?"soft":"ghost-block"),80&c&&(l.disabled=i[6]||i[4]),1048656&c&&(l.$$scope={dirty:c,ctx:i}),s.$set(l),(!r||1&c)&&x(e,"data-checkpoint-number",i[0]),(!r||64&c)&&V(e,"c-checkpoint-container--target-checkpoint",i[6]),(!r||32&c)&&V(e,"c-checkpoint-container--dimmed-marker",i[5])},i(i){r||($(n.$$.fragment,i),$(s.$$.fragment,i),r=!0)},o(i){p(n.$$.fragment,i),p(s.$$.fragment,i),r=!1},d(i){i&&h(e),k(n),k(s)}}}function _o(o){let e,n;return e=new an({props:{slot:"leftIcon"}}),{c(){C(e.$$.fragment)},m(t,s){_(e,t,s),n=!0},p:U,i(t){n||($(e.$$.fragment,t),n=!0)},o(t){p(e.$$.fragment,t),n=!1},d(t){k(e,t)}}}function ko(o){let e,n;return{c(){e=F("Checkpoint "),n=F(o[3])},m(t,s){v(t,e,s),v(t,n,s)},p(t,s){8&s&&K(n,t[3])},d(t){t&&(h(e),h(n))}}}function bo(o){let e,n=Me(o[7])+"";return{c(){e=F(n)},m(t,s){v(t,e,s)},p(t,s){128&s&&n!==(n=Me(t[7])+"")&&K(e,n)},d(t){t&&h(e)}}}function Io(o){let e;return{c(){e=F(o[1])},m(n,t){v(n,e,t)},p(n,t){2&t&&K(e,n[1])},d(n){n&&h(e)}}}function So(o){let e;function n(r,i){return r[1]?Io:r[6]?bo:void 0}let t=n(o),s=t&&t(o);return{c(){s&&s.c(),e=Q()},m(r,i){s&&s.m(r,i),v(r,e,i)},p(r,i){t===(t=n(r))&&s?s.p(r,i):(s&&s.d(1),s=t&&t(r),s&&(s.c(),s.m(e.parentNode,e)))},d(r){r&&h(e),s&&s.d(r)}}}function To(o){let e,n;return e=new nn({props:{size:1,shrink:!0,align:"left",$$slots:{grayText:[So],text:[ko],leftIcon:[_o]},$$scope:{ctx:o}}}),{c(){C(e.$$.fragment)},m(t,s){_(e,t,s),n=!0},p(t,s){const r={};1048778&s&&(r.$$scope={dirty:s,ctx:t}),e.$set(r)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){p(e.$$.fragment,t),n=!1},d(t){k(e,t)}}}function Ro(o){let e,n;return e=new cn({}),{c(){C(e.$$.fragment)},m(t,s){_(e,t,s),n=!0},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){p(e.$$.fragment,t),n=!1},d(t){k(e,t)}}}function Eo(o){let e,n;return e=new Ie({props:{triggerOn:[He.Hover],content:o[6]||o[4]?"Cannot revert to current version":"Revert to this version",$$slots:{default:[Ro]},$$scope:{ctx:o}}}),{c(){C(e.$$.fragment)},m(t,s){_(e,t,s),n=!0},p(t,s){const r={};80&s&&(r.content=t[6]||t[4]?"Cannot revert to current version":"Revert to this version"),1048576&s&&(r.$$scope={dirty:s,ctx:t}),e.$set(r)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){p(e.$$.fragment,t),n=!1},d(t){k(e,t)}}}function Mo(o){let e,n,t=(!o[4]||o[2])&&kt(o);return{c(){t&&t.c(),e=Q()},m(s,r){t&&t.m(s,r),v(s,e,r),n=!0},p(s,[r]){!s[4]||s[2]?t?(t.p(s,r),20&r&&$(t,1)):(t=kt(s),t.c(),$(t,1),t.m(e.parentNode,e)):t&&(N(),p(t,1,1,()=>{t=null}),H())},i(s){n||($(t),n=!0)},o(s){p(t),n=!1},d(s){s&&h(e),t&&t.d(s)}}}function Ao(o,e,n){let t,s,r,i,c,a,l,u,d,m,g,{turn:w}=e;const A=ie("checkpointStore"),{targetCheckpointIdx:f,totalCheckpointCount:I,uuidToIdx:L}=A;function B(E){Rn(f,m=E,m)}return le(o,f,E=>n(15,m=E)),le(o,I,E=>n(14,d=E)),le(o,L,E=>n(16,g=E)),o.$$set=E=>{"turn"in E&&n(13,w=E.turn)},o.$$.update=()=>{var E,J,T;73728&o.$$.dirty&&n(0,t=g.get(w.uuid)??-1),8192&o.$$.dirty&&n(7,s=w.toTimestamp),49153&o.$$.dirty&&n(6,(J=d,r=(E=t)===(T=m)||T===void 0&&E===J-1)),49153&o.$$.dirty&&n(5,i=function(S,D,q){return S===q&&q!==void 0&&q<D-1}(t,d,m)),16385&o.$$.dirty&&n(4,c=t===d-1),1&o.$$.dirty&&n(3,a=t+1),8192&o.$$.dirty&&n(2,l=Le(w)),8192&o.$$.dirty&&n(1,u=Le(w)?function(S){var D,q;if((D=S.revertTarget)!=null&&D.uuid){const y=g.get(S.revertTarget.uuid);return y===void 0?void 0:`Reverted to Checkpoint ${y+1}`}return(q=S.revertTarget)!=null&&q.filePath?`Undid changes to ${S.revertTarget.filePath.relPath}`:void 0}(w):void 0)},[t,u,l,a,c,i,r,s,f,I,L,B,async function(){await A.revertToCheckpoint(w.uuid)},w,d,m,g,()=>B(t)]}class Pi extends Z{constructor(e){super(),j(this,e,Ao,Mo,W,{turn:13})}}function Lo(o){let e,n;return e=new an({props:{slot:"leftIcon"}}),{c(){C(e.$$.fragment)},m(t,s){_(e,t,s),n=!0},p:U,i(t){n||($(e.$$.fragment,t),n=!0)},o(t){p(e.$$.fragment,t),n=!1},d(t){k(e,t)}}}function bt(o){let e,n,t,s,r,i,c=o[1]===1?"":"s";return{c(){e=M("span"),n=F("("),t=F(o[1]),s=F(" file"),r=F(c),i=F(")"),x(e,"class","c-checkpoint-files-count")},m(a,l){v(a,e,l),R(e,n),R(e,t),R(e,s),R(e,r),R(e,i)},p(a,l){2&l&&K(t,a[1]),2&l&&c!==(c=a[1]===1?"":"s")&&K(r,c)},d(a){a&&h(e)}}}function Fo(o){let e,n,t,s,r=o[1]>0&&bt(o);return{c(){e=F("Checkpoint "),n=F(o[0]),t=P(),r&&r.c(),s=Q()},m(i,c){v(i,e,c),v(i,n,c),v(i,t,c),r&&r.m(i,c),v(i,s,c)},p(i,c){1&c&&K(n,i[0]),i[1]>0?r?r.p(i,c):(r=bt(i),r.c(),r.m(s.parentNode,s)):r&&(r.d(1),r=null)},d(i){i&&(h(e),h(n),h(t),h(s)),r&&r.d(i)}}}function qo(o){let e;return{c(){e=F(o[2])},m(n,t){v(n,e,t)},p(n,t){4&t&&K(e,n[2])},d(n){n&&h(e)}}}function zo(o){let e;return{c(){e=F(o[3])},m(n,t){v(n,e,t)},p(n,t){8&t&&K(e,n[3])},d(n){n&&h(e)}}}function Po(o){let e;function n(r,i){return r[3]?zo:r[2]?qo:void 0}let t=n(o),s=t&&t(o);return{c(){s&&s.c(),e=Q()},m(r,i){s&&s.m(r,i),v(r,e,i)},p(r,i){t===(t=n(r))&&s?s.p(r,i):(s&&s.d(1),s=t&&t(r),s&&(s.c(),s.m(e.parentNode,e)))},d(r){r&&h(e),s&&s.d(r)}}}function It(o){let e,n,t;return n=new Vn({props:{totalAddedLines:o[4].totalAddedLines,totalRemovedLines:o[4].totalRemovedLines}}),{c(){e=M("div"),C(n.$$.fragment),x(e,"class","c-checkpoint-summary")},m(s,r){v(s,e,r),_(n,e,null),t=!0},p(s,r){const i={};16&r&&(i.totalAddedLines=s[4].totalAddedLines),16&r&&(i.totalRemovedLines=s[4].totalRemovedLines),n.$set(i)},i(s){t||($(n.$$.fragment,s),t=!0)},o(s){p(n.$$.fragment,s),t=!1},d(s){s&&h(e),k(n)}}}function St(o){let e,n;return e=new ve({props:{variant:"ghost-block",color:"neutral",size:1,class:"c-revert-button","data-testid":"revert-button",$$slots:{default:[No]},$$scope:{ctx:o}}}),e.$on("click",function(){be(o[7])&&o[7].apply(this,arguments)}),{c(){C(e.$$.fragment)},m(t,s){_(e,t,s),n=!0},p(t,s){o=t;const r={};256&s&&(r.$$scope={dirty:s,ctx:o}),e.$set(r)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){p(e.$$.fragment,t),n=!1},d(t){k(e,t)}}}function Bo(o){let e,n;return e=new cn({}),{c(){C(e.$$.fragment)},m(t,s){_(e,t,s),n=!0},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){p(e.$$.fragment,t),n=!1},d(t){k(e,t)}}}function No(o){let e,n;return e=new Ie({props:{triggerOn:[He.Hover],content:"Revert to this Checkpoint",$$slots:{default:[Bo]},$$scope:{ctx:o}}}),{c(){C(e.$$.fragment)},m(t,s){_(e,t,s),n=!0},p(t,s){const r={};256&s&&(r.$$scope={dirty:s,ctx:t}),e.$set(r)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){p(e.$$.fragment,t),n=!1},d(t){k(e,t)}}}function Ho(o){let e,n,t,s,r,i,c,a;t=new on({}),r=new nn({props:{size:1,shrink:!0,align:"left",$$slots:{grayText:[Po],text:[Fo],leftIcon:[Lo]},$$scope:{ctx:o}}});let l=o[5]&&It(o),u=!o[6]&&St(o);return{c(){e=M("div"),n=M("div"),C(t.$$.fragment),s=P(),C(r.$$.fragment),i=P(),l&&l.c(),c=P(),u&&u.c(),x(n,"class","c-checkpoint-tag"),x(e,"class","c-checkpoint-header svelte-htx8xt")},m(d,m){v(d,e,m),R(e,n),_(t,n,null),R(n,s),_(r,n,null),R(e,i),l&&l.m(e,null),R(e,c),u&&u.m(e,null),a=!0},p(d,[m]){const g={};271&m&&(g.$$scope={dirty:m,ctx:d}),r.$set(g),d[5]?l?(l.p(d,m),32&m&&$(l,1)):(l=It(d),l.c(),$(l,1),l.m(e,c)):l&&(N(),p(l,1,1,()=>{l=null}),H()),d[6]?u&&(N(),p(u,1,1,()=>{u=null}),H()):u?(u.p(d,m),64&m&&$(u,1)):(u=St(d),u.c(),$(u,1),u.m(e,null))},i(d){a||($(t.$$.fragment,d),$(r.$$.fragment,d),$(l),$(u),a=!0)},o(d){p(t.$$.fragment,d),p(r.$$.fragment,d),p(l),p(u),a=!1},d(d){d&&h(e),k(t),k(r),l&&l.d(),u&&u.d()}}}function Do(o,e,n){let{displayCheckpointIdx:t}=e,{filesCount:s=0}=e,{timestamp:r=""}=e,{revertMessage:i}=e,{diffSummary:c={totalAddedLines:0,totalRemovedLines:0}}=e,{hasChanges:a=!1}=e,{isTarget:l=!1}=e,{onRevertClick:u}=e;return o.$$set=d=>{"displayCheckpointIdx"in d&&n(0,t=d.displayCheckpointIdx),"filesCount"in d&&n(1,s=d.filesCount),"timestamp"in d&&n(2,r=d.timestamp),"revertMessage"in d&&n(3,i=d.revertMessage),"diffSummary"in d&&n(4,c=d.diffSummary),"hasChanges"in d&&n(5,a=d.hasChanges),"isTarget"in d&&n(6,l=d.isTarget),"onRevertClick"in d&&n(7,u=d.onRevertClick)},[t,s,r,i,c,a,l,u]}class Oo extends Z{constructor(e){super(),j(this,e,Do,Ho,W,{displayCheckpointIdx:0,filesCount:1,timestamp:2,revertMessage:3,diffSummary:4,hasChanges:5,isTarget:6,onRevertClick:7})}}function Tt(o,e,n){const t=o.slice();return t[33]=e[n],t}function Rt(o){let e,n,t,s,r,i,c;function a(u){o[27](u)}let l={class:"c-checkpoint-collapsible",stickyHeader:!0,$$slots:{header:[Zo],default:[Go]},$$scope:{ctx:o}};return o[3]!==void 0&&(l.collapsed=o[3]),n=new rn({props:l}),re.push(()=>Pe(n,"collapsed",a)),{c(){e=M("div"),C(n.$$.fragment),x(e,"class","c-checkpoint-container svelte-1e7odgw"),x(e,"data-checkpoint-number",o[2]),V(e,"c-checkpoint-container--target-checkpoint",o[11]),V(e,"c-checkpoint-container--dimmed-marker",o[10])},m(u,d){v(u,e,d),_(n,e,null),r=!0,i||(c=Yt(s=On.call(null,e,{onVisible:o[28],scrollTarget:document.body})),i=!0)},p(u,d){const m={};6522&d[0]|32&d[1]&&(m.$$scope={dirty:d,ctx:u}),!t&&8&d[0]&&(t=!0,m.collapsed=u[3],Be(()=>t=!1)),n.$set(m),(!r||4&d[0])&&x(e,"data-checkpoint-number",u[2]),s&&be(s.update)&&1&d[0]&&s.update.call(null,{onVisible:u[28],scrollTarget:document.body}),(!r||2048&d[0])&&V(e,"c-checkpoint-container--target-checkpoint",u[11]),(!r||1024&d[0])&&V(e,"c-checkpoint-container--dimmed-marker",u[10])},i(u){r||($(n.$$.fragment,u),r=!0)},o(u){p(n.$$.fragment,u),r=!1},d(u){u&&h(e),k(n),i=!1,c()}}}function Uo(o){let e,n,t;return n=new ee({props:{size:1,color:"neutral",$$slots:{default:[Jo]},$$scope:{ctx:o}}}),{c(){e=M("div"),C(n.$$.fragment),x(e,"class","c-edits-list c-edits-list--empty svelte-1e7odgw")},m(s,r){v(s,e,r),_(n,e,null),t=!0},p(s,r){const i={};32&r[1]&&(i.$$scope={dirty:r,ctx:s}),n.$set(i)},i(s){t||($(n.$$.fragment,s),t=!0)},o(s){p(n.$$.fragment,s),t=!1},d(s){s&&h(e),k(n)}}}function Vo(o){let e,n,t=Fe(o[1]),s=[];for(let i=0;i<t.length;i+=1)s[i]=Et(Tt(o,t,i));const r=i=>p(s[i],1,1,()=>{s[i]=null});return{c(){e=M("div");for(let i=0;i<s.length;i+=1)s[i].c();x(e,"class","c-edits-list svelte-1e7odgw")},m(i,c){v(i,e,c);for(let a=0;a<s.length;a+=1)s[a]&&s[a].m(e,null);n=!0},p(i,c){if(196610&c[0]){let a;for(t=Fe(i[1]),a=0;a<t.length;a+=1){const l=Tt(i,t,a);s[a]?(s[a].p(l,c),$(s[a],1)):(s[a]=Et(l),s[a].c(),$(s[a],1),s[a].m(e,null))}for(N(),a=t.length;a<s.length;a+=1)r(a);H()}},i(i){if(!n){for(let c=0;c<t.length;c+=1)$(s[c]);n=!0}},o(i){s=s.filter(Boolean);for(let c=0;c<s.length;c+=1)p(s[c]);n=!1},d(i){i&&h(e),Xt(s,i)}}}function Jo(o){let e;return{c(){e=F("No changes to show")},m(n,t){v(n,e,t)},d(n){n&&h(e)}}}function Et(o){let e,n;function t(){return o[25](o[33])}function s(){return o[26](o[33])}return e=new hn({props:{qualifiedPathName:o[33].qualifiedPathName,lineChanges:o[33].changesSummary,onClickFile:t,onClickReview:s}}),{c(){C(e.$$.fragment)},m(r,i){_(e,r,i),n=!0},p(r,i){o=r;const c={};2&i[0]&&(c.qualifiedPathName=o[33].qualifiedPathName),2&i[0]&&(c.lineChanges=o[33].changesSummary),2&i[0]&&(c.onClickFile=t),2&i[0]&&(c.onClickReview=s),e.$set(c)},i(r){n||($(e.$$.fragment,r),n=!0)},o(r){p(e.$$.fragment,r),n=!1},d(r){k(e,r)}}}function Go(o){let e,n,t,s;const r=[Vo,Uo],i=[];function c(a,l){return a[4]?0:a[3]?-1:1}return~(e=c(o))&&(n=i[e]=r[e](o)),{c(){n&&n.c(),t=Q()},m(a,l){~e&&i[e].m(a,l),v(a,t,l),s=!0},p(a,l){let u=e;e=c(a),e===u?~e&&i[e].p(a,l):(n&&(N(),p(i[u],1,1,()=>{i[u]=null}),H()),~e?(n=i[e],n?n.p(a,l):(n=i[e]=r[e](a),n.c()),$(n,1),n.m(t.parentNode,t)):n=null)},i(a){s||($(n),s=!0)},o(a){p(n),s=!1},d(a){a&&h(t),~e&&i[e].d(a)}}}function Zo(o){let e,n;return e=new Oo({props:{slot:"header",displayCheckpointIdx:o[8],filesCount:o[1].length,timestamp:Me(o[12]),revertMessage:o[6],diffSummary:o[5],hasChanges:o[4],isTarget:o[11],onRevertClick:o[18]}}),{c(){C(e.$$.fragment)},m(t,s){_(e,t,s),n=!0},p(t,s){const r={};256&s[0]&&(r.displayCheckpointIdx=t[8]),2&s[0]&&(r.filesCount=t[1].length),4096&s[0]&&(r.timestamp=Me(t[12])),64&s[0]&&(r.revertMessage=t[6]),32&s[0]&&(r.diffSummary=t[5]),16&s[0]&&(r.hasChanges=t[4]),2048&s[0]&&(r.isTarget=t[11]),e.$set(r)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){p(e.$$.fragment,t),n=!1},d(t){k(e,t)}}}function jo(o){let e,n,t=(!o[9]||o[7])&&Rt(o);return{c(){t&&t.c(),e=Q()},m(s,r){t&&t.m(s,r),v(s,e,r),n=!0},p(s,r){!s[9]||s[7]?t?(t.p(s,r),640&r[0]&&$(t,1)):(t=Rt(s),t.c(),$(t,1),t.m(e.parentNode,e)):t&&(N(),p(t,1,1,()=>{t=null}),H())},i(s){n||($(t),n=!0)},o(s){p(t),n=!1},d(s){s&&h(e),t&&t.d(s)}}}function Wo(o,e,n){let t,s,r,i,c,a,l,u,d,m,g,w,A,f,I,{turn:L}=e;const B=ie("checkpointStore"),E=ie("chatModel"),{targetCheckpointIdx:J,totalCheckpointCount:T,uuidToIdx:S}=B;le(o,J,O=>n(23,f=O)),le(o,T,O=>n(22,A=O)),le(o,S,O=>n(24,I=O));let D=!0;function q(O){E==null||E.extensionClient.openFile({repoRoot:O.rootPath,pathName:O.relPath,allowOutOfWorkspace:!0})}function y(O){E==null||E.extensionClient.showAgentReview(O,r,s,!1)}let X=[],z=!1,G=!1;return o.$$set=O=>{"turn"in O&&n(19,L=O.turn)},o.$$.update=()=>{var O,$e,se;17301504&o.$$.dirty[0]&&n(2,t=I.get(L.uuid)??-1),524288&o.$$.dirty[0]&&n(12,s=L.toTimestamp),524288&o.$$.dirty[0]&&(r=L.fromTimestamp),12582916&o.$$.dirty[0]&&n(11,($e=A,i=(O=t)===(se=f)||se===void 0&&O===$e-1)),12582916&o.$$.dirty[0]&&n(10,c=function(b,ce,ue){return b===ue&&ue!==void 0&&ue<ce-1}(t,A,f)),4194308&o.$$.dirty[0]&&n(9,a=t===A-1),4&o.$$.dirty[0]&&n(8,l=t+1),524288&o.$$.dirty[0]&&n(7,u=Le(L)),524288&o.$$.dirty[0]&&n(6,d=Le(L)?function(b){var ce,ue;if((ce=b.revertTarget)!=null&&ce.uuid){const we=I.get(b.revertTarget.uuid);return we===void 0?void 0:`Reverted to Checkpoint ${we+1}`}return(ue=b.revertTarget)!=null&&ue.filePath?`Undid changes to ${b.revertTarget.filePath.relPath}`:void 0}(L):void 0),2621441&o.$$.dirty[0]&&z&&L&&!G&&B.getCheckpointSummary(L).then(b=>{n(20,X=b),n(21,G=!0)}),1048576&o.$$.dirty[0]&&n(1,m=X.filter(b=>b.changesSummary&&(b.changesSummary.totalAddedLines>0||b.changesSummary.totalRemovedLines>0))),2&o.$$.dirty[0]&&n(5,g=m.reduce((b,ce)=>{var ue,we;return b.totalAddedLines+=((ue=ce.changesSummary)==null?void 0:ue.totalAddedLines)??0,b.totalRemovedLines+=((we=ce.changesSummary)==null?void 0:we.totalRemovedLines)??0,b},{totalAddedLines:0,totalRemovedLines:0})),2&o.$$.dirty[0]&&n(4,w=m.length>0)},[z,m,t,D,w,g,d,u,l,a,c,i,s,J,T,S,q,y,function(){B.revertToCheckpoint(L.uuid)},L,X,G,A,f,I,O=>q(O.qualifiedPathName),O=>y(O.qualifiedPathName),function(O){D=O,n(3,D)},()=>n(0,z=!0)]}class Bi extends Z{constructor(e){super(),j(this,e,Wo,jo,W,{turn:19},null,[-1,-1])}}const Mt={[Ve.SUCCESS]:"success",[Ve.FAILED]:"error",[Ve.SKIPPED]:"skipped"},At={[pe.success]:"success",[pe.failure]:"error",[pe.running]:null,[pe.unknown]:"unknown",[pe.skipped]:"skipped"};function Lt(o){return o in Mt?Mt[o]:o in At?At[o]:null}function Ft(o){switch(o){case"success":return"Success";case"error":return"Failed";case"skipped":return"Skipped";case"unknown":return"Unknown";case null:return"Running"}}function qt(o){let e,n,t;return n=new ee({props:{size:1,type:"monospace",$$slots:{default:[Ko]},$$scope:{ctx:o}}}),{c(){e=M("div"),C(n.$$.fragment),x(e,"class","c-command-output__code-block svelte-1t0700a")},m(s,r){v(s,e,r),_(n,e,null),t=!0},p(s,r){const i={};16386&r&&(i.$$scope={dirty:r,ctx:s}),n.$set(i)},i(s){t||($(n.$$.fragment,s),t=!0)},o(s){p(n.$$.fragment,s),t=!1},d(s){s&&h(e),k(n)}}}function Ko(o){let e;return{c(){e=F(o[1])},m(n,t){v(n,e,t)},p(n,t){2&t&&K(e,n[1])},d(n){n&&h(e)}}}function zt(o){let e,n,t,s;const r=[Xo,Yo],i=[];function c(a,l){return a[5]?0:1}return n=c(o),t=i[n]=r[n](o),{c(){e=M("div"),t.c(),x(e,"class","c-command-output__code-block c-command-output__code-block--output svelte-1t0700a")},m(a,l){v(a,e,l),i[n].m(e,null),s=!0},p(a,l){let u=n;n=c(a),n===u?i[n].p(a,l):(N(),p(i[u],1,1,()=>{i[u]=null}),H(),t=i[n],t?t.p(a,l):(t=i[n]=r[n](a),t.c()),$(t,1),t.m(e,null))},i(a){s||($(t),s=!0)},o(a){p(t),s=!1},d(a){a&&h(e),i[n].d()}}}function Yo(o){let e,n;return e=new ee({props:{size:1,type:"monospace",$$slots:{default:[Qo]},$$scope:{ctx:o}}}),{c(){C(e.$$.fragment)},m(t,s){_(e,t,s),n=!0},p(t,s){const r={};16388&s&&(r.$$scope={dirty:s,ctx:t}),e.$set(r)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){p(e.$$.fragment,t),n=!1},d(t){k(e,t)}}}function Xo(o){let e,n;return e=new rs.Root({props:{$$slots:{default:[er]},$$scope:{ctx:o}}}),{c(){C(e.$$.fragment)},m(t,s){_(e,t,s),n=!0},p(t,s){const r={};16452&s&&(r.$$scope={dirty:s,ctx:t}),e.$set(r)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){p(e.$$.fragment,t),n=!1},d(t){k(e,t)}}}function Qo(o){let e;return{c(){e=F(o[2])},m(n,t){v(n,e,t)},p(n,t){4&t&&K(e,n[2])},d(n){n&&h(e)}}}function er(o){let e,n;return e=new is({props:{text:o[2],lang:o[6]}}),{c(){C(e.$$.fragment)},m(t,s){_(e,t,s),n=!0},p(t,s){const r={};4&s&&(r.text=t[2]),64&s&&(r.lang=t[6]),e.$set(r)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){p(e.$$.fragment,t),n=!1},d(t){k(e,t)}}}function tr(o){let e,n,t,s,r=o[1]&&!o[0]&&qt(o),i=o[2]&&(!o[3]||o[3]!=="skipped")&&zt(o);const c=o[12].default,a=ye(c,o,o[14],null);return{c(){e=M("div"),r&&r.c(),n=P(),i&&i.c(),t=P(),a&&a.c(),x(e,"class","c-command-output__command-details")},m(l,u){v(l,e,u),r&&r.m(e,null),R(e,n),i&&i.m(e,null),R(e,t),a&&a.m(e,null),s=!0},p(l,u){l[1]&&!l[0]?r?(r.p(l,u),3&u&&$(r,1)):(r=qt(l),r.c(),$(r,1),r.m(e,n)):r&&(N(),p(r,1,1,()=>{r=null}),H()),!l[2]||l[3]&&l[3]==="skipped"?i&&(N(),p(i,1,1,()=>{i=null}),H()):i?(i.p(l,u),12&u&&$(i,1)):(i=zt(l),i.c(),$(i,1),i.m(e,t)),a&&a.p&&(!s||16384&u)&&Ce(a,c,l,l[14],s?ke(c,l[14],u,null):_e(l[14]),null)},i(l){s||($(r),$(i),$(a,l),s=!0)},o(l){p(r),p(i),p(a,l),s=!1},d(l){l&&h(e),r&&r.d(),i&&i.d(),a&&a.d(l)}}}function nr(o){let e;return{c(){e=M("div"),x(e,"class","c-command-output__collapsible-header__spacer svelte-1t0700a")},m(n,t){v(n,e,t)},i:U,o:U,d(n){n&&h(e)}}}function sr(o){let e,n;return e=new on({}),{c(){C(e.$$.fragment)},m(t,s){_(e,t,s),n=!0},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){p(e.$$.fragment,t),n=!1},d(t){k(e,t)}}}function or(o){let e,n;return e=new ee({props:{size:1,type:"monospace",$$slots:{default:[ir]},$$scope:{ctx:o}}}),{c(){C(e.$$.fragment)},m(t,s){_(e,t,s),n=!0},p(t,s){const r={};16386&s&&(r.$$scope={dirty:s,ctx:t}),e.$set(r)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){p(e.$$.fragment,t),n=!1},d(t){k(e,t)}}}function rr(o){let e,n;return e=new ee({props:{size:1,weight:"medium",$$slots:{default:[cr]},$$scope:{ctx:o}}}),{c(){C(e.$$.fragment)},m(t,s){_(e,t,s),n=!0},p(t,s){const r={};16385&s&&(r.$$scope={dirty:s,ctx:t}),e.$set(r)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){p(e.$$.fragment,t),n=!1},d(t){k(e,t)}}}function ir(o){let e;return{c(){e=F(o[1])},m(n,t){v(n,e,t)},p(n,t){2&t&&K(e,n[1])},d(n){n&&h(e)}}}function cr(o){let e;return{c(){e=F(o[0])},m(n,t){v(n,e,t)},p(n,t){1&t&&K(e,n[0])},d(n){n&&h(e)}}}function ar(o){let e,n,t,s=o[3]==="skipped"&&Pt(o);return n=new Ie({props:{content:Ft(o[3]),triggerOn:[He.Hover],$$slots:{default:[dr]},$$scope:{ctx:o}}}),{c(){s&&s.c(),e=P(),C(n.$$.fragment)},m(r,i){s&&s.m(r,i),v(r,e,i),_(n,r,i),t=!0},p(r,i){r[3]==="skipped"?s?8&i&&$(s,1):(s=Pt(r),s.c(),$(s,1),s.m(e.parentNode,e)):s&&(N(),p(s,1,1,()=>{s=null}),H());const c={};8&i&&(c.content=Ft(r[3])),16392&i&&(c.$$scope={dirty:i,ctx:r}),n.$set(c)},i(r){t||($(s),$(n.$$.fragment,r),t=!0)},o(r){p(s),p(n.$$.fragment,r),t=!1},d(r){r&&h(e),s&&s.d(r),k(n,r)}}}function lr(o){let e,n,t;return n=new he({props:{size:1}}),{c(){e=M("div"),C(n.$$.fragment),x(e,"class","c-command-output__status-icon c-command-output__status-icon--loading svelte-1t0700a")},m(s,r){v(s,e,r),_(n,e,null),t=!0},p:U,i(s){t||($(n.$$.fragment,s),t=!0)},o(s){p(n.$$.fragment,s),t=!1},d(s){s&&h(e),k(n)}}}function Pt(o){let e,n;return e=new ee({props:{size:1,$$slots:{default:[ur]},$$scope:{ctx:o}}}),{c(){C(e.$$.fragment)},m(t,s){_(e,t,s),n=!0},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){p(e.$$.fragment,t),n=!1},d(t){k(e,t)}}}function ur(o){let e;return{c(){e=F("Skipped")},m(n,t){v(n,e,t)},d(n){n&&h(e)}}}function dr(o){let e,n,t;var s=o[11](o[3]);return s&&(n=st(s,{})),{c(){e=M("div"),n&&C(n.$$.fragment),x(e,"class","c-command-output__status-icon svelte-1t0700a"),V(e,"c-command-output__status-icon--success",o[3]==="success"),V(e,"c-command-output__status-icon--error",o[3]==="error"),V(e,"c-command-output__status-icon--warning",o[3]==="skipped")},m(r,i){v(r,e,i),n&&_(n,e,null),t=!0},p(r,i){if(8&i&&s!==(s=r[11](r[3]))){if(n){N();const c=n;p(c.$$.fragment,1,0,()=>{k(c,1)}),H()}s?(n=st(s,{}),C(n.$$.fragment),$(n.$$.fragment,1),_(n,e,null)):n=null}(!t||8&i)&&V(e,"c-command-output__status-icon--success",r[3]==="success"),(!t||8&i)&&V(e,"c-command-output__status-icon--error",r[3]==="error"),(!t||8&i)&&V(e,"c-command-output__status-icon--warning",r[3]==="skipped")},i(r){t||(n&&$(n.$$.fragment,r),t=!0)},o(r){n&&p(n.$$.fragment,r),t=!1},d(r){r&&h(e),n&&k(n)}}}function Bt(o){let e,n;return e=new Ie({props:{content:o[7],align:"end",$$slots:{default:[mr]},$$scope:{ctx:o}}}),{c(){C(e.$$.fragment)},m(t,s){_(e,t,s),n=!0},p(t,s){const r={};128&s&&(r.content=t[7]),17412&s&&(r.$$scope={dirty:s,ctx:t}),e.$set(r)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){p(e.$$.fragment,t),n=!1},d(t){k(e,t)}}}function $r(o){let e,n;return e=new ss({}),{c(){C(e.$$.fragment)},m(t,s){_(e,t,s),n=!0},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){p(e.$$.fragment,t),n=!1},d(t){k(e,t)}}}function mr(o){let e,n;return e=new ve({props:{variant:"ghost-block",color:"neutral",size:1,$$slots:{default:[$r]},$$scope:{ctx:o}}}),e.$on("click",o[13]),{c(){C(e.$$.fragment)},m(t,s){_(e,t,s),n=!0},p(t,s){const r={};16384&s&&(r.$$scope={dirty:s,ctx:t}),e.$set(r)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){p(e.$$.fragment,t),n=!1},d(t){k(e,t)}}}function pr(o){let e,n,t,s,r,i,c,a,l,u,d,m;const g=[sr,nr],w=[];function A(S,D){return S[8]&&S[3]!=="skipped"?0:1}n=A(o),t=w[n]=g[n](o);const f=[rr,or],I=[];function L(S,D){return S[0]?0:1}r=L(o),i=I[r]=f[r](o);const B=[lr,ar],E=[];function J(S,D){return S[9]?0:S[3]!==null?1:-1}~(l=J(o))&&(u=E[l]=B[l](o));let T=o[2]&&(!o[3]||o[3]!=="skipped")&&!o[9]&&Bt(o);return{c(){e=M("div"),t.c(),s=P(),i.c(),c=P(),a=M("div"),u&&u.c(),d=P(),T&&T.c(),x(a,"class","c-command-output__status-indicator svelte-1t0700a"),x(e,"slot","header"),x(e,"class","c-command-output__collapsible-header svelte-1t0700a")},m(S,D){v(S,e,D),w[n].m(e,null),R(e,s),I[r].m(e,null),R(e,c),R(e,a),~l&&E[l].m(a,null),R(a,d),T&&T.m(a,null),m=!0},p(S,D){let q=n;n=A(S),n!==q&&(N(),p(w[q],1,1,()=>{w[q]=null}),H(),t=w[n],t||(t=w[n]=g[n](S),t.c()),$(t,1),t.m(e,s));let y=r;r=L(S),r===y?I[r].p(S,D):(N(),p(I[y],1,1,()=>{I[y]=null}),H(),i=I[r],i?i.p(S,D):(i=I[r]=f[r](S),i.c()),$(i,1),i.m(e,c));let X=l;l=J(S),l===X?~l&&E[l].p(S,D):(u&&(N(),p(E[X],1,1,()=>{E[X]=null}),H()),~l?(u=E[l],u?u.p(S,D):(u=E[l]=B[l](S),u.c()),$(u,1),u.m(a,d)):u=null),!S[2]||S[3]&&S[3]==="skipped"||S[9]?T&&(N(),p(T,1,1,()=>{T=null}),H()):T?(T.p(S,D),524&D&&$(T,1)):(T=Bt(S),T.c(),$(T,1),T.m(a,null))},i(S){m||($(t),$(i),$(u),$(T),m=!0)},o(S){p(t),p(i),p(u),p(T),m=!1},d(S){S&&h(e),w[n].d(),I[r].d(),~l&&E[l].d(),T&&T.d()}}}function gr(o){let e,n,t;return n=new rn({props:{collapsed:o[4],$$slots:{header:[pr],default:[tr]},$$scope:{ctx:o}}}),{c(){e=M("div"),C(n.$$.fragment),x(e,"class","c-command-output__container svelte-1t0700a")},m(s,r){v(s,e,r),_(n,e,null),t=!0},p(s,[r]){const i={};16&r&&(i.collapsed=s[4]),18415&r&&(i.$$scope={dirty:r,ctx:s}),n.$set(i)},i(s){t||($(n.$$.fragment,s),t=!0)},o(s){p(n.$$.fragment,s),t=!1},d(s){s&&h(e),k(n)}}}function fr(o,e,n){let{$$slots:t={},$$scope:s}=e,{title:r=""}=e,{command:i=""}=e,{output:c=null}=e,{status:a=null}=e,{collapsed:l=!1}=e,{useMonaco:u=!1}=e,{monacoLang:d="bash"}=e,{viewButtonTooltip:m="View full output in editor"}=e,{showCollapseButton:g=!0}=e,{isLoading:w=!1}=e,{onViewOutput:A}=e;return o.$$set=f=>{"title"in f&&n(0,r=f.title),"command"in f&&n(1,i=f.command),"output"in f&&n(2,c=f.output),"status"in f&&n(3,a=f.status),"collapsed"in f&&n(4,l=f.collapsed),"useMonaco"in f&&n(5,u=f.useMonaco),"monacoLang"in f&&n(6,d=f.monacoLang),"viewButtonTooltip"in f&&n(7,m=f.viewButtonTooltip),"showCollapseButton"in f&&n(8,g=f.showCollapseButton),"isLoading"in f&&n(9,w=f.isLoading),"onViewOutput"in f&&n(10,A=f.onViewOutput),"$$scope"in f&&n(14,s=f.$$scope)},[r,i,c,a,l,u,d,m,g,w,A,function(f){return f==="success"||f==="skipped"?tn:Jn},t,f=>A(f,c),s]}class hr extends Z{constructor(e){super(),j(this,e,fr,gr,W,{title:0,command:1,output:2,status:3,collapsed:4,useMonaco:5,monacoLang:6,viewButtonTooltip:7,showCollapseButton:8,isLoading:9,onViewOutput:10})}}function Nt(o,e,n){const t=o.slice();return t[15]=e[n],t}function vr(o){let e,n,t,s,r;return n=new ee({props:{size:1,color:"secondary",$$slots:{default:[xr]},$$scope:{ctx:o}}}),s=new he({props:{size:1}}),{c(){e=M("div"),C(n.$$.fragment),t=P(),C(s.$$.fragment),x(e,"class","c-agent-no-setup-logs svelte-12293rd")},m(i,c){v(i,e,c),_(n,e,null),R(e,t),_(s,e,null),r=!0},p(i,c){const a={};262144&c&&(a.$$scope={dirty:c,ctx:i}),n.$set(a)},i(i){r||($(n.$$.fragment,i),$(s.$$.fragment,i),r=!0)},o(i){p(n.$$.fragment,i),p(s.$$.fragment,i),r=!1},d(i){i&&h(e),k(n),k(s)}}}function wr(o){let e,n,t,s,r,i,c,a,l,u,d,m,g,w,A,f,I,L;r=new ve({props:{variant:"ghost",color:"neutral",size:1,class:"c-agent-setup-logs-toggle-button "+(o[2]?"c-agent-setup-logs-toggle-button--expanded":""),$$slots:{default:[yr]},$$scope:{ctx:o}}}),r.$on("click",o[7]);const B=[_r,Cr],E=[];function J(z,G){return z[0]?0:1}c=J(o),a=E[c]=B[c](o);const T=[Sr,Ir],S=[];function D(z,G){return z[0]?0:1}d=D(o),m=S[d]=T[d](o);let q=Fe(o[3].steps),y=[];for(let z=0;z<q.length;z+=1)y[z]=Ht(Nt(o,q,z));const X=z=>p(y[z],1,1,()=>{y[z]=null});return{c(){e=M("div"),n=M("div"),t=M("div"),s=M("div"),C(r.$$.fragment),i=P(),a.c(),l=P(),u=M("div"),m.c(),g=P(),w=M("div"),A=M("div");for(let z=0;z<y.length;z+=1)y[z].c();x(s,"class","c-agent-setup-logs-summary-left svelte-12293rd"),x(u,"class","c-agent-setup-logs-summary-icon svelte-12293rd"),x(t,"class","c-agent-setup-logs-summary-content svelte-12293rd"),x(n,"class","c-agent-setup-logs-summary svelte-12293rd"),x(n,"role","button"),x(n,"tabindex","0"),x(n,"aria-expanded",o[2]),x(n,"aria-controls","agent-setup-logs-details"),x(A,"class","c-agent-setup-logs svelte-12293rd"),x(w,"class","c-agent-setup-logs-wrapper svelte-12293rd"),V(w,"is-hidden",!o[2]),x(e,"class","c-agent-setup-logs-container svelte-12293rd"),V(e,"c-agent-setup-logs-container--loading",!o[0])},m(z,G){v(z,e,G),R(e,n),R(n,t),R(t,s),_(r,s,null),R(s,i),E[c].m(s,null),R(t,l),R(t,u),S[d].m(u,null),R(e,g),R(e,w),R(w,A);for(let O=0;O<y.length;O+=1)y[O]&&y[O].m(A,null);o[13](e),f=!0,I||(L=[ne(n,"click",o[6]),ne(n,"keydown",o[8])],I=!0)},p(z,G){const O={};4&G&&(O.class="c-agent-setup-logs-toggle-button "+(z[2]?"c-agent-setup-logs-toggle-button--expanded":"")),262144&G&&(O.$$scope={dirty:G,ctx:z}),r.$set(O);let $e=c;c=J(z),c!==$e&&(N(),p(E[$e],1,1,()=>{E[$e]=null}),H(),a=E[c],a||(a=E[c]=B[c](z),a.c()),$(a,1),a.m(s,null));let se=d;if(d=D(z),d!==se&&(N(),p(S[se],1,1,()=>{S[se]=null}),H(),m=S[d],m||(m=S[d]=T[d](z),m.c()),$(m,1),m.m(u,null)),(!f||4&G)&&x(n,"aria-expanded",z[2]),552&G){let b;for(q=Fe(z[3].steps),b=0;b<q.length;b+=1){const ce=Nt(z,q,b);y[b]?(y[b].p(ce,G),$(y[b],1)):(y[b]=Ht(ce),y[b].c(),$(y[b],1),y[b].m(A,null))}for(N(),b=q.length;b<y.length;b+=1)X(b);H()}(!f||4&G)&&V(w,"is-hidden",!z[2]),(!f||1&G)&&V(e,"c-agent-setup-logs-container--loading",!z[0])},i(z){if(!f){$(r.$$.fragment,z),$(a),$(m);for(let G=0;G<q.length;G+=1)$(y[G]);f=!0}},o(z){p(r.$$.fragment,z),p(a),p(m),y=y.filter(Boolean);for(let G=0;G<y.length;G+=1)p(y[G]);f=!1},d(z){z&&h(e),k(r),E[c].d(),S[d].d(),Xt(y,z),o[13](null),I=!1,ze(L)}}}function xr(o){let e;return{c(){e=F("Waiting to start agent environment...")},m(n,t){v(n,e,t)},d(n){n&&h(e)}}}function yr(o){let e,n;return e=new cs({}),{c(){C(e.$$.fragment)},m(t,s){_(e,t,s),n=!0},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){p(e.$$.fragment,t),n=!1},d(t){k(e,t)}}}function Cr(o){let e,n;return e=new ee({props:{size:1,class:"c-agent-setup-logs-summary-text",$$slots:{default:[kr]},$$scope:{ctx:o}}}),{c(){C(e.$$.fragment)},m(t,s){_(e,t,s),n=!0},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){p(e.$$.fragment,t),n=!1},d(t){k(e,t)}}}function _r(o){let e,n;return e=new ee({props:{size:1,class:"c-agent-setup-logs-summary-text",$$slots:{default:[br]},$$scope:{ctx:o}}}),{c(){C(e.$$.fragment)},m(t,s){_(e,t,s),n=!0},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){p(e.$$.fragment,t),n=!1},d(t){k(e,t)}}}function kr(o){let e;return{c(){e=F("Environment is being created...")},m(n,t){v(n,e,t)},d(n){n&&h(e)}}}function br(o){let e;return{c(){e=F("Environment created")},m(n,t){v(n,e,t)},d(n){n&&h(e)}}}function Ir(o){let e,n;return e=new he({props:{size:1}}),{c(){C(e.$$.fragment)},m(t,s){_(e,t,s),n=!0},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){p(e.$$.fragment,t),n=!1},d(t){k(e,t)}}}function Sr(o){let e,n;return e=new tn({}),{c(){C(e.$$.fragment)},m(t,s){_(e,t,s),n=!0},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){p(e.$$.fragment,t),n=!1},d(t){k(e,t)}}}function Ht(o){let e,n;return e=new hr({props:{title:o[15].step_description,output:o[15].logs,status:Lt(o[15].status),isLoading:o[9](o[15].status),collapsed:!o[9](o[15].status),showCollapseButton:!!o[15].logs,viewButtonTooltip:"View full output in editor",onViewOutput:o[12]}}),{c(){C(e.$$.fragment)},m(t,s){_(e,t,s),n=!0},p(t,s){const r={};8&s&&(r.title=t[15].step_description),8&s&&(r.output=t[15].logs),8&s&&(r.status=Lt(t[15].status)),8&s&&(r.isLoading=t[9](t[15].status)),8&s&&(r.collapsed=!t[9](t[15].status)),8&s&&(r.showCollapseButton=!!t[15].logs),e.$set(r)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){p(e.$$.fragment,t),n=!1},d(t){k(e,t)}}}function Tr(o){let e,n,t,s;const r=[wr,vr],i=[];function c(a,l){return a[3]&&a[3].steps&&a[3].steps.length>0?0:1}return e=c(o),n=i[e]=r[e](o),{c(){n.c(),t=Q()},m(a,l){i[e].m(a,l),v(a,t,l),s=!0},p(a,[l]){let u=e;e=c(a),e===u?i[e].p(a,l):(N(),p(i[u],1,1,()=>{i[u]=null}),H(),n=i[e],n?n.p(a,l):(n=i[e]=r[e](a),n.c()),$(n,1),n.m(t.parentNode,t))},i(a){s||($(n),s=!0)},o(a){p(n),s=!1},d(a){a&&h(t),i[e].d(a)}}}function Rr(o,e,n){let t,s,r,i,c;const a=ie(qe.key);le(o,a,g=>n(11,i=g));const l=ie("chatModel");let u=!1;function d(g){g&&l&&l.extensionClient.openScratchFile(g,"plaintext")}function m(){n(2,u=!u)}return o.$$.update=()=>{var g;2048&o.$$.dirty&&n(10,t=((g=i==null?void 0:i.currentAgent)==null?void 0:g.status)||Se.agentUnspecified),1024&o.$$.dirty&&n(0,s=[Se.agentIdle,Se.agentRunning,Se.agentFailed].includes(t)),2048&o.$$.dirty&&n(3,r=i==null?void 0:i.agentSetupLogs),1&o.$$.dirty&&n(2,u=!s)},[s,c,u,r,a,d,m,function(g){g.stopPropagation(),m()},function(g){g.key!=="Enter"&&g.key!==" "||(g.preventDefault(),m())},function(g){return g===pe.running&&!s},t,i,(g,w)=>d(w),function(g){re[g?"unshift":"push"](()=>{c=g,n(1,c)})}]}class Ni extends Z{constructor(e){super(),j(this,e,Rr,Tr,W,{})}}function Er(o){let e;const n=o[3].default,t=ye(n,o,o[4],null);return{c(){t&&t.c()},m(s,r){t&&t.m(s,r),e=!0},p(s,r){t&&t.p&&(!e||16&r)&&Ce(t,n,s,s[4],e?ke(n,s[4],r,null):_e(s[4]),null)},i(s){e||($(t,s),e=!0)},o(s){p(t,s),e=!1},d(s){t&&t.d(s)}}}function Mr(o){let e,n;return e=new Un({props:{class:"c-chat-floating-container c-chat-floating-container--"+o[0],xPos:o[1],yPos:o[2],$$slots:{default:[Er]},$$scope:{ctx:o}}}),{c(){C(e.$$.fragment)},m(t,s){_(e,t,s),n=!0},p(t,[s]){const r={};1&s&&(r.class="c-chat-floating-container c-chat-floating-container--"+t[0]),2&s&&(r.xPos=t[1]),4&s&&(r.yPos=t[2]),16&s&&(r.$$scope={dirty:s,ctx:t}),e.$set(r)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){p(e.$$.fragment,t),n=!1},d(t){k(e,t)}}}function Ar(o,e,n){let{$$slots:t={},$$scope:s}=e,{position:r="bottom"}=e,{xPos:i="middle"}=e,{yPos:c=r==="top"?"top":"bottom"}=e;return o.$$set=a=>{"position"in a&&n(0,r=a.position),"xPos"in a&&n(1,i=a.xPos),"yPos"in a&&n(2,c=a.yPos),"$$scope"in a&&n(4,s=a.$$scope)},[r,i,c,t,s]}class Lr extends Z{constructor(e){super(),j(this,e,Ar,Mr,W,{position:0,xPos:1,yPos:2})}}function Fr(o){let e,n,t=[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 384 512"},o[0]],s={};for(let r=0;r<t.length;r+=1)s=xe(s,t[r]);return{c(){e=me("svg"),n=new En(!0),this.h()},l(r){e=Mn(r,"svg",{xmlns:!0,"data-ds-icon":!0,viewBox:!0});var i=An(e);n=Ln(i,!0),i.forEach(h),this.h()},h(){n.a=null,ot(e,s)},m(r,i){Fn(r,e,i),n.m('<!--! Font Awesome Pro 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2024 Fonticons, Inc.--><path d="M174.6 472.6c4.5 4.7 10.8 7.4 17.4 7.4s12.8-2.7 17.4-7.4l168-176c9.2-9.6 8.8-24.8-.8-33.9s-24.8-8.8-33.9.8L216 396.1V56c0-13.3-10.7-24-24-24s-24 10.7-24 24v340.1L41.4 263.4c-9.2-9.6-24.3-9.9-33.9-.8s-9.9 24.3-.8 33.9l168 176z"/>',e)},p(r,[i]){ot(e,s=Ze(t,[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 384 512"},1&i&&r[0]]))},i:U,o:U,d(r){r&&h(e)}}}function qr(o,e,n){return o.$$set=t=>{n(0,e=xe(xe({},e),rt(t)))},[e=rt(e)]}class zr extends Z{constructor(e){super(),j(this,e,qr,Fr,W,{})}}function Dt(o){let e,n,t,s,r,i;return t=new ve({props:{class:"c-chat-floating-button",variant:"outline",color:"neutral",size:1,radius:"full",$$slots:{default:[Pr]},$$scope:{ctx:o}}}),t.$on("click",o[1]),{c(){e=M("div"),n=M("div"),C(t.$$.fragment),x(e,"class","c-msg-list-bottom-button svelte-1eg3it6")},m(c,a){v(c,e,a),R(e,n),_(t,n,null),i=!0},p(c,a){const l={};8&a&&(l.$$scope={dirty:a,ctx:c}),t.$set(l)},i(c){i||($(t.$$.fragment,c),c&&it(()=>{i&&(s||(s=Te(n,Re,{duration:150},!0)),s.run(1))}),c&&it(()=>{i&&(r||(r=Te(e,Re,{duration:150},!0)),r.run(1))}),i=!0)},o(c){p(t.$$.fragment,c),c&&(s||(s=Te(n,Re,{duration:150},!1)),s.run(0)),c&&(r||(r=Te(e,Re,{duration:150},!1)),r.run(0)),i=!1},d(c){c&&h(e),k(t),c&&s&&s.end(),c&&r&&r.end()}}}function Pr(o){let e,n;return e=new zr({}),{c(){C(e.$$.fragment)},m(t,s){_(e,t,s),n=!0},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){p(e.$$.fragment,t),n=!1},d(t){k(e,t)}}}function Br(o){let e,n,t=o[0]&&Dt(o);return{c(){t&&t.c(),e=Q()},m(s,r){t&&t.m(s,r),v(s,e,r),n=!0},p(s,r){s[0]?t?(t.p(s,r),1&r&&$(t,1)):(t=Dt(s),t.c(),$(t,1),t.m(e.parentNode,e)):t&&(N(),p(t,1,1,()=>{t=null}),H())},i(s){n||($(t),n=!0)},o(s){p(t),n=!1},d(s){s&&h(e),t&&t.d(s)}}}function Nr(o){let e,n;return e=new Lr({props:{position:"bottom",$$slots:{default:[Br]},$$scope:{ctx:o}}}),{c(){C(e.$$.fragment)},m(t,s){_(e,t,s),n=!0},p(t,[s]){const r={};9&s&&(r.$$scope={dirty:s,ctx:t}),e.$set(r)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){p(e.$$.fragment,t),n=!1},d(t){k(e,t)}}}function Hr(o,e,n){let{showScrollDown:t=!1}=e,{messageListElement:s=null}=e;return o.$$set=r=>{"showScrollDown"in r&&n(0,t=r.showScrollDown),"messageListElement"in r&&n(2,s=r.messageListElement)},[t,()=>{s&&en(s,{smooth:!0})},s]}class Hi extends Z{constructor(e){super(),j(this,e,Hr,Nr,W,{showScrollDown:0,messageListElement:2})}}function Dr(o){let e;return{c(){e=M("div"),e.innerHTML='<span class="c-paused-remote-agent__text svelte-av8nea">This agent is paused and will resume when you send a new message</span>',x(e,"class","c-paused-remote-agent svelte-av8nea")},m(n,t){v(n,e,t)},p:U,i:U,o:U,d(n){n&&h(e)}}}class Di extends Z{constructor(e){super(),j(this,e,null,Dr,W,{})}}function Ot(o){let e,n;return{c(){e=F("Retrying in "),n=F(o[3])},m(t,s){v(t,e,s),v(t,n,s)},p(t,s){8&s&&K(n,t[3])},d(t){t&&(h(e),h(n))}}}function Ut(o){let e,n;return e=new Oe({props:{class:"c-remote-agent-error__button c-remote-agent-error__button--retry",variant:"soft",color:"neutral",size:1,$$slots:{default:[Or]},$$scope:{ctx:o}}}),e.$on("click",o[11]),{c(){C(e.$$.fragment)},m(t,s){_(e,t,s),n=!0},p(t,s){const r={};32832&s&&(r.$$scope={dirty:s,ctx:t}),e.$set(r)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){p(e.$$.fragment,t),n=!1},d(t){k(e,t)}}}function Or(o){let e,n,t=o[6]?" now":"";return{c(){e=F("Retry"),n=F(t)},m(s,r){v(s,e,r),v(s,n,r)},p(s,r){64&r&&t!==(t=s[6]?" now":"")&&K(n,t)},d(s){s&&(h(e),h(n))}}}function Vt(o){let e,n;return e=new Oe({props:{class:"c-remote-agent-error__button c-remote-agent-error__button--delete",variant:"soft",color:"error",size:1,$$slots:{default:[Ur]},$$scope:{ctx:o}}}),e.$on("click",o[12]),{c(){C(e.$$.fragment)},m(t,s){_(e,t,s),n=!0},p(t,s){const r={};32768&s&&(r.$$scope={dirty:s,ctx:t}),e.$set(r)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){p(e.$$.fragment,t),n=!1},d(t){k(e,t)}}}function Ur(o){let e;return{c(){e=F("Delete Agent")},m(n,t){v(n,e,t)},d(n){n&&h(e)}}}function Vr(o){let e,n,t,s,r,i,c,a,l,u=o[6]&&o[3]&&Ot(o),d=o[4]&&Ut(o),m=o[5]&&Vt(o);return{c(){e=M("div"),n=M("div"),t=M("span"),s=F(o[7]),r=P(),u&&u.c(),i=P(),c=M("div"),d&&d.c(),a=P(),m&&m.c(),x(t,"class","c-remote-agent-error__message svelte-14lhvr1"),x(c,"class","c-remote-agent-error__actions"),x(n,"class","c-remote-agent-error__content svelte-14lhvr1"),x(e,"class","c-remote-agent-error svelte-14lhvr1"),V(e,"c-remote-agent-error--unrecoverable",o[2])},m(g,w){v(g,e,w),R(e,n),R(n,t),R(t,s),R(t,r),u&&u.m(t,null),R(n,i),R(n,c),d&&d.m(c,null),R(c,a),m&&m.m(c,null),l=!0},p(g,[w]){(!l||128&w)&&K(s,g[7]),g[6]&&g[3]?u?u.p(g,w):(u=Ot(g),u.c(),u.m(t,null)):u&&(u.d(1),u=null),g[4]?d?(d.p(g,w),16&w&&$(d,1)):(d=Ut(g),d.c(),$(d,1),d.m(c,a)):d&&(N(),p(d,1,1,()=>{d=null}),H()),g[5]?m?(m.p(g,w),32&w&&$(m,1)):(m=Vt(g),m.c(),$(m,1),m.m(c,null)):m&&(N(),p(m,1,1,()=>{m=null}),H()),(!l||4&w)&&V(e,"c-remote-agent-error--unrecoverable",g[2])},i(g){l||($(d),$(m),l=!0)},o(g){p(d),p(m),l=!1},d(g){g&&h(e),u&&u.d(),d&&d.d(),m&&m.d()}}}function Jr(o,e,n){let t,s,r,i,c,a,l,u,d,{error:m}=e,{onRetry:g}=e,{onDelete:w}=e;function A(){d&&(d(),d=void 0),i&&(d=as(i,f=>{n(3,u=f)}))}return fe(A),Kt(()=>{d==null||d()}),o.$$set=f=>{"error"in f&&n(8,m=f.error),"onRetry"in f&&n(0,g=f.onRetry),"onDelete"in f&&n(1,w=f.onDelete)},o.$$.update=()=>{256&o.$$.dirty&&n(10,t="type"in m),1280&o.$$.dirty&&n(2,s=t&&m.type===Zt.agentFailed),256&o.$$.dirty&&n(7,r=m.errorMessage),1280&o.$$.dirty&&n(9,i=t?void 0:m.retryAt),512&o.$$.dirty&&n(6,c=i!==void 0),6&o.$$.dirty&&n(5,a=s&&w),1&o.$$.dirty&&n(4,l=g),512&o.$$.dirty&&i&&A()},[g,w,s,u,l,a,c,r,m,i,t,f=>{f.preventDefault(),g==null||g()},f=>{f.preventDefault(),w==null||w()}]}class Oi extends Z{constructor(e){super(),j(this,e,Jr,Vr,W,{error:8,onRetry:0,onDelete:1})}}export{Ni as A,Ei as C,Ai as E,Gs as G,Hi as M,Di as P,Oi as R,zi as S,Ms as U,Ti as a,Mi as b,Ri as c,Li as d,yi as e,Fi as f,_i as g,qi as h,ki as i,no as j,Pi as k,Bi as l,lt as m,Ii as n,Ci as o,bi as p,Si as t};
