!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("babylonjs")):"function"==typeof define&&define.amd?define("babylonjs-serializers",["babylonjs"],t):"object"==typeof exports?exports["babylonjs-serializers"]=t(require("babylonjs")):e.SERIALIZERS=t(e.BABYLON)}("undefined"!=typeof self?self:"undefined"!=typeof global?global:this,(e=>(()=>{"use strict";var t={597:t=>{t.exports=e}},r={};function o(e){var i=r[e];if(void 0!==i)return i.exports;var n=r[e]={exports:{}};return t[e](n,n.exports,o),n.exports}o.d=(e,t)=>{for(var r in t)o.o(t,r)&&!o.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},o.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var i={};o.d(i,{default:()=>f});var n={};o.r(n),o.d(n,{OBJExport:()=>u});var a={};o.r(a),o.d(a,{OBJExport:()=>u});var s=o(597),u=function(){function e(){}return e.OBJ=function(e,t,r,o){var i=[],n=1,a=1;t&&(r||(r="mat"),i.push("mtllib "+r+".mtl"));for(var u=0;u<e.length;u++){var l=e[u],p=l.name||"mesh".concat(u,"}");i.push("o ".concat(p));var f=null;if(o){var d=l.computeWorldMatrix(!0);f=new s.Matrix,d.invertToRef(f),l.bakeTransformIntoVertices(d)}if(t){var m=l.material;m&&i.push("usemtl "+m.id)}var c=l.geometry;if(c){var h=c.getVerticesData("position"),b=c.getVerticesData("normal"),g=c.getVerticesData("uv"),v=c.getIndices(),x=0,y=0;if(h&&v){for(var T=e[0].getScene().useRightHandedSystem?1:-1,S=0;S<h.length;S+=3)i.push("v "+h[S]*T+" "+h[S+1]+" "+h[S+2]),x++;if(null!=b)for(S=0;S<b.length;S+=3)i.push("vn "+b[S]*T+" "+b[S+1]+" "+b[S+2]);if(null!=g)for(S=0;S<g.length;S+=2)i.push("vt "+g[S]+" "+g[S+1]),y++;var j=["","",""],F=(l.material||l.getScene().defaultMaterial)._getEffectiveOrientation(l)===s.Material.ClockWiseSideOrientation?[2,1]:[1,2],w=F[0],C=F[1];for(S=0;S<v.length;S+=3){var O=[String(v[S]+n),String(v[S+w]+n),String(v[S+C]+n)],_=[String(v[S]+a),String(v[S+w]+a),String(v[S+C]+a)],B=O,K=null!=g?_:j,M=null!=b?O:j;i.push("f "+B[0]+"/"+K[0]+"/"+M[0]+" "+B[1]+"/"+K[1]+"/"+M[1]+" "+B[2]+"/"+K[2]+"/"+M[2])}o&&f&&l.bakeTransformIntoVertices(f),n+=x,a+=y}else s.Tools.Warn("There are no position vertices or indices on the mesh!")}else s.Tools.Warn("No geometry is present on the mesh")}return i.join("\n")},e.MTL=function(e){var t=[],r=e.material;return t.push("newmtl mat1"),t.push("  Ns "+r.specularPower.toFixed(4)),t.push("  Ni 1.5000"),t.push("  d "+r.alpha.toFixed(4)),t.push("  Tr 0.0000"),t.push("  Tf 1.0000 1.0000 1.0000"),t.push("  illum 2"),t.push("  Ka "+r.ambientColor.r.toFixed(4)+" "+r.ambientColor.g.toFixed(4)+" "+r.ambientColor.b.toFixed(4)),t.push("  Kd "+r.diffuseColor.r.toFixed(4)+" "+r.diffuseColor.g.toFixed(4)+" "+r.diffuseColor.b.toFixed(4)),t.push("  Ks "+r.specularColor.r.toFixed(4)+" "+r.specularColor.g.toFixed(4)+" "+r.specularColor.b.toFixed(4)),t.push("  Ke "+r.emissiveColor.r.toFixed(4)+" "+r.emissiveColor.g.toFixed(4)+" "+r.emissiveColor.b.toFixed(4)),r.ambientTexture&&t.push("  map_Ka "+r.ambientTexture.name),r.diffuseTexture&&t.push("  map_Kd "+r.diffuseTexture.name),r.specularTexture&&t.push("  map_Ks "+r.specularTexture.name),r.bumpTexture&&t.push("  map_bump -imfchan z "+r.bumpTexture.name),r.opacityTexture&&t.push("  map_d "+r.opacityTexture.name),t.join("\n")},e}(),l=void 0!==o.g?o.g:"undefined"!=typeof window?window:void 0;if(void 0!==l)for(var p in n)l.BABYLON[p]=n[p];const f=a;return i.default})()));
//# sourceMappingURL=babylon.objSerializer.min.js.map