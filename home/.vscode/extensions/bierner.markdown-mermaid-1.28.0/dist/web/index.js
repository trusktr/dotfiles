(()=>{"use strict";var e={76:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.extendMarkdownItWithMermaid=void 0;const r="mermaid",n="mermaidContainer",i=":".charCodeAt(0);function o(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\n+$/,"").trimStart()}function a(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}t.extendMarkdownItWithMermaid=function(e,t){e.use((e=>{e.block.ruler.before("fence",n,(function(e,t,o,a){let c,u=!1,s=e.bMarks[t]+e.tShift[t],d=e.eMarks[t];if(i!==e.src.charCodeAt(s))return!1;for(c=s+1;c<=d&&":"[(c-s)%1]===e.src[c];c++);const f=Math.floor((c-s)/1);if(f<3)return!1;c-=(c-s)%1;const l=e.src.slice(s,c),p=e.src.slice(c,d);if(p.trim().split(" ")[0].toLowerCase()!==r)return!1;if(a)return!0;let g=t;for(;!(g++,g>=o||(s=e.bMarks[g]+e.tShift[g],d=e.eMarks[g],s<d&&e.sCount[g]<e.blkIndent));)if(i===e.src.charCodeAt(s)&&!(e.sCount[g]-e.blkIndent>=4)){for(c=s+1;c<=d&&":"[(c-s)%1]===e.src[c];c++);if(!(Math.floor((c-s)/1)<f||(c-=(c-s)%1,c=e.skipSpaces(c),c<d))){u=!0;break}}const h=e.parentType,m=e.lineMax;e.parentType="container",e.lineMax=g;const b=e.push(n,"div",1);return b.markup=l,b.block=!0,b.info=p,b.map=[t,g],b.content=e.getLines(t+1,g,e.blkIndent,!0),e.parentType=h,e.lineMax=m,e.line=g+(u?1:0),!0}),{alt:["paragraph","reference","blockquote","list"]}),e.renderer.rules[n]=(e,t)=>{const n=e[t].content;return`<div class="${r}">${o(n)}</div>`}}));const c=e.options.highlight;return e.options.highlight=(e,n,i)=>{const u=new RegExp("\\b("+t.languageIds().map(a).join("|")+")\\b","i");return n&&u.test(n)?`<pre style="all:unset;"><div class="${r}">${o(e)}</div></pre>`:c?.(e,n,i)??e},e}},633:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.configSection=void 0,t.configSection="markdown-mermaid"},331:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.activate=void 0;const a=o(r(398)),c=r(76),u=r(633),s=r(448);t.activate=function(e){return e.subscriptions.push(a.workspace.onDidChangeConfiguration((e=>{(e.affectsConfiguration(u.configSection)||e.affectsConfiguration("workbench.colorTheme"))&&a.commands.executeCommand("markdown.preview.refresh")}))),{extendMarkdownIt:e=>((0,c.extendMarkdownItWithMermaid)(e,{languageIds:()=>a.workspace.getConfiguration(u.configSection).get("languages",["mermaid"])}),e.use(s.injectMermaidTheme),e)}}},448:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.injectMermaidTheme=void 0;const a=o(r(398)),c=r(633),u=["base","forest","dark","default","neutral"];function s(e){return"string"==typeof e&&u.includes(e)?e:"default"}t.injectMermaidTheme=function(e){const t=e.renderer.render;return e.renderer.render=function(...r){const n=s(a.workspace.getConfiguration(c.configSection).get("darkModeTheme")),i=s(a.workspace.getConfiguration(c.configSection).get("lightModeTheme")),o=a.workspace.getConfiguration(c.configSection).get("maxTextSize");return`<span id="${c.configSection}" aria-hidden="true"\n                    data-dark-mode-theme="${n}"\n                    data-light-mode-theme="${i}"\n                    data-max-text-size="${o}"></span>\n                ${t.apply(e.renderer,r)}`},e}},398:e=>{e.exports=require("vscode")}},t={},r=function r(n){var i=t[n];if(void 0!==i)return i.exports;var o=t[n]={exports:{}};return e[n].call(o.exports,o,o.exports,r),o.exports}(331),n=exports;for(var i in r)n[i]=r[i];r.__esModule&&Object.defineProperty(n,"__esModule",{value:!0})})();