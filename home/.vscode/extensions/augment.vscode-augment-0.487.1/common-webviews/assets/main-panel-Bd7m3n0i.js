const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./index-C9A1ZQNk.js","./SpinnerAugment-BJAAUt-n.js","./SpinnerAugment-DnPofOlT.css","./index-Bb_d2FL8.js","./index-McRKs1sU.css","./RemoteAgentSetup-BlBDyxhf.js","./CalloutAugment-Bc8HnLJ3.js","./CalloutAugment-Dvw-pMXw.css","./types-xGAhb6Qr.js","./chat-types-D7sox8tw.js","./index-CGH5qOQn.js","./ButtonAugment-CLDnX_Hg.js","./BaseButton-7bccWxEO.js","./BaseButton-B2NZuaj3.css","./ButtonAugment-CNK8zC8i.css","./github-DDehkTJf.js","./magnifying-glass-4Ft8m82l.js","./Content-BldOFwN2.js","./globals-D0QH3NT1.js","./Content-LuLOeTld.css","./folder-BB1rR2Vr.js","./arrow-up-right-from-square-CdEOBPRR.js","./file-paths-BcSg4gks.js","./folder-opened-BWTQdsic.js","./check-DWGOhZOn.js","./types-DDm27S8B.js","./utils-BW_yYq2f.js","./ra-diff-ops-model-CtxygvlM.js","./types-CGlLNakm.js","./IconButtonAugment-CqdkuyT6.js","./IconButtonAugment-CA6XnfI-.css","./index-BAb5fkIe.js","./CardAugment-qFWs8J9b.js","./CardAugment-BAo8Ti0V.css","./index-CLSyEK0S.css","./isObjectLike-B3cfrJ3d.js","./TextAreaAugment-CfENnz8O.js","./TextAreaAugment-J75lFxU7.css","./TextTooltipAugment-DGOJQXY9.js","./TextTooltipAugment-CXnRMJBa.css","./diff-utils-RpWUB_Gw.js","./toggleHighContrast-CwIv4U26.js","./preload-helper-Dv6uf1Os.js","./toggleHighContrast-D4zjdeIP.css","./diff-utils-DTcQ2vsq.css","./folder-CQqSbZRe.css","./CopyButton-OCXKxiUh.js","./CopyButton-C581jDHd.css","./terminal-CUUE2e2M.js","./pen-to-square-SVW9AP0k.js","./Keybindings-C-5u2652.js","./exclamation-triangle-BN7hPNzx.js","./augment-logo-f4Y8aL0S.js","./Keybindings-BFFBoxX3.css","./StatusIndicator-DZ8RFlU-.js","./StatusIndicator-D-yOSWp9.css","./layer-group-CeTgJtYd.js","./layer-group-Df_FYENN.css","./design-system-init-D2yLRPnY.js","./design-system-init-BtHyc30H.css","./await_block-CklR1HoG.js","./keypress-DD1aQVr0.js","./Filespan-D19TbAnP.js","./Filespan-tclW2Ian.css","./ellipsis-DJS5pN6w.js","./MaterialIcon-DkFwt_X2.js","./MaterialIcon-BO_oU5T3.css","./CollapseButtonAugment-BPhovcAJ.js","./CollapseButtonAugment-CLLTFP8m.css","./VSCodeCodicon-CVJeB9dY.js","./VSCodeCodicon-DVaocTud.css","./autofix-state-d-ymFdyn.js","./chat-flags-model-t_MCj4l9.js","./RemoteAgentSetup-CE-yp3a6.css","./MessageList-C4JGFtcq.js","./RemoteAgentRetry-Bi74U8IF.js","./AugmentMessage-B1RETs6x.js","./IconFilePath-BhE4l2UK.js","./LanguageIcon-CARIV-0P.js","./LanguageIcon-D78BqCXT.css","./next-edit-types-904A5ehg.js","./IconFilePath-CiKel2Kp.css","./chevron-down-CxktpQeS.js","./mcp-logo-CMUqUebQ.js","./AugmentMessage-C9VpHwlQ.css","./expand-CRxF6TiY.js","./RemoteAgentRetry-DYgtEKQz.css","./MessageList-DRTeF5X0.css","./VirtualizedMessageList-D3-LlC6_.js","./VirtualizedMessageList-CIYMwUjL.css"])))=>i.map(i=>d[i]);
var v1=Object.defineProperty;var w1=(i,t,n)=>t in i?v1(i,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):i[t]=n;var $t=(i,t,n)=>w1(i,typeof t!="symbol"?t+"":t,n);import{am as re,S as ut,i as dt,s as lt,$ as Yt,W as L,c as A,a3 as pr,Y as At,e as b,f as O,a0 as Xt,a1 as Zt,a2 as Jt,u as d,t as m,h as x,J as H,q,r as j,E as v,F as w,I as y,n as N,A as ft,L as bn,K as V,M as bt,b as oe,B as ie,al as Hn,N as Re,ag as kt,ah as Tt,ad as ze,a8 as Dt,ax as mr,aE as yi,aa as tn,T as Wt,ab as wn,C as Qt,aj as ro,aC as Ci,a5 as qr,aD as as,aA as sn,a as Et,g as De,a4 as go,Z as gr,j as ae,H as ln,w as un,x as dn,y as $n,d as ue,z as mn,X as y1,V as x1,D as Ne,G as Be,ac as qn,a6 as so,k as b1,l as _1,U as C1,a9 as Cs,an as zo,ap as fr,ao as S$,a7 as hr,ae as Ln,af as Mn,aG as cs,ak as zn,_ as T$}from"./SpinnerAugment-BJAAUt-n.js";import{P as As,T as A1,B as So,F as E$,L as M1,a as k1}from"./layer-group-CeTgJtYd.js";import"./design-system-init-D2yLRPnY.js";import{W as We,e as se,h as xn,i as I$,u as jr,o as Fi,d as S1,O as Bn,M as fi}from"./BaseButton-7bccWxEO.js";import{T as zt,M as Oi}from"./TextTooltipAugment-DGOJQXY9.js";import{C as nr,F as T1,u as No,v as Ma,a as Ai,d as ls,e as us,b as E1,m as ko}from"./types-xGAhb6Qr.js";import{A as fo,i as pn,t as L$,c as I1,d as yn,e as ka,g as L1,f as R1,h as D1,j as ds,r as P1,N as or,k as vr,l as N1,m as F1,n as O1,o as Mi,p as zi,q as R$,s as z1,u as ho,D as Sa,a as Ho,G as wr,v as D$,w as B1,x as P$,y as Ms,z as Bi,M as N$,B as Hi,E as F$,F as O$,T as H1,H as Yn,I as pi,J as U1,K as q1,L as j1,O as W1,P as Ta,Q as z$,R as V1,U as G1,V as B$,b as K1,S as Y1,C as X1,W as tr,X as Z1}from"./folder-BB1rR2Vr.js";import{C as mo,E as on,c as J1,o as Pr,r as Fr,g as H$,J as Q1,v as ks,w as Ss,y as Ts,B as Es,z as Ui,D as Is,x as Ls,t as U$,G as Rs,K as q$,L as j$,M as tf,N as zr,O as W$,U as V$,P as G$,Q as K$,l as ef,R as nf,A as Y$,k as Ea}from"./arrow-up-right-from-square-CdEOBPRR.js";import{a as rn,R as X$}from"./types-DDm27S8B.js";import{b as Ds,T as Wr,a as of,S as Z$,v as rf,c as sf}from"./StatusIndicator-DZ8RFlU-.js";import{c as Ia,C as Nr,a as af,P as gi,L as La}from"./chat-types-D7sox8tw.js";import{R as Ra}from"./ra-diff-ops-model-CtxygvlM.js";import{R as Rn,T as Ce,C as Ps,g as cf,s as lf}from"./check-DWGOhZOn.js";import{C as Zn}from"./CalloutAugment-Bc8HnLJ3.js";import{M as br,O as uf,P as df,h as $f,j as Da}from"./diff-utils-RpWUB_Gw.js";import{c as _r,F as mf,h as $s,a as Pa,k as Br,C as Uo,e as J$,M as Q$,R as ff,G as pf,U as gf}from"./github-DDehkTJf.js";import{I as fe}from"./IconButtonAugment-CqdkuyT6.js";import{B as ve}from"./ButtonAugment-CLDnX_Hg.js";import{E as jn}from"./exclamation-triangle-BN7hPNzx.js";import"./isObjectLike-B3cfrJ3d.js";import{T as te,H as hf,o as vf,t as wf}from"./Content-BldOFwN2.js";import{g as yf}from"./globals-D0QH3NT1.js";import{h as Ns,i as xf,N as bf,m as _f,n as Cf,j as Af,k as Mf,K as Hr,a as Fs,A as Na,R as kf,B as Sf,P as Tf,b as Ef,C as tm,c as If,G as Lf,d as Rf,T as Df,l as Pf,M as rr,e as em,f as Nf,g as Ff}from"./Keybindings-C-5u2652.js";import{h as Bo,u as Vr}from"./await_block-CklR1HoG.js";import{o as vo}from"./keypress-DD1aQVr0.js";import{D as xt,S as nm,T as ir,a as om,C as Of}from"./index-BAb5fkIe.js";import{g as ms}from"./file-paths-BcSg4gks.js";import{F as kn}from"./Filespan-D19TbAnP.js";import{a as rm,b as Os,P as zf,C as im}from"./folder-opened-BWTQdsic.js";import{E as sr}from"./ellipsis-DJS5pN6w.js";import{_ as qi}from"./preload-helper-Dv6uf1Os.js";import{M as qo}from"./MaterialIcon-DkFwt_X2.js";import"./index-Bb_d2FL8.js";import{b as Bf,c as Hf,d as Fa,a as Uf}from"./utils-BW_yYq2f.js";import{P as zs}from"./pen-to-square-SVW9AP0k.js";import{c as qf,s as wo,f as $r}from"./index-CGH5qOQn.js";import{T as sm}from"./terminal-CUUE2e2M.js";import{a as Bs,C as am}from"./CollapseButtonAugment-BPhovcAJ.js";import{V as cm}from"./VSCodeCodicon-CVJeB9dY.js";import{A as ur}from"./autofix-state-d-ymFdyn.js";import{C as Oa}from"./types-CGlLNakm.js";import{A as jf}from"./augment-logo-f4Y8aL0S.js";import{C as lm,E as um}from"./chat-flags-model-t_MCj4l9.js";import{M as Wf}from"./index-C9A1ZQNk.js";import"./TextAreaAugment-CfENnz8O.js";import"./toggleHighContrast-CwIv4U26.js";import"./CardAugment-qFWs8J9b.js";function To(i){return Array.isArray?Array.isArray(i):mm(i)==="[object Array]"}const Vf=1/0;function Gf(i){return i==null?"":function(t){if(typeof t=="string")return t;let n=t+"";return n=="0"&&1/t==-Vf?"-0":n}(i)}function po(i){return typeof i=="string"}function dm(i){return typeof i=="number"}function Kf(i){return i===!0||i===!1||function(t){return $m(t)&&t!==null}(i)&&mm(i)=="[object Boolean]"}function $m(i){return typeof i=="object"}function Xn(i){return i!=null}function os(i){return!i.trim().length}function mm(i){return i==null?i===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(i)}const Yf=i=>`Missing ${i} property in key`,Xf=i=>`Property 'weight' in key '${i}' must be a positive integer`,za=Object.prototype.hasOwnProperty;class Zf{constructor(t){this._keys=[],this._keyMap={};let n=0;t.forEach(e=>{let o=fm(e);this._keys.push(o),this._keyMap[o.id]=o,n+=o.weight}),this._keys.forEach(e=>{e.weight/=n})}get(t){return this._keyMap[t]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function fm(i){let t=null,n=null,e=null,o=1,r=null;if(po(i)||To(i))e=i,t=Ba(i),n=fs(i);else{if(!za.call(i,"name"))throw new Error(Yf("name"));const s=i.name;if(e=s,za.call(i,"weight")&&(o=i.weight,o<=0))throw new Error(Xf(s));t=Ba(s),n=fs(s),r=i.getFn}return{path:t,id:n,weight:o,src:e,getFn:r}}function Ba(i){return To(i)?i:i.split(".")}function fs(i){return To(i)?i.join("."):i}var le={isCaseSensitive:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(i,t)=>i.score===t.score?i.idx<t.idx?-1:1:i.score<t.score?-1:1,includeMatches:!1,findAllMatches:!1,minMatchCharLength:1,location:0,threshold:.6,distance:100,useExtendedSearch:!1,getFn:function(i,t){let n=[],e=!1;const o=(r,s,c)=>{if(Xn(r))if(s[c]){const a=r[s[c]];if(!Xn(a))return;if(c===s.length-1&&(po(a)||dm(a)||Kf(a)))n.push(Gf(a));else if(To(a)){e=!0;for(let l=0,u=a.length;l<u;l+=1)o(a[l],s,c+1)}else s.length&&o(a,s,c+1)}else n.push(r)};return o(i,po(t)?t.split("."):t,0),e?n:n[0]},ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1};const Jf=/[^ ]+/g;class Hs{constructor({getFn:t=le.getFn,fieldNormWeight:n=le.fieldNormWeight}={}){this.norm=function(e=1,o=3){const r=new Map,s=Math.pow(10,o);return{get(c){const a=c.match(Jf).length;if(r.has(a))return r.get(a);const l=1/Math.pow(a,.5*e),u=parseFloat(Math.round(l*s)/s);return r.set(a,u),u},clear(){r.clear()}}}(n,3),this.getFn=t,this.isCreated=!1,this.setIndexRecords()}setSources(t=[]){this.docs=t}setIndexRecords(t=[]){this.records=t}setKeys(t=[]){this.keys=t,this._keysMap={},t.forEach((n,e)=>{this._keysMap[n.id]=e})}create(){!this.isCreated&&this.docs.length&&(this.isCreated=!0,po(this.docs[0])?this.docs.forEach((t,n)=>{this._addString(t,n)}):this.docs.forEach((t,n)=>{this._addObject(t,n)}),this.norm.clear())}add(t){const n=this.size();po(t)?this._addString(t,n):this._addObject(t,n)}removeAt(t){this.records.splice(t,1);for(let n=t,e=this.size();n<e;n+=1)this.records[n].i-=1}getValueForItemAtKeyId(t,n){return t[this._keysMap[n]]}size(){return this.records.length}_addString(t,n){if(!Xn(t)||os(t))return;let e={v:t,i:n,n:this.norm.get(t)};this.records.push(e)}_addObject(t,n){let e={i:n,$:{}};this.keys.forEach((o,r)=>{let s=o.getFn?o.getFn(t):this.getFn(t,o.path);if(Xn(s)){if(To(s)){let c=[];const a=[{nestedArrIndex:-1,value:s}];for(;a.length;){const{nestedArrIndex:l,value:u}=a.pop();if(Xn(u))if(po(u)&&!os(u)){let $={v:u,i:l,n:this.norm.get(u)};c.push($)}else To(u)&&u.forEach(($,f)=>{a.push({nestedArrIndex:f,value:$})})}e.$[r]=c}else if(po(s)&&!os(s)){let c={v:s,n:this.norm.get(s)};e.$[r]=c}}}),this.records.push(e)}toJSON(){return{keys:this.keys,records:this.records}}}function pm(i,t,{getFn:n=le.getFn,fieldNormWeight:e=le.fieldNormWeight}={}){const o=new Hs({getFn:n,fieldNormWeight:e});return o.setKeys(i.map(fm)),o.setSources(t),o.create(),o}function hi(i,{errors:t=0,currentLocation:n=0,expectedLocation:e=0,distance:o=le.distance,ignoreLocation:r=le.ignoreLocation}={}){const s=t/i.length;if(r)return s;const c=Math.abs(e-n);return o?s+c/o:c?1:s}const er=32;function Qf(i,t,n,{location:e=le.location,distance:o=le.distance,threshold:r=le.threshold,findAllMatches:s=le.findAllMatches,minMatchCharLength:c=le.minMatchCharLength,includeMatches:a=le.includeMatches,ignoreLocation:l=le.ignoreLocation}={}){if(t.length>er)throw new Error(`Pattern length exceeds max of ${er}.`);const u=t.length,$=i.length,f=Math.max(0,Math.min(e,$));let p=r,_=f;const C=c>1||a,M=C?Array($):[];let T;for(;(T=i.indexOf(t,_))>-1;){let et=hi(t,{currentLocation:T,expectedLocation:f,distance:o,ignoreLocation:l});if(p=Math.min(et,p),_=T+u,C){let U=0;for(;U<u;)M[T+U]=1,U+=1}}_=-1;let E=[],R=1,P=u+$;const J=1<<u-1;for(let et=0;et<u;et+=1){let U=0,G=P;for(;U<G;)hi(t,{errors:et,currentLocation:f+G,expectedLocation:f,distance:o,ignoreLocation:l})<=p?U=G:P=G,G=Math.floor((P-U)/2+U);P=G;let nt=Math.max(1,f-G+1),X=s?$:Math.min(f+G,$)+u,Y=Array(X+2);Y[X+1]=(1<<et)-1;for(let Z=X;Z>=nt;Z-=1){let it=Z-1,rt=n[i.charAt(it)];if(C&&(M[it]=+!!rt),Y[Z]=(Y[Z+1]<<1|1)&rt,et&&(Y[Z]|=(E[Z+1]|E[Z])<<1|1|E[Z+1]),Y[Z]&J&&(R=hi(t,{errors:et,currentLocation:it,expectedLocation:f,distance:o,ignoreLocation:l}),R<=p)){if(p=R,_=it,_<=f)break;nt=Math.max(1,2*f-_)}}if(hi(t,{errors:et+1,currentLocation:f,expectedLocation:f,distance:o,ignoreLocation:l})>p)break;E=Y}const K={isMatch:_>=0,score:Math.max(.001,R)};if(C){const et=function(U=[],G=le.minMatchCharLength){let nt=[],X=-1,Y=-1,Z=0;for(let it=U.length;Z<it;Z+=1){let rt=U[Z];rt&&X===-1?X=Z:rt||X===-1||(Y=Z-1,Y-X+1>=G&&nt.push([X,Y]),X=-1)}return U[Z-1]&&Z-X>=G&&nt.push([X,Z-1]),nt}(M,c);et.length?a&&(K.indices=et):K.isMatch=!1}return K}function tp(i){let t={};for(let n=0,e=i.length;n<e;n+=1){const o=i.charAt(n);t[o]=(t[o]||0)|1<<e-n-1}return t}class gm{constructor(t,{location:n=le.location,threshold:e=le.threshold,distance:o=le.distance,includeMatches:r=le.includeMatches,findAllMatches:s=le.findAllMatches,minMatchCharLength:c=le.minMatchCharLength,isCaseSensitive:a=le.isCaseSensitive,ignoreLocation:l=le.ignoreLocation}={}){if(this.options={location:n,threshold:e,distance:o,includeMatches:r,findAllMatches:s,minMatchCharLength:c,isCaseSensitive:a,ignoreLocation:l},this.pattern=a?t:t.toLowerCase(),this.chunks=[],!this.pattern.length)return;const u=(f,p)=>{this.chunks.push({pattern:f,alphabet:tp(f),startIndex:p})},$=this.pattern.length;if($>er){let f=0;const p=$%er,_=$-p;for(;f<_;)u(this.pattern.substr(f,er),f),f+=er;if(p){const C=$-er;u(this.pattern.substr(C),C)}}else u(this.pattern,0)}searchIn(t){const{isCaseSensitive:n,includeMatches:e}=this.options;if(n||(t=t.toLowerCase()),this.pattern===t){let _={isMatch:!0,score:0};return e&&(_.indices=[[0,t.length-1]]),_}const{location:o,distance:r,threshold:s,findAllMatches:c,minMatchCharLength:a,ignoreLocation:l}=this.options;let u=[],$=0,f=!1;this.chunks.forEach(({pattern:_,alphabet:C,startIndex:M})=>{const{isMatch:T,score:E,indices:R}=Qf(t,_,C,{location:o+M,distance:r,threshold:s,findAllMatches:c,minMatchCharLength:a,includeMatches:e,ignoreLocation:l});T&&(f=!0),$+=E,T&&R&&(u=[...u,...R])});let p={isMatch:f,score:f?$/this.chunks.length:1};return f&&e&&(p.indices=u),p}}class Fo{constructor(t){this.pattern=t}static isMultiMatch(t){return Ha(t,this.multiRegex)}static isSingleMatch(t){return Ha(t,this.singleRegex)}search(){}}function Ha(i,t){const n=i.match(t);return n?n[1]:null}class hm extends Fo{constructor(t,{location:n=le.location,threshold:e=le.threshold,distance:o=le.distance,includeMatches:r=le.includeMatches,findAllMatches:s=le.findAllMatches,minMatchCharLength:c=le.minMatchCharLength,isCaseSensitive:a=le.isCaseSensitive,ignoreLocation:l=le.ignoreLocation}={}){super(t),this._bitapSearch=new gm(t,{location:n,threshold:e,distance:o,includeMatches:r,findAllMatches:s,minMatchCharLength:c,isCaseSensitive:a,ignoreLocation:l})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(t){return this._bitapSearch.searchIn(t)}}class vm extends Fo{constructor(t){super(t)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(t){let n,e=0;const o=[],r=this.pattern.length;for(;(n=t.indexOf(this.pattern,e))>-1;)e=n+r,o.push([n,e-1]);const s=!!o.length;return{isMatch:s,score:s?0:1,indices:o}}}const ps=[class extends Fo{constructor(i){super(i)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(i){const t=i===this.pattern;return{isMatch:t,score:t?0:1,indices:[0,this.pattern.length-1]}}},vm,class extends Fo{constructor(i){super(i)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(i){const t=i.startsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,this.pattern.length-1]}}},class extends Fo{constructor(i){super(i)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(i){const t=!i.startsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,i.length-1]}}},class extends Fo{constructor(i){super(i)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(i){const t=!i.endsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,i.length-1]}}},class extends Fo{constructor(i){super(i)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(i){const t=i.endsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[i.length-this.pattern.length,i.length-1]}}},class extends Fo{constructor(i){super(i)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(i){const t=i.indexOf(this.pattern)===-1;return{isMatch:t,score:t?0:1,indices:[0,i.length-1]}}},hm],Ua=ps.length,ep=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,np=new Set([hm.type,vm.type]);class op{constructor(t,{isCaseSensitive:n=le.isCaseSensitive,includeMatches:e=le.includeMatches,minMatchCharLength:o=le.minMatchCharLength,ignoreLocation:r=le.ignoreLocation,findAllMatches:s=le.findAllMatches,location:c=le.location,threshold:a=le.threshold,distance:l=le.distance}={}){this.query=null,this.options={isCaseSensitive:n,includeMatches:e,minMatchCharLength:o,findAllMatches:s,ignoreLocation:r,location:c,threshold:a,distance:l},this.pattern=n?t:t.toLowerCase(),this.query=function(u,$={}){return u.split("|").map(f=>{let p=f.trim().split(ep).filter(C=>C&&!!C.trim()),_=[];for(let C=0,M=p.length;C<M;C+=1){const T=p[C];let E=!1,R=-1;for(;!E&&++R<Ua;){const P=ps[R];let J=P.isMultiMatch(T);J&&(_.push(new P(J,$)),E=!0)}if(!E)for(R=-1;++R<Ua;){const P=ps[R];let J=P.isSingleMatch(T);if(J){_.push(new P(J,$));break}}}return _})}(this.pattern,this.options)}static condition(t,n){return n.useExtendedSearch}searchIn(t){const n=this.query;if(!n)return{isMatch:!1,score:1};const{includeMatches:e,isCaseSensitive:o}=this.options;t=o?t:t.toLowerCase();let r=0,s=[],c=0;for(let a=0,l=n.length;a<l;a+=1){const u=n[a];s.length=0,r=0;for(let $=0,f=u.length;$<f;$+=1){const p=u[$],{isMatch:_,indices:C,score:M}=p.search(t);if(!_){c=0,r=0,s.length=0;break}if(r+=1,c+=M,e){const T=p.constructor.type;np.has(T)?s=[...s,...C]:s.push(C)}}if(r){let $={isMatch:!0,score:c/r};return e&&($.indices=s),$}}return{isMatch:!1,score:1}}}const gs=[];function hs(i,t){for(let n=0,e=gs.length;n<e;n+=1){let o=gs[n];if(o.condition(i,t))return new o(i,t)}return new gm(i,t)}const Us="$and",rp="$or",qa="$path",ip="$val",rs=i=>!(!i[Us]&&!i[rp]),ja=i=>({[Us]:Object.keys(i).map(t=>({[t]:i[t]}))});function wm(i,t,{auto:n=!0}={}){const e=o=>{let r=Object.keys(o);const s=(a=>!!a[qa])(o);if(!s&&r.length>1&&!rs(o))return e(ja(o));if((a=>!To(a)&&$m(a)&&!rs(a))(o)){const a=s?o[qa]:r[0],l=s?o[ip]:o[a];if(!po(l))throw new Error(($=>`Invalid value for key ${$}`)(a));const u={keyId:fs(a),pattern:l};return n&&(u.searcher=hs(l,t)),u}let c={children:[],operator:r[0]};return r.forEach(a=>{const l=o[a];To(l)&&l.forEach(u=>{c.children.push(e(u))})}),c};return rs(i)||(i=ja(i)),e(i)}function sp(i,t){const n=i.matches;t.matches=[],Xn(n)&&n.forEach(e=>{if(!Xn(e.indices)||!e.indices.length)return;const{indices:o,value:r}=e;let s={indices:o,value:r};e.key&&(s.key=e.key.src),e.idx>-1&&(s.refIndex=e.idx),t.matches.push(s)})}function ap(i,t){t.score=i.score}class dr{constructor(t,n={},e){this.options={...le,...n},this.options.useExtendedSearch,this._keyStore=new Zf(this.options.keys),this.setCollection(t,e)}setCollection(t,n){if(this._docs=t,n&&!(n instanceof Hs))throw new Error("Incorrect 'index' type");this._myIndex=n||pm(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(t){Xn(t)&&(this._docs.push(t),this._myIndex.add(t))}remove(t=()=>!1){const n=[];for(let e=0,o=this._docs.length;e<o;e+=1){const r=this._docs[e];t(r,e)&&(this.removeAt(e),e-=1,o-=1,n.push(r))}return n}removeAt(t){this._docs.splice(t,1),this._myIndex.removeAt(t)}getIndex(){return this._myIndex}search(t,{limit:n=-1}={}){const{includeMatches:e,includeScore:o,shouldSort:r,sortFn:s,ignoreFieldNorm:c}=this.options;let a=po(t)?po(this._docs[0])?this._searchStringList(t):this._searchObjectList(t):this._searchLogical(t);return function(l,{ignoreFieldNorm:u=le.ignoreFieldNorm}){l.forEach($=>{let f=1;$.matches.forEach(({key:p,norm:_,score:C})=>{const M=p?p.weight:null;f*=Math.pow(C===0&&M?Number.EPSILON:C,(M||1)*(u?1:_))}),$.score=f})}(a,{ignoreFieldNorm:c}),r&&a.sort(s),dm(n)&&n>-1&&(a=a.slice(0,n)),function(l,u,{includeMatches:$=le.includeMatches,includeScore:f=le.includeScore}={}){const p=[];return $&&p.push(sp),f&&p.push(ap),l.map(_=>{const{idx:C}=_,M={item:u[C],refIndex:C};return p.length&&p.forEach(T=>{T(_,M)}),M})}(a,this._docs,{includeMatches:e,includeScore:o})}_searchStringList(t){const n=hs(t,this.options),{records:e}=this._myIndex,o=[];return e.forEach(({v:r,i:s,n:c})=>{if(!Xn(r))return;const{isMatch:a,score:l,indices:u}=n.searchIn(r);a&&o.push({item:r,idx:s,matches:[{score:l,value:r,norm:c,indices:u}]})}),o}_searchLogical(t){const n=wm(t,this.options),e=(c,a,l)=>{if(!c.children){const{keyId:$,searcher:f}=c,p=this._findMatches({key:this._keyStore.get($),value:this._myIndex.getValueForItemAtKeyId(a,$),searcher:f});return p&&p.length?[{idx:l,item:a,matches:p}]:[]}const u=[];for(let $=0,f=c.children.length;$<f;$+=1){const p=c.children[$],_=e(p,a,l);if(_.length)u.push(..._);else if(c.operator===Us)return[]}return u},o=this._myIndex.records,r={},s=[];return o.forEach(({$:c,i:a})=>{if(Xn(c)){let l=e(n,c,a);l.length&&(r[a]||(r[a]={idx:a,item:c,matches:[]},s.push(r[a])),l.forEach(({matches:u})=>{r[a].matches.push(...u)}))}}),s}_searchObjectList(t){const n=hs(t,this.options),{keys:e,records:o}=this._myIndex,r=[];return o.forEach(({$:s,i:c})=>{if(!Xn(s))return;let a=[];e.forEach((l,u)=>{a.push(...this._findMatches({key:l,value:s[u],searcher:n}))}),a.length&&r.push({idx:c,item:s,matches:a})}),r}_findMatches({key:t,value:n,searcher:e}){if(!Xn(n))return[];let o=[];if(To(n))n.forEach(({v:r,i:s,n:c})=>{if(!Xn(r))return;const{isMatch:a,score:l,indices:u}=e.searchIn(r);a&&o.push({score:l,key:t,value:r,idx:s,norm:c,indices:u})});else{const{v:r,n:s}=n,{isMatch:c,score:a,indices:l}=e.searchIn(r);c&&o.push({score:a,key:t,value:r,norm:s,indices:l})}return o}}dr.version="7.0.0",dr.createIndex=pm,dr.parseIndex=function(i,{getFn:t=le.getFn,fieldNormWeight:n=le.fieldNormWeight}={}){const{keys:e,records:o}=i,r=new Hs({getFn:t,fieldNormWeight:n});return r.setKeys(e),r.setIndexRecords(o),r},dr.config=le,dr.parseQuery=wm,function(...i){gs.push(...i)}(op);var Qe=(i=>(i.disableCopilot="ShouldDisableCopilot",i.disableCodeium="ShouldDisableCodeium",i.workspacePopulated="WorkspacePopulated",i.workspaceNotPopulated="WorkspaceNotPopulated",i.workspaceNotSelected="WorkspaceNotSelected",i.signInRequired="UserShouldSignIn",i.allActionsComplete="AllActionsComplete",i.syncingPermissionNeeded="SyncingPermissionNeeded",i.workspaceTooLarge="workspaceTooLarge",i.uploadingHomeDir="uploadingHomeDir",i))(Qe||{}),qs=(i=>(i.signInInProgress="SignInInProgress",i))(qs||{});let cp=class{constructor(){$t(this,"subscribers",new Set);$t(this,"_actions",[]);$t(this,"_currentIndex",0);$t(this,"subscribe",i=>(this.subscribers.add(i),i(this),()=>{this.subscribers.delete(i)}))}get currentCard(){return this.actions[this._currentIndex]}notifySubscribers(){this.subscribers.forEach(i=>i(this))}get actions(){return this._actions}handleMessageFromExtension(i){const t=i.data;return t.type===We.mainPanelActions&&(this.onActionsUpdates(t.data),!0)}onActionsUpdates(i){this._actions=i,this._currentIndex=0,this.notifySubscribers()}nextAction(){this._currentIndex=(this._currentIndex+1)%this._actions.length,this.notifySubscribers()}prevAction(){this._currentIndex=(this._currentIndex-1+this._actions.length)%this._actions.length,this.notifySubscribers()}isCollapsible(i){return i===Qe.allActionsComplete}};const aT=`Augment just finished syncing with your codebase! Here is a summary of what we saw:

`;class lp{constructor(t,n){$t(this,"handleMessageFromExtension",t=>(t.data.type===We.shouldShowSummary&&this.showProjectSummary(),!0));this._chatModel=t,this._flagsModel=n}async retryProjectSummary(t){const[n]=await Promise.all([this.generateQuestions(),this._chatModel.currentConversationModel.resendTurn(t)]);await this.attachQuestions(n)}async showProjectSummary(){const t=this.generateQuestions();await this.generateSummary();const n=await t;this.attachQuestions(n)}async generateQuestions(){const{responseText:t}=await this._chatModel.currentConversationModel.sendSilentExchange({request_message:"Give me the five most important questions a developer would need answered about this codebase. These questions should be separated by a newline. I want you to say absolutely nothing else.",model_id:this._flagsModel.modelDisplayNameToId.Overview??void 0,disableSelectedCodeDetails:!0,chatHistory:[]});return t.split(`
`).filter(n=>n.trim()!=="")}async generateSummary(){this._chatModel.extensionClient.showAugmentPanel(),await this._chatModel.currentConversationModel.sendExchange({chatItemType:mo.summaryResponse,request_message:"Provide a short summary of this project",model_id:this._flagsModel.modelDisplayNameToId.Overview??void 0,status:on.draft,disableSelectedCodeDetails:!0,chatHistory:[]},!0)}async attachQuestions(t){const n=this._chatModel.currentConversationModel.chatHistory.findLast(J1);n&&n.request_id&&t&&this._chatModel.currentConversationModel.updateChatItem(n.request_id,{questionsLoaded:!0,questions:t})}}function up(i){let t,n,e,o;const r=i[12].default,s=Yt(r,i,i[11],null);return{c(){t=L("div"),n=L("div"),s&&s.c(),A(n,"class",e=pr(`c-card ${i[0]}`)+" svelte-1hp682e"),At(n,"highlighted",i[1]),At(n,"hasTop",i[8]),At(n,"hasBottom",i[7]),At(n,"hasLeft",i[6]),At(n,"hasRight",i[5]),At(n,"reserve-border-space",i[4]),A(t,"class","c-card-container svelte-1hp682e"),A(t,"style",i[2]),At(t,"overflow-visible",i[3])},m(c,a){b(c,t,a),O(t,n),s&&s.m(n,null),o=!0},p(c,[a]){s&&s.p&&(!o||2048&a)&&Xt(s,r,c,c[11],o?Jt(r,c[11],a,null):Zt(c[11]),null),(!o||1&a&&e!==(e=pr(`c-card ${c[0]}`)+" svelte-1hp682e"))&&A(n,"class",e),(!o||3&a)&&At(n,"highlighted",c[1]),(!o||257&a)&&At(n,"hasTop",c[8]),(!o||129&a)&&At(n,"hasBottom",c[7]),(!o||65&a)&&At(n,"hasLeft",c[6]),(!o||33&a)&&At(n,"hasRight",c[5]),(!o||17&a)&&At(n,"reserve-border-space",c[4]),(!o||4&a)&&A(t,"style",c[2]),(!o||8&a)&&At(t,"overflow-visible",c[3])},i(c){o||(d(s,c),o=!0)},o(c){m(s,c),o=!1},d(c){c&&x(t),s&&s.d(c)}}}function dp(i,t,n){let e,o,r,s,c,{$$slots:a={},$$scope:l}=t,{class:u=""}=t,{highlighted:$=!1}=t,{style:f=""}=t,{overflowVisible:p=!1}=t,{borders:_=["top","bottom","left","right"]}=t,{reserveBorderSpace:C=!1}=t;return i.$$set=M=>{"class"in M&&n(0,u=M.class),"highlighted"in M&&n(1,$=M.highlighted),"style"in M&&n(2,f=M.style),"overflowVisible"in M&&n(3,p=M.overflowVisible),"borders"in M&&n(9,_=M.borders),"reserveBorderSpace"in M&&n(4,C=M.reserveBorderSpace),"$$scope"in M&&n(11,l=M.$$scope)},i.$$.update=()=>{512&i.$$.dirty&&n(10,e=_.map(M=>M.split("-")).flat()),1024&i.$$.dirty&&n(8,o=e.includes("top")),1024&i.$$.dirty&&n(7,r=e.includes("bottom")),1024&i.$$.dirty&&n(6,s=e.includes("left")),1024&i.$$.dirty&&n(5,c=e.includes("right"))},[u,$,f,p,C,c,s,r,o,_,e,l,a]}class ym extends ut{constructor(t){super(),dt(this,t,dp,up,lt,{class:0,highlighted:1,style:2,overflowVisible:3,borders:9,reserveBorderSpace:4})}}const xi={id:null,name:"Default"};class $p{constructor(){$t(this,"models",[xi])}registerModels(t){this.models=[xi,...t]}getModels(){return this.models}getModel(t){return this.models.find(n=>n.id===t)??xi}}class mp{constructor(t,n=void 0,e,o){$t(this,"subscribers",new Set);this._msgBroker=t,this._state=n,this.validateState=e,this._storeId=o,n&&this.setStateInternal(n)}subscribe(t){return this.subscribers.add(t),t(this),()=>{this.subscribers.delete(t)}}notifySubscribers(){this.subscribers.forEach(t=>t(this))}get state(){return this._state}get storeId(){return this._storeId}shouldAcceptMessage(t,n){return t.id===this.storeId&&this.validateState(n)}update(t){const n=t(this._state);n!==void 0&&this.setStateInternal(n)}setState(t){this.setStateInternal(t)}async setStateInternal(t){JSON.stringify(this._state)!==JSON.stringify(t)&&(this._state=t,this._msgBroker.postMessage({type:We.updateSharedWebviewState,data:t,id:this.storeId}))}async fetchStateFromExtension(){const t=await this._msgBroker.send({type:We.getSharedWebviewState,id:this.storeId,data:{}});t.type===We.getSharedWebviewStateResponse&&this.shouldAcceptMessage(t,t.data)&&(this._state=t.data,this.notifySubscribers())}handleMessageFromExtension(t){switch(t.data.type){case We.updateSharedWebviewState:case We.getSharedWebviewStateResponse:return!!this.shouldAcceptMessage(t.data,t.data.data)&&(this._state=t.data.data,this.notifySubscribers(),!0);default:return!1}}}const fp=i=>({}),Wa=i=>({slot:"icon"}),pp=i=>({}),Va=i=>({slot:"icon"});function gp(i){let t,n;return t=new Zn({props:{variant:"soft",size:1,color:i[0],$$slots:{icon:[yp],default:[wp]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};1&o&&(r.color=e[0]),74&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function hp(i){let t,n,e,o;return t=new Zn({props:{variant:"soft",size:1,color:i[0],$$slots:{default:[xp]},$$scope:{ctx:i}}}),e=new Zn({props:{variant:"soft",size:1,color:"info",$$slots:{icon:[_p],default:[bp]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment),n=H(),v(e.$$.fragment)},m(r,s){w(t,r,s),b(r,n,s),w(e,r,s),o=!0},p(r,s){const c={};1&s&&(c.color=r[0]),66&s&&(c.$$scope={dirty:s,ctx:r}),t.$set(c);const a={};68&s&&(a.$$scope={dirty:s,ctx:r}),e.$set(a)},i(r){o||(d(t.$$.fragment,r),d(e.$$.fragment,r),o=!0)},o(r){m(t.$$.fragment,r),m(e.$$.fragment,r),o=!1},d(r){r&&x(n),y(t,r),y(e,r)}}}function Ga(i){let t,n;return t=new fe({props:{variant:"ghost",color:"neutral",size:1,$$slots:{default:[vp]},$$scope:{ctx:i}}}),t.$on("click",i[5]),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};64&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function vp(i){let t,n;return t=new _r({}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function wp(i){let t,n,e,o;n=new br({props:{markdown:i[1]}});let r=!!i[3]&&Ga(i);return{c(){t=L("div"),v(n.$$.fragment),e=H(),r&&r.c(),A(t,"class","c-callout-wrapper svelte-fh6sa8")},m(s,c){b(s,t,c),w(n,t,null),O(t,e),r&&r.m(t,null),o=!0},p(s,c){const a={};2&c&&(a.markdown=s[1]),n.$set(a),s[3]?r?(r.p(s,c),8&c&&d(r,1)):(r=Ga(s),r.c(),d(r,1),r.m(t,null)):r&&(q(),m(r,1,1,()=>{r=null}),j())},i(s){o||(d(n.$$.fragment,s),d(r),o=!0)},o(s){m(n.$$.fragment,s),m(r),o=!1},d(s){s&&x(t),y(n),r&&r.d()}}}function yp(i){let t;const n=i[4].icon,e=Yt(n,i,i[6],Wa);return{c(){e&&e.c()},m(o,r){e&&e.m(o,r),t=!0},p(o,r){e&&e.p&&(!t||64&r)&&Xt(e,n,o,o[6],t?Jt(n,o[6],r,fp):Zt(o[6]),Wa)},i(o){t||(d(e,o),t=!0)},o(o){m(e,o),t=!1},d(o){e&&e.d(o)}}}function xp(i){let t,n;return t=new br({props:{markdown:i[1]}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};2&o&&(r.markdown=e[1]),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function bp(i){let t,n;return t=new br({props:{markdown:i[2]}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};4&o&&(r.markdown=e[2]),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function _p(i){let t;const n=i[4].icon,e=Yt(n,i,i[6],Va);return{c(){e&&e.c()},m(o,r){e&&e.m(o,r),t=!0},p(o,r){e&&e.p&&(!t||64&r)&&Xt(e,n,o,o[6],t?Jt(n,o[6],r,pp):Zt(o[6]),Va)},i(o){t||(d(e,o),t=!0)},o(o){m(e,o),t=!1},d(o){e&&e.d(o)}}}function Cp(i){let t,n,e,o,r;const s=[hp,gp],c=[];function a($,f){return $[2]?0:1}n=a(i),e=c[n]=s[n](i);const l=i[4].default,u=Yt(l,i,i[6],null);return{c(){t=L("div"),e.c(),o=H(),u&&u.c(),A(t,"class","c-base-card svelte-fh6sa8")},m($,f){b($,t,f),c[n].m(t,null),O(t,o),u&&u.m(t,null),r=!0},p($,[f]){let p=n;n=a($),n===p?c[n].p($,f):(q(),m(c[p],1,1,()=>{c[p]=null}),j(),e=c[n],e?e.p($,f):(e=c[n]=s[n]($),e.c()),d(e,1),e.m(t,o)),u&&u.p&&(!r||64&f)&&Xt(u,l,$,$[6],r?Jt(l,$[6],f,null):Zt($[6]),null)},i($){r||(d(e),d(u,$),r=!0)},o($){m(e),m(u,$),r=!1},d($){$&&x(t),c[n].d(),u&&u.d($)}}}function Ap(i,t,n){let{$$slots:e={},$$scope:o}=t,{color:r}=t,{description:s}=t,{callout:c}=t,{onClose:a}=t;return i.$$set=l=>{"color"in l&&n(0,r=l.color),"description"in l&&n(1,s=l.description),"callout"in l&&n(2,c=l.callout),"onClose"in l&&n(3,a=l.onClose),"$$scope"in l&&n(6,o=l.$$scope)},[r,s,c,a,e,()=>a(),o]}let Gr=class extends ut{constructor(i){super(),dt(this,i,Ap,Cp,lt,{color:0,description:1,callout:2,onClose:3})}};function Mp(i){let t;return{c(){t=L("div"),t.innerHTML='<div class="c-progress-bar__bar svelte-dg8hvh"></div>',A(t,"class","c-progress-bar svelte-dg8hvh")},m(n,e){b(n,t,e)},p:N,i:N,o:N,d(n){n&&x(t)}}}class xm extends ut{constructor(t){super(),dt(this,t,null,Mp,lt,{})}}function Ka(i,t,n){const e=i.slice();return e[9]=t[n].text,e[10]=t[n].action,e[11]=t[n].appearance,e}const kp=i=>({}),Ya=i=>({slot:"icon"});function Sp(i){let t,n,e=i[9]+"";return{c(){t=V(e),n=H()},m(o,r){b(o,t,r),b(o,n,r)},p(o,r){4&r&&e!==(e=o[9]+"")&&bt(t,e)},d(o){o&&(x(t),x(n))}}}function Xa(i){let t,n;return t=new ve({props:{size:2,variant:"solid",color:i[11]?i[11]:"accent",class:"c-btns-card__button",title:i[9],$$slots:{default:[Sp]},$$scope:{ctx:i}}}),t.$on("click",function(){return i[7](i[10])}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){i=e;const r={};4&o&&(r.color=i[11]?i[11]:"accent"),4&o&&(r.title=i[9]),260&o&&(r.$$scope={dirty:o,ctx:i}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function Za(i){let t,n;return t=new xm({}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function Tp(i){let t,n,e,o,r=se(i[2]),s=[];for(let l=0;l<r.length;l+=1)s[l]=Xa(Ka(i,r,l));const c=l=>m(s[l],1,1,()=>{s[l]=null});let a=i[3]&&Za();return{c(){t=L("div");for(let l=0;l<s.length;l+=1)s[l].c();n=H(),a&&a.c(),e=ft(),A(t,"class","c-btns-card__buttons svelte-1701q2d")},m(l,u){b(l,t,u);for(let $=0;$<s.length;$+=1)s[$]&&s[$].m(t,null);b(l,n,u),a&&a.m(l,u),b(l,e,u),o=!0},p(l,u){if(36&u){let $;for(r=se(l[2]),$=0;$<r.length;$+=1){const f=Ka(l,r,$);s[$]?(s[$].p(f,u),d(s[$],1)):(s[$]=Xa(f),s[$].c(),d(s[$],1),s[$].m(t,null))}for(q(),$=r.length;$<s.length;$+=1)c($);j()}l[3]?a?8&u&&d(a,1):(a=Za(),a.c(),d(a,1),a.m(e.parentNode,e)):a&&(q(),m(a,1,1,()=>{a=null}),j())},i(l){if(!o){for(let u=0;u<r.length;u+=1)d(s[u]);d(a),o=!0}},o(l){s=s.filter(Boolean);for(let u=0;u<s.length;u+=1)m(s[u]);m(a),o=!1},d(l){l&&(x(t),x(n),x(e)),bn(s,l),a&&a.d(l)}}}function Ep(i){let t;const n=i[6].icon,e=Yt(n,i,i[8],Ya);return{c(){e&&e.c()},m(o,r){e&&e.m(o,r),t=!0},p(o,r){e&&e.p&&(!t||256&r)&&Xt(e,n,o,o[8],t?Jt(n,o[8],r,kp):Zt(o[8]),Ya)},i(o){t||(d(e,o),t=!0)},o(o){m(e,o),t=!1},d(o){e&&e.d(o)}}}function Ip(i){let t,n;return t=new Gr({props:{color:i[1],description:i[0],callout:i[4],$$slots:{icon:[Ep],default:[Tp]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,[o]){const r={};2&o&&(r.color=e[1]),1&o&&(r.description=e[0]),16&o&&(r.callout=e[4]),268&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function Lp(i,t,n){let{$$slots:e={},$$scope:o}=t,{description:r}=t,{color:s}=t,{buttons:c=[]}=t,{inProgress:a=!1}=t,{callout:l}=t;function u($){xn.postMessage({type:We.mainPanelPerformAction,data:$})}return i.$$set=$=>{"description"in $&&n(0,r=$.description),"color"in $&&n(1,s=$.color),"buttons"in $&&n(2,c=$.buttons),"inProgress"in $&&n(3,a=$.inProgress),"callout"in $&&n(4,l=$.callout),"$$scope"in $&&n(8,o=$.$$scope)},[r,s,c,a,l,u,e,$=>u($),o]}let Kr=class extends ut{constructor(i){super(),dt(this,i,Lp,Ip,lt,{description:0,color:1,buttons:2,inProgress:3,callout:4})}};function Rp(i){let t,n;return{c(){t=oe("svg"),n=oe("path"),A(n,"fill-rule","evenodd"),A(n,"clip-rule","evenodd"),A(n,"d","M7.49991 0.876892C3.84222 0.876892 0.877075 3.84204 0.877075 7.49972C0.877075 11.1574 3.84222 14.1226 7.49991 14.1226C11.1576 14.1226 14.1227 11.1574 14.1227 7.49972C14.1227 3.84204 11.1576 0.876892 7.49991 0.876892ZM1.82707 7.49972C1.82707 4.36671 4.36689 1.82689 7.49991 1.82689C10.6329 1.82689 13.1727 4.36671 13.1727 7.49972C13.1727 10.6327 10.6329 13.1726 7.49991 13.1726C4.36689 13.1726 1.82707 10.6327 1.82707 7.49972ZM8.24992 4.49999C8.24992 4.9142 7.91413 5.24999 7.49992 5.24999C7.08571 5.24999 6.74992 4.9142 6.74992 4.49999C6.74992 4.08577 7.08571 3.74999 7.49992 3.74999C7.91413 3.74999 8.24992 4.08577 8.24992 4.49999ZM6.00003 5.99999H6.50003H7.50003C7.77618 5.99999 8.00003 6.22384 8.00003 6.49999V9.99999H8.50003H9.00003V11H8.50003H7.50003H6.50003H6.00003V9.99999H6.50003H7.00003V6.99999H6.50003H6.00003V5.99999Z"),A(n,"fill","currentColor"),A(t,"width","15"),A(t,"height","15"),A(t,"viewBox","0 0 15 15"),A(t,"fill","none"),A(t,"xmlns","http://www.w3.org/2000/svg")},m(e,o){b(e,t,o),O(t,n)},p:N,i:N,o:N,d(e){e&&x(t)}}}class jo extends ut{constructor(t){super(),dt(this,t,null,Rp,lt,{})}}function Dp(i){return{c:N,m:N,p:N,i:N,o:N,d:N}}function Pp(i){let t,n;return t=new Gr({props:{color:"warning",description:"Current workspace contains your home directory. Augment cannot upload your home directory to the cloud. Please open a different workspace",$$slots:{icon:[Up]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};8&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function Np(i){let t,n;return t=new Gr({props:{color:"warning",description:`The workspace you have opened exceeds Augment's ${i[2].maxTrackableFileCount} file upload limit. Please use a .augmentignore or .gitignore to exclude files from being uploaded, or open a smaller workspace.`,$$slots:{icon:[qp]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};4&o&&(r.description=`The workspace you have opened exceeds Augment's ${e[2].maxTrackableFileCount} file upload limit. Please use a .augmentignore or .gitignore to exclude files from being uploaded, or open a smaller workspace.`),8&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function Fp(i){let t,n;return t=new Kr({props:{color:"neutral",description:"To provide the best quality responses, Augment will index your code in our secure cloud. Your data always stays secure and private. [Learn More](https://docs.augmentcode.com/setup-augment/workspace-indexing)",callout:i[2].userTier==="community"?"You are subscribed to the Community plan, we may use any code you share to train our AI models.":void 0,buttons:[{text:"Enable Indexing",action:"grant-sync-permission"}],$$slots:{icon:[jp]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};4&o&&(r.callout=e[2].userTier==="community"?"You are subscribed to the Community plan, we may use any code you share to train our AI models.":void 0),8&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function Op(i){let t,n;return t=new Kr({props:{color:"warning",description:"Codeium suggestions will collide with Augment's suggestions. Turn off Codeium to fix this.",buttons:[{text:"Disable Codeium",action:"disable-codeium"}],$$slots:{icon:[Wp]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};8&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function zp(i){let t,n;return t=new Kr({props:{color:"warning",description:"GitHub Copilot suggestions will collide with Augment's suggestions. Turn off Copilot to fix this.",buttons:[{text:"Disable Github Copilot",action:"disable-github-copilot"}],$$slots:{icon:[Vp]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};8&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function Bp(i){let t,n;return t=new Kr({props:{color:"neutral",description:"Please complete the sign-in process in your browser.",buttons:[{text:"Cancel",action:"cancel-sign-in",appearance:"neutral"}],inProgress:!0,$$slots:{icon:[Gp]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};8&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function Hp(i){let t,n;return t=new Kr({props:{color:"neutral",description:"Welcome to Augment! Sign in to your existing account or create a new one to get started.",buttons:[{text:"Start using Augment",action:"sign-in"}],$$slots:{icon:[Kp]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};8&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function Up(i){let t,n;return t=new jn({props:{slot:"icon"}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p:N,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function qp(i){let t,n;return t=new jn({props:{slot:"icon"}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p:N,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function jp(i){let t,n;return t=new jo({props:{slot:"icon"}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p:N,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function Wp(i){let t,n;return t=new jn({props:{slot:"icon"}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p:N,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function Vp(i){let t,n;return t=new jn({props:{slot:"icon"}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p:N,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function Gp(i){let t,n;return t=new jo({props:{slot:"icon"}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p:N,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function Kp(i){let t,n;return t=new jo({props:{slot:"icon"}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p:N,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function Yp(i){let t,n,e,o;const r=[Hp,Bp,zp,Op,Fp,Np,Pp,Dp],s=[];function c(a,l){return a[0]===Qe.signInRequired?0:a[0]===qs.signInInProgress?1:a[0]===Qe.disableCopilot?2:a[0]===Qe.disableCodeium?3:a[0]===Qe.syncingPermissionNeeded?4:a[0]===Qe.workspaceTooLarge?5:a[0]===Qe.uploadingHomeDir?6:a[0]===Qe.allActionsComplete?7:-1}return~(t=c(i))&&(n=s[t]=r[t](i)),{c(){n&&n.c(),e=ft()},m(a,l){~t&&s[t].m(a,l),b(a,e,l),o=!0},p(a,[l]){let u=t;t=c(a),t===u?~t&&s[t].p(a,l):(n&&(q(),m(s[u],1,1,()=>{s[u]=null}),j()),~t?(n=s[t],n?n.p(a,l):(n=s[t]=r[t](a),n.c()),d(n,1),n.m(e.parentNode,e)):n=null)},i(a){o||(d(n),o=!0)},o(a){m(n),o=!1},d(a){a&&x(e),~t&&s[t].d(a)}}}function Xp(i,t,n){let e,o=N,r=()=>(o(),o=ie(c,a=>n(2,e=a)),c);i.$$.on_destroy.push(()=>o());let{card:s}=t,{flagsModel:c}=t;return r(),i.$$set=a=>{"card"in a&&n(0,s=a.card),"flagsModel"in a&&r(n(1,c=a.flagsModel))},[s,c,e]}let Zp=class extends ut{constructor(i){super(),dt(this,i,Xp,Yp,lt,{card:0,flagsModel:1})}};class Jp{constructor(t,n,e){$t(this,"_agenticExchangeStatus",Re(Pr.notRunning));$t(this,"_isCurrConversationAgentic",Re(!1));$t(this,"_isAutoModeApproved",Re(!1));$t(this,"_showAutoModeWarning");$t(this,"_hasEverUsedAgent",Re(void 0));$t(this,"_classifiedMemoriesMap",new Map);$t(this,"_disposers",[]);$t(this,"isAgenticTurnComplete",Hn(this._agenticExchangeStatus,t=>t===Pr.notRunning));$t(this,"_lastConversation",Re({chat:void 0,agent:void 0}));$t(this,"_shouldCreateNewConversation",()=>{const t=this._chatModel.currentConversationModel;return!yn.isEmpty(t)});$t(this,"setToAgentic",async(t=!1)=>{if(pn(this._chatModel.currentConversationModel))return;let n;if(this._chatModel.flags.doUseNewDraftFunctionality){if(n=this._chatModel.currentConversationModel.id,!n&&(this._chatModel.setCurrentConversation(or),n=or),!pn(this._chatModel.currentConversationModel))if(t){const o=this._chatModel.orderedConversations().find(pn),r=o==null?void 0:o.id;r?this._chatModel.setCurrentConversation(r):(await this._chatModel.setCurrentConversation(),this._chatModel.currentConversationModel.extraData={isAgentConversation:!0,baselineTimestamp:0},n=this._chatModel.currentConversationModel.id)}else this._chatModel.currentConversationModel.extraData={isAgentConversation:!0,baselineTimestamp:0}}else{const o=this._shouldCreateNewConversation(),r=re(this._lastConversation).agent;if(this._lastConversation.update(()=>({chat:this._chatModel.currentConversationModel.id,agent:void 0})),o||!r){const s=await this._create();s.extraData={isAgentConversation:!0},this._chatModel.deleteInvalidConversations("agent"),this._chatModel.currentConversationModel.setConversation(s),n=s.id}else this._chatModel.setCurrentConversation(r),n=r}this._chatModel.extensionClient.reportAgentSessionEvent({eventName:Ai.openedAgentConversation,conversationId:n});const e=this._chatModel.currentConversationModel.subscribe(async o=>{await this._maybeTriggerWelcomeMessage(o.id)&&e()})});$t(this,"setToChat",()=>{if(!pn(this._chatModel.currentConversationModel))return;const t=this._shouldCreateNewConversation(),n=re(this._lastConversation).chat;if(this._lastConversation.update(()=>({chat:void 0,agent:this._chatModel.currentConversationModel.id})),t||!n)if(this._chatModel.flags.doUseNewDraftFunctionality)this._chatModel.setCurrentConversation(or),this._chatModel.currentConversationModel.extraData={isAgentConversation:!1,baselineTimestamp:0};else{const e={...yn.create(),extraData:{isAgentConversation:!1}};this._chatModel.deleteInvalidConversations("chat"),this._chatModel.currentConversationModel.setConversation(e)}else this._chatModel.setCurrentConversation(n)});$t(this,"_maybeTriggerWelcomeMessage",async t=>{var o;const n=this._chatModel.currentConversationModel;if(n.id!==t)return!1;if(await this.refreshHasEverUsedAgent(),!yn.isEmpty(n)||yn.isNamed(n)||((o=n.extraData)==null?void 0:o.hasAgentOnboarded)||re(this._hasEverUsedAgent)||(this.setHasEverUsedAgent(!0),n.setName("Welcome to the Augment Agent"),n.extraData={isAgentConversation:!0,hasAgentOnboarded:!0},!I$()))return!0;const e=await this._chatModel.extensionClient.getAgentOnboardingPrompt();return await n.sendExchange({chatItemType:mo.agentOnboarding,request_message:e,status:on.draft}),!0});$t(this,"markDirty",()=>{const t=this._chatModel.currentConversationModel;t.extraData={...t.extraData,hasDirtyEdits:!0}});$t(this,"markClean",()=>{const t=this._chatModel.currentConversationModel;t.extraData={...t.extraData,hasDirtyEdits:!1}});$t(this,"_findAgentic",()=>this._chatModel.orderedConversations().find(pn));$t(this,"_findChat",()=>this._chatModel.orderedConversations().find(t=>!pn(t)));$t(this,"_create",async()=>({...yn.create({personaType:await this._chatModel.currentConversationModel.decidePersonaType()}),extraData:{isAgentConversation:!0,baselineTimestamp:0}}));$t(this,"updateBaselineTimestamp",t=>{const n=Math.min(t,Date.now()),e=this._chatModel.currentConversationModel;pn(e)&&(e.extraData={...e.extraData,baselineTimestamp:n})});$t(this,"getBaselineTimestamp",()=>{const t=this._chatModel.currentConversationModel;return pn(t)?t.extraData.baselineTimestamp??0:0});$t(this,"getConversationId",()=>this._chatModel.currentConversationModel.id);$t(this,"interruptAgent",async()=>{if(re(this._agenticExchangeStatus)===Pr.notRunning)return;await this._toolsModel.interruptAllTools(),await this._chatModel.currentConversationModel.cancelMessage();const t=this._chatModel.currentConversationModel.lastExchange;t!=null&&t.request_id&&this._classifiedMemoriesMap.delete(t.request_id)});$t(this,"_resetStateToDefaultValues",()=>{this.setHasEverUsedAgent(!1),this._chatModel.extensionClient.setAgentAutoModeApproved(!1),this._isAutoModeApproved.set(!1),this._chatModel.extensionClient.setHasEverUsedRemoteAgent(!1),this._chatModel.agentExecutionMode.set(fo.manual)});$t(this,"acceptAutoMode",()=>{this._chatModel.extensionClient.setAgentAutoModeApproved(!0),this._isAutoModeApproved.set(!0),this._chatModel.agentExecutionMode.set(fo.auto)});$t(this,"refreshAutoModeAcceptance",async()=>{const t=await this._chatModel.extensionClient.checkAgentAutoModeApproval();this._isAutoModeApproved.set(t)});$t(this,"rejectAutoMode",()=>{this._chatModel.extensionClient.setAgentAutoModeApproved(!1),this._isAutoModeApproved.set(!1),this._chatModel.agentExecutionMode.set(fo.manual)});$t(this,"setHasEverUsedAgent",t=>{this._chatModel.extensionClient.setHasEverUsedAgent(t),this._hasEverUsedAgent.set(t)});$t(this,"refreshHasEverUsedAgent",async()=>{if(re(this.hasEverUsedAgent)!==void 0)return;const t=await this._chatModel.extensionClient.checkHasEverUsedAgent();re(this.hasEverUsedAgent)===void 0&&this._hasEverUsedAgent.set(t)});var s;this._chatModel=t,this._toolsModel=n,this._checkpointStore=e,this._checkpointStore.registerAgentConversationModel(this);const o=Object.values(this._chatModel.conversations).some(c=>{var a;return(a=c.extraData)==null?void 0:a.isAgentConversation}),r=((s=this._chatModel.currentConversationModel.extraData)==null?void 0:s.isAgentConversation)===!0;(o||r)&&this.setHasEverUsedAgent(!0),this.refreshAutoModeAcceptance(),this.refreshHasEverUsedAgent(),this._showAutoModeWarning=Hn([this._isAutoModeApproved,this._chatModel.agentExecutionMode,this._isCurrConversationAgentic],([c,a,l])=>!c&&a===fo.auto&&l),this._disposers.push(this._chatModel.currentConversationModel.subscribe(()=>{const c=this._chatModel.currentConversationModel,a=pn(c);this._isCurrConversationAgentic.set(a)})),this._disposers.push(this._chatModel.currentConversationModel.subscribe(L$(()=>{const c=I1(this._chatModel.currentConversationModel);this._agenticExchangeStatus.set(c)},1e3,{leading:!0,trailing:!0}))),this._disposers.push(this._isCurrConversationAgentic.subscribe(c=>{c?(this._chatModel.extensionClient.setChatMode(Ia.agent),this._chatModel.specialContextInputModel.enableAgentMemories()):(this._chatModel.extensionClient.setChatMode(Ia.chat),this._chatModel.specialContextInputModel.disableAgentMemories()),this._agenticExchangeStatus.set(Pr.notRunning)})),this._disposers.push(this._chatModel.currentConversationModel.onBeforeChangeConversation((c,a)=>{var l;if(pn(c))return yn.isEmpty(a)&&((l=a.extraData)==null?void 0:l.isAgentConversation)!==!1&&this._chatModel.conversations[a.id]===void 0&&(a={...a,extraData:{...a.extraData,isAgentConversation:!0}}),a})),this._disposers.push(this._chatModel.currentConversationModel.subscribe(c=>{const a=c.lastExchange,l=this._chatModel.flags.memoryClassificationOnFirstToken;a&&a.request_id&&l&&(a.status===on.sent&&a.response_text&&a.response_text.length>0&&!this._classifiedMemoriesMap.has(a.request_id)&&(this._classifiedMemoriesMap.set(a.request_id,!0),ka(c,a)),!a.request_id||a.status!==on.success&&a.status!==on.failed&&a.status!==on.cancelled||this._classifiedMemoriesMap.delete(a.request_id))})),this._disposers.push(this._chatModel.currentConversationModel.onSendExchange(c=>{this._chatModel.flags.memoryClassificationOnFirstToken||ka(this._chatModel.currentConversationModel,c)})),this._disposers.push(this._chatModel.currentConversationModel.onNewConversation(()=>{const c=this._chatModel.currentConversationModel.id;this._chatModel.extensionClient.setCurrentConversation(c),this._checkpointStore.maybeCreateOriginalCheckpoint()})),this._chatModel.extensionClient.setCurrentConversation(this._chatModel.currentConversationModel.id),this._disposers.push(this.isAgenticTurnComplete.subscribe(c=>{var $,f;if(!c||!pn(this._chatModel.currentConversationModel))return;const a=this._chatModel.currentConversationModel,l=L1(a);if(!l)return;const u=T1.create();u.setFlag(No.start);try{const p=($=R1(a))==null?void 0:$.request_id;p&&u.setRequestId(No.lastUserExchangeRequestId,p);const{memoriesRequestId:_,memory:C}=l;if(u.setRequestId(No.memoriesRequestId,_),!C)return void u.setFlag(No.emptyMemory);if(D1(a))return void u.setFlag(No.agenticTurnHasRememberToolCall);if(this._chatModel.extensionClient.callTool(((f=a.lastExchange)==null?void 0:f.request_id)??"","remember","remember",{memory:C,caller:Ma.classify_and_distill,isComplexNewMemory:!1,memoriesRequestId:_},a.chatHistory.filter(M=>Fr(M)).map(ds),a.id),p){const M=P1(a,p);u.setFlag(No.removeUserExchangeMemoryFailed,!M)}}catch{u.setFlag(No.exceptionThrown)}finally{u.setFlag(No.end),this._chatModel.extensionClient.reportAgentSessionEvent({eventName:Ai.flushMemories,conversationId:this._chatModel.currentConversationModel.id,eventData:{flushMemoriesData:u}})}})),this._disposers.push(this.isAgenticTurnComplete.subscribe(async c=>{if(c){const a=re(this._checkpointStore.currentCheckpoint),l=re(this._chatModel.currentConversationModel).id;await this._chatModel.extensionClient.hasChangesSince((a==null?void 0:a.fromTimestamp)??this.getBaselineTimestamp())&&l===re(this._chatModel.currentConversationModel).id&&this._checkpointStore.createNewCheckpoint()}})),this._disposers.push(this._checkpointStore.targetCheckpointSummary.subscribe(()=>{re(this._checkpointStore.targetCheckpointHasChanges)?this.markDirty():this.markClean()}))}get isCurrConversationAgentic(){return this._isCurrConversationAgentic}get agentExchangeStatus(){return this._agenticExchangeStatus}async distillMemory(t){const n=this._chatModel.currentConversationModel.chatHistory.find(o=>H$(o)&&o.request_id===t);if(!(n!=null&&n.request_message))return;const{responseText:e}=await this._chatModel.currentConversationModel.sendSilentExchange({request_message:n.request_message,disableRetrieval:!0,disableSelectedCodeDetails:!0,memoriesInfo:{isDistill:!0}});try{const o=JSON.parse(e);o.content&&await this._chatModel.extensionClient.callTool(t,"remember","remember",{memory:o.content,caller:Ma.classify_and_distill,isComplexNewMemory:!1},this._chatModel.currentConversationModel.chatHistory.filter(Fr).map(ds),this._chatModel.currentConversationModel.id)}catch(o){console.warn("Failed to parse JSON from distill memory response",o)}}async resetOnboarding(){this._resetStateToDefaultValues();const t=this._chatModel.currentConversationModel;pn(t)&&(t.extraData={...t.extraData,hasAgentOnboarded:!1},await this._maybeTriggerWelcomeMessage(t.id))}get showAutoModeWarning(){return this._showAutoModeWarning}get hasEverUsedAgent(){return this._hasEverUsedAgent}dispose(){this._disposers.forEach(t=>t()),this._disposers=[],this._classifiedMemoriesMap.clear()}}function Ja(i){let t,n;return t=new Gr({props:{color:"accent",description:i[0],onClose:i[1],$$slots:{icon:[eg],default:[tg]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};1&o&&(r.description=e[0]),2&o&&(r.onClose=e[1]),131076&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function Qp(i){let t;return{c(){t=V("Try it out")},m(n,e){b(n,t,e)},d(n){n&&x(t)}}}function tg(i){let t,n;return t=new ve({props:{size:2,variant:"solid",color:"accent",title:"Try it out",$$slots:{default:[Qp]},$$scope:{ctx:i}}}),t.$on("click",function(){ze(i[2])&&i[2].apply(this,arguments)}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){i=e;const r={};131072&o&&(r.$$scope={dirty:o,ctx:i}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function eg(i){let t,n;return t=new jo({props:{slot:"icon"}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p:N,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function ng(i){let t,n,e=i[3]&&Ja(i);return{c(){e&&e.c(),t=ft()},m(o,r){e&&e.m(o,r),b(o,t,r),n=!0},p(o,[r]){o[3]?e?(e.p(o,r),8&r&&d(e,1)):(e=Ja(o),e.c(),d(e,1),e.m(t.parentNode,t)):e&&(q(),m(e,1,1,()=>{e=null}),j())},i(o){n||(d(e),n=!0)},o(o){m(e),n=!1},d(o){o&&x(t),e&&e.d(o)}}}function og(i,t,n){let e,o,r,s,c,a,l,u,$,f=N,p=N;i.$$.on_destroy.push(()=>f()),i.$$.on_destroy.push(()=>p());const _=kt("chatModel");Tt(i,_,K=>n(13,$=K));const C=$.flags;Tt(i,C,K=>n(12,u=K));const M=kt(vr.key),T=kt("agentConversationModel"),E=kt(Rn.key);let R="",P=()=>{},J=()=>{};return i.$$.update=()=>{6144&i.$$.dirty&&n(9,o=u.enableAgentMode&&l===!1),5120&i.$$.dirty&&n(8,s=u.enableBackgroundAgents&&!a),3840&i.$$.dirty&&(o?(n(0,R="Agent Mode is now available"),n(1,P=async()=>{n(9,o=!1),l===!1&&T.setHasEverUsedAgent(!0)}),n(2,J=async()=>{n(9,o=!1),await T.setToAgentic()})):s&&(n(0,R="Remote Agent Mode is now available"),n(1,P=async()=>{n(8,s=!1),E.setHasEverUsedRemoteAgent(!0)}),n(2,J=async()=>{n(8,s=!1),M.handleSetToBackgroundAgent(),a===!1&&(E==null||E.setHasEverUsedRemoteAgent(!0))}))),768&i.$$.dirty&&n(3,c=o||s)},n(5,e=T.hasEverUsedAgent),p(),p=ie(e,K=>n(11,l=K)),n(4,r=E.hasEverUsedRemoteAgent),f(),f=ie(r,K=>n(10,a=K)),[R,P,J,c,r,e,_,C,s,o,a,l,u]}class rg extends ut{constructor(t){super(),dt(this,t,og,ng,lt,{})}}function Qa(i){let t,n;return t=new Gr({props:{color:"accent",description:i[0],onClose:i[8],$$slots:{icon:[ig]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};1&o&&(r.description=e[0]),3&o&&(r.onClose=e[8]),512&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function ig(i){let t,n;return t=new jo({props:{slot:"icon"}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p:N,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function sg(i){let t,n,e=i[1]&&Qa(i);return{c(){e&&e.c(),t=ft()},m(o,r){e&&e.m(o,r),b(o,t,r),n=!0},p(o,[r]){o[1]?e?(e.p(o,r),2&r&&d(e,1)):(e=Qa(o),e.c(),d(e,1),e.m(t.parentNode,t)):e&&(q(),m(e,1,1,()=>{e=null}),j())},i(o){n||(d(e),n=!0)},o(o){m(e),n=!1},d(o){o&&x(t),e&&e.d(o)}}}function ag(i,t,n){let e,o,r,s,c,a,l,u=N,$=N;i.$$.on_destroy.push(()=>u()),i.$$.on_destroy.push(()=>$());const f=kt("chatModel");return Tt(i,f,p=>n(6,a=p)),i.$$.update=()=>{64&i.$$.dirty&&(n(3,e=a.flags),$(),$=ie(e,p=>n(7,l=p))),128&i.$$.dirty&&n(0,o=l.clientAnnouncement),64&i.$$.dirty&&(n(2,r=a.displayedAnnouncements),u(),u=ie(r,p=>n(5,c=p))),33&i.$$.dirty&&n(1,s=!!o&&o.length>0&&!c.includes(o))},[o,s,r,e,f,c,a,l,async()=>{n(1,s=!1),f.displayedAnnouncements.update(p=>(p.push(o),p)),f.saveImmediate()}]}class cg extends ut{constructor(t){super(),dt(this,t,ag,sg,lt,{})}}const lg=Re(!1);function ug(i){let t;return{c(){t=V("Drop images to attach as context")},m(n,e){b(n,t,e)},d(n){n&&x(t)}}}function dg(i){let t;return{c(){t=V("(png, jpg, jpeg)")},m(n,e){b(n,t,e)},d(n){n&&x(t)}}}function $g(i){let t,n,e,o,r;const s=i[7].default,c=Yt(s,i,i[11],null),a=c||function(l){let u,$,f,p,_,C;return u=new mf({}),f=new Wt({props:{class:"c-rich-text-editor-dropzone__text",size:2,$$slots:{default:[ug]},$$scope:{ctx:l}}}),_=new Wt({props:{class:"c-rich-text-editor-dropzone__text",size:1,$$slots:{default:[dg]},$$scope:{ctx:l}}}),{c(){v(u.$$.fragment),$=H(),v(f.$$.fragment),p=H(),v(_.$$.fragment)},m(M,T){w(u,M,T),b(M,$,T),w(f,M,T),b(M,p,T),w(_,M,T),C=!0},p(M,T){const E={};2048&T&&(E.$$scope={dirty:T,ctx:M}),f.$set(E);const R={};2048&T&&(R.$$scope={dirty:T,ctx:M}),_.$set(R)},i(M){C||(d(u.$$.fragment,M),d(f.$$.fragment,M),d(_.$$.fragment,M),C=!0)},o(M){m(u.$$.fragment,M),m(f.$$.fragment,M),m(_.$$.fragment,M),C=!1},d(M){M&&(x($),x(p)),y(u,M),y(f,M),y(_,M)}}}(i);return{c(){t=L("div"),n=L("div"),a&&a.c(),A(n,"class","c-rich-text-editor-dropzone__content svelte-1f75lrb"),A(t,"class","c-rich-text-editor-dropzone svelte-1f75lrb"),A(t,"role","button"),A(t,"tabindex","-1"),At(t,"is-active",i[0])},m(l,u){b(l,t,u),O(t,n),a&&a.m(n,null),e=!0,o||(r=[Dt(window,"dragstart",i[10]),Dt(window,"dragenter",i[5]),Dt(window,"dragleave",i[3]),Dt(window,"drop",i[4]),Dt(window,"blur",i[4]),Dt(t,"dragover",mr(yi(i[8]))),Dt(t,"dragenter",mr(yi(i[9]))),Dt(t,"drop",mr(yi(i[2])))],o=!0)},p(l,[u]){c&&c.p&&(!e||2048&u)&&Xt(c,s,l,l[11],e?Jt(s,l[11],u,null):Zt(l[11]),null),(!e||1&u)&&At(t,"is-active",l[0])},i(l){e||(d(a,l),e=!0)},o(l){m(a,l),e=!1},d(l){l&&x(t),a&&a.d(l),o=!1,tn(r)}}}const mg="application/x-augment/drag-origin/{}";function tc(i){return mg.replace("{}",i.instanceId)}function fg(i,t,n){let{$$slots:e={},$$scope:o}=t,{draggingStore:r=lg}=t;const s=kt(Ns.CONTEXT_KEY);let c;return r.subscribe(a=>n(0,c=a)),i.$$set=a=>{"draggingStore"in a&&n(6,r=a.draggingStore),"$$scope"in a&&n(11,o=a.$$scope)},[c,s,function(a){var l,u,$,f,p;r.set(!1),(l=a.dataTransfer)!=null&&l.files&&((p=(u=s==null?void 0:s.commandManager.chain())==null?void 0:($=u.command(({view:_,tr:C})=>{if(!_)return!0;const M=_.posAtCoords({left:a.clientX,top:a.clientY});if(M){const T=C.doc.resolve(M.pos);C.setSelection(xf.create(C.doc,T.pos))}return!0})).insertImagesIntoEditor)==null||p.call($,[...((f=a.dataTransfer)==null?void 0:f.files)??[]]))},function(a){a.relatedTarget&&a.relatedTarget!==document.body||r.set(!1)},()=>r.set(!1),a=>{var $,f;var l,u;l=a,u=s,($=l.dataTransfer)!=null&&$.types.includes(tc(u))||(f=a.dataTransfer)!=null&&f.types.includes("Files")&&r.set(!0)},r,e,function(a){wn.call(this,i,a)},function(a){wn.call(this,i,a)},a=>function(l,u){var $;u.rootNode&&l.composedPath().includes(u.rootNode)&&(($=l.dataTransfer)==null||$.setData(tc(u),u.instanceId))}(a,s),o]}class pg extends ut{constructor(t){super(),dt(this,t,fg,$g,lt,{draggingStore:6})}}const gg=/(?:^|\s)(!\[(.+|:?)]\((\S+)(?:(?:\s+)["'](\S+)["'])?\))$/,hg=bf.create({name:"image",addOptions:()=>({inline:!1,allowBase64:!1,HTMLAttributes:{}}),inline(){return this.options.inline},group(){return this.options.inline?"inline":"block"},draggable:!0,addAttributes:()=>({src:{default:null},alt:{default:null},title:{default:null}}),parseHTML(){return[{tag:this.options.allowBase64?"img[src]":'img[src]:not([src^="data:"])'}]},renderHTML({HTMLAttributes:i}){return["img",_f(this.options.HTMLAttributes,i)]},addCommands(){return{setImage:i=>({commands:t})=>t.insertContent({type:this.name,attrs:i})}},addInputRules(){return[Cf({find:gg,type:this.type,getAttributes:i=>{const[,,t,n,e]=i;return{src:n,alt:t,title:e}}})]}});class vs extends Error{constructor(n,e){super(e);$t(this,"files");this.files=n,this.name="ImageError"}}class vg extends vs{constructor(t){super([t],`File "${t.name}" is not an image`)}}function ec(i){let t,n,e;return{c(){t=L("button"),t.textContent="×",A(t,"class","c-image-chip__close svelte-s0n2sy"),A(t,"aria-label","Remove image")},m(o,r){b(o,t,r),n||(e=Dt(t,"click",mr(function(){ze(i[3])&&i[3].apply(this,arguments)})),n=!0)},p(o,r){i=o},d(o){o&&x(t),n=!1,e()}}}function wg(i){let t,n,e,o;const r=[bg,xg],s=[];function c(a,l){return a[4]?0:1}return n=c(i),e=s[n]=r[n](i),{c(){t=L("div"),e.c(),A(t,"class","c-image-render__chip-preview svelte-s0n2sy")},m(a,l){b(a,t,l),s[n].m(t,null),o=!0},p(a,l){let u=n;n=c(a),n===u?s[n].p(a,l):(q(),m(s[u],1,1,()=>{s[u]=null}),j(),e=s[n],e?e.p(a,l):(e=s[n]=r[n](a),e.c()),d(e,1),e.m(t,null))},i(a){o||(d(e),o=!0)},o(a){m(e),o=!1},d(a){a&&x(t),s[n].d()}}}function yg(i){let t,n;return t=new zt({props:{content:"File size exceeds the "+i[7]+"KB limit.",$$slots:{default:[Pg]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};128&o&&(r.content="File size exceeds the "+e[7]+"KB limit."),263190&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function xg(i){let t,n,e,o={ctx:i,current:null,token:null,hasCatch:!1,pending:kg,then:Cg,catch:_g,value:17,blocks:[,,,]};return Bo(n=i[2](i[1]),o),{c(){t=ft(),o.block.c()},m(r,s){b(r,t,s),o.block.m(r,o.anchor=s),o.mount=()=>t.parentNode,o.anchor=t,e=!0},p(r,s){i=r,o.ctx=i,6&s&&n!==(n=i[2](i[1]))&&Bo(n,o)||Vr(o,i,s)},i(r){e||(d(o.block),e=!0)},o(r){for(let s=0;s<3;s+=1){const c=o.blocks[s];m(c)}e=!1},d(r){r&&x(t),o.block.d(r),o.token=null,o=null}}}function bg(i){let t,n,e;return n=new ro({props:{size:1}}),{c(){t=L("div"),v(n.$$.fragment),A(t,"class","c-image-chip__loading svelte-s0n2sy")},m(o,r){b(o,t,r),w(n,t,null),e=!0},p:N,i(o){e||(d(n.$$.fragment,o),e=!0)},o(o){m(n.$$.fragment,o),e=!1},d(o){o&&x(t),y(n)}}}function _g(i){return{c:N,m:N,p:N,i:N,o:N,d:N}}function Cg(i){let t;function n(r,s){return r[17]?Mg:Ag}let e=n(i),o=e(i);return{c(){o.c(),t=ft()},m(r,s){o.m(r,s),b(r,t,s)},p(r,s){e===(e=n(r))&&o?o.p(r,s):(o.d(1),o=e(r),o&&(o.c(),o.m(t.parentNode,t)))},i:N,o:N,d(r){r&&x(t),o.d(r)}}}function Ag(i){let t;return{c(){t=L("div"),t.innerHTML='<svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M14,2H6A2,2 0 0,0 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2M18,20H6V4H13V9H18V20Z"></path></svg>',A(t,"class","c-image-chip__file-icon svelte-s0n2sy")},m(n,e){b(n,t,e)},p:N,d(n){n&&x(t)}}}function Mg(i){let t,n;return{c(){t=L("img"),Ci(t.src,n=i[17])||A(t,"src",n),A(t,"alt",""),A(t,"class","c-image-chip__image svelte-s0n2sy")},m(e,o){b(e,t,o),i[14](t)},p(e,o){6&o&&!Ci(t.src,n=e[17])&&A(t,"src",n)},d(e){e&&x(t),i[14](null)}}}function kg(i){let t,n,e;return n=new ro({props:{size:1}}),{c(){t=L("div"),v(n.$$.fragment),A(t,"class","c-image-chip__loading svelte-s0n2sy")},m(o,r){b(o,t,r),w(n,t,null),e=!0},p:N,i(o){e||(d(n.$$.fragment,o),e=!0)},o(o){m(n.$$.fragment,o),e=!1},d(o){o&&x(t),y(n)}}}function Sg(i){let t,n,e,o={ctx:i,current:null,token:null,hasCatch:!1,pending:Dg,then:Ig,catch:Eg,value:17,blocks:[,,,]};return Bo(n=i[2](i[1]),o),{c(){t=ft(),o.block.c()},m(r,s){b(r,t,s),o.block.m(r,o.anchor=s),o.mount=()=>t.parentNode,o.anchor=t,e=!0},p(r,s){i=r,o.ctx=i,6&s&&n!==(n=i[2](i[1]))&&Bo(n,o)||Vr(o,i,s)},i(r){e||(d(o.block),e=!0)},o(r){for(let s=0;s<3;s+=1){const c=o.blocks[s];m(c)}e=!1},d(r){r&&x(t),o.block.d(r),o.token=null,o=null}}}function Tg(i){let t,n,e;return n=new ro({props:{size:1}}),{c(){t=L("div"),v(n.$$.fragment),A(t,"class","c-image-chip__loading svelte-s0n2sy")},m(o,r){b(o,t,r),w(n,t,null),e=!0},p:N,i(o){e||(d(n.$$.fragment,o),e=!0)},o(o){m(n.$$.fragment,o),e=!1},d(o){o&&x(t),y(n)}}}function Eg(i){return{c:N,m:N,p:N,i:N,o:N,d:N}}function Ig(i){let t;function n(r,s){return r[17]?Rg:Lg}let e=n(i),o=e(i);return{c(){o.c(),t=ft()},m(r,s){o.m(r,s),b(r,t,s)},p(r,s){e===(e=n(r))&&o?o.p(r,s):(o.d(1),o=e(r),o&&(o.c(),o.m(t.parentNode,t)))},i:N,o:N,d(r){r&&x(t),o.d(r)}}}function Lg(i){let t;return{c(){t=L("div"),t.innerHTML='<svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M14,2H6A2,2 0 0,0 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2M18,20H6V4H13V9H18V20Z"></path></svg>',A(t,"class","c-image-chip__file-icon svelte-s0n2sy")},m(n,e){b(n,t,e)},p:N,d(n){n&&x(t)}}}function Rg(i){let t,n;return{c(){t=L("img"),Ci(t.src,n=i[17])||A(t,"src",n),A(t,"alt",""),A(t,"class","c-image-chip__image svelte-s0n2sy")},m(e,o){b(e,t,o),i[13](t)},p(e,o){6&o&&!Ci(t.src,n=e[17])&&A(t,"src",n)},d(e){e&&x(t),i[13](null)}}}function Dg(i){let t,n,e;return n=new ro({props:{size:1}}),{c(){t=L("div"),v(n.$$.fragment),A(t,"class","c-image-chip__loading svelte-s0n2sy")},m(o,r){b(o,t,r),w(n,t,null),e=!0},p:N,i(o){e||(d(n.$$.fragment,o),e=!0)},o(o){m(n.$$.fragment,o),e=!1},d(o){o&&x(t),y(n)}}}function Pg(i){let t,n,e,o;const r=[Tg,Sg],s=[];function c(a,l){return a[4]?0:1}return n=c(i),e=s[n]=r[n](i),{c(){t=L("div"),e.c(),A(t,"class","c-image-render__chip-preview svelte-s0n2sy")},m(a,l){b(a,t,l),s[n].m(t,null),o=!0},p(a,l){let u=n;n=c(a),n===u?s[n].p(a,l):(q(),m(s[u],1,1,()=>{s[u]=null}),j(),e=s[n],e?e.p(a,l):(e=s[n]=r[n](a),e.c()),d(e,1),e.m(t,null))},i(a){o||(d(e),o=!0)},o(a){m(e),o=!1},d(a){a&&x(t),s[n].d()}}}function Ng(i){let t,n,e=i[6]?`${Math.round(i[6]/1024)}KB`:"",o=i[5]&&i[7]>0&&nc();return{c(){o&&o.c(),t=H(),n=V(e)},m(r,s){o&&o.m(r,s),b(r,t,s),b(r,n,s)},p(r,s){r[5]&&r[7]>0?o||(o=nc(),o.c(),o.m(t.parentNode,t)):o&&(o.d(1),o=null),64&s&&e!==(e=r[6]?`${Math.round(r[6]/1024)}KB`:"")&&bt(n,e)},i:N,o:N,d(r){r&&(x(t),x(n)),o&&o.d(r)}}}function Fg(i){let t,n,e;return n=new ro({props:{size:1}}),{c(){t=L("div"),v(n.$$.fragment),A(t,"class","c-image-chip__size-loading svelte-s0n2sy")},m(o,r){b(o,t,r),w(n,t,null),e=!0},p:N,i(o){e||(d(n.$$.fragment,o),e=!0)},o(o){m(n.$$.fragment,o),e=!1},d(o){o&&x(t),y(n)}}}function nc(i){let t;return{c(){t=L("span"),t.textContent="⚠️",A(t,"class","c-image-chip__warning-icon svelte-s0n2sy")},m(n,e){b(n,t,e)},d(n){n&&x(t)}}}function Og(i){let t,n,e,o,r,s,c,a,l,u,$,f,p,_,C,M=i[8](),T=M&&ec(i);const E=[yg,wg],R=[];function P(U,G){return U[5]&&U[7]>0?0:1}e=P(i),o=R[e]=E[e](i);const J=[Fg,Ng],K=[];function et(U,G){return U[4]?0:1}return $=et(i),f=K[$]=J[$](i),{c(){t=L("div"),T&&T.c(),n=H(),o.c(),r=H(),s=L("div"),c=L("div"),a=V(i[0]),l=H(),u=L("div"),f.c(),A(c,"class","c-image-chip__filename svelte-s0n2sy"),A(c,"title",i[0]),A(u,"class","c-image-chip__size svelte-s0n2sy"),A(s,"class","c-image-chip__info svelte-s0n2sy"),A(t,"class","c-image-chip svelte-s0n2sy"),A(t,"role","button"),A(t,"tabindex","0"),At(t,"is-over-limit",i[5])},m(U,G){b(U,t,G),T&&T.m(t,null),O(t,n),R[e].m(t,null),O(t,r),O(t,s),O(s,c),O(c,a),O(s,l),O(s,u),K[$].m(u,null),p=!0,_||(C=[Dt(window,"click",i[12],!0),Dt(t,"click",i[15]),Dt(t,"keydown",i[16])],_=!0)},p(U,[G]){256&G&&(M=U[8]()),M?T?T.p(U,G):(T=ec(U),T.c(),T.m(t,n)):T&&(T.d(1),T=null);let nt=e;e=P(U),e===nt?R[e].p(U,G):(q(),m(R[nt],1,1,()=>{R[nt]=null}),j(),o=R[e],o?o.p(U,G):(o=R[e]=E[e](U),o.c()),d(o,1),o.m(t,r)),(!p||1&G)&&bt(a,U[0]),(!p||1&G)&&A(c,"title",U[0]);let X=$;$=et(U),$===X?K[$].p(U,G):(q(),m(K[X],1,1,()=>{K[X]=null}),j(),f=K[$],f?f.p(U,G):(f=K[$]=J[$](U),f.c()),d(f,1),f.m(u,null)),(!p||32&G)&&At(t,"is-over-limit",U[5])},i(U){p||(d(o),d(f),p=!0)},o(U){m(o),m(f),p=!1},d(U){U&&x(t),T&&T.d(),R[e].d(),K[$].d(),_=!1,tn(C)}}}function zg(i,t,n){let{title:e}=t,{src:o}=t,{loadImage:r}=t,{removeImage:s}=t,{isLoading:c=!1}=t,{isOverLimit:a=!1}=t,{fileSizeBytes:l=0}=t,{maxImageSizeKb:u=1024}=t,{isEditable:$}=t;function f(C){C.key!=="ArrowUp"&&C.key!=="ArrowDown"&&C.key!=="ArrowLeft"&&C.key!=="ArrowRight"||(n(9,_=!0),C.preventDefault(),C.stopPropagation())}let p,_=!1;return i.$$set=C=>{"title"in C&&n(0,e=C.title),"src"in C&&n(1,o=C.src),"loadImage"in C&&n(2,r=C.loadImage),"removeImage"in C&&n(3,s=C.removeImage),"isLoading"in C&&n(4,c=C.isLoading),"isOverLimit"in C&&n(5,a=C.isOverLimit),"fileSizeBytes"in C&&n(6,l=C.fileSizeBytes),"maxImageSizeKb"in C&&n(7,u=C.maxImageSizeKb),"isEditable"in C&&n(8,$=C.isEditable)},[e,o,r,s,c,a,l,u,$,_,p,f,C=>{C.composedPath().some(M=>M===p)||n(9,_=!1)},function(C){Qt[C?"unshift":"push"](()=>{p=C,n(10,p)})},function(C){Qt[C?"unshift":"push"](()=>{p=C,n(10,p)})},C=>{n(9,_=!0),C.preventDefault()},C=>{f(C),vo("Escape",()=>n(9,_=!1))(C)}]}class Bg extends ut{constructor(t){super(),dt(this,t,zg,Og,lt,{title:0,src:1,loadImage:2,removeImage:3,isLoading:4,isOverLimit:5,fileSizeBytes:6,maxImageSizeKb:7,isEditable:8})}}async function bm(i,t=1024){return new Promise((n,e)=>{const o=document.createElement("canvas"),r=o.getContext("2d"),s=new Image;s.onload=()=>{let c=s.width,a=s.height;c>a?c>t&&(a=Math.round(a*(t/c)),c=t):a>t&&(c=Math.round(c*(t/a)),a=t),o.width=c,o.height=a,r?(r.drawImage(s,0,0,c,a),o.toBlob(l=>{l!=null?n(l):e(new Error("Failed to create blob"))})):e(new Error("Could not get canvas context"))},s.onerror=()=>e(new Error("Failed to load image")),s.src=URL.createObjectURL(i)})}var bi=(i=>(i.collapsed="collapsed",i.preview="preview",i.full="full",i))(bi||{});const Di=class Di{constructor(t){$t(this,"_tipTapExtension");$t(this,"_editor");$t(this,"_createTipTapExtension",()=>{const t=this.registerEditor,n=this.unregisterEditor,e=this.insertImagesIntoEditor;return hg.extend({addOptions(){var o;return{...(o=this.parent)==null?void 0:o.call(this),allowBase64:!0,preserveOnSplit:!1,defaultRenderMode:bi.collapsed}},addAttributes(){var o;return{...(o=this.parent)==null?void 0:o.call(this),renderMode:{default:bi.collapsed},title:{default:""},isLoading:{default:!1},fileSizeBytes:{default:0}}},onCreate(){var o;(o=this.parent)==null||o.call(this),t(this.editor)},onDestroy(){var o;(o=this.parent)==null||o.call(this),n()},addCommands(){var o;return{...(o=this.parent)==null?void 0:o.call(this),insertImagesIntoEditor:r=>({chain:s})=>s().command(()=>!!e(r)).focus("end").run()}},addNodeView:()=>this._createNodeView(),addProseMirrorPlugins(){var o;return[...((o=this.parent)==null?void 0:o.call(this))??[],new Mf({key:Di.IMAGE_PASTE_HANDLER_PLUGIN_KEY,props:{handlePaste:(r,s)=>{var c,a;return(a=(c=s.clipboardData)==null?void 0:c.files)!=null&&a.length?e([...s.clipboardData.files]).okFiles.length>0&&(s.preventDefault(),!0):!1}}})]}})});$t(this,"_createNodeView",()=>({node:t})=>{var o,r,s;const n=document.createElement("div"),e=new Bg({target:n,props:{title:String(t.attrs.title),src:String(t.attrs.src),loadImage:((o=this._options)==null?void 0:o.renderImage)??(()=>Promise.resolve(void 0)),isLoading:!!t.attrs.isLoading,fileSizeBytes:Number(t.attrs.fileSizeBytes)||0,maxImageSizeKb:((r=this._options)==null?void 0:r.maxImageSizeKb)||0,isOverLimit:this._calculateIsOverLimit(Number(t.attrs.fileSizeBytes)||0),removeImage:async()=>{var c;if(this._editor){try{(c=this._options)!=null&&c.deleteImage&&await this._options.deleteImage(String(t.attrs.src))}catch(a){console.error("Failed to delete image:",a)}this._editor.chain().command(({tr:a,state:l})=>(l.doc.descendants((u,$)=>{if(t===u)return a.delete($,$+u.nodeSize),!1}),!0)).focus("end").run()}},isEditable:((s=this._options)==null?void 0:s.isEditable)??(()=>!0)}});return{dom:n,destroy:()=>{e.$destroy()},update:c=>c.type.name==="image"&&(t=c,e.$set({src:String(c.attrs.src),isLoading:!!c.attrs.isLoading,fileSizeBytes:Number(c.attrs.fileSizeBytes)||0,isOverLimit:this._calculateIsOverLimit(Number(c.attrs.fileSizeBytes)||0)}),!0)}});$t(this,"registerEditor",t=>{this._editor=t});$t(this,"unregisterEditor",()=>{this._editor=void 0});$t(this,"_getImageNodeCount",()=>{if(!this._editor)return;let t=0;return this._editor.state.doc.descendants(n=>{n.type.name==="image"&&t++}),t});$t(this,"_calculateIsOverLimit",t=>{var n;return!((n=this._options)!=null&&n.maxImageSizeKb)||t===0?!1:t>1024*this._options.maxImageSizeKb});$t(this,"updateOptions",t=>{this._options={...t}});$t(this,"insertImagesIntoEditor",t=>{const{validImages:n,errors:e}=this.validateImages(t),o=[];for(const r of n){if(!this._editor)continue;const s=this._insertLoadingImage(this._editor,r.name);this._processImage(r,s).catch(c=>{o.push(new vs([r],String(c)))})}return{errors:[...e,...o],okFiles:n}});this._options=t,this._tipTapExtension=this._createTipTapExtension()}validateImages(t){const n=[],e=[];for(const r of t){const s=(o=r,this._options,function(c){return c.type.startsWith("image/")}(o)?o:new vg(o));s instanceof vs?n.push(s):e.push(s)}var o;return{validImages:e,errors:n}}async _processImage(t,n){var e,o;try{const r=await bm(t);if(!r||!this._editor)return;const s=new File([r],t.name,{type:t.type}),c=await((o=(e=this._options)==null?void 0:e.saveImage)==null?void 0:o.call(e,s))??s.name;this._updateImageNode(n,{src:c,title:s.name,isLoading:!1,fileSizeBytes:s.size})}catch(r){throw console.error("Could not process image: ",r),this._editor&&this._removeImageNode(n),r}}get tipTapExtension(){return this._tipTapExtension}_findImageNodeBySrc(t){if(!this._editor||!t)return null;let n=null;return this._editor.state.doc.descendants((e,o)=>e.type.name!=="image"||e.attrs.src!==t||(n={node:e,pos:o},!1)),n}_insertLoadingImage(t,n){const{from:e}=t.state.selection,o=`${n}-${Date.now()}-${Math.random().toString(36).substring(2)}`;return t.chain().command(({tr:r})=>{const s=e||r.doc.content.size;return r.insert(s,[t.schema.nodes.image.create({src:o,originalName:n,title:n,renderMode:bi.collapsed,isLoading:!0}),t.schema.nodes.paragraph.create({text:""})]),!0}).focus("end").run(),o}_updateImageNode(t,n){if(!this._editor)return;const e=this._findImageNodeBySrc(t);e&&this._editor.chain().command(({tr:o})=>(o.setNodeMarkup(e.pos,void 0,{...e.node.attrs,...n}),!0)).run()}_removeImageNode(t){if(!this._editor)return;const n=this._findImageNodeBySrc(t);n&&this._editor.chain().command(({tr:e})=>(e.delete(n.pos,n.pos+n.node.nodeSize),!0)).run()}static hasLoadingImages(t){if(!t)return!1;const n=e=>{var o;if(!e)return!1;if(e.type==="image"&&((o=e.attrs)!=null&&o.isLoading))return!0;if(e.content){if(!Array.isArray(e.content))return!1;for(const r of e.content)if(n(r))return!0}return!1};return n(t)}};$t(Di,"IMAGE_PASTE_HANDLER_PLUGIN_KEY",new Af("augment-prosemirror-image-paste-handler"));let ki=Di;function Hg(i,t,n){let{maxImages:e}=t,{saveImage:o}=t,{deleteImage:r}=t,{renderImage:s}=t,{isEditable:c=()=>!0}=t,{changeImageMode:a}=t;const l=new ki({changeImageMode:a,maxImages:e,saveImage:o,deleteImage:r,renderImage:s,isEditable:c,maxImageSizeKb:1024}),u=kt(Ns.CONTEXT_KEY).pluginManager.registerPlugin(l);return qr(u),i.$$set=$=>{"maxImages"in $&&n(0,e=$.maxImages),"saveImage"in $&&n(1,o=$.saveImage),"deleteImage"in $&&n(2,r=$.deleteImage),"renderImage"in $&&n(3,s=$.renderImage),"isEditable"in $&&n(4,c=$.isEditable),"changeImageMode"in $&&n(5,a=$.changeImageMode)},[e,o,r,s,c,a]}let Ug=class extends ut{constructor(i){super(),dt(this,i,Hg,null,lt,{maxImages:0,saveImage:1,deleteImage:2,renderImage:3,isEditable:4,changeImageMode:5})}};function oc(i){return i.line_start===i.line_end?`L${i.line_start+1}`:`L${i.line_start+1}-${i.line_end+1}`}const _m=[{id:"find",label:"find",description:"things in your code base",requiresInput:!0,requiresEditorSelection:!1,placeholderText:"What code are you looking for?",selectionReminderMessage:"Select code in the editor to find.",visible:!0,promptFactory:async i=>`Find ${i}`},{id:"explain",label:"explain",description:"how selected code works",requiresInput:!1,requiresEditorSelection:!0,placeholderText:"",selectionReminderMessage:"Select code in the editor to explain.",visible:!0,promptFactory:async()=>"Explain the selected code"},{id:"fix",label:"fix",description:"issues in selected code",requiresInput:!1,requiresEditorSelection:!0,placeholderText:"",selectionReminderMessage:"Select code in the editor to fix.",visible:!0,promptFactory:async function(i,t){const n=await async function(o){let r=[];try{r=await o.extensionClient.getDiagnostics()}catch(s){console.error("Failed to get diagnostic messages:",s)}return r}(t);let e="Fix the selected code.";return e+=function(o){if(o.length===0)return" The IDE does not report any issues on the selected code.";if(o.length===1)return` The IDE reports the following issue:

• ${oc(o[0].location)}: ${o[0].message}`;{const r=o.sort((l,u)=>l.location.line_start-u.location.line_start).reduce((l,u)=>{const $=`${u.location.line_start},${u.location.line_end}`;return l[$]||(l[$]=[]),l[$].push(u),l},{}),s=Object.entries(r).map(([l,u])=>{const[$,f]=l.split(",").map(Number),p=oc({path:"",line_start:$,line_end:f});return u.length===1?`• ${p}: ${u[0].message}`:`• ${p}:
${u.map((_,C)=>`    ${C+1}. ${_.message}`).join(`
`)}`}).join(`
`),c=Math.min(...o.map(l=>l.location.line_start)),a=Math.max(...o.map(l=>l.location.line_end));return` The IDE reports the following issues on ${c===a?`L${c+1}`:`L${c+1}-${a+1}`}:

${s}`}}(n),e}},{id:"write-test",label:"write-test",description:"add tests for selected code",requiresInput:!1,requiresEditorSelection:!0,placeholderText:"",selectionReminderMessage:"Select code in the editor to test.",visible:!0,promptFactory:async()=>"Write a test for the selected code"},{id:"document",label:"document",description:"write documentation for selected code",requiresInput:!1,requiresEditorSelection:!0,placeholderText:"",selectionReminderMessage:"Select code in the editor to document.",visible:!0,promptFactory:async()=>"Document selected code. Do not make unnecessary changes."},{id:"generate-commit-message",label:"generate-commit-message",description:"generate a commit message",requiresInput:!1,requiresEditorSelection:!1,placeholderText:"",selectionReminderMessage:"Hit enter or send to generate a commit message",visible:!0,promptFactory:async()=>""}];function _i(i){return _m.find(t=>t.id===i)}function Cm(){return _m.filter(i=>i.visible)}class qg{constructor(t,n){$t(this,"_model");$t(this,"_fn");$t(this,"dispose",()=>{this._model.removeAfterCommandListener(this._fn)});this._model=t,this._fn=n}}class jg{constructor(t,n){$t(this,"_activeCommand",Re(void 0));$t(this,"_isActiveCommandRunnable",Re(!1));$t(this,"_afterCommandListeners",[]);$t(this,"_inputText","");$t(this,"_selections",[]);$t(this,"hasActiveCommand",Hn(this._activeCommand,t=>t!==void 0));$t(this,"isActiveCommandRunnable",as(this._isActiveCommandRunnable));$t(this,"activeCommand",as(this._activeCommand));$t(this,"activeCommandData",Hn(this._activeCommand,t=>_i(t)));this._chatModel=t,this._agentConversationModel=n}get inputText(){return this._inputText}get selections(){return this._selections}setActiveCommand(t){this._activeCommand.set(t),this.updateRunnable()}setInputText(t){this._inputText=t,this.updateRunnable()}setSelections(t){this._selections=t,this.updateRunnable()}async runActiveCommand(){var e,o,r;const t=_i(re(this._activeCommand));if(!t)return;const n=await t.promptFactory(this._inputText,this._chatModel);this._activeCommand.set(void 0),await this._chatModel.setCurrentConversation(),t.id==="generate-commit-message"?(e=this._chatModel.currentConversationModel)==null||e.generateCommitMessage():(r=this._chatModel.currentConversationModel)==null||r.sendExchange({request_message:n,rich_text_json_repr:void 0,status:on.draft,model_id:((o=this._chatModel.currentConversationModel)==null?void 0:o.selectedModelId)??void 0}),this._chatModel.host.postMessage({type:We.usedSlashAction}),this.reportCommandMetric(t.id),this._afterCommandListeners.forEach(s=>s(n))}reportCommandMetric(t){switch(t){case"fix":this._chatModel.extensionClient.reportWebviewClientEvent(nr.chatUseActionFix);break;case"explain":this._chatModel.extensionClient.reportWebviewClientEvent(nr.chatUseActionExplain);break;case"write-test":this._chatModel.extensionClient.reportWebviewClientEvent(nr.chatUseActionWriteTest);break;case"find":this._chatModel.extensionClient.reportWebviewClientEvent(nr.chatUseActionFind)}}cancelActiveCommand(){this._activeCommand.set(void 0),this._afterCommandListeners.forEach(t=>t(void 0))}afterCommand(t){return this._afterCommandListeners.push(t),new qg(this,t)}removeAfterCommandListener(t){this._afterCommandListeners=this._afterCommandListeners.filter(n=>n!==t)}updateRunnable(){let t=!1;const n=re(this._activeCommand),e=_i(n);n!==void 0&&e!==void 0&&(t=!0,e!=null&&e.requiresInput&&(t=t&&this._inputText!==""),e!=null&&e.requiresEditorSelection&&(t=t&&this._selections.length>0)),this._isActiveCommandRunnable.set(t)}handleMessageFromExtension(t){const n=t.data;return n.type===We.runSlashCommand&&(n.data==="fix"?this._createNewAgentThreadForFix():re(this._agentConversationModel.isCurrConversationAgentic)&&this._agentConversationModel.setToChat(),this.setActiveCommand(n.data),this.runActiveCommand(),!0)}async _createNewAgentThreadForFix(){const t=this._chatModel._chatModeModel;if(t){const n=re(this._chatModel.agentExecutionMode);await t.createNewLocalAgentThread(n)}else re(this._agentConversationModel.isCurrConversationAgentic)||this._agentConversationModel.setToAgentic()}}function rc(i,t){return function(n,e){if(n.length<=e||n.length===0)return{truncatedText:n};const o=n.split(`
`),r="... additional lines truncated ..."+(o[0].endsWith("\r")?"\r":"");let s,c="";if(o.length<2||o[0].length+o[o.length-1].length+r.length>e){const a=Math.floor(e/2);c=[n.slice(0,a),"<...>",n.slice(-a)].join(""),s=[1,1,o.length,o.length]}else{const a=[],l=[];let u=r.length+1;for(let $=0;$<Math.floor(o.length/2);$++){const f=o[$],p=o[o.length-1-$],_=f.length+p.length+2;if(u+_>e)break;u+=_,a.push(f),l.push(p)}s=[1,a.length,o.length-l.length+1,o.length],a.push(r),a.push(...l.reverse()),c=a.join(`
`)}return{truncatedText:c,shownRangeWhenTruncated:s}}(i,t).truncatedText}async function Wg(i,t,n,e=1024){try{const o=function(s,c,a){const l=atob(s);let u=l.length;const $=new Uint8Array(u);for(;u--;)$[u]=l.charCodeAt(u);return new File([$],c,{type:a})}(i,t,n),r=await bm(o,e);return new Promise((s,c)=>{const a=new FileReader;a.onloadend=()=>{if(typeof a.result=="string"){const l=a.result.split(","),u=l.length>1?l[1]:a.result;s({dataUrl:u,mimeType:"image/png"})}else c(new Error("Failed to convert blob to data URL"))},a.onerror=l=>{c(new Error("FileReader error"))},a.readAsDataURL(r)})}catch(o){return console.error("Error scaling image:",o),{dataUrl:i,mimeType:n}}}async function Vg(i,t=!0){if(!i.contentNodes||i.contentNodes.length===0)return i;const n=await async function(e,o=!0){const r=[];for(const s of e)if(s.type===$s.ContentImage&&s.image_content&&s.image_content.image_data){if(!o)continue;const c=s.image_content.image_data,a=s.image_content.media_type||"image/png",l=`image.${a.split("/")[1]||"png"}`,u=await Wg(c,l,a);r.push({type:$s.ContentImage,image_content:{image_data:u.dataUrl,media_type:u.mimeType}})}else r.push(s);return r}(i.contentNodes,t);return{...i,contentNodes:n}}const Gg={"save-file":`save-file tool call generation failed because tool input exceeded the token limit.
Please try again by limiting the file content to at most 300 lines. If more content needs to be added call save-file tool to edit the file after it has been created.
`,"str-replace-edit":`edit tool call generation failed because tool input exceeded the token limit.
Please try again by breaking down the edits into smaller chunks of at most 300 lines each. Then put as many of these chunks in a single tool call as possible up to the total limit of 300 lines.
`},Pi=class Pi{constructor(t,n,e,o){$t(this,"_disposables",[]);$t(this,"_activeTool");$t(this,"_processLastExchange",(t,n)=>{var o;if(n.stop_reason===Oa.MAX_TOKENS&&this._handleMaxTokensRetry(t,n))return;const e=(o=n.structured_output_nodes)==null?void 0:o.filter(r=>r.type===Nr.TOOL_USE);for(const r of e??[]){const s=r.tool_use;if(s===void 0)continue;const c=this._conversationModel.getToolUseState(t,s.tool_use_id);c.phase===Ce.new&&this._validateAndCheckTool(t,s.tool_use_id,s.tool_name,JSON.parse(s.input_json),this._conversationModel.chatHistory.reduce((a,l)=>(Fr(l)&&a.push(ds(l)),a),[])),this._markCancelledIfStale(t,s.tool_use_id,c.phase)}});$t(this,"_handleMaxTokensRetry",(t,n)=>{var a;const e=N1(n.structured_output_nodes),o=e==null?void 0:e.tool_use;if(!o||(e==null?void 0:e.type)!==Nr.TOOL_USE_START)return!1;const r=this._conversationModel.chatHistory.filter(Fr).slice(-6).filter(l=>{var u;return l.stop_reason===Oa.MAX_TOKENS&&((u=l.structured_output_nodes)==null?void 0:u.some($=>$.type===Nr.TOOL_USE_START))});if(r.length>2)return this._conversationModel.updateChatItem(t,{...n,response_text:"",display_error_message:`We encountered difficulties running the ${o.tool_name} tool after attempting ${r.length} different approaches.`,status:on.failed}),this._conversationModel.updateToolUseState({requestId:t,toolUseId:o.tool_use_id,phase:Ce.error}),!0;const s=o.tool_use_id;if(!((a=this._conversationModel.getToolUseState(t,s).result)!=null&&a.isError)){const l=function(u,$=0){const f=Gg[u];if(!f)return"";switch($){case 0:return f;case 1:return f+", be better this time.";default:return`${u} tool call generation failed because tool input exceeded the token limit. Take some care in making smaller chunks`}}(o.tool_name,r.length);this._conversationModel.updateToolUseState({requestId:t,toolUseId:s,phase:Ce.error,result:{text:l,isError:!0}}),this._sendToolResultExchange(t,o.tool_use_id)}return!0});$t(this,"_validateAndCheckTool",async(t,n,e,o,r)=>{var l;const s=this._conversationModel.id;if(this._activeTool!==void 0)return void console.error("_validateAndCheckTool called while another tool is active",this._activeTool);this._activeTool={id:n,requestId:t,phase:Ce.checkingSafety},this._conversationModel.updateToolUseState({requestId:t,toolUseId:n,phase:Ce.checkingSafety});const c=await this._extensionClient.getToolIdentifier(e);if(!c.found)return this._activeTool=void 0,void this._reportToolError(t,n,`Tool "${e}" does not exist`);if(c.toolIdentifier.hostName===Pa.mcpHost){const u=this._conversationModel.lastExchange;if(u!=null&&u.structured_output_nodes){const $=u.structured_output_nodes.find(f=>{var p;return f.type===Nr.TOOL_USE&&((p=f.tool_use)==null?void 0:p.tool_use_id)===n});$!=null&&$.tool_use&&c.mcpToolName&&c.mcpServerName&&($.tool_use.mcp_server_name=c.mcpServerName,$.tool_use.mcp_tool_name=c.mcpToolName)}}if(re(this._chatModel.agentExecutionMode)===fo.auto&&((l=this._conversationModel.extraData)!=null&&l.isAgentConversation)&&c.toolIdentifier.hostName!==Pa.remoteToolHost)return this._activeTool=void 0,void await this.callTool(t,n,e,o,r,s);const a=await this._extensionClient.checkSafe(e,o);this._activeTool=void 0,a?await this.callTool(t,n,e,o,r,this._conversationModel.id):this._conversationModel.updateToolUseState({requestId:t,toolUseId:n,phase:Ce.runnable})});$t(this,"_reportToolError",(t,n,e)=>{this._conversationModel.updateToolUseState({requestId:t,toolUseId:n,phase:Ce.error,result:{isError:!0,text:e}}),this._sendToolResultExchange(t,n)});$t(this,"_sendToolResultExchange",(t,n)=>{const e=this._conversationModel.getLastToolUseState(),o=this._generateToolResultNodesFromState(t,n);(e==null?void 0:e.requestId)===t&&(e==null?void 0:e.toolUseId)===n&&o?this._conversationModel.sendExchange({request_message:"",status:on.draft,structured_request_nodes:[{id:1,type:af.TOOL_RESULT,tool_result_node:o}],model_id:this._conversationModel.selectedModelId??void 0}):o?this._extensionClient.reportError({originalRequestId:t,sanitizedMessage:"Tried to send tool result after conversation advanced",stackTrace:"",diagnostics:[{key:"tool_use_id",value:n}]}):this._extensionClient.reportError({originalRequestId:t,sanitizedMessage:"Tried to send tool result, but no tool result found",stackTrace:"",diagnostics:[{key:"tool_use_id",value:n},{key:"request_id",value:t}]})});$t(this,"callTool",async(t,n,e,o,r,s)=>{var c,a;if(this._activeTool===void 0){this._conversationModel.updateToolUseState({requestId:t,toolUseId:n,phase:Ce.running}),this._activeTool={id:n,requestId:t,phase:Ce.running};try{const l=function(p,_){if(p.contentNodes&&p.contentNodes.length>0){const C=p.contentNodes.map(M=>{if(M.type===$s.ContentText){let T="";return M.text_content&&(T=rc(M.text_content,_/p.contentNodes.length)),{...M,text_content:T}}return M});return{...p,contentNodes:C}}return{...p,text:rc(p.text,_)}}(await this._extensionClient.callTool(t,n,e,o,r,s),Pi.maxResultBytes),u=await Vg(l,this._chatModel.flags.enableDebugFeatures),$=this._conversationModel.getToolUseState(t,n);if($.phase===Ce.new||$.phase===Ce.cancelled)return;if($.phase===Ce.cancelling)return void this._conversationModel.updateToolUseState({requestId:t,toolUseId:n,phase:Ce.cancelled,result:u});let f=u.isError?Ce.error:Ce.completed;this._conversationModel.updateToolUseState({requestId:t,toolUseId:n,phase:f,result:u})}catch(l){const u=this._conversationModel.getToolUseState(t,n);if(u.phase===Ce.new||u.phase===Ce.cancelled)return;const $=l instanceof Error?l.message:String(l);if(u.phase===Ce.cancelling)return void this._conversationModel.updateToolUseState({requestId:t,toolUseId:n,phase:Ce.cancelled,result:{isError:!0,text:$}});this._conversationModel.updateToolUseState({requestId:t,toolUseId:n,phase:Ce.error,result:{isError:!0,text:$}})}finally{((c=this._activeTool)==null?void 0:c.id)===n&&((a=this._activeTool)==null?void 0:a.requestId)===t&&(this._activeTool=void 0)}this._sendToolResultExchange(t,n)}else console.error("callTool called while another tool is active","tried to run:",n,"active tool:",this._activeTool)});$t(this,"cancelToolRun",async(t,n)=>{var e,o;this._remoteAgentsModel&&this._remoteAgentsModel.isActive&&await this._remoteAgentsModel.interruptAgent(),this._activeTool!==void 0&&this._activeTool.requestId===t&&this._activeTool.id===n?(this._activeTool={id:n,requestId:t,phase:Ce.cancelling},this._conversationModel.updateToolUseState({requestId:t,toolUseId:n,phase:Ce.cancelling}),await this._extensionClient.cancelToolRun(t,n),((e=this._activeTool)==null?void 0:e.id)===n&&((o=this._activeTool)==null?void 0:o.requestId)===t&&(this._activeTool=void 0)):console.error("cancelToolRun called while another tool is active","tried to cancel:",n,"active tool:",this._activeTool)});$t(this,"skipToolRun",async(t,n)=>{this._activeTool===void 0?(this._conversationModel.updateToolUseState({requestId:t,toolUseId:n,phase:Ce.cancelled,result:{isError:!0,text:"Tool did not run. User clicked `Skip` to cancel."}}),this._sendToolResultExchange(t,n)):console.error("skipToolRun called while another tool is active","tried to cancel:",n,"active tool:",this._activeTool)});$t(this,"_markCancelledIfStale",(t,n,e)=>{this._activeTool!==void 0&&this._activeTool.id===n&&this._activeTool.requestId===t||e!==Ce.new&&e!==Ce.checkingSafety&&e!==Ce.cancelling&&e!==Ce.running||this._conversationModel.updateToolUseState({requestId:t,toolUseId:n,phase:Ce.cancelled})});$t(this,"cancelActiveToolRun",async()=>{this._activeTool!==void 0&&await this.cancelToolRun(this._activeTool.requestId,this._activeTool.id)});$t(this,"interruptAllTools",async()=>{O1(this._conversationModel),await this.cancelActiveToolRun();const t=this._conversationModel.lastExchange;t&&!Q1(t)&&this._conversationModel.addChatItem({request_id:crypto.randomUUID(),status:on.cancelled,chatItemType:mo.agenticTurnDelimiter})});$t(this,"interruptToolsConversation",async()=>{await this._conversationModel.cancelMessage(),await this.interruptAllTools()});$t(this,"dispose",()=>{this._disposables.forEach(t=>t.dispose())});let r;this._conversationModel=t,this._extensionClient=n,this._chatModel=e,this._remoteAgentsModel=o;const s=this._conversationModel.subscribe(l=>{const u=l.lastExchange;if(Fr(u)&&u.request_id!==void 0){const $=u.request_id;r!==$&&(this._processLastExchange($,u),r=$)}}),c=this._conversationModel.onNewConversation(()=>{this._extensionClient.closeAllToolProcesses()}),a=this._conversationModel.onHistoryDelete(()=>{this.cancelActiveToolRun()});this._disposables.push({dispose:s},{dispose:c},{dispose:a})}_generateToolResultNodesFromState(t,n){var r,s;const e=this._conversationModel.getToolUseState(t,n);if(e.phase!==Ce.cancelled&&e.phase!==Ce.completed&&e.phase!==Ce.error)return;let o;return(r=e.result)!=null&&r.contentNodes?(o=F1(e.result.contentNodes,this._chatModel.flags.enableDebugFeatures),{content:"",is_error:e.result.isError,request_id:e.result.requestId,tool_use_id:n,content_nodes:o}):(s=e.result)!=null&&s.text?{content:e.result.text,is_error:e.result.isError,request_id:e.result.requestId,tool_use_id:n}:void 0}async getToolCallCheckpoint(t){try{return await this._extensionClient.getToolCallCheckpoint(t)}catch(n){return void console.error("Failed to get tool call checkpoint:",n)}}};$t(Pi,"maxResultBytes",65536);let ws=Pi;const Kg="You can only have %MAX_AGENTS% agents at a time. Please delete some before creating a new one.",cT="You can only have %MAX_AGENTS% active agents at a time. Please pause some before creating a new one.",Or=10,ys=1024;function xs(i){const t=function(e){if(!e)return[];const o=[],r=s=>{if(s&&(s.type==="image"&&s.attrs&&o.push({src:s.attrs.src||"",title:s.attrs.title||"",fileSizeBytes:Number(s.attrs.fileSizeBytes)||0,isLoading:!!s.attrs.isLoading}),s.content&&Array.isArray(s.content)))for(const c of s.content)r(c)};return r(e),o}(i),n=t.filter(e=>!e.isLoading);return{imageCount:n.length,imageSizeSumKb:Math.round(n.reduce((e,o)=>e+o.fileSizeBytes,0)/1024)}}const Am=(i,t,n,e,o)=>()=>{var l,u;if(o)return!1;const r=((l=t.draftExchange)==null?void 0:l.request_message)??"",s=(u=t.draftExchange)==null?void 0:u.rich_text_json_repr,c=()=>{t.draftExchange||t.saveDraftExchange(r,s)};if(!i.currentAgentId){if(i.isCreatingAgent)return!1;i.setIsCreatingAgent(!0),t.clearDraftExchange();const $=async()=>{try{const f=await i.createRemoteAgentFromDraft(r,t.selectedModelId??void 0);f?i==null||i.setCurrentAgent(f):c()}catch(f){console.error("Failed to create remote agent: ",f),c()}finally{i.setIsCreatingAgent(!1)}};return n?(n==null||n.isGithubAuthenticated().then(f=>{if(!f)return i.setIsCreatingAgent(!1),void c();$()}).catch(f=>{console.error("Failed to check GitHub authentication status:",f),i.setIsCreatingAgent(!1),c()}),!0):($(),!0)}const a=t.draftExchange;if(a&&i){t.clearDraftExchange();const $=t.selectedModelId;i.sendMessage(a.request_message,$??void 0).then(f=>{f||c()}).catch(()=>{c()})}return setTimeout(()=>e==null?void 0:e.blur(),50),!0};async function vi(i,t){await i.interruptAgent(),t.sendDraftExchange()}async function Yg(i,t,n,e,o){var r,s,c;switch(i){case Mi.send:return void await vi(n,t);case Mi.addTask:{if(!((r=e.flags)!=null&&r.enableTaskList)||!o||!t.rootTaskUuid)return void await vi(n,t);const a=((c=(s=t.draftExchange)==null?void 0:s.request_message)==null?void 0:c.trim())||"";if(!a)return;try{await async function(u,$,f){if(!f)throw new Error("No root task found for current conversation");const p=function(M){if(M=M.trim(),!M)return;const T=M.indexOf(`
`),E=M.substring(0,T===-1?void 0:T),R=M.substring(T).trim().replace(/\n/g," ");return{name:E,description:R}}($);if(!p)return;const{name:_,description:C}=p;return await u.createTask(_,C,f)}(o,a,t.rootTaskUuid)&&t.clearDraftExchange()}catch(l){console.error("Task creation failed, falling back to regular send:",l),await vi(n,t)}return}default:return void await vi(n,t)}}function Xg(i,t,n,e,o,r,s,c,a){var C,M,T;const l=i.currentConversationModel;if(!l)return{stateName:"noConversation",showCancelButton:!1,isDisabled:!0,disabledReason:"No active conversation",action:()=>!1,cancelAction:()=>!1};const u=re(e.activeCommand),$=re(t.isCurrConversationAgentic),f=(((M=(C=l.draftExchange)==null?void 0:C.request_message)==null?void 0:M.length)||0)>Br,p=(()=>{var E,R;if((E=i.flags)!=null&&E.enableChatMultimodal){const P=(R=l.draftExchange)==null?void 0:R.rich_text_json_repr;return!!P&&ki.hasLoadingImages(P)}return!1})(),_=(()=>{var E,R;if((E=i.flags)!=null&&E.enableChatMultimodal){const P=(R=l.draftExchange)==null?void 0:R.rich_text_json_repr;if(!P)return!1;const J=xs(P);return J.imageCount>Or||J.imageSizeSumKb>ys}return!1})();if(f)return{stateName:"overCharLimit",showCancelButton:!1,isDisabled:!0,disabledReason:`Message exceeds the ${Br} character limit`,action:()=>!1,cancelAction:()=>!1};if(_){const E=(T=l.draftExchange)==null?void 0:T.rich_text_json_repr,R=xs(E);return{stateName:"overImageLimit",showCancelButton:!1,isDisabled:!0,disabledReason:R.imageCount>Or?`Up to ${Or} images are supported.`:`Total image size exceeds the ${ys}KB limit. Current size: ${R.imageSizeSumKb}KB`,action:()=>!1,cancelAction:()=>!1}}return s!=null&&s.isActive?function(E,R,P,J){var Y,Z,it,rt,ht,ct,vt,Gt;let K=!1;E.agentOverviews&&(K=!!E.maxRemoteAgents&&E.agentOverviews.length>=E.maxRemoteAgents);let et=!1;const U=E.isCreatingAgent||(E==null?void 0:E.isActive)&&((Y=E==null?void 0:E.currentAgent)==null?void 0:Y.status)===rn.agentStarting,G=((Z=E==null?void 0:E.currentAgent)==null?void 0:Z.status)===rn.agentFailed;if(E.currentAgentId)et=!((it=R.draftExchange)!=null&&it.request_message)||U||G;else{const Ct=E.newAgentDraft;et=!((rt=R.draftExchange)!=null&&rt.request_message)||E.isCreatingAgent||K||!((ct=(ht=Ct==null?void 0:Ct.commitRef)==null?void 0:ht.github_commit_ref)!=null&&ct.repository_url)||!((vt=Ct.selectedBranch)!=null&&vt.name)}const nt=E.isCurrentAgentRunning&&!U;let X;return et&&((Gt=R.draftExchange)!=null&&Gt.request_message?E.isCreatingAgent?X="Creating agent...":U?X="Agent is starting...":G?X="Agent has failed and cannot accept messages":K&&(X=Kg.replace("%MAX_AGENTS%",E.maxRemoteAgents.toString())):X="Please enter a message"),{stateName:"remoteAgentMode",showCancelButton:nt,isDisabled:et,disabledReason:X,action:Am(E,R,P,J,et),cancelAction:()=>(E.interruptAgent(),!0)}}(s,l,c,a):p?{stateName:"imagesLoading",showCancelButton:!1,isDisabled:!0,action:()=>!1,cancelAction:()=>($?t.interruptAgent().catch(E=>{console.error("Failed to interrupt agent:",E)}):n.interruptToolsConversation(),!0)}:u?{stateName:"slashCommandActive",showCancelButton:!1,isDisabled:!1,action:()=>(e.runActiveCommand(),l.clearDraftExchange(),!0),cancelAction:()=>!1}:$?{stateName:"agentMode",showCancelButton:!1,isDisabled:!l.hasDraft,action:()=>(Yg(o,l,t,i,r),!0),cancelAction:()=>(t.interruptAgent().catch(E=>{console.error("Failed to interrupt agent:",E)}),!0)}:{stateName:"chatMode",showCancelButton:l.canCancelMessage,isDisabled:!l.canSendDraft,action:()=>(l.sendDraftExchange(),!0),cancelAction:Zg(t,n)}}function Zg(i,t){return()=>(re(i.isCurrConversationAgentic)?i.interruptAgent().catch(n=>{console.error("Failed to interrupt agent:",n)}):t.interruptToolsConversation(),!0)}const Jg=navigator.platform.toUpperCase().indexOf("MAC")>=0;var Mm=(i=>(i.cmd="⌘",i.shift="⇧",i.plus="+",i.minus="-",i.at="@",i.arrowUp="↑",i.arrowDown="↓",i.enter="⏎",i.esc="⎋",i.backspace="⌫",i))(Mm||{}),km=(i=>(i.leftBracket="[",i.rightBracket="]",i.forwardSlash="/",i.backSlash="\\",i.ctrl="Ctrl",i.L="L",i.R="R",i))(km||{});const Si={cmdOrCtrl:Jg?"⌘":"Ctrl"};function Qg(i){let t,n=i[4].primaryText+"";return{c(){t=V(n)},m(e,o){b(e,t,o)},p(e,o){16&o&&n!==(n=e[4].primaryText+"")&&bt(t,n)},d(e){e&&x(t)}}}function ic(i){let t,n;return t=new Wt({props:{size:1,class:"c-mode-secondary-label",$$slots:{default:[t0]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};272&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function t0(i){let t,n=i[4].secondaryText+"";return{c(){t=V(n)},m(e,o){b(e,t,o)},p(e,o){16&o&&n!==(n=e[4].secondaryText+"")&&bt(t,n)},d(e){e&&x(t)}}}function e0(i){let t,n,e;return n=new Ps({}),{c(){t=L("div"),v(n.$$.fragment),A(t,"class","c-mode-checkmark svelte-mfvmmy")},m(o,r){b(o,t,r),w(n,t,null),e=!0},i(o){e||(d(n.$$.fragment,o),e=!0)},o(o){m(n.$$.fragment,o),e=!1},d(o){o&&x(t),y(n)}}}function n0(i){let t,n,e,o,r;return o=new As({}),{c(){t=L("div"),n=L("span"),n.textContent="Creates new thread",e=H(),v(o.$$.fragment),A(n,"class","c-mode-right-label__text svelte-mfvmmy"),A(t,"class","c-mode-right-label svelte-mfvmmy")},m(s,c){b(s,t,c),O(t,n),O(t,e),w(o,t,null),r=!0},i(s){r||(d(o.$$.fragment,s),r=!0)},o(s){m(o.$$.fragment,s),r=!1},d(s){s&&x(t),y(o)}}}function sc(i){let t,n,e;return n=new Wt({props:{size:1,class:"c-mode-secondary-label",$$slots:{default:[o0]},$$scope:{ctx:i}}}),{c(){t=L("div"),v(n.$$.fragment),A(t,"class","c-mode-display__bottom svelte-mfvmmy"),At(t,"c-mode-display__bottom--hidden",!i[2])},m(o,r){b(o,t,r),w(n,t,null),e=!0},p(o,r){const s={};258&r&&(s.$$scope={dirty:r,ctx:o}),n.$set(s),(!e||4&r)&&At(t,"c-mode-display__bottom--hidden",!o[2])},i(o){e||(d(n.$$.fragment,o),e=!0)},o(o){m(n.$$.fragment,o),e=!1},d(o){o&&x(t),y(n)}}}function o0(i){let t;return{c(){t=V(i[1])},m(n,e){b(n,t,e)},p(n,e){2&e&&bt(t,n[1])},d(n){n&&x(t)}}}function r0(i){let t,n,e,o,r,s,c,a,l,u,$;var f=i[4].icon;f&&(e=sn(f,{})),r=new Wt({props:{size:1,$$slots:{default:[Qg]},$$scope:{ctx:i}}});let p=i[4].secondaryText&&ic(i);const _=[n0,e0],C=[];function M(E,R){return E[0]?0:E[3]?1:-1}~(a=M(i))&&(l=C[a]=_[a](i));let T=i[1]&&sc(i);return{c(){t=L("div"),n=L("div"),e&&v(e.$$.fragment),o=H(),v(r.$$.fragment),s=H(),p&&p.c(),c=H(),l&&l.c(),u=H(),T&&T.c(),A(n,"class","c-mode-display__top svelte-mfvmmy"),A(t,"class","c-mode-display svelte-mfvmmy")},m(E,R){b(E,t,R),O(t,n),e&&w(e,n,null),O(n,o),w(r,n,null),O(n,s),p&&p.m(n,null),O(n,c),~a&&C[a].m(n,null),O(t,u),T&&T.m(t,null),$=!0},p(E,[R]){if(16&R&&f!==(f=E[4].icon)){if(e){q();const K=e;m(K.$$.fragment,1,0,()=>{y(K,1)}),j()}f?(e=sn(f,{}),v(e.$$.fragment),d(e.$$.fragment,1),w(e,n,o)):e=null}const P={};272&R&&(P.$$scope={dirty:R,ctx:E}),r.$set(P),E[4].secondaryText?p?(p.p(E,R),16&R&&d(p,1)):(p=ic(E),p.c(),d(p,1),p.m(n,c)):p&&(q(),m(p,1,1,()=>{p=null}),j());let J=a;a=M(E),a!==J&&(l&&(q(),m(C[J],1,1,()=>{C[J]=null}),j()),~a?(l=C[a],l||(l=C[a]=_[a](E),l.c()),d(l,1),l.m(n,null)):l=null),E[1]?T?(T.p(E,R),2&R&&d(T,1)):(T=sc(E),T.c(),d(T,1),T.m(t,null)):T&&(q(),m(T,1,1,()=>{T=null}),j())},i(E){$||(e&&d(e.$$.fragment,E),d(r.$$.fragment,E),d(p),d(l),d(T),$=!0)},o(E){e&&m(e.$$.fragment,E),m(r.$$.fragment,E),m(p),m(l),m(T),$=!1},d(E){E&&x(t),e&&y(e),y(r),p&&p.d(),~a&&C[a].d(),T&&T.d()}}}function i0(i,t,n){let e,{isConversationAgentic:o=!1}=t,{agentExecutionMode:r}=t,{isBackgroundAgent:s=!1}=t,{willStartNewThread:c=!1}=t,{description:a=""}=t,{doShowSecondaryText:l=!0}=t,{selected:u=!1}=t;return i.$$set=$=>{"isConversationAgentic"in $&&n(5,o=$.isConversationAgentic),"agentExecutionMode"in $&&n(6,r=$.agentExecutionMode),"isBackgroundAgent"in $&&n(7,s=$.isBackgroundAgent),"willStartNewThread"in $&&n(0,c=$.willStartNewThread),"description"in $&&n(1,a=$.description),"doShowSecondaryText"in $&&n(2,l=$.doShowSecondaryText),"selected"in $&&n(3,u=$.selected)},i.$$.update=()=>{224&i.$$.dirty&&n(4,e=zi({isConversationAgentic:o,agentExecutionMode:r,isBackgroundAgent:s}))},[c,a,l,u,e,o,r,s]}new Set(Object.values(km));class s0 extends ut{constructor(t){super(),dt(this,t,i0,r0,lt,{isConversationAgentic:5,agentExecutionMode:6,isBackgroundAgent:7,willStartNewThread:0,description:1,doShowSecondaryText:2,selected:3})}}function a0(i){let t,n,e;return n=new s0({props:{isConversationAgentic:i[2],agentExecutionMode:i[3],isBackgroundAgent:i[5],willStartNewThread:i[6],description:i[1],selected:i[4]}}),{c(){t=L("div"),v(n.$$.fragment),A(t,"class","c-mode-display-item svelte-1kjq29y")},m(o,r){b(o,t,r),w(n,t,null),e=!0},p(o,r){const s={};4&r&&(s.isConversationAgentic=o[2]),8&r&&(s.agentExecutionMode=o[3]),32&r&&(s.isBackgroundAgent=o[5]),64&r&&(s.willStartNewThread=o[6]),2&r&&(s.description=o[1]),16&r&&(s.selected=o[4]),n.$set(s)},i(o){e||(d(n.$$.fragment,o),e=!0)},o(o){m(n.$$.fragment,o),e=!1},d(o){o&&x(t),y(n)}}}function c0(i){let t,n,e,o;const r=[{onSelect:i[9]},i[7]];let s={$$slots:{default:[a0]},$$scope:{ctx:i}};for(let c=0;c<r.length;c+=1)s=Et(s,r[c]);return n=new xt.Item({props:s}),{c(){t=L("div"),v(n.$$.fragment),A(t,"class",e="c-mode-display-item-container "+i[8]+" svelte-1kjq29y"),At(t,"c-mode-display-item--selected",i[4])},m(c,a){b(c,t,a),w(n,t,null),o=!0},p(c,[a]){const l=129&a?De(r,[1&a&&{onSelect:c[9]},128&a&&go(c[7])]):{};2174&a&&(l.$$scope={dirty:a,ctx:c}),n.$set(l),(!o||256&a&&e!==(e="c-mode-display-item-container "+c[8]+" svelte-1kjq29y"))&&A(t,"class",e),(!o||272&a)&&At(t,"c-mode-display-item--selected",c[4])},i(c){o||(d(n.$$.fragment,c),o=!0)},o(c){m(n.$$.fragment,c),o=!1},d(c){c&&x(t),y(n)}}}function l0(i,t,n){let e,o;const r=["onSelect","description","isConversationAgentic","agentExecutionMode","selected","isBackgroundAgent","willStartNewThread"];let s=gr(t,r),{onSelect:c}=t,{description:a=""}=t,{isConversationAgentic:l=!1}=t,{agentExecutionMode:u}=t,{selected:$=!1}=t,{isBackgroundAgent:f=!1}=t,{willStartNewThread:p=!1}=t;return i.$$set=_=>{t=Et(Et({},t),ae(_)),n(10,s=gr(t,r)),"onSelect"in _&&n(0,c=_.onSelect),"description"in _&&n(1,a=_.description),"isConversationAgentic"in _&&n(2,l=_.isConversationAgentic),"agentExecutionMode"in _&&n(3,u=_.agentExecutionMode),"selected"in _&&n(4,$=_.selected),"isBackgroundAgent"in _&&n(5,f=_.isBackgroundAgent),"willStartNewThread"in _&&n(6,p=_.willStartNewThread)},i.$$.update=()=>{n(8,{class:e="",...o}=s,e,(n(7,o),n(10,s)))},[c,a,l,u,$,f,p,o,e,_=>{c(_)}]}class yr extends ut{constructor(t){super(),dt(this,t,l0,c0,lt,{onSelect:0,description:1,isConversationAgentic:2,agentExecutionMode:3,selected:4,isBackgroundAgent:5,willStartNewThread:6})}}function u0(i){let t,n=i[4].primaryText+"";return{c(){t=V(n)},m(e,o){b(e,t,o)},p(e,o){16&o&&n!==(n=e[4].primaryText+"")&&bt(t,n)},d(e){e&&x(t)}}}function d0(i){let t,n,e;var o=i[4].icon;return o&&(t=sn(o,{props:{slot:"iconLeft"}})),{c(){t&&v(t.$$.fragment),n=ft()},m(r,s){t&&w(t,r,s),b(r,n,s),e=!0},p(r,s){if(16&s&&o!==(o=r[4].icon)){if(t){q();const c=t;m(c.$$.fragment,1,0,()=>{y(c,1)}),j()}o?(t=sn(o,{props:{slot:"iconLeft"}}),v(t.$$.fragment),d(t.$$.fragment,1),w(t,n.parentNode,n)):t=null}},i(r){e||(t&&d(t.$$.fragment,r),e=!0)},o(r){t&&m(t.$$.fragment,r),e=!1},d(r){r&&x(n),t&&y(t,r)}}}function $0(i){let t,n;return t=new Uo({}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function m0(i){let t,n;return t=new R$({}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function f0(i){let t,n,e,o;const r=[m0,$0],s=[];function c(a,l){return a[0]?0:1}return t=c(i),n=s[t]=r[t](i),{c(){n.c(),e=ft()},m(a,l){s[t].m(a,l),b(a,e,l),o=!0},p(a,l){let u=t;t=c(a),t!==u&&(q(),m(s[u],1,1,()=>{s[u]=null}),j(),n=s[t],n||(n=s[t]=r[t](a),n.c()),d(n,1),n.m(e.parentNode,e))},i(a){o||(d(n),o=!0)},o(a){m(n),o=!1},d(a){a&&x(e),s[t].d(a)}}}function p0(i){let t,n;return t=new ve({props:{size:1,variant:i[1],color:i[2],disabled:i[3],$$slots:{iconRight:[f0],iconLeft:[d0],default:[u0]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,[o]){const r={};2&o&&(r.variant=e[1]),4&o&&(r.color=e[2]),8&o&&(r.disabled=e[3]),273&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function g0(i,t,n){let e,{isDropdownOpen:o}=t,{isCurrConversationAgentic:r}=t,{agentExecutionMode:s}=t,{isBackgroundAgent:c}=t,{variant:a="ghost"}=t,{color:l="neutral"}=t,{disabled:u=!1}=t;return i.$$set=$=>{"isDropdownOpen"in $&&n(0,o=$.isDropdownOpen),"isCurrConversationAgentic"in $&&n(5,r=$.isCurrConversationAgentic),"agentExecutionMode"in $&&n(6,s=$.agentExecutionMode),"isBackgroundAgent"in $&&n(7,c=$.isBackgroundAgent),"variant"in $&&n(1,a=$.variant),"color"in $&&n(2,l=$.color),"disabled"in $&&n(3,u=$.disabled)},i.$$.update=()=>{224&i.$$.dirty&&n(4,e=zi({isConversationAgentic:r,agentExecutionMode:s,isBackgroundAgent:!!c}))},[o,a,l,u,e,r,s,c]}class js extends ut{constructor(t){super(),dt(this,t,g0,p0,lt,{isDropdownOpen:0,isCurrConversationAgentic:5,agentExecutionMode:6,isBackgroundAgent:7,variant:1,color:2,disabled:3})}}function h0(i){let t,n,e,o,r={onOpenChange:i[16],nested:!1,$$slots:{default:[A0]},$$scope:{ctx:i}};t=new xt.Root({props:r}),i[27](t);let s=i[8]&&cc(i);return{c(){v(t.$$.fragment),n=H(),s&&s.c(),e=ft()},m(c,a){w(t,c,a),b(c,n,a),s&&s.m(c,a),b(c,e,a),o=!0},p(c,a){const l={};17006&a[0]|1&a[1]&&(l.$$scope={dirty:a,ctx:c}),t.$set(l),c[8]?s?(s.p(c,a),256&a[0]&&d(s,1)):(s=cc(c),s.c(),d(s,1),s.m(e.parentNode,e)):s&&(q(),m(s,1,1,()=>{s=null}),j())},i(c){o||(d(t.$$.fragment,c),d(s),o=!0)},o(c){m(t.$$.fragment,c),m(s),o=!1},d(c){c&&(x(n),x(e)),i[27](null),y(t,c),s&&s.d(c)}}}function v0(i){let t,n;return t=new zt({props:{content:"You can only interact with your remote agent in this window.",triggerOn:[te.Hover],side:"bottom",$$slots:{default:[k0]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};1&o[1]&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function w0(i){var e;let t,n;return t=new js({props:{isDropdownOpen:i[5],isCurrConversationAgentic:i[3],agentExecutionMode:i[1],isBackgroundAgent:(e=i[2])==null?void 0:e.isActive,variant:"ghost",color:"neutral"}}),{c(){v(t.$$.fragment)},m(o,r){w(t,o,r),n=!0},p(o,r){var c;const s={};32&r[0]&&(s.isDropdownOpen=o[5]),8&r[0]&&(s.isCurrConversationAgentic=o[3]),2&r[0]&&(s.agentExecutionMode=o[1]),4&r[0]&&(s.isBackgroundAgent=(c=o[2])==null?void 0:c.isActive),t.$set(s)},i(o){n||(d(t.$$.fragment,o),n=!0)},o(o){m(t.$$.fragment,o),n=!1},d(o){y(t,o)}}}function y0(i){let t,n;return t=new zt({props:{triggerOn:[te.Hover],side:"right",align:"start",$$slots:{content:[b0],default:[x0]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};46&o[0]|1&o[1]&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function x0(i){var e;let t,n;return t=new js({props:{isDropdownOpen:i[5],isCurrConversationAgentic:i[3],agentExecutionMode:i[1],isBackgroundAgent:(e=i[2])==null?void 0:e.isActive,variant:"ghost",color:"neutral"}}),{c(){v(t.$$.fragment)},m(o,r){w(t,o,r),n=!0},p(o,r){var c;const s={};32&r[0]&&(s.isDropdownOpen=o[5]),8&r[0]&&(s.isCurrConversationAgentic=o[3]),2&r[0]&&(s.agentExecutionMode=o[1]),4&r[0]&&(s.isBackgroundAgent=(c=o[2])==null?void 0:c.isActive),t.$set(s)},i(o){n||(d(t.$$.fragment,o),n=!0)},o(o){m(t.$$.fragment,o),n=!1},d(o){y(t,o)}}}function b0(i){let t,n,e,o,r,s,c,a,l;return o=new Hr({props:{icons:[`${Si.cmdOrCtrl}`,"."]}}),a=new Hr({props:{icons:[`${Si.cmdOrCtrl}`,`${Mm.shift}`,"."]}}),{c(){t=L("div"),n=L("div"),e=V(`Toggle forward
                `),v(o.$$.fragment),r=H(),s=L("div"),c=V(`or backward
                `),v(a.$$.fragment),A(t,"slot","content"),A(t,"class","c-toggle-mode-tooltip svelte-1t5cx1d")},m(u,$){b(u,t,$),O(t,n),O(n,e),w(o,n,null),O(t,r),O(t,s),O(s,c),w(a,s,null),l=!0},p:N,i(u){l||(d(o.$$.fragment,u),d(a.$$.fragment,u),l=!0)},o(u){m(o.$$.fragment,u),m(a.$$.fragment,u),l=!1},d(u){u&&x(t),y(o),y(a)}}}function _0(i){let t,n,e,o;const r=[y0,w0],s=[];function c(a,l){return a[9]?0:1}return t=c(i),n=s[t]=r[t](i),{c(){n.c(),e=ft()},m(a,l){s[t].m(a,l),b(a,e,l),o=!0},p(a,l){let u=t;t=c(a),t===u?s[t].p(a,l):(q(),m(s[u],1,1,()=>{s[u]=null}),j(),n=s[t],n?n.p(a,l):(n=s[t]=r[t](a),n.c()),d(n,1),n.m(e.parentNode,e))},i(a){o||(d(n),o=!0)},o(a){m(n),o=!1},d(a){a&&x(e),s[t].d(a)}}}function ac(i){let t,n,e,o;return t=new xt.Separator({}),e=new yr({props:{onSelect:i[26],description:"Run an agent in the cloud to lighten your workload.",isBackgroundAgent:!0,selected:i[6]==="remoteAgent"}}),{c(){v(t.$$.fragment),n=H(),v(e.$$.fragment)},m(r,s){w(t,r,s),b(r,n,s),w(e,r,s),o=!0},p(r,s){const c={};64&s[0]&&(c.selected=r[6]==="remoteAgent"),e.$set(c)},i(r){o||(d(t.$$.fragment,r),d(e.$$.fragment,r),o=!0)},o(r){m(t.$$.fragment,r),m(e.$$.fragment,r),o=!1},d(r){r&&x(n),y(t,r),y(e,r)}}}function C0(i){let t,n,e,o,r,s;n=new yr({props:{onSelect:i[24],isConversationAgentic:!1,description:"Use chat for advice and general knowledge.",selected:i[6]==="chat"}}),o=new yr({props:{onSelect:i[25],isConversationAgentic:!0,description:"Work with an agent on guided tasks.",selected:i[6]==="localAgent"}});let c=i[14]&&ac(i);return{c(){t=L("div"),v(n.$$.fragment),e=H(),v(o.$$.fragment),r=H(),c&&c.c(),A(t,"class","c-mode-display-dropdown svelte-1t5cx1d")},m(a,l){b(a,t,l),w(n,t,null),O(t,e),w(o,t,null),O(t,r),c&&c.m(t,null),s=!0},p(a,l){const u={};64&l[0]&&(u.selected=a[6]==="chat"),n.$set(u);const $={};2&l[0]&&($.onSelect=a[25]),64&l[0]&&($.selected=a[6]==="localAgent"),o.$set($),a[14]?c?(c.p(a,l),16384&l[0]&&d(c,1)):(c=ac(a),c.c(),d(c,1),c.m(t,null)):c&&(q(),m(c,1,1,()=>{c=null}),j())},i(a){s||(d(n.$$.fragment,a),d(o.$$.fragment,a),d(c),s=!0)},o(a){m(n.$$.fragment,a),m(o.$$.fragment,a),m(c),s=!1},d(a){a&&x(t),y(n),y(o),c&&c.d()}}}function A0(i){let t,n,e,o;return t=new xt.Trigger({props:{$$slots:{default:[_0]},$$scope:{ctx:i}}}),t.$on("click",T0),e=new xt.Content({props:{size:1,side:"top",align:"start",$$slots:{default:[C0]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment),n=H(),v(e.$$.fragment)},m(r,s){w(t,r,s),b(r,n,s),w(e,r,s),o=!0},p(r,s){const c={};558&s[0]|1&s[1]&&(c.$$scope={dirty:s,ctx:r}),t.$set(c);const a={};16450&s[0]|1&s[1]&&(a.$$scope={dirty:s,ctx:r}),e.$set(a)},i(r){o||(d(t.$$.fragment,r),d(e.$$.fragment,r),o=!0)},o(r){m(t.$$.fragment,r),m(e.$$.fragment,r),o=!1},d(r){r&&x(n),y(t,r),y(e,r)}}}function cc(i){let t,n,e;return n=new zt({props:{content:i[7]?"":"Run tools automatically",triggerOn:[te.Hover],side:"bottom",$$slots:{default:[M0]},$$scope:{ctx:i}}}),{c(){t=L("div"),v(n.$$.fragment),A(t,"class","c-toggle-mode-button__agent-toggle svelte-1t5cx1d")},m(o,r){b(o,t,r),w(n,t,null),e=!0},p(o,r){const s={};128&r[0]&&(s.content=o[7]?"":"Run tools automatically"),128&r[0]|1&r[1]&&(s.$$scope={dirty:r,ctx:o}),n.$set(s)},i(o){e||(d(n.$$.fragment,o),e=!0)},o(o){m(n.$$.fragment,o),e=!1},d(o){o&&x(t),y(n)}}}function M0(i){let t,n;return t=new A1({props:{checked:i[7],size:2,onText:"Auto",offText:"Auto",ariaLabel:"Toggle between manual and auto agent mode"}}),t.$on("change",i[20]),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};128&o[0]&&(r.checked=e[7]),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function k0(i){let t,n;return t=new js({props:{isDropdownOpen:!1,isCurrConversationAgentic:!0,agentExecutionMode:fo.auto,isBackgroundAgent:!0,disabled:!0,variant:"ghost",color:"accent"}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p:N,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function S0(i){let t,n,e,o;const r=[v0,h0],s=[];function c(a,l){var u;return(u=a[2])!=null&&u.isRemoteAgentSshWindow?0:1}return n=c(i),e=s[n]=r[n](i),{c(){t=L("div"),e.c(),A(t,"class","c-toggle-mode-button svelte-1t5cx1d")},m(a,l){b(a,t,l),s[n].m(t,null),o=!0},p(a,l){let u=n;n=c(a),n===u?s[n].p(a,l):(q(),m(s[u],1,1,()=>{s[u]=null}),j(),e=s[n],e?e.p(a,l):(e=s[n]=r[n](a),e.c()),d(e,1),e.m(t,null))},i(a){o||(d(e),o=!0)},o(a){m(e),o=!1},d(a){a&&x(t),s[n].d()}}}const T0=i=>{i.stopPropagation()};function E0(i,t,n){let e,o,r,s,c,a,l,u,$,f,p,_,C,M,T,E=N,R=N,P=N,J=N,K=N,et=()=>(K(),K=ie(U,vt=>n(23,T=vt)),U);i.$$.on_destroy.push(()=>E()),i.$$.on_destroy.push(()=>R()),i.$$.on_destroy.push(()=>P()),i.$$.on_destroy.push(()=>J()),i.$$.on_destroy.push(()=>K());let{chatModel:U=kt("chatModel")}=t;et();let{agentConversationModel:G=kt("agentConversationModel")}=t;const nt=kt(Rn.key);Tt(i,nt,vt=>n(2,p=vt));const X=kt(vr.key);let Y,Z=!1;function it(){X.handleSetToChat(),Y==null||Y.requestClose()}async function rt(vt){await X.handleSetToAgent(vt),M===!1&&G.setHasEverUsedAgent(!0),Y==null||Y.requestClose()}function ht(){X.handleSetToBackgroundAgent(),C===!1&&(nt==null||nt.setHasEverUsedRemoteAgent(!0)),Y==null||Y.requestClose()}let ct="chat";return i.$$set=vt=>{"chatModel"in vt&&et(n(0,U=vt.chatModel)),"agentConversationModel"in vt&&n(21,G=vt.agentConversationModel)},i.$$.update=()=>{8388608&i.$$.dirty[0]&&n(14,e=T.flags.enableBackgroundAgents),8388608&i.$$.dirty[0]&&n(22,o=T.flags.enableAgentAutoMode),2097152&i.$$.dirty[0]&&(n(13,r=G.isCurrConversationAgentic),R(),R=ie(r,vt=>n(3,_=vt))),8388608&i.$$.dirty[0]&&(n(12,s=T.agentExecutionMode),E(),E=ie(s,vt=>n(1,f=vt))),2097152&i.$$.dirty[0]&&(n(11,c=G.hasEverUsedAgent),J(),J=ie(c,vt=>n(29,M=vt))),8388608&i.$$.dirty[0]&&n(9,l=T.flags.enableDebugFeatures),14&i.$$.dirty[0]&&(p.isActive?n(6,ct="remoteAgent"):n(6,ct=_?f===fo.auto?"agentAuto":"localAgent":"chat")),4194316&i.$$.dirty[0]&&n(8,u=_&&!p.isActive&&o),2&i.$$.dirty[0]&&n(7,$=f===fo.auto)},n(10,a=nt==null?void 0:nt.hasEverUsedRemoteAgent),P(),P=ie(a,vt=>n(28,C=vt)),[U,f,p,_,Y,Z,ct,$,u,l,a,c,s,r,e,nt,function(vt){n(5,Z=vt)},it,rt,ht,async function(){const vt=$?fo.manual:fo.auto;await X.setToAgent(vt)},G,o,T,()=>it(),()=>rt(f),()=>ht(),function(vt){Qt[vt?"unshift":"push"](()=>{Y=vt,n(4,Y)})}]}class I0 extends ut{constructor(t){super(),dt(this,t,E0,S0,lt,{chatModel:0,agentConversationModel:21},null,[-1,-1])}}function L0(i){let t,n,e=[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 384 512"},i[0]],o={};for(let r=0;r<e.length;r+=1)o=Et(o,e[r]);return{c(){t=oe("svg"),n=new ln(!0),this.h()},l(r){t=un(r,"svg",{xmlns:!0,"data-ds-icon":!0,viewBox:!0});var s=dn(t);n=$n(s,!0),s.forEach(x),this.h()},h(){n.a=null,ue(t,o)},m(r,s){mn(r,t,s),n.m('<!--! Font Awesome Pro 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2024 Fonticons, Inc.--><path d="M32 32C32 14.3 46.3 0 64 0h256c17.7 0 32 14.3 32 32s-14.3 32-32 32h-29.5l11.4 148.2c36.7 19.9 65.7 53.2 79.5 94.7l1 3c3.3 9.8 1.6 20.5-4.4 28.8S362.3 352 352 352H32c-10.3 0-19.9-4.9-26-13.3s-7.7-19.1-4.4-28.8l1-3c13.8-41.5 42.8-74.8 79.5-94.7L93.5 64H64c-17.7 0-32-14.3-32-32m128 352h64v96c0 17.7-14.3 32-32 32s-32-14.3-32-32z"/>',t)},p(r,[s]){ue(t,o=De(e,[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 384 512"},1&s&&r[0]]))},i:N,o:N,d(r){r&&x(t)}}}function R0(i,t,n){return i.$$set=e=>{n(0,t=Et(Et({},t),ae(e)))},[t=ae(t)]}class Sm extends ut{constructor(t){super(),dt(this,t,R0,L0,lt,{})}}function D0(i){let t,n;return t=new Ds({}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function P0(i){let t,n;return t=new Sm({}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function N0(i){let t,n,e,o;const r=[P0,D0],s=[];function c(a,l){return a[0]?0:1}return n=c(i),e=s[n]=r[n](i),{c(){t=L("span"),e.c(),A(t,"class","c-pin-button svelte-16rnrv4")},m(a,l){b(a,t,l),s[n].m(t,null),o=!0},p(a,l){let u=n;n=c(a),n!==u&&(q(),m(s[u],1,1,()=>{s[u]=null}),j(),e=s[n],e||(e=s[n]=r[n](a),e.c()),d(e,1),e.m(t,null))},i(a){o||(d(e),o=!0)},o(a){m(e),o=!1},d(a){a&&x(t),s[n].d()}}}function F0(i){let t,n;return t=new So.IconButton({props:{color:"neutral",$$slots:{default:[N0]},$$scope:{ctx:i}}}),t.$on("click",i[3]),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};17&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function O0(i){let t,n;return t=new zt({props:{content:i[2],$$slots:{default:[F0]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,[o]){const r={};4&o&&(r.content=e[2]),19&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function z0(i,t,n){let{isPinned:e=!1}=t,{onPin:o}=t,{title:r=e?"Unpin":"Pin to context"}=t;return i.$$set=s=>{"isPinned"in s&&n(0,e=s.isPinned),"onPin"in s&&n(1,o=s.onPin),"title"in s&&n(2,r=s.title)},[e,o,r,s=>{s.stopPropagation(),o()}]}class B0 extends ut{constructor(t){super(),dt(this,t,z0,O0,lt,{isPinned:0,onPin:1,title:2})}}function H0(i){let t,n,e=[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 576 512"},i[0]],o={};for(let r=0;r<e.length;r+=1)o=Et(o,e[r]);return{c(){t=oe("svg"),n=new ln(!0),this.h()},l(r){t=un(r,"svg",{xmlns:!0,"data-ds-icon":!0,viewBox:!0});var s=dn(t);n=$n(s,!0),s.forEach(x),this.h()},h(){n.a=null,ue(t,o)},m(r,s){mn(r,t,s),n.m('<!--! Font Awesome Pro 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2024 Fonticons, Inc.--><path d="M156 32C100.6 32 48.8 46.6 27.1 53.6 10.3 59 0 74.5 0 91.1v312.4c0 26.1 24 44.2 48 40.2 19.8-3.3 54.8-7.7 100-7.7 54 0 97.5 25.5 112.5 35.6 7.5 5 16.8 8.4 27 8.4 11.5 0 21.6-4.2 29.3-9.9 13.4-9.8 52.3-34.1 111.2-34.1 47.7 0 80.5 4 99 7.2 23.9 4.1 49-13.8 49-40.6V91.1c0-16.5-10.3-32.1-27.1-37.5C527.2 46.6 475.4 32 420 32c-36.8 0-71.8 6.4-97.4 12.7-12.8 3.2-23.5 6.3-30.9 8.7-1.3.4-2.6.8-3.7 1.2-1.1-.4-2.4-.8-3.7-1.2-7.5-2.4-18.1-5.5-30.9-8.7C227.8 38.4 192.8 32 156 32m108 65.3v320.6c-26-13.7-67.2-29.9-116-29.9-42.9 0-77.4 3.7-100 7.1V97.3C70.3 90.6 112.4 80 156 80c31.6 0 62.6 5.6 85.9 11.3 8.6 2.1 16.1 4.2 22.1 6m48 319.2V97.3c6-1.8 13.5-3.9 22.1-6C357.4 85.6 388.4 80 420 80c43.6 0 85.7 10.6 108 17.3v297.4c-21.7-3.3-54.9-6.7-100-6.7-51.4 0-90.8 15-116 28.6z"/>',t)},p(r,[s]){ue(t,o=De(e,[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 576 512"},1&s&&r[0]]))},i:N,o:N,d(r){r&&x(t)}}}function U0(i,t,n){return i.$$set=e=>{n(0,t=Et(Et({},t),ae(e)))},[t=ae(t)]}class q0 extends ut{constructor(t){super(),dt(this,t,U0,H0,lt,{})}}function j0(i){let t,n,e=[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 576 512"},i[0]],o={};for(let r=0;r<e.length;r+=1)o=Et(o,e[r]);return{c(){t=oe("svg"),n=new ln(!0),this.h()},l(r){t=un(r,"svg",{xmlns:!0,"data-ds-icon":!0,viewBox:!0});var s=dn(t);n=$n(s,!0),s.forEach(x),this.h()},h(){n.a=null,ue(t,o)},m(r,s){mn(r,t,s),n.m('<!--! Font Awesome Pro 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2024 Fonticons, Inc.--><path d="M384 480h48c11.4 0 21.9-6 27.6-15.9l112-192c5.8-9.9 5.8-22.1.1-32.1s-16.2-16-27.7-16H144c-11.4 0-21.9 6-27.6 15.9L48 357.1V96c0-8.8 7.2-16 16-16h117.5c4.2 0 8.3 1.7 11.3 4.7l26.5 26.5c21 21 49.5 32.8 79.2 32.8H416c8.8 0 16 7.2 16 16v32h48v-32c0-35.3-28.7-64-64-64H298.5c-17 0-33.3-6.7-45.3-18.7l-26.5-26.6c-12-12-28.3-18.7-45.3-18.7H64C28.7 32 0 60.7 0 96v320c0 35.3 28.7 64 64 64h23.7z"/>',t)},p(r,[s]){ue(t,o=De(e,[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 576 512"},1&s&&r[0]]))},i:N,o:N,d(r){r&&x(t)}}}function W0(i,t,n){return i.$$set=e=>{n(0,t=Et(Et({},t),ae(e)))},[t=ae(t)]}class V0 extends ut{constructor(t){super(),dt(this,t,W0,j0,lt,{})}}function G0(i){let t,n,e=[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 512 512"},i[0]],o={};for(let r=0;r<e.length;r+=1)o=Et(o,e[r]);return{c(){t=oe("svg"),n=new ln(!0),this.h()},l(r){t=un(r,"svg",{xmlns:!0,"data-ds-icon":!0,viewBox:!0});var s=dn(t);n=$n(s,!0),s.forEach(x),this.h()},h(){n.a=null,ue(t,o)},m(r,s){mn(r,t,s),n.m('<!--! Font Awesome Pro 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2024 Fonticons, Inc.--><path d="M64 32C28.7 32 0 60.7 0 96v320c0 35.3 28.7 64 64 64h384c35.3 0 64-28.7 64-64V160c0-35.3-28.7-64-64-64H289.9L247 53.1A71.983 71.983 0 0 0 196.1 32zM48 96c0-8.8 7.2-16 16-16h132.1c6.4 0 12.5 2.5 17 7l45.3 45.3c7.5 7.5 17.7 11.7 28.3 11.7H448c8.8 0 16 7.2 16 16v256c0 8.8-7.2 16-16 16H64c-8.8 0-16-7.2-16-16zm305.2 168.2c6.3-3.6 9.5-11.2 6.8-17.9-1.7-4.3-3.7-8.4-5.9-12.4l-2-3.5c-2.4-4-5.1-7.9-7.9-11.5-4.5-5.7-12.6-6.8-18.9-3.1l-1.2.7c-8 4.6-17.9 3.5-25.9-1.2s-14.1-12.7-14.1-21.9V192c0-7.3-4.9-13.8-12.2-14.8-5.2-.7-10.5-1.1-15.8-1.1s-10.7.4-15.8 1.1c-7.2 1-12.2 7.5-12.2 14.8v1.4c0 9.3-6.1 17.3-14.1 21.9s-17.9 5.8-25.9 1.2l-1.2-.7c-6.3-3.6-14.4-2.6-18.9 3.1-2.9 3.7-5.5 7.5-8 11.5l-2 3.4c-2.2 4-4.2 8.2-5.9 12.5-2.7 6.8.4 14.3 6.8 17.9l1.2.7c8 4.6 12 13.8 12 23.1s-4 18.4-12 23.1l-1.2.7c-6.3 3.6-9.5 11.2-6.8 17.9 1.7 4.3 3.7 8.4 5.9 12.4l2.1 3.6c2.4 4 5 7.8 7.9 11.5 4.5 5.7 12.6 6.8 18.9 3.1l1.2-.7c8-4.6 17.9-3.5 25.9 1.2s14.1 12.7 14.1 21.9v1.4c0 7.3 4.9 13.8 12.2 14.8 5.2.7 10.5 1.1 15.8 1.1s10.7-.4 15.8-1.1c7.2-1 12.2-7.5 12.2-14.8v-1.4c0-9.3 6.1-17.3 14.1-21.9s17.9-5.8 25.9-1.2l1.2.7c6.3 3.6 14.4 2.6 18.9-3.1 2.9-3.6 5.5-7.5 7.9-11.4l2.1-3.6c2.2-4 4.2-8.1 5.9-12.4 2.7-6.8-.4-14.3-6.8-17.9l-1.2-.7c-8-4.6-12-13.8-12-23.1s4-18.5 12-23.1l1.2-.7zM221 288a35 35 0 1 1 70 0 35 35 0 1 1-70 0"/>',t)},p(r,[s]){ue(t,o=De(e,[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 512 512"},1&s&&r[0]]))},i:N,o:N,d(r){r&&x(t)}}}function K0(i,t,n){return i.$$set=e=>{n(0,t=Et(Et({},t),ae(e)))},[t=ae(t)]}class Y0 extends ut{constructor(t){super(),dt(this,t,K0,G0,lt,{})}}function X0(i){let t,n;return t=new Fs({}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function Z0(i){let t,n;return t=new q0({}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function J0(i){let t,n;return t=new Y0({}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function Q0(i){let t,n;return t=new V0({}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function th(i){let t,n;return t=new E$({}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function eh(i){let t,n,e,o;const r=[th,Q0,J0,Z0,X0],s=[];function c(a,l){return a[0]==="file"?0:a[0]==="folder-opened"?1:a[0]==="root-folder"?2:a[0]==="book"?3:a[0]==="rule"?4:-1}return~(t=c(i))&&(n=s[t]=r[t](i)),{c(){n&&n.c(),e=ft()},m(a,l){~t&&s[t].m(a,l),b(a,e,l),o=!0},p(a,[l]){let u=t;t=c(a),t!==u&&(n&&(q(),m(s[u],1,1,()=>{s[u]=null}),j()),~t?(n=s[t],n||(n=s[t]=r[t](a),n.c()),d(n,1),n.m(e.parentNode,e)):n=null)},i(a){o||(d(n),o=!0)},o(a){m(n),o=!1},d(a){a&&x(e),~t&&s[t].d(a)}}}function nh(i,t,n){let{icon:e}=t;return i.$$set=o=>{"icon"in o&&n(0,e=o.icon)},[e]}class oh extends ut{constructor(t){super(),dt(this,t,nh,eh,lt,{icon:0})}}function Ti(i){switch(i){case gi.DEFAULT:return Na;case gi.PROTOTYPER:return Tf;case gi.BRAINSTORM:return Sf;case gi.REVIEWER:return kf;default:return Na}}function rh(i){let t,n=i[0].label+"";return{c(){t=V(n)},m(e,o){b(e,t,o)},p(e,o){1&o&&n!==(n=e[0].label+"")&&bt(t,n)},i:N,o:N,d(e){e&&x(t)}}}function ih(i){let t,n,e,o;return t=new Fs({}),e=new kn({props:{filepath:`${ls}/${us}/${i[0].rule.path}`}}),{c(){v(t.$$.fragment),n=H(),v(e.$$.fragment)},m(r,s){w(t,r,s),b(r,n,s),w(e,r,s),o=!0},p(r,s){const c={};1&s&&(c.filepath=`${ls}/${us}/${r[0].rule.path}`),e.$set(c)},i(r){o||(d(t.$$.fragment,r),d(e.$$.fragment,r),o=!0)},o(r){m(t.$$.fragment,r),m(e.$$.fragment,r),o=!1},d(r){r&&x(n),y(t,r),y(e,r)}}}function sh(i){let t,n,e,o,r,s,c,a;return n=new Ef({props:{heightPx:32,floatHeight:4,animationDuration:2.25,$$slots:{default:[fh]},$$scope:{ctx:i}}}),r=new Wt({props:{size:2,weight:"medium",$$slots:{default:[ph]},$$scope:{ctx:i}}}),c=new Wt({props:{size:1,$$slots:{default:[gh]},$$scope:{ctx:i}}}),{c(){t=L("div"),v(n.$$.fragment),e=H(),o=L("div"),v(r.$$.fragment),s=H(),v(c.$$.fragment),A(t,"class","c-mention-hover-contents__personality-icon svelte-11069rs"),A(o,"class","c-mention-hover-contents__personality svelte-11069rs")},m(l,u){b(l,t,u),w(n,t,null),b(l,e,u),b(l,o,u),w(r,o,null),O(o,s),w(c,o,null),a=!0},p(l,u){const $={};3&u&&($.$$scope={dirty:u,ctx:l}),n.$set($);const f={};3&u&&(f.$$scope={dirty:u,ctx:l}),r.$set(f);const p={};3&u&&(p.$$scope={dirty:u,ctx:l}),c.$set(p)},i(l){a||(d(n.$$.fragment,l),d(r.$$.fragment,l),d(c.$$.fragment,l),a=!0)},o(l){m(n.$$.fragment,l),m(r.$$.fragment,l),m(c.$$.fragment,l),a=!1},d(l){l&&(x(t),x(e),x(o)),y(n),y(r),y(c)}}}function ah(i){var r,s;let t,n,e,o;return t=new tm({}),e=new kn({props:{filepath:`${i[0].selection.pathName}:L${(r=i[0].selection.fullRange)==null?void 0:r.startLineNumber}-${(s=i[0].selection.fullRange)==null?void 0:s.endLineNumber}`}}),{c(){v(t.$$.fragment),n=H(),v(e.$$.fragment)},m(c,a){w(t,c,a),b(c,n,a),w(e,c,a),o=!0},p(c,a){var u,$;const l={};1&a&&(l.filepath=`${c[0].selection.pathName}:L${(u=c[0].selection.fullRange)==null?void 0:u.startLineNumber}-${($=c[0].selection.fullRange)==null?void 0:$.endLineNumber}`),e.$set(l)},i(c){o||(d(t.$$.fragment,c),d(e.$$.fragment,c),o=!0)},o(c){m(t.$$.fragment,c),m(e.$$.fragment,c),o=!1},d(c){c&&x(n),y(t,c),y(e,c)}}}function ch(i){var o;let t,n,e=(i[0].userGuidelines.overLimit||((o=i[0].rulesAndGuidelinesState)==null?void 0:o.overLimit))&&lc(i);return{c(){e&&e.c(),t=ft()},m(r,s){e&&e.m(r,s),b(r,t,s),n=!0},p(r,s){var c;r[0].userGuidelines.overLimit||(c=r[0].rulesAndGuidelinesState)!=null&&c.overLimit?e?(e.p(r,s),1&s&&d(e,1)):(e=lc(r),e.c(),d(e,1),e.m(t.parentNode,t)):e&&(q(),m(e,1,1,()=>{e=null}),j())},i(r){n||(d(e),n=!0)},o(r){m(e),n=!1},d(r){r&&x(t),e&&e.d(r)}}}function lh(i){let t,n,e,o,r,s,c,a;return e=new If({}),r=new kn({props:{class:"c-source-folder-item",filepath:i[0].sourceFolder.folderRoot}}),c=new Lf({props:{class:"guidelines-filespan",sourceFolder:i[0].sourceFolder}}),{c(){t=L("div"),n=L("div"),v(e.$$.fragment),o=H(),v(r.$$.fragment),s=H(),v(c.$$.fragment),A(n,"class","l-source-folder-name svelte-11069rs"),A(t,"class","l-mention-hover-contents__source-folder")},m(l,u){b(l,t,u),O(t,n),w(e,n,null),O(n,o),w(r,n,null),O(t,s),w(c,t,null),a=!0},p(l,u){const $={};1&u&&($.filepath=l[0].sourceFolder.folderRoot),r.$set($);const f={};1&u&&(f.sourceFolder=l[0].sourceFolder),c.$set(f)},i(l){a||(d(e.$$.fragment,l),d(r.$$.fragment,l),d(c.$$.fragment,l),a=!0)},o(l){m(e.$$.fragment,l),m(r.$$.fragment,l),m(c.$$.fragment,l),a=!1},d(l){l&&x(t),y(e),y(r),y(c)}}}function uh(i){let t,n,e,o;return t=new Rf({}),e=new kn({props:{filepath:i[0].externalSource.name}}),{c(){v(t.$$.fragment),n=H(),v(e.$$.fragment)},m(r,s){w(t,r,s),b(r,n,s),w(e,r,s),o=!0},p(r,s){const c={};1&s&&(c.filepath=r[0].externalSource.name),e.$set(c)},i(r){o||(d(t.$$.fragment,r),d(e.$$.fragment,r),o=!0)},o(r){m(t.$$.fragment,r),m(e.$$.fragment,r),o=!1},d(r){r&&x(n),y(t,r),y(e,r)}}}function dh(i){let t,n,e,o;return t=new rm({}),e=new kn({props:{filepath:i[0].folder.pathName}}),{c(){v(t.$$.fragment),n=H(),v(e.$$.fragment)},m(r,s){w(t,r,s),b(r,n,s),w(e,r,s),o=!0},p(r,s){const c={};1&s&&(c.filepath=r[0].folder.pathName),e.$set(c)},i(r){o||(d(t.$$.fragment,r),d(e.$$.fragment,r),o=!0)},o(r){m(t.$$.fragment,r),m(e.$$.fragment,r),o=!1},d(r){r&&x(n),y(t,r),y(e,r)}}}function $h(i){let t,n,e,o;return t=new Os({}),e=new kn({props:{filepath:i[0].recentFile.pathName}}),{c(){v(t.$$.fragment),n=H(),v(e.$$.fragment)},m(r,s){w(t,r,s),b(r,n,s),w(e,r,s),o=!0},p(r,s){const c={};1&s&&(c.filepath=r[0].recentFile.pathName),e.$set(c)},i(r){o||(d(t.$$.fragment,r),d(e.$$.fragment,r),o=!0)},o(r){m(t.$$.fragment,r),m(e.$$.fragment,r),o=!1},d(r){r&&x(n),y(t,r),y(e,r)}}}function mh(i){let t,n,e,o;return t=new Os({}),e=new kn({props:{filepath:i[0].file.pathName}}),{c(){v(t.$$.fragment),n=H(),v(e.$$.fragment)},m(r,s){w(t,r,s),b(r,n,s),w(e,r,s),o=!0},p(r,s){const c={};1&s&&(c.filepath=r[0].file.pathName),e.$set(c)},i(r){o||(d(t.$$.fragment,r),d(e.$$.fragment,r),o=!0)},o(r){m(t.$$.fragment,r),m(e.$$.fragment,r),o=!1},d(r){r&&x(n),y(t,r),y(e,r)}}}function fh(i){let t,n,e;var o=Ti(i[0].personality.type);return o&&(t=sn(o,{})),{c(){t&&v(t.$$.fragment),n=ft()},m(r,s){t&&w(t,r,s),b(r,n,s),e=!0},p(r,s){if(1&s&&o!==(o=Ti(r[0].personality.type))){if(t){q();const c=t;m(c.$$.fragment,1,0,()=>{y(c,1)}),j()}o?(t=sn(o,{}),v(t.$$.fragment),d(t.$$.fragment,1),w(t,n.parentNode,n)):t=null}},i(r){e||(t&&d(t.$$.fragment,r),e=!0)},o(r){t&&m(t.$$.fragment,r),e=!1},d(r){r&&x(n),t&&y(t,r)}}}function ph(i){let t,n=i[0].label+"";return{c(){t=V(n)},m(e,o){b(e,t,o)},p(e,o){1&o&&n!==(n=e[0].label+"")&&bt(t,n)},d(e){e&&x(t)}}}function gh(i){let t,n=i[0].personality.description+"";return{c(){t=V(n)},m(e,o){b(e,t,o)},p(e,o){1&o&&n!==(n=e[0].personality.description+"")&&bt(t,n)},d(e){e&&x(t)}}}function lc(i){let t,n,e,o;const r=[vh,hh],s=[];function c(a,l){var u;return(u=a[0].rulesAndGuidelinesState)!=null&&u.overLimit?0:a[0].userGuidelines.overLimit?1:-1}return~(t=c(i))&&(n=s[t]=r[t](i)),{c(){n&&n.c(),e=ft()},m(a,l){~t&&s[t].m(a,l),b(a,e,l),o=!0},p(a,l){let u=t;t=c(a),t===u?~t&&s[t].p(a,l):(n&&(q(),m(s[u],1,1,()=>{s[u]=null}),j()),~t?(n=s[t],n?n.p(a,l):(n=s[t]=r[t](a),n.c()),d(n,1),n.m(e.parentNode,e)):n=null)},i(a){o||(d(n),o=!0)},o(a){m(n),o=!1},d(a){a&&x(e),~t&&s[t].d(a)}}}function hh(i){let t,n;return t=new Wt({props:{size:1,$$slots:{default:[wh]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};3&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function vh(i){let t,n;return t=new Wt({props:{size:1,$$slots:{default:[yh]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};3&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function wh(i){let t,n=`Guidelines exceeded length limit of ${i[0].userGuidelines.lengthLimit} characters`;return{c(){t=V(n)},m(e,o){b(e,t,o)},p(e,o){1&o&&n!==(n=`Guidelines exceeded length limit of ${e[0].userGuidelines.lengthLimit} characters`)&&bt(t,n)},d(e){e&&x(t)}}}function yh(i){let t,n=`Rules and workspace guidelines (${i[0].rulesAndGuidelinesState.totalCharacterCount} chars)
          exceeded limit of ${i[0].rulesAndGuidelinesState.lengthLimit} characters, remove some rules
          or reduce the length of your guidelines.`;return{c(){t=V(n)},m(e,o){b(e,t,o)},p(e,o){1&o&&n!==(n=`Rules and workspace guidelines (${e[0].rulesAndGuidelinesState.totalCharacterCount} chars)
          exceeded limit of ${e[0].rulesAndGuidelinesState.lengthLimit} characters, remove some rules
          or reduce the length of your guidelines.`)&&bt(t,n)},d(e){e&&x(t)}}}function xh(i){let t,n,e,o,r,s,c,a,l,u,$,f,p;const _=[mh,$h,dh,uh,lh,ch,ah,sh,ih,rh],C=[];function M(T,E){return 1&E&&(n=null),1&E&&(e=null),1&E&&(o=null),1&E&&(r=null),1&E&&(s=null),1&E&&(c=null),1&E&&(a=null),1&E&&(l=null),1&E&&(u=null),n==null&&(n=!(!T[0]||!ks(T[0]))),n?0:(e==null&&(e=!(!T[0]||!Ss(T[0]))),e?1:(o==null&&(o=!(!T[0]||!Ts(T[0]))),o?2:(r==null&&(r=!(!T[0]||!Es(T[0]))),r?3:(s==null&&(s=!(!T[0]||!Ui(T[0]))),s?4:(c==null&&(c=!!(T[0]&&Is(T[0])&&T[0].userGuidelines.enabled)),c?5:(a==null&&(a=!(!T[0]||!Ls(T[0]))),a?6:(l==null&&(l=!(!T[0]||!U$(T[0]))),l?7:(u==null&&(u=!(!T[0]||!Rs(T[0]))),u?8:9))))))))}return $=M(i,-1),f=C[$]=_[$](i),{c(){t=L("div"),f.c(),A(t,"class","c-mention-hover-contents svelte-11069rs")},m(T,E){b(T,t,E),C[$].m(t,null),p=!0},p(T,[E]){let R=$;$=M(T,E),$===R?C[$].p(T,E):(q(),m(C[R],1,1,()=>{C[R]=null}),j(),f=C[$],f?f.p(T,E):(f=C[$]=_[$](T),f.c()),d(f,1),f.m(t,null))},i(T){p||(d(f),p=!0)},o(T){m(f),p=!1},d(T){T&&x(t),C[$].d()}}}function bh(i,t,n){let{option:e}=t;return i.$$set=o=>{"option"in o&&n(0,e=o.option)},[e]}class Yr extends ut{constructor(t){super(),dt(this,t,bh,xh,lt,{option:0})}}function _h(i){let t,n,e=[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 384 512"},i[0]],o={};for(let r=0;r<e.length;r+=1)o=Et(o,e[r]);return{c(){t=oe("svg"),n=new ln(!0),this.h()},l(r){t=un(r,"svg",{xmlns:!0,"data-ds-icon":!0,viewBox:!0});var s=dn(t);n=$n(s,!0),s.forEach(x),this.h()},h(){n.a=null,ue(t,o)},m(r,s){mn(r,t,s),n.m('<!--! Font Awesome Pro 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2024 Fonticons, Inc.--><path d="M345 137c9.4-9.4 9.4-24.6 0-33.9s-24.6-9.4-33.9 0l-119 119L73 103c-9.4-9.4-24.6-9.4-33.9 0s-9.4 24.6 0 33.9l119 119L39 375c-9.4 9.4-9.4 24.6 0 33.9s24.6 9.4 33.9 0l119-119L311 409c9.4 9.4 24.6 9.4 33.9 0s9.4-24.6 0-33.9l-119-119z"/>',t)},p(r,[s]){ue(t,o=De(e,[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 384 512"},1&s&&r[0]]))},i:N,o:N,d(r){r&&x(t)}}}function Ch(i,t,n){return i.$$set=e=>{n(0,t=Et(Et({},t),ae(e)))},[t=ae(t)]}class Cr extends ut{constructor(t){super(),dt(this,t,Ch,_h,lt,{})}}const Ah=i=>({}),uc=i=>({slot:"chaser"}),Mh=i=>({}),dc=i=>({}),kh=i=>({}),$c=i=>({slot:"leftButtons"}),Sh=i=>({}),mc=i=>({});function fc(i){let t,n;return t=new J$({props:{class:"c-pulse-chip-warning-icon"}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function Th(i){let t,n,e;const o=i[4].default,r=Yt(o,i,i[6],null);let s=i[3]&&fc();return{c(){t=L("div"),r&&r.c(),n=H(),s&&s.c(),A(t,"class","c-context-badge__content svelte-gkpz0s")},m(c,a){b(c,t,a),r&&r.m(t,null),O(t,n),s&&s.m(t,null),e=!0},p(c,a){r&&r.p&&(!e||64&a)&&Xt(r,o,c,c[6],e?Jt(o,c[6],a,null):Zt(c[6]),null),c[3]?s?8&a&&d(s,1):(s=fc(),s.c(),d(s,1),s.m(t,null)):s&&(q(),m(s,1,1,()=>{s=null}),j())},i(c){e||(d(r,c),d(s),e=!0)},o(c){m(r,c),m(s),e=!1},d(c){c&&x(t),r&&r.d(c),s&&s.d()}}}function Eh(i){let t;const n=i[4].chaser,e=Yt(n,i,i[6],uc);return{c(){e&&e.c()},m(o,r){e&&e.m(o,r),t=!0},p(o,r){e&&e.p&&(!t||64&r)&&Xt(e,n,o,o[6],t?Jt(n,o[6],r,Ah):Zt(o[6]),uc)},i(o){t||(d(e,o),t=!0)},o(o){m(e,o),t=!1},d(o){e&&e.d(o)}}}function Ih(i){let t;const n=i[4].leftIcon,e=Yt(n,i,i[6],dc),o=e||function(r){let s,c;return s=new E$({}),{c(){v(s.$$.fragment)},m(a,l){w(s,a,l),c=!0},i(a){c||(d(s.$$.fragment,a),c=!0)},o(a){m(s.$$.fragment,a),c=!1},d(a){y(s,a)}}}();return{c(){o&&o.c()},m(r,s){o&&o.m(r,s),t=!0},p(r,s){e&&e.p&&(!t||64&s)&&Xt(e,n,r,r[6],t?Jt(n,r[6],s,Mh):Zt(r[6]),dc)},i(r){t||(d(o,r),t=!0)},o(r){m(o,r),t=!1},d(r){o&&o.d(r)}}}function Lh(i){let t;const n=i[4].leftButtons,e=Yt(n,i,i[6],$c),o=e||function(r){let s,c,a;return c=new So.IconButton({props:{disabled:!0,$$slots:{default:[Ih]},$$scope:{ctx:r}}}),{c(){s=L("div"),v(c.$$.fragment),A(s,"class","c-context-badge__left-icon svelte-gkpz0s")},m(l,u){b(l,s,u),w(c,s,null),a=!0},p(l,u){const $={};64&u&&($.$$scope={dirty:u,ctx:l}),c.$set($)},i(l){a||(d(c.$$.fragment,l),a=!0)},o(l){m(c.$$.fragment,l),a=!1},d(l){l&&x(s),y(c)}}}(i);return{c(){o&&o.c()},m(r,s){o&&o.m(r,s),t=!0},p(r,s){e?e.p&&(!t||64&s)&&Xt(e,n,r,r[6],t?Jt(n,r[6],s,kh):Zt(r[6]),$c):o&&o.p&&(!t||64&s)&&o.p(r,t?s:-1)},i(r){t||(d(o,r),t=!0)},o(r){m(o,r),t=!1},d(r){o&&o.d(r)}}}function pc(i){let t,n;return t=new So.IconButton({props:{class:"c-context-badge__remove-btn",title:i[2].title,size:i[1],variant:"ghost",color:"neutral",$$slots:{default:[Rh]},$$scope:{ctx:i}}}),t.$on("click",function(){ze(i[2].onRemove)&&i[2].onRemove.apply(this,arguments)}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){i=e;const r={};4&o&&(r.title=i[2].title),2&o&&(r.size=i[1]),64&o&&(r.$$scope={dirty:o,ctx:i}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function Rh(i){let t,n;return t=new Cr({}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function Dh(i){let t,n,e;const o=i[4].rightButtons,r=Yt(o,i,i[6],mc);let s=i[2]&&pc(i);return{c(){r&&r.c(),t=H(),s&&s.c(),n=ft()},m(c,a){r&&r.m(c,a),b(c,t,a),s&&s.m(c,a),b(c,n,a),e=!0},p(c,a){r&&r.p&&(!e||64&a)&&Xt(r,o,c,c[6],e?Jt(o,c[6],a,Sh):Zt(c[6]),mc),c[2]?s?(s.p(c,a),4&a&&d(s,1)):(s=pc(c),s.c(),d(s,1),s.m(n.parentNode,n)):s&&(q(),m(s,1,1,()=>{s=null}),j())},i(c){e||(d(r,c),d(s),e=!0)},o(c){m(r,c),m(s),e=!1},d(c){c&&(x(t),x(n)),r&&r.d(c),s&&s.d(c)}}}function Ph(i){let t,n,e;return n=new So.Root({props:{color:i[0],size:i[1],$$slots:{rightButtons:[Dh],leftButtons:[Lh],chaser:[Eh],default:[Th]},$$scope:{ctx:i}}}),n.$on("click",i[5]),{c(){t=L("div"),v(n.$$.fragment),A(t,"class","c-context-badge svelte-gkpz0s")},m(o,r){b(o,t,r),w(n,t,null),e=!0},p(o,[r]){const s={};1&r&&(s.color=o[0]),2&r&&(s.size=o[1]),78&r&&(s.$$scope={dirty:r,ctx:o}),n.$set(s)},i(o){e||(d(n.$$.fragment,o),e=!0)},o(o){m(n.$$.fragment,o),e=!1},d(o){o&&x(t),y(n)}}}function Nh(i,t,n){let{$$slots:e={},$$scope:o}=t,{color:r="neutral"}=t,{size:s=1}=t,{removeBtn:c}=t,{showWarning:a}=t;return i.$$set=l=>{"color"in l&&n(0,r=l.color),"size"in l&&n(1,s=l.size),"removeBtn"in l&&n(2,c=l.removeBtn),"showWarning"in l&&n(3,a=l.showWarning),"$$scope"in l&&n(6,o=l.$$scope)},[r,s,c,a,e,function(l){wn.call(this,i,l)},o]}class Wo extends ut{constructor(t){super(),dt(this,t,Nh,Ph,lt,{color:0,size:1,removeBtn:2,showWarning:3})}}function Fh(i){let t,n;return{c(){t=oe("svg"),n=oe("path"),A(n,"fill-rule","evenodd"),A(n,"clip-rule","evenodd"),A(n,"d","M7.07095 0.650238C6.67391 0.650238 6.32977 0.925096 6.24198 1.31231L6.0039 2.36247C5.6249 2.47269 5.26335 2.62363 4.92436 2.81013L4.01335 2.23585C3.67748 2.02413 3.23978 2.07312 2.95903 2.35386L2.35294 2.95996C2.0722 3.2407 2.0232 3.6784 2.23493 4.01427L2.80942 4.92561C2.62307 5.2645 2.47227 5.62594 2.36216 6.00481L1.31209 6.24287C0.924883 6.33065 0.650024 6.6748 0.650024 7.07183V7.92897C0.650024 8.32601 0.924883 8.67015 1.31209 8.75794L2.36228 8.99603C2.47246 9.375 2.62335 9.73652 2.80979 10.0755L2.2354 10.9867C2.02367 11.3225 2.07267 11.7602 2.35341 12.041L2.95951 12.6471C3.24025 12.9278 3.67795 12.9768 4.01382 12.7651L4.92506 12.1907C5.26384 12.377 5.62516 12.5278 6.0039 12.6379L6.24198 13.6881C6.32977 14.0753 6.67391 14.3502 7.07095 14.3502H7.92809C8.32512 14.3502 8.66927 14.0753 8.75705 13.6881L8.99505 12.6383C9.37411 12.5282 9.73573 12.3773 10.0748 12.1909L10.986 12.7653C11.3218 12.977 11.7595 12.928 12.0403 12.6473L12.6464 12.0412C12.9271 11.7604 12.9761 11.3227 12.7644 10.9869L12.1902 10.076C12.3768 9.73688 12.5278 9.37515 12.638 8.99596L13.6879 8.75794C14.0751 8.67015 14.35 8.32601 14.35 7.92897V7.07183C14.35 6.6748 14.0751 6.33065 13.6879 6.24287L12.6381 6.00488C12.528 5.62578 12.3771 5.26414 12.1906 4.92507L12.7648 4.01407C12.9766 3.6782 12.9276 3.2405 12.6468 2.95975L12.0407 2.35366C11.76 2.07292 11.3223 2.02392 10.9864 2.23565L10.0755 2.80989C9.73622 2.62328 9.37437 2.47229 8.99505 2.36209L8.75705 1.31231C8.66927 0.925096 8.32512 0.650238 7.92809 0.650238H7.07095ZM4.92053 3.81251C5.44724 3.44339 6.05665 3.18424 6.71543 3.06839L7.07095 1.50024H7.92809L8.28355 3.06816C8.94267 3.18387 9.5524 3.44302 10.0794 3.81224L11.4397 2.9547L12.0458 3.56079L11.1882 4.92117C11.5573 5.44798 11.8164 6.0575 11.9321 6.71638L13.5 7.07183V7.92897L11.932 8.28444C11.8162 8.94342 11.557 9.55301 11.1878 10.0798L12.0453 11.4402L11.4392 12.0462L10.0787 11.1886C9.55192 11.5576 8.94241 11.8166 8.28355 11.9323L7.92809 13.5002H7.07095L6.71543 11.932C6.0569 11.8162 5.44772 11.5572 4.92116 11.1883L3.56055 12.046L2.95445 11.4399L3.81213 10.0794C3.4431 9.55266 3.18403 8.94326 3.06825 8.2845L1.50002 7.92897V7.07183L3.06818 6.71632C3.18388 6.05765 3.44283 5.44833 3.81171 4.92165L2.95398 3.561L3.56008 2.95491L4.92053 3.81251ZM9.02496 7.50008C9.02496 8.34226 8.34223 9.02499 7.50005 9.02499C6.65786 9.02499 5.97513 8.34226 5.97513 7.50008C5.97513 6.65789 6.65786 5.97516 7.50005 5.97516C8.34223 5.97516 9.02496 6.65789 9.02496 7.50008ZM9.92496 7.50008C9.92496 8.83932 8.83929 9.92499 7.50005 9.92499C6.1608 9.92499 5.07513 8.83932 5.07513 7.50008C5.07513 6.16084 6.1608 5.07516 7.50005 5.07516C8.83929 5.07516 9.92496 6.16084 9.92496 7.50008Z"),A(n,"fill","currentColor"),A(t,"width","15"),A(t,"height","15"),A(t,"viewBox","0 0 15 15"),A(t,"fill","none"),A(t,"xmlns","http://www.w3.org/2000/svg")},m(e,o){b(e,t,o),O(t,n)},p:N,i:N,o:N,d(e){e&&x(t)}}}class Oh extends ut{constructor(t){super(),dt(this,t,null,Fh,lt,{})}}function gc(i,t,n){const e=i.slice();return e[1]=t[n],e}function zh(i){let t;return{c(){t=V("Repos")},m(n,e){b(n,t,e)},d(n){n&&x(t)}}}function Bh(i){let t,n=i[1].sourceFolderGroup.length+"";return{c(){t=V(n)},m(e,o){b(e,t,o)},p(e,o){2&o&&n!==(n=e[1].sourceFolderGroup.length+"")&&bt(t,n)},d(e){e&&x(t)}}}function Hh(i){let t,n,e;n=new Wt({props:{size:1,$$slots:{default:[Bh]},$$scope:{ctx:i}}});let o=[x1("accent"),{slot:"leftIcon"},{class:"c-multi-repo-chip__count"}],r={};for(let s=0;s<o.length;s+=1)r=Et(r,o[s]);return{c(){t=L("div"),v(n.$$.fragment),y1(t,r),At(t,"svelte-sqp0vc",!0)},m(s,c){b(s,t,c),w(n,t,null),e=!0},p(s,c){const a={};4098&c&&(a.$$scope={dirty:c,ctx:s}),n.$set(a),At(t,"svelte-sqp0vc",!0)},i(s){e||(d(n.$$.fragment,s),e=!0)},o(s){m(n.$$.fragment,s),e=!1},d(s){s&&x(t),y(n)}}}function Uh(i){let t,n;return t=new sr({}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function qh(i){let t,n;return t=new So.IconButton({props:{title:"Open menu",variant:"ghost",color:"neutral",size:1,$$slots:{default:[Uh]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};4096&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function jh(i){let t;return{c(){t=V("Repos")},m(n,e){b(n,t,e)},d(n){n&&x(t)}}}function Wh(i){let t,n,e=i[1].name+"";return{c(){t=V(e),n=H()},m(o,r){b(o,t,r),b(o,n,r)},p(o,r){4&r&&e!==(e=o[1].name+"")&&bt(t,e)},d(o){o&&(x(t),x(n))}}}function hc(i){let t,n;return t=new zt({props:{content:"Edit repo instructions",$$slots:{default:[Gh]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};4100&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function Vh(i){let t,n;return t=new Oh({}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function Gh(i){let t,n;const e=[i[5]];let o={$$slots:{default:[Vh]},$$scope:{ctx:i}};for(let r=0;r<e.length;r+=1)o=Et(o,e[r]);return t=new fe({props:o}),t.$on("click",function(){ze(i[1].onEditGuideline)&&i[1].onEditGuideline.apply(this,arguments)}),{c(){v(t.$$.fragment)},m(r,s){w(t,r,s),n=!0},p(r,s){i=r;const c=32&s?De(e,[go(i[5])]):{};4096&s&&(c.$$scope={dirty:s,ctx:i}),t.$set(c)},i(r){n||(d(t.$$.fragment,r),n=!0)},o(r){m(t.$$.fragment,r),n=!1},d(r){y(t,r)}}}function Kh(i){let t,n;return t=new _r({}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function Yh(i){let t,n;const e=[i[5]];let o={$$slots:{default:[Kh]},$$scope:{ctx:i}};for(let r=0;r<e.length;r+=1)o=Et(o,e[r]);return t=new fe({props:o}),t.$on("click",function(){ze(i[1].onRemove)&&i[1].onRemove.apply(this,arguments)}),{c(){v(t.$$.fragment)},m(r,s){w(t,r,s),n=!0},p(r,s){i=r;const c=32&s?De(e,[go(i[5])]):{};4096&s&&(c.$$scope={dirty:s,ctx:i}),t.$set(c)},i(r){n||(d(t.$$.fragment,r),n=!0)},o(r){m(t.$$.fragment,r),n=!1},d(r){y(t,r)}}}function Xh(i){let t,n,e,o,r,s=i[1].onEditGuideline&&hc(i);return e=new zt({props:{content:"Remove repo from context",$$slots:{default:[Yh]},$$scope:{ctx:i}}}),{c(){t=L("div"),s&&s.c(),n=H(),v(e.$$.fragment),o=H(),A(t,"class","c-multi-repo-chip__dropdown-item__actions svelte-sqp0vc"),A(t,"slot","iconRight"),At(t,"c-multi-repo-chip__dropdown-item__guideline-space",i[3]&&!i[1].onEditGuideline)},m(c,a){b(c,t,a),s&&s.m(t,null),O(t,n),w(e,t,null),O(t,o),r=!0},p(c,a){c[1].onEditGuideline?s?(s.p(c,a),4&a&&d(s,1)):(s=hc(c),s.c(),d(s,1),s.m(t,n)):s&&(q(),m(s,1,1,()=>{s=null}),j());const l={};4100&a&&(l.$$scope={dirty:a,ctx:c}),e.$set(l),(!r||12&a)&&At(t,"c-multi-repo-chip__dropdown-item__guideline-space",c[3]&&!c[1].onEditGuideline)},i(c){r||(d(s),d(e.$$.fragment,c),r=!0)},o(c){m(s),m(e.$$.fragment,c),r=!1},d(c){c&&x(t),s&&s.d(),y(e)}}}function vc(i){let t,n;const e=[i[1],{class:"c-multi-repo-chip__dropdown-item"},{highlight:!1},{disabled:!0}];let o={$$slots:{iconRight:[Xh],default:[Wh]},$$scope:{ctx:i}};for(let r=0;r<e.length;r+=1)o=Et(o,e[r]);return t=new xt.Item({props:o}),{c(){v(t.$$.fragment)},m(r,s){w(t,r,s),n=!0},p(r,s){const c=4&s?De(e,[go(r[1]),e[1],e[2],e[3]]):{};4108&s&&(c.$$scope={dirty:s,ctx:r}),t.$set(c)},i(r){n||(d(t.$$.fragment,r),n=!0)},o(r){m(t.$$.fragment,r),n=!1},d(r){y(t,r)}}}function Zh(i){let t,n,e,o;t=new xt.Label({props:{$$slots:{default:[jh]},$$scope:{ctx:i}}});let r=se(i[2]),s=[];for(let a=0;a<r.length;a+=1)s[a]=vc(gc(i,r,a));const c=a=>m(s[a],1,1,()=>{s[a]=null});return{c(){v(t.$$.fragment),n=H();for(let a=0;a<s.length;a+=1)s[a].c();e=ft()},m(a,l){w(t,a,l),b(a,n,l);for(let u=0;u<s.length;u+=1)s[u]&&s[u].m(a,l);b(a,e,l),o=!0},p(a,l){const u={};if(4096&l&&(u.$$scope={dirty:l,ctx:a}),t.$set(u),44&l){let $;for(r=se(a[2]),$=0;$<r.length;$+=1){const f=gc(a,r,$);s[$]?(s[$].p(f,l),d(s[$],1)):(s[$]=vc(f),s[$].c(),d(s[$],1),s[$].m(e.parentNode,e))}for(q(),$=r.length;$<s.length;$+=1)c($);j()}},i(a){if(!o){d(t.$$.fragment,a);for(let l=0;l<r.length;l+=1)d(s[l]);o=!0}},o(a){m(t.$$.fragment,a),s=s.filter(Boolean);for(let l=0;l<s.length;l+=1)m(s[l]);o=!1},d(a){a&&(x(n),x(e)),y(t,a),bn(s,a)}}}function Jh(i){let t,n,e,o;return t=new xt.Trigger({props:{$$slots:{default:[qh]},$$scope:{ctx:i}}}),e=new xt.Content({props:{$$slots:{default:[Zh]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment),n=H(),v(e.$$.fragment)},m(r,s){w(t,r,s),b(r,n,s),w(e,r,s),o=!0},p(r,s){const c={};4096&s&&(c.$$scope={dirty:s,ctx:r}),t.$set(c);const a={};4108&s&&(a.$$scope={dirty:s,ctx:r}),e.$set(a)},i(r){o||(d(t.$$.fragment,r),d(e.$$.fragment,r),o=!0)},o(r){m(t.$$.fragment,r),m(e.$$.fragment,r),o=!1},d(r){r&&x(n),y(t,r),y(e,r)}}}function Qh(i){let t,n;return t=new xt.Root({props:{slot:"rightButtons",$$slots:{default:[Jh]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};4108&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function t2(i){let t,n;return t=new Wo({props:{$$slots:{rightButtons:[Qh],leftIcon:[Hh],default:[zh]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,[o]){const r={};4110&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function e2(i,t,n){let e,o,r,s,c,a=N,l=N,u=()=>(l(),l=ie(f,p=>n(6,c=p)),f);i.$$.on_destroy.push(()=>a()),i.$$.on_destroy.push(()=>l());let{item:$}=t,{chatModel:f}=t;return u(),i.$$set=p=>{"item"in p&&n(1,$=p.item),"chatModel"in p&&u(n(0,f=p.chatModel))},i.$$.update=()=>{64&i.$$.dirty&&(n(4,e=c==null?void 0:c.specialContextInputModel),a(),a=ie(e,p=>n(7,s=p))),2&i.$$.dirty&&n(2,o=$.sourceFolderGroup.map(p=>({filePath:p.sourceFolder.folderRoot,name:ms(p.sourceFolder.folderRoot),onRemove:()=>{return _=p,s==null||s.markInactive(_),void(s==null?void 0:s.unpin(_));var _},onEditGuideline:!!p.sourceFolder.guidelinesEnabled&&(()=>{return _=p.sourceFolder.folderRoot,void(f==null?void 0:f.extensionClient.openGuidelines(_));var _})}))),4&i.$$.dirty&&n(3,r=o.some(p=>p.onEditGuideline))},[f,$,o,r,e,{size:1,variant:"ghost-block",color:"neutral"},c]}class n2 extends ut{constructor(t){super(),dt(this,t,e2,t2,lt,{item:1,chatModel:0})}}function o2(i){let t,n,e,o=(i[0]??"")+"";return{c(){t=L("pre"),n=L("code"),e=V(o),A(t,"class","c-selection-preview__code svelte-mrw7pf")},m(r,s){b(r,t,s),O(t,n),O(n,e)},p(r,s){1&s&&o!==(o=(r[0]??"")+"")&&bt(e,o)},i:N,o:N,d(r){r&&x(t)}}}function r2(i){let t,n,e,o;function r(a){i[5](a)}var s=i[8].default;function c(a,l){let u={text:a[0]??"",options:{automaticLayout:!0,lineNumbers:"off",wrappingIndent:"same",padding:{top:0,bottom:0},wordWrap:"off",contextmenu:!1,wordBasedSuggestions:"off",renderLineHighlight:"none",occurrencesHighlight:"off",selectionHighlight:!1,codeLens:!1,links:!1,hover:{enabled:!1},hideCursorInOverviewRuler:!0,renderWhitespace:"none",renderFinalNewline:"on"}};return a[1]!==void 0&&(u.editorInstance=a[1]),{props:u}}return s&&(t=sn(s,c(i)),Qt.push(()=>Ne(t,"editorInstance",r))),{c(){t&&v(t.$$.fragment),e=ft()},m(a,l){t&&w(t,a,l),b(a,e,l),o=!0},p(a,l){if(s!==(s=a[8].default)){if(t){q();const u=t;m(u.$$.fragment,1,0,()=>{y(u,1)}),j()}s?(t=sn(s,c(a)),Qt.push(()=>Ne(t,"editorInstance",r)),v(t.$$.fragment),d(t.$$.fragment,1),w(t,e.parentNode,e)):t=null}else if(s){const u={};1&l&&(u.text=a[0]??""),!n&&2&l&&(n=!0,u.editorInstance=a[1],Be(()=>n=!1)),t.$set(u)}},i(a){o||(t&&d(t.$$.fragment,a),o=!0)},o(a){t&&m(t.$$.fragment,a),o=!1},d(a){a&&x(e),t&&y(t,a)}}}function i2(i){let t,n,e,o=(i[0]??"")+"";return{c(){t=L("pre"),n=L("code"),e=V(o),A(t,"class","c-selection-preview__code svelte-mrw7pf")},m(r,s){b(r,t,s),O(t,n),O(n,e)},p(r,s){1&s&&o!==(o=(r[0]??"")+"")&&bt(e,o)},i:N,o:N,d(r){r&&x(t)}}}function s2(i){let t,n,e=i[3]&&function(o){let r,s,c={ctx:o,current:null,token:null,hasCatch:!0,pending:i2,then:r2,catch:o2,value:8,blocks:[,,,]};return Bo(o[3],c),{c(){r=ft(),c.block.c()},m(a,l){b(a,r,l),c.block.m(a,c.anchor=l),c.mount=()=>r.parentNode,c.anchor=r,s=!0},p(a,l){Vr(c,o=a,l)},i(a){s||(d(c.block),s=!0)},o(a){for(let l=0;l<3;l+=1){const u=c.blocks[l];m(u)}s=!1},d(a){a&&x(r),c.block.d(a),c.token=null,c=null}}}(i);return{c(){t=L("div"),e&&e.c(),A(t,"class","c-selection-hover-contents svelte-mrw7pf"),A(t,"style",i[2])},m(o,r){b(o,t,r),e&&e.m(t,null),n=!0},p(o,[r]){o[3]&&e.p(o,r),(!n||4&r)&&A(t,"style",o[2])},i(o){n||(d(e),n=!0)},o(o){m(e),n=!1},d(o){o&&x(t),e&&e.d()}}}function a2(i,t,n){let{originalCode:e}=t;const o=qi(()=>import("./index-C9A1ZQNk.js").then(l=>l.d),__vite__mapDeps([0,1,2,3,4]),import.meta.url);let r,s="",c=!1;const a=async(l,u)=>{n(4,c=!0),n(2,s=`
         width: ${l}px;
         height: min(${u}px, 40vh);
    `)};return i.$$set=l=>{"originalCode"in l&&n(0,e=l.originalCode)},i.$$.update=()=>{2&i.$$.dirty&&(r==null||r.onDidContentSizeChange(l=>a(l.contentWidth,l.contentHeight))),18&i.$$.dirty&&r&&!c&&a(r==null?void 0:r.getContentWidth(),r==null?void 0:r.getContentHeight())},[e,r,s,o,c,function(l){r=l,n(1,r)}]}class c2 extends ut{constructor(t){super(),dt(this,t,a2,s2,lt,{originalCode:0})}}function l2(i){let t,n;const e=i[2].default,o=Yt(e,i,i[3],null);return{c(){t=V(`Selection
    `),o&&o.c()},m(r,s){b(r,t,s),o&&o.m(r,s),n=!0},p(r,s){o&&o.p&&(!n||8&s)&&Xt(o,e,r,r[3],n?Jt(e,r[3],s,null):Zt(r[3]),null)},i(r){n||(d(o,r),n=!0)},o(r){m(o,r),n=!1},d(r){r&&x(t),o&&o.d(r)}}}function u2(i){let t,n;return t=new tm({props:{slot:"leftIcon"}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p:N,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function d2(i){let t,n;return t=new Wo({props:{color:"info",removeBtn:{title:"Remove selection from context",onRemove:i[1]},$$slots:{leftIcon:[u2],default:[l2]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};2&o&&(r.removeBtn={title:"Remove selection from context",onRemove:e[1]}),8&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function $2(i){let t,n;return t=new c2({props:{slot:"content",originalCode:i[0]}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};1&o&&(r.originalCode=e[0]),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function m2(i){let t,n;return t=new zt({props:{maxWidth:"",$$slots:{content:[$2],default:[d2]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,[o]){const r={};11&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function f2(i,t,n){let{$$slots:e={},$$scope:o}=t,{originalCode:r}=t,{onRemove:s}=t;return i.$$set=c=>{"originalCode"in c&&n(0,r=c.originalCode),"onRemove"in c&&n(1,s=c.onRemove),"$$scope"in c&&n(3,o=c.$$scope)},[r,s,e,o]}class p2 extends ut{constructor(t){super(),dt(this,t,f2,m2,lt,{originalCode:0,onRemove:1})}}function wc(i){let t,n,e,o;const r=[h2,g2],s=[];function c(a,l){return a[1]?0:1}return t=c(i),n=s[t]=r[t](i),{c(){n.c(),e=ft()},m(a,l){s[t].m(a,l),b(a,e,l),o=!0},p(a,l){let u=t;t=c(a),t===u?s[t].p(a,l):(q(),m(s[u],1,1,()=>{s[u]=null}),j(),n=s[t],n?n.p(a,l):(n=s[t]=r[t](a),n.c()),d(n,1),n.m(e.parentNode,e))},i(a){o||(d(n),o=!0)},o(a){m(n),o=!1},d(a){a&&x(e),s[t].d(a)}}}function g2(i){let t,n;return t=new zt({props:{content:"Edit guidelines for Augment Chat and Agent",$$slots:{default:[y2]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};520&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function h2(i){let t,n;return t=new zt({props:{$$slots:{content:[C2],default:[_2]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};521&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function v2(i){let t;return{c(){t=V(i[3])},m(n,e){b(n,t,e)},p(n,e){8&e&&bt(t,n[3])},d(n){n&&x(t)}}}function w2(i){let t,n;return t=new M1({props:{slot:"leftIcon"}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p:N,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function y2(i){let t,n,e,o,r;return n=new Wo({props:{$$slots:{leftIcon:[w2],default:[v2]},$$scope:{ctx:i}}}),{c(){t=L("div"),v(n.$$.fragment),A(t,"role","button"),A(t,"tabindex","0"),qn(t,"cursor","pointer")},m(s,c){b(s,t,c),w(n,t,null),e=!0,o||(r=[Dt(t,"click",i[5]),Dt(t,"keyup",vo("Enter",i[5]))],o=!0)},p(s,c){const a={};520&c&&(a.$$scope={dirty:c,ctx:s}),n.$set(a)},i(s){e||(d(n.$$.fragment,s),e=!0)},o(s){m(n.$$.fragment,s),e=!1},d(s){s&&x(t),y(n),o=!1,tn(r)}}}function x2(i){let t,n,e,o;return{c(){t=L("div"),n=V(i[3]),A(t,"role","button"),A(t,"tabindex","0"),qn(t,"cursor","pointer")},m(r,s){b(r,t,s),O(t,n),e||(o=[Dt(t,"click",mr(i[5])),Dt(t,"keyup",vo("Enter",i[5]))],e=!0)},p(r,s){8&s&&bt(n,r[3])},d(r){r&&x(t),e=!1,tn(o)}}}function b2(i){let t,n;return t=new jn({props:{class:"c-user-guidelines-warning-icon",slot:"leftIcon"}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p:N,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function _2(i){let t,n;return t=new Wo({props:{color:"warning",showWarning:!1,$$slots:{leftIcon:[b2],default:[x2]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};520&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function C2(i){let t,n;return t=new Yr({props:{option:i[0],slot:"content"}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};1&o&&(r.option=e[0]),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function A2(i){let t,n,e=i[2]&&wc(i);return{c(){e&&e.c(),t=ft()},m(o,r){e&&e.m(o,r),b(o,t,r),n=!0},p(o,[r]){o[2]?e?(e.p(o,r),4&r&&d(e,1)):(e=wc(o),e.c(),d(e,1),e.m(t.parentNode,t)):e&&(q(),m(e,1,1,()=>{e=null}),j())},i(o){n||(d(e),n=!0)},o(o){m(e),n=!1},d(o){o&&x(t),e&&e.d(o)}}}function M2(i,t,n){let e,o,r,s,c,a,{item:l}=t;const u=cf();return Tt(i,u,$=>n(8,a=$)),i.$$set=$=>{"item"in $&&n(0,l=$.item)},i.$$.update=()=>{var $;1&i.$$.dirty&&n(1,e=l.showWarning),1&i.$$.dirty&&n(7,o=(($=l.userGuidelines)==null?void 0:$.enabled)??!1),256&i.$$.dirty&&n(6,r=(a==null?void 0:a.flags.enableRules)??!1),64&i.$$.dirty&&n(3,s=r?"Rules & Guidelines":"User Guidelines"),194&i.$$.dirty&&n(2,c=o||r&&e)},[l,e,c,s,u,function(){u&&u.extensionClient.openSettingsPage("guidelines")},r,o,a]}class k2 extends ut{constructor(t){super(),dt(this,t,M2,A2,lt,{item:0})}}var Tm,S2={exports:{}};Tm=()=>(()=>{var i=[,(o,r,s)=>{s.r(r),s.d(r,{default:()=>l});var c,a=(c=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0,function(u={}){var $,f,p=u;function _(){function g(W){const Q=I;k=h=0,I=new Map,Q.forEach(mt=>{try{mt(W)}catch(ot){console.error(ot)}}),this.ob(),D&&D.Tb()}let h=0,k=0,I=new Map,D=null,B=null;this.requestAnimationFrame=function(W){h||(h=requestAnimationFrame(g.bind(this)));const Q=++k;return I.set(Q,W),Q},this.cancelAnimationFrame=function(W){I.delete(W),h&&I.size==0&&(cancelAnimationFrame(h),h=0)},this.Rb=function(W){B&&(document.body.remove(B),B=null),W||(B=document.createElement("div"),B.style.backgroundColor="black",B.style.position="fixed",B.style.right=0,B.style.top=0,B.style.color="white",B.style.padding="4px",B.innerHTML="RIVE FPS",W=function(Q){B.innerHTML="RIVE FPS "+Q.toFixed(1)},document.body.appendChild(B)),D=new function(){let Q=0,mt=0;this.Tb=function(){var ot=performance.now();mt?(++Q,1e3<(ot-=mt)&&(W(1e3*Q/ot),Q=mt=0)):(mt=ot,Q=0)}}},this.Ob=function(){B&&(document.body.remove(B),B=null),D=null},this.ob=function(){}}function C(g){console.assert(!0);const h=new Map;let k=-1/0;this.push=function(I){return I=I+((1<<g)-1)>>g,h.has(I)&&clearTimeout(h.get(I)),h.set(I,setTimeout(function(){h.delete(I),h.length==0?k=-1/0:I==k&&(k=Math.max(...h.keys()),console.assert(k<I))},1e3)),k=Math.max(I,k),k<<g}}p.ready=new Promise((g,h)=>{$=g,f=h});const M=p.onRuntimeInitialized;p.onRuntimeInitialized=function(){M&&M();let g=p.decodeAudio;p.decodeAudio=function(D,B){B(D=g(D))};let h=p.decodeFont;p.decodeFont=function(D,B){B(D=h(D))};const k=p.FileAssetLoader;p.ptrToAsset=D=>{let B=p.ptrToFileAsset(D);return B.isImage?p.ptrToImageAsset(D):B.isFont?p.ptrToFontAsset(D):B.isAudio?p.ptrToAudioAsset(D):B},p.CustomFileAssetLoader=k.extend("CustomFileAssetLoader",{__construct:function({loadContents:D}){this.__parent.__construct.call(this),this.Gb=D},loadContents:function(D,B){return D=p.ptrToAsset(D),this.Gb(D,B)}}),p.CDNFileAssetLoader=k.extend("CDNFileAssetLoader",{__construct:function(){this.__parent.__construct.call(this)},loadContents:function(D){let B=p.ptrToAsset(D);return(D=B.cdnUuid)!==""&&(W=B.cdnBaseUrl+"/"+D,(Q=new XMLHttpRequest).responseType="arraybuffer",Q.onreadystatechange=function(){Q.readyState==4&&Q.status==200&&(mt=>{B.decode(new Uint8Array(mt.response))})(Q)},Q.open("GET",W,!0),Q.send(null),!0);var W,Q}}),p.FallbackFileAssetLoader=k.extend("FallbackFileAssetLoader",{__construct:function(){this.__parent.__construct.call(this),this.kb=[]},addLoader:function(D){this.kb.push(D)},loadContents:function(D,B){for(let W of this.kb)if(W.loadContents(D,B))return!0;return!1}});let I=p.computeAlignment;p.computeAlignment=function(D,B,W,Q,mt=1){return I.call(this,D,B,W,Q,mt)}};const T="createConicGradient createImageData createLinearGradient createPattern createRadialGradient getContextAttributes getImageData getLineDash getTransform isContextLost isPointInPath isPointInStroke measureText".split(" "),E=new function(){function g(){if(!h){let ke=function(at,yt,ce){if(yt=Lt.createShader(yt),Lt.shaderSource(yt,ce),Lt.compileShader(yt),0<((ce=Lt.getShaderInfoLog(yt))||"").length)throw ce;Lt.attachShader(at,yt)};var qt=document.createElement("canvas"),Ot={alpha:1,depth:0,stencil:0,antialias:0,premultipliedAlpha:1,preserveDrawingBuffer:0,powerPreference:"high-performance",failIfMajorPerformanceCaveat:0,enableExtensionsByDefault:1,explicitSwapControl:1,renderViaOffscreenBackBuffer:1};let Lt;if(/iPhone|iPad|iPod/i.test(navigator.userAgent)){if(Lt=qt.getContext("webgl",Ot),k=1,!Lt)return console.log("No WebGL support. Image mesh will not be drawn."),!1}else if(Lt=qt.getContext("webgl2",Ot))k=2;else{if(!(Lt=qt.getContext("webgl",Ot)))return console.log("No WebGL support. Image mesh will not be drawn."),!1;k=1}if(Lt=new Proxy(Lt,{get:(at,yt)=>at.isContextLost()?(mt||(console.error("Cannot render the mesh because the GL Context was lost. Tried to invoke ",yt),mt=!0),typeof at[yt]=="function"?function(){}:void 0):typeof at[yt]=="function"?function(...ce){return at[yt].apply(at,ce)}:at[yt],set(at,yt,ce){if(!at.isContextLost())return at[yt]=ce,!0;mt||(console.error("Cannot render the mesh because the GL Context was lost. Tried to set property "+yt),mt=!0)}}),I=Math.min(Lt.getParameter(Lt.MAX_RENDERBUFFER_SIZE),Lt.getParameter(Lt.MAX_TEXTURE_SIZE)),ke(qt=Lt.createProgram(),Lt.VERTEX_SHADER,`attribute vec2 vertex;
                attribute vec2 uv;
                uniform vec4 mat;
                uniform vec2 translate;
                varying vec2 st;
                void main() {
                    st = uv;
                    gl_Position = vec4(mat2(mat) * vertex + translate, 0, 1);
                }`),ke(qt,Lt.FRAGMENT_SHADER,`precision highp float;
                uniform sampler2D image;
                varying vec2 st;
                void main() {
                    gl_FragColor = texture2D(image, st);
                }`),Lt.bindAttribLocation(qt,0,"vertex"),Lt.bindAttribLocation(qt,1,"uv"),Lt.linkProgram(qt),0<((Ot=Lt.getProgramInfoLog(qt))||"").trim().length)throw Ot;D=Lt.getUniformLocation(qt,"mat"),B=Lt.getUniformLocation(qt,"translate"),Lt.useProgram(qt),Lt.bindBuffer(Lt.ARRAY_BUFFER,Lt.createBuffer()),Lt.enableVertexAttribArray(0),Lt.enableVertexAttribArray(1),Lt.bindBuffer(Lt.ELEMENT_ARRAY_BUFFER,Lt.createBuffer()),Lt.uniform1i(Lt.getUniformLocation(qt,"image"),0),Lt.pixelStorei(Lt.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),h=Lt}return!0}let h=null,k=0,I=0,D=null,B=null,W=0,Q=0,mt=!1;g(),this.hc=function(){return g(),I},this.Mb=function(qt){h.deleteTexture&&h.deleteTexture(qt)},this.Lb=function(qt){if(!g())return null;const Ot=h.createTexture();return Ot?(h.bindTexture(h.TEXTURE_2D,Ot),h.texImage2D(h.TEXTURE_2D,0,h.RGBA,h.RGBA,h.UNSIGNED_BYTE,qt),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_S,h.CLAMP_TO_EDGE),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_T,h.CLAMP_TO_EDGE),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MAG_FILTER,h.LINEAR),k==2?(h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MIN_FILTER,h.LINEAR_MIPMAP_LINEAR),h.generateMipmap(h.TEXTURE_2D)):h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MIN_FILTER,h.LINEAR),Ot):null};const ot=new C(8),Pt=new C(8),Nt=new C(10),Bt=new C(10);this.Qb=function(qt,Ot,Lt,ke,at){if(g()){var yt=ot.push(qt),ce=Pt.push(Ot);if(h.canvas){for(var Xe of(h.canvas.width==yt&&h.canvas.height==ce||(h.canvas.width=yt,h.canvas.height=ce),h.viewport(0,ce-Ot,qt,Ot),h.disable(h.SCISSOR_TEST),h.clearColor(0,0,0,0),h.clear(h.COLOR_BUFFER_BIT),h.enable(h.SCISSOR_TEST),Lt.sort((Se,lo)=>lo.wb-Se.wb),yt=Nt.push(ke),W!=yt&&(h.bufferData(h.ARRAY_BUFFER,8*yt,h.DYNAMIC_DRAW),W=yt),yt=0,Lt))h.bufferSubData(h.ARRAY_BUFFER,yt,Xe.Ta),yt+=4*Xe.Ta.length;for(var Kn of(console.assert(yt==4*ke),Lt))h.bufferSubData(h.ARRAY_BUFFER,yt,Kn.Db),yt+=4*Kn.Db.length;for(var Zo of(console.assert(yt==8*ke),yt=Bt.push(at),Q!=yt&&(h.bufferData(h.ELEMENT_ARRAY_BUFFER,2*yt,h.DYNAMIC_DRAW),Q=yt),Xe=0,Lt))h.bufferSubData(h.ELEMENT_ARRAY_BUFFER,Xe,Zo.indices),Xe+=2*Zo.indices.length;console.assert(Xe==2*at),Zo=0,Kn=!0,yt=Xe=0;for(const Se of Lt){Se.image.Ka!=Zo&&(h.bindTexture(h.TEXTURE_2D,Se.image.Ja||null),Zo=Se.image.Ka),Se.mc?(h.scissor(Se.Ya,ce-Se.Za-Se.jb,Se.Ac,Se.jb),Kn=!0):Kn&&(h.scissor(0,ce-Ot,qt,Ot),Kn=!1),Lt=2/qt;const lo=-2/Ot;h.uniform4f(D,Se.ha[0]*Lt*Se.Ba,Se.ha[1]*lo*Se.Ca,Se.ha[2]*Lt*Se.Ba,Se.ha[3]*lo*Se.Ca),h.uniform2f(B,Se.ha[4]*Lt*Se.Ba+Lt*(Se.Ya-Se.ic*Se.Ba)-1,Se.ha[5]*lo*Se.Ca+lo*(Se.Za-Se.jc*Se.Ca)+1),h.vertexAttribPointer(0,2,h.FLOAT,!1,0,yt),h.vertexAttribPointer(1,2,h.FLOAT,!1,0,yt+4*ke),h.drawElements(h.TRIANGLES,Se.indices.length,h.UNSIGNED_SHORT,Xe),yt+=4*Se.Ta.length,Xe+=2*Se.indices.length}console.assert(yt==4*ke),console.assert(Xe==2*at)}}},this.canvas=function(){return g()&&h.canvas}},R=p.onRuntimeInitialized;p.onRuntimeInitialized=function(){function g(wt){switch(wt){case ot.srcOver:return"source-over";case ot.screen:return"screen";case ot.overlay:return"overlay";case ot.darken:return"darken";case ot.lighten:return"lighten";case ot.colorDodge:return"color-dodge";case ot.colorBurn:return"color-burn";case ot.hardLight:return"hard-light";case ot.softLight:return"soft-light";case ot.difference:return"difference";case ot.exclusion:return"exclusion";case ot.multiply:return"multiply";case ot.hue:return"hue";case ot.saturation:return"saturation";case ot.color:return"color";case ot.luminosity:return"luminosity"}}function h(wt){return"rgba("+((16711680&wt)>>>16)+","+((65280&wt)>>>8)+","+((255&wt)>>>0)+","+((4278190080&wt)>>>24)/255+")"}function k(){0<ce.length&&(E.Qb(yt.drawWidth(),yt.drawHeight(),ce,Xe,Kn),ce=[],Kn=Xe=0,yt.reset(512,512));for(const wt of at){for(const Ht of wt.H)Ht();wt.H=[]}at.clear()}R&&R();var I=p.RenderPaintStyle;const D=p.RenderPath,B=p.RenderPaint,W=p.Renderer,Q=p.StrokeCap,mt=p.StrokeJoin,ot=p.BlendMode,Pt=I.fill,Nt=I.stroke,Bt=p.FillRule.evenOdd;let qt=1;var Ot=p.RenderImage.extend("CanvasRenderImage",{__construct:function({la:wt,xa:Ht}={}){this.__parent.__construct.call(this),this.Ka=qt,qt=qt+1&2147483647||1,this.la=wt,this.xa=Ht},__destruct:function(){this.Ja&&(E.Mb(this.Ja),URL.revokeObjectURL(this.Wa)),this.__parent.__destruct.call(this)},decode:function(wt){var Ht=this;Ht.xa&&Ht.xa(Ht);var be=new Image;Ht.Wa=URL.createObjectURL(new Blob([wt],{type:"image/png"})),be.onload=function(){Ht.Fb=be,Ht.Ja=E.Lb(be),Ht.size(be.width,be.height),Ht.la&&Ht.la(Ht)},be.src=Ht.Wa}}),Lt=D.extend("CanvasRenderPath",{__construct:function(){this.__parent.__construct.call(this),this.T=new Path2D},rewind:function(){this.T=new Path2D},addPath:function(wt,Ht,be,_e,me,Ee,Ie){var Oe=this.T,oo=Oe.addPath;wt=wt.T;const vn=new DOMMatrix;vn.a=Ht,vn.b=be,vn.c=_e,vn.d=me,vn.e=Ee,vn.f=Ie,oo.call(Oe,wt,vn)},fillRule:function(wt){this.Va=wt},moveTo:function(wt,Ht){this.T.moveTo(wt,Ht)},lineTo:function(wt,Ht){this.T.lineTo(wt,Ht)},cubicTo:function(wt,Ht,be,_e,me,Ee){this.T.bezierCurveTo(wt,Ht,be,_e,me,Ee)},close:function(){this.T.closePath()}}),ke=B.extend("CanvasRenderPaint",{color:function(wt){this.Xa=h(wt)},thickness:function(wt){this.Ib=wt},join:function(wt){switch(wt){case mt.miter:this.Ia="miter";break;case mt.round:this.Ia="round";break;case mt.bevel:this.Ia="bevel"}},cap:function(wt){switch(wt){case Q.butt:this.Ha="butt";break;case Q.round:this.Ha="round";break;case Q.square:this.Ha="square"}},style:function(wt){this.Hb=wt},blendMode:function(wt){this.Eb=g(wt)},clearGradient:function(){this.ja=null},linearGradient:function(wt,Ht,be,_e){this.ja={yb:wt,zb:Ht,bb:be,cb:_e,Ra:[]}},radialGradient:function(wt,Ht,be,_e){this.ja={yb:wt,zb:Ht,bb:be,cb:_e,Ra:[],ec:!0}},addStop:function(wt,Ht){this.ja.Ra.push({color:wt,stop:Ht})},completeGradient:function(){},draw:function(wt,Ht,be){let _e=this.Hb;var me=this.Xa,Ee=this.ja;if(wt.globalCompositeOperation=this.Eb,Ee!=null){me=Ee.yb;var Ie=Ee.zb;const oo=Ee.bb;var Oe=Ee.cb;const vn=Ee.Ra;Ee.ec?(Ee=oo-me,Oe-=Ie,me=wt.createRadialGradient(me,Ie,0,me,Ie,Math.sqrt(Ee*Ee+Oe*Oe))):me=wt.createLinearGradient(me,Ie,oo,Oe);for(let uo=0,Sn=vn.length;uo<Sn;uo++)Ie=vn[uo],me.addColorStop(Ie.stop,h(Ie.color));this.Xa=me,this.ja=null}switch(_e){case Nt:wt.strokeStyle=me,wt.lineWidth=this.Ib,wt.lineCap=this.Ha,wt.lineJoin=this.Ia,wt.stroke(Ht);break;case Pt:wt.fillStyle=me,wt.fill(Ht,be)}}});const at=new Set;let yt=null,ce=[],Xe=0,Kn=0;var Zo=p.CanvasRenderer=W.extend("Renderer",{__construct:function(wt){this.__parent.__construct.call(this),this.S=[1,0,0,1,0,0],this.C=wt.getContext("2d"),this.Ua=wt,this.H=[]},save:function(){this.S.push(...this.S.slice(this.S.length-6)),this.H.push(this.C.save.bind(this.C))},restore:function(){const wt=this.S.length-6;if(6>wt)throw"restore() called without matching save().";this.S.splice(wt),this.H.push(this.C.restore.bind(this.C))},transform:function(wt,Ht,be,_e,me,Ee){const Ie=this.S,Oe=Ie.length-6;Ie.splice(Oe,6,Ie[Oe]*wt+Ie[Oe+2]*Ht,Ie[Oe+1]*wt+Ie[Oe+3]*Ht,Ie[Oe]*be+Ie[Oe+2]*_e,Ie[Oe+1]*be+Ie[Oe+3]*_e,Ie[Oe]*me+Ie[Oe+2]*Ee+Ie[Oe+4],Ie[Oe+1]*me+Ie[Oe+3]*Ee+Ie[Oe+5]),this.H.push(this.C.transform.bind(this.C,wt,Ht,be,_e,me,Ee))},rotate:function(wt){const Ht=Math.sin(wt);wt=Math.cos(wt),this.transform(wt,Ht,-Ht,wt,0,0)},_drawPath:function(wt,Ht){this.H.push(Ht.draw.bind(Ht,this.C,wt.T,wt.Va===Bt?"evenodd":"nonzero"))},_drawRiveImage:function(wt,Ht,be){var _e=wt.Fb;if(_e){var me=this.C,Ee=g(Ht);this.H.push(function(){me.globalCompositeOperation=Ee,me.globalAlpha=be,me.drawImage(_e,0,0),me.globalAlpha=1})}},_getMatrix:function(wt){const Ht=this.S,be=Ht.length-6;for(let _e=0;6>_e;++_e)wt[_e]=Ht[be+_e]},_drawImageMesh:function(wt,Ht,be,_e,me,Ee,Ie,Oe,oo,vn){var uo=this.C.canvas.width,Sn=this.C.canvas.height;const xa=oo-Ie,ba=vn-Oe;Ie=Math.max(Ie,0),Oe=Math.max(Oe,0),oo=Math.min(oo,uo),vn=Math.min(vn,Sn);const Rr=oo-Ie,Dr=vn-Oe;if(console.assert(Rr<=Math.min(xa,uo)),console.assert(Dr<=Math.min(ba,Sn)),!(0>=Rr||0>=Dr)){oo=Rr<xa||Dr<ba,uo=vn=1;var Jo=Math.ceil(Rr*vn),Qo=Math.ceil(Dr*uo);Sn=E.hc(),Jo>Sn&&(vn*=Sn/Jo,Jo=Sn),Qo>Sn&&(uo*=Sn/Qo,Qo=Sn),yt||(yt=new p.DynamicRectanizer(Sn),yt.reset(512,512)),0>(Sn=yt.addRect(Jo,Qo))&&(k(),at.add(this),Sn=yt.addRect(Jo,Qo),console.assert(0<=Sn));var _a=65535&Sn,Ca=Sn>>16;ce.push({ha:this.S.slice(this.S.length-6),image:wt,Ya:_a,Za:Ca,ic:Ie,jc:Oe,Ac:Jo,jb:Qo,Ba:vn,Ca:uo,Ta:new Float32Array(_e),Db:new Float32Array(me),indices:new Uint16Array(Ee),mc:oo,wb:wt.Ka<<1|(oo?1:0)}),Xe+=_e.length,Kn+=Ee.length;var lr=this.C,h1=g(Ht);this.H.push(function(){lr.save(),lr.resetTransform(),lr.globalCompositeOperation=h1,lr.globalAlpha=be;const Aa=E.canvas();Aa&&lr.drawImage(Aa,_a,Ca,Jo,Qo,Ie,Oe,Rr,Dr),lr.restore()})}},_clipPath:function(wt){this.H.push(this.C.clip.bind(this.C,wt.T,wt.Va===Bt?"evenodd":"nonzero"))},clear:function(){at.add(this),this.H.push(this.C.clearRect.bind(this.C,0,0,this.Ua.width,this.Ua.height))},flush:function(){},translate:function(wt,Ht){this.transform(1,0,0,1,wt,Ht)}});p.makeRenderer=function(wt){const Ht=new Zo(wt),be=Ht.C;return new Proxy(Ht,{get(_e,me){if(typeof _e[me]=="function")return function(...Ee){return _e[me].apply(_e,Ee)};if(typeof be[me]=="function"){if(-1<T.indexOf(me))throw Error("RiveException: Method call to '"+me+"()' is not allowed, as the renderer cannot immediately pass through the return                 values of any canvas 2d context methods.");return function(...Ee){Ht.H.push(be[me].bind(be,...Ee))}}return _e[me]},set(_e,me,Ee){if(me in be)return Ht.H.push(()=>{be[me]=Ee}),!0}})},p.decodeImage=function(wt,Ht){new Ot({la:Ht}).decode(wt)},p.renderFactory={makeRenderPaint:function(){return new ke},makeRenderPath:function(){return new Lt},makeRenderImage:function(){let wt=lo;return new Ot({xa:()=>{wt.total++},la:()=>{if(wt.loaded++,wt.loaded===wt.total){const Ht=wt.ready;Ht&&(Ht(),wt.ready=null)}}})}};let Se=p.load,lo=null;p.load=function(wt,Ht,be=!0){const _e=new p.FallbackFileAssetLoader;return Ht!==void 0&&_e.addLoader(Ht),be&&(Ht=new p.CDNFileAssetLoader,_e.addLoader(Ht)),new Promise(function(me){let Ee=null;lo={total:0,loaded:0,ready:function(){me(Ee)}},Ee=Se(wt,_e),lo.total==0&&me(Ee)})};let g1=p.RendererWrapper.prototype.align;p.RendererWrapper.prototype.align=function(wt,Ht,be,_e,me=1){g1.call(this,wt,Ht,be,_e,me)},I=new _,p.requestAnimationFrame=I.requestAnimationFrame.bind(I),p.cancelAnimationFrame=I.cancelAnimationFrame.bind(I),p.enableFPSCounter=I.Rb.bind(I),p.disableFPSCounter=I.Ob,I.ob=k,p.resolveAnimationFrame=k,p.cleanup=function(){yt&&yt.delete()}};var P,J,K=Object.assign({},p),et="./this.program",U=typeof window=="object",G=typeof importScripts=="function",nt="";(U||G)&&(G?nt=self.location.href:typeof document<"u"&&document.currentScript&&(nt=document.currentScript.src),c&&(nt=c),nt=nt.indexOf("blob:")!==0?nt.substr(0,nt.replace(/[?#].*/,"").lastIndexOf("/")+1):"",G&&(J=g=>{var h=new XMLHttpRequest;return h.open("GET",g,!1),h.responseType="arraybuffer",h.send(null),new Uint8Array(h.response)}),P=(g,h,k)=>{var I=new XMLHttpRequest;I.open("GET",g,!0),I.responseType="arraybuffer",I.onload=()=>{I.status==200||I.status==0&&I.response?h(I.response):k()},I.onerror=k,I.send(null)});var X,Y=p.print||console.log.bind(console),Z=p.printErr||console.error.bind(console);Object.assign(p,K),K=null,p.thisProgram&&(et=p.thisProgram),p.wasmBinary&&(X=p.wasmBinary),p.noExitRuntime,typeof WebAssembly!="object"&&de("no native wasm support detected");var it,rt,ht,ct,vt,Gt,Ct,jt,Ve,ye,Ge=!1;function z(){var g=it.buffer;p.HEAP8=ht=new Int8Array(g),p.HEAP16=vt=new Int16Array(g),p.HEAP32=Ct=new Int32Array(g),p.HEAPU8=ct=new Uint8Array(g),p.HEAPU16=Gt=new Uint16Array(g),p.HEAPU32=jt=new Uint32Array(g),p.HEAPF32=Ve=new Float32Array(g),p.HEAPF64=ye=new Float64Array(g)}var S,F=[],tt=[],st=[];function gt(){var g=p.preRun.shift();F.unshift(g)}var _t,Rt=0,ee=null;function de(g){throw p.onAbort&&p.onAbort(g),Z(g="Aborted("+g+")"),Ge=!0,g=new WebAssembly.RuntimeError(g+". Build with -sASSERTIONS for more info."),f(g),g}function It(g){return g.startsWith("data:application/octet-stream;base64,")}if(!It(_t="canvas_advanced.wasm")){var he=_t;_t=p.locateFile?p.locateFile(he,nt):nt+he}function Ze(g){if(g==_t&&X)return new Uint8Array(X);if(J)return J(g);throw"both async and sync fetching of the wasm failed"}function Le(g,h,k){return function(I){if(!X&&(U||G)){if(typeof fetch=="function"&&!I.startsWith("file://"))return fetch(I,{credentials:"same-origin"}).then(D=>{if(!D.ok)throw"failed to load wasm binary file at '"+I+"'";return D.arrayBuffer()}).catch(()=>Ze(I));if(P)return new Promise((D,B)=>{P(I,W=>D(new Uint8Array(W)),B)})}return Promise.resolve().then(()=>Ze(I))}(g).then(I=>WebAssembly.instantiate(I,h)).then(I=>I).then(k,I=>{Z("failed to asynchronously prepare wasm: "+I),de(I)})}var ne,Ue,_n={448252:(g,h,k,I,D)=>{if(typeof window>"u"||(window.AudioContext||window.webkitAudioContext)===void 0)return 0;if(window.h===void 0){window.h={Aa:0},window.h.I={},window.h.I.ya=g,window.h.I.capture=h,window.h.I.La=k,window.h.ga={},window.h.ga.stopped=I,window.h.ga.xb=D;let B=window.h;B.D=[],B.yc=function(W){for(var Q=0;Q<B.D.length;++Q)if(B.D[Q]==null)return B.D[Q]=W,Q;return B.D.push(W),B.D.length-1},B.Cb=function(W){for(B.D[W]=null;0<B.D.length&&B.D[B.D.length-1]==null;)B.D.pop()},B.Sc=function(W){for(var Q=0;Q<B.D.length;++Q)if(B.D[Q]==W)return B.Cb(Q)},B.ra=function(W){return B.D[W]},B.Bb=["touchend","click"],B.unlock=function(){for(var W=0;W<B.D.length;++W){var Q=B.D[W];Q!=null&&Q.J!=null&&Q.state===B.ga.xb&&Q.J.resume().then(()=>{pa(Q.pb)},mt=>{console.error("Failed to resume audiocontext",mt)})}B.Bb.map(function(mt){document.removeEventListener(mt,B.unlock,!0)})},B.Bb.map(function(W){document.addEventListener(W,B.unlock,!0)})}return window.h.Aa+=1,1},450430:()=>{window.h!==void 0&&(--window.h.Aa,window.h.Aa===0&&delete window.h)},450594:()=>navigator.mediaDevices!==void 0&&navigator.mediaDevices.getUserMedia!==void 0,450698:()=>{try{var g=new(window.AudioContext||window.webkitAudioContext),h=g.sampleRate;return g.close(),h}catch{return 0}},450869:(g,h,k,I,D,B)=>{if(window.h===void 0)return-1;var W={},Q={};return g==window.h.I.ya&&k!=0&&(Q.sampleRate=k),W.J=new(window.AudioContext||window.webkitAudioContext)(Q),W.J.suspend(),W.state=window.h.ga.stopped,k=0,g!=window.h.I.ya&&(k=h),W.Z=W.J.createScriptProcessor(I,k,h),W.Z.onaudioprocess=function(mt){if(W.sa!=null&&W.sa.length!=0||(W.sa=new Float32Array(Ve.buffer,D,I*h)),g==window.h.I.capture||g==window.h.I.La){for(var ot=0;ot<h;ot+=1)for(var Pt=mt.inputBuffer.getChannelData(ot),Nt=W.sa,Bt=0;Bt<I;Bt+=1)Nt[Bt*h+ot]=Pt[Bt];ga(B,I,D)}if(g==window.h.I.ya||g==window.h.I.La)for(ha(B,I,D),ot=0;ot<mt.outputBuffer.numberOfChannels;++ot)for(Pt=mt.outputBuffer.getChannelData(ot),Nt=W.sa,Bt=0;Bt<I;Bt+=1)Pt[Bt]=Nt[Bt*h+ot];else for(ot=0;ot<mt.outputBuffer.numberOfChannels;++ot)mt.outputBuffer.getChannelData(ot).fill(0)},g!=window.h.I.capture&&g!=window.h.I.La||navigator.mediaDevices.getUserMedia({audio:!0,video:!1}).then(function(mt){W.Da=W.J.createMediaStreamSource(mt),W.Da.connect(W.Z),W.Z.connect(W.J.destination)}).catch(function(mt){console.log("Failed to get user media: "+mt)}),g==window.h.I.ya&&W.Z.connect(W.J.destination),W.pb=B,window.h.yc(W)},453746:g=>window.h.ra(g).J.sampleRate,453819:g=>{(g=window.h.ra(g)).Z!==void 0&&(g.Z.onaudioprocess=function(){},g.Z.disconnect(),g.Z=void 0),g.Da!==void 0&&(g.Da.disconnect(),g.Da=void 0),g.J.close(),g.J=void 0,g.pb=void 0},454219:g=>{window.h.Cb(g)},454269:g=>{(g=window.h.ra(g)).J.resume(),g.state=window.h.ga.xb},454408:g=>{(g=window.h.ra(g)).J.suspend(),g.state=window.h.ga.stopped}},Je=g=>{for(;0<g.length;)g.shift()(p)},Cn=(g,h)=>{for(var k=0,I=g.length-1;0<=I;I--){var D=g[I];D==="."?g.splice(I,1):D===".."?(g.splice(I,1),k++):k&&(g.splice(I,1),k--)}if(h)for(;k;k--)g.unshift("..");return g},Me=g=>{var h=g.charAt(0)==="/",k=g.substr(-1)==="/";return(g=Cn(g.split("/").filter(I=>!!I),!h).join("/"))||h||(g="."),g&&k&&(g+="/"),(h?"/":"")+g},Jn=g=>{var h=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/.exec(g).slice(1);return g=h[0],h=h[1],g||h?(h&&(h=h.substr(0,h.length-1)),g+h):"."},gn=g=>{if(g==="/")return"/";var h=(g=(g=Me(g)).replace(/\/$/,"")).lastIndexOf("/");return h===-1?g:g.substr(h+1)},en=g=>(en=(()=>{if(typeof crypto=="object"&&typeof crypto.getRandomValues=="function")return h=>crypto.getRandomValues(h);de("initRandomDevice")})())(g);function Wn(){for(var g="",h=!1,k=arguments.length-1;-1<=k&&!h;k--){if(typeof(h=0<=k?arguments[k]:"/")!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!h)return"";g=h+"/"+g,h=h.charAt(0)==="/"}return(h?"/":"")+(g=Cn(g.split("/").filter(I=>!!I),!h).join("/"))||"."}var hn=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,an=(g,h,k)=>{var I=h+k;for(k=h;g[k]&&!(k>=I);)++k;if(16<k-h&&g.buffer&&hn)return hn.decode(g.subarray(h,k));for(I="";h<k;){var D=g[h++];if(128&D){var B=63&g[h++];if((224&D)==192)I+=String.fromCharCode((31&D)<<6|B);else{var W=63&g[h++];65536>(D=(240&D)==224?(15&D)<<12|B<<6|W:(7&D)<<18|B<<12|W<<6|63&g[h++])?I+=String.fromCharCode(D):(D-=65536,I+=String.fromCharCode(55296|D>>10,56320|1023&D))}}else I+=String.fromCharCode(D)}return I},qe=[],Tn=g=>{for(var h=0,k=0;k<g.length;++k){var I=g.charCodeAt(k);127>=I?h++:2047>=I?h+=2:55296<=I&&57343>=I?(h+=4,++k):h+=3}return h},Kt=(g,h,k,I)=>{if(!(0<I))return 0;var D=k;I=k+I-1;for(var B=0;B<g.length;++B){var W=g.charCodeAt(B);if(55296<=W&&57343>=W&&(W=65536+((1023&W)<<10)|1023&g.charCodeAt(++B)),127>=W){if(k>=I)break;h[k++]=W}else{if(2047>=W){if(k+1>=I)break;h[k++]=192|W>>6}else{if(65535>=W){if(k+2>=I)break;h[k++]=224|W>>12}else{if(k+3>=I)break;h[k++]=240|W>>18,h[k++]=128|W>>12&63}h[k++]=128|W>>6&63}h[k++]=128|63&W}}return h[k]=0,k-D};function fn(g,h){var k=Array(Tn(g)+1);return g=Kt(g,k,0,k.length),h&&(k.length=g),k}var Dn=[];function Pn(g,h){Dn[g]={input:[],F:[],V:h},to(g,Un)}var Un={open:function(g){var h=Dn[g.node.za];if(!h)throw new St(43);g.s=h,g.seekable=!1},close:function(g){g.s.V.qa(g.s)},qa:function(g){g.s.V.qa(g.s)},read:function(g,h,k,I){if(!g.s||!g.s.V.ib)throw new St(60);for(var D=0,B=0;B<I;B++){try{var W=g.s.V.ib(g.s)}catch{throw new St(29)}if(W===void 0&&D===0)throw new St(6);if(W==null)break;D++,h[k+B]=W}return D&&(g.node.timestamp=Date.now()),D},write:function(g,h,k,I){if(!g.s||!g.s.V.Oa)throw new St(60);try{for(var D=0;D<I;D++)g.s.V.Oa(g.s,h[k+D])}catch{throw new St(29)}return I&&(g.node.timestamp=Date.now()),D}},Nn={ib:function(){t:{if(!qe.length){var g=null;if(typeof window<"u"&&typeof window.prompt=="function"?(g=window.prompt("Input: "))!==null&&(g+=`
`):typeof readline=="function"&&(g=readline())!==null&&(g+=`
`),!g){g=null;break t}qe=fn(g,!0)}g=qe.shift()}return g},Oa:function(g,h){h===null||h===10?(Y(an(g.F,0)),g.F=[]):h!=0&&g.F.push(h)},qa:function(g){g.F&&0<g.F.length&&(Y(an(g.F,0)),g.F=[])},bc:function(){return{Fc:25856,Hc:5,Ec:191,Gc:35387,Dc:[3,28,127,21,4,0,1,0,17,19,26,0,18,15,23,22,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}},cc:function(){return 0},dc:function(){return[24,80]}},Vn={Oa:function(g,h){h===null||h===10?(Z(an(g.F,0)),g.F=[]):h!=0&&g.F.push(h)},qa:function(g){g.F&&0<g.F.length&&(Z(an(g.F,0)),g.F=[])}};function He(g,h){var k=g.j?g.j.length:0;k>=h||(h=Math.max(h,k*(1048576>k?2:1.125)>>>0),k!=0&&(h=Math.max(h,256)),k=g.j,g.j=new Uint8Array(h),0<g.v&&g.j.set(k.subarray(0,g.v),0))}var En,xe,je,cn,Vt={O:null,U:()=>Vt.createNode(null,"/",16895,0),createNode(g,h,k,I){if((61440&k)==24576||(61440&k)==4096)throw new St(63);return Vt.O||(Vt.O={dir:{node:{Y:Vt.l.Y,P:Vt.l.P,ka:Vt.l.ka,va:Vt.l.va,ub:Vt.l.ub,Ab:Vt.l.Ab,vb:Vt.l.vb,sb:Vt.l.sb,Ea:Vt.l.Ea},stream:{ba:Vt.m.ba}},file:{node:{Y:Vt.l.Y,P:Vt.l.P},stream:{ba:Vt.m.ba,read:Vt.m.read,write:Vt.m.write,pa:Vt.m.pa,lb:Vt.m.lb,nb:Vt.m.nb}},link:{node:{Y:Vt.l.Y,P:Vt.l.P,ma:Vt.l.ma},stream:{}},$a:{node:{Y:Vt.l.Y,P:Vt.l.P},stream:Ke}}),(61440&(k=Ar(g,h,k,I)).mode)==16384?(k.l=Vt.O.dir.node,k.m=Vt.O.dir.stream,k.j={}):(61440&k.mode)==32768?(k.l=Vt.O.file.node,k.m=Vt.O.file.stream,k.v=0,k.j=null):(61440&k.mode)==40960?(k.l=Vt.O.link.node,k.m=Vt.O.link.stream):(61440&k.mode)==8192&&(k.l=Vt.O.$a.node,k.m=Vt.O.$a.stream),k.timestamp=Date.now(),g&&(g.j[h]=k,g.timestamp=k.timestamp),k},Kc:g=>g.j?g.j.subarray?g.j.subarray(0,g.v):new Uint8Array(g.j):new Uint8Array(0),l:{Y(g){var h={};return h.Jc=(61440&g.mode)==8192?g.id:1,h.Mc=g.id,h.mode=g.mode,h.Oc=1,h.uid=0,h.Lc=0,h.za=g.za,(61440&g.mode)==16384?h.size=4096:(61440&g.mode)==32768?h.size=g.v:(61440&g.mode)==40960?h.size=g.link.length:h.size=0,h.Bc=new Date(g.timestamp),h.Nc=new Date(g.timestamp),h.Ic=new Date(g.timestamp),h.Jb=4096,h.Cc=Math.ceil(h.size/h.Jb),h},P(g,h){if(h.mode!==void 0&&(g.mode=h.mode),h.timestamp!==void 0&&(g.timestamp=h.timestamp),h.size!==void 0&&(h=h.size,g.v!=h))if(h==0)g.j=null,g.v=0;else{var k=g.j;g.j=new Uint8Array(h),k&&g.j.set(k.subarray(0,Math.min(h,g.v))),g.v=h}},ka(){throw Te[44]},va:(g,h,k,I)=>Vt.createNode(g,h,k,I),ub(g,h,k){if((61440&g.mode)==16384){try{var I=Vo(h,k)}catch{}if(I)for(var D in I.j)throw new St(55)}delete g.parent.j[g.name],g.parent.timestamp=Date.now(),g.name=k,h.j[k]=g,h.timestamp=g.parent.timestamp,g.parent=h},Ab(g,h){delete g.j[h],g.timestamp=Date.now()},vb(g,h){var k,I=Vo(g,h);for(k in I.j)throw new St(55);delete g.j[h],g.timestamp=Date.now()},sb(g){var h,k=[".",".."];for(h in g.j)g.j.hasOwnProperty(h)&&k.push(h);return k},Ea:(g,h,k)=>((g=Vt.createNode(g,h,41471,0)).link=k,g),ma(g){if((61440&g.mode)!=40960)throw new St(28);return g.link}},m:{read(g,h,k,I,D){var B=g.node.j;if(D>=g.node.v)return 0;if(8<(g=Math.min(g.node.v-D,I))&&B.subarray)h.set(B.subarray(D,D+g),k);else for(I=0;I<g;I++)h[k+I]=B[D+I];return g},write(g,h,k,I,D,B){if(h.buffer===ht.buffer&&(B=!1),!I)return 0;if((g=g.node).timestamp=Date.now(),h.subarray&&(!g.j||g.j.subarray)){if(B)return g.j=h.subarray(k,k+I),g.v=I;if(g.v===0&&D===0)return g.j=h.slice(k,k+I),g.v=I;if(D+I<=g.v)return g.j.set(h.subarray(k,k+I),D),I}if(He(g,D+I),g.j.subarray&&h.subarray)g.j.set(h.subarray(k,k+I),D);else for(B=0;B<I;B++)g.j[D+B]=h[k+B];return g.v=Math.max(g.v,D+I),I},ba(g,h,k){if(k===1?h+=g.position:k===2&&(61440&g.node.mode)==32768&&(h+=g.node.v),0>h)throw new St(28);return h},pa(g,h,k){He(g.node,h+k),g.node.v=Math.max(g.node.v,h+k)},lb(g,h,k,I,D){if((61440&g.node.mode)!=32768)throw new St(43);if(g=g.node.j,2&D||g.buffer!==ht.buffer){if((0<k||k+h<g.length)&&(g=g.subarray?g.subarray(k,k+h):Array.prototype.slice.call(g,k,k+h)),k=!0,de(),!(h=void 0))throw new St(48);ht.set(g,h)}else k=!1,h=g.byteOffset;return{o:h,M:k}},nb:(g,h,k,I)=>(Vt.m.write(g,h,0,I,k,!1),0)}},Mt=null,Ut={},Ae=[],we=1,ge=null,Pe=!0,St=null,Te={},Fe=(g,h={})=>{if(!(g=Wn(g)))return{path:"",node:null};if(8<(h=Object.assign({gb:!0,Qa:0},h)).Qa)throw new St(32);g=g.split("/").filter(W=>!!W);for(var k=Mt,I="/",D=0;D<g.length;D++){var B=D===g.length-1;if(B&&h.parent)break;if(k=Vo(k,g[D]),I=Me(I+"/"+g[D]),k.wa&&(!B||B&&h.gb)&&(k=k.wa.root),!B||h.fb){for(B=0;(61440&k.mode)==40960;)if(k=Do(I),I=Wn(Jn(I),k),k=Fe(I,{Qa:h.Qa+1}).node,40<B++)throw new St(32)}}return{path:I,node:k}},Qn=g=>{for(var h;;){if(g===g.parent)return g=g.U.mb,h?g[g.length-1]!=="/"?`${g}/${h}`:g+h:g;h=h?`${g.name}/${h}`:g.name,g=g.parent}},Eo=(g,h)=>{for(var k=0,I=0;I<h.length;I++)k=(k<<5)-k+h.charCodeAt(I)|0;return(g+k>>>0)%ge.length},Vo=(g,h)=>{var k;if(k=(k=Go(g,"x"))?k:g.l.ka?0:2)throw new St(k,g);for(k=ge[Eo(g.id,h)];k;k=k.lc){var I=k.name;if(k.parent.id===g.id&&I===h)return k}return g.l.ka(g,h)},Ar=(g,h,k,I)=>(g=new $a(g,h,k,I),h=Eo(g.parent.id,g.name),g.lc=ge[h],ge[h]=g),Mr=g=>{var h=["r","w","rw"][3&g];return 512&g&&(h+="w"),h},Go=(g,h)=>Pe?0:!h.includes("r")||292&g.mode?h.includes("w")&&!(146&g.mode)||h.includes("x")&&!(73&g.mode)?2:0:2,pt=(g,h)=>{try{return Vo(g,h),20}catch{}return Go(g,"wx")},$e=g=>{if(!(g=Ae[g]))throw new St(8);return g},Ft=(g,h=-1)=>(je||((je=function(){this.h={}}).prototype={},Object.defineProperties(je.prototype,{object:{get(){return this.node},set(k){this.node=k}},flags:{get(){return this.h.flags},set(k){this.h.flags=k}},position:{get(){return this.h.position},set(k){this.h.position=k}}})),g=Object.assign(new je,g),h==-1&&(h=(()=>{for(var k=0;4096>=k;k++)if(!Ae[k])return k;throw new St(33)})()),g.X=h,Ae[h]=g),Ke={open:g=>{g.m=Ut[g.node.za].m,g.m.open&&g.m.open(g)},ba:()=>{throw new St(70)}},to=(g,h)=>{Ut[g]={m:h}},Io=(g,h)=>{var k=h==="/",I=!h;if(k&&Mt)throw new St(10);if(!k&&!I){var D=Fe(h,{gb:!1});if(h=D.path,(D=D.node).wa)throw new St(10);if((61440&D.mode)!=16384)throw new St(54)}h={type:g,Qc:{},mb:h,kc:[]},(g=g.U(h)).U=h,h.root=g,k?Mt=g:D&&(D.wa=h,D.U&&D.U.kc.push(h))},Fn=(g,h,k)=>{var I=Fe(g,{parent:!0}).node;if(!(g=gn(g))||g==="."||g==="..")throw new St(28);var D=pt(I,g);if(D)throw new St(D);if(!I.l.va)throw new St(63);return I.l.va(I,g,h,k)},Lo=(g,h,k)=>{k===void 0&&(k=h,h=438),Fn(g,8192|h,k)},Ro=(g,h)=>{if(!Wn(g))throw new St(44);var k=Fe(h,{parent:!0}).node;if(!k)throw new St(44);h=gn(h);var I=pt(k,h);if(I)throw new St(I);if(!k.l.Ea)throw new St(63);k.l.Ea(k,h,g)},Do=g=>{if(!(g=Fe(g).node))throw new St(44);if(!g.l.ma)throw new St(28);return Wn(Qn(g.parent),g.l.ma(g))},Ko=(g,h,k)=>{if(g==="")throw new St(44);if(typeof h=="string"){var I={r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090}[h];if(I===void 0)throw Error(`Unknown file open mode: ${h}`);h=I}if(k=64&h?4095&(k===void 0?438:k)|32768:0,typeof g=="object")var D=g;else{g=Me(g);try{D=Fe(g,{fb:!(131072&h)}).node}catch{}}if(I=!1,64&h)if(D){if(128&h)throw new St(20)}else D=Fn(g,k,0),I=!0;if(!D)throw new St(44);if((61440&D.mode)==8192&&(h&=-513),65536&h&&(61440&D.mode)!=16384)throw new St(54);if(!I&&(k=D?(61440&D.mode)==40960?32:(61440&D.mode)==16384&&(Mr(h)!=="r"||512&h)?31:Go(D,Mr(h)):44))throw new St(k);if(512&h&&!I){if(!(k=typeof(k=D)=="string"?Fe(k,{fb:!0}).node:k).l.P)throw new St(63);if((61440&k.mode)==16384)throw new St(31);if((61440&k.mode)!=32768)throw new St(28);if(I=Go(k,"w"))throw new St(I);k.l.P(k,{size:0,timestamp:Date.now()})}return h&=-131713,(D=Ft({node:D,path:Qn(D),flags:h,seekable:!0,position:0,m:D.m,zc:[],error:!1})).m.open&&D.m.open(D),!p.logReadFiles||1&h||(cn||(cn={}),g in cn||(cn[g]=1)),D},On=(g,h,k)=>{if(g.X===null)throw new St(8);if(!g.seekable||!g.m.ba)throw new St(70);if(k!=0&&k!=1&&k!=2)throw new St(28);g.position=g.m.ba(g,h,k),g.zc=[]},Yo=()=>{St||((St=function(g,h){this.name="ErrnoError",this.node=h,this.pc=function(k){this.aa=k},this.pc(g),this.message="FS error"}).prototype=Error(),St.prototype.constructor=St,[44].forEach(g=>{Te[g]=new St(g),Te[g].stack="<generic error, no stack>"}))},eo=(g,h,k)=>{g=Me("/dev/"+g);var I=function(B,W){var Q=0;return B&&(Q|=365),W&&(Q|=146),Q}(!!h,!!k);xe||(xe=64);var D=xe++<<8;to(D,{open:B=>{B.seekable=!1},close:()=>{k&&k.buffer&&k.buffer.length&&k(10)},read:(B,W,Q,mt)=>{for(var ot=0,Pt=0;Pt<mt;Pt++){try{var Nt=h()}catch{throw new St(29)}if(Nt===void 0&&ot===0)throw new St(6);if(Nt==null)break;ot++,W[Q+Pt]=Nt}return ot&&(B.node.timestamp=Date.now()),ot},write:(B,W,Q,mt)=>{for(var ot=0;ot<mt;ot++)try{k(W[Q+ot])}catch{throw new St(29)}return mt&&(B.node.timestamp=Date.now()),ot}}),Lo(g,I,D)},xo={},Zr=void 0;function bo(){return Ct[(Zr+=4)-4>>2]}function Gs(g){if(g===void 0)return"_unknown";var h=(g=g.replace(/[^a-zA-Z0-9_]/g,"$")).charCodeAt(0);return 48<=h&&57>=h?`_${g}`:g}function Jr(g,h){return g=Gs(g),{[g]:function(){return h.apply(this,arguments)}}[g]}function Ks(){this.M=[void 0],this.hb=[]}var no=new Ks,ar=void 0;function pe(g){throw new ar(g)}var io=g=>(g||pe("Cannot use deleted val. handle = "+g),no.get(g).value),ao=g=>{switch(g){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:return no.pa({tb:1,value:g})}};function Ys(g){var h=Error,k=Jr(g,function(I){this.name=g,this.message=I,(I=Error(I).stack)!==void 0&&(this.stack=this.toString()+`
`+I.replace(/^Error(:[^\n]*)?\n/,""))});return k.prototype=Object.create(h.prototype),k.prototype.constructor=k,k.prototype.toString=function(){return this.message===void 0?this.name:`${this.name}: ${this.message}`},k}var Xs=void 0,Zs=void 0;function nn(g){for(var h="";ct[g];)h+=Zs[ct[g++]];return h}var kr=[];function Wi(){for(;kr.length;){var g=kr.pop();g.g.fa=!1,g.delete()}}var Sr=void 0,_o={};function Vi(g,h){for(h===void 0&&pe("ptr should not be undefined");g.A;)h=g.na(h),g=g.A;return h}var Xo={};function Js(g){var h=nn(g=wa(g));return Mo(g),h}function Tr(g,h){var k=Xo[g];return k===void 0&&pe(h+" has unknown type "+Js(g)),k}function Qr(){}var Gi=!1;function Qs(g){--g.count.value,g.count.value===0&&(g.G?g.L.W(g.G):g.u.i.W(g.o))}function ta(g,h,k){return h===k?g:k.A===void 0||(g=ta(g,h,k.A))===null?null:k.Pb(g)}var ea={},na=void 0;function ti(g){throw new na(g)}function ei(g,h){return h.u&&h.o||ti("makeClassHandle requires ptr and ptrType"),!!h.L!=!!h.G&&ti("Both smartPtrType and smartPtr must be specified"),h.count={value:1},Er(Object.create(g,{g:{value:h}}))}function Er(g){return typeof FinalizationRegistry>"u"?(Er=h=>h,g):(Gi=new FinalizationRegistry(h=>{Qs(h.g)}),Qr=h=>{Gi.unregister(h)},(Er=h=>{var k=h.g;return k.G&&Gi.register(h,{g:k},h),h})(g))}var ni={};function Ir(g){for(;g.length;){var h=g.pop();g.pop()(h)}}function Lr(g){return this.fromWireType(Ct[g>>2])}var cr={},oi={};function Gn(g,h,k){function I(Q){(Q=k(Q)).length!==g.length&&ti("Mismatched type converter count");for(var mt=0;mt<g.length;++mt)co(g[mt],Q[mt])}g.forEach(function(Q){oi[Q]=h});var D=Array(h.length),B=[],W=0;h.forEach((Q,mt)=>{Xo.hasOwnProperty(Q)?D[mt]=Xo[Q]:(B.push(Q),cr.hasOwnProperty(Q)||(cr[Q]=[]),cr[Q].push(()=>{D[mt]=Xo[Q],++W===B.length&&I(D)}))}),B.length===0&&I(D)}function ri(g){switch(g){case 1:return 0;case 2:return 1;case 4:return 2;case 8:return 3;default:throw new TypeError(`Unknown type size: ${g}`)}}function co(g,h,k={}){if(!("argPackAdvance"in h))throw new TypeError("registerType registeredInstance requires argPackAdvance");(function(I,D,B={}){var W=D.name;if(I||pe(`type "${W}" must have a positive integer typeid pointer`),Xo.hasOwnProperty(I)){if(B.$b)return;pe(`Cannot register type '${W}' twice`)}Xo[I]=D,delete oi[I],cr.hasOwnProperty(I)&&(D=cr[I],delete cr[I],D.forEach(Q=>Q()))})(g,h,k)}function Ki(g){pe(g.g.u.i.name+" instance already deleted")}function Po(){}function Yi(g,h,k){if(g[h].B===void 0){var I=g[h];g[h]=function(){return g[h].B.hasOwnProperty(arguments.length)||pe(`Function '${k}' called with an invalid number of arguments (${arguments.length}) - expects one of (${g[h].B})!`),g[h].B[arguments.length].apply(this,arguments)},g[h].B=[],g[h].B[I.ea]=I}}function Xi(g,h,k){p.hasOwnProperty(g)?((k===void 0||p[g].B!==void 0&&p[g].B[k]!==void 0)&&pe(`Cannot register public name '${g}' twice`),Yi(p,g,g),p.hasOwnProperty(k)&&pe(`Cannot register multiple overloads of a function with the same number of arguments (${k})!`),p[g].B[k]=h):(p[g]=h,k!==void 0&&(p[g].Pc=k))}function n1(g,h,k,I,D,B,W,Q){this.name=g,this.constructor=h,this.N=k,this.W=I,this.A=D,this.Ub=B,this.na=W,this.Pb=Q,this.qb=[]}function ii(g,h,k){for(;h!==k;)h.na||pe(`Expected null or instance of ${k.name}, got an instance of ${h.name}`),g=h.na(g),h=h.A;return g}function o1(g,h){return h===null?(this.Na&&pe(`null is not a valid ${this.name}`),0):(h.g||pe(`Cannot pass "${Ji(h)}" as a ${this.name}`),h.g.o||pe(`Cannot pass deleted object as a pointer of type ${this.name}`),ii(h.g.o,h.g.u.i,this.i))}function r1(g,h){if(h===null){if(this.Na&&pe(`null is not a valid ${this.name}`),this.ua){var k=this.Pa();return g!==null&&g.push(this.W,k),k}return 0}if(h.g||pe(`Cannot pass "${Ji(h)}" as a ${this.name}`),h.g.o||pe(`Cannot pass deleted object as a pointer of type ${this.name}`),!this.ta&&h.g.u.ta&&pe(`Cannot convert argument of type ${h.g.L?h.g.L.name:h.g.u.name} to parameter type ${this.name}`),k=ii(h.g.o,h.g.u.i,this.i),this.ua)switch(h.g.G===void 0&&pe("Passing raw pointer to smart pointer is illegal"),this.tc){case 0:h.g.L===this?k=h.g.G:pe(`Cannot convert argument of type ${h.g.L?h.g.L.name:h.g.u.name} to parameter type ${this.name}`);break;case 1:k=h.g.G;break;case 2:if(h.g.L===this)k=h.g.G;else{var I=h.clone();k=this.oc(k,ao(function(){I.delete()})),g!==null&&g.push(this.W,k)}break;default:pe("Unsupporting sharing policy")}return k}function i1(g,h){return h===null?(this.Na&&pe(`null is not a valid ${this.name}`),0):(h.g||pe(`Cannot pass "${Ji(h)}" as a ${this.name}`),h.g.o||pe(`Cannot pass deleted object as a pointer of type ${this.name}`),h.g.u.ta&&pe(`Cannot convert argument of type ${h.g.u.name} to parameter type ${this.name}`),ii(h.g.o,h.g.u.i,this.i))}function Co(g,h,k,I){this.name=g,this.i=h,this.Na=k,this.ta=I,this.ua=!1,this.W=this.oc=this.Pa=this.rb=this.tc=this.nc=void 0,h.A!==void 0?this.toWireType=r1:(this.toWireType=I?o1:i1,this.K=null)}function oa(g,h,k){p.hasOwnProperty(g)||ti("Replacing nonexistant public symbol"),p[g].B!==void 0&&k!==void 0?p[g].B[k]=h:(p[g]=h,p[g].ea=k)}var si=[],ra=g=>{var h=si[g];return h||(g>=si.length&&(si.length=g+1),si[g]=h=S.get(g)),h};function In(g,h){var k=(g=nn(g)).includes("j")?((I,D)=>{var B=[];return function(){if(B.length=0,Object.assign(B,arguments),I.includes("j")){var W=p["dynCall_"+I];W=B&&B.length?W.apply(null,[D].concat(B)):W.call(null,D)}else W=ra(D).apply(null,B);return W}})(g,h):ra(h);return typeof k!="function"&&pe(`unknown function pointer with signature ${g}: ${h}`),k}var ia=void 0;function Ao(g,h){var k=[],I={};throw h.forEach(function D(B){I[B]||Xo[B]||(oi[B]?oi[B].forEach(D):(k.push(B),I[B]=!0))}),new ia(`${g}: `+k.map(Js).join([", "]))}function ai(g,h,k,I,D){var B=h.length;2>B&&pe("argTypes array size mismatch! Must at least get return value and 'this' types!");var W=h[1]!==null&&k!==null,Q=!1;for(k=1;k<h.length;++k)if(h[k]!==null&&h[k].K===void 0){Q=!0;break}var mt=h[0].name!=="void",ot=B-2,Pt=Array(ot),Nt=[],Bt=[];return function(){if(arguments.length!==ot&&pe(`function ${g} called with ${arguments.length} arguments, expected ${ot} args!`),Bt.length=0,Nt.length=W?2:1,Nt[0]=D,W){var qt=h[1].toWireType(Bt,this);Nt[1]=qt}for(var Ot=0;Ot<ot;++Ot)Pt[Ot]=h[Ot+2].toWireType(Bt,arguments[Ot]),Nt.push(Pt[Ot]);if(Ot=I.apply(null,Nt),Q)Ir(Bt);else for(var Lt=W?1:2;Lt<h.length;Lt++){var ke=Lt===1?qt:Pt[Lt-2];h[Lt].K!==null&&h[Lt].K(ke)}return qt=mt?h[0].fromWireType(Ot):void 0}}function ci(g,h){for(var k=[],I=0;I<g;I++)k.push(jt[h+4*I>>2]);return k}function sa(g,h,k){return g instanceof Object||pe(`${k} with invalid "this": ${g}`),g instanceof h.i.constructor||pe(`${k} incompatible with "this" of type ${g.constructor.name}`),g.g.o||pe(`cannot call emscripten binding method ${k} on deleted object`),ii(g.g.o,g.g.u.i,h.i)}function Zi(g){g>=no.h&&--no.get(g).tb==0&&no.Zb(g)}function s1(g,h,k){switch(h){case 0:return function(I){return this.fromWireType((k?ht:ct)[I])};case 1:return function(I){return this.fromWireType((k?vt:Gt)[I>>1])};case 2:return function(I){return this.fromWireType((k?Ct:jt)[I>>2])};default:throw new TypeError("Unknown integer type: "+g)}}function Ji(g){if(g===null)return"null";var h=typeof g;return h==="object"||h==="array"||h==="function"?g.toString():""+g}function a1(g,h){switch(h){case 2:return function(k){return this.fromWireType(Ve[k>>2])};case 3:return function(k){return this.fromWireType(ye[k>>3])};default:throw new TypeError("Unknown float type: "+g)}}function c1(g,h,k){switch(h){case 0:return k?function(I){return ht[I]}:function(I){return ct[I]};case 1:return k?function(I){return vt[I>>1]}:function(I){return Gt[I>>1]};case 2:return k?function(I){return Ct[I>>2]}:function(I){return jt[I>>2]};default:throw new TypeError("Unknown integer type: "+g)}}var aa=typeof TextDecoder<"u"?new TextDecoder("utf-16le"):void 0,l1=(g,h)=>{for(var k=g>>1,I=k+h/2;!(k>=I)&&Gt[k];)++k;if(32<(k<<=1)-g&&aa)return aa.decode(ct.subarray(g,k));for(k="",I=0;!(I>=h/2);++I){var D=vt[g+2*I>>1];if(D==0)break;k+=String.fromCharCode(D)}return k},u1=(g,h,k)=>{if(k===void 0&&(k=2147483647),2>k)return 0;var I=h;k=(k-=2)<2*g.length?k/2:g.length;for(var D=0;D<k;++D)vt[h>>1]=g.charCodeAt(D),h+=2;return vt[h>>1]=0,h-I},d1=g=>2*g.length,$1=(g,h)=>{for(var k=0,I="";!(k>=h/4);){var D=Ct[g+4*k>>2];if(D==0)break;++k,65536<=D?(D-=65536,I+=String.fromCharCode(55296|D>>10,56320|1023&D)):I+=String.fromCharCode(D)}return I},m1=(g,h,k)=>{if(k===void 0&&(k=2147483647),4>k)return 0;var I=h;k=I+k-4;for(var D=0;D<g.length;++D){var B=g.charCodeAt(D);if(55296<=B&&57343>=B&&(B=65536+((1023&B)<<10)|1023&g.charCodeAt(++D)),Ct[h>>2]=B,(h+=4)+4>k)break}return Ct[h>>2]=0,h-I},f1=g=>{for(var h=0,k=0;k<g.length;++k){var I=g.charCodeAt(k);55296<=I&&57343>=I&&++k,h+=4}return h},p1={};function li(g){var h=p1[g];return h===void 0?nn(g):h}var Qi,ui=[],ca=[],ts=[],es={},la=()=>{if(!Qi){var g,h={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:et||"./this.program"};for(g in es)es[g]===void 0?delete h[g]:h[g]=es[g];var k=[];for(g in h)k.push(`${g}=${h[g]}`);Qi=k}return Qi},di=g=>g%4==0&&(g%100!=0||g%400==0),ua=[31,29,31,30,31,30,31,31,30,31,30,31],da=[31,28,31,30,31,30,31,31,30,31,30,31];function $a(g,h,k,I){g||(g=this),this.parent=g,this.U=g.U,this.wa=null,this.id=we++,this.name=h,this.mode=k,this.l={},this.m={},this.za=I}Object.defineProperties($a.prototype,{read:{get:function(){return!(365&~this.mode)},set:function(g){g?this.mode|=365:this.mode&=-366}},write:{get:function(){return!(146&~this.mode)},set:function(g){g?this.mode|=146:this.mode&=-147}}}),Yo(),ge=Array(4096),Io(Vt,"/"),Fn("/tmp",16895,0),Fn("/home",16895,0),Fn("/home/web_user",16895,0),(()=>{Fn("/dev",16895,0),to(259,{read:()=>0,write:(I,D,B,W)=>W}),Lo("/dev/null",259),Pn(1280,Nn),Pn(1536,Vn),Lo("/dev/tty",1280),Lo("/dev/tty1",1536);var g=new Uint8Array(1024),h=0,k=()=>(h===0&&(h=en(g).byteLength),g[--h]);eo("random",k),eo("urandom",k),Fn("/dev/shm",16895,0),Fn("/dev/shm/tmp",16895,0)})(),(()=>{Fn("/proc",16895,0);var g=Fn("/proc/self",16895,0);Fn("/proc/self/fd",16895,0),Io({U:()=>{var h=Ar(g,"fd",16895,73);return h.l={ka:(k,I)=>{var D=$e(+I);return(k={parent:null,U:{mb:"fake"},l:{ma:()=>D.path}}).parent=k}},h}},"/proc/self/fd")})(),Object.assign(Ks.prototype,{get(g){return this.M[g]},has(g){return this.M[g]!==void 0},pa(g){var h=this.hb.pop()||this.M.length;return this.M[h]=g,h},Zb(g){this.M[g]=void 0,this.hb.push(g)}}),ar=p.BindingError=class extends Error{constructor(g){super(g),this.name="BindingError"}},no.M.push({value:void 0},{value:null},{value:!0},{value:!1}),no.h=no.M.length,p.count_emval_handles=function(){for(var g=0,h=no.h;h<no.M.length;++h)no.M[h]!==void 0&&++g;return g},Xs=p.PureVirtualError=Ys("PureVirtualError");for(var ma=Array(256),$i=0;256>$i;++$i)ma[$i]=String.fromCharCode($i);Zs=ma,p.getInheritedInstanceCount=function(){return Object.keys(_o).length},p.getLiveInheritedInstances=function(){var g,h=[];for(g in _o)_o.hasOwnProperty(g)&&h.push(_o[g]);return h},p.flushPendingDeletes=Wi,p.setDelayFunction=function(g){Sr=g,kr.length&&Sr&&Sr(Wi)},na=p.InternalError=class extends Error{constructor(g){super(g),this.name="InternalError"}},Po.prototype.isAliasOf=function(g){if(!(this instanceof Po&&g instanceof Po))return!1;var h=this.g.u.i,k=this.g.o,I=g.g.u.i;for(g=g.g.o;h.A;)k=h.na(k),h=h.A;for(;I.A;)g=I.na(g),I=I.A;return h===I&&k===g},Po.prototype.clone=function(){if(this.g.o||Ki(this),this.g.ia)return this.g.count.value+=1,this;var g=Er,h=Object,k=h.create,I=Object.getPrototypeOf(this),D=this.g;return(g=g(k.call(h,I,{g:{value:{count:D.count,fa:D.fa,ia:D.ia,o:D.o,u:D.u,G:D.G,L:D.L}}}))).g.count.value+=1,g.g.fa=!1,g},Po.prototype.delete=function(){this.g.o||Ki(this),this.g.fa&&!this.g.ia&&pe("Object already scheduled for deletion"),Qr(this),Qs(this.g),this.g.ia||(this.g.G=void 0,this.g.o=void 0)},Po.prototype.isDeleted=function(){return!this.g.o},Po.prototype.deleteLater=function(){return this.g.o||Ki(this),this.g.fa&&!this.g.ia&&pe("Object already scheduled for deletion"),kr.push(this),kr.length===1&&Sr&&Sr(Wi),this.g.fa=!0,this},Co.prototype.Vb=function(g){return this.rb&&(g=this.rb(g)),g},Co.prototype.ab=function(g){this.W&&this.W(g)},Co.prototype.argPackAdvance=8,Co.prototype.readValueFromPointer=Lr,Co.prototype.deleteObject=function(g){g!==null&&g.delete()},Co.prototype.fromWireType=function(g){function h(){return this.ua?ei(this.i.N,{u:this.nc,o:k,L:this,G:g}):ei(this.i.N,{u:this,o:g})}var k=this.Vb(g);if(!k)return this.ab(g),null;var I=function(B,W){return W=Vi(B,W),_o[W]}(this.i,k);if(I!==void 0)return I.g.count.value===0?(I.g.o=k,I.g.G=g,I.clone()):(I=I.clone(),this.ab(g),I);if(I=this.i.Ub(k),!(I=ea[I]))return h.call(this);I=this.ta?I.Kb:I.pointerType;var D=ta(k,this.i,I.i);return D===null?h.call(this):this.ua?ei(I.i.N,{u:I,o:D,L:this,G:g}):ei(I.i.N,{u:I,o:D})},ia=p.UnboundTypeError=Ys("UnboundTypeError");var fa={__syscall_fcntl64:function(g,h,k){Zr=k;try{var I=$e(g);switch(h){case 0:var D=bo();return 0>D?-28:Ft(I,D).X;case 1:case 2:case 6:case 7:return 0;case 3:return I.flags;case 4:return D=bo(),I.flags|=D,0;case 5:return D=bo(),vt[D+0>>1]=2,0;case 16:case 8:default:return-28;case 9:return Ct[va()>>2]=28,-1}}catch(B){if(xo===void 0||B.name!=="ErrnoError")throw B;return-B.aa}},__syscall_ioctl:function(g,h,k){Zr=k;try{var I=$e(g);switch(h){case 21509:case 21510:case 21511:case 21512:case 21524:case 21515:return I.s?0:-59;case 21505:if(!I.s)return-59;if(I.s.V.bc){h=[3,28,127,21,4,0,1,0,17,19,26,0,18,15,23,22,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];var D=bo();Ct[D>>2]=25856,Ct[D+4>>2]=5,Ct[D+8>>2]=191,Ct[D+12>>2]=35387;for(var B=0;32>B;B++)ht[D+B+17|0]=h[B]||0}return 0;case 21506:case 21507:case 21508:if(!I.s)return-59;if(I.s.V.cc)for(D=bo(),h=[],B=0;32>B;B++)h.push(ht[D+B+17|0]);return 0;case 21519:return I.s?(D=bo(),Ct[D>>2]=0):-59;case 21520:return I.s?-28:-59;case 21531:if(D=bo(),!I.m.ac)throw new St(59);return I.m.ac(I,h,D);case 21523:return I.s?(I.s.V.dc&&(B=[24,80],D=bo(),vt[D>>1]=B[0],vt[D+2>>1]=B[1]),0):-59;default:return-28}}catch(W){if(xo===void 0||W.name!=="ErrnoError")throw W;return-W.aa}},__syscall_openat:function(g,h,k,I){Zr=I;try{var D=h=h?an(ct,h):"";if(D.charAt(0)==="/")h=D;else{var B=g===-100?"/":$e(g).path;if(D.length==0)throw new St(44);h=Me(B+"/"+D)}var W=I?bo():0;return Ko(h,k,W).X}catch(Q){if(xo===void 0||Q.name!=="ErrnoError")throw Q;return-Q.aa}},_embind_create_inheriting_constructor:function(g,h,k){g=nn(g),h=Tr(h,"wrapper"),k=io(k);var I=[].slice,D=h.i,B=D.N,W=D.A.N,Q=D.A.constructor;for(var mt in g=Jr(g,function(){D.A.qb.forEach((function(ot){if(this[ot]===W[ot])throw new Xs(`Pure virtual function ${ot} must be implemented in JavaScript`)}).bind(this)),Object.defineProperty(this,"__parent",{value:B}),this.__construct.apply(this,I.call(arguments))}),B.__construct=function(){this===B&&pe("Pass correct 'this' to __construct");var ot=Q.implement.apply(void 0,[this].concat(I.call(arguments)));Qr(ot);var Pt=ot.g;ot.notifyOnDestruction(),Pt.ia=!0,Object.defineProperties(this,{g:{value:Pt}}),Er(this),ot=Pt.o,ot=Vi(D,ot),_o.hasOwnProperty(ot)?pe(`Tried to register registered instance: ${ot}`):_o[ot]=this},B.__destruct=function(){this===B&&pe("Pass correct 'this' to __destruct"),Qr(this);var ot=this.g.o;ot=Vi(D,ot),_o.hasOwnProperty(ot)?delete _o[ot]:pe(`Tried to unregister unregistered instance: ${ot}`)},g.prototype=Object.create(B),k)g.prototype[mt]=k[mt];return ao(g)},_embind_finalize_value_object:function(g){var h=ni[g];delete ni[g];var k=h.Pa,I=h.W,D=h.eb;Gn([g],D.map(B=>B.Yb).concat(D.map(B=>B.rc)),B=>{var W={};return D.forEach((Q,mt)=>{var ot=B[mt],Pt=Q.Wb,Nt=Q.Xb,Bt=B[mt+D.length],qt=Q.qc,Ot=Q.sc;W[Q.Sb]={read:Lt=>ot.fromWireType(Pt(Nt,Lt)),write:(Lt,ke)=>{var at=[];qt(Ot,Lt,Bt.toWireType(at,ke)),Ir(at)}}}),[{name:h.name,fromWireType:function(Q){var mt,ot={};for(mt in W)ot[mt]=W[mt].read(Q);return I(Q),ot},toWireType:function(Q,mt){for(var ot in W)if(!(ot in mt))throw new TypeError(`Missing field: "${ot}"`);var Pt=k();for(ot in W)W[ot].write(Pt,mt[ot]);return Q!==null&&Q.push(I,Pt),Pt},argPackAdvance:8,readValueFromPointer:Lr,K:I}]})},_embind_register_bigint:function(){},_embind_register_bool:function(g,h,k,I,D){var B=ri(k);co(g,{name:h=nn(h),fromWireType:function(W){return!!W},toWireType:function(W,Q){return Q?I:D},argPackAdvance:8,readValueFromPointer:function(W){if(k===1)var Q=ht;else if(k===2)Q=vt;else{if(k!==4)throw new TypeError("Unknown boolean type size: "+h);Q=Ct}return this.fromWireType(Q[W>>B])},K:null})},_embind_register_class:function(g,h,k,I,D,B,W,Q,mt,ot,Pt,Nt,Bt){Pt=nn(Pt),B=In(D,B),Q&&(Q=In(W,Q)),ot&&(ot=In(mt,ot)),Bt=In(Nt,Bt);var qt=Gs(Pt);Xi(qt,function(){Ao(`Cannot construct ${Pt} due to unbound types`,[I])}),Gn([g,h,k],I?[I]:[],function(Ot){if(Ot=Ot[0],I)var Lt=Ot.i,ke=Lt.N;else ke=Po.prototype;Ot=Jr(qt,function(){if(Object.getPrototypeOf(this)!==at)throw new ar("Use 'new' to construct "+Pt);if(yt.$===void 0)throw new ar(Pt+" has no accessible constructor");var Xe=yt.$[arguments.length];if(Xe===void 0)throw new ar(`Tried to invoke ctor of ${Pt} with invalid number of parameters (${arguments.length}) - expected (${Object.keys(yt.$).toString()}) parameters instead!`);return Xe.apply(this,arguments)});var at=Object.create(ke,{constructor:{value:Ot}});Ot.prototype=at;var yt=new n1(Pt,Ot,at,Bt,Lt,B,Q,ot);yt.A&&(yt.A.oa===void 0&&(yt.A.oa=[]),yt.A.oa.push(yt)),Lt=new Co(Pt,yt,!0,!1),ke=new Co(Pt+"*",yt,!1,!1);var ce=new Co(Pt+" const*",yt,!1,!0);return ea[g]={pointerType:ke,Kb:ce},oa(qt,Ot),[Lt,ke,ce]})},_embind_register_class_class_function:function(g,h,k,I,D,B,W){var Q=ci(k,I);h=nn(h),B=In(D,B),Gn([],[g],function(mt){function ot(){Ao(`Cannot call ${Pt} due to unbound types`,Q)}var Pt=`${(mt=mt[0]).name}.${h}`;h.startsWith("@@")&&(h=Symbol[h.substring(2)]);var Nt=mt.i.constructor;return Nt[h]===void 0?(ot.ea=k-1,Nt[h]=ot):(Yi(Nt,h,Pt),Nt[h].B[k-1]=ot),Gn([],Q,function(Bt){if(Bt=ai(Pt,[Bt[0],null].concat(Bt.slice(1)),null,B,W),Nt[h].B===void 0?(Bt.ea=k-1,Nt[h]=Bt):Nt[h].B[k-1]=Bt,mt.i.oa)for(const qt of mt.i.oa)qt.constructor.hasOwnProperty(h)||(qt.constructor[h]=Bt);return[]}),[]})},_embind_register_class_class_property:function(g,h,k,I,D,B,W,Q){h=nn(h),B=In(D,B),Gn([],[g],function(mt){var ot=`${(mt=mt[0]).name}.${h}`,Pt={get(){Ao(`Cannot access ${ot} due to unbound types`,[k])},enumerable:!0,configurable:!0};return Pt.set=Q?()=>{Ao(`Cannot access ${ot} due to unbound types`,[k])}:()=>{pe(`${ot} is a read-only property`)},Object.defineProperty(mt.i.constructor,h,Pt),Gn([],[k],function(Nt){Nt=Nt[0];var Bt={get:()=>Nt.fromWireType(B(I)),enumerable:!0};return Q&&(Q=In(W,Q),Bt.set=qt=>{var Ot=[];Q(I,Nt.toWireType(Ot,qt)),Ir(Ot)}),Object.defineProperty(mt.i.constructor,h,Bt),[]}),[]})},_embind_register_class_constructor:function(g,h,k,I,D,B){var W=ci(h,k);D=In(I,D),Gn([],[g],function(Q){var mt=`constructor ${(Q=Q[0]).name}`;if(Q.i.$===void 0&&(Q.i.$=[]),Q.i.$[h-1]!==void 0)throw new ar(`Cannot register multiple constructors with identical number of parameters (${h-1}) for class '${Q.name}'! Overload resolution is currently only performed using the parameter count, not actual type info!`);return Q.i.$[h-1]=()=>{Ao(`Cannot construct ${Q.name} due to unbound types`,W)},Gn([],W,function(ot){return ot.splice(1,0,null),Q.i.$[h-1]=ai(mt,ot,null,D,B),[]}),[]})},_embind_register_class_function:function(g,h,k,I,D,B,W,Q){var mt=ci(k,I);h=nn(h),B=In(D,B),Gn([],[g],function(ot){function Pt(){Ao(`Cannot call ${Nt} due to unbound types`,mt)}var Nt=`${(ot=ot[0]).name}.${h}`;h.startsWith("@@")&&(h=Symbol[h.substring(2)]),Q&&ot.i.qb.push(h);var Bt=ot.i.N,qt=Bt[h];return qt===void 0||qt.B===void 0&&qt.className!==ot.name&&qt.ea===k-2?(Pt.ea=k-2,Pt.className=ot.name,Bt[h]=Pt):(Yi(Bt,h,Nt),Bt[h].B[k-2]=Pt),Gn([],mt,function(Ot){return Ot=ai(Nt,Ot,ot,B,W),Bt[h].B===void 0?(Ot.ea=k-2,Bt[h]=Ot):Bt[h].B[k-2]=Ot,[]}),[]})},_embind_register_class_property:function(g,h,k,I,D,B,W,Q,mt,ot){h=nn(h),D=In(I,D),Gn([],[g],function(Pt){var Nt=`${(Pt=Pt[0]).name}.${h}`,Bt={get(){Ao(`Cannot access ${Nt} due to unbound types`,[k,W])},enumerable:!0,configurable:!0};return Bt.set=mt?()=>{Ao(`Cannot access ${Nt} due to unbound types`,[k,W])}:()=>{pe(Nt+" is a read-only property")},Object.defineProperty(Pt.i.N,h,Bt),Gn([],mt?[k,W]:[k],function(qt){var Ot=qt[0],Lt={get(){var at=sa(this,Pt,Nt+" getter");return Ot.fromWireType(D(B,at))},enumerable:!0};if(mt){mt=In(Q,mt);var ke=qt[1];Lt.set=function(at){var yt=sa(this,Pt,Nt+" setter"),ce=[];mt(ot,yt,ke.toWireType(ce,at)),Ir(ce)}}return Object.defineProperty(Pt.i.N,h,Lt),[]}),[]})},_embind_register_emval:function(g,h){co(g,{name:h=nn(h),fromWireType:function(k){var I=io(k);return Zi(k),I},toWireType:function(k,I){return ao(I)},argPackAdvance:8,readValueFromPointer:Lr,K:null})},_embind_register_enum:function(g,h,k,I){function D(){}k=ri(k),h=nn(h),D.values={},co(g,{name:h,constructor:D,fromWireType:function(B){return this.constructor.values[B]},toWireType:function(B,W){return W.value},argPackAdvance:8,readValueFromPointer:s1(h,k,I),K:null}),Xi(h,D)},_embind_register_enum_value:function(g,h,k){var I=Tr(g,"enum");h=nn(h),g=I.constructor,I=Object.create(I.constructor.prototype,{value:{value:k},constructor:{value:Jr(`${I.name}_${h}`,function(){})}}),g.values[k]=I,g[h]=I},_embind_register_float:function(g,h,k){k=ri(k),co(g,{name:h=nn(h),fromWireType:function(I){return I},toWireType:function(I,D){return D},argPackAdvance:8,readValueFromPointer:a1(h,k),K:null})},_embind_register_function:function(g,h,k,I,D,B){var W=ci(h,k);g=nn(g),D=In(I,D),Xi(g,function(){Ao(`Cannot call ${g} due to unbound types`,W)},h-1),Gn([],W,function(Q){return oa(g,ai(g,[Q[0],null].concat(Q.slice(1)),null,D,B),h-1),[]})},_embind_register_integer:function(g,h,k,I,D){h=nn(h),D===-1&&(D=4294967295),D=ri(k);var B=Q=>Q;if(I===0){var W=32-8*k;B=Q=>Q<<W>>>W}k=h.includes("unsigned")?function(Q,mt){return mt>>>0}:function(Q,mt){return mt},co(g,{name:h,fromWireType:B,toWireType:k,argPackAdvance:8,readValueFromPointer:c1(h,D,I!==0),K:null})},_embind_register_memory_view:function(g,h,k){function I(B){B>>=2;var W=jt;return new D(W.buffer,W[B+1],W[B])}var D=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array][h];co(g,{name:k=nn(k),fromWireType:I,argPackAdvance:8,readValueFromPointer:I},{$b:!0})},_embind_register_std_string:function(g,h){var k=(h=nn(h))==="std::string";co(g,{name:h,fromWireType:function(I){var D=jt[I>>2],B=I+4;if(k)for(var W=B,Q=0;Q<=D;++Q){var mt=B+Q;if(Q==D||ct[mt]==0){if(W=W?an(ct,W,mt-W):"",ot===void 0)var ot=W;else ot+="\0",ot+=W;W=mt+1}}else{for(ot=Array(D),Q=0;Q<D;++Q)ot[Q]=String.fromCharCode(ct[B+Q]);ot=ot.join("")}return Mo(I),ot},toWireType:function(I,D){D instanceof ArrayBuffer&&(D=new Uint8Array(D));var B=typeof D=="string";B||D instanceof Uint8Array||D instanceof Uint8ClampedArray||D instanceof Int8Array||pe("Cannot pass non-string to std::string");var W=k&&B?Tn(D):D.length,Q=ns(4+W+1),mt=Q+4;if(jt[Q>>2]=W,k&&B)Kt(D,ct,mt,W+1);else if(B)for(B=0;B<W;++B){var ot=D.charCodeAt(B);255<ot&&(Mo(mt),pe("String has UTF-16 code units that do not fit in 8 bits")),ct[mt+B]=ot}else for(B=0;B<W;++B)ct[mt+B]=D[B];return I!==null&&I.push(Mo,Q),Q},argPackAdvance:8,readValueFromPointer:Lr,K:function(I){Mo(I)}})},_embind_register_std_wstring:function(g,h,k){if(k=nn(k),h===2)var I=l1,D=u1,B=d1,W=()=>Gt,Q=1;else h===4&&(I=$1,D=m1,B=f1,W=()=>jt,Q=2);co(g,{name:k,fromWireType:function(mt){for(var ot,Pt=jt[mt>>2],Nt=W(),Bt=mt+4,qt=0;qt<=Pt;++qt){var Ot=mt+4+qt*h;qt!=Pt&&Nt[Ot>>Q]!=0||(Bt=I(Bt,Ot-Bt),ot===void 0?ot=Bt:(ot+="\0",ot+=Bt),Bt=Ot+h)}return Mo(mt),ot},toWireType:function(mt,ot){typeof ot!="string"&&pe(`Cannot pass non-string to C++ string type ${k}`);var Pt=B(ot),Nt=ns(4+Pt+h);return jt[Nt>>2]=Pt>>Q,D(ot,Nt+4,Pt+h),mt!==null&&mt.push(Mo,Nt),Nt},argPackAdvance:8,readValueFromPointer:Lr,K:function(mt){Mo(mt)}})},_embind_register_value_object:function(g,h,k,I,D,B){ni[g]={name:nn(h),Pa:In(k,I),W:In(D,B),eb:[]}},_embind_register_value_object_field:function(g,h,k,I,D,B,W,Q,mt,ot){ni[g].eb.push({Sb:nn(h),Yb:k,Wb:In(I,D),Xb:B,rc:W,qc:In(Q,mt),sc:ot})},_embind_register_void:function(g,h){co(g,{fc:!0,name:h=nn(h),argPackAdvance:0,fromWireType:function(){},toWireType:function(){}})},_emscripten_get_now_is_monotonic:()=>!0,_emval_as:function(g,h,k){g=io(g),h=Tr(h,"emval::as");var I=[],D=ao(I);return jt[k>>2]=D,h.toWireType(I,g)},_emval_call_method:function(g,h,k,I,D){g=ui[g],h=io(h),k=li(k);var B=[];return jt[I>>2]=ao(B),g(h,k,B,D)},_emval_call_void_method:function(g,h,k,I){(g=ui[g])(h=io(h),k=li(k),null,I)},_emval_decref:Zi,_emval_get_method_caller:function(g,h){var k=function(W,Q){for(var mt=Array(W),ot=0;ot<W;++ot)mt[ot]=Tr(jt[Q+4*ot>>2],"parameter "+ot);return mt}(g,h),I=k[0];h=I.name+"_$"+k.slice(1).map(function(W){return W.name}).join("_")+"$";var D=ca[h];if(D!==void 0)return D;var B=Array(g-1);return D=function(W){var Q=ui.length;return ui.push(W),Q}((W,Q,mt,ot)=>{for(var Pt=0,Nt=0;Nt<g-1;++Nt)B[Nt]=k[Nt+1].readValueFromPointer(ot+Pt),Pt+=k[Nt+1].argPackAdvance;for(W=W[Q].apply(W,B),Nt=0;Nt<g-1;++Nt)k[Nt+1].Nb&&k[Nt+1].Nb(B[Nt]);if(!I.fc)return I.toWireType(mt,W)}),ca[h]=D},_emval_get_module_property:function(g){return g=li(g),ao(p[g])},_emval_get_property:function(g,h){return g=io(g),h=io(h),ao(g[h])},_emval_incref:function(g){4<g&&(no.get(g).tb+=1)},_emval_new_cstring:function(g){return ao(li(g))},_emval_new_object:function(){return ao({})},_emval_run_destructors:function(g){Ir(io(g)),Zi(g)},_emval_set_property:function(g,h,k){g=io(g),h=io(h),k=io(k),g[h]=k},_emval_take_value:function(g,h){return g=(g=Tr(g,"_emval_take_value")).readValueFromPointer(h),ao(g)},abort:()=>{de("")},emscripten_asm_const_int:(g,h,k)=>{var I;for(ts.length=0,k>>=2;I=ct[h++];)k+=I!=105&k,ts.push(I==105?Ct[k]:ye[k++>>1]),++k;return _n[g].apply(null,ts)},emscripten_date_now:function(){return Date.now()},emscripten_get_now:()=>performance.now(),emscripten_memcpy_big:(g,h,k)=>ct.copyWithin(g,h,h+k),emscripten_resize_heap:g=>{var h=ct.length;if(2147483648<(g>>>=0))return!1;for(var k=1;4>=k;k*=2){var I=h*(1+.2/k);I=Math.min(I,g+100663296);var D=Math;I=Math.max(g,I);t:{D=D.min.call(D,2147483648,I+(65536-I%65536)%65536)-it.buffer.byteLength+65535>>>16;try{it.grow(D),z();var B=1;break t}catch{}B=void 0}if(B)return!0}return!1},environ_get:(g,h)=>{var k=0;return la().forEach(function(I,D){var B=h+k;for(D=jt[g+4*D>>2]=B,B=0;B<I.length;++B)ht[0|D++]=I.charCodeAt(B);ht[0|D]=0,k+=I.length+1}),0},environ_sizes_get:(g,h)=>{var k=la();jt[g>>2]=k.length;var I=0;return k.forEach(function(D){I+=D.length+1}),jt[h>>2]=I,0},fd_close:function(g){try{var h=$e(g);if(h.X===null)throw new St(8);h.Ma&&(h.Ma=null);try{h.m.close&&h.m.close(h)}catch(k){throw k}finally{Ae[h.X]=null}return h.X=null,0}catch(k){if(xo===void 0||k.name!=="ErrnoError")throw k;return k.aa}},fd_read:function(g,h,k,I){try{t:{var D=$e(g);g=h;for(var B,W=h=0;W<k;W++){var Q=jt[g>>2],mt=jt[g+4>>2];g+=8;var ot=D,Pt=Q,Nt=mt,Bt=B,qt=ht;if(0>Nt||0>Bt)throw new St(28);if(ot.X===null)throw new St(8);if((2097155&ot.flags)==1)throw new St(8);if((61440&ot.node.mode)==16384)throw new St(31);if(!ot.m.read)throw new St(28);var Ot=Bt!==void 0;if(Ot){if(!ot.seekable)throw new St(70)}else Bt=ot.position;var Lt=ot.m.read(ot,qt,Pt,Nt,Bt);Ot||(ot.position+=Lt);var ke=Lt;if(0>ke){var at=-1;break t}if(h+=ke,ke<mt)break;B!==void 0&&(B+=ke)}at=h}return jt[I>>2]=at,0}catch(yt){if(xo===void 0||yt.name!=="ErrnoError")throw yt;return yt.aa}},fd_seek:function(g,h,k,I,D){h=k+2097152>>>0<4194305-!!h?(h>>>0)+4294967296*k:NaN;try{if(isNaN(h))return 61;var B=$e(g);return On(B,h,I),Ue=[B.position>>>0,(ne=B.position,1<=+Math.abs(ne)?0<ne?+Math.floor(ne/4294967296)>>>0:~~+Math.ceil((ne-+(~~ne>>>0))/4294967296)>>>0:0)],Ct[D>>2]=Ue[0],Ct[D+4>>2]=Ue[1],B.Ma&&h===0&&I===0&&(B.Ma=null),0}catch(W){if(xo===void 0||W.name!=="ErrnoError")throw W;return W.aa}},fd_write:function(g,h,k,I){try{t:{var D=$e(g);g=h;for(var B,W=h=0;W<k;W++){var Q=jt[g>>2],mt=jt[g+4>>2];g+=8;var ot=D,Pt=Q,Nt=mt,Bt=B,qt=ht;if(0>Nt||0>Bt)throw new St(28);if(ot.X===null)throw new St(8);if(!(2097155&ot.flags))throw new St(8);if((61440&ot.node.mode)==16384)throw new St(31);if(!ot.m.write)throw new St(28);ot.seekable&&1024&ot.flags&&On(ot,0,2);var Ot=Bt!==void 0;if(Ot){if(!ot.seekable)throw new St(70)}else Bt=ot.position;var Lt=ot.m.write(ot,qt,Pt,Nt,Bt,void 0);Ot||(ot.position+=Lt);var ke=Lt;if(0>ke){var at=-1;break t}h+=ke,B!==void 0&&(B+=ke)}at=h}return jt[I>>2]=at,0}catch(yt){if(xo===void 0||yt.name!=="ErrnoError")throw yt;return yt.aa}},strftime_l:(g,h,k,I)=>((D,B,W,Q)=>{function mt(at,yt,ce){for(at=typeof at=="number"?at.toString():at||"";at.length<yt;)at=ce[0]+at;return at}function ot(at,yt){return mt(at,yt,"0")}function Pt(at,yt){function ce(Kn){return 0>Kn?-1:0<Kn?1:0}var Xe;return(Xe=ce(at.getFullYear()-yt.getFullYear()))===0&&(Xe=ce(at.getMonth()-yt.getMonth()))===0&&(Xe=ce(at.getDate()-yt.getDate())),Xe}function Nt(at){switch(at.getDay()){case 0:return new Date(at.getFullYear()-1,11,29);case 1:return at;case 2:return new Date(at.getFullYear(),0,3);case 3:return new Date(at.getFullYear(),0,2);case 4:return new Date(at.getFullYear(),0,1);case 5:return new Date(at.getFullYear()-1,11,31);case 6:return new Date(at.getFullYear()-1,11,30)}}function Bt(at){var yt=at.ca;for(at=new Date(new Date(at.da+1900,0,1).getTime());0<yt;){var ce=at.getMonth(),Xe=(di(at.getFullYear())?ua:da)[ce];if(!(yt>Xe-at.getDate())){at.setDate(at.getDate()+yt);break}yt-=Xe-at.getDate()+1,at.setDate(1),11>ce?at.setMonth(ce+1):(at.setMonth(0),at.setFullYear(at.getFullYear()+1))}return ce=new Date(at.getFullYear()+1,0,4),yt=Nt(new Date(at.getFullYear(),0,4)),ce=Nt(ce),0>=Pt(yt,at)?0>=Pt(ce,at)?at.getFullYear()+1:at.getFullYear():at.getFullYear()-1}var qt=Ct[Q+40>>2];for(var Ot in Q={wc:Ct[Q>>2],vc:Ct[Q+4>>2],Fa:Ct[Q+8>>2],Sa:Ct[Q+12>>2],Ga:Ct[Q+16>>2],da:Ct[Q+20>>2],R:Ct[Q+24>>2],ca:Ct[Q+28>>2],Rc:Ct[Q+32>>2],uc:Ct[Q+36>>2],xc:qt&&qt?an(ct,qt):""},W=W?an(ct,W):"",qt={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"})W=W.replace(new RegExp(Ot,"g"),qt[Ot]);var Lt="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),ke="January February March April May June July August September October November December".split(" ");for(Ot in qt={"%a":at=>Lt[at.R].substring(0,3),"%A":at=>Lt[at.R],"%b":at=>ke[at.Ga].substring(0,3),"%B":at=>ke[at.Ga],"%C":at=>ot((at.da+1900)/100|0,2),"%d":at=>ot(at.Sa,2),"%e":at=>mt(at.Sa,2," "),"%g":at=>Bt(at).toString().substring(2),"%G":at=>Bt(at),"%H":at=>ot(at.Fa,2),"%I":at=>((at=at.Fa)==0?at=12:12<at&&(at-=12),ot(at,2)),"%j":at=>{for(var yt=0,ce=0;ce<=at.Ga-1;yt+=(di(at.da+1900)?ua:da)[ce++]);return ot(at.Sa+yt,3)},"%m":at=>ot(at.Ga+1,2),"%M":at=>ot(at.vc,2),"%n":()=>`
`,"%p":at=>0<=at.Fa&&12>at.Fa?"AM":"PM","%S":at=>ot(at.wc,2),"%t":()=>"	","%u":at=>at.R||7,"%U":at=>ot(Math.floor((at.ca+7-at.R)/7),2),"%V":at=>{var yt=Math.floor((at.ca+7-(at.R+6)%7)/7);if(2>=(at.R+371-at.ca-2)%7&&yt++,yt)yt==53&&((ce=(at.R+371-at.ca)%7)==4||ce==3&&di(at.da)||(yt=1));else{yt=52;var ce=(at.R+7-at.ca-1)%7;(ce==4||ce==5&&di(at.da%400-1))&&yt++}return ot(yt,2)},"%w":at=>at.R,"%W":at=>ot(Math.floor((at.ca+7-(at.R+6)%7)/7),2),"%y":at=>(at.da+1900).toString().substring(2),"%Y":at=>at.da+1900,"%z":at=>{var yt=0<=(at=at.uc);return at=Math.abs(at)/60,(yt?"+":"-")+("0000"+(at/60*100+at%60)).slice(-4)},"%Z":at=>at.xc,"%%":()=>"%"},W=W.replace(/%%/g,"\0\0"),qt)W.includes(Ot)&&(W=W.replace(new RegExp(Ot,"g"),qt[Ot](Q)));return(Ot=fn(W=W.replace(/\0\0/g,"%"),!1)).length>B?0:(ht.set(Ot,D),Ot.length-1)})(g,h,k,I)};(function(){function g(k){if(rt=k=k.exports,it=rt.memory,z(),S=rt.__indirect_function_table,tt.unshift(rt.__wasm_call_ctors),Rt--,p.monitorRunDependencies&&p.monitorRunDependencies(Rt),Rt==0&&ee){var I=ee;ee=null,I()}return k}var h={env:fa,wasi_snapshot_preview1:fa};if(Rt++,p.monitorRunDependencies&&p.monitorRunDependencies(Rt),p.instantiateWasm)try{return p.instantiateWasm(h,g)}catch(k){Z("Module.instantiateWasm callback failed with error: "+k),f(k)}(function(k,I){var D=_t;return X||typeof WebAssembly.instantiateStreaming!="function"||It(D)||D.startsWith("file://")||typeof fetch!="function"?Le(D,k,I):fetch(D,{credentials:"same-origin"}).then(B=>WebAssembly.instantiateStreaming(B,k).then(I,function(W){return Z("wasm streaming compile failed: "+W),Z("falling back to ArrayBuffer instantiation"),Le(D,k,I)}))})(h,function(k){g(k.instance)}).catch(f)})();var Mo=g=>(Mo=rt.free)(g),ns=g=>(ns=rt.malloc)(g),pa=p._ma_device__on_notification_unlocked=g=>(pa=p._ma_device__on_notification_unlocked=rt.ma_device__on_notification_unlocked)(g);p._ma_malloc_emscripten=(g,h)=>(p._ma_malloc_emscripten=rt.ma_malloc_emscripten)(g,h),p._ma_free_emscripten=(g,h)=>(p._ma_free_emscripten=rt.ma_free_emscripten)(g,h);var mi,ga=p._ma_device_process_pcm_frames_capture__webaudio=(g,h,k)=>(ga=p._ma_device_process_pcm_frames_capture__webaudio=rt.ma_device_process_pcm_frames_capture__webaudio)(g,h,k),ha=p._ma_device_process_pcm_frames_playback__webaudio=(g,h,k)=>(ha=p._ma_device_process_pcm_frames_playback__webaudio=rt.ma_device_process_pcm_frames_playback__webaudio)(g,h,k),va=()=>(va=rt.__errno_location)(),wa=g=>(wa=rt.__getTypeName)(g);function ya(){function g(){if(!mi&&(mi=!0,p.calledRun=!0,!Ge)){if(p.noFSInit||En||(En=!0,Yo(),p.stdin=p.stdin,p.stdout=p.stdout,p.stderr=p.stderr,p.stdin?eo("stdin",p.stdin):Ro("/dev/tty","/dev/stdin"),p.stdout?eo("stdout",null,p.stdout):Ro("/dev/tty","/dev/stdout"),p.stderr?eo("stderr",null,p.stderr):Ro("/dev/tty1","/dev/stderr"),Ko("/dev/stdin",0),Ko("/dev/stdout",1),Ko("/dev/stderr",1)),Pe=!1,Je(tt),$(p),p.onRuntimeInitialized&&p.onRuntimeInitialized(),p.postRun)for(typeof p.postRun=="function"&&(p.postRun=[p.postRun]);p.postRun.length;){var h=p.postRun.shift();st.unshift(h)}Je(st)}}if(!(0<Rt)){if(p.preRun)for(typeof p.preRun=="function"&&(p.preRun=[p.preRun]);p.preRun.length;)gt();Je(F),0<Rt||(p.setStatus?(p.setStatus("Running..."),setTimeout(function(){setTimeout(function(){p.setStatus("")},1),g()},1)):g())}}if(p.__embind_initialize_bindings=()=>(p.__embind_initialize_bindings=rt._embind_initialize_bindings)(),p.dynCall_iiji=(g,h,k,I,D)=>(p.dynCall_iiji=rt.dynCall_iiji)(g,h,k,I,D),p.dynCall_jiji=(g,h,k,I,D)=>(p.dynCall_jiji=rt.dynCall_jiji)(g,h,k,I,D),p.dynCall_iiiji=(g,h,k,I,D,B)=>(p.dynCall_iiiji=rt.dynCall_iiiji)(g,h,k,I,D,B),p.dynCall_iij=(g,h,k,I)=>(p.dynCall_iij=rt.dynCall_iij)(g,h,k,I),p.dynCall_jii=(g,h,k)=>(p.dynCall_jii=rt.dynCall_jii)(g,h,k),p.dynCall_viijii=(g,h,k,I,D,B,W)=>(p.dynCall_viijii=rt.dynCall_viijii)(g,h,k,I,D,B,W),p.dynCall_iiiiij=(g,h,k,I,D,B,W)=>(p.dynCall_iiiiij=rt.dynCall_iiiiij)(g,h,k,I,D,B,W),p.dynCall_iiiiijj=(g,h,k,I,D,B,W,Q,mt)=>(p.dynCall_iiiiijj=rt.dynCall_iiiiijj)(g,h,k,I,D,B,W,Q,mt),p.dynCall_iiiiiijj=(g,h,k,I,D,B,W,Q,mt,ot)=>(p.dynCall_iiiiiijj=rt.dynCall_iiiiiijj)(g,h,k,I,D,B,W,Q,mt,ot),ee=function g(){mi||ya(),mi||(ee=g)},p.preInit)for(typeof p.preInit=="function"&&(p.preInit=[p.preInit]);0<p.preInit.length;)p.preInit.pop()();return ya(),u.ready});const l=a},o=>{o.exports=JSON.parse(`{"name":"@rive-app/canvas","version":"2.26.4","description":"Rive's canvas based web api.","main":"rive.js","homepage":"https://rive.app","repository":{"type":"git","url":"https://github.com/rive-app/rive-wasm/tree/master/js"},"keywords":["rive","animation"],"author":"Rive","contributors":["Luigi Rosso <luigi@rive.app> (https://rive.app)","Maxwell Talbot <max@rive.app> (https://rive.app)","Arthur Vivian <arthur@rive.app> (https://rive.app)","Umberto Sonnino <umberto@rive.app> (https://rive.app)","Matthew Sullivan <matt.j.sullivan@gmail.com> (mailto:matt.j.sullivan@gmail.com)"],"license":"MIT","files":["rive.js","rive.js.map","rive.wasm","rive_fallback.wasm","rive.d.ts","rive_advanced.mjs.d.ts"],"typings":"rive.d.ts","dependencies":{},"browser":{"fs":false,"path":false}}`)},(o,r,s)=>{s.r(r),s.d(r,{Animation:()=>c.Animation});var c=s(4)},(o,r,s)=>{s.r(r),s.d(r,{Animation:()=>c});var c=function(){function a(l,u,$,f){this.animation=l,this.artboard=u,this.playing=f,this.loopCount=0,this.scrubTo=null,this.instance=new $.LinearAnimationInstance(l,u)}return Object.defineProperty(a.prototype,"name",{get:function(){return this.animation.name},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"time",{get:function(){return this.instance.time},set:function(l){this.instance.time=l},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"loopValue",{get:function(){return this.animation.loopValue},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"needsScrub",{get:function(){return this.scrubTo!==null},enumerable:!1,configurable:!0}),a.prototype.advance=function(l){this.scrubTo===null?this.instance.advance(l):(this.instance.time=0,this.instance.advance(this.scrubTo),this.scrubTo=null)},a.prototype.apply=function(l){this.instance.apply(l)},a.prototype.cleanup=function(){this.instance.delete()},a}()},(o,r,s)=>{s.r(r),s.d(r,{BLANK_URL:()=>a.BLANK_URL,registerTouchInteractions:()=>c.registerTouchInteractions,sanitizeUrl:()=>a.sanitizeUrl});var c=s(6),a=s(7)},(o,r,s)=>{s.r(r),s.d(r,{registerTouchInteractions:()=>c});var c=function(a){var l=a.canvas,u=a.artboard,$=a.stateMachines,f=$===void 0?[]:$,p=a.renderer,_=a.rive,C=a.fit,M=a.alignment,T=a.isTouchScrollEnabled,E=T!==void 0&&T,R=a.layoutScaleFactor,P=R===void 0?1:R;if(!(l&&f.length&&p&&_&&u&&typeof window<"u"))return null;var J=null,K=!1,et=(function(U){if(K&&U instanceof MouseEvent)U.type=="mouseup"&&(K=!1);else{K=E&&U.type==="touchend"&&J==="touchstart",J=U.type;var G=U.currentTarget.getBoundingClientRect(),nt=function(st,gt){var _t,Rt;return["touchstart","touchmove"].indexOf(st.type)>-1&&(!((_t=st.touches)===null||_t===void 0)&&_t.length)?(gt||st.preventDefault(),{clientX:st.touches[0].clientX,clientY:st.touches[0].clientY}):st.type==="touchend"&&(!((Rt=st.changedTouches)===null||Rt===void 0)&&Rt.length)?{clientX:st.changedTouches[0].clientX,clientY:st.changedTouches[0].clientY}:{clientX:st.clientX,clientY:st.clientY}}(U,E),X=nt.clientX,Y=nt.clientY;if(X||Y){var Z=X-G.left,it=Y-G.top,rt=_.computeAlignment(C,M,{minX:0,minY:0,maxX:G.width,maxY:G.height},u.bounds,P),ht=new _.Mat2D;rt.invert(ht);var ct=new _.Vec2D(Z,it),vt=_.mapXY(ht,ct),Gt=vt.x(),Ct=vt.y();switch(vt.delete(),ht.delete(),ct.delete(),rt.delete(),U.type){case"mouseout":for(var jt=0,Ve=f;jt<Ve.length;jt++)Ve[jt].pointerMove(Gt,Ct);break;case"touchmove":case"mouseover":case"mousemove":for(var ye=0,Ge=f;ye<Ge.length;ye++)Ge[ye].pointerMove(Gt,Ct);break;case"touchstart":case"mousedown":for(var z=0,S=f;z<S.length;z++)S[z].pointerDown(Gt,Ct);break;case"touchend":case"mouseup":for(var F=0,tt=f;F<tt.length;F++)tt[F].pointerUp(Gt,Ct)}}}}).bind(void 0);return l.addEventListener("mouseover",et),l.addEventListener("mouseout",et),l.addEventListener("mousemove",et),l.addEventListener("mousedown",et),l.addEventListener("mouseup",et),l.addEventListener("touchmove",et,{passive:E}),l.addEventListener("touchstart",et,{passive:E}),l.addEventListener("touchend",et),function(){l.removeEventListener("mouseover",et),l.removeEventListener("mouseout",et),l.removeEventListener("mousemove",et),l.removeEventListener("mousedown",et),l.removeEventListener("mouseup",et),l.removeEventListener("touchmove",et),l.removeEventListener("touchstart",et),l.removeEventListener("touchend",et)}}},(o,r,s)=>{s.r(r),s.d(r,{BLANK_URL:()=>p,sanitizeUrl:()=>_});var c=/^([^\w]*)(javascript|data|vbscript)/im,a=/&#(\w+)(^\w|;)?/g,l=/&(newline|tab);/gi,u=/[\u0000-\u001F\u007F-\u009F\u2000-\u200D\uFEFF]/gim,$=/^.+(:|&colon;)/gim,f=[".","/"],p="about:blank";function _(C){if(!C)return p;var M,T=(M=C,M.replace(u,"").replace(a,function(P,J){return String.fromCharCode(J)})).replace(l,"").replace(u,"").trim();if(!T)return p;if(function(P){return f.indexOf(P[0])>-1}(T))return T;var E=T.match($);if(!E)return T;var R=E[0];return c.test(R)?p:T}}],t={};function n(o){var r=t[o];if(r!==void 0)return r.exports;var s=t[o]={exports:{}};return i[o](s,s.exports,n),s.exports}n.d=(o,r)=>{for(var s in r)n.o(r,s)&&!n.o(o,s)&&Object.defineProperty(o,s,{enumerable:!0,get:r[s]})},n.o=(o,r)=>Object.prototype.hasOwnProperty.call(o,r),n.r=o=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(o,"__esModule",{value:!0})};var e={};return(()=>{n.r(e),n.d(e,{Alignment:()=>s,EventType:()=>P,Fit:()=>r,Layout:()=>M,LoopType:()=>J,Rive:()=>vt,RiveEventType:()=>E,RiveFile:()=>ct,RuntimeLoader:()=>T,StateMachineInput:()=>R,StateMachineInputType:()=>C,Testing:()=>jt,decodeAudio:()=>Ve,decodeFont:()=>Ge,decodeImage:()=>ye});var o,r,s,c=n(1),a=n(2),l=n(3),u=n(5),$=(o=function(z,S){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(F,tt){F.__proto__=tt}||function(F,tt){for(var st in tt)Object.prototype.hasOwnProperty.call(tt,st)&&(F[st]=tt[st])},o(z,S)},function(z,S){if(typeof S!="function"&&S!==null)throw new TypeError("Class extends value "+String(S)+" is not a constructor or null");function F(){this.constructor=z}o(z,S),z.prototype=S===null?Object.create(S):(F.prototype=S.prototype,new F)}),f=function(z,S,F,tt){return new(F||(F=Promise))(function(st,gt){function _t(de){try{ee(tt.next(de))}catch(It){gt(It)}}function Rt(de){try{ee(tt.throw(de))}catch(It){gt(It)}}function ee(de){var It;de.done?st(de.value):(It=de.value,It instanceof F?It:new F(function(he){he(It)})).then(_t,Rt)}ee((tt=tt.apply(z,S||[])).next())})},p=function(z,S){var F,tt,st,gt={label:0,sent:function(){if(1&st[0])throw st[1];return st[1]},trys:[],ops:[]},_t=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return _t.next=Rt(0),_t.throw=Rt(1),_t.return=Rt(2),typeof Symbol=="function"&&(_t[Symbol.iterator]=function(){return this}),_t;function Rt(ee){return function(de){return function(It){if(F)throw new TypeError("Generator is already executing.");for(;_t&&(_t=0,It[0]&&(gt=0)),gt;)try{if(F=1,tt&&(st=2&It[0]?tt.return:It[0]?tt.throw||((st=tt.return)&&st.call(tt),0):tt.next)&&!(st=st.call(tt,It[1])).done)return st;switch(tt=0,st&&(It=[2&It[0],st.value]),It[0]){case 0:case 1:st=It;break;case 4:return gt.label++,{value:It[1],done:!1};case 5:gt.label++,tt=It[1],It=[0];continue;case 7:It=gt.ops.pop(),gt.trys.pop();continue;default:if(!((st=(st=gt.trys).length>0&&st[st.length-1])||It[0]!==6&&It[0]!==2)){gt=0;continue}if(It[0]===3&&(!st||It[1]>st[0]&&It[1]<st[3])){gt.label=It[1];break}if(It[0]===6&&gt.label<st[1]){gt.label=st[1],st=It;break}if(st&&gt.label<st[2]){gt.label=st[2],gt.ops.push(It);break}st[2]&&gt.ops.pop(),gt.trys.pop();continue}It=S.call(z,gt)}catch(he){It=[6,he],tt=0}finally{F=st=0}if(5&It[0])throw It[1];return{value:It[0]?It[1]:void 0,done:!0}}([ee,de])}}},_=function(z){function S(){var F=z!==null&&z.apply(this,arguments)||this;return F.isHandledError=!0,F}return $(S,z),S}(Error);(function(z){z.Cover="cover",z.Contain="contain",z.Fill="fill",z.FitWidth="fitWidth",z.FitHeight="fitHeight",z.None="none",z.ScaleDown="scaleDown",z.Layout="layout"})(r||(r={})),function(z){z.Center="center",z.TopLeft="topLeft",z.TopCenter="topCenter",z.TopRight="topRight",z.CenterLeft="centerLeft",z.CenterRight="centerRight",z.BottomLeft="bottomLeft",z.BottomCenter="bottomCenter",z.BottomRight="bottomRight"}(s||(s={}));var C,M=function(){function z(S){var F,tt,st,gt,_t,Rt,ee;this.fit=(F=S==null?void 0:S.fit)!==null&&F!==void 0?F:r.Contain,this.alignment=(tt=S==null?void 0:S.alignment)!==null&&tt!==void 0?tt:s.Center,this.layoutScaleFactor=(st=S==null?void 0:S.layoutScaleFactor)!==null&&st!==void 0?st:1,this.minX=(gt=S==null?void 0:S.minX)!==null&&gt!==void 0?gt:0,this.minY=(_t=S==null?void 0:S.minY)!==null&&_t!==void 0?_t:0,this.maxX=(Rt=S==null?void 0:S.maxX)!==null&&Rt!==void 0?Rt:0,this.maxY=(ee=S==null?void 0:S.maxY)!==null&&ee!==void 0?ee:0}return z.new=function(S){var F=S.fit,tt=S.alignment,st=S.minX,gt=S.minY,_t=S.maxX,Rt=S.maxY;return console.warn("This function is deprecated: please use `new Layout({})` instead"),new z({fit:F,alignment:tt,minX:st,minY:gt,maxX:_t,maxY:Rt})},z.prototype.copyWith=function(S){var F=S.fit,tt=S.alignment,st=S.layoutScaleFactor,gt=S.minX,_t=S.minY,Rt=S.maxX,ee=S.maxY;return new z({fit:F??this.fit,alignment:tt??this.alignment,layoutScaleFactor:st??this.layoutScaleFactor,minX:gt??this.minX,minY:_t??this.minY,maxX:Rt??this.maxX,maxY:ee??this.maxY})},z.prototype.runtimeFit=function(S){return this.cachedRuntimeFit?this.cachedRuntimeFit:(F=this.fit===r.Cover?S.Fit.cover:this.fit===r.Contain?S.Fit.contain:this.fit===r.Fill?S.Fit.fill:this.fit===r.FitWidth?S.Fit.fitWidth:this.fit===r.FitHeight?S.Fit.fitHeight:this.fit===r.ScaleDown?S.Fit.scaleDown:this.fit===r.Layout?S.Fit.layout:S.Fit.none,this.cachedRuntimeFit=F,F);var F},z.prototype.runtimeAlignment=function(S){return this.cachedRuntimeAlignment?this.cachedRuntimeAlignment:(F=this.alignment===s.TopLeft?S.Alignment.topLeft:this.alignment===s.TopCenter?S.Alignment.topCenter:this.alignment===s.TopRight?S.Alignment.topRight:this.alignment===s.CenterLeft?S.Alignment.centerLeft:this.alignment===s.CenterRight?S.Alignment.centerRight:this.alignment===s.BottomLeft?S.Alignment.bottomLeft:this.alignment===s.BottomCenter?S.Alignment.bottomCenter:this.alignment===s.BottomRight?S.Alignment.bottomRight:S.Alignment.center,this.cachedRuntimeAlignment=F,F);var F},z}(),T=function(){function z(){}return z.loadRuntime=function(){c.default({locateFile:function(){return z.wasmURL}}).then(function(S){var F;for(z.runtime=S;z.callBackQueue.length>0;)(F=z.callBackQueue.shift())===null||F===void 0||F(z.runtime)}).catch(function(S){var F={message:(S==null?void 0:S.message)||"Unknown error",type:(S==null?void 0:S.name)||"Error",wasmError:S instanceof WebAssembly.CompileError||S instanceof WebAssembly.RuntimeError,originalError:S};console.debug("Rive WASM load error details:",F);var tt="https://cdn.jsdelivr.net/npm/".concat(a.name,"@").concat(a.version,"/rive_fallback.wasm");if(z.wasmURL.toLowerCase()!==tt)console.warn("Failed to load WASM from ".concat(z.wasmURL," (").concat(F.message,"), trying jsdelivr as a backup")),z.setWasmUrl(tt),z.loadRuntime();else{var st=["Could not load Rive WASM file from ".concat(z.wasmURL," or ").concat(tt,"."),"Possible reasons:","- Network connection is down","- WebAssembly is not supported in this environment","- The WASM file is corrupted or incompatible",`
Error details:`,"- Type: ".concat(F.type),"- Message: ".concat(F.message),"- WebAssembly-specific error: ".concat(F.wasmError),`
To resolve, you may need to:`,"1. Check your network connection","2. Set a new WASM source via RuntimeLoader.setWasmUrl()","3. Call RuntimeLoader.loadRuntime() again"].join(`
`);console.error(st)}})},z.getInstance=function(S){z.isLoading||(z.isLoading=!0,z.loadRuntime()),z.runtime?S(z.runtime):z.callBackQueue.push(S)},z.awaitInstance=function(){return new Promise(function(S){return z.getInstance(function(F){return S(F)})})},z.setWasmUrl=function(S){z.wasmURL=S},z.getWasmUrl=function(){return z.wasmURL},z.isLoading=!1,z.callBackQueue=[],z.wasmURL="https://unpkg.com/".concat(a.name,"@").concat(a.version,"/rive.wasm"),z}();(function(z){z[z.Number=56]="Number",z[z.Trigger=58]="Trigger",z[z.Boolean=59]="Boolean"})(C||(C={}));var E,R=function(){function z(S,F){this.type=S,this.runtimeInput=F}return Object.defineProperty(z.prototype,"name",{get:function(){return this.runtimeInput.name},enumerable:!1,configurable:!0}),Object.defineProperty(z.prototype,"value",{get:function(){return this.runtimeInput.value},set:function(S){this.runtimeInput.value=S},enumerable:!1,configurable:!0}),z.prototype.fire=function(){this.type===C.Trigger&&this.runtimeInput.fire()},z.prototype.delete=function(){this.runtimeInput=null},z}();(function(z){z[z.General=128]="General",z[z.OpenUrl=131]="OpenUrl"})(E||(E={}));var P,J,K=function(){function z(S,F,tt,st){this.stateMachine=S,this.playing=tt,this.artboard=st,this.inputs=[],this.instance=new F.StateMachineInstance(S,st),this.initInputs(F)}return Object.defineProperty(z.prototype,"name",{get:function(){return this.stateMachine.name},enumerable:!1,configurable:!0}),Object.defineProperty(z.prototype,"statesChanged",{get:function(){for(var S=[],F=0;F<this.instance.stateChangedCount();F++)S.push(this.instance.stateChangedNameByIndex(F));return S},enumerable:!1,configurable:!0}),z.prototype.advance=function(S){this.instance.advance(S)},z.prototype.advanceAndApply=function(S){this.instance.advanceAndApply(S)},z.prototype.reportedEventCount=function(){return this.instance.reportedEventCount()},z.prototype.reportedEventAt=function(S){return this.instance.reportedEventAt(S)},z.prototype.initInputs=function(S){for(var F=0;F<this.instance.inputCount();F++){var tt=this.instance.input(F);this.inputs.push(this.mapRuntimeInput(tt,S))}},z.prototype.mapRuntimeInput=function(S,F){return S.type===F.SMIInput.bool?new R(C.Boolean,S.asBool()):S.type===F.SMIInput.number?new R(C.Number,S.asNumber()):S.type===F.SMIInput.trigger?new R(C.Trigger,S.asTrigger()):void 0},z.prototype.cleanup=function(){this.inputs.forEach(function(S){S.delete()}),this.inputs.length=0,this.instance.delete()},z}(),et=function(){function z(S,F,tt,st,gt){st===void 0&&(st=[]),gt===void 0&&(gt=[]),this.runtime=S,this.artboard=F,this.eventManager=tt,this.animations=st,this.stateMachines=gt}return z.prototype.add=function(S,F,tt){if(tt===void 0&&(tt=!0),(S=Ct(S)).length===0)this.animations.forEach(function(Le){return Le.playing=F}),this.stateMachines.forEach(function(Le){return Le.playing=F});else for(var st=this.animations.map(function(Le){return Le.name}),gt=this.stateMachines.map(function(Le){return Le.name}),_t=0;_t<S.length;_t++){var Rt=st.indexOf(S[_t]),ee=gt.indexOf(S[_t]);if(Rt>=0||ee>=0)Rt>=0?this.animations[Rt].playing=F:this.stateMachines[ee].playing=F;else{var de=this.artboard.animationByName(S[_t]);if(de){var It=new l.Animation(de,this.artboard,this.runtime,F);It.advance(0),It.apply(1),this.animations.push(It)}else{var he=this.artboard.stateMachineByName(S[_t]);if(he){var Ze=new K(he,this.runtime,F,this.artboard);this.stateMachines.push(Ze)}}}}return tt&&(F?this.eventManager.fire({type:P.Play,data:this.playing}):this.eventManager.fire({type:P.Pause,data:this.paused})),F?this.playing:this.paused},z.prototype.initLinearAnimations=function(S,F){for(var tt=this.animations.map(function(ee){return ee.name}),st=0;st<S.length;st++){var gt=tt.indexOf(S[st]);if(gt>=0)this.animations[gt].playing=F;else{var _t=this.artboard.animationByName(S[st]);if(_t){var Rt=new l.Animation(_t,this.artboard,this.runtime,F);Rt.advance(0),Rt.apply(1),this.animations.push(Rt)}}}},z.prototype.initStateMachines=function(S,F){for(var tt=this.stateMachines.map(function(ee){return ee.name}),st=0;st<S.length;st++){var gt=tt.indexOf(S[st]);if(gt>=0)this.stateMachines[gt].playing=F;else{var _t=this.artboard.stateMachineByName(S[st]);if(_t){var Rt=new K(_t,this.runtime,F,this.artboard);this.stateMachines.push(Rt)}else this.initLinearAnimations([S[st]],F)}}},z.prototype.play=function(S){return this.add(S,!0)},z.prototype.pause=function(S){return this.add(S,!1)},z.prototype.scrub=function(S,F){var tt=this.animations.filter(function(st){return S.includes(st.name)});return tt.forEach(function(st){return st.scrubTo=F}),tt.map(function(st){return st.name})},Object.defineProperty(z.prototype,"playing",{get:function(){return this.animations.filter(function(S){return S.playing}).map(function(S){return S.name}).concat(this.stateMachines.filter(function(S){return S.playing}).map(function(S){return S.name}))},enumerable:!1,configurable:!0}),Object.defineProperty(z.prototype,"paused",{get:function(){return this.animations.filter(function(S){return!S.playing}).map(function(S){return S.name}).concat(this.stateMachines.filter(function(S){return!S.playing}).map(function(S){return S.name}))},enumerable:!1,configurable:!0}),z.prototype.stop=function(S){var F=this,tt=[];if((S=Ct(S)).length===0)tt=this.animations.map(function(_t){return _t.name}).concat(this.stateMachines.map(function(_t){return _t.name})),this.animations.forEach(function(_t){return _t.cleanup()}),this.stateMachines.forEach(function(_t){return _t.cleanup()}),this.animations.splice(0,this.animations.length),this.stateMachines.splice(0,this.stateMachines.length);else{var st=this.animations.filter(function(_t){return S.includes(_t.name)});st.forEach(function(_t){_t.cleanup(),F.animations.splice(F.animations.indexOf(_t),1)});var gt=this.stateMachines.filter(function(_t){return S.includes(_t.name)});gt.forEach(function(_t){_t.cleanup(),F.stateMachines.splice(F.stateMachines.indexOf(_t),1)}),tt=st.map(function(_t){return _t.name}).concat(gt.map(function(_t){return _t.name}))}return this.eventManager.fire({type:P.Stop,data:tt}),tt},Object.defineProperty(z.prototype,"isPlaying",{get:function(){return this.animations.reduce(function(S,F){return S||F.playing},!1)||this.stateMachines.reduce(function(S,F){return S||F.playing},!1)},enumerable:!1,configurable:!0}),Object.defineProperty(z.prototype,"isPaused",{get:function(){return!this.isPlaying&&(this.animations.length>0||this.stateMachines.length>0)},enumerable:!1,configurable:!0}),Object.defineProperty(z.prototype,"isStopped",{get:function(){return this.animations.length===0&&this.stateMachines.length===0},enumerable:!1,configurable:!0}),z.prototype.atLeastOne=function(S,F){var tt;return F===void 0&&(F=!0),this.animations.length===0&&this.stateMachines.length===0&&(this.artboard.animationCount()>0?this.add([tt=this.artboard.animationByIndex(0).name],S,F):this.artboard.stateMachineCount()>0&&this.add([tt=this.artboard.stateMachineByIndex(0).name],S,F)),tt},z.prototype.handleLooping=function(){for(var S=0,F=this.animations.filter(function(st){return st.playing});S<F.length;S++){var tt=F[S];tt.loopValue===0&&tt.loopCount?(tt.loopCount=0,this.stop(tt.name)):tt.loopValue===1&&tt.loopCount?(this.eventManager.fire({type:P.Loop,data:{animation:tt.name,type:J.Loop}}),tt.loopCount=0):tt.loopValue===2&&tt.loopCount>1&&(this.eventManager.fire({type:P.Loop,data:{animation:tt.name,type:J.PingPong}}),tt.loopCount=0)}},z.prototype.handleStateChanges=function(){for(var S=[],F=0,tt=this.stateMachines.filter(function(gt){return gt.playing});F<tt.length;F++){var st=tt[F];S.push.apply(S,st.statesChanged)}S.length>0&&this.eventManager.fire({type:P.StateChange,data:S})},z.prototype.handleAdvancing=function(S){this.eventManager.fire({type:P.Advance,data:S})},z}();(function(z){z.Load="load",z.LoadError="loaderror",z.Play="play",z.Pause="pause",z.Stop="stop",z.Loop="loop",z.Draw="draw",z.Advance="advance",z.StateChange="statechange",z.RiveEvent="riveevent",z.AudioStatusChange="audiostatuschange"})(P||(P={})),function(z){z.OneShot="oneshot",z.Loop="loop",z.PingPong="pingpong"}(J||(J={}));var U,G=function(){function z(S){S===void 0&&(S=[]),this.listeners=S}return z.prototype.getListeners=function(S){return this.listeners.filter(function(F){return F.type===S})},z.prototype.add=function(S){this.listeners.includes(S)||this.listeners.push(S)},z.prototype.remove=function(S){for(var F=0;F<this.listeners.length;F++){var tt=this.listeners[F];if(tt.type===S.type&&tt.callback===S.callback){this.listeners.splice(F,1);break}}},z.prototype.removeAll=function(S){var F=this;S?this.listeners.filter(function(tt){return tt.type===S}).forEach(function(tt){return F.remove(tt)}):this.listeners.splice(0,this.listeners.length)},z.prototype.fire=function(S){this.getListeners(S.type).forEach(function(F){return F.callback(S)})},z}(),nt=function(){function z(S){this.eventManager=S,this.queue=[]}return z.prototype.add=function(S){this.queue.push(S)},z.prototype.process=function(){for(;this.queue.length>0;){var S=this.queue.shift();S!=null&&S.action&&S.action(),S!=null&&S.event&&this.eventManager.fire(S.event)}},z}();(function(z){z[z.AVAILABLE=0]="AVAILABLE",z[z.UNAVAILABLE=1]="UNAVAILABLE"})(U||(U={}));var X=function(z){function S(){var F=z!==null&&z.apply(this,arguments)||this;return F._started=!1,F._enabled=!1,F._status=U.UNAVAILABLE,F}return $(S,z),S.prototype.delay=function(F){return f(this,void 0,void 0,function(){return p(this,function(tt){return[2,new Promise(function(st){return setTimeout(st,F)})]})})},S.prototype.timeout=function(){return f(this,void 0,void 0,function(){return p(this,function(F){return[2,new Promise(function(tt,st){return setTimeout(st,50)})]})})},S.prototype.reportToListeners=function(){this.fire({type:P.AudioStatusChange}),this.removeAll()},S.prototype.enableAudio=function(){return f(this,void 0,void 0,function(){return p(this,function(F){return this._enabled||(this._enabled=!0,this._status=U.AVAILABLE,this.reportToListeners()),[2]})})},S.prototype.testAudio=function(){return f(this,void 0,void 0,function(){return p(this,function(F){switch(F.label){case 0:if(this._status!==U.UNAVAILABLE||this._audioContext===null)return[3,4];F.label=1;case 1:return F.trys.push([1,3,,4]),[4,Promise.race([this._audioContext.resume(),this.timeout()])];case 2:return F.sent(),this.enableAudio(),[3,4];case 3:return F.sent(),[3,4];case 4:return[2]}})})},S.prototype._establishAudio=function(){return f(this,void 0,void 0,function(){return p(this,function(F){switch(F.label){case 0:return this._started?[3,5]:(this._started=!0,typeof window<"u"?[3,1]:(this.enableAudio(),[3,5]));case 1:this._audioContext=new AudioContext,this.listenForUserAction(),F.label=2;case 2:return this._status!==U.UNAVAILABLE?[3,5]:[4,this.testAudio()];case 3:return F.sent(),[4,this.delay(1e3)];case 4:return F.sent(),[3,2];case 5:return[2]}})})},S.prototype.listenForUserAction=function(){var F=this;document.addEventListener("pointerdown",function(){return f(F,void 0,void 0,function(){return p(this,function(tt){return this.enableAudio(),[2]})})},{once:!0})},S.prototype.establishAudio=function(){return f(this,void 0,void 0,function(){return p(this,function(F){return this._establishAudio(),[2]})})},Object.defineProperty(S.prototype,"systemVolume",{get:function(){return this._status===U.UNAVAILABLE?(this.testAudio(),0):1},enumerable:!1,configurable:!0}),Object.defineProperty(S.prototype,"status",{get:function(){return this._status},enumerable:!1,configurable:!0}),S}(G),Y=new X,Z=function(){function z(){}return z.prototype.observe=function(){},z.prototype.unobserve=function(){},z.prototype.disconnect=function(){},z}(),it=globalThis.ResizeObserver||Z,rt=function(){function z(){var S=this;this._elementsMap=new Map,this._onObservedEntry=function(F){var tt=S._elementsMap.get(F.target);tt!==null?tt.onResize(F.target.clientWidth==0||F.target.clientHeight==0):S._resizeObserver.unobserve(F.target)},this._onObserved=function(F){F.forEach(S._onObservedEntry)},this._resizeObserver=new it(this._onObserved)}return z.prototype.add=function(S,F){var tt={onResize:F,element:S};return this._elementsMap.set(S,tt),this._resizeObserver.observe(S),tt},z.prototype.remove=function(S){this._resizeObserver.unobserve(S.element),this._elementsMap.delete(S.element)},z}(),ht=new rt,ct=function(){function z(S){this.enableRiveAssetCDN=!0,this.referenceCount=0,this.destroyed=!1,this.src=S.src,this.buffer=S.buffer,S.assetLoader&&(this.assetLoader=S.assetLoader),this.enableRiveAssetCDN=typeof S.enableRiveAssetCDN!="boolean"||S.enableRiveAssetCDN,this.eventManager=new G,S.onLoad&&this.on(P.Load,S.onLoad),S.onLoadError&&this.on(P.LoadError,S.onLoadError)}return z.prototype.initData=function(){return f(this,void 0,void 0,function(){var S,F,tt,st;return p(this,function(gt){switch(gt.label){case 0:return this.src?(S=this,[4,Gt(this.src)]):[3,2];case 1:S.buffer=gt.sent(),gt.label=2;case 2:return this.destroyed?[2]:(this.assetLoader&&(F=new this.runtime.CustomFileAssetLoader({loadContents:this.assetLoader})),tt=this,[4,this.runtime.load(new Uint8Array(this.buffer),F,this.enableRiveAssetCDN)]);case 3:if(tt.file=gt.sent(),this.destroyed)return(st=this.file)===null||st===void 0||st.delete(),this.file=null,[2];if(this.file===null)throw this.eventManager.fire({type:P.LoadError,data:null}),new Error(z.fileLoadErrorMessage);return this.eventManager.fire({type:P.Load,data:this}),[2]}})})},z.prototype.init=function(){return f(this,void 0,void 0,function(){var S;return p(this,function(F){switch(F.label){case 0:if(!this.src&&!this.buffer)throw new Error(z.missingErrorMessage);return S=this,[4,T.awaitInstance()];case 1:return S.runtime=F.sent(),this.destroyed?[2]:[4,this.initData()];case 2:return F.sent(),[2]}})})},z.prototype.on=function(S,F){this.eventManager.add({type:S,callback:F})},z.prototype.off=function(S,F){this.eventManager.remove({type:S,callback:F})},z.prototype.cleanup=function(){var S;this.referenceCount-=1,this.referenceCount<=0&&(this.removeAllRiveEventListeners(),(S=this.file)===null||S===void 0||S.delete(),this.file=null,this.destroyed=!0)},z.prototype.removeAllRiveEventListeners=function(S){this.eventManager.removeAll(S)},z.prototype.getInstance=function(){if(this.file!==null)return this.referenceCount+=1,this.file},z.missingErrorMessage="Rive source file or data buffer required",z.fileLoadErrorMessage="The file failed to load",z}(),vt=function(){function z(S){var F,tt=this;this.loaded=!1,this.destroyed=!1,this._observed=null,this.readyForPlaying=!1,this.artboard=null,this.eventCleanup=null,this.shouldDisableRiveListeners=!1,this.automaticallyHandleEvents=!1,this.enableRiveAssetCDN=!0,this._volume=1,this._artboardWidth=void 0,this._artboardHeight=void 0,this._devicePixelRatioUsed=1,this._hasZeroSize=!1,this._audioEventListener=null,this._boundDraw=null,this.durations=[],this.frameTimes=[],this.frameCount=0,this.isTouchScrollEnabled=!1,this.onCanvasResize=function(st){var gt=tt._hasZeroSize!==st;tt._hasZeroSize=st,st?tt._layout.maxX&&tt._layout.maxY||tt.resizeToCanvas():gt&&tt.resizeDrawingSurfaceToCanvas()},this.renderSecondTimer=0,this._boundDraw=this.draw.bind(this),this.canvas=S.canvas,S.canvas.constructor===HTMLCanvasElement&&(this._observed=ht.add(this.canvas,this.onCanvasResize)),this.src=S.src,this.buffer=S.buffer,this.riveFile=S.riveFile,this.layout=(F=S.layout)!==null&&F!==void 0?F:new M,this.shouldDisableRiveListeners=!!S.shouldDisableRiveListeners,this.isTouchScrollEnabled=!!S.isTouchScrollEnabled,this.automaticallyHandleEvents=!!S.automaticallyHandleEvents,this.enableRiveAssetCDN=S.enableRiveAssetCDN===void 0||S.enableRiveAssetCDN,this.eventManager=new G,S.onLoad&&this.on(P.Load,S.onLoad),S.onLoadError&&this.on(P.LoadError,S.onLoadError),S.onPlay&&this.on(P.Play,S.onPlay),S.onPause&&this.on(P.Pause,S.onPause),S.onStop&&this.on(P.Stop,S.onStop),S.onLoop&&this.on(P.Loop,S.onLoop),S.onStateChange&&this.on(P.StateChange,S.onStateChange),S.onAdvance&&this.on(P.Advance,S.onAdvance),S.onload&&!S.onLoad&&this.on(P.Load,S.onload),S.onloaderror&&!S.onLoadError&&this.on(P.LoadError,S.onloaderror),S.onplay&&!S.onPlay&&this.on(P.Play,S.onplay),S.onpause&&!S.onPause&&this.on(P.Pause,S.onpause),S.onstop&&!S.onStop&&this.on(P.Stop,S.onstop),S.onloop&&!S.onLoop&&this.on(P.Loop,S.onloop),S.onstatechange&&!S.onStateChange&&this.on(P.StateChange,S.onstatechange),S.assetLoader&&(this.assetLoader=S.assetLoader),this.taskQueue=new nt(this.eventManager),this.init({src:this.src,buffer:this.buffer,riveFile:this.riveFile,autoplay:S.autoplay,animations:S.animations,stateMachines:S.stateMachines,artboard:S.artboard,useOffscreenRenderer:S.useOffscreenRenderer})}return z.new=function(S){return console.warn("This function is deprecated: please use `new Rive({})` instead"),new z(S)},z.prototype.onSystemAudioChanged=function(){this.volume=this._volume},z.prototype.init=function(S){var F=this,tt=S.src,st=S.buffer,gt=S.riveFile,_t=S.animations,Rt=S.stateMachines,ee=S.artboard,de=S.autoplay,It=de!==void 0&&de,he=S.useOffscreenRenderer,Ze=he!==void 0&&he;if(!this.destroyed){if(this.src=tt,this.buffer=st,this.riveFile=gt,!this.src&&!this.buffer&&!this.riveFile)throw new _(z.missingErrorMessage);var Le=Ct(_t),ne=Ct(Rt);this.loaded=!1,this.readyForPlaying=!1,T.awaitInstance().then(function(Ue){F.destroyed||(F.runtime=Ue,F.removeRiveListeners(),F.deleteRiveRenderer(),F.renderer=F.runtime.makeRenderer(F.canvas,Ze),F.canvas.width||F.canvas.height||F.resizeDrawingSurfaceToCanvas(),F.initData(ee,Le,ne,It).then(function(){return F.setupRiveListeners()}).catch(function(_n){console.error(_n)}))}).catch(function(Ue){console.error(Ue)})}},z.prototype.setupRiveListeners=function(S){var F=this;if(this.eventCleanup&&this.eventCleanup(),!this.shouldDisableRiveListeners){var tt=(this.animator.stateMachines||[]).filter(function(gt){return gt.playing&&F.runtime.hasListeners(gt.instance)}).map(function(gt){return gt.instance}),st=this.isTouchScrollEnabled;S&&"isTouchScrollEnabled"in S&&(st=S.isTouchScrollEnabled),this.eventCleanup=(0,u.registerTouchInteractions)({canvas:this.canvas,artboard:this.artboard,stateMachines:tt,renderer:this.renderer,rive:this.runtime,fit:this._layout.runtimeFit(this.runtime),alignment:this._layout.runtimeAlignment(this.runtime),isTouchScrollEnabled:st,layoutScaleFactor:this._layout.layoutScaleFactor})}},z.prototype.removeRiveListeners=function(){this.eventCleanup&&(this.eventCleanup(),this.eventCleanup=null)},z.prototype.initializeAudio=function(){var S,F=this;Y.status==U.UNAVAILABLE&&(!((S=this.artboard)===null||S===void 0)&&S.hasAudio)&&this._audioEventListener===null&&(this._audioEventListener={type:P.AudioStatusChange,callback:function(){return F.onSystemAudioChanged()}},Y.add(this._audioEventListener),Y.establishAudio())},z.prototype.initArtboardSize=function(){this.artboard&&(this._artboardWidth=this.artboard.width=this._artboardWidth||this.artboard.width,this._artboardHeight=this.artboard.height=this._artboardHeight||this.artboard.height)},z.prototype.initData=function(S,F,tt,st){return f(this,void 0,void 0,function(){var gt,_t,Rt;return p(this,function(ee){switch(ee.label){case 0:return ee.trys.push([0,3,,4]),this.riveFile!=null?[3,2]:(this.riveFile=new ct({src:this.src,buffer:this.buffer,enableRiveAssetCDN:this.enableRiveAssetCDN,assetLoader:this.assetLoader}),[4,this.riveFile.init()]);case 1:ee.sent(),ee.label=2;case 2:if(!this.riveFile)throw new _(z.cleanupErrorMessage);return this.file=this.riveFile.getInstance(),this.initArtboard(S,F,tt,st),this.initArtboardSize(),this.initializeAudio(),this.loaded=!0,this.eventManager.fire({type:P.Load,data:(Rt=this.src)!==null&&Rt!==void 0?Rt:"buffer"}),this.readyForPlaying=!0,this.taskQueue.process(),this.drawFrame(),[2,Promise.resolve()];case 3:return gt=ee.sent(),_t=(de=gt)&&de.isHandledError?de.message:"Problem loading file; may be corrupt!",console.warn(_t),this.eventManager.fire({type:P.LoadError,data:_t}),[2,Promise.reject(_t)];case 4:return[2]}var de})})},z.prototype.initArtboard=function(S,F,tt,st){if(this.file){var gt,_t=S?this.file.artboardByName(S):this.file.defaultArtboard();if(!_t){var Rt="Invalid artboard name or no default artboard";return console.warn(Rt),void this.eventManager.fire({type:P.LoadError,data:Rt})}if(this.artboard=_t,_t.volume=this._volume*Y.systemVolume,this.artboard.animationCount()<1)throw Rt="Artboard has no animations",this.eventManager.fire({type:P.LoadError,data:Rt}),Rt;this.animator=new et(this.runtime,this.artboard,this.eventManager),F.length>0||tt.length>0?(gt=F.concat(tt),this.animator.initLinearAnimations(F,st),this.animator.initStateMachines(tt,st)):gt=[this.animator.atLeastOne(st,!1)],this.taskQueue.add({event:{type:st?P.Play:P.Pause,data:gt}})}},z.prototype.drawFrame=function(){var S;!((S=document==null?void 0:document.timeline)===null||S===void 0)&&S.currentTime?this.loaded&&this.artboard&&!this.frameRequestId&&this._boundDraw(document.timeline.currentTime):this.startRendering()},z.prototype.draw=function(S,F){this.frameRequestId=null;var tt=performance.now();this.lastRenderTime||(this.lastRenderTime=S),this.renderSecondTimer+=S-this.lastRenderTime,this.renderSecondTimer>5e3&&(this.renderSecondTimer=0,F==null||F());var st=(S-this.lastRenderTime)/1e3;this.lastRenderTime=S;for(var gt=0,_t=this.animator.animations.filter(function(gn){return gn.playing||gn.needsScrub}).sort(function(gn){return gn.needsScrub?-1:1});gt<_t.length;gt++){var Rt=_t[gt];Rt.advance(st),Rt.instance.didLoop&&(Rt.loopCount+=1),Rt.apply(1)}for(var ee=0,de=this.animator.stateMachines.filter(function(gn){return gn.playing});ee<de.length;ee++){var It=de[ee],he=It.reportedEventCount();if(he)for(var Ze=0;Ze<he;Ze++){var Le=It.reportedEventAt(Ze);if(Le)if(Le.type===E.OpenUrl){if(this.eventManager.fire({type:P.RiveEvent,data:Le}),this.automaticallyHandleEvents){var ne=document.createElement("a"),Ue=Le,_n=Ue.url,Je=Ue.target,Cn=(0,u.sanitizeUrl)(_n);_n&&ne.setAttribute("href",Cn),Je&&ne.setAttribute("target",Je),Cn&&Cn!==u.BLANK_URL&&ne.click()}}else this.eventManager.fire({type:P.RiveEvent,data:Le})}It.advanceAndApply(st)}this.animator.stateMachines.length==0&&this.artboard.advance(st);var Me=this.renderer;Me.clear(),Me.save(),this.alignRenderer(),this._hasZeroSize||this.artboard.draw(Me),Me.restore(),Me.flush(),this.animator.handleLooping(),this.animator.handleStateChanges(),this.animator.handleAdvancing(st),this.frameCount++;var Jn=performance.now();for(this.frameTimes.push(Jn),this.durations.push(Jn-tt);this.frameTimes[0]<=Jn-1e3;)this.frameTimes.shift(),this.durations.shift();this.animator.isPlaying?this.startRendering():(this.animator.isPaused||this.animator.isStopped)&&(this.lastRenderTime=0)},z.prototype.alignRenderer=function(){var S=this,F=S.renderer,tt=S.runtime,st=S._layout,gt=S.artboard;F.align(st.runtimeFit(tt),st.runtimeAlignment(tt),{minX:st.minX,minY:st.minY,maxX:st.maxX,maxY:st.maxY},gt.bounds,this._devicePixelRatioUsed*st.layoutScaleFactor)},Object.defineProperty(z.prototype,"fps",{get:function(){return this.durations.length},enumerable:!1,configurable:!0}),Object.defineProperty(z.prototype,"frameTime",{get:function(){return this.durations.length===0?0:(this.durations.reduce(function(S,F){return S+F},0)/this.durations.length).toFixed(4)},enumerable:!1,configurable:!0}),z.prototype.cleanup=function(){var S;this.destroyed=!0,this.stopRendering(),this.cleanupInstances(),this._observed!==null&&ht.remove(this._observed),this.removeRiveListeners(),this.file&&((S=this.riveFile)===null||S===void 0||S.cleanup(),this.file=null),this.riveFile=null,this.deleteRiveRenderer(),this._audioEventListener!==null&&(Y.remove(this._audioEventListener),this._audioEventListener=null)},z.prototype.deleteRiveRenderer=function(){var S;(S=this.renderer)===null||S===void 0||S.delete(),this.renderer=null},z.prototype.cleanupInstances=function(){this.eventCleanup!==null&&this.eventCleanup(),this.stop(),this.artboard&&(this.artboard.delete(),this.artboard=null)},z.prototype.retrieveTextRun=function(S){var F;if(S)if(this.artboard){var tt=this.artboard.textRun(S);if(tt)return tt;console.warn("Could not access a text run with name '".concat(S,"' in the '").concat((F=this.artboard)===null||F===void 0?void 0:F.name,"' Artboard. Note that you must rename a text run node in the Rive editor to make it queryable at runtime."))}else console.warn("Tried to access text run, but the Artboard is null");else console.warn("No text run name provided")},z.prototype.getTextRunValue=function(S){var F=this.retrieveTextRun(S);return F?F.text:void 0},z.prototype.setTextRunValue=function(S,F){var tt=this.retrieveTextRun(S);tt&&(tt.text=F)},z.prototype.play=function(S,F){var tt=this;S=Ct(S),this.readyForPlaying?(this.animator.play(S),this.eventCleanup&&this.eventCleanup(),this.setupRiveListeners(),this.startRendering()):this.taskQueue.add({action:function(){return tt.play(S,F)}})},z.prototype.pause=function(S){var F=this;S=Ct(S),this.readyForPlaying?(this.eventCleanup&&this.eventCleanup(),this.animator.pause(S)):this.taskQueue.add({action:function(){return F.pause(S)}})},z.prototype.scrub=function(S,F){var tt=this;S=Ct(S),this.readyForPlaying?(this.animator.scrub(S,F||0),this.drawFrame()):this.taskQueue.add({action:function(){return tt.scrub(S,F)}})},z.prototype.stop=function(S){var F=this;S=Ct(S),this.readyForPlaying?(this.animator&&this.animator.stop(S),this.eventCleanup&&this.eventCleanup()):this.taskQueue.add({action:function(){return F.stop(S)}})},z.prototype.reset=function(S){var F,tt=S==null?void 0:S.artboard,st=Ct(S==null?void 0:S.animations),gt=Ct(S==null?void 0:S.stateMachines),_t=(F=S==null?void 0:S.autoplay)!==null&&F!==void 0&&F;this.cleanupInstances(),this.initArtboard(tt,st,gt,_t),this.taskQueue.process()},z.prototype.load=function(S){this.file=null,this.stop(),this.init(S)},Object.defineProperty(z.prototype,"layout",{get:function(){return this._layout},set:function(S){this._layout=S,S.maxX&&S.maxY||this.resizeToCanvas(),this.loaded&&!this.animator.isPlaying&&this.drawFrame()},enumerable:!1,configurable:!0}),z.prototype.resizeToCanvas=function(){this._layout=this.layout.copyWith({minX:0,minY:0,maxX:this.canvas.width,maxY:this.canvas.height})},z.prototype.resizeDrawingSurfaceToCanvas=function(S){if(this.canvas instanceof HTMLCanvasElement&&window){var F=this.canvas.getBoundingClientRect(),tt=F.width,st=F.height,gt=S||window.devicePixelRatio||1;if(this.devicePixelRatioUsed=gt,this.canvas.width=gt*tt,this.canvas.height=gt*st,this.resizeToCanvas(),this.drawFrame(),this.layout.fit===r.Layout){var _t=this._layout.layoutScaleFactor;this.artboard.width=tt/_t,this.artboard.height=st/_t}}},Object.defineProperty(z.prototype,"source",{get:function(){return this.src},enumerable:!1,configurable:!0}),Object.defineProperty(z.prototype,"activeArtboard",{get:function(){return this.artboard?this.artboard.name:""},enumerable:!1,configurable:!0}),Object.defineProperty(z.prototype,"animationNames",{get:function(){if(!this.loaded||!this.artboard)return[];for(var S=[],F=0;F<this.artboard.animationCount();F++)S.push(this.artboard.animationByIndex(F).name);return S},enumerable:!1,configurable:!0}),Object.defineProperty(z.prototype,"stateMachineNames",{get:function(){if(!this.loaded||!this.artboard)return[];for(var S=[],F=0;F<this.artboard.stateMachineCount();F++)S.push(this.artboard.stateMachineByIndex(F).name);return S},enumerable:!1,configurable:!0}),z.prototype.stateMachineInputs=function(S){if(this.loaded){var F=this.animator.stateMachines.find(function(tt){return tt.name===S});return F==null?void 0:F.inputs}},z.prototype.retrieveInputAtPath=function(S,F){if(S)if(this.artboard){var tt=this.artboard.inputByPath(S,F);if(tt)return tt;console.warn("Could not access an input with name: '".concat(S,"', at path:'").concat(F,"'"))}else console.warn("Tried to access input: '".concat(S,"', at path: '").concat(F,"', but the Artboard is null"));else console.warn("No input name provided for path '".concat(F,"'"))},z.prototype.setBooleanStateAtPath=function(S,F,tt){var st=this.retrieveInputAtPath(S,tt);st&&(st.type===C.Boolean?st.asBool().value=F:console.warn("Input with name: '".concat(S,"', at path:'").concat(tt,"' is not a boolean")))},z.prototype.setNumberStateAtPath=function(S,F,tt){var st=this.retrieveInputAtPath(S,tt);st&&(st.type===C.Number?st.asNumber().value=F:console.warn("Input with name: '".concat(S,"', at path:'").concat(tt,"' is not a number")))},z.prototype.fireStateAtPath=function(S,F){var tt=this.retrieveInputAtPath(S,F);tt&&(tt.type===C.Trigger?tt.asTrigger().fire():console.warn("Input with name: '".concat(S,"', at path:'").concat(F,"' is not a trigger")))},z.prototype.retrieveTextAtPath=function(S,F){if(S)if(F)if(this.artboard){var tt=this.artboard.textByPath(S,F);if(tt)return tt;console.warn("Could not access text with name: '".concat(S,"', at path:'").concat(F,"'"))}else console.warn("Tried to access text: '".concat(S,"', at path: '").concat(F,"', but the Artboard is null"));else console.warn("No path provided for text '".concat(S,"'"));else console.warn("No text name provided for path '".concat(F,"'"))},z.prototype.getTextRunValueAtPath=function(S,F){var tt=this.retrieveTextAtPath(S,F);if(tt)return tt.text;console.warn("Could not get text with name: '".concat(S,"', at path:'").concat(F,"'"))},z.prototype.setTextRunValueAtPath=function(S,F,tt){var st=this.retrieveTextAtPath(S,tt);st?st.text=F:console.warn("Could not set text with name: '".concat(S,"', at path:'").concat(tt,"'"))},Object.defineProperty(z.prototype,"playingStateMachineNames",{get:function(){return this.loaded?this.animator.stateMachines.filter(function(S){return S.playing}).map(function(S){return S.name}):[]},enumerable:!1,configurable:!0}),Object.defineProperty(z.prototype,"playingAnimationNames",{get:function(){return this.loaded?this.animator.animations.filter(function(S){return S.playing}).map(function(S){return S.name}):[]},enumerable:!1,configurable:!0}),Object.defineProperty(z.prototype,"pausedAnimationNames",{get:function(){return this.loaded?this.animator.animations.filter(function(S){return!S.playing}).map(function(S){return S.name}):[]},enumerable:!1,configurable:!0}),Object.defineProperty(z.prototype,"pausedStateMachineNames",{get:function(){return this.loaded?this.animator.stateMachines.filter(function(S){return!S.playing}).map(function(S){return S.name}):[]},enumerable:!1,configurable:!0}),Object.defineProperty(z.prototype,"isPlaying",{get:function(){return this.animator.isPlaying},enumerable:!1,configurable:!0}),Object.defineProperty(z.prototype,"isPaused",{get:function(){return this.animator.isPaused},enumerable:!1,configurable:!0}),Object.defineProperty(z.prototype,"isStopped",{get:function(){return this.animator.isStopped},enumerable:!1,configurable:!0}),Object.defineProperty(z.prototype,"bounds",{get:function(){return this.artboard?this.artboard.bounds:void 0},enumerable:!1,configurable:!0}),z.prototype.on=function(S,F){this.eventManager.add({type:S,callback:F})},z.prototype.off=function(S,F){this.eventManager.remove({type:S,callback:F})},z.prototype.unsubscribe=function(S,F){console.warn("This function is deprecated: please use `off()` instead."),this.off(S,F)},z.prototype.removeAllRiveEventListeners=function(S){this.eventManager.removeAll(S)},z.prototype.unsubscribeAll=function(S){console.warn("This function is deprecated: please use `removeAllRiveEventListeners()` instead."),this.removeAllRiveEventListeners(S)},z.prototype.stopRendering=function(){this.loaded&&this.frameRequestId&&(this.runtime.cancelAnimationFrame?this.runtime.cancelAnimationFrame(this.frameRequestId):cancelAnimationFrame(this.frameRequestId),this.frameRequestId=null)},z.prototype.startRendering=function(){this.loaded&&this.artboard&&!this.frameRequestId&&(this.runtime.requestAnimationFrame?this.frameRequestId=this.runtime.requestAnimationFrame(this._boundDraw):this.frameRequestId=requestAnimationFrame(this._boundDraw))},z.prototype.enableFPSCounter=function(S){this.runtime.enableFPSCounter(S)},z.prototype.disableFPSCounter=function(){this.runtime.disableFPSCounter()},Object.defineProperty(z.prototype,"contents",{get:function(){if(this.loaded){for(var S={artboards:[]},F=0;F<this.file.artboardCount();F++){for(var tt=this.file.artboardByIndex(F),st={name:tt.name,animations:[],stateMachines:[]},gt=0;gt<tt.animationCount();gt++){var _t=tt.animationByIndex(gt);st.animations.push(_t.name)}for(var Rt=0;Rt<tt.stateMachineCount();Rt++){for(var ee=tt.stateMachineByIndex(Rt),de=ee.name,It=new this.runtime.StateMachineInstance(ee,tt),he=[],Ze=0;Ze<It.inputCount();Ze++){var Le=It.input(Ze);he.push({name:Le.name,type:Le.type})}st.stateMachines.push({name:de,inputs:he})}S.artboards.push(st)}return S}},enumerable:!1,configurable:!0}),Object.defineProperty(z.prototype,"volume",{get:function(){return this.artboard&&this.artboard.volume!==this._volume&&(this._volume=this.artboard.volume),this._volume},set:function(S){this._volume=S,this.artboard&&(this.artboard.volume=S*Y.systemVolume)},enumerable:!1,configurable:!0}),Object.defineProperty(z.prototype,"artboardWidth",{get:function(){var S;return this.artboard?this.artboard.width:(S=this._artboardWidth)!==null&&S!==void 0?S:0},set:function(S){this._artboardWidth=S,this.artboard&&(this.artboard.width=S)},enumerable:!1,configurable:!0}),Object.defineProperty(z.prototype,"artboardHeight",{get:function(){var S;return this.artboard?this.artboard.height:(S=this._artboardHeight)!==null&&S!==void 0?S:0},set:function(S){this._artboardHeight=S,this.artboard&&(this.artboard.height=S)},enumerable:!1,configurable:!0}),z.prototype.resetArtboardSize=function(){this.artboard?(this.artboard.resetArtboardSize(),this._artboardWidth=this.artboard.width,this._artboardHeight=this.artboard.height):(this._artboardWidth=void 0,this._artboardHeight=void 0)},Object.defineProperty(z.prototype,"devicePixelRatioUsed",{get:function(){return this._devicePixelRatioUsed},set:function(S){this._devicePixelRatioUsed=S},enumerable:!1,configurable:!0}),z.missingErrorMessage="Rive source file or data buffer required",z.cleanupErrorMessage="Attempt to use file after calling cleanup.",z}(),Gt=function(z){return f(void 0,void 0,void 0,function(){var S;return p(this,function(F){switch(F.label){case 0:return S=new Request(z),[4,fetch(S)];case 1:return[4,F.sent().arrayBuffer()];case 2:return[2,F.sent()]}})})},Ct=function(z){return typeof z=="string"?[z]:z instanceof Array?z:[]},jt={EventManager:G,TaskQueueManager:nt},Ve=function(z){return new Promise(function(S){return T.getInstance(function(F){F.decodeAudio(z,S)})})},ye=function(z){return new Promise(function(S){return T.getInstance(function(F){F.decodeImage(z,S)})})},Ge=function(z){return new Promise(function(S){return T.getInstance(function(F){F.decodeFont(z,S)})})}})(),e})();var T2=S2.exports=Tm();const Ni=class Ni{constructor(){$t(this,"memoryUpdates",Re(null));$t(this,"clearTimeout")}notifyMemoryUpdated(){this.clearTimeout||(this.memoryUpdates.set({timestamp:Date.now()}),clearTimeout(this.clearTimeout),this.clearTimeout=void 0,this.clearTimeout=setTimeout(()=>{this.memoryUpdates.set(null),this.clearTimeout=void 0},Ni.CLEAR_DELAY_MS))}subscribe(t){return this.memoryUpdates.subscribe(t)}};$t(Ni,"CLEAR_DELAY_MS",1e4);let bs=Ni;const Em=new bs,E2=""+new URL("memories-dark-DhQ4ghw7.riv",import.meta.url).href,yc=""+new URL("memories-light-Cj0fATGz.riv",import.meta.url).href;function I2(i){let t,n,e;return{c(){t=L("span"),t.textContent="Augment Memories",A(t,"role","button"),A(t,"tabindex","0")},m(o,r){b(o,t,r),n||(e=[Dt(t,"click",i[3]),Dt(t,"keydown",i[4])],n=!0)},p:N,d(o){o&&x(t),n=!1,tn(e)}}}function L2(i){let t,n;return t=new zt({props:{content:"Information that Agent remembered from previous interactions (click to open)",$$slots:{default:[I2]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};2048&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function R2(i){let t;return{c(){t=L("canvas"),A(t,"slot","leftIcon"),A(t,"width","32"),A(t,"height","32"),qn(t,"width","14px"),qn(t,"height","14px")},m(n,e){b(n,t,e),i[5](t)},p:N,d(n){n&&x(t),i[5](null)}}}function D2(i){let t,n;return t=new Wo({props:{$$slots:{leftIcon:[R2],default:[L2]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,[o]){const r={};2049&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function P2(i,t,n){let e;Tt(i,Em,u=>n(2,e=u));let o,r,s=yc;function c(){r&&(r==null||r.cleanup(),n(1,r=void 0)),o&&!r&&n(1,r=new T2.Rive({src:s,canvas:o,autoplay:!1,onLoad:()=>{r==null||r.resizeDrawingSurfaceToCanvas(),r==null||r.play(),r==null||r.stop()}}))}function a(u){s=u===C1.dark?E2:yc,c()}function l(){r==null||r.reset()}return so(()=>{b1(a),a(_1())}),qr(()=>{r==null||r.cleanup()}),i.$$.update=()=>{3&i.$$.dirty&&o&&!r&&c(),4&i.$$.dirty&&(e!=null&&e.timestamp)&&(r==null||r.reset(),r==null||r.play(),setTimeout(l,2500))},[o,r,e,function(u){wn.call(this,i,u)},function(u){wn.call(this,i,u)},function(u){Qt[u?"unshift":"push"](()=>{o=u,n(0,o)})}]}class N2 extends ut{constructor(t){super(),dt(this,t,P2,D2,lt,{})}}function xc(i){let t,n,e,o,r,s,c,a;const l=[H2,B2,z2,O2,F2],u=[];function $(f,p){return 2&p&&(t=null),2&p&&(n=null),2&p&&(e=null),2&p&&(o=null),t==null&&(t=!!Ls(f[1])),t?0:(n==null&&(n=!!Is(f[1])),n?1:(e==null&&(e=!!q$(f[1])),e?2:(o==null&&(o=!!j$(f[1])),o?3:4)))}return r=$(i,-1),s=u[r]=l[r](i),{c(){s.c(),c=ft()},m(f,p){u[r].m(f,p),b(f,c,p),a=!0},p(f,p){let _=r;r=$(f,p),r===_?u[r].p(f,p):(q(),m(u[_],1,1,()=>{u[_]=null}),j(),s=u[r],s?s.p(f,p):(s=u[r]=l[r](f),s.c()),d(s,1),s.m(c.parentNode,c))},i(f){a||(d(s),a=!0)},o(f){m(s),a=!1},d(f){f&&x(c),u[r].d(f)}}}function F2(i){let t,n,e,o,r,s;const c=[j2,q2,U2],a=[];function l(u,$){return u[3]?0:u[2].iconName?1:2}return n=l(i),e=a[n]=c[n](i),{c(){t=L("div"),e.c(),A(t,"class","pulse-chip-container svelte-s9omdo")},m(u,$){b(u,t,$),a[n].m(t,null),o=!0,r||(s=Cs(vf.call(null,t,i[6])),r=!0)},p(u,$){let f=n;n=l(u),n===f?a[n].p(u,$):(q(),m(a[f],1,1,()=>{a[f]=null}),j(),e=a[n],e?e.p(u,$):(e=a[n]=c[n](u),e.c()),d(e,1),e.m(t,null))},i(u){o||(d(e),o=!0)},o(u){m(e),o=!1},d(u){u&&x(t),a[n].d(),r=!1,s()}}}function O2(i){let t,n;return t=new N2({}),t.$on("click",function(){ze(i[2].onClick)&&i[2].onClick.apply(this,arguments)}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){i=e},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function z2(i){let t,n;return t=new n2({props:{item:i[1],chatModel:i[0]}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};2&o&&(r.item=e[1]),1&o&&(r.chatModel=e[0]),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function B2(i){let t,n;return t=new k2({props:{item:i[1]}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};2&o&&(r.item=e[1]),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function H2(i){let t,n;return t=new p2({props:{originalCode:i[1].selection.originalCode,onRemove:i[7]}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};2&o&&(r.originalCode=e[1].selection.originalCode),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function U2(i){let t,n;return t=new Wo({props:{removeBtn:{title:i[2].removeTitle,onRemove:i[7]},showWarning:i[2].showWarning,$$slots:{default:[G2]},$$scope:{ctx:i}}}),t.$on("click",function(){ze(i[2].onClick)&&i[2].onClick.apply(this,arguments)}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){i=e;const r={};4&o&&(r.removeBtn={title:i[2].removeTitle,onRemove:i[7]}),4&o&&(r.showWarning=i[2].showWarning),4102&o&&(r.$$scope={dirty:o,ctx:i}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function q2(i){let t,n;return t=new Wo({props:{removeBtn:{title:i[2].removeTitle,onRemove:i[7]},showWarning:i[2].showWarning,$$slots:{leftIcon:[Z2],default:[X2]},$$scope:{ctx:i}}}),t.$on("click",function(){ze(i[2].onClick)&&i[2].onClick.apply(this,arguments)}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){i=e;const r={};4&o&&(r.removeBtn={title:i[2].removeTitle,onRemove:i[7]}),4&o&&(r.showWarning=i[2].showWarning),4102&o&&(r.$$scope={dirty:o,ctx:i}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function j2(i){let t,n;return t=new Wo({props:{removeBtn:{title:i[2].removeTitle,onRemove:i[7]},showWarning:i[2].showWarning,$$slots:{leftButtons:[ev],default:[tv]},$$scope:{ctx:i}}}),t.$on("click",function(){ze(i[2].onClick)&&i[2].onClick.apply(this,arguments)}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){i=e;const r={};4&o&&(r.removeBtn={title:i[2].removeTitle,onRemove:i[7]}),4&o&&(r.showWarning=i[2].showWarning),4118&o&&(r.$$scope={dirty:o,ctx:i}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function W2(i){let t,n;return t=new kn({props:{nopath:!0,filepath:i[2].filepath}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};4&o&&(r.filepath=e[2].filepath),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function V2(i){let t,n;return t=new Yr({props:{option:i[1],slot:"content"}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};2&o&&(r.option=e[1]),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function G2(i){let t,n;return t=new zt({props:{triggerOn:[te.Hover],$$slots:{content:[V2],default:[W2]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};4102&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function K2(i){let t,n;return t=new kn({props:{nopath:!0,filepath:i[2].filepath}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};4&o&&(r.filepath=e[2].filepath),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function Y2(i){let t,n;return t=new Yr({props:{option:i[1],slot:"content"}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};2&o&&(r.option=e[1]),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function X2(i){let t,n;return t=new zt({props:{triggerOn:[te.Hover],$$slots:{content:[Y2],default:[K2]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};4102&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function Z2(i){let t,n;return t=new oh({props:{icon:i[2].iconName,slot:"leftIcon"}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};4&o&&(r.icon=e[2].iconName),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function J2(i){let t,n;return t=new kn({props:{nopath:!0,filepath:i[2].filepath}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};4&o&&(r.filepath=e[2].filepath),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function Q2(i){let t,n;return t=new Yr({props:{option:i[1],slot:"content"}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};2&o&&(r.option=e[1]),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function tv(i){let t,n;return t=new zt({props:{triggerOn:[te.Hover],$$slots:{content:[Q2],default:[J2]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};4102&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function ev(i){let t,n;const e=[i[4],{slot:"leftButtons"}];let o={};for(let r=0;r<e.length;r+=1)o=Et(o,e[r]);return t=new B0({props:o}),{c(){v(t.$$.fragment)},m(r,s){w(t,r,s),n=!0},p(r,s){const c=16&s?De(e,[go(r[4]),e[1]]):{};t.$set(c)},i(r){n||(d(t.$$.fragment,r),n=!0)},o(r){m(t.$$.fragment,r),n=!1},d(r){y(t,r)}}}function nv(i){let t,n,e=i[1]&&xc(i);return{c(){e&&e.c(),t=ft()},m(o,r){e&&e.m(o,r),b(o,t,r),n=!0},p(o,[r]){o[1]?e?(e.p(o,r),2&r&&d(e,1)):(e=xc(o),e.c(),d(e,1),e.m(t.parentNode,t)):e&&(q(),m(e,1,1,()=>{e=null}),j())},i(o){n||(d(e),n=!0)},o(o){m(e),n=!1},d(o){o&&x(t),e&&e.d(o)}}}function ov(i,t,n){let e,o,r,s,c,a,l=N,u=N,$=()=>(u(),u=ie(f,M=>n(10,a=M)),f);i.$$.on_destroy.push(()=>l()),i.$$.on_destroy.push(()=>u());let{chatModel:f}=t;$();let{item:p}=t,_=!1;const C=new hf({onHoverStart:()=>{n(8,_=!0)},onHoverEnd:()=>{n(8,_=!1)},hoverTriggerDuration:0});return i.$$set=M=>{"chatModel"in M&&$(n(0,f=M.chatModel)),"item"in M&&n(1,p=M.item)},i.$$.update=()=>{1024&i.$$.dirty&&(n(5,e=a==null?void 0:a.specialContextInputModel),l(),l=ie(e,M=>n(9,c=M))),2&i.$$.dirty&&n(2,o=(M=>{const T={onClick:void 0,removeTitle:"",filepath:"",pinnable:!0,iconName:void 0,showWarning:!1};if(ks(M))return{...T,onClick:()=>{f==null||f.extensionClient.openFile(M.file)},removeTitle:"Remove file from context",filepath:M.file.pathName};if(Ss(M))return{...T,onClick:()=>{f==null||f.extensionClient.openFile(M.recentFile)},removeTitle:"Remove file from context",filepath:M.recentFile.pathName};if(Ts(M))return{...T,onClick:()=>{f==null||f.extensionClient.openFile(M.folder)},removeTitle:"Remove folder from context",filepath:M.folder.pathName,iconName:"folder-opened"};if(Es(M))return{...T,removeTitle:"Remove external source from context",filepath:M.label,iconName:"book"};if(Ui(M))return{...T,removeTitle:"Remove source folder from context",filepath:M.sourceFolder.folderRoot,iconName:"root-folder",pinnable:!1,showWarning:M.showWarning};if(q$(M))return{...T,iconName:"root-folder",pinnable:!1};if(Rs(M)){const E=`${ls}/${us}/${M.rule.path}`;return{...T,onClick:()=>{f==null||f.extensionClient.openFile({repoRoot:"",pathName:E})},removeTitle:"Remove rule from context",filepath:E,iconName:"rule"}}return j$(M)?{...T,onClick:()=>{const E=f==null?void 0:f.flags.agentMemoriesFilePathName;f!=null&&f.currentConversationId&&f.extensionClient.reportAgentSessionEvent({eventName:Ai.openedMemoriesFile,conversationId:f.currentConversationId,eventData:{memoriesFileOpenData:{memoriesPathUndefined:!E}}}),f==null||f.extensionClient.openMemoriesFile()},pinnable:!1}:T})(p)),514&i.$$.dirty&&n(4,r={title:p.pinned?"Unpin":"Pin to context",onPin:()=>c==null?void 0:c.togglePinned(p),isPinned:p.pinned}),262&i.$$.dirty&&n(3,s=o.pinnable&&(_||p.pinned))},[f,p,o,s,r,e,C,()=>{c==null||c.markInactive(p),c==null||c.unpin(p)},_,c,a]}class rv extends ut{constructor(t){super(),dt(this,t,ov,nv,lt,{chatModel:0,item:1})}}function bc(i,t,n){const e=i.slice();return e[4]=t[n],e}function _c(i){let t,n;return t=new rv({props:{item:i[4],chatModel:i[0]}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};2&o&&(r.item=e[4]),1&o&&(r.chatModel=e[0]),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function iv(i){let t,n,e,o=se(i[1]),r=[];for(let c=0;c<o.length;c+=1)r[c]=_c(bc(i,o,c));const s=c=>m(r[c],1,1,()=>{r[c]=null});return{c(){t=L("div"),n=L("div");for(let c=0;c<r.length;c+=1)r[c].c();A(n,"class","c-action-bar-context-container svelte-1wj2viq"),A(t,"class","c-action-bar-context svelte-1wj2viq")},m(c,a){b(c,t,a),O(t,n);for(let l=0;l<r.length;l+=1)r[l]&&r[l].m(n,null);e=!0},p(c,[a]){if(3&a){let l;for(o=se(c[1]),l=0;l<o.length;l+=1){const u=bc(c,o,l);r[l]?(r[l].p(u,a),d(r[l],1)):(r[l]=_c(u),r[l].c(),d(r[l],1),r[l].m(n,null))}for(q(),l=o.length;l<r.length;l+=1)s(l);j()}},i(c){if(!e){for(let a=0;a<o.length;a+=1)d(r[a]);e=!0}},o(c){r=r.filter(Boolean);for(let a=0;a<r.length;a+=1)m(r[a]);e=!1},d(c){c&&x(t),bn(r,c)}}}function sv(i,t,n){let e,o,r=N;i.$$.on_destroy.push(()=>r());let{chatModel:s}=t,c=[];return i.$$set=a=>{"chatModel"in a&&n(0,s=a.chatModel)},i.$$.update=()=>{if(1&i.$$.dirty&&(n(2,e=s.specialContextInputModel),r(),r=ie(e,a=>n(3,o=a))),8&i.$$.dirty){const a=o.recentActiveItems,l=[],u=a.filter($=>!Ui($)||(l.push($),!1));l.length>1?(u.push({id:"sourceFoldersGroup",label:"Repos",status:z1.active,sourceFolderGroup:l.sort(($,f)=>{const p=ms($.sourceFolder.folderRoot),_=ms(f.sourceFolder.folderRoot);return p.localeCompare(_)}),referenceCount:1}),n(1,c=u.reverse())):n(1,c=a.reverse())}},[s,c,e,o]}class av extends ut{constructor(t){super(),dt(this,t,sv,iv,lt,{chatModel:0})}}const cv=i=>({}),Cc=i=>({}),lv=i=>({}),Ac=i=>({});function uv(i){let t,n,e,o,r;const s=i[1].leftAlign,c=Yt(s,i,i[0],Ac),a=i[1].rightAlign,l=Yt(a,i,i[0],Cc);return{c(){t=L("div"),n=L("div"),c&&c.c(),e=H(),o=L("div"),l&&l.c(),A(n,"class","c-input-action-bar__left-align"),A(o,"class","c-input-action-bar__right-align"),A(t,"class","c-input-action-bar svelte-zhy9ha")},m(u,$){b(u,t,$),O(t,n),c&&c.m(n,null),O(t,e),O(t,o),l&&l.m(o,null),r=!0},p(u,[$]){c&&c.p&&(!r||1&$)&&Xt(c,s,u,u[0],r?Jt(s,u[0],$,lv):Zt(u[0]),Ac),l&&l.p&&(!r||1&$)&&Xt(l,a,u,u[0],r?Jt(a,u[0],$,cv):Zt(u[0]),Cc)},i(u){r||(d(c,u),d(l,u),r=!0)},o(u){m(c,u),m(l,u),r=!1},d(u){u&&x(t),c&&c.d(u),l&&l.d(u)}}}function dv(i,t,n){let{$$slots:e={},$$scope:o}=t;return i.$$set=r=>{"$$scope"in r&&n(0,o=r.$$scope)},[o,e]}const $v=i=>({}),Mc=i=>({closeDropdown:i[11]}),mv=i=>({}),kc=i=>({}),fv=i=>({}),Sc=i=>({}),pv=i=>({dropdownIconSize:1024&i[0],variant:2&i[0],color:4&i[0],disabled:16384&i[0],radius:8&i[0]}),Tc=i=>({dropdownButtonDataAttr:Sv,dropdownIconSize:i[10],variant:i[1],color:i[2],disabled:i[14],radius:i[3]}),gv=i=>({}),Ec=i=>({slot:"iconLeft"}),hv=i=>({size:1&i[0],variant:2&i[0],color:4&i[0],radius:8&i[0],disabled:32768&i[0],highContrast:16&i[0]}),Ic=i=>({mainButtonDataAttr:kv,size:i[0],variant:i[1],color:i[2],radius:i[3],disabled:i[15],highContrast:i[4]});function vv(i){let t;const n=i[26].default,e=Yt(n,i,i[37],null);return{c(){e&&e.c()},m(o,r){e&&e.m(o,r),t=!0},p(o,r){e&&e.p&&(!t||64&r[1])&&Xt(e,n,o,o[37],t?Jt(n,o[37],r,null):Zt(o[37]),null)},i(o){t||(d(e,o),t=!0)},o(o){m(e,o),t=!1},d(o){e&&e.d(o)}}}function wv(i){let t;const n=i[26].iconLeft,e=Yt(n,i,i[37],Ec);return{c(){e&&e.c()},m(o,r){e&&e.m(o,r),t=!0},p(o,r){e&&e.p&&(!t||64&r[1])&&Xt(e,n,o,o[37],t?Jt(n,o[37],r,gv):Zt(o[37]),Ec)},i(o){t||(d(e,o),t=!0)},o(o){m(e,o),t=!1},d(o){e&&e.d(o)}}}function Lc(i){let t,n,e;return n=new nm({props:{size:4,orientation:"vertical"}}),{c(){t=L("div"),v(n.$$.fragment),A(t,"class","c-split-button__separator svelte-1tmsqjt")},m(o,r){b(o,t,r),w(n,t,null),e=!0},i(o){e||(d(n.$$.fragment,o),e=!0)},o(o){m(n.$$.fragment,o),e=!1},d(o){o&&x(t),y(n)}}}function Rc(i){let t,n,e={onOpenChange:i[16],$$slots:{default:[Av]},$$scope:{ctx:i}};return t=new xt.Root({props:e}),i[36](t),{c(){v(t.$$.fragment)},m(o,r){w(t,o,r),n=!0},p(o,r){const s={};59278&r[0]|64&r[1]&&(s.$$scope={dirty:r,ctx:o}),t.$set(s)},i(o){n||(d(t.$$.fragment,o),n=!0)},o(o){m(t.$$.fragment,o),n=!1},d(o){i[36](null),y(t,o)}}}function yv(i){let t;const n=i[26]["custom-dropdown-icon"],e=Yt(n,i,i[37],kc);return{c(){e&&e.c()},m(o,r){e&&e.m(o,r),t=!0},p(o,r){e&&e.p&&(!t||64&r[1])&&Xt(e,n,o,o[37],t?Jt(n,o[37],r,mv):Zt(o[37]),kc)},i(o){t||(d(e,o),t=!0)},o(o){m(e,o),t=!1},d(o){e&&e.d(o)}}}function xv(i){let t,n;return t=new Uo({}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p:N,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function bv(i){let t;const n=i[26]["dropdown-icon"],e=Yt(n,i,i[37],Sc),o=e||function(r){let s,c,a,l;const u=[xv,yv],$=[];function f(p,_){return p[9]==="chevron"?0:1}return s=f(r),c=$[s]=u[s](r),{c(){c.c(),a=ft()},m(p,_){$[s].m(p,_),b(p,a,_),l=!0},p(p,_){let C=s;s=f(p),s===C?$[s].p(p,_):(q(),m($[C],1,1,()=>{$[C]=null}),j(),c=$[s],c?c.p(p,_):(c=$[s]=u[s](p),c.c()),d(c,1),c.m(a.parentNode,a))},i(p){l||(d(c),l=!0)},o(p){m(c),l=!1},d(p){p&&x(a),$[s].d(p)}}}(i);return{c(){o&&o.c()},m(r,s){o&&o.m(r,s),t=!0},p(r,s){e?e.p&&(!t||64&s[1])&&Xt(e,n,r,r[37],t?Jt(n,r[37],s,fv):Zt(r[37]),Sc):o&&o.p&&(!t||512&s[0]|64&s[1])&&o.p(r,t?s:[-1,-1])},i(r){t||(d(o,r),t=!0)},o(r){m(o,r),t=!1},d(r){o&&o.d(r)}}}function _v(i){let t;const n=i[26]["dropdown-trigger"],e=Yt(n,i,i[37],Tc),o=e||function(r){let s,c;return s=new fe({props:{size:r[10],variant:r[15]?"soft":r[1],color:r[2],disabled:r[14],radius:r[3],"data-split-button-dropdown":"true",$$slots:{default:[bv]},$$scope:{ctx:r}}}),{c(){v(s.$$.fragment)},m(a,l){w(s,a,l),c=!0},p(a,l){const u={};1024&l[0]&&(u.size=a[10]),32770&l[0]&&(u.variant=a[15]?"soft":a[1]),4&l[0]&&(u.color=a[2]),16384&l[0]&&(u.disabled=a[14]),8&l[0]&&(u.radius=a[3]),512&l[0]|64&l[1]&&(u.$$scope={dirty:l,ctx:a}),s.$set(u)},i(a){c||(d(s.$$.fragment,a),c=!0)},o(a){m(s.$$.fragment,a),c=!1},d(a){y(s,a)}}}(i);return{c(){o&&o.c()},m(r,s){o&&o.m(r,s),t=!0},p(r,s){e?e.p&&(!t||17422&s[0]|64&s[1])&&Xt(e,n,r,r[37],t?Jt(n,r[37],s,pv):Zt(r[37]),Tc):o&&o.p&&(!t||50702&s[0]|64&s[1])&&o.p(r,t?s:[-1,-1])},i(r){t||(d(o,r),t=!0)},o(r){m(o,r),t=!1},d(r){o&&o.d(r)}}}function Cv(i){let t,n,e,o;const r=i[26]["dropdown-content"],s=Yt(r,i,i[37],Mc);return{c(){t=L("div"),s&&s.c(),A(t,"class","c-split-button__dropdown-contents svelte-1tmsqjt")},m(c,a){b(c,t,a),s&&s.m(t,null),n=!0,e||(o=Dt(t,"click",i[19]),e=!0)},p(c,a){s&&s.p&&(!n||64&a[1])&&Xt(s,r,c,c[37],n?Jt(r,c[37],a,$v):Zt(c[37]),Mc)},i(c){n||(d(s,c),n=!0)},o(c){m(s,c),n=!1},d(c){c&&x(t),s&&s.d(c),e=!1,o()}}}function Av(i){let t,n,e,o;return t=new xt.Trigger({props:{$$slots:{default:[_v]},$$scope:{ctx:i}}}),e=new xt.Content({props:{size:i[13],side:i[7],align:i[8],onClickOutside:i[17],onEscapeKeyDown:i[18],$$slots:{default:[Cv]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment),n=H(),v(e.$$.fragment)},m(r,s){w(t,r,s),b(r,n,s),w(e,r,s),o=!0},p(r,s){const c={};50702&s[0]|64&s[1]&&(c.$$scope={dirty:s,ctx:r}),t.$set(c);const a={};8192&s[0]&&(a.size=r[13]),128&s[0]&&(a.side=r[7]),256&s[0]&&(a.align=r[8]),64&s[1]&&(a.$$scope={dirty:s,ctx:r}),e.$set(a)},i(r){o||(d(t.$$.fragment,r),d(e.$$.fragment,r),o=!0)},o(r){m(t.$$.fragment,r),m(e.$$.fragment,r),o=!1},d(r){r&&x(n),y(t,r),y(e,r)}}}function Mv(i){let t,n,e,o,r,s;const c=i[26].button,a=Yt(c,i,i[37],Ic),l=a||function(f){let p,_;const C=[{size:f[0]},{variant:f[1]},{color:f[2]},{radius:f[3]},{disabled:f[15]},{highContrast:f[4]},{"data-split-button-main":f[6]?"true":void 0},f[20]];let M={$$slots:{iconLeft:[wv],default:[vv]},$$scope:{ctx:f}};for(let T=0;T<C.length;T+=1)M=Et(M,C[T]);return p=new ve({props:M}),p.$on("click",f[27]),p.$on("keyup",f[28]),p.$on("keydown",f[29]),p.$on("mousedown",f[30]),p.$on("mouseover",f[31]),p.$on("focus",f[32]),p.$on("mouseleave",f[33]),p.$on("blur",f[34]),p.$on("contextmenu",f[35]),{c(){v(p.$$.fragment)},m(T,E){w(p,T,E),_=!0},p(T,E){const R=1081439&E[0]?De(C,[1&E[0]&&{size:T[0]},2&E[0]&&{variant:T[1]},4&E[0]&&{color:T[2]},8&E[0]&&{radius:T[3]},32768&E[0]&&{disabled:T[15]},16&E[0]&&{highContrast:T[4]},64&E[0]&&{"data-split-button-main":T[6]?"true":void 0},1048576&E[0]&&go(T[20])]):{};64&E[1]&&(R.$$scope={dirty:E,ctx:T}),p.$set(R)},i(T){_||(d(p.$$.fragment,T),_=!0)},o(T){m(p.$$.fragment,T),_=!1},d(T){y(p,T)}}}(i);let u=i[6]&&Lc(),$=i[6]&&Rc(i);return{c(){t=L("div"),n=L("div"),l&&l.c(),e=H(),u&&u.c(),o=H(),$&&$.c(),A(n,"class","c-split-button__main svelte-1tmsqjt"),A(t,"class",r="c-split-button c-split-button--size-"+i[0]+" "+i[5]+" svelte-1tmsqjt"),At(t,"c-split-button--has-dropdown",i[6])},m(f,p){b(f,t,p),O(t,n),l&&l.m(n,null),O(t,e),u&&u.m(t,null),O(t,o),$&&$.m(t,null),s=!0},p(f,p){a?a.p&&(!s||32799&p[0]|64&p[1])&&Xt(a,c,f,f[37],s?Jt(c,f[37],p,hv):Zt(f[37]),Ic):l&&l.p&&(!s||1081439&p[0]|64&p[1])&&l.p(f,s?p:[-1,-1]),f[6]?u?64&p[0]&&d(u,1):(u=Lc(),u.c(),d(u,1),u.m(t,o)):u&&(q(),m(u,1,1,()=>{u=null}),j()),f[6]?$?($.p(f,p),64&p[0]&&d($,1)):($=Rc(f),$.c(),d($,1),$.m(t,null)):$&&(q(),m($,1,1,()=>{$=null}),j()),(!s||33&p[0]&&r!==(r="c-split-button c-split-button--size-"+f[0]+" "+f[5]+" svelte-1tmsqjt"))&&A(t,"class",r),(!s||97&p[0])&&At(t,"c-split-button--has-dropdown",f[6])},i(f){s||(d(l,f),d(u),d($),s=!0)},o(f){m(l,f),m(u),m($),s=!1},d(f){f&&x(t),l&&l.d(f),u&&u.d(),$&&$.d()}}}const kv="data-split-button-main",Sv="data-split-button-dropdown";function Tv(i,t,n){let e,o,r;const s=["size","variant","color","radius","disabled","highContrast","class","showDropdown","dropdownSide","dropdownAlign","onDropdownOpenChange","onDropdownClickOutside","onDropdownEscapeKeyDown","dropdownIcon","dropdownIconSize","requestCloseDropdown","requestOpenDropdown"];let c,a=gr(t,s),{$$slots:l={},$$scope:u}=t,{size:$=2}=t,{variant:f="solid"}=t,{color:p="neutral"}=t,{radius:_="medium"}=t,{disabled:C={primaryDisabled:!1,dropdownDisabled:!1}}=t,{highContrast:M=!1}=t,{class:T=""}=t,{showDropdown:E=!0}=t,{dropdownSide:R="bottom"}=t,{dropdownAlign:P="end"}=t,{onDropdownOpenChange:J}=t,{onDropdownClickOutside:K}=t,{onDropdownEscapeKeyDown:et}=t,{dropdownIcon:U="chevron"}=t,{dropdownIconSize:G=$}=t;const nt=()=>c==null?void 0:c.requestClose();return i.$$set=X=>{t=Et(Et({},t),ae(X)),n(20,a=gr(t,s)),"size"in X&&n(0,$=X.size),"variant"in X&&n(1,f=X.variant),"color"in X&&n(2,p=X.color),"radius"in X&&n(3,_=X.radius),"disabled"in X&&n(21,C=X.disabled),"highContrast"in X&&n(4,M=X.highContrast),"class"in X&&n(5,T=X.class),"showDropdown"in X&&n(6,E=X.showDropdown),"dropdownSide"in X&&n(7,R=X.dropdownSide),"dropdownAlign"in X&&n(8,P=X.dropdownAlign),"onDropdownOpenChange"in X&&n(22,J=X.onDropdownOpenChange),"onDropdownClickOutside"in X&&n(23,K=X.onDropdownClickOutside),"onDropdownEscapeKeyDown"in X&&n(24,et=X.onDropdownEscapeKeyDown),"dropdownIcon"in X&&n(9,U=X.dropdownIcon),"dropdownIconSize"in X&&n(10,G=X.dropdownIconSize),"$$scope"in X&&n(37,u=X.$$scope)},i.$$.update=()=>{2097152&i.$$.dirty[0]&&n(15,e=typeof C=="boolean"?C:C.primaryDisabled),2097152&i.$$.dirty[0]&&n(14,o=typeof C=="boolean"?C:C.dropdownDisabled),1024&i.$$.dirty[0]&&n(13,r=G>2?2:G)},[$,f,p,_,M,T,E,R,P,U,G,nt,c,r,o,e,function(X){J&&J(X)},function(){K&&K()},function(){et&&et()},function(){nt()},a,C,J,K,et,()=>c==null?void 0:c.requestOpen(),l,function(X){wn.call(this,i,X)},function(X){wn.call(this,i,X)},function(X){wn.call(this,i,X)},function(X){wn.call(this,i,X)},function(X){wn.call(this,i,X)},function(X){wn.call(this,i,X)},function(X){wn.call(this,i,X)},function(X){wn.call(this,i,X)},function(X){wn.call(this,i,X)},function(X){Qt[X?"unshift":"push"](()=>{c=X,n(12,c)})},u]}const Im={Root:class extends ut{constructor(i){super(),dt(this,i,Tv,Mv,lt,{size:0,variant:1,color:2,radius:3,disabled:21,highContrast:4,class:5,showDropdown:6,dropdownSide:7,dropdownAlign:8,onDropdownOpenChange:22,onDropdownClickOutside:23,onDropdownEscapeKeyDown:24,dropdownIcon:9,dropdownIconSize:10,requestCloseDropdown:11,requestOpenDropdown:25},null,[-1,-1])}get requestCloseDropdown(){return this.$$.ctx[11]}get requestOpenDropdown(){return this.$$.ctx[25]}}};function Dc(i,t,n){const e=i.slice();e[21]=t[n];const o=e[2][e[21]];e[22]=o;const r=e[21]===e[11].currentConversationModel.selectedModelId;return e[23]=r,e}function Pc(i,t,n){const e=i.slice();e[26]=t[n];const o=e[26].id===e[5];return e[23]=o,e}function Ev(i){let t;const n=i[16].default,e=Yt(n,i,i[19],null);return{c(){e&&e.c()},m(o,r){e&&e.m(o,r),t=!0},p(o,r){e&&e.p&&(!t||524288&r)&&Xt(e,n,o,o[19],t?Jt(n,o[19],r,null):Zt(o[19]),null)},i(o){t||(d(e,o),t=!0)},o(o){m(e,o),t=!1},d(o){e&&e.d(o)}}}function Nc(i){let t,n,e,o=se(i[4]),r=[];for(let a=0;a<o.length;a+=1)r[a]=Fc(Pc(i,o,a));const s=a=>m(r[a],1,1,()=>{r[a]=null});let c=i[8]&&Oc();return{c(){for(let a=0;a<r.length;a+=1)r[a].c();t=H(),c&&c.c(),n=ft()},m(a,l){for(let u=0;u<r.length;u+=1)r[u]&&r[u].m(a,l);b(a,t,l),c&&c.m(a,l),b(a,n,l),e=!0},p(a,l){if(112&l){let u;for(o=se(a[4]),u=0;u<o.length;u+=1){const $=Pc(a,o,u);r[u]?(r[u].p($,l),d(r[u],1)):(r[u]=Fc($),r[u].c(),d(r[u],1),r[u].m(t.parentNode,t))}for(q(),u=o.length;u<r.length;u+=1)s(u);j()}a[8]?c?256&l&&d(c,1):(c=Oc(),c.c(),d(c,1),c.m(n.parentNode,n)):c&&(q(),m(c,1,1,()=>{c=null}),j())},i(a){if(!e){for(let l=0;l<o.length;l+=1)d(r[l]);d(c),e=!0}},o(a){r=r.filter(Boolean);for(let l=0;l<r.length;l+=1)m(r[l]);m(c),e=!1},d(a){a&&(x(t),x(n)),bn(r,a),c&&c.d(a)}}}function Iv(i){let t,n,e=i[26].label+"";return{c(){t=V(e),n=H()},m(o,r){b(o,t,r),b(o,n,r)},p(o,r){16&r&&e!==(e=o[26].label+"")&&bt(t,e)},d(o){o&&(x(t),x(n))}}}function Fc(i){let t,n;function e(){return i[17](i[26])}return t=new xt.Item({props:{highlight:i[23],onSelect:e,$$slots:{default:[Iv]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(o,r){w(t,o,r),n=!0},p(o,r){i=o;const s={};48&r&&(s.highlight=i[23]),80&r&&(s.onSelect=e),524304&r&&(s.$$scope={dirty:r,ctx:i}),t.$set(s)},i(o){n||(d(t.$$.fragment,o),n=!0)},o(o){m(t.$$.fragment,o),n=!1},d(o){y(t,o)}}}function Oc(i){let t,n;return t=new xt.Separator({}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function zc(i){let t,n,e,o;t=new xt.Label({props:{$$slots:{default:[Lv]},$$scope:{ctx:i}}});let r=se(Object.keys(i[2])),s=[];for(let a=0;a<r.length;a+=1)s[a]=Bc(Dc(i,r,a));const c=a=>m(s[a],1,1,()=>{s[a]=null});return{c(){v(t.$$.fragment),n=H();for(let a=0;a<s.length;a+=1)s[a].c();e=ft()},m(a,l){w(t,a,l),b(a,n,l);for(let u=0;u<s.length;u+=1)s[u]&&s[u].m(a,l);b(a,e,l),o=!0},p(a,l){const u={};if(524288&l&&(u.$$scope={dirty:l,ctx:a}),t.$set(u),2054&l){let $;for(r=se(Object.keys(a[2])),$=0;$<r.length;$+=1){const f=Dc(a,r,$);s[$]?(s[$].p(f,l),d(s[$],1)):(s[$]=Bc(f),s[$].c(),d(s[$],1),s[$].m(e.parentNode,e))}for(q(),$=r.length;$<s.length;$+=1)c($);j()}},i(a){if(!o){d(t.$$.fragment,a);for(let l=0;l<r.length;l+=1)d(s[l]);o=!0}},o(a){m(t.$$.fragment,a),s=s.filter(Boolean);for(let l=0;l<s.length;l+=1)m(s[l]);o=!1},d(a){a&&(x(n),x(e)),y(t,a),bn(s,a)}}}function Lv(i){let t;return{c(){t=V("Models")},m(n,e){b(n,t,e)},d(n){n&&x(t)}}}function Rv(i){let t,n,e=i[22]+"";return{c(){t=V(e),n=H()},m(o,r){b(o,t,r),b(o,n,r)},p(o,r){4&r&&e!==(e=o[22]+"")&&bt(t,e)},d(o){o&&(x(t),x(n))}}}function Bc(i){let t,n;function e(){return i[18](i[21])}return t=new xt.Item({props:{highlight:i[23],onSelect:e,$$slots:{default:[Rv]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(o,r){w(t,o,r),n=!0},p(o,r){i=o;const s={};4&r&&(s.highlight=i[23]),6&r&&(s.onSelect=e),524292&r&&(s.$$scope={dirty:r,ctx:i}),t.$set(s)},i(o){n||(d(t.$$.fragment,o),n=!0)},o(o){m(t.$$.fragment,o),n=!1},d(o){y(t,o)}}}function Dv(i){let t,n,e,o=i[7]&&Nc(i),r=i[8]&&zc(i);return{c(){o&&o.c(),t=H(),r&&r.c(),n=ft()},m(s,c){o&&o.m(s,c),b(s,t,c),r&&r.m(s,c),b(s,n,c),e=!0},p(s,c){s[7]?o?(o.p(s,c),128&c&&d(o,1)):(o=Nc(s),o.c(),d(o,1),o.m(t.parentNode,t)):o&&(q(),m(o,1,1,()=>{o=null}),j()),s[8]?r?(r.p(s,c),256&c&&d(r,1)):(r=zc(s),r.c(),d(r,1),r.m(n.parentNode,n)):r&&(q(),m(r,1,1,()=>{r=null}),j())},i(s){e||(d(o),d(r),e=!0)},o(s){m(o),m(r),e=!1},d(s){s&&(x(t),x(n)),o&&o.d(s),r&&r.d(s)}}}function Pv(i){let t,n;return t=new Im.Root({props:{size:1,variant:"solid",color:i[9]?"neutral":"accent",disabled:i[0],showDropdown:i[10],dropdownSide:"top",dropdownAlign:"end",$$slots:{"dropdown-content":[Dv],default:[Ev]},$$scope:{ctx:i}}}),t.$on("click",function(){ze(i[3])&&i[3].apply(this,arguments)}),t.$on("keyup",function(){ze(vo("Enter",i[3]))&&vo("Enter",i[3]).apply(this,arguments)}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,[o]){i=e;const r={};512&o&&(r.color=i[9]?"neutral":"accent"),1&o&&(r.disabled=i[0]),1024&o&&(r.showDropdown=i[10]),524790&o&&(r.$$scope={dirty:o,ctx:i}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function Nv(i,t,n){let e,o,r,s,c,a,{$$slots:l={},$$scope:u}=t,{disabled:$=!1}=t,{onSelectModel:f}=t,{modelIdToDisplayName:p}=t,{onSend:_}=t,{modeOptions:C=[]}=t,{currentMode:M}=t,{onSelectMode:T}=t;const E=kt("chatModel");if(!E)throw new Error("ChatModel not found in context");const R=kt(Rn.key);Tt(i,R,K=>n(14,c=K));const P=kt(ho.key),{canShowTaskList:J}=P;return Tt(i,J,K=>n(15,a=K)),i.$$set=K=>{"disabled"in K&&n(0,$=K.disabled),"onSelectModel"in K&&n(1,f=K.onSelectModel),"modelIdToDisplayName"in K&&n(2,p=K.modelIdToDisplayName),"onSend"in K&&n(3,_=K.onSend),"modeOptions"in K&&n(4,C=K.modeOptions),"currentMode"in K&&n(5,M=K.currentMode),"onSelectMode"in K&&n(6,T=K.onSelectMode),"$$scope"in K&&n(19,u=K.$$scope)},i.$$.update=()=>{4&i.$$.dirty&&n(8,e=Object.keys(p).length>1),16&i.$$.dirty&&n(7,o=C.length>1),49536&i.$$.dirty&&n(10,r=e||a&&o&&!(c!=null&&c.isActive)),1&i.$$.dirty&&n(9,s=typeof $=="boolean"?$:$.primaryDisabled)},[$,f,p,_,C,M,T,o,e,s,r,E,R,J,c,a,l,K=>{T(K.id)},K=>{f(K)},u]}class Fv extends ut{constructor(t){super(),dt(this,t,Nv,Pv,lt,{disabled:0,onSelectModel:1,modelIdToDisplayName:2,onSend:3,modeOptions:4,currentMode:5,onSelectMode:6})}}function Ov(i){let t,n,e;var o=i[7];return o&&(t=sn(o,{})),{c(){t&&v(t.$$.fragment),n=ft()},m(r,s){t&&w(t,r,s),b(r,n,s),e=!0},p(r,s){if(128&s&&o!==(o=r[7])){if(t){q();const c=t;m(c.$$.fragment,1,0,()=>{y(c,1)}),j()}o?(t=sn(o,{}),v(t.$$.fragment),d(t.$$.fragment,1),w(t,n.parentNode,n)):t=null}},i(r){e||(t&&d(t.$$.fragment,r),e=!0)},o(r){t&&m(t.$$.fragment,r),e=!1},d(r){r&&x(n),t&&y(t,r)}}}function zv(i){let t,n;return t=new zt({props:{content:i[6],triggerOn:[te.Hover],side:"top",delayDurationMs:500,offset:[0,Hv],$$slots:{default:[Ov]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};64&o&&(r.content=e[6]),1048704&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function Bv(i){let t,n;return t=new Fv({props:{disabled:{primaryDisabled:i[1],dropdownDisabled:!1},onSelectModel:i[18],onSend:i[0],modelIdToDisplayName:i[3],modeOptions:i[4],currentMode:i[2],onSelectMode:i[12],$$slots:{default:[zv]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,[o]){const r={};2&o&&(r.disabled={primaryDisabled:e[1],dropdownDisabled:!1}),1024&o&&(r.onSelectModel=e[18]),1&o&&(r.onSend=e[0]),8&o&&(r.modelIdToDisplayName=e[3]),16&o&&(r.modeOptions=e[4]),4&o&&(r.currentMode=e[2]),1048768&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}const Hv=10;function Uv(i,t,n){let e,o,r,s,c,a,l,u,$,f,p,_,C=N,M=N,T=N;i.$$.on_destroy.push(()=>C()),i.$$.on_destroy.push(()=>M()),i.$$.on_destroy.push(()=>T());const E=kt("chatModel");Tt(i,E,U=>n(15,$=U));const R=kt("agentConversationModel");if(!E)throw new Error("ChatModel not found in context");if(!R)throw new Error("AgentConversationModel not found in context");let{primaryAction:P}=t,{isDisabled:J=!1}=t,{disabledReason:K=""}=t,et={};return i.$$set=U=>{"primaryAction"in U&&n(0,P=U.primaryAction),"isDisabled"in U&&n(1,J=U.isDisabled),"disabledReason"in U&&n(13,K=U.disabledReason)},i.$$.update=()=>{32768&i.$$.dirty&&n(10,e=$.currentConversationModel),32768&i.$$.dirty&&(n(9,o=$.flags),M(),M=ie(o,U=>n(16,p=U))),32768&i.$$.dirty&&(n(8,r=$.sendModeModel.mode),C(),C=ie(r,U=>n(2,f=U))),4&i.$$.dirty&&n(14,s=Sa.find(U=>U.id===f)),212992&i.$$.dirty&&n(7,c=_&&p.enableTaskList&&(s==null?void 0:s.icon)||zf),221186&i.$$.dirty&&n(6,a=J?K:_&&p.enableTaskList?(s==null?void 0:s.label)||"Send to Agent":"Send message"),196608&i.$$.dirty&&n(4,u=_&&p.enableTaskList?Sa:[]),229380&i.$$.dirty&&(_&&p.enableTaskList||f!==Mi.addTask||($.sendModeModel.setMode(Mi.send),$.saveImmediate())),32768&i.$$.dirty&&n(3,et=Object.fromEntries(Object.entries($.flags.modelDisplayNameToId).map(([U,G])=>[G,U])))},n(5,l=R.isCurrConversationAgentic),T(),T=ie(l,U=>n(17,_=U)),[P,J,f,et,u,l,a,c,r,o,e,E,function(U){$.sendModeModel.setMode(U),$.saveImmediate()},K,s,$,p,_,U=>e.setSelectedModelId(U)]}const Oo=class Oo{constructor(t,n){$t(this,"_disposers",[]);$t(this,"_allMentionables",Re([]));$t(this,"_breadcrumbIds",Re([]));$t(this,"_userQuery",Re(""));$t(this,"_active",Re(!1));$t(this,"_allGroups",Hn([this._active,this._allMentionables],([t,n])=>t?tf(n):[]));$t(this,"_currentGroup",Hn([this._breadcrumbIds,this._allGroups],([t,n])=>{if(t.length===0)return;const e=t[t.length-1];return n.find(o=>zr(o)&&o.id===e)}));$t(this,"dispose",()=>{for(const t of this._disposers)t()});$t(this,"openDropdown",()=>{this._active.set(!0)});$t(this,"closeDropdown",()=>{this._active.set(!1),this._resetState()});$t(this,"toggleDropdown",()=>re(this._active)?(this.closeDropdown(),!1):(this.openDropdown(),!0));$t(this,"pushBreadcrumb",t=>{re(this._active)&&this._breadcrumbIds.update(n=>[...n,t.id])});$t(this,"popBreadcrumb",()=>{re(this._active)&&this._breadcrumbIds.update(t=>t.slice(0,-1))});$t(this,"selectMentionable",t=>{var o;const n=this._chatModel.extensionClient,e=this._chatModel.specialContextInputModel;return zr(t)&&t.type==="breadcrumb"?(this.pushBreadcrumb(t),!0):t.type==="breadcrumb-back"?(this.popBreadcrumb(),!0):W$(t)?(e.markAllActive(),this.closeDropdown(),n.reportWebviewClientEvent(nr.chatRestoreDefaultContext),!0):t.clearContext?(e.markAllInactive(),this.closeDropdown(),n.reportWebviewClientEvent(nr.chatClearContext),!0):t.userGuidelines?(n.openSettingsPage("guidelines"),this.closeDropdown(),!0):((o=this._insertMentionNode)==null||o.call(this,t),this.closeDropdown(),!0)});$t(this,"_displayItems",Hn([this._active,this._breadcrumbIds,this._userQuery,this._currentGroup,this.allGroups],([t,n,e,o,r])=>{if(!t)return[];if(n.length>0&&o)return[{...o,type:"breadcrumb-back"},...o.group.items.slice(0,Oo.SINGLE_GROUP_MAX_ITEMS).map(s=>({...s,type:"item"}))];if(e.length>0){const s=qv(re(this._userQuery)).map(c=>({...c,type:"item"}));return r.flatMap(c=>[{...c,type:"breadcrumb"},...c.group.items.slice(0,Oo.MULTI_GROUP_MAX_ITEMS).map(a=>({...a,type:"item"}))]).concat(s)}return[{...V$,type:"item"},...r.map(s=>({...s,type:"breadcrumb"})),{...G$,type:"item"},{...K$,type:"item"}]}));$t(this,"_refreshSeqNum",0);$t(this,"_refreshMentionables",ef.throttle(async()=>{if(!re(this._active))return;this._refreshSeqNum++;const t=this._refreshSeqNum,n=this._chatModel.currentConversationModel&&pn(this._chatModel.currentConversationModel),e=re(this._userQuery),o=await this._chatModel.extensionClient.getSuggestions(e,n);t===this._refreshSeqNum&&this._allMentionables.set(Lm({query:e,mentionables:o}))},Oo.REFRESH_THROTTLE_MS,{leading:!0,trailing:!0}));this._chatModel=t,this._insertMentionNode=n,this._disposers.push(this._userQuery.subscribe(this._refreshMentionables)),this._disposers.push(this._active.subscribe(this._refreshMentionables))}get allGroups(){return this._allGroups}get currentGroup(){return this._currentGroup}get breadcrumbIds(){return this._breadcrumbIds}get displayItems(){return this._displayItems}get active(){return this._active}get userQuery(){return this._userQuery}_resetState(){this._breadcrumbIds.set([]),this._userQuery.set("")}};$t(Oo,"REFRESH_THROTTLE_MS",600),$t(Oo,"SINGLE_GROUP_MAX_ITEMS",12),$t(Oo,"MULTI_GROUP_MAX_ITEMS",6);let Ei=Oo;const Lm=({query:i,mentionables:t,returnAllIfNoResults:n=!0,threshold:e=1})=>{if(i.length<=1)return t;const o=new dr(t,{keys:["label"],threshold:e,minMatchCharLength:0,ignoreLocation:!0,includeScore:!0,useExtendedSearch:!1,shouldSort:!0,findAllMatches:!0}).search(i);return o.length===0&&n?t:o.map(r=>r.item)},qv=i=>Lm({query:i,mentionables:[V$,G$,K$],returnAllIfNoResults:!1,threshold:.6});function jv(i){let t,n,e,o=i[0].label+"";return{c(){t=L("span"),n=L("span"),e=V(o),A(n,"class","c-mentionable-group-label__text right"),A(t,"class","c-mentionable-group-label")},m(r,s){b(r,t,s),O(t,n),O(n,e)},p(r,s){1&s&&o!==(o=r[0].label+"")&&bt(e,o)},i:N,o:N,d(r){r&&x(t)}}}function Wv(i){let t,n;return t=new Df({props:{$$slots:{text:[e4],leftIcon:[t4]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};17&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function Vv(i){let t,n=i[0].label+"";return{c(){t=V(n)},m(e,o){b(e,t,o)},p(e,o){1&o&&n!==(n=e[0].label+"")&&bt(t,n)},i:N,o:N,d(e){e&&x(t)}}}function Gv(i){let t,n;return t=new kn({props:{filepath:i[0].rule.path,$$slots:{leftIcon:[n4]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};1&o&&(r.filepath=e[0].rule.path),16&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function Kv(i){let t,n;return t=new kn({props:{filepath:i[0].recentFile.pathName,$$slots:{leftIcon:[o4]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};1&o&&(r.filepath=e[0].recentFile.pathName),16&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function Yv(i){let t,n;return t=new kn({props:{filepath:i[0].selection.pathName,$$slots:{leftIcon:[r4]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};1&o&&(r.filepath=e[0].selection.pathName),16&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function Xv(i){let t,n;return t=new kn({props:{filepath:i[0].sourceFolder.folderRoot,$$slots:{leftIcon:[i4]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};1&o&&(r.filepath=e[0].sourceFolder.folderRoot),16&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function Zv(i){let t,n;return t=new kn({props:{filepath:i[0].externalSource.name,$$slots:{leftIcon:[s4]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};1&o&&(r.filepath=e[0].externalSource.name),16&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function Jv(i){let t,n;return t=new kn({props:{filepath:i[0].folder.pathName,$$slots:{leftIcon:[a4]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};1&o&&(r.filepath=e[0].folder.pathName),16&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function Qv(i){let t,n;return t=new kn({props:{filepath:i[0].file.pathName,$$slots:{leftIcon:[c4]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};1&o&&(r.filepath=e[0].file.pathName),16&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function t4(i){let t,n,e;var o=Ti(i[0].personality.type);return o&&(n=sn(o,{})),{c(){t=L("span"),n&&v(n.$$.fragment),A(t,"slot","leftIcon"),A(t,"class","c-context-menu-item__icon svelte-1a2w9oo")},m(r,s){b(r,t,s),n&&w(n,t,null),e=!0},p(r,s){if(1&s&&o!==(o=Ti(r[0].personality.type))){if(n){q();const c=n;m(c.$$.fragment,1,0,()=>{y(c,1)}),j()}o?(n=sn(o,{}),v(n.$$.fragment),d(n.$$.fragment,1),w(n,t,null)):n=null}},i(r){e||(n&&d(n.$$.fragment,r),e=!0)},o(r){n&&m(n.$$.fragment,r),e=!1},d(r){r&&x(t),n&&y(n)}}}function e4(i){let t,n,e=i[0].label+"";return{c(){t=L("span"),n=V(e),A(t,"slot","text")},m(o,r){b(o,t,r),O(t,n)},p(o,r){1&r&&e!==(e=o[0].label+"")&&bt(n,e)},d(o){o&&x(t)}}}function n4(i){let t,n;return t=new Fs({props:{slot:"leftIcon",iconName:"rule"}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p:N,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function o4(i){let t,n;return t=new qo({props:{slot:"leftIcon",iconName:"description"}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p:N,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function r4(i){let t,n;return t=new qo({props:{slot:"leftIcon",iconName:"text_select_start"}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p:N,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function i4(i){let t,n;return t=new qo({props:{slot:"leftIcon",iconName:"folder_managed"}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p:N,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function s4(i){let t,n;return t=new qo({props:{slot:"leftIcon",iconName:"import_contacts"}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p:N,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function a4(i){let t,n;return t=new qo({props:{slot:"leftIcon",iconName:"folder_open"}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p:N,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function c4(i){let t,n;return t=new qo({props:{slot:"leftIcon",iconName:"description"}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p:N,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function l4(i){let t,n,e,o,r,s,c,a,l,u,$,f,p,_;const C=[Qv,Jv,Zv,Xv,Yv,Kv,Gv,Vv,Wv,jv],M=[];function T(E,R){return 1&R&&(t=null),1&R&&(n=null),1&R&&(e=null),1&R&&(o=null),1&R&&(r=null),1&R&&(s=null),1&R&&(c=null),1&R&&(a=null),1&R&&(l=null),1&R&&(u=null),t==null&&(t=!!ks(E[0])),t?0:(n==null&&(n=!!Ts(E[0])),n?1:(e==null&&(e=!!Es(E[0])),e?2:(o==null&&(o=!!Ui(E[0])),o?3:(r==null&&(r=!!Ls(E[0])),r?4:(s==null&&(s=!!Ss(E[0])),s?5:(c==null&&(c=!!Rs(E[0])),c?6:(a==null&&(a=!!zr(E[0])),a?7:(l==null&&(l=!!U$(E[0])),l?8:(u==null&&(u=!!(W$(E[0])||nf(E[0])||Is(E[0]))),u?9:-1)))))))))}return~($=T(i,-1))&&(f=M[$]=C[$](i)),{c(){f&&f.c(),p=ft()},m(E,R){~$&&M[$].m(E,R),b(E,p,R),_=!0},p(E,R){let P=$;$=T(E,R),$===P?~$&&M[$].p(E,R):(f&&(q(),m(M[P],1,1,()=>{M[P]=null}),j()),~$?(f=M[$],f?f.p(E,R):(f=M[$]=C[$](E),f.c()),d(f,1),f.m(p.parentNode,p)):f=null)},i(E){_||(d(f),_=!0)},o(E){m(f),_=!1},d(E){E&&x(p),~$&&M[$].d(E)}}}function u4(i){let t,n,e;var o=i[3];function r(s,c){return{props:{highlight:s[2],onSelect:s[1],$$slots:{default:[l4]},$$scope:{ctx:s}}}}return o&&(t=sn(o,r(i))),{c(){t&&v(t.$$.fragment),n=ft()},m(s,c){t&&w(t,s,c),b(s,n,c),e=!0},p(s,[c]){if(8&c&&o!==(o=s[3])){if(t){q();const a=t;m(a.$$.fragment,1,0,()=>{y(a,1)}),j()}o?(t=sn(o,r(s)),v(t.$$.fragment),d(t.$$.fragment,1),w(t,n.parentNode,n)):t=null}else if(o){const a={};4&c&&(a.highlight=s[2]),2&c&&(a.onSelect=s[1]),17&c&&(a.$$scope={dirty:c,ctx:s}),t.$set(a)}},i(s){e||(t&&d(t.$$.fragment,s),e=!0)},o(s){t&&m(t.$$.fragment,s),e=!1},d(s){s&&x(n),t&&y(t,s)}}}function d4(i,t,n){let e,{item:o}=t,{onSelect:r}=t,{highlight:s}=t;return i.$$set=c=>{"item"in c&&n(0,o=c.item),"onSelect"in c&&n(1,r=c.onSelect),"highlight"in c&&n(2,s=c.highlight)},i.$$.update=()=>{1&i.$$.dirty&&(o.type==="breadcrumb-back"?n(3,e=xt.BreadcrumbBackItem):o.type==="breadcrumb"&&zr(o)?n(3,e=xt.BreadcrumbItem):o.type!=="item"||zr(o)||n(3,e=xt.Item))},[o,r,s,e]}class Rm extends ut{constructor(t){super(),dt(this,t,d4,u4,lt,{item:0,onSelect:1,highlight:2})}}function $4(i){let t,n,e=[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 512 512"},i[0]],o={};for(let r=0;r<e.length;r+=1)o=Et(o,e[r]);return{c(){t=oe("svg"),n=new ln(!0),this.h()},l(r){t=un(r,"svg",{xmlns:!0,"data-ds-icon":!0,viewBox:!0});var s=dn(t);n=$n(s,!0),s.forEach(x),this.h()},h(){n.a=null,ue(t,o)},m(r,s){mn(r,t,s),n.m('<!--! Font Awesome Pro 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2024 Fonticons, Inc.--><path d="M256 48C141.1 48 48 141.1 48 256s93.1 208 208 208c13.3 0 24 10.7 24 24s-10.7 24-24 24C114.6 512 0 397.4 0 256S114.6 0 256 0s256 114.6 256 256v28c0 50.8-41.2 92-92 92-31.1 0-58.7-15.5-75.3-39.2-22 24.1-53.6 39.2-88.7 39.2-66.3 0-120-53.7-120-120s53.7-120 120-120c28.8 0 55.2 10.1 75.8 27 4.3-6.6 11.7-11 20.2-11 13.3 0 24 10.7 24 24v108c0 24.3 19.7 44 44 44s44-19.7 44-44v-28c0-114.9-93.1-208-208-208m72 208a72 72 0 1 0-144 0 72 72 0 1 0 144 0"/>',t)},p(r,[s]){ue(t,o=De(e,[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 512 512"},1&s&&r[0]]))},i:N,o:N,d(r){r&&x(t)}}}function m4(i,t,n){return i.$$set=e=>{n(0,t=Et(Et({},t),ae(e)))},[t=ae(t)]}class f4 extends ut{constructor(t){super(),dt(this,t,m4,$4,lt,{})}}function p4(i){let t,n;const e=i[1].default,o=Yt(e,i,i[0],null);return{c(){t=L("span"),o&&o.c(),A(t,"class","c-input-action-bar-command svelte-7hv65t")},m(r,s){b(r,t,s),o&&o.m(t,null),n=!0},p(r,[s]){o&&o.p&&(!n||1&s)&&Xt(o,e,r,r[0],n?Jt(e,r[0],s,null):Zt(r[0]),null)},i(r){n||(d(o,r),n=!0)},o(r){m(o,r),n=!1},d(r){r&&x(t),o&&o.d(r)}}}function g4(i,t,n){let{$$slots:e={},$$scope:o}=t;return i.$$set=r=>{"$$scope"in r&&n(0,o=r.$$scope)},[o,e]}class ji extends ut{constructor(t){super(),dt(this,t,g4,p4,lt,{})}}function Hc(i,t,n){const e=i.slice();return e[21]=t[n],e}function h4(i){let t,n;return t=new f4({}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function v4(i){let t,n;return t=new fe({props:{size:1,variant:"ghost-block",color:"neutral",$$slots:{default:[h4]},$$scope:{ctx:i}}}),t.$on("click",i[2]),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};16777216&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function w4(i){let t,n;return t=new ji({props:{$$slots:{default:[v4]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};16777216&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function Uc(i){let t,n;function e(){return i[15](i[21])}return t=new Rm({props:{item:i[21],onSelect:e}}),{c(){v(t.$$.fragment)},m(o,r){w(t,o,r),n=!0},p(o,r){i=o;const s={};32&r&&(s.item=i[21]),32&r&&(s.onSelect=e),t.$set(s)},i(o){n||(d(t.$$.fragment,o),n=!0)},o(o){m(t.$$.fragment,o),n=!1},d(o){y(t,o)}}}function qc(i){let t,n;return t=new xt.Label({props:{$$slots:{default:[y4]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function y4(i){let t;return{c(){t=V("No results found")},m(n,e){b(n,t,e)},d(n){n&&x(t)}}}function x4(i){let t,n,e,o,r,s,c,a,l=se(i[5]),u=[];for(let C=0;C<l.length;C+=1)u[C]=Uc(Hc(i,l,C));const $=C=>m(u[C],1,1,()=>{u[C]=null});let f=i[6].length>0&&i[5].length===0&&qc(i);function p(C){i[16](C)}o=new xt.Separator({});let _={placeholder:"Focus context"};return i[6]!==void 0&&(_.value=i[6]),s=new xt.TextFieldItem({props:_}),Qt.push(()=>Ne(s,"value",p)),{c(){t=L("div");for(let C=0;C<u.length;C+=1)u[C].c();n=H(),f&&f.c(),e=H(),v(o.$$.fragment),r=H(),v(s.$$.fragment),A(t,"class","c-context-menu__items svelte-j63we7")},m(C,M){b(C,t,M);for(let T=0;T<u.length;T+=1)u[T]&&u[T].m(t,null);b(C,n,M),f&&f.m(C,M),b(C,e,M),w(o,C,M),b(C,r,M),w(s,C,M),a=!0},p(C,M){if(800&M){let E;for(l=se(C[5]),E=0;E<l.length;E+=1){const R=Hc(C,l,E);u[E]?(u[E].p(R,M),d(u[E],1)):(u[E]=Uc(R),u[E].c(),d(u[E],1),u[E].m(t,null))}for(q(),E=l.length;E<u.length;E+=1)$(E);j()}C[6].length>0&&C[5].length===0?f?96&M&&d(f,1):(f=qc(C),f.c(),d(f,1),f.m(e.parentNode,e)):f&&(q(),m(f,1,1,()=>{f=null}),j());const T={};!c&&64&M&&(c=!0,T.value=C[6],Be(()=>c=!1)),s.$set(T)},i(C){if(!a){for(let M=0;M<l.length;M+=1)d(u[M]);d(f),d(o.$$.fragment,C),d(s.$$.fragment,C),a=!0}},o(C){u=u.filter(Boolean);for(let M=0;M<u.length;M+=1)m(u[M]);m(f),m(o.$$.fragment,C),m(s.$$.fragment,C),a=!1},d(C){C&&(x(t),x(n),x(e),x(r)),bn(u,C),f&&f.d(C),y(o,C),y(s,C)}}}function b4(i){let t,n,e,o;return t=new xt.Trigger({props:{$$slots:{default:[w4]},$$scope:{ctx:i}}}),e=new xt.Content({props:{size:1,side:"top",align:"start",onClickOutside:i[1],onEscapeKeyDown:i[1],onRequestClose:i[1],$$slots:{default:[x4]},$$scope:{ctx:i}}}),e.$on("keydown",i[7]),{c(){v(t.$$.fragment),n=H(),v(e.$$.fragment)},m(r,s){w(t,r,s),b(r,n,s),w(e,r,s),o=!0},p(r,s){const c={};16777216&s&&(c.$$scope={dirty:s,ctx:r}),t.$set(c);const a={};16777312&s&&(a.$$scope={dirty:s,ctx:r}),e.$set(a)},i(r){o||(d(t.$$.fragment,r),d(e.$$.fragment,r),o=!0)},o(r){m(t.$$.fragment,r),m(e.$$.fragment,r),o=!1},d(r){r&&x(n),y(t,r),y(e,r)}}}function _4(i){let t,n,e={open:i[4],onOpenChange:i[17],nested:!1,$$slots:{default:[b4]},$$scope:{ctx:i}};return t=new xt.Root({props:e}),i[18](t),{c(){v(t.$$.fragment)},m(o,r){w(t,o,r),n=!0},p(o,[r]){const s={};16&r&&(s.open=o[4]),1&r&&(s.onOpenChange=o[17]),16777312&r&&(s.$$scope={dirty:r,ctx:o}),t.$set(s)},i(o){n||(d(t.$$.fragment,o),n=!0)},o(o){m(t.$$.fragment,o),n=!1},d(o){i[18](null),y(t,o)}}}function C4(i,t,n){let e,o,r,s,{onCloseDropdown:c=()=>{}}=t,{onInsertMentionable:a}=t;const l=kt("chatModel");if(!l)throw new Error("ChatModel not found in context");const u=()=>{s==null||s.focusIdx(-1)},$=()=>{s==null||s.focusIdx(0)},f=new Ei(l,M=>!!a&&a(M)),{displayItems:p,active:_,userQuery:C}=f;return Tt(i,p,M=>n(5,o=M)),Tt(i,_,M=>n(4,e=M)),Tt(i,C,M=>n(6,r=M)),qr(f.dispose),i.$$set=M=>{"onCloseDropdown"in M&&n(0,c=M.onCloseDropdown),"onInsertMentionable"in M&&n(13,a=M.onInsertMentionable)},[c,async()=>{f.closeDropdown()},async()=>{f.toggleDropdown()&&(await zo(),u())},s,e,o,r,async M=>{switch(M.key){case"ArrowLeft":M.preventDefault(),f.popBreadcrumb(),await zo(),s==null||s.focusIdx(0);break;case"ArrowRight":case"ArrowDown":case"ArrowUp":case"Enter":break;default:M.defaultPrevented||u()}},$,f,p,_,C,a,async()=>{f.openDropdown(),await zo(),u()},async M=>{f.selectMentionable(M),await zo(),$()},function(M){r=M,C.set(r)},M=>{M||c()},function(M){Qt[M?"unshift":"push"](()=>{s=M,n(3,s)})}]}function A4(i){let t,n,e=[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 320 512"},i[0]],o={};for(let r=0;r<e.length;r+=1)o=Et(o,e[r]);return{c(){t=oe("svg"),n=new ln(!0),this.h()},l(r){t=un(r,"svg",{xmlns:!0,"data-ds-icon":!0,viewBox:!0});var s=dn(t);n=$n(s,!0),s.forEach(x),this.h()},h(){n.a=null,ue(t,o)},m(r,s){mn(r,t,s),n.m('<!--! Font Awesome Pro 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2024 Fonticons, Inc.--><path d="M308.1 3.3c11.4 6.7 15.3 21.4 8.6 32.8l-272 464c-6.7 11.4-21.4 15.3-32.8 8.6s-15.3-21.4-8.6-32.8l272-464C282 .4 296.7-3.4 308.1 3.3"/>',t)},p(r,[s]){ue(t,o=De(e,[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 320 512"},1&s&&r[0]]))},i:N,o:N,d(r){r&&x(t)}}}function M4(i,t,n){return i.$$set=e=>{n(0,t=Et(Et({},t),ae(e)))},[t=ae(t)]}class k4 extends ut{constructor(t){super(),dt(this,t,M4,A4,lt,{})}}function jc(i,t,n){const e=i.slice();return e[17]=t[n],e}function S4(i){let t,n;return t=new k4({}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function T4(i){let t,n;return t=new fe({props:{size:1,variant:"ghost-block",color:"neutral",$$slots:{default:[S4]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};1048576&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function E4(i){let t,n;return t=new ji({props:{$$slots:{default:[T4]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};1048576&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function I4(i){let t,n,e,o=i[17].label+"";return{c(){t=V("/"),n=V(o),e=H()},m(r,s){b(r,t,s),b(r,n,s),b(r,e,s)},p(r,s){4&s&&o!==(o=r[17].label+"")&&bt(n,o)},d(r){r&&(x(t),x(n),x(e))}}}function Wc(i){let t,n;function e(){return i[10](i[17])}return t=new xt.Item({props:{onSelect:e,$$slots:{default:[I4]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(o,r){w(t,o,r),n=!0},p(o,r){i=o;const s={};4&r&&(s.onSelect=e),1048580&r&&(s.$$scope={dirty:r,ctx:i}),t.$set(s)},i(o){n||(d(t.$$.fragment,o),n=!0)},o(o){m(t.$$.fragment,o),n=!1},d(o){y(t,o)}}}function L4(i){let t,n,e,o,r,s,c,a=se(i[2]),l=[];for(let p=0;p<a.length;p+=1)l[p]=Wc(jc(i,a,p));const u=p=>m(l[p],1,1,()=>{l[p]=null});function $(p){i[11](p)}e=new xt.Separator({});let f={placeholder:"Run an action"};return i[0]!==void 0&&(f.value=i[0]),r=new xt.TextFieldItem({props:f}),Qt.push(()=>Ne(r,"value",$)),{c(){t=L("div");for(let p=0;p<l.length;p+=1)l[p].c();n=H(),v(e.$$.fragment),o=H(),v(r.$$.fragment),A(t,"class","c-actions-menu__items svelte-1n1budr")},m(p,_){b(p,t,_);for(let C=0;C<l.length;C+=1)l[C]&&l[C].m(t,null);b(p,n,_),w(e,p,_),b(p,o,_),w(r,p,_),c=!0},p(p,_){if(132&_){let M;for(a=se(p[2]),M=0;M<a.length;M+=1){const T=jc(p,a,M);l[M]?(l[M].p(T,_),d(l[M],1)):(l[M]=Wc(T),l[M].c(),d(l[M],1),l[M].m(t,null))}for(q(),M=a.length;M<l.length;M+=1)u(M);j()}const C={};!s&&1&_&&(s=!0,C.value=p[0],Be(()=>s=!1)),r.$set(C)},i(p){if(!c){for(let _=0;_<a.length;_+=1)d(l[_]);d(e.$$.fragment,p),d(r.$$.fragment,p),c=!0}},o(p){l=l.filter(Boolean);for(let _=0;_<l.length;_+=1)m(l[_]);m(e.$$.fragment,p),m(r.$$.fragment,p),c=!1},d(p){p&&(x(t),x(n),x(o)),bn(l,p),y(e,p),y(r,p)}}}function R4(i){let t,n,e,o;return t=new xt.Trigger({props:{$$slots:{default:[E4]},$$scope:{ctx:i}}}),e=new xt.Content({props:{size:1,side:"top",align:"start",$$slots:{default:[L4]},$$scope:{ctx:i}}}),e.$on("keydown",i[6]),{c(){v(t.$$.fragment),n=H(),v(e.$$.fragment)},m(r,s){w(t,r,s),b(r,n,s),w(e,r,s),o=!0},p(r,s){const c={};1048576&s&&(c.$$scope={dirty:s,ctx:r}),t.$set(c);const a={};1048581&s&&(a.$$scope={dirty:s,ctx:r}),e.$set(a)},i(r){o||(d(t.$$.fragment,r),d(e.$$.fragment,r),o=!0)},o(r){m(t.$$.fragment,r),m(e.$$.fragment,r),o=!1},d(r){r&&x(n),y(t,r),y(e,r)}}}function D4(i){let t,n,e={onOpenChange:i[5],nested:!1,$$slots:{default:[R4]},$$scope:{ctx:i}};return t=new xt.Root({props:e}),i[12](t),{c(){v(t.$$.fragment)},m(o,r){w(t,o,r),n=!0},p(o,[r]){const s={};1048581&r&&(s.$$scope={dirty:r,ctx:o}),t.$set(s)},i(o){n||(d(t.$$.fragment,o),n=!0)},o(o){m(t.$$.fragment,o),n=!1},d(o){i[12](null),y(t,o)}}}function P4(i,t,n){let e,o,r,s,{onCloseDropdown:c=()=>{}}=t;const a=kt("chatModel");if(Tt(i,a,_=>n(13,r=_)),!a)throw new Error("ChatModel not found in context");const l=kt("slashCommandModel"),u=r.flags;Tt(i,u,_=>n(9,o=_));function $(){s==null||s.focusIdx(-1)}let f="";function p(_){l.setActiveCommand(_.id),s==null||s.requestClose()}return i.$$set=_=>{"onCloseDropdown"in _&&n(8,c=_.onCloseDropdown)},i.$$.update=()=>{513&i.$$.dirty&&n(2,e=function(_,C){let M=Cm();return C||(M=M.filter(T=>T.id!=="generate-commit-message")),_===void 0?M:M.filter(T=>T.label.toLowerCase().includes(_.toLowerCase()))}(f,o.enableGenerateCommitMessage))},[f,s,e,a,u,async function(_){_?(await zo(),$()):(c(),n(0,f=""))},async _=>{switch(_.key){case"ArrowLeft":case"ArrowRight":case"ArrowDown":case"ArrowUp":case"Enter":break;default:_.defaultPrevented||$()}},p,c,o,_=>p(_),function(_){f=_,n(0,f)},function(_){Qt[_?"unshift":"push"](()=>{s=_,n(1,s)})}]}function N4(i){let t,n,e=[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 448 512"},i[0]],o={};for(let r=0;r<e.length;r+=1)o=Et(o,e[r]);return{c(){t=oe("svg"),n=new ln(!0),this.h()},l(r){t=un(r,"svg",{xmlns:!0,"data-ds-icon":!0,viewBox:!0});var s=dn(t);n=$n(s,!0),s.forEach(x),this.h()},h(){n.a=null,ue(t,o)},m(r,s){mn(r,t,s),n.m('<!--! Font Awesome Pro 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2024 Fonticons, Inc.--><path d="M375 73c-26-26-68.1-26-94.1 0L89 265c-43.7 43.6-43.7 114.4 0 158s114.4 43.6 158.1 0L399 271c9.4-9.4 24.6-9.4 33.9 0s9.4 24.6 0 33.9L281 457c-62.4 62.4-163.5 62.4-225.9 0S-7.4 293.4 55 231L247 39c44.7-44.7 117.3-44.7 162 0s44.7 117.2 0 161.9L225.2 384.7c-31.6 31.6-83.6 28.7-111.5-6.2-23.8-29.8-21.5-72.8 5.5-99.8L271 127c9.4-9.4 24.6-9.4 33.9 0s9.4 24.6 0 33.9L153.2 312.7c-9.7 9.7-10.6 25.1-2 35.8 10 12.5 28.7 13.6 40 2.2L375 167c26-26 26-68.1 0-94.1z"/>',t)},p(r,[s]){ue(t,o=De(e,[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 448 512"},1&s&&r[0]]))},i:N,o:N,d(r){r&&x(t)}}}function F4(i,t,n){return i.$$set=e=>{n(0,t=Et(Et({},t),ae(e)))},[t=ae(t)]}class O4 extends ut{constructor(t){super(),dt(this,t,F4,N4,lt,{})}}function z4(i){let t,n,e,o,r,s,c;return n=new O4({}),{c(){t=L("label"),v(n.$$.fragment),e=H(),o=L("input"),A(t,"for",i[3]),A(t,"class","c-input-action-bar__label svelte-6rrv9"),A(o,"type","file"),o.hidden=!0,A(o,"id",i[3]),A(o,"accept",i[0])},m(a,l){b(a,t,l),w(n,t,null),b(a,e,l),b(a,o,l),r=!0,s||(c=[Dt(o,"click",j4),Dt(o,"input",i[4])],s=!0)},p(a,l){(!r||1&l)&&A(o,"accept",a[0])},i(a){r||(d(n.$$.fragment,a),r=!0)},o(a){m(n.$$.fragment,a),r=!1},d(a){a&&(x(t),x(e),x(o)),y(n),s=!1,tn(c)}}}function B4(i){let t,n;return t=new fe({props:{size:1,variant:"ghost-block",color:"neutral",disabled:i[1],class:"c-input-action-bar__add-file-btn",$$slots:{default:[z4]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};2&o&&(r.disabled=e[1]),133&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function H4(i){let t,n,e,o,r;return e=new Hr({props:{icons:["shift"]}}),{c(){t=L("div"),n=V("Hold "),v(e.$$.fragment),o=V(" while dragging to attach"),A(t,"slot","content"),A(t,"class","c-add-file-button-tooltip svelte-6rrv9")},m(s,c){b(s,t,c),O(t,n),w(e,t,null),O(t,o),r=!0},p:N,i(s){r||(d(e.$$.fragment,s),r=!0)},o(s){m(e.$$.fragment,s),r=!1},d(s){s&&x(t),y(e)}}}function U4(i){let t,n;return t=new zt({props:{triggerOn:[te.Hover],delayDurationMs:300,$$slots:{content:[H4],default:[B4]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};135&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function q4(i){let t,n;return t=new ji({props:{$$slots:{default:[U4]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,[o]){const r={};135&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}const j4=function(){this.value=null};function W4(i,t,n){let{accept:e="*"}=t,{disabled:o=!1}=t,{onAddFiles:r=a}=t;const s=`file-${Date.now()}-${Math.floor(1e4*Math.random())}`,c=Pf();function a(l){var u,$,f;(f=($=(u=c.commandManager)==null?void 0:u.chain())==null?void 0:$.insertImagesIntoEditor)==null||f.call($,l)}return i.$$set=l=>{"accept"in l&&n(0,e=l.accept),"disabled"in l&&n(1,o=l.disabled),"onAddFiles"in l&&n(2,r=l.onAddFiles)},[e,o,r,s,function(l){var u;r([...((u=l.currentTarget)==null?void 0:u.files)??[]])}]}function V4(i){let t,n;return{c(){t=oe("svg"),n=oe("path"),A(n,"d","M2 3C2 2.44772 2.44772 2 3 2H12C12.5523 2 13 2.44772 13 3V12C13 12.5523 12.5523 13 12 13H3C2.44772 13 2 12.5523 2 12V3Z"),A(n,"fill","currentColor"),A(n,"fill-rule","evenodd"),A(n,"clip-rule","evenodd"),A(t,"width","15"),A(t,"height","15"),A(t,"viewBox","0 0 15 15"),A(t,"fill","none"),A(t,"xmlns","http://www.w3.org/2000/svg")},m(e,o){b(e,t,o),O(t,n)},p:N,i:N,o:N,d(e){e&&x(t)}}}class G4 extends ut{constructor(t){super(),dt(this,t,null,V4,lt,{})}}function K4(i){let t,n;return t=new G4({}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function Y4(i){let t,n,e;return n=new ve({props:{size:1,variant:"soft",color:"neutral",$$slots:{default:[K4]},$$scope:{ctx:i}}}),n.$on("click",i[0]),{c(){t=L("div"),v(n.$$.fragment),A(t,"class","c-cancel-button svelte-1b7ib22")},m(o,r){b(o,t,r),w(n,t,null),e=!0},p(o,[r]){const s={};4&r&&(s.$$scope={dirty:r,ctx:o}),n.$set(s)},i(o){e||(d(n.$$.fragment,o),e=!0)},o(o){m(n.$$.fragment,o),e=!1},d(o){o&&x(t),y(n)}}}function X4(i,t,n){let{cancelAction:e}=t;return i.$$set=o=>{"cancelAction"in o&&n(1,e=o.cancelAction)},[function(o){o.stopPropagation(),e()},e]}function Z4(i){let t,n,e=[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 512 512"},i[0]],o={};for(let r=0;r<e.length;r+=1)o=Et(o,e[r]);return{c(){t=oe("svg"),n=new ln(!0),this.h()},l(r){t=un(r,"svg",{xmlns:!0,"data-ds-icon":!0,viewBox:!0});var s=dn(t);n=$n(s,!0),s.forEach(x),this.h()},h(){n.a=null,ue(t,o)},m(r,s){mn(r,t,s),n.m('<!--! Font Awesome Pro 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2024 Fonticons, Inc.--><path d="M371.2 122.9C340.3 96.2 300 80 256 80c-97.2 0-176 78.8-176 176s78.8 176 176 176c39.7 0 76.2-13.1 105.6-35.2 10.6-8 25.6-5.8 33.6 4.8s5.8 25.6-4.8 33.6C353 463.3 306.4 480 256 480 132.3 480 32 379.7 32 256S132.3 32 256 32c57.3 0 109.6 21.5 149.2 56.9l30.5-30.5c6.6-6.6 15.6-10.3 25-10.3C480.2 48 496 63.8 496 83.3V200c0 13.3-10.7 24-24 24H355.3c-19.5 0-35.3-15.8-35.3-35.3 0-9.4 3.7-18.3 10.3-25l40.8-40.8zm76.8-9L385.9 176H448z"/>',t)},p(r,[s]){ue(t,o=De(e,[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 512 512"},1&s&&r[0]]))},i:N,o:N,d(r){r&&x(t)}}}function J4(i,t,n){return i.$$set=e=>{n(0,t=Et(Et({},t),ae(e)))},[t=ae(t)]}class Q4 extends ut{constructor(t){super(),dt(this,t,J4,Z4,lt,{})}}function tw(i){let t;return{c(){t=V("Resend")},m(n,e){b(n,t,e)},d(n){n&&x(t)}}}function ew(i){let t,n;return t=new Wt({props:{size:1,$$slots:{default:[tw]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};2&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function nw(i){let t,n;return t=new Q4({props:{slot:"iconLeft"}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p:N,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function ow(i){let t,n,e;return n=new ve({props:{size:1,variant:"soft",color:"neutral",$$slots:{iconLeft:[nw],default:[ew]},$$scope:{ctx:i}}}),n.$on("click",function(){ze(i[0])&&i[0].apply(this,arguments)}),n.$on("keyup",function(){ze(i[0])&&i[0].apply(this,arguments)}),{c(){t=L("div"),v(n.$$.fragment),A(t,"class","c-resend-button svelte-1a3z7my")},m(o,r){b(o,t,r),w(n,t,null),e=!0},p(o,[r]){i=o;const s={};2&r&&(s.$$scope={dirty:r,ctx:i}),n.$set(s)},i(o){e||(d(n.$$.fragment,o),e=!0)},o(o){m(n.$$.fragment,o),e=!1},d(o){o&&x(t),y(n)}}}function rw(i,t,n){let{resendAction:e}=t;return i.$$set=o=>{"resendAction"in o&&n(0,e=o.resendAction)},[e]}function iw(i){let t,n,e=[{width:"15"},{height:"15"},{viewBox:"0 0 512 512"},{fill:"none"},{xmlns:"http://www.w3.org/2000/svg"},i[0]],o={};for(let r=0;r<e.length;r+=1)o=Et(o,e[r]);return{c(){t=oe("svg"),n=oe("path"),A(n,"d","M327.5 85.2c-4.5 1.7-7.5 6-7.5 10.8s3 9.1 7.5 10.8L384 128l21.2 56.5c1.7 4.5 6 7.5 10.8 7.5s9.1-3 10.8-7.5L448 128l56.5-21.2c4.5-1.7 7.5-6 7.5-10.8s-3-9.1-7.5-10.8L448 64 426.8 7.5C425.1 3 420.8 0 416 0s-9.1 3-10.8 7.5L384 64 327.5 85.2zM9.3 240C3.6 242.6 0 248.3 0 254.6s3.6 11.9 9.3 14.5L26.3 277l8.1 3.7 .6 .3 88.3 40.8L164.1 410l.3 .6 3.7 8.1 7.9 17.1c2.6 5.7 8.3 9.3 14.5 9.3s11.9-3.6 14.5-9.3l7.9-17.1 3.7-8.1 .3-.6 40.8-88.3L346 281l.6-.3 8.1-3.7 17.1-7.9c5.7-2.6 9.3-8.3 9.3-14.5s-3.6-11.9-9.3-14.5l-17.1-7.9-8.1-3.7-.6-.3-88.3-40.8L217 99.1l-.3-.6L213 90.3l-7.9-17.1c-2.6-5.7-8.3-9.3-14.5-9.3s-11.9 3.6-14.5 9.3l-7.9 17.1-3.7 8.1-.3 .6-40.8 88.3L35.1 228.1l-.6 .3-8.1 3.7L9.3 240zm83 14.5l51.2-23.6c10.4-4.8 18.7-13.1 23.5-23.5l23.6-51.2 23.6 51.2c4.8 10.4 13.1 18.7 23.5 23.5l51.2 23.6-51.2 23.6c-10.4 4.8-18.7 13.1-23.5 23.5l-23.6 51.2-23.6-51.2c-4.8-10.4-13.1-18.7-23.5-23.5L92.3 254.6zM384 384l-56.5 21.2c-4.5 1.7-7.5 6-7.5 10.8s3 9.1 7.5 10.8L384 448l21.2 56.5c1.7 4.5 6 7.5 10.8 7.5s9.1-3 10.8-7.5L448 448l56.5-21.2c4.5-1.7 7.5-6 7.5-10.8s-3-9.1-7.5-10.8L448 384l-21.2-56.5c-1.7-4.5-6-7.5-10.8-7.5s-9.1 3-10.8 7.5L384 384z"),A(n,"fill","currentColor"),ue(t,o)},m(r,s){b(r,t,s),O(t,n)},p(r,[s]){ue(t,o=De(e,[{width:"15"},{height:"15"},{viewBox:"0 0 512 512"},{fill:"none"},{xmlns:"http://www.w3.org/2000/svg"},1&s&&r[0]]))},i:N,o:N,d(r){r&&x(t)}}}function sw(i,t,n){return i.$$set=e=>{n(0,t=Et(Et({},t),ae(e)))},[t=ae(t)]}class aw extends ut{constructor(t){super(),dt(this,t,sw,iw,lt,{})}}function Vc(i){let t,n,e;return n=new zt({props:{content:i[0]&&i[1]?i[1]:"Rewrite prompt",$$slots:{default:[dw]},$$scope:{ctx:i}}}),{c(){t=L("div"),v(n.$$.fragment),A(t,"class","c-rewrite-prompt-button svelte-1k3jvo8")},m(o,r){b(o,t,r),w(n,t,null),e=!0},p(o,r){const s={};3&r&&(s.content=o[0]&&o[1]?o[1]:"Rewrite prompt"),261&r&&(s.$$scope={dirty:r,ctx:o}),n.$set(s)},i(o){e||(d(n.$$.fragment,o),e=!0)},o(o){m(n.$$.fragment,o),e=!1},d(o){o&&x(t),y(n)}}}function cw(i){let t,n;return t=new aw({}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function lw(i){let t,n;return t=new ro({props:{size:1,useCurrentColor:!0}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function uw(i){let t,n,e,o;const r=[lw,cw],s=[];function c(a,l){return a[2]?0:1}return t=c(i),n=s[t]=r[t](i),{c(){n.c(),e=ft()},m(a,l){s[t].m(a,l),b(a,e,l),o=!0},p(a,l){let u=t;t=c(a),t!==u&&(q(),m(s[u],1,1,()=>{s[u]=null}),j(),n=s[t],n||(n=s[t]=r[t](a),n.c()),d(n,1),n.m(e.parentNode,e))},i(a){o||(d(n),o=!0)},o(a){m(n),o=!1},d(a){a&&x(e),s[t].d(a)}}}function dw(i){let t,n;return t=new fe({props:{disabled:i[0],size:1,variant:"ghost-block",color:"neutral",$$slots:{default:[uw]},$$scope:{ctx:i}}}),t.$on("click",i[6]),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};1&o&&(r.disabled=e[0]),260&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function $w(i){let t,n,e=i[3].flags.enablePromptEnhancer&&Vc(i);return{c(){e&&e.c(),t=ft()},m(o,r){e&&e.m(o,r),b(o,t,r),n=!0},p(o,[r]){o[3].flags.enablePromptEnhancer?e?(e.p(o,r),8&r&&d(e,1)):(e=Vc(o),e.c(),d(e,1),e.m(t.parentNode,t)):e&&(q(),m(e,1,1,()=>{e=null}),j())},i(o){n||(d(e),n=!0)},o(o){m(e),n=!1},d(o){o&&x(t),e&&e.d(o)}}}function mw(i,t,n){let e,o,{onRewrite:r}=t,{isDisabled:s=!1}=t,{disabledReason:c}=t;const a=kt("chatModel");if(Tt(i,a,u=>n(3,o=u)),!a)throw new Error("ChatModel not found in context");const l=Re(!1);return Tt(i,l,u=>n(2,e=u)),i.$$set=u=>{"onRewrite"in u&&n(7,r=u.onRewrite),"isDisabled"in u&&n(0,s=u.isDisabled),"disabledReason"in u&&n(1,c=u.disabledReason)},[s,c,e,o,a,l,function(){fr(l,e=!0,e);try{Promise.resolve(r()).finally(()=>{fr(l,e=!1,e)})}catch{fr(l,e=!1,e)}},r]}function fw(i){let t,n,e=[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 448 512"},i[0]],o={};for(let r=0;r<e.length;r+=1)o=Et(o,e[r]);return{c(){t=oe("svg"),n=new ln(!0),this.h()},l(r){t=un(r,"svg",{xmlns:!0,"data-ds-icon":!0,viewBox:!0});var s=dn(t);n=$n(s,!0),s.forEach(x),this.h()},h(){n.a=null,ue(t,o)},m(r,s){mn(r,t,s),n.m('<!--!Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2025 Fonticons, Inc.--><path d="M224 0c-17.7 0-32 14.3-32 32v19.2C119 66 64 130.6 64 208v18.8c0 47-17.3 92.4-48.5 127.6l-7.4 8.3c-8.4 9.4-10.4 22.9-5.3 34.4S19.4 416 32 416h384c12.6 0 24-7.4 29.2-18.9s3.1-25-5.3-34.4l-7.4-8.3c-31.2-35.2-48.5-80.5-48.5-127.6V208c0-77.4-55-142-128-156.8V32c0-17.7-14.3-32-32-32m45.3 493.3c12-12 18.7-28.3 18.7-45.3H160c0 17 6.7 33.3 18.7 45.3S207 512 224 512s33.3-6.7 45.3-18.7"/>',t)},p(r,[s]){ue(t,o=De(e,[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 448 512"},1&s&&r[0]]))},i:N,o:N,d(r){r&&x(t)}}}function pw(i,t,n){return i.$$set=e=>{n(0,t=Et(Et({},t),ae(e)))},[t=ae(t)]}class gw extends ut{constructor(t){super(),dt(this,t,pw,fw,lt,{})}}function hw(i){let t,n,e=[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 640 512"},i[0]],o={};for(let r=0;r<e.length;r+=1)o=Et(o,e[r]);return{c(){t=oe("svg"),n=new ln(!0),this.h()},l(r){t=un(r,"svg",{xmlns:!0,"data-ds-icon":!0,viewBox:!0});var s=dn(t);n=$n(s,!0),s.forEach(x),this.h()},h(){n.a=null,ue(t,o)},m(r,s){mn(r,t,s),n.m('<!--!Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2025 Fonticons, Inc.--><path d="M38.8 5.1C28.4-3.1 13.3-1.2 5.1 9.2s-6.3 25.5 4.1 33.7l592 464c10.4 8.2 25.5 6.3 33.7-4.1s6.3-25.5-4.1-33.7l-90.2-70.7c.2-.4.4-.9.6-1.3 5.2-11.5 3.1-25-5.3-34.4l-7.4-8.3c-31.2-35.2-48.5-80.5-48.5-127.6V208c0-77.4-55-142-128-156.8V32c0-17.7-14.3-32-32-32s-32 14.3-32 32v19.2c-42.6 8.6-79 34.2-102 69.3zM406.2 416 160 222.1v4.8c0 47-17.3 92.4-48.5 127.6l-7.4 8.3c-8.4 9.4-10.4 22.9-5.3 34.4S115.4 416 128 416zm-40.9 77.3c12-12 18.7-28.3 18.7-45.3H256c0 17 6.7 33.3 18.7 45.3S303 512 320 512s33.3-6.7 45.3-18.7"/>',t)},p(r,[s]){ue(t,o=De(e,[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 640 512"},1&s&&r[0]]))},i:N,o:N,d(r){r&&x(t)}}}function vw(i,t,n){return i.$$set=e=>{n(0,t=Et(Et({},t),ae(e)))},[t=ae(t)]}class ww extends ut{constructor(t){super(),dt(this,t,vw,hw,lt,{})}}function yw(i){let t,n;return t=new ww({}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function xw(i){let t,n;return t=new gw({}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function Gc(i){let t;return{c(){t=V(i[2])},m(n,e){b(n,t,e)},p(n,e){4&e&&bt(t,n[2])},d(n){n&&x(t)}}}function bw(i){let t,n,e,o,r;const s=[xw,yw],c=[];function a(u,$){return u[0]?0:1}t=a(i),n=c[t]=s[t](i);let l=i[1]&&i[2]&&Gc(i);return{c(){n.c(),e=H(),l&&l.c(),o=ft()},m(u,$){c[t].m(u,$),b(u,e,$),l&&l.m(u,$),b(u,o,$),r=!0},p(u,$){let f=t;t=a(u),t!==f&&(q(),m(c[f],1,1,()=>{c[f]=null}),j(),n=c[t],n||(n=c[t]=s[t](u),n.c()),d(n,1),n.m(e.parentNode,e)),u[1]&&u[2]?l?l.p(u,$):(l=Gc(u),l.c(),l.m(o.parentNode,o)):l&&(l.d(1),l=null)},i(u){r||(d(n),r=!0)},o(u){m(n),r=!1},d(u){u&&(x(e),x(o)),c[t].d(u),l&&l.d(u)}}}function _w(i){let t,n;return t=new fe({props:{color:i[1]?i[3]:"neutral",size:1,variant:i[1]?"soft":"ghost-block",radius:"full",$$slots:{default:[bw]},$$scope:{ctx:i}}}),t.$on("click",i[5]),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};10&o&&(r.color=e[1]?e[3]:"neutral"),2&o&&(r.variant=e[1]?"soft":"ghost-block"),135&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function Cw(i){let t,n,e,o;return n=new zt({props:{content:i[4],hasPointerEvents:!1,triggerOn:[te.Hover],$$slots:{default:[_w]},$$scope:{ctx:i}}}),{c(){t=L("div"),v(n.$$.fragment),A(t,"class",e="c-notify-button "+(i[0]?"c-notify-button--enabled":"")+" svelte-1yqfwnl")},m(r,s){b(r,t,s),w(n,t,null),o=!0},p(r,[s]){const c={};16&s&&(c.content=r[4]),143&s&&(c.$$scope={dirty:s,ctx:r}),n.$set(c),(!o||1&s&&e!==(e="c-notify-button "+(r[0]?"c-notify-button--enabled":"")+" svelte-1yqfwnl"))&&A(t,"class",e)},i(r){o||(d(n.$$.fragment,r),o=!0)},o(r){m(n.$$.fragment,r),o=!1},d(r){r&&x(t),y(n)}}}function Aw(i,t,n){let{enabled:e=!1}=t,{isUnread:o=!1}=t,{unreadCount:r=1}=t,{statusColor:s="neutral"}=t,{tooltipText:c=""}=t;const a=S$();return i.$$set=l=>{"enabled"in l&&n(0,e=l.enabled),"isUnread"in l&&n(1,o=l.isUnread),"unreadCount"in l&&n(2,r=l.unreadCount),"statusColor"in l&&n(3,s=l.statusColor),"tooltipText"in l&&n(4,c=l.tooltipText)},[e,o,r,s,c,function(){a("toggle")}]}class Mw extends ut{constructor(t){super(),dt(this,t,Aw,Cw,lt,{enabled:0,isUnread:1,unreadCount:2,statusColor:3,tooltipText:4})}}function kw(i){let t,n;return t=new Mw({props:{enabled:i[0],isUnread:i[3],statusColor:i[1],tooltipText:i[2]}}),t.$on("toggle",i[5]),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,[o]){const r={};1&o&&(r.enabled=e[0]),8&o&&(r.isUnread=e[3]),2&o&&(r.statusColor=e[1]),4&o&&(r.tooltipText=e[2]),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function Sw(i,t,n){let e,o,r,s,c,{agentId:a}=t,{status:l}=t,{workspaceStatus:u}=t,{hasUpdates:$=!1}=t;const f=kt("remoteAgentsModel");let p;Tt(i,f,C=>n(12,c=C));let _=!1;return i.$$set=C=>{"agentId"in C&&n(6,a=C.agentId),"status"in C&&n(7,l=C.status),"workspaceStatus"in C&&n(8,u=C.workspaceStatus),"hasUpdates"in C&&n(9,$=C.hasUpdates)},i.$$.update=()=>{384&i.$$.dirty&&(u===X$.workspaceRunning?n(1,p=Bf(l)):n(1,p=Hf(u))),640&i.$$.dirty&&n(3,e=(l===rn.agentIdle||l===rn.agentFailed)&&$),4160&i.$$.dirty&&n(10,o=a??c.currentAgentId),4096&i.$$.dirty&&n(11,r=c.newAgentDraft),7168&i.$$.dirty&&(o?n(0,_=c.notificationSettings[o]??!0):r&&n(0,_=r.enableNotification)),4161&i.$$.dirty&&n(2,s=_?"You'll be notified when the agent is ready for review. Click to turn off.":"Click to turn on notifications when the agent is ready for review. "+(a===c.currentAgentId?"You will not be notified while you're actively viewing this agent.":""))},[_,p,s,e,f,function(){if(o)f.setNotificationEnabled(o,!_);else{const C=f.newAgentDraft;C&&f.setNewAgentDraft({...C,enableNotification:!_})}},a,l,u,$,o,r,c]}class Dm extends ut{constructor(t){super(),dt(this,t,Sw,kw,lt,{agentId:6,status:7,workspaceStatus:8,hasUpdates:9})}}const yo={Root:class extends ut{constructor(i){super(),dt(this,i,dv,uv,lt,{})}},SendButton:class extends ut{constructor(i){super(),dt(this,i,Uv,Bv,lt,{primaryAction:0,isDisabled:1,disabledReason:13})}},ContextMenu:class extends ut{constructor(i){super(),dt(this,i,C4,_4,lt,{onCloseDropdown:0,onInsertMentionable:13,closeDropdown:1,openDropdown:14,toggleDropdown:2})}get closeDropdown(){return this.$$.ctx[1]}get openDropdown(){return this.$$.ctx[14]}get toggleDropdown(){return this.$$.ctx[2]}},ActionsMenu:class extends ut{constructor(i){super(),dt(this,i,P4,D4,lt,{onCloseDropdown:8})}},AddFileButton:class extends ut{constructor(i){super(),dt(this,i,W4,q4,lt,{accept:0,disabled:1,onAddFiles:2})}},ResendButton:class extends ut{constructor(i){super(),dt(this,i,rw,ow,lt,{resendAction:0})}},CancelButton:class extends ut{constructor(i){super(),dt(this,i,X4,Y4,lt,{cancelAction:1})}},RewritePromptButton:class extends ut{constructor(i){super(),dt(this,i,mw,$w,lt,{onRewrite:7,isDisabled:0,disabledReason:1})}},NotifyButton:Dm};function Tw(i){let t,n,e=[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 512 512"},i[0]],o={};for(let r=0;r<e.length;r+=1)o=Et(o,e[r]);return{c(){t=oe("svg"),n=new ln(!0),this.h()},l(r){t=un(r,"svg",{xmlns:!0,"data-ds-icon":!0,viewBox:!0});var s=dn(t);n=$n(s,!0),s.forEach(x),this.h()},h(){n.a=null,ue(t,o)},m(r,s){mn(r,t,s),n.m('<!--! Font Awesome Pro 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2024 Fonticons, Inc.--><path d="M192 48c22.1 0 40 17.9 40 40v40h-19.3c-6.2-14.1-20.3-24-36.7-24-22.1 0-40 17.9-40 40s17.9 40 40 40c16.4 0 30.5-9.9 36.7-24H232v96h-40c-26.5 0-48 21.5-48 48v11.3c-14.1 6.2-24 20.3-24 36.7 0 22.1 17.9 40 40 40s40-17.9 40-40c0-16.4-9.9-30.5-24-36.7V304c0-8.8 7.2-16 16-16h40v132c0 24.3-19.7 44-44 44-17.8 0-33.2-10.6-40.1-25.9-3.8-8.4-12-13.9-21.2-14.1-25.9-.7-46.7-21.9-46.7-48 0-2.6.2-5.2.6-7.6 1.4-8.5-2-17.1-8.7-22.5C57.3 334.1 48 316.2 48 296c0-19.3 8.5-36.6 22.1-48.3 8-6.9 10.5-18.3 6.1-28-2.7-6-4.2-12.6-4.2-19.7 0-18.8 10.8-35.1 26.7-43 8.1-4 13.3-12.3 13.3-21.3.1-19.3 11.7-36 28.3-43.5 6.4-2.9 11.3-8.5 13.2-15.3C158.3 60.2 173.8 48 192 48m-4 464c26.9 0 51.2-11.6 68-30 16.8 18.5 41.1 30 68 30 32.2 0 60.5-16.5 76.9-41.5 45-8 79.1-47.3 79.1-94.5v-1.6c19.8-20.2 32-47.9 32-78.4 0-27.8-10.1-53.2-26.8-72.7 1.8-7.5 2.8-15.3 2.8-23.3 0-32.6-16.3-61.5-41.1-78.8-4.5-28.9-21.8-53.5-45.9-67.8C387.5 22 356.3 0 320 0c-25.2 0-48 10.6-64 27.6C240 10.6 217.2 0 192 0c-36.3 0-67.5 22-80.9 53.4-24.2 14.3-41.5 38.9-46 67.8C40.3 138.5 24 167.4 24 200c0 8 1 15.8 2.8 23.3C10.1 242.8 0 268.2 0 296c0 30.5 12.2 58.2 32 78.4v1.6c0 47.3 34.1 86.5 79.1 94.5 16.4 25 44.7 41.5 76.9 41.5m136-48c-24.3 0-44-19.7-44-44v-68h51.3c6.2 14.1 20.3 24 36.7 24 22.1 0 40-17.9 40-40s-17.9-40-40-40c-16.4 0-30.5 9.9-36.7 24H280V160h40c8.8 0 16 7.2 16 16v11.3c-14.1 6.2-24 20.3-24 36.7 0 22.1 17.9 40 40 40s40-17.9 40-40c0-16.4-9.9-30.5-24-36.7V176c0-26.5-21.5-48-48-48h-40V88c0-22.1 17.9-40 40-40 18.2 0 33.7 12.2 38.5 28.9 1.9 6.8 6.8 12.4 13.2 15.3 16.6 7.5 28.2 24.1 28.3 43.5.1 9.1 5.2 17.3 13.3 21.3 15.9 7.9 26.7 24.2 26.7 43 0 7.1-1.5 13.7-4.2 19.7-4.4 9.7-1.9 21 6.1 28 13.5 11.8 22.1 29 22.1 48.3 0 20.2-9.3 38.1-23.9 49.9-6.7 5.4-10 14-8.7 22.5.4 2.5.6 5 .6 7.6 0 26.1-20.8 47.3-46.7 48-9.2.3-17.4 5.7-21.2 14.1-6.9 15.3-22.3 25.9-40.1 25.9M176 128a16 16 0 1 1 0 32 16 16 0 1 1 0-32m-16 208a16 16 0 1 1 0 32 16 16 0 1 1 0-32m176-112a16 16 0 1 1 32 0 16 16 0 1 1-32 0m32 96a16 16 0 1 1 0 32 16 16 0 1 1 0-32"/>',t)},p(r,[s]){ue(t,o=De(e,[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 512 512"},1&s&&r[0]]))},i:N,o:N,d(r){r&&x(t)}}}function Ew(i,t,n){return i.$$set=e=>{n(0,t=Et(Et({},t),ae(e)))},[t=ae(t)]}class Iw extends ut{constructor(t){super(),dt(this,t,Ew,Tw,lt,{})}}function Kc(i,t,n){const e=i.slice();return e[10]=t[n],e}function Lw(i){let t,n=i[1].name+"";return{c(){t=V(n)},m(e,o){b(e,t,o)},p(e,o){2&o&&n!==(n=e[1].name+"")&&bt(t,n)},d(e){e&&x(t)}}}function Rw(i){let t,n,e;return n=new Wt({props:{size:1,$$slots:{default:[Lw]},$$scope:{ctx:i}}}),{c(){t=L("span"),v(n.$$.fragment),A(t,"class","c-model-picker__text-wrapper")},m(o,r){b(o,t,r),w(n,t,null),e=!0},p(o,r){const s={};8194&r&&(s.$$scope={dirty:r,ctx:o}),n.$set(s)},i(o){e||(d(n.$$.fragment,o),e=!0)},o(o){m(n.$$.fragment,o),e=!1},d(o){o&&x(t),y(n)}}}function Dw(i){let t,n;return t=new Iw({props:{slot:"iconLeft"}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p:N,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function Pw(i){let t,n;return t=new ve({props:{size:1,variant:"ghost-block",color:"neutral",$$slots:{iconLeft:[Dw],default:[Rw]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};8194&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function Nw(i){let t,n;return t=new ji({props:{$$slots:{default:[Pw]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};8194&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function Fw(i){let t,n;return t=new zt({props:{content:`Model: ${i[1].name}`,triggerOn:[te.Hover],offset:[0,jw],$$slots:{default:[Nw]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};2&o&&(r.content=`Model: ${e[1].name}`),8194&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function Ow(i){let t;return{c(){t=V("Internal Testing Only")},m(n,e){b(n,t,e)},d(n){n&&x(t)}}}function zw(i){let t,n=xi.name+"";return{c(){t=V(n)},m(e,o){b(e,t,o)},p:N,d(e){e&&x(t)}}}function Yc(i){let t,n,e;return n=new Ho({}),{c(){t=L("span"),v(n.$$.fragment),A(t,"class","c-model-picker__check-icon svelte-hq3rg5")},m(o,r){b(o,t,r),w(n,t,null),e=!0},i(o){e||(d(n.$$.fragment,o),e=!0)},o(o){m(n.$$.fragment,o),e=!1},d(o){o&&x(t),y(n)}}}function Bw(i){let t,n,e,o,r=i[10].id===i[1].id&&Yc();return{c(){t=L("span"),t.textContent=`${i[10].name}`,n=H(),r&&r.c(),e=H(),A(t,"class","c-model-picker__item-text svelte-hq3rg5")},m(s,c){b(s,t,c),b(s,n,c),r&&r.m(s,c),b(s,e,c),o=!0},p(s,c){s[10].id===s[1].id?r?2&c&&d(r,1):(r=Yc(),r.c(),d(r,1),r.m(e.parentNode,e)):r&&(q(),m(r,1,1,()=>{r=null}),j())},i(s){o||(d(r),o=!0)},o(s){m(r),o=!1},d(s){s&&(x(t),x(n),x(e)),r&&r.d(s)}}}function Xc(i){let t,n;return t=new xt.Item({props:{highlight:i[10].id===i[1].id,onSelect:function(){return i[8](i[10])},$$slots:{default:[Bw]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){i=e;const r={};2&o&&(r.highlight=i[10].id===i[1].id),8194&o&&(r.$$scope={dirty:o,ctx:i}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function Hw(i){let t,n,e,o,r,s,c,a;t=new xt.Label({props:{$$slots:{default:[Ow]},$$scope:{ctx:i}}}),e=new xt.Item({props:{onSelect:i[7],$$slots:{default:[zw]},$$scope:{ctx:i}}}),r=new xt.Separator({});let l=se(i[2].getModels().filter(Zc)),u=[];for(let f=0;f<l.length;f+=1)u[f]=Xc(Kc(i,l,f));const $=f=>m(u[f],1,1,()=>{u[f]=null});return{c(){v(t.$$.fragment),n=H(),v(e.$$.fragment),o=H(),v(r.$$.fragment),s=H();for(let f=0;f<u.length;f+=1)u[f].c();c=ft()},m(f,p){w(t,f,p),b(f,n,p),w(e,f,p),b(f,o,p),w(r,f,p),b(f,s,p);for(let _=0;_<u.length;_+=1)u[_]&&u[_].m(f,p);b(f,c,p),a=!0},p(f,p){const _={};8192&p&&(_.$$scope={dirty:p,ctx:f}),t.$set(_);const C={};if(8192&p&&(C.$$scope={dirty:p,ctx:f}),e.$set(C),22&p){let M;for(l=se(f[2].getModels().filter(Zc)),M=0;M<l.length;M+=1){const T=Kc(f,l,M);u[M]?(u[M].p(T,p),d(u[M],1)):(u[M]=Xc(T),u[M].c(),d(u[M],1),u[M].m(c.parentNode,c))}for(q(),M=l.length;M<u.length;M+=1)$(M);j()}},i(f){if(!a){d(t.$$.fragment,f),d(e.$$.fragment,f),d(r.$$.fragment,f);for(let p=0;p<l.length;p+=1)d(u[p]);a=!0}},o(f){m(t.$$.fragment,f),m(e.$$.fragment,f),m(r.$$.fragment,f),u=u.filter(Boolean);for(let p=0;p<u.length;p+=1)m(u[p]);a=!1},d(f){f&&(x(n),x(o),x(s),x(c)),y(t,f),y(e,f),y(r,f),bn(u,f)}}}function Uw(i){let t,n,e,o;return t=new xt.Trigger({props:{$$slots:{default:[Fw]},$$scope:{ctx:i}}}),e=new xt.Content({props:{side:"top",align:"start",$$slots:{default:[Hw]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment),n=H(),v(e.$$.fragment)},m(r,s){w(t,r,s),b(r,n,s),w(e,r,s),o=!0},p(r,s){const c={};8194&s&&(c.$$scope={dirty:s,ctx:r}),t.$set(c);const a={};8194&s&&(a.$$scope={dirty:s,ctx:r}),e.$set(a)},i(r){o||(d(t.$$.fragment,r),d(e.$$.fragment,r),o=!0)},o(r){m(t.$$.fragment,r),m(e.$$.fragment,r),o=!1},d(r){r&&x(n),y(t,r),y(e,r)}}}function qw(i){let t,n,e,o={nested:!1,$$slots:{default:[Uw]},$$scope:{ctx:i}};return n=new xt.Root({props:o}),i[9](n),{c(){t=L("div"),v(n.$$.fragment),A(t,"class","c-model-picker svelte-hq3rg5")},m(r,s){b(r,t,s),w(n,t,null),e=!0},p(r,[s]){const c={};8194&s&&(c.$$scope={dirty:s,ctx:r}),n.$set(c)},i(r){e||(d(n.$$.fragment,r),e=!0)},o(r){m(n.$$.fragment,r),e=!1},d(r){r&&x(t),i[9](null),y(n)}}}const jw=5,Zc=i=>i.id!==null;function Ww(i,t,n){let e,o,r;const s=kt("modelRegistry"),c=kt("chatModel");let a;function l(u){e&&e.setSelectedModelId(u),a==null||a.requestClose()}return Tt(i,c,u=>n(6,r=u)),i.$$.update=()=>{64&i.$$.dirty&&n(5,e=r.currentConversationModel),32&i.$$.dirty&&n(1,o=s.getModel((e==null?void 0:e.selectedModelId)??null))},[a,o,s,c,l,e,r,()=>l(null),u=>{l(u.id)},function(u){Qt[u?"unshift":"push"](()=>{a=u,n(0,a)})}]}class Vw extends ut{constructor(t){super(),dt(this,t,Ww,qw,lt,{})}}function Jc(i){let t;function n(r,s){return r[0]===r[1]?Kw:Gw}let e=n(i),o=e(i);return{c(){o.c(),t=ft()},m(r,s){o.m(r,s),b(r,t,s)},p(r,s){e===(e=n(r))&&o?o.p(r,s):(o.d(1),o=e(r),o&&(o.c(),o.m(t.parentNode,t)))},d(r){r&&x(t),o.d(r)}}}function Gw(i){let t,n,e,o,r=i[0]+1+"",s=i[1]+1+"";return{c(){t=V("L"),n=V(r),e=V("-"),o=V(s)},m(c,a){b(c,t,a),b(c,n,a),b(c,e,a),b(c,o,a)},p(c,a){1&a&&r!==(r=c[0]+1+"")&&bt(n,r),2&a&&s!==(s=c[1]+1+"")&&bt(o,s)},d(c){c&&(x(t),x(n),x(e),x(o))}}}function Kw(i){let t,n,e=i[0]+1+"";return{c(){t=V("L"),n=V(e)},m(o,r){b(o,t,r),b(o,n,r)},p(o,r){1&r&&e!==(e=o[0]+1+"")&&bt(n,e)},d(o){o&&(x(t),x(n))}}}function Yw(i){let t,n,e,o=i[0]!==void 0&&i[1]!==void 0&&Jc(i);return{c(){t=L("span"),n=V(i[2]),e=H(),o&&o.c(),A(t,"class","c-selection-item svelte-xiswvu")},m(r,s){b(r,t,s),O(t,n),O(t,e),o&&o.m(t,null)},p(r,[s]){4&s&&bt(n,r[2]),r[0]!==void 0&&r[1]!==void 0?o?o.p(r,s):(o=Jc(r),o.c(),o.m(t,null)):o&&(o.d(1),o=null)},i:N,o:N,d(r){r&&x(t),o&&o.d()}}}function Xw(i,t,n){let e,o,r,s,c,{fileSelection:a}=t;return i.$$set=l=>{"fileSelection"in l&&n(3,a=l.fileSelection)},i.$$.update=()=>{8&i.$$.dirty&&n(5,e=a.pathName||""),8&i.$$.dirty&&(a.fullRange?(n(0,s=a.fullRange.startLineNumber),n(1,c=a.fullRange.endLineNumber)):a.range&&(n(0,s=a.range.start),n(1,c=a.range.stop))),32&i.$$.dirty&&n(4,o=e.split("/").filter(l=>l.length>0)),16&i.$$.dirty&&n(2,r=o[o.length-1])},[s,c,r,a,o,e]}class Zw extends ut{constructor(t){super(),dt(this,t,Xw,Yw,lt,{fileSelection:3})}}function Qc(i,t,n){const e=i.slice();return e[18]=t[n],e}function Jw(i){let t,n,e,o,r,s,c,a,l,u,$,f;const p=[e3,t3],_=[];function C(M,T){var E;return M[1]!==void 0&&((E=M[1])==null?void 0:E.length)>0?0:1}return s=C(i),c=_[s]=p[s](i),{c(){t=L("p"),n=V("/"),e=V(i[2]),o=H(),r=L("div"),c.c(),a=H(),l=L("input"),A(t,"class","c-action-label svelte-34wttr"),A(l,"type","text"),A(l,"class","c-tiny-input-inline svelte-34wttr"),A(r,"class","c-max-element-inline svelte-34wttr")},m(M,T){b(M,t,T),O(t,n),O(t,e),b(M,o,T),b(M,r,T),_[s].m(r,null),O(r,a),O(r,l),u=!0,$||(f=[Dt(l,"keydown",i[9]),Dt(l,"keyup",i[10])],$=!0)},p(M,T){(!u||4&T)&&bt(e,M[2]);let E=s;s=C(M),s===E?_[s].p(M,T):(q(),m(_[E],1,1,()=>{_[E]=null}),j(),c=_[s],c?c.p(M,T):(c=_[s]=p[s](M),c.c()),d(c,1),c.m(r,a))},i(M){u||(d(c),u=!0)},o(M){m(c),u=!1},d(M){M&&(x(t),x(o),x(r)),_[s].d(),$=!1,tn(f)}}}function Qw(i){let t,n,e,o,r,s,c,a;return{c(){var l;t=L("p"),n=V("/"),e=V(i[2]),o=H(),r=L("input"),A(t,"class","c-action-label svelte-34wttr"),A(r,"type","text"),A(r,"class","c-max-element-inline svelte-34wttr"),A(r,"placeholder",s=(l=i[4])==null?void 0:l.placeholderText)},m(l,u){b(l,t,u),O(t,n),O(t,e),b(l,o,u),b(l,r,u),hr(r,i[0]),c||(a=[Dt(r,"input",i[12]),Dt(r,"keydown",i[8]),Dt(r,"keyup",i[10])],c=!0)},p(l,u){var $;4&u&&bt(e,l[2]),16&u&&s!==(s=($=l[4])==null?void 0:$.placeholderText)&&A(r,"placeholder",s),1&u&&r.value!==l[0]&&hr(r,l[0])},i:N,o:N,d(l){l&&(x(t),x(o),x(r)),c=!1,tn(a)}}}function t3(i){var o;let t,n,e=((o=i[4])==null?void 0:o.selectionReminderMessage)+"";return{c(){t=L("span"),n=V(e),A(t,"class","c-select-code-msg")},m(r,s){b(r,t,s),O(t,n)},p(r,s){var c;16&s&&e!==(e=((c=r[4])==null?void 0:c.selectionReminderMessage)+"")&&bt(n,e)},i:N,o:N,d(r){r&&x(t)}}}function e3(i){let t,n,e=se(i[1]),o=[];for(let s=0;s<e.length;s+=1)o[s]=tl(Qc(i,e,s));const r=s=>m(o[s],1,1,()=>{o[s]=null});return{c(){for(let s=0;s<o.length;s+=1)o[s].c();t=ft()},m(s,c){for(let a=0;a<o.length;a+=1)o[a]&&o[a].m(s,c);b(s,t,c),n=!0},p(s,c){if(2&c){let a;for(e=se(s[1]),a=0;a<e.length;a+=1){const l=Qc(s,e,a);o[a]?(o[a].p(l,c),d(o[a],1)):(o[a]=tl(l),o[a].c(),d(o[a],1),o[a].m(t.parentNode,t))}for(q(),a=e.length;a<o.length;a+=1)r(a);j()}},i(s){if(!n){for(let c=0;c<e.length;c+=1)d(o[c]);n=!0}},o(s){o=o.filter(Boolean);for(let c=0;c<o.length;c+=1)m(o[c]);n=!1},d(s){s&&x(t),bn(o,s)}}}function tl(i){let t,n;return t=new Zw({props:{fileSelection:i[18].selection}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};2&o&&(r.fileSelection=e[18].selection),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function n3(i){let t,n,e,o,r,s,c;const a=[Qw,Jw],l=[];function u($,f){return $[2]==="find"?0:1}return e=u(i),o=l[e]=a[e](i),{c(){t=L("div"),n=L("div"),o.c(),A(n,"class","c-action-row svelte-34wttr"),A(t,"class","c-action svelte-34wttr"),A(t,"role","button"),A(t,"tabindex","-1")},m($,f){b($,t,f),O(t,n),l[e].m(n,null),r=!0,s||(c=[Dt(t,"click",i[7]),Dt(t,"keydown",o3)],s=!0)},p($,[f]){let p=e;e=u($),e===p?l[e].p($,f):(q(),m(l[p],1,1,()=>{l[p]=null}),j(),o=l[e],o?o.p($,f):(o=l[e]=a[e]($),o.c()),d(o,1),o.m(n,null))},i($){r||(d(o),r=!0)},o($){m(o),r=!1},d($){$&&x(t),l[e].d(),s=!1,tn(c)}}}const o3=i=>{};function r3(i,t,n){let e,o,r,s,c,a,l,u,$=N,f=N,p=N;i.$$.on_destroy.push(()=>$()),i.$$.on_destroy.push(()=>f()),i.$$.on_destroy.push(()=>p());let _=kt("chatModel");if(!_)throw new Error("ChatModel not found in context");let C=kt("slashCommandModel");const M=()=>{const P=document.querySelector("input");P&&(P.focus(),P.select())};let T="",E=!1;function R(){C.cancelActiveCommand()}return so(M),i.$$.update=()=>{2048&i.$$.dirty&&n(1,o=Object.values(u.selections).sort((P,J)=>P.selection.pathName.localeCompare(J.selection.pathName))),2&i.$$.dirty&&C.setSelections(o),4&i.$$.dirty&&n(4,s=_i(l)),1&i.$$.dirty&&C.setInputText(T)},n(6,e=_.specialContextInputModel),p(),p=ie(e,P=>n(11,u=P)),n(5,r=C.activeCommand),f(),f=ie(r,P=>n(2,l=P)),n(3,c=C.isActiveCommandRunnable),$(),$=ie(c,P=>n(14,a=P)),[T,o,l,c,s,r,e,M,function(P){return!(P.shiftKey||P.ctrlKey||P.metaKey)&&(P.stopPropagation(),P.key==="Enter"?(E=!0,!0):P.key==="Escape"?(R(),!0):P.key==="Backspace"&&(T===""&&R(),!0))},function(P){if(P.ctrlKey||P.metaKey||P.key==="Tab")return!1;if(P.stopPropagation(),!P.shiftKey){if(P.key==="Escape"||P.key==="Backspace")return R(),!0;if(P.key==="Enter"&&a)return C.runActiveCommand(),!0}return P.preventDefault(),!0},function(P){return!P.shiftKey&&!(P.key!=="Enter"||!E||!a)&&(E=!1,C.runActiveCommand(),!0)},u,function(){T=this.value,n(0,T)}]}class i3 extends ut{constructor(t){super(),dt(this,t,r3,n3,lt,{})}}function el(i,t,n){const e=i.slice();return e[15]=t[n],e}function nl(i){let t,n;function e(){return i[8](i[15])}return t=new Rm({props:{item:i[15],highlight:i[15]===i[14],onSelect:e}}),{c(){v(t.$$.fragment)},m(o,r){w(t,o,r),n=!0},p(o,r){i=o;const s={};4&r&&(s.item=i[15]),16388&r&&(s.highlight=i[15]===i[14]),4&r&&(s.onSelect=e),t.$set(s)},i(o){n||(d(t.$$.fragment,o),n=!0)},o(o){m(t.$$.fragment,o),n=!1},d(o){y(t,o)}}}function s3(i){let t,n,e=se(i[2]),o=[];for(let s=0;s<e.length;s+=1)o[s]=nl(el(i,e,s));const r=s=>m(o[s],1,1,()=>{o[s]=null});return{c(){for(let s=0;s<o.length;s+=1)o[s].c();t=ft()},m(s,c){for(let a=0;a<o.length;a+=1)o[a]&&o[a].m(s,c);b(s,t,c),n=!0},p(s,c){if(16420&c){let a;for(e=se(s[2]),a=0;a<e.length;a+=1){const l=el(s,e,a);o[a]?(o[a].p(l,c),d(o[a],1)):(o[a]=nl(l),o[a].c(),d(o[a],1),o[a].m(t.parentNode,t))}for(q(),a=e.length;a<o.length;a+=1)r(a);j()}},i(s){if(!n){for(let c=0;c<e.length;c+=1)d(o[c]);n=!0}},o(s){o=o.filter(Boolean);for(let c=0;c<o.length;c+=1)m(o[c]);n=!1},d(s){s&&x(t),bn(o,s)}}}function a3(i){let t,n;return t=new Yr({props:{slot:"mentionable",option:i[13]}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};8192&o&&(r.option=e[13]),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function c3(i){let t,n,e,o;return t=new rr.Menu.Root({props:{mentionables:i[2],onQueryUpdate:i[4],onSelectMentionable:i[5],$$slots:{default:[s3,({activeItem:r})=>({14:r}),({activeItem:r})=>r?16384:0]},$$scope:{ctx:i}}}),e=new rr.ChipTooltip({props:{$$slots:{mentionable:[a3,({mentionable:r})=>({13:r}),({mentionable:r})=>r?8192:0]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment),n=H(),v(e.$$.fragment)},m(r,s){w(t,r,s),b(r,n,s),w(e,r,s),o=!0},p(r,s){const c={};4&s&&(c.mentionables=r[2]),278532&s&&(c.$$scope={dirty:s,ctx:r}),t.$set(c);const a={};270336&s&&(a.$$scope={dirty:s,ctx:r}),e.$set(a)},i(r){o||(d(t.$$.fragment,r),d(e.$$.fragment,r),o=!0)},o(r){m(t.$$.fragment,r),m(e.$$.fragment,r),o=!1},d(r){r&&x(n),y(t,r),y(e,r)}}}function l3(i){let t,n,e={triggerCharacter:"@",onMentionItemsUpdated:i[0],$$slots:{default:[c3]},$$scope:{ctx:i}};return t=new rr.Root({props:e}),i[9](t),{c(){v(t.$$.fragment)},m(o,r){w(t,o,r),n=!0},p(o,[r]){const s={};1&r&&(s.onMentionItemsUpdated=o[0]),262148&r&&(s.$$scope={dirty:r,ctx:o}),t.$set(s)},i(o){n||(d(t.$$.fragment,o),n=!0)},o(o){m(t.$$.fragment,o),n=!1},d(o){i[9](null),y(t,o)}}}function u3(i,t,n){let e,{requestEditorFocus:o}=t,{onMentionItemsUpdated:r}=t;const s=kt("chatModel");if(!s)throw new Error("ChatModel not found in context");const c=new Ei(s,u),a=c.displayItems;let l;function u(f){return!!l&&(l.insertMention(f),c.closeDropdown(),!0)}function $(f){const p=c.selectMentionable(f);return o(),p}return Tt(i,a,f=>n(2,e=f)),qr(()=>{c.dispose()}),i.$$set=f=>{"requestEditorFocus"in f&&n(6,o=f.requestEditorFocus),"onMentionItemsUpdated"in f&&n(0,r=f.onMentionItemsUpdated)},[r,l,e,a,function(f){f===void 0?c.closeDropdown():(c.openDropdown(),c.userQuery.set(f))},$,o,f=>u(f),f=>$(f),function(f){Qt[f?"unshift":"push"](()=>{l=f,n(1,l)})}]}class d3 extends ut{constructor(t){super(),dt(this,t,u3,l3,lt,{requestEditorFocus:6,onMentionItemsUpdated:0,insertMentionNode:7})}get insertMentionNode(){return this.$$.ctx[7]}}function ol(i,t,n){const e=i.slice();return e[14]=t[n],e}function $3(i){let t,n,e,o=i[14].label+"";return{c(){t=V("/"),n=V(o),e=H()},m(r,s){b(r,t,s),b(r,n,s),b(r,e,s)},p(r,s){1&s&&o!==(o=r[14].label+"")&&bt(n,o)},d(r){r&&(x(t),x(n),x(e))}}}function rl(i){let t,n;return t=new rr.Menu.Item({props:{mentionable:i[14],$$slots:{default:[$3]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};1&o&&(r.mentionable=e[14]),131073&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function m3(i){let t,n,e=se(i[0]),o=[];for(let s=0;s<e.length;s+=1)o[s]=rl(ol(i,e,s));const r=s=>m(o[s],1,1,()=>{o[s]=null});return{c(){for(let s=0;s<o.length;s+=1)o[s].c();t=ft()},m(s,c){for(let a=0;a<o.length;a+=1)o[a]&&o[a].m(s,c);b(s,t,c),n=!0},p(s,c){if(1&c){let a;for(e=se(s[0]),a=0;a<e.length;a+=1){const l=ol(s,e,a);o[a]?(o[a].p(l,c),d(o[a],1)):(o[a]=rl(l),o[a].c(),d(o[a],1),o[a].m(t.parentNode,t))}for(q(),a=e.length;a<o.length;a+=1)r(a);j()}},i(s){if(!n){for(let c=0;c<e.length;c+=1)d(o[c]);n=!0}},o(s){o=o.filter(Boolean);for(let c=0;c<o.length;c+=1)m(o[c]);n=!1},d(s){s&&x(t),bn(o,s)}}}function f3(i){let t,n,e=i[13].label+"";return{c(){t=L("span"),n=V(e),A(t,"slot","mentionable")},m(o,r){b(o,t,r),O(t,n)},p(o,r){8192&r&&e!==(e=o[13].label+"")&&bt(n,e)},d(o){o&&x(t)}}}function p3(i){let t,n,e,o;return t=new rr.Menu.Root({props:{mentionables:i[0],onQueryUpdate:i[5],onSelectMentionable:i[9],$$slots:{default:[m3]},$$scope:{ctx:i}}}),e=new rr.ChipTooltip({props:{$$slots:{mentionable:[f3,({mentionable:r})=>({13:r}),({mentionable:r})=>r?8192:0]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment),n=H(),v(e.$$.fragment)},m(r,s){w(t,r,s),b(r,n,s),w(e,r,s),o=!0},p(r,s){const c={};1&s&&(c.mentionables=r[0]),131073&s&&(c.$$scope={dirty:s,ctx:r}),t.$set(c);const a={};139264&s&&(a.$$scope={dirty:s,ctx:r}),e.$set(a)},i(r){o||(d(t.$$.fragment,r),d(e.$$.fragment,r),o=!0)},o(r){m(t.$$.fragment,r),m(e.$$.fragment,r),o=!1},d(r){r&&x(n),y(t,r),y(e,r)}}}function g3(i){let t,n;return t=new rr.Root({props:{pluginId:"augment-slash-actions",triggerCharacter:"/",allowedPrefixes:[],renderText:h3,$$slots:{default:[p3]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,[o]){const r={};131073&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}const h3=()=>"";function v3(i,t,n){let e,o,r,s;const c=kt("chatModel");Tt(i,c,p=>n(10,s=p));const a=kt("slashCommandModel"),{activeCommand:l}=a;Tt(i,l,p=>n(7,o=p));const u=kt(Ns.CONTEXT_KEY),$=s.flags;let f;return Tt(i,$,p=>n(8,r=p)),i.$$.update=()=>{320&i.$$.dirty&&n(0,e=function(p,_){let C=Cm();return _||(C=C.filter(M=>M.id!=="generate-commit-message")),p===void 0?C:C.filter(M=>M.label.toLowerCase().includes(p.toLowerCase()))}(f,r.enableGenerateCommitMessage)),128&i.$$.dirty&&(o?(u.commandManager.hide(),u.commandManager.clearContent()):(u.commandManager.show(),u.commandManager.clearContent(),u.commandManager.requestFocus()))},[e,c,a,l,$,function(p){n(6,f=p)},f,o,r,p=>(a.setActiveCommand(p.id),!0)]}class w3 extends ut{constructor(t){super(),dt(this,t,v3,g3,lt,{})}}const{window:is}=yf,y3=i=>({}),il=i=>({slot:"banner"});function sl(i){let t,n,e={requestEditorFocus:i[39],onMentionItemsUpdated:i[38]};return t=new d3({props:e}),i[58](t),{c(){v(t.$$.fragment)},m(o,r){w(t,o,r),n=!0},p(o,r){t.$set({})},i(o){n||(d(t.$$.fragment,o),n=!0)},o(o){m(t.$$.fragment,o),n=!1},d(o){i[58](null),y(t,o)}}}function al(i){let t,n;return t=new w3({}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function cl(i){let t,n,e,o;return t=new Ug({props:{saveImage:i[10].saveImage,deleteImage:i[10].deleteImage,renderImage:i[10].renderImage,maxImages:Or}}),e=new pg({}),{c(){v(t.$$.fragment),n=H(),v(e.$$.fragment)},m(r,s){w(t,r,s),b(r,n,s),w(e,r,s),o=!0},p(r,s){const c={};1024&s[0]&&(c.saveImage=r[10].saveImage),1024&s[0]&&(c.deleteImage=r[10].deleteImage),1024&s[0]&&(c.renderImage=r[10].renderImage),t.$set(c)},i(r){o||(d(t.$$.fragment,r),d(e.$$.fragment,r),o=!0)},o(r){m(t.$$.fragment,r),m(e.$$.fragment,r),o=!1},d(r){r&&x(n),y(t,r),y(e,r)}}}function ll(i){let t,n;return t=new i3({}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function x3(i){let t,n,e,o,r,s,c,a,l,u,$;t=new Nf({props:{shortcuts:i[17]}});let f=!i[28].doHideAtMentions&&sl(i),p=!i[9]&&!i[28].doHideSlashActions&&al();r=new Ff({props:{placeholder:i[14]}}),c=new em.Content({props:{content:i[27],onContentChanged:i[37]}});let _=i[10].flags.enableChatMultimodal&&!i[28].doHideMultimodalActions&&cl(i),C=i[30]&&!i[28].doHideSlashActions&&ll();return{c(){v(t.$$.fragment),n=H(),f&&f.c(),e=H(),p&&p.c(),o=H(),v(r.$$.fragment),s=H(),v(c.$$.fragment),a=H(),_&&_.c(),l=H(),C&&C.c(),u=ft()},m(M,T){w(t,M,T),b(M,n,T),f&&f.m(M,T),b(M,e,T),p&&p.m(M,T),b(M,o,T),w(r,M,T),b(M,s,T),w(c,M,T),b(M,a,T),_&&_.m(M,T),b(M,l,T),C&&C.m(M,T),b(M,u,T),$=!0},p(M,T){const E={};131072&T[0]&&(E.shortcuts=M[17]),t.$set(E),M[28].doHideAtMentions?f&&(q(),m(f,1,1,()=>{f=null}),j()):f?(f.p(M,T),268435456&T[0]&&d(f,1)):(f=sl(M),f.c(),d(f,1),f.m(e.parentNode,e)),M[9]||M[28].doHideSlashActions?p&&(q(),m(p,1,1,()=>{p=null}),j()):p?268435968&T[0]&&d(p,1):(p=al(),p.c(),d(p,1),p.m(o.parentNode,o));const R={};16384&T[0]&&(R.placeholder=M[14]),r.$set(R);const P={};134217728&T[0]&&(P.content=M[27]),c.$set(P),M[10].flags.enableChatMultimodal&&!M[28].doHideMultimodalActions?_?(_.p(M,T),268436480&T[0]&&d(_,1)):(_=cl(M),_.c(),d(_,1),_.m(l.parentNode,l)):_&&(q(),m(_,1,1,()=>{_=null}),j()),M[30]&&!M[28].doHideSlashActions?C?1342177280&T[0]&&d(C,1):(C=ll(),C.c(),d(C,1),C.m(u.parentNode,u)):C&&(q(),m(C,1,1,()=>{C=null}),j())},i(M){$||(d(t.$$.fragment,M),d(f),d(p),d(r.$$.fragment,M),d(c.$$.fragment,M),d(_),d(C),$=!0)},o(M){m(t.$$.fragment,M),m(f),m(p),m(r.$$.fragment,M),m(c.$$.fragment,M),m(_),m(C),$=!1},d(M){M&&(x(n),x(e),x(o),x(s),x(a),x(l),x(u)),y(t,M),f&&f.d(M),p&&p.d(M),y(r,M),y(c,M),_&&_.d(M),C&&C.d(M)}}}function b3(i){let t;const n=i[56].banner,e=Yt(n,i,i[60],il);return{c(){e&&e.c()},m(o,r){e&&e.m(o,r),t=!0},p(o,r){e&&e.p&&(!t||536870912&r[1])&&Xt(e,n,o,o[60],t?Jt(n,o[60],r,y3):Zt(o[60]),il)},i(o){t||(d(e,o),t=!0)},o(o){m(e,o),t=!1},d(o){e&&e.d(o)}}}function ul(i){let t,n;return t=new av({props:{chatModel:i[31]}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p:N,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function _3(i){let t,n,e=!i[28].doHideContextBar&&ul(i);return{c(){e&&e.c(),t=ft()},m(o,r){e&&e.m(o,r),b(o,t,r),n=!0},p(o,r){o[28].doHideContextBar?e&&(q(),m(e,1,1,()=>{e=null}),j()):e?(e.p(o,r),268435456&r[0]&&d(e,1)):(e=ul(o),e.c(),d(e,1),e.m(t.parentNode,t))},i(o){n||(d(e),n=!0)},o(o){m(e),n=!1},d(o){o&&x(t),e&&e.d(o)}}}function dl(i){let t,n;return t=new I0({props:{chatModel:i[31],agentConversationModel:i[32]}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p:N,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function $l(i){let t,n;return t=new yo.AddFileButton({props:{accept:".png,.jpg,.jpeg"}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function ml(i){let t,n;return t=new yo.ActionsMenu({props:{onCloseDropdown:i[39]}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p:N,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function fl(i){var e;let t,n;return t=new yo.ContextMenu({props:{onCloseDropdown:i[39],onInsertMentionable:(e=i[12])==null?void 0:e.insertMentionNode}}),{c(){v(t.$$.fragment)},m(o,r){w(t,o,r),n=!0},p(o,r){var c;const s={};4096&r[0]&&(s.onInsertMentionable=(c=o[12])==null?void 0:c.insertMentionNode),t.$set(s)},i(o){n||(d(t.$$.fragment,o),n=!0)},o(o){m(t.$$.fragment,o),n=!1},d(o){y(t,o)}}}function pl(i){let t,n,e,o;return{c(){t=L("span"),n=V(i[21]),e=V("/"),o=V(Br),A(t,"class","character-counter svelte-pwtee")},m(r,s){b(r,t,s),O(t,n),O(t,e),O(t,o)},p(r,s){2097152&s[0]&&bt(n,r[21])},d(r){r&&x(t)}}}function C3(i){let t;return{c(){t=V("Beta")},m(n,e){b(n,t,e)},d(n){n&&x(t)}}}function gl(i){let t,n;return t=new Vw({}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function A3(i){var M;let t,n,e,o,r,s,c,a,l=i[11].enableAgentMode&&i[2]&&dl(i),u=i[10].flags.enableChatMultimodal&&!i[28].doHideMultimodalActions&&$l(),$=!i[9]&&!i[28].doHideSlashActions&&ml(i),f=!i[28].doHideAtMentions&&fl(i),p=i[21]>Br&&pl(i),_=((M=i[33])==null?void 0:M.isActive)&&function(T){let E,R;return E=new k1({props:{color:"premium",size:1,variant:"soft",$$slots:{default:[C3]},$$scope:{ctx:T}}}),{c(){v(E.$$.fragment)},m(P,J){w(E,P,J),R=!0},i(P){R||(d(E.$$.fragment,P),R=!0)},o(P){m(E.$$.fragment,P),R=!1},d(P){y(E,P)}}}(i),C=i[24]&&gl();return{c(){l&&l.c(),t=H(),u&&u.c(),n=H(),$&&$.c(),e=H(),f&&f.c(),o=H(),p&&p.c(),r=H(),_&&_.c(),s=H(),C&&C.c(),c=ft()},m(T,E){l&&l.m(T,E),b(T,t,E),u&&u.m(T,E),b(T,n,E),$&&$.m(T,E),b(T,e,E),f&&f.m(T,E),b(T,o,E),p&&p.m(T,E),b(T,r,E),_&&_.m(T,E),b(T,s,E),C&&C.m(T,E),b(T,c,E),a=!0},p(T,E){T[11].enableAgentMode&&T[2]?l?(l.p(T,E),2052&E[0]&&d(l,1)):(l=dl(T),l.c(),d(l,1),l.m(t.parentNode,t)):l&&(q(),m(l,1,1,()=>{l=null}),j()),T[10].flags.enableChatMultimodal&&!T[28].doHideMultimodalActions?u?268436480&E[0]&&d(u,1):(u=$l(),u.c(),d(u,1),u.m(n.parentNode,n)):u&&(q(),m(u,1,1,()=>{u=null}),j()),T[9]||T[28].doHideSlashActions?$&&(q(),m($,1,1,()=>{$=null}),j()):$?($.p(T,E),268435968&E[0]&&d($,1)):($=ml(T),$.c(),d($,1),$.m(e.parentNode,e)),T[28].doHideAtMentions?f&&(q(),m(f,1,1,()=>{f=null}),j()):f?(f.p(T,E),268435456&E[0]&&d(f,1)):(f=fl(T),f.c(),d(f,1),f.m(o.parentNode,o)),T[21]>Br?p?p.p(T,E):(p=pl(T),p.c(),p.m(r.parentNode,r)):p&&(p.d(1),p=null),T[24]?C?16777216&E[0]&&d(C,1):(C=gl(),C.c(),d(C,1),C.m(c.parentNode,c)):C&&(q(),m(C,1,1,()=>{C=null}),j())},i(T){a||(d(l),d(u),d($),d(f),d(_),d(C),a=!0)},o(T){m(l),m(u),m($),m(f),m(_),m(C),a=!1},d(T){T&&(x(t),x(n),x(e),x(o),x(r),x(s),x(c)),l&&l.d(T),u&&u.d(T),$&&$.d(T),f&&f.d(T),p&&p.d(T),_&&_.d(T),C&&C.d(T)}}}function hl(i){var e;let t,n;return t=new yo.NotifyButton({props:{agentId:(e=i[7])==null?void 0:e.currentAgentId}}),{c(){v(t.$$.fragment)},m(o,r){w(t,o,r),n=!0},p(o,r){var c;const s={};128&r[0]&&(s.agentId=(c=o[7])==null?void 0:c.currentAgentId),t.$set(s)},i(o){n||(d(t.$$.fragment,o),n=!0)},o(o){m(t.$$.fragment,o),n=!1},d(o){y(t,o)}}}function M3(i){let t,n,e,o;t=new yo.RewritePromptButton({props:{onRewrite:i[41],isDisabled:i[13].isDisabled,disabledReason:i[13].disabledReason}});let r=i[3]&&vl(i);return{c(){v(t.$$.fragment),n=H(),r&&r.c(),e=ft()},m(s,c){w(t,s,c),b(s,n,c),r&&r.m(s,c),b(s,e,c),o=!0},p(s,c){const a={};8192&c[0]&&(a.isDisabled=s[13].isDisabled),8192&c[0]&&(a.disabledReason=s[13].disabledReason),t.$set(a),s[3]?r?(r.p(s,c),8&c[0]&&d(r,1)):(r=vl(s),r.c(),d(r,1),r.m(e.parentNode,e)):r&&(q(),m(r,1,1,()=>{r=null}),j())},i(s){o||(d(t.$$.fragment,s),d(r),o=!0)},o(s){m(t.$$.fragment,s),m(r),o=!1},d(s){s&&(x(n),x(e)),y(t,s),r&&r.d(s)}}}function k3(i){var e;let t,n;return t=new yo.ResendButton({props:{resendAction:(e=i[8])==null?void 0:e.resendLastExchange}}),{c(){v(t.$$.fragment)},m(o,r){w(t,o,r),n=!0},p(o,r){var c;const s={};256&r[0]&&(s.resendAction=(c=o[8])==null?void 0:c.resendLastExchange),t.$set(s)},i(o){n||(d(t.$$.fragment,o),n=!0)},o(o){m(t.$$.fragment,o),n=!1},d(o){y(t,o)}}}function S3(i){let t,n;return t=new yo.CancelButton({props:{cancelAction:i[32].interruptAgent}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p:N,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function T3(i){let t,n;return t=new yo.CancelButton({props:{cancelAction:i[19]}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};524288&o[0]&&(r.cancelAction=e[19]),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function vl(i){let t,n;return t=new yo.SendButton({props:{isDisabled:i[4],disabledReason:i[20],primaryAction:i[6]}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};16&o[0]&&(r.isDisabled=e[4]),1048576&o[0]&&(r.disabledReason=e[20]),64&o[0]&&(r.primaryAction=e[6]),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function E3(i){let t,n,e,o,r,s=i[29]&&hl(i);const c=[T3,S3,k3,M3],a=[];function l(u,$){return u[22]?0:u[15]?1:u[5]?2:3}return n=l(i),e=a[n]=c[n](i),{c(){s&&s.c(),t=H(),e.c(),o=ft()},m(u,$){s&&s.m(u,$),b(u,t,$),a[n].m(u,$),b(u,o,$),r=!0},p(u,$){u[29]?s?(s.p(u,$),536870912&$[0]&&d(s,1)):(s=hl(u),s.c(),d(s,1),s.m(t.parentNode,t)):s&&(q(),m(s,1,1,()=>{s=null}),j());let f=n;n=l(u),n===f?a[n].p(u,$):(q(),m(a[f],1,1,()=>{a[f]=null}),j(),e=a[n],e?e.p(u,$):(e=a[n]=c[n](u),e.c()),d(e,1),e.m(o.parentNode,o))},i(u){r||(d(s),d(e),r=!0)},o(u){m(s),m(e),r=!1},d(u){u&&(x(t),x(o)),s&&s.d(u),a[n].d(u)}}}function I3(i){let t,n;return t=new yo.Root({props:{slot:"footer",$$slots:{rightAlign:[E3],leftAlign:[A3]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};829997052&o[0]|536870912&o[1]&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function wl(i){let t,n,e={editable:i[1],$$slots:{footer:[I3],header:[_3],banner:[b3],default:[x3]},$$scope:{ctx:i}};return t=new em.Root({props:e}),i[59](t),{c(){v(t.$$.fragment)},m(o,r){w(t,o,r),n=!0},p(o,r){const s={};2&r[0]&&(s.editable=o[1]),2038104060&r[0]|536870912&r[1]&&(s.$$scope={dirty:r,ctx:o}),t.$set(s)},i(o){n||(d(t.$$.fragment,o),n=!0)},o(o){m(t.$$.fragment,o),n=!1},d(o){i[59](null),y(t,o)}}}function L3(i){let t,n,e,o,r=i[18],s=wl(i);return{c(){t=L("div"),s.c(),A(t,"class","c-chat-input svelte-pwtee"),A(t,"data-testid","design-system-chat-input")},m(c,a){b(c,t,a),s.m(t,null),n=!0,e||(o=[Dt(is,"focus",i[57]),Dt(is,"blur",function(){ze(i[10].saveImmediate)&&i[10].saveImmediate.apply(this,arguments)}),Dt(is,"beforeunload",function(){ze(i[10].saveImmediate)&&i[10].saveImmediate.apply(this,arguments)})],e=!0)},p(c,a){i=c,262144&a[0]&&lt(r,r=i[18])?(q(),m(s,1,1,N),j(),s=wl(i),s.c(),d(s,1),s.m(t,null)):s.p(i,a)},i(c){n||(d(s),n=!0)},o(c){m(s),n=!1},d(c){c&&x(t),s.d(c),e=!1,tn(o)}}}function R3(i,t,n){let e,o,r,s,c,a,l,u,$,f,p,_,C,M,T,E,R,P,J,K,et,U,G,nt,X,Y,Z,it,rt,ht,ct,vt,Gt,Ct,jt,Ve=N,ye=N,Ge=N,z=N;i.$$.on_destroy.push(()=>Ve()),i.$$.on_destroy.push(()=>ye()),i.$$.on_destroy.push(()=>Ge()),i.$$.on_destroy.push(()=>z());let{$$slots:S={},$$scope:F}=t;const tt=kt("chatModel");Tt(i,tt,Kt=>n(10,vt=Kt));const st=kt("toolsWebviewModel"),gt=kt("agentConversationModel"),_t=kt(Rn.key);Tt(i,_t,Kt=>n(7,Z=Kt));const Rt=kt(wr.key),ee=kt("slashCommandModel"),de=kt(ho.key),It=tt.flags;Tt(i,It,Kt=>n(11,Ct=Kt));const{currentConversationModel:he}=tt;Tt(i,he,Kt=>n(52,Y=Kt));const{activeCommand:Ze}=ee;Tt(i,Ze,Kt=>n(30,jt=Kt));let Le,ne,{editable:Ue=!0}=t,{placeholder:_n="Ask or instruct Augment"}=t,{hasToggleModeButton:Je=!0}=t,{hasSendButton:Cn=!0}=t,{richTextEditorRoot:Me}=t;const Jn=he.onNewConversation(()=>hn());let gn,en;qr(Jn);const Wn=()=>Me==null?void 0:Me.requestFocus(),hn=()=>{var Kt;return(Kt=Me==null?void 0:Me.forceFocus)==null?void 0:Kt.call(Me)},an=()=>(Me==null||Me.blur(),!0);let qe=!1;const Tn=Rt==null?void 0:Rt.currentRepositoryUrl;return Tt(i,Tn,Kt=>n(53,it=Kt)),i.$$set=Kt=>{"editable"in Kt&&n(1,Ue=Kt.editable),"placeholder"in Kt&&n(42,_n=Kt.placeholder),"hasToggleModeButton"in Kt&&n(2,Je=Kt.hasToggleModeButton),"hasSendButton"in Kt&&n(3,Cn=Kt.hasSendButton),"richTextEditorRoot"in Kt&&n(0,Me=Kt.richTextEditorRoot),"$$scope"in Kt&&n(60,F=Kt.$$scope)},i.$$.update=()=>{var Kt,fn,Dn,Pn,Un,Nn,Vn;if(128&i.$$.dirty[0]&&n(29,e=!!(Z!=null&&Z.isActive)),128&i.$$.dirty[0]&&n(28,o=D$(Z)),2097152&i.$$.dirty[1]&&n(51,r=Y.draftExchange||{rich_text_json_repr:void 0}),1048576&i.$$.dirty[1]&&n(27,s=r.rich_text_json_repr||{type:"doc",content:[{type:"paragraph"}]}),128&i.$$.dirty[0]|2097152&i.$$.dirty[1]&&n(50,c=Z!=null&&Z.isActive?"remoteAgent":(Kt=Y.extraData)!=null&&Kt.isAgentConversation?"localAgent":"chat"),1024&i.$$.dirty[0]|2625536&i.$$.dirty[1]&&vt.conversations[Y.id]&&yn.isNew(vt.conversations[Y.id])&&Le!==c&&(n(43,Le=c),c!=="remoteAgent"&&zo().then(()=>hn())),2629632&i.$$.dirty[1]&&ne!==Y.id&&(n(44,ne=Y.id),c!=="remoteAgent"&&zo().then(()=>hn())),128&i.$$.dirty[0]|16384&i.$$.dirty[1]){const He=(fn=Z==null?void 0:Z.currentAgent)==null?void 0:fn.status;gn!==rn.agentStarting||He!==rn.agentRunning&&He!==rn.agentIdle||zo().then(()=>hn()),n(45,gn=He)}if(640&i.$$.dirty[0]&&n(49,u=ct||(Z==null?void 0:Z.isActive)),2048&i.$$.dirty[0]|262144&i.$$.dirty[1]&&n(24,$=u&&Ct.enableModelRegistry),1024&i.$$.dirty[0]&&(n(23,f=vt.sendModeModel.mode),z(),z=ie(f,He=>n(55,Gt=He))),1153&i.$$.dirty[0]|16777216&i.$$.dirty[1]&&n(48,p=Xg(vt,gt,st,ee,Gt,de,Z,Rt,Me)),131072&i.$$.dirty[1]&&n(22,_=p.showCancelButton),2097152&i.$$.dirty[1]&&n(21,C=((Pn=(Dn=Y.draftExchange)==null?void 0:Dn.request_message)==null?void 0:Pn.length)||0),131072&i.$$.dirty[1]&&n(4,M=p.isDisabled),131072&i.$$.dirty[1]&&n(20,T=p.disabledReason),131072&i.$$.dirty[1]&&n(6,E=p.action),131072&i.$$.dirty[1]&&n(19,R=p.cancelAction),640&i.$$.dirty[0]|2048&i.$$.dirty[1]&&n(18,P=`${ct}-${Z==null?void 0:Z.isActive}-${_n}`),64&i.$$.dirty[0]&&n(17,J={Enter:E,Escape:an}),1024&i.$$.dirty[0]&&(n(16,K=vt.currentConversationModel),Ve(),Ve=ie(K,He=>n(8,rt=He))),256&i.$$.dirty[0]){const He=(Un=rt==null?void 0:rt.lastExchange)==null?void 0:Un.status,En=He===on.cancelled,xe=rt==null?void 0:rt.getLastToolUseState().phase,je=xe===Ce.cancelled;n(46,qe=En||je)}640&i.$$.dirty[0]|8388608&i.$$.dirty[1]&&n(15,et=!(Z!=null&&Z.isActive)&&ct&&ht!==Pr.notRunning),128&i.$$.dirty[0]|2129920&i.$$.dirty[1]&&n(5,U=!(Z!=null&&Z.isActive)&&qe&&((Nn=Y.draftExchange)==null?void 0:Nn.request_message)===""),256&i.$$.dirty[0]&&n(47,G=(Vn=rt==null?void 0:rt.lastExchange)==null?void 0:Vn.request_message),32&i.$$.dirty[0]|67584&i.$$.dirty[1]&&n(14,nt=U&&G?G:_n),144&i.$$.dirty[0]|4194304&i.$$.dirty[1]&&n(13,X=function(He,En,xe){var Vt,Mt,Ut;if(xe)return{isDisabled:!0,disabledReason:void 0};if(!(He!=null&&He.isActive))return{isDisabled:!1,disabledReason:void 0};const je=(Ut=(Mt=(Vt=He.newAgentDraft)==null?void 0:Vt.commitRef)==null?void 0:Mt.github_commit_ref)==null?void 0:Ut.repository_url;if(!je)return{isDisabled:!1,disabledReason:void 0};const cn=En||"";return cn&&je!==cn?{isDisabled:!0,disabledReason:"Prompt enhancer is only available when the current repository is selected"}:{isDisabled:!1,disabledReason:void 0}}(Z,it,M))},n(26,{isCurrConversationAgentic:a,agentExchangeStatus:l}=gt,a,(n(25,l),ye(),ye=ie(l,Kt=>n(54,ht=Kt)),l)),Ge(),Ge=ie(a,Kt=>n(9,ct=Kt)),[Me,Ue,Je,Cn,M,U,E,Z,rt,ct,vt,Ct,en,X,nt,et,K,J,P,R,T,C,_,f,$,l,a,s,o,e,jt,tt,gt,_t,It,he,Ze,function(Kt){Y.saveDraftExchange(Kt.rawText,Kt.richTextJsonRepr)},function(Kt){Y.saveDraftMentions(Kt.current)},Wn,Tn,async function(){var Kt,fn,Dn,Pn,Un;try{const Nn=((Kt=Y.draftExchange)==null?void 0:Kt.request_message)||"";if(!Nn||Nn.trim()==="")return;const Vn=`Here is an instruction that I'd like to give you, but it needs to be improved. Rewrite and enhance this instruction to make it clearer, more specific, less ambiguous, and correct any mistakes. Do not use any tools: reply immediately with your answer, even if you're not sure. Consider the context of our conversation history when enhancing the prompt. Reply with the following format:

### BEGIN RESPONSE ###
Here is an enhanced version of the original instruction that is more specific and clear:
<augment-enhanced-prompt>enhanced prompt goes here</augment-enhanced-prompt>

### END RESPONSE ###

Here is my original instruction:`,He=(fn=Y.draftExchange)==null?void 0:fn.rich_text_json_repr;try{let En;Z!=null&&Z.isActive&&(En=Z.getCurrentChatHistory().map(Mt=>({request_id:Mt.request_id||"",request_message:Mt.request_message,response_text:Mt.response_text||""})));let{responseText:xe}=await Y.sendSilentExchange({request_message:`${Vn}

${Nn}`,disableRetrieval:!1,chatHistory:En});Y.extensionClient.reportAgentSessionEvent({eventName:Ai.enhancedPrompt,conversationId:Y.id});let je="";const cn=/<augment-enhanced-prompt>([\s\S]*?)<\/augment-enhanced-prompt>/,Vt=xe.match(cn);if(Vt&&Vt[1])je=Vt[1].trim();else{je=Nn,console.warn("Enhanced prompt tags not found in response, using original prompt");const Mt=document.createElement("div");Mt.className="enhance-prompt-error-tooltip",Mt.textContent="Failed to enhance prompt, sorry about that",document.body.appendChild(Mt);const Ut=wf(Mt,{content:Mt,trigger:"manual",placement:"top",theme:"error",duration:[300,2e3],onHidden:()=>{Mt.remove()}}),Ae=document.querySelector(".c-rewrite-prompt-button");Ae?(Ut.setProps({getReferenceClientRect:()=>Ae.getBoundingClientRect()}),Ut.show(),setTimeout(()=>{Ut.hide()},3e3)):Mt.remove()}if(je&&je.trim()!==""){const Mt=(Dn=Y.draftExchange)==null?void 0:Dn.rich_text_json_repr;let Ut;if(Mt&&typeof Mt=="object"){if(Ut={...Mt},Ut.content&&Array.isArray(Ut.content)){const Ae=[];let we=!1;for(const ge of Ut.content)if(ge.type!=="paragraph"||we)ge.type!=="paragraph"&&Ae.push(ge);else{const Pe=je.split(`
`),St={type:"paragraph",content:[]};Pe.forEach((Te,Fe)=>{var Qn,Eo;Te.length>0&&((Qn=St.content)==null||Qn.push({type:"text",text:Te})),Fe<Pe.length-1&&((Eo=St.content)==null||Eo.push({type:"hardBreak"}))}),Ae.push(St),we=!0}Ut.content=Ae}}else Ut={type:"doc",content:[{type:"paragraph",content:[{type:"text",text:je}]}]};Y.saveDraftExchange(je,Ut),setTimeout(()=>{hn();try{const Ae=document.querySelector(".ProseMirror");if(Ae){const we=Ae.querySelector("p");if(we){const ge=document.createRange(),Pe=window.getSelection();ge.setStart(we,0),ge.collapse(!0),Pe&&(Pe.removeAllRanges(),Pe.addRange(ge))}}}catch{}},200)}else Y.saveDraftExchange(He&&((Pn=Y.draftExchange)==null?void 0:Pn.request_message)||"",He||{type:"doc",content:[]})}catch{Y.saveDraftExchange(He&&((Un=Y.draftExchange)==null?void 0:Un.request_message)||"",He||{type:"doc",content:[]})}hn()}catch{}},_n,Le,ne,gn,qe,G,p,u,c,r,Y,it,ht,Gt,S,()=>{e||Wn()},function(Kt){Qt[Kt?"unshift":"push"](()=>{en=Kt,n(12,en)})},function(Kt){Qt[Kt?"unshift":"push"](()=>{Me=Kt,n(0,Me)})},F]}class Pm extends ut{constructor(t){super(),dt(this,t,R3,L3,lt,{editable:1,placeholder:42,hasToggleModeButton:2,hasSendButton:3,richTextEditorRoot:0},null,[-1,-1,-1])}}const D3=i=>({}),yl=i=>({}),P3=i=>({}),xl=i=>({}),N3=i=>({}),bl=i=>({}),F3=i=>({}),_l=i=>({}),O3=i=>({}),Cl=i=>({}),z3=i=>({}),Al=i=>({}),B3=i=>({}),Ml=i=>({});function H3(i){let t,n,e,o,r,s,c,a,l,u,$,f,p,_,C;const M=i[1]["header-area"],T=Yt(M,i,i[0],Ml),E=i[1]["floating-area"],R=Yt(E,i,i[0],Al),P=i[1]["message-area"],J=Yt(P,i,i[0],Cl),K=i[1]["divider-area"],et=Yt(K,i,i[0],_l),U=i[1]["actions-area"],G=Yt(U,i,i[0],bl),nt=i[1]["input-area"],X=Yt(nt,i,i[0],xl),Y=i[1]["footer-area"],Z=Yt(Y,i,i[0],yl);return{c(){t=L("div"),n=L("div"),e=L("div"),T&&T.c(),o=H(),r=L("div"),R&&R.c(),s=H(),c=L("div"),a=L("div"),J&&J.c(),l=H(),u=L("div"),et&&et.c(),$=H(),f=L("div"),G&&G.c(),p=H(),X&&X.c(),_=H(),Z&&Z.c(),A(e,"class","l-chat__header svelte-84kn6v"),A(r,"class","l-chat__floating svelte-84kn6v"),A(a,"class","l-chat__msg_area_body svelte-84kn6v"),A(c,"class","l-chat__msg_area svelte-84kn6v"),A(n,"class","l-chat svelte-84kn6v"),A(n,"data-testid","main-chat"),A(n,"data-vscode-context",JSON.stringify({preventDefaultContextMenuItems:!0})),A(u,"class","l-chat__divider_area svelte-84kn6v"),A(f,"class","l-chat__input_area svelte-84kn6v"),A(t,"class","l-chat-wrapper svelte-84kn6v")},m(it,rt){b(it,t,rt),O(t,n),O(n,e),T&&T.m(e,null),O(n,o),O(n,r),R&&R.m(r,null),O(n,s),O(n,c),O(c,a),J&&J.m(a,null),O(t,l),O(t,u),et&&et.m(u,null),O(t,$),O(t,f),G&&G.m(f,null),O(f,p),X&&X.m(f,null),O(f,_),Z&&Z.m(f,null),C=!0},p(it,[rt]){T&&T.p&&(!C||1&rt)&&Xt(T,M,it,it[0],C?Jt(M,it[0],rt,B3):Zt(it[0]),Ml),R&&R.p&&(!C||1&rt)&&Xt(R,E,it,it[0],C?Jt(E,it[0],rt,z3):Zt(it[0]),Al),J&&J.p&&(!C||1&rt)&&Xt(J,P,it,it[0],C?Jt(P,it[0],rt,O3):Zt(it[0]),Cl),et&&et.p&&(!C||1&rt)&&Xt(et,K,it,it[0],C?Jt(K,it[0],rt,F3):Zt(it[0]),_l),G&&G.p&&(!C||1&rt)&&Xt(G,U,it,it[0],C?Jt(U,it[0],rt,N3):Zt(it[0]),bl),X&&X.p&&(!C||1&rt)&&Xt(X,nt,it,it[0],C?Jt(nt,it[0],rt,P3):Zt(it[0]),xl),Z&&Z.p&&(!C||1&rt)&&Xt(Z,Y,it,it[0],C?Jt(Y,it[0],rt,D3):Zt(it[0]),yl)},i(it){C||(d(T,it),d(R,it),d(J,it),d(et,it),d(G,it),d(X,it),d(Z,it),C=!0)},o(it){m(T,it),m(R,it),m(J,it),m(et,it),m(G,it),m(X,it),m(Z,it),C=!1},d(it){it&&x(t),T&&T.d(it),R&&R.d(it),J&&J.d(it),et&&et.d(it),G&&G.d(it),X&&X.d(it),Z&&Z.d(it)}}}function U3(i,t,n){let{$$slots:e={},$$scope:o}=t;return i.$$set=r=>{"$$scope"in r&&n(0,o=r.$$scope)},[o,e]}class q3 extends ut{constructor(t){super(),dt(this,t,U3,H3,lt,{})}}class j3{constructor(t,n){$t(this,"subscribers",new Set);$t(this,"isAutofixConversation",()=>B1(this._conversationModel));$t(this,"subscribe",t=>(this.subscribers.add(t),t(this),()=>{this.subscribers.delete(t)}));$t(this,"notifySubscribers",()=>{this.subscribers.forEach(t=>t(this))});$t(this,"update",t=>{this._conversationModel.extraData={...this.extraData,...t},this.notifySubscribers(),this.sendAutofixStateUpdate()});$t(this,"shouldShowAutofixCommandInput",()=>{var t;return!((t=this.extraData.autofixIterations)!=null&&t.length)});$t(this,"launchAutofixPanel",async(t,n)=>{await this._extensionClient.launchAutofixPanel(this.conversationId,t,n)});this._conversationModel=t,this._extensionClient=n,this._conversationModel.subscribe(e=>this.notifySubscribers())}get conversationId(){return this._conversationModel.id}async sendAutofixStateUpdate(){await this._extensionClient.sendAutofixStateUpdate(this._conversationModel.extraData)}setCommand(t){this.update({autofixCommand:t})}get extraData(){return this._conversationModel.extraData}addChatItem(t){this._conversationModel.addChatItem(t)}getAutofixIteration(t){var n;return(n=this.extraData.autofixIterations)==null?void 0:n.find(e=>e.id===t)}insertNewAutofixIteration(t){this.update({autofixIterations:[...this.extraData.autofixIterations||[],t]})}updateAutofixIteration(t){const n=this.extraData.autofixIterations||[],e=n.findIndex(o=>o.id===t.id);if(e===-1)throw new Error(`No autofix iteration found with id ${t.id}`);this.update({autofixIterations:n.map((o,r)=>r===e?{...o,...t}:o)})}async handleFixWasApplied(t){var e,o;const n=(o=(e=this.extraData.autofixIterations)==null?void 0:e.at(-1))==null?void 0:o.id;if(!n)throw new Error("No latest iteration found");this.updateAutofixIteration({id:n,selectedSolutions:t}),await this.startNewAutofixIteration()}async handleUserSteering(t){var o,r;const n=(o=this.extraData.autofixIterations)==null?void 0:o.at(-1);if(!n)throw new Error("No latest iteration found");const e=(r=n.suggestedSolutions)==null?void 0:r.at(-1);if(!e)throw new Error("No latest suggested solution found");this.addChatItem({chatItemType:mo.autofixSteeringMessage,request_id:crypto.randomUUID(),status:on.sent,response_text:t}),this.update({autofixSteeringHistory:[...this.extraData.autofixSteeringHistory||[],{requestId:crypto.randomUUID(),requestMessage:t,summary:e.summary,replacements:e.originalReplacements}]}),await this.planSolution(n.id)}async startNewAutofixIteration(){var r;const t=this.extraData.autofixCommand;if(!t)throw new Error("No command set");const n=this.extraData,e=crypto.randomUUID(),o=!((r=n.autofixIterations)!=null&&r.length);this.insertNewAutofixIteration({id:e,currentStage:ur.runTest,commandOutput:"",isFirstIteration:o}),this.addChatItem({chatItemType:mo.autofixStage,request_id:crypto.randomUUID(),iterationId:e,status:on.sent,stage:ur.runTest}),await this.launchAutofixPanel(e,ur.runTest);try{const s=t.split(" "),c=s[0],a=s.slice(1),l=await this._extensionClient.executeCommand(e,c,a),u=l.returnCode!==0;if(this.updateAutofixIteration({id:e,commandOutput:l.output,commandFailed:u}),!u)return e}catch(s){return console.error("[ConversationModel] Error executing command:",s),this.updateAutofixIteration({id:e,commandOutput:String(s),commandFailed:!0}),e}return await this.planSolution(e),e}async planSolution(t){var r,s;const n=this.extraData.autofixCommand;if(!n)throw new Error("No command set");const e=this.getAutofixIteration(t);if(!e)throw new Error(`No iteration found with id ${t}`);this.updateAutofixIteration({id:t,currentStage:ur.applyFix}),this.addChatItem({chatItemType:mo.autofixStage,request_id:crypto.randomUUID(),iterationId:t,status:on.sent,stage:ur.applyFix,stageCount:((r=e.suggestedSolutions)==null?void 0:r.length)||0});const o=await this._extensionClient.autofixPlan({input:n,output:((s=this.getAutofixIteration(t))==null?void 0:s.commandOutput)||""},this.extraData.autofixSteeringHistory);this.addChatItem({chatItemType:mo.autofixMessage,request_id:crypto.randomUUID(),status:on.sent,response_text:o.summary}),this.updateAutofixIteration({id:t,suggestedSolutions:[...e.suggestedSolutions||[],o]}),await this.launchAutofixPanel(t,ur.applyFix)}handleMessageFromExtension(t){const n=t.data;switch(n.type){case We.chatAutofixStateUpdateRequest:return this.sendAutofixStateUpdate(),!0;case We.chatAutofixSuggestionsApplied:return this.handleFixWasApplied(n.data.selectedSolutions),!0;default:return!1}}initializeAutofixConversation(){this.update({isAutofix:!0,autofixIterations:[]});const t={chatItemType:mo.autofixMessage,request_id:crypto.randomUUID(),status:on.success,response_text:"Autofix enables you to run your tests and suggests fixes for you. Start by typing a command to run your test such as `pytest path/to/test`"};this._conversationModel.chatHistory.push(t)}}function W3(i){let t,n;return t=new qo({props:{iconName:"play_arrow"}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p:N,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function V3(i){let t,n,e,o,r,s;function c(l){i[2](l)}let a={placeholder:"Enter test command (e.g. pytest path/to/test.py)",variant:"surface",size:2};return i[0]!==void 0&&(a.value=i[0]),n=new ir({props:a}),Qt.push(()=>Ne(n,"value",c)),n.$on("keydown",i[1]),r=new ve({props:{disabled:!i[0],size:2,variant:"solid",color:"accent",$$slots:{default:[W3]},$$scope:{ctx:i}}}),r.$on("click",i[3]),{c(){t=L("div"),v(n.$$.fragment),o=H(),v(r.$$.fragment),A(t,"class","command-input-container svelte-3c7cic")},m(l,u){b(l,t,u),w(n,t,null),O(t,o),w(r,t,null),s=!0},p(l,[u]){const $={};!e&&1&u&&(e=!0,$.value=l[0],Be(()=>e=!1)),n.$set($);const f={};1&u&&(f.disabled=!l[0]),64&u&&(f.$$scope={dirty:u,ctx:l}),r.$set(f)},i(l){s||(d(n.$$.fragment,l),d(r.$$.fragment,l),s=!0)},o(l){m(n.$$.fragment,l),m(r.$$.fragment,l),s=!1},d(l){l&&x(t),y(n),y(r)}}}function G3(i,t,n){const e=kt("autofixConversationModel");if(!e)throw new Error("AutofixConversationModel not found in context");let o="";async function r(s){return!(s.shiftKey||s.ctrlKey||s.metaKey)&&(s.stopPropagation(),s.key==="Enter"&&o.length>0?(e.setCommand(o),await e.startNewAutofixIteration(),n(0,o=""),!0):s.key==="Escape")}return so(()=>{const s=document.querySelector("input");s&&(s.focus(),s.select())}),[o,r,function(s){o=s,n(0,o)},()=>r(new KeyboardEvent("keydown",{key:"Enter"}))]}class K3 extends ut{constructor(t){super(),dt(this,t,G3,V3,lt,{})}}function Y3(i){let t,n,e,o,r,s;return n=new Wt({props:{size:1,color:"error",$$slots:{default:[X3]},$$scope:{ctx:i}}}),r=new Wt({props:{size:1,color:"error",$$slots:{default:[Z3]},$$scope:{ctx:i}}}),{c(){t=L("div"),v(n.$$.fragment),e=H(),o=L("div"),v(r.$$.fragment),A(t,"class","c-lazy-loading-error"),A(o,"class","c-lazy-loading-error")},m(c,a){b(c,t,a),w(n,t,null),b(c,e,a),b(c,o,a),w(r,o,null),s=!0},i(c){s||(d(n.$$.fragment,c),d(r.$$.fragment,c),s=!0)},o(c){m(n.$$.fragment,c),m(r.$$.fragment,c),s=!1},d(c){c&&(x(t),x(e),x(o)),y(n),y(r)}}}function X3(i){let t;return{c(){t=V(`Failed to load agent setup. Please try closing and re-opening the panel, or contact support
      if this problem persists.`)},m(n,e){b(n,t,e)},d(n){n&&x(t)}}}function Z3(i){let t;return{c(){t=V(i[2])},m(n,e){b(n,t,e)},p:N,d(n){n&&x(t)}}}function J3(i){let t,n;return function(e){e[0]=e[1].default}(i),t=new i[0]({}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function Q3(i){let t,n,e,o,r;return n=new ro({props:{size:1}}),o=new Wt({props:{size:1,color:"secondary",$$slots:{default:[ty]},$$scope:{ctx:i}}}),{c(){t=L("div"),v(n.$$.fragment),e=H(),v(o.$$.fragment),A(t,"class","c-lazy-loading-container")},m(s,c){b(s,t,c),w(n,t,null),O(t,e),w(o,t,null),r=!0},i(s){r||(d(n.$$.fragment,s),d(o.$$.fragment,s),r=!0)},o(s){m(n.$$.fragment,s),m(o.$$.fragment,s),r=!1},d(s){s&&x(t),y(n),y(o)}}}function ty(i){let t;return{c(){t=V("Loading agent setup...")},m(n,e){b(n,t,e)},d(n){n&&x(t)}}}function ey(i){let t,n,e={ctx:i,current:null,token:null,hasCatch:!0,pending:Q3,then:J3,catch:Y3,value:1,error:2,blocks:[,,,]};return Bo(qi(()=>import("./RemoteAgentSetup-BlBDyxhf.js"),__vite__mapDeps([5,1,2,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,3,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,0,4,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73]),import.meta.url),e),{c(){t=ft(),e.block.c()},m(o,r){b(o,t,r),e.block.m(o,e.anchor=r),e.mount=()=>t.parentNode,e.anchor=t,n=!0},p(o,[r]){i=o},i(o){n||(d(e.block),n=!0)},o(o){for(let r=0;r<3;r+=1){const s=e.blocks[r];m(s)}n=!1},d(o){o&&x(t),e.block.d(o),e.token=null,e=null}}}class ny extends ut{constructor(t){super(),dt(this,t,null,ey,lt,{})}}function oy(i){let t,n,e,o,r;return{c(){t=V("Error loading message list: "),n=V(i[0]),e=H(),o=L("br"),r=V(`
    Please consider restarting your extension, or contact support if this problem persists.`)},m(s,c){b(s,t,c),b(s,n,c),b(s,e,c),b(s,o,c),b(s,r,c)},p(s,c){1&c&&bt(n,s[0])},d(s){s&&(x(t),x(n),x(e),x(o),x(r))}}}function ry(i){let t,n;return t=new jn({props:{slot:"icon"}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p:N,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function iy(i){let t,n,e;return n=new Zn({props:{variant:"soft",color:"error",$$slots:{icon:[ry],default:[oy]},$$scope:{ctx:i}}}),{c(){t=L("div"),v(n.$$.fragment),A(t,"class","l-error-message svelte-1w3i40p")},m(o,r){b(o,t,r),w(n,t,null),e=!0},p(o,[r]){const s={};3&r&&(s.$$scope={dirty:r,ctx:o}),n.$set(s)},i(o){e||(d(n.$$.fragment,o),e=!0)},o(o){m(n.$$.fragment,o),e=!1},d(o){o&&x(t),y(n)}}}function sy(i,t,n){let{errorMessage:e}=t;return i.$$set=o=>{"errorMessage"in o&&n(0,e=o.errorMessage)},[e]}class Nm extends ut{constructor(t){super(),dt(this,t,sy,iy,lt,{errorMessage:0})}}function ay(i){let t,n,e={ctx:i,current:null,token:null,hasCatch:!0,pending:my,then:uy,catch:ly,value:17,error:18,blocks:[,,,]};return Bo(qi(()=>import("./MessageList-C4JGFtcq.js"),__vite__mapDeps([74,1,2,12,13,75,24,25,9,8,3,21,22,26,27,28,65,66,61,71,76,6,7,38,29,30,17,18,19,39,20,15,23,31,32,33,34,35,36,37,40,41,42,43,0,4,44,45,60,67,68,11,14,46,16,47,64,77,78,79,80,81,62,63,82,83,48,49,52,84,50,51,53,85,56,57,10,86,58,59,54,55,69,70,72,87]),import.meta.url),e),{c(){t=ft(),e.block.c()},m(o,r){b(o,t,r),e.block.m(o,e.anchor=r),e.mount=()=>t.parentNode,e.anchor=t,n=!0},p(o,r){Vr(e,i=o,r)},i(o){n||(d(e.block),n=!0)},o(o){for(let r=0;r<3;r+=1){const s=e.blocks[r];m(s)}n=!1},d(o){o&&x(t),e.block.d(o),e.token=null,e=null}}}function cy(i){let t,n,e={ctx:i,current:null,token:null,hasCatch:!0,pending:yy,then:hy,catch:gy,value:17,error:18,blocks:[,,,]};return Bo(qi(()=>import("./VirtualizedMessageList-D3-LlC6_.js"),__vite__mapDeps([88,1,2,12,13,75,24,25,9,8,3,21,22,26,27,28,65,66,61,71,76,6,7,38,29,30,17,18,19,39,20,15,23,31,32,33,34,35,36,37,40,41,42,43,0,4,44,45,60,67,68,11,14,46,16,47,64,77,78,79,80,81,62,63,82,83,48,49,52,84,50,51,53,85,56,57,10,86,58,59,54,55,69,70,72,89]),import.meta.url),e),{c(){t=ft(),e.block.c()},m(o,r){b(o,t,r),e.block.m(o,e.anchor=r),e.mount=()=>t.parentNode,e.anchor=t,n=!0},p(o,r){Vr(e,i=o,r)},i(o){n||(d(e.block),n=!0)},o(o){for(let r=0;r<3;r+=1){const s=e.blocks[r];m(s)}n=!1},d(o){o&&x(t),e.block.d(o),e.token=null,e=null}}}function ly(i){let t,n,e;return n=new Nm({props:{errorMessage:i[18].message}}),{c(){t=L("div"),v(n.$$.fragment),A(t,"class","l-center-contents svelte-mlzu3y"),A(t,"data-testid","l-lazy-message-list-loading-error")},m(o,r){b(o,t,r),w(n,t,null),e=!0},p:N,i(o){e||(d(n.$$.fragment,o),e=!0)},o(o){m(n.$$.fragment,o),e=!1},d(o){o&&x(t),y(n)}}}function uy(i){let t,n,e=i[3],o=kl(i);return{c(){o.c(),t=ft()},m(r,s){o.m(r,s),b(r,t,s),n=!0},p(r,s){8&s&&lt(e,e=r[3])?(q(),m(o,1,1,N),j(),o=kl(r),o.c(),d(o,1),o.m(t.parentNode,t)):o.p(r,s)},i(r){n||(d(o),n=!0)},o(r){m(o),n=!1},d(r){r&&x(t),o.d(r)}}}function dy(i){let t,n,e;const o=[{chatModel:i[0]},{onboardingWorkspaceModel:i[1]},i[8]];var r=i[17].default;function s(c,a){let l={};for(let u=0;u<o.length;u+=1)l=Et(l,o[u]);return a!==void 0&&259&a&&(l=Et(l,De(o,[1&a&&{chatModel:c[0]},2&a&&{onboardingWorkspaceModel:c[1]},256&a&&go(c[8])]))),{props:l}}return r&&(t=sn(r,s(i))),{c(){t&&v(t.$$.fragment),n=ft()},m(c,a){t&&w(t,c,a),b(c,n,a),e=!0},p(c,a){if(r!==(r=c[17].default)){if(t){q();const l=t;m(l.$$.fragment,1,0,()=>{y(l,1)}),j()}r?(t=sn(r,s(c,a)),v(t.$$.fragment),d(t.$$.fragment,1),w(t,n.parentNode,n)):t=null}else if(r){const l=259&a?De(o,[1&a&&{chatModel:c[0]},2&a&&{onboardingWorkspaceModel:c[1]},256&a&&go(c[8])]):{};t.$set(l)}},i(c){e||(t&&d(t.$$.fragment,c),e=!0)},o(c){t&&m(t.$$.fragment,c),e=!1},d(c){c&&x(n),t&&y(t,c)}}}function $y(i){let t;return{c(){t=L("div"),A(t,"class","l-center-contents svelte-mlzu3y"),A(t,"data-testid","l-lazy-message-list-center-contents")},m(n,e){b(n,t,e)},p:N,i:N,o:N,d(n){n&&x(t)}}}function kl(i){let t,n,e,o;const r=[$y,dy],s=[];function c(a,l){return a[5]?0:1}return t=c(i),n=s[t]=r[t](i),{c(){n.c(),e=ft()},m(a,l){s[t].m(a,l),b(a,e,l),o=!0},p(a,l){let u=t;t=c(a),t===u?s[t].p(a,l):(q(),m(s[u],1,1,()=>{s[u]=null}),j(),n=s[t],n?n.p(a,l):(n=s[t]=r[t](a),n.c()),d(n,1),n.m(e.parentNode,e))},i(a){o||(d(n),o=!0)},o(a){m(n),o=!1},d(a){a&&x(e),s[t].d(a)}}}function my(i){let t,n=i[3],e=Sl(i);return{c(){e.c(),t=ft()},m(o,r){e.m(o,r),b(o,t,r)},p(o,r){8&r&&lt(n,n=o[3])?(e.d(1),e=Sl(o),e.c(),e.m(t.parentNode,t)):e.p(o,r)},i:N,o:N,d(o){o&&x(t),e.d(o)}}}function fy(i){let t;return{c(){t=L("div"),t.textContent="Loading...",A(t,"class","l-center-contents svelte-mlzu3y")},m(n,e){b(n,t,e)},d(n){n&&x(t)}}}function py(i){let t;return{c(){t=L("div"),A(t,"class","l-center-contents svelte-mlzu3y")},m(n,e){b(n,t,e)},d(n){n&&x(t)}}}function Sl(i){let t;function n(r,s){return r[5]?py:fy}let e=n(i),o=e(i);return{c(){o.c(),t=ft()},m(r,s){o.m(r,s),b(r,t,s)},p(r,s){e!==(e=n(r))&&(o.d(1),o=e(r),o&&(o.c(),o.m(t.parentNode,t)))},d(r){r&&x(t),o.d(r)}}}function gy(i){let t,n,e;return n=new Nm({props:{errorMessage:i[18].message}}),{c(){t=L("div"),v(n.$$.fragment),A(t,"class","l-center-contents svelte-mlzu3y"),A(t,"data-testid","l-lazy-message-list-loading-error")},m(o,r){b(o,t,r),w(n,t,null),e=!0},p:N,i(o){e||(d(n.$$.fragment,o),e=!0)},o(o){m(n.$$.fragment,o),e=!1},d(o){o&&x(t),y(n)}}}function hy(i){let t,n,e=i[3],o=Tl(i);return{c(){o.c(),t=ft()},m(r,s){o.m(r,s),b(r,t,s),n=!0},p(r,s){8&s&&lt(e,e=r[3])?(q(),m(o,1,1,N),j(),o=Tl(r),o.c(),d(o,1),o.m(t.parentNode,t)):o.p(r,s)},i(r){n||(d(o),n=!0)},o(r){m(o),n=!1},d(r){r&&x(t),o.d(r)}}}function vy(i){let t,n,e;const o=[{chatModel:i[0]},{onboardingWorkspaceModel:i[1]},i[8]];var r=i[17].default;function s(c,a){let l={};for(let u=0;u<o.length;u+=1)l=Et(l,o[u]);return a!==void 0&&259&a&&(l=Et(l,De(o,[1&a&&{chatModel:c[0]},2&a&&{onboardingWorkspaceModel:c[1]},256&a&&go(c[8])]))),{props:l}}return r&&(t=sn(r,s(i))),{c(){t&&v(t.$$.fragment),n=ft()},m(c,a){t&&w(t,c,a),b(c,n,a),e=!0},p(c,a){if(r!==(r=c[17].default)){if(t){q();const l=t;m(l.$$.fragment,1,0,()=>{y(l,1)}),j()}r?(t=sn(r,s(c,a)),v(t.$$.fragment),d(t.$$.fragment,1),w(t,n.parentNode,n)):t=null}else if(r){const l=259&a?De(o,[1&a&&{chatModel:c[0]},2&a&&{onboardingWorkspaceModel:c[1]},256&a&&go(c[8])]):{};t.$set(l)}},i(c){e||(t&&d(t.$$.fragment,c),e=!0)},o(c){t&&m(t.$$.fragment,c),e=!1},d(c){c&&x(n),t&&y(t,c)}}}function wy(i){let t;return{c(){t=L("div"),A(t,"class","l-center-contents svelte-mlzu3y"),A(t,"data-testid","l-lazy-message-list-center-contents")},m(n,e){b(n,t,e)},p:N,i:N,o:N,d(n){n&&x(t)}}}function Tl(i){let t,n,e,o;const r=[wy,vy],s=[];function c(a,l){return a[5]?0:1}return t=c(i),n=s[t]=r[t](i),{c(){n.c(),e=ft()},m(a,l){s[t].m(a,l),b(a,e,l),o=!0},p(a,l){let u=t;t=c(a),t===u?s[t].p(a,l):(q(),m(s[u],1,1,()=>{s[u]=null}),j(),n=s[t],n?n.p(a,l):(n=s[t]=r[t](a),n.c()),d(n,1),n.m(e.parentNode,e))},i(a){o||(d(n),o=!0)},o(a){m(n),o=!1},d(a){a&&x(e),s[t].d(a)}}}function yy(i){let t,n=i[3],e=El(i);return{c(){e.c(),t=ft()},m(o,r){e.m(o,r),b(o,t,r)},p(o,r){8&r&&lt(n,n=o[3])?(e.d(1),e=El(o),e.c(),e.m(t.parentNode,t)):e.p(o,r)},i:N,o:N,d(o){o&&x(t),e.d(o)}}}function xy(i){let t;return{c(){t=L("div"),t.textContent="Loading...",A(t,"class","l-center-contents svelte-mlzu3y")},m(n,e){b(n,t,e)},d(n){n&&x(t)}}}function by(i){let t;return{c(){t=L("div"),A(t,"class","l-center-contents svelte-mlzu3y")},m(n,e){b(n,t,e)},d(n){n&&x(t)}}}function El(i){let t;function n(r,s){return r[5]?by:xy}let e=n(i),o=e(i);return{c(){o.c(),t=ft()},m(r,s){o.m(r,s),b(r,t,s)},p(r,s){e!==(e=n(r))&&(o.d(1),o=e(r),o&&(o.c(),o.m(t.parentNode,t)))},d(r){r&&x(t),o.d(r)}}}function _y(i){let t,n,e,o;const r=[cy,ay],s=[];function c(a,l){return a[4]?0:1}return t=c(i),n=s[t]=r[t](i),{c(){n.c(),e=ft()},m(a,l){s[t].m(a,l),b(a,e,l),o=!0},p(a,[l]){let u=t;t=c(a),t===u?s[t].p(a,l):(q(),m(s[u],1,1,()=>{s[u]=null}),j(),n=s[t],n?n.p(a,l):(n=s[t]=r[t](a),n.c()),d(n,1),n.m(e.parentNode,e))},i(a){o||(d(n),o=!0)},o(a){m(n),o=!1},d(a){a&&x(e),s[t].d(a)}}}function Cy(i,t,n){let e,o,r,s,c,a,l,u,$;const f=["chatModel","onboardingWorkspaceModel","remoteAgentsModel"];let p,_,C,M,T=gr(t,f),E=N,R=N,P=N,J=()=>(P(),P=ie(nt,X=>n(15,C=X)),nt),K=N,et=()=>(K(),K=ie(U,X=>n(16,M=X)),U);i.$$.on_destroy.push(()=>E()),i.$$.on_destroy.push(()=>R()),i.$$.on_destroy.push(()=>P()),i.$$.on_destroy.push(()=>K());let{chatModel:U}=t;et();let{onboardingWorkspaceModel:G}=t,{remoteAgentsModel:nt}=t;return J(),i.$$set=X=>{t=Et(Et({},t),ae(X)),n(8,T=gr(t,f)),"chatModel"in X&&et(n(0,U=X.chatModel)),"onboardingWorkspaceModel"in X&&n(1,G=X.onboardingWorkspaceModel),"remoteAgentsModel"in X&&J(n(2,nt=X.remoteAgentsModel))},i.$$.update=()=>{var X,Y;65536&i.$$.dirty&&(n(7,e=M.currentConversationModel),E(),E=ie(e,Z=>n(13,p=Z))),65536&i.$$.dirty&&(n(6,o=M.flags),R(),R=ie(o,Z=>n(14,_=Z))),32768&i.$$.dirty&&n(9,r=C.currentAgentId),32768&i.$$.dirty&&n(10,s=C.isActive),33792&i.$$.dirty&&n(12,c=s&&((X=C.getCurrentChatHistory())==null?void 0:X.length)),33792&i.$$.dirty&&n(11,a=s&&((Y=C.agentSetupLogs)==null?void 0:Y.steps.length)!==0),15360&i.$$.dirty&&n(5,l=s?!c&&!a:p.chatHistory.length===0),17408&i.$$.dirty&&n(4,u=_.enableVirtualizedMessageList&&!s),9728&i.$$.dirty&&n(3,$=`${p.id}-${s?r:""}`)},[U,G,nt,$,u,l,o,e,T,r,s,a,c,p,_,C,M]}class Ay extends ut{constructor(t){super(),dt(this,t,Cy,_y,lt,{chatModel:0,onboardingWorkspaceModel:1,remoteAgentsModel:2})}}function My(i){let t,n,e;return n=new ny({}),{c(){t=L("div"),v(n.$$.fragment),A(t,"class","l-center-contents")},m(o,r){b(o,t,r),w(n,t,null),e=!0},p:N,i(o){e||(d(n.$$.fragment,o),e=!0)},o(o){m(n.$$.fragment,o),e=!1},d(o){o&&x(t),y(n)}}}function ky(i){let t,n;return t=new Ay({props:{chatModel:i[0],onboardingWorkspaceModel:i[1],remoteAgentsModel:i[2]}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};1&o&&(r.chatModel=e[0]),2&o&&(r.onboardingWorkspaceModel=e[1]),4&o&&(r.remoteAgentsModel=e[2]),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function Sy(i){let t,n,e,o;const r=[ky,My],s=[];function c(a,l){return a[4]?0:a[3]?1:-1}return~(t=c(i))&&(n=s[t]=r[t](i)),{c(){n&&n.c(),e=ft()},m(a,l){~t&&s[t].m(a,l),b(a,e,l),o=!0},p(a,[l]){let u=t;t=c(a),t===u?~t&&s[t].p(a,l):(n&&(q(),m(s[u],1,1,()=>{s[u]=null}),j()),~t?(n=s[t],n?n.p(a,l):(n=s[t]=r[t](a),n.c()),d(n,1),n.m(e.parentNode,e)):n=null)},i(a){o||(d(n),o=!0)},o(a){m(n),o=!1},d(a){a&&x(e),~t&&s[t].d(a)}}}function Ty(i,t,n){let e,o,r,s=N,c=()=>(s(),s=ie(u,$=>n(5,r=$)),u);i.$$.on_destroy.push(()=>s());let{chatModel:a}=t,{onboardingWorkspaceModel:l}=t,{remoteAgentsModel:u}=t;return c(),i.$$set=$=>{"chatModel"in $&&n(0,a=$.chatModel),"onboardingWorkspaceModel"in $&&n(1,l=$.onboardingWorkspaceModel),"remoteAgentsModel"in $&&c(n(2,u=$.remoteAgentsModel))},i.$$.update=()=>{32&i.$$.dirty&&n(3,e=r.isActive&&!r.currentAgentId),8&i.$$.dirty&&n(4,o=!e)},[a,l,u,e,o,r]}class Ey extends ut{constructor(t){super(),dt(this,t,Ty,Sy,lt,{chatModel:0,onboardingWorkspaceModel:1,remoteAgentsModel:2})}}function Iy(i){let t,n,e,o;return{c(){t=H(),n=L("div"),n.innerHTML='<div class="c-chat-input-dialog-hr svelte-p70shz"></div>',A(n,"class","c-chat-input-dialog-hr-handle svelte-p70shz"),A(n,"role","separator")},m(r,s){b(r,t,s),b(r,n,s),e||(o=[Dt(document,"mousemove",i[1]),Dt(document,"mouseup",i[2]),Dt(n,"mousedown",i[0])],e=!0)},p:N,i:N,o:N,d(r){r&&(x(t),x(n)),e=!1,tn(o)}}}function Ly(i,t,n){let{inputArea:e}=t;const o=S$();let r;return i.$$set=s=>{"inputArea"in s&&n(3,e=s.inputArea)},[s=>{r={startY:s.clientY,initialHeight:e.offsetHeight},e==null||e.classList.add("is-dragging")},s=>{if(!r)return;const c=s.clientY-r.startY;n(3,e.style.height=`${Math.max(80,r.initialHeight-c)}px`,e)},()=>{r&&(o("dragEnd"),r=void 0,e==null||e.classList.remove("is-dragging"))},e]}class Ry extends ut{constructor(t){super(),dt(this,t,Ly,Iy,lt,{inputArea:3})}}function Dy(i){let t,n,e=[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 512 512"},i[0]],o={};for(let r=0;r<e.length;r+=1)o=Et(o,e[r]);return{c(){t=oe("svg"),n=new ln(!0),this.h()},l(r){t=un(r,"svg",{xmlns:!0,"data-ds-icon":!0,viewBox:!0});var s=dn(t);n=$n(s,!0),s.forEach(x),this.h()},h(){n.a=null,ue(t,o)},m(r,s){mn(r,t,s),n.m('<!--! Font Awesome Pro 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2024 Fonticons, Inc.--><path d="M224 80v352h224c8.8 0 16-7.2 16-16V96c0-8.8-7.2-16-16-16zM0 96c0-35.3 28.7-64 64-64h384c35.3 0 64 28.7 64 64v320c0 35.3-28.7 64-64 64H64c-35.3 0-64-28.7-64-64zm64 24c0 13.3 10.7 24 24 24h48c13.3 0 24-10.7 24-24s-10.7-24-24-24H88c-13.3 0-24 10.7-24 24m24 72c-13.3 0-24 10.7-24 24s10.7 24 24 24h48c13.3 0 24-10.7 24-24s-10.7-24-24-24zM64 312c0 13.3 10.7 24 24 24h48c13.3 0 24-10.7 24-24s-10.7-24-24-24H88c-13.3 0-24 10.7-24 24"/>',t)},p(r,[s]){ue(t,o=De(e,[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 512 512"},1&s&&r[0]]))},i:N,o:N,d(r){r&&x(t)}}}function Py(i,t,n){return i.$$set=e=>{n(0,t=Et(Et({},t),ae(e)))},[t=ae(t)]}class Ny extends ut{constructor(t){super(),dt(this,t,Py,Dy,lt,{})}}function Fy(i,t,n){if(i.type==="remoteAgent"){const e=t===i.id?n:void 0;if(e)return e.exchanges.slice(0,20).map(r=>r.exchange.request_message||"").join(" ");const o=i.agent;return o?[o.session_summary||"",...o.turn_summaries||[]].join(" "):""}return i.conversation&&i.conversation.chatHistory?i.conversation.chatHistory.slice(0,20).filter(e=>H$(e)).map(e=>e.request_message||"").join(" "):""}function Oy(i){var n,e;if(!i.agent||!((e=(n=i.agent.workspace_setup)==null?void 0:n.starting_files)!=null&&e.github_commit_ref))return"";const t=i.agent.workspace_setup.starting_files.github_commit_ref.repository_url;return[t,P$(t),Ms(t)].filter(Boolean).join(" ")}const zy=i=>({}),Il=i=>({}),By=i=>({}),Ll=i=>({}),Hy=i=>({}),Rl=i=>({});function Uy(i){let t;return{c(){t=V(i[2])},m(n,e){b(n,t,e)},p(n,e){4&e&&bt(t,n[2])},d(n){n&&x(t)}}}function Dl(i){let t,n;const e=i[4]["sort-options"],o=Yt(e,i,i[8],Ll);return{c(){t=L("div"),o&&o.c(),A(t,"class","l-threads-menu__sort-options svelte-k6qn47")},m(r,s){b(r,t,s),o&&o.m(t,null),n=!0},p(r,s){o&&o.p&&(!n||256&s)&&Xt(o,e,r,r[8],n?Jt(e,r[8],s,By):Zt(r[8]),Ll)},i(r){n||(d(o,r),n=!0)},o(r){m(o,r),n=!1},d(r){r&&x(t),o&&o.d(r)}}}function Pl(i){let t,n;const e=i[4].body,o=Yt(e,i,i[8],Il);return{c(){t=L("div"),o&&o.c(),A(t,"class","l-threads-menu__body svelte-k6qn47")},m(r,s){b(r,t,s),o&&o.m(t,null),n=!0},p(r,s){o&&o.p&&(!n||256&s)&&Xt(o,e,r,r[8],n?Jt(e,r[8],s,zy):Zt(r[8]),Il)},i(r){n||(d(o,r),n=!0)},o(r){m(o,r),n=!1},d(r){r&&x(t),o&&o.d(r)}}}function qy(i){let t,n,e,o,r,s,c,a,l,u,$,f,p,_;s=new Wt({props:{size:1,weight:"regular",$$slots:{default:[Uy]},$$scope:{ctx:i}}});const C=i[4].buttons,M=Yt(C,i,i[8],Rl);let T=i[1]&&Dl(i),E=i[1]&&Pl(i);return{c(){t=L("div"),n=L("div"),e=L("div"),o=L("div"),r=L("div"),v(s.$$.fragment),c=H(),a=L("div"),M&&M.c(),l=H(),T&&T.c(),u=H(),E&&E.c(),A(r,"class","l-threads-menu__title svelte-k6qn47"),A(r,"data-testid","threads-menu-header-title"),A(o,"class","l-threads-menu__header svelte-k6qn47"),A(o,"role","button"),A(o,"tabindex","0"),A(o,"data-testid","threads-menu-header"),A(e,"class","l-threads-menu__content svelte-k6qn47"),A(n,"class","l-threads-menu__wrapper svelte-k6qn47"),A(t,"data-testid","threads-menu"),A(t,"class",$=pr(`l-threads-menu ${i[3]}`)+" svelte-k6qn47"),At(t,"l-threads-menu--active",i[1])},m(R,P){b(R,t,P),O(t,n),O(n,e),O(e,o),O(o,r),w(s,r,null),O(o,c),O(o,a),M&&M.m(a,null),O(e,l),T&&T.m(e,null),O(e,u),E&&E.m(e,null),i[7](t),f=!0,p||(_=[Dt(o,"click",mr(yi(i[5]))),Dt(o,"keydown",i[6])],p=!0)},p(R,[P]){const J={};260&P&&(J.$$scope={dirty:P,ctx:R}),s.$set(J),M&&M.p&&(!f||256&P)&&Xt(M,C,R,R[8],f?Jt(C,R[8],P,Hy):Zt(R[8]),Rl),R[1]?T?(T.p(R,P),2&P&&d(T,1)):(T=Dl(R),T.c(),d(T,1),T.m(e,u)):T&&(q(),m(T,1,1,()=>{T=null}),j()),R[1]?E?(E.p(R,P),2&P&&d(E,1)):(E=Pl(R),E.c(),d(E,1),E.m(e,null)):E&&(q(),m(E,1,1,()=>{E=null}),j()),(!f||8&P&&$!==($=pr(`l-threads-menu ${R[3]}`)+" svelte-k6qn47"))&&A(t,"class",$),(!f||10&P)&&At(t,"l-threads-menu--active",R[1])},i(R){f||(d(s.$$.fragment,R),d(M,R),d(T),d(E),f=!0)},o(R){m(s.$$.fragment,R),m(M,R),m(T),m(E),f=!1},d(R){R&&x(t),y(s),M&&M.d(R),T&&T.d(),E&&E.d(),i[7](null),p=!1,tn(_)}}}function jy(i,t,n){let{$$slots:e={},$$scope:o}=t,{active:r=!1}=t,{element:s}=t,{title:c=""}=t,{class:a=""}=t;return i.$$set=l=>{"active"in l&&n(1,r=l.active),"element"in l&&n(0,s=l.element),"title"in l&&n(2,c=l.title),"class"in l&&n(3,a=l.class),"$$scope"in l&&n(8,o=l.$$scope)},[s,r,c,a,e,function(l){wn.call(this,i,l)},function(l){wn.call(this,i,l)},function(l){Qt[l?"unshift":"push"](()=>{s=l,n(0,s)})},o]}class Wy extends ut{constructor(t){super(),dt(this,t,jy,qy,lt,{active:1,element:0,title:2,class:3})}}const Vy=i=>({}),Nl=i=>({}),Gy=i=>({}),Fl=i=>({});function Ky(i){let t,n;const e=i[2].title,o=Yt(e,i,i[6],Fl);return{c(){t=L("div"),o&&o.c(),A(t,"class","l-thread-menu-item__title svelte-1iwlval")},m(r,s){b(r,t,s),o&&o.m(t,null),n=!0},p(r,s){o&&o.p&&(!n||64&s)&&Xt(o,e,r,r[6],n?Jt(e,r[6],s,Gy):Zt(r[6]),Fl)},i(r){n||(d(o,r),n=!0)},o(r){m(o,r),n=!1},d(r){r&&x(t),o&&o.d(r)}}}function Yy(i){let t,n,e,o,r,s,c;n=new Wt({props:{size:1,weight:"regular",$$slots:{default:[Ky]},$$scope:{ctx:i}}});const a=i[2].right,l=Yt(a,i,i[6],Nl);return{c(){t=L("div"),v(n.$$.fragment),e=H(),o=L("div"),l&&l.c(),A(o,"class","l-thread-menu-item__right svelte-1iwlval"),A(t,"class","l-thread-menu-item svelte-1iwlval"),A(t,"data-testid","thread-menu-item"),A(t,"role","button"),A(t,"tabindex","0"),At(t,"l-thread-menu-item--selected",i[0]&&i[1]),At(t,"l-thread-menu-item--selectable",i[1])},m(u,$){b(u,t,$),w(n,t,null),O(t,e),O(t,o),l&&l.m(o,null),r=!0,s||(c=[Dt(t,"click",i[3]),Dt(t,"mousedown",i[4]),Dt(t,"keydown",i[5])],s=!0)},p(u,[$]){const f={};64&$&&(f.$$scope={dirty:$,ctx:u}),n.$set(f),l&&l.p&&(!r||64&$)&&Xt(l,a,u,u[6],r?Jt(a,u[6],$,Vy):Zt(u[6]),Nl),(!r||3&$)&&At(t,"l-thread-menu-item--selected",u[0]&&u[1]),(!r||2&$)&&At(t,"l-thread-menu-item--selectable",u[1])},i(u){r||(d(n.$$.fragment,u),d(l,u),r=!0)},o(u){m(n.$$.fragment,u),m(l,u),r=!1},d(u){u&&x(t),y(n),l&&l.d(u),s=!1,tn(c)}}}function Xy(i,t,n){let{$$slots:e={},$$scope:o}=t,{selected:r=!1}=t,{isSelectable:s=!1}=t;return i.$$set=c=>{"selected"in c&&n(0,r=c.selected),"isSelectable"in c&&n(1,s=c.isSelectable),"$$scope"in c&&n(6,o=c.$$scope)},[r,s,e,function(c){wn.call(this,i,c)},function(c){wn.call(this,i,c)},function(c){wn.call(this,i,c)},o]}class Fm extends ut{constructor(t){super(),dt(this,t,Xy,Yy,lt,{selected:0,isSelectable:1})}}function Zy(i){let t,n,e,o;return{c(){t=L("div"),n=V(i[1]),A(t,"class","c-editable-text__text svelte-1kpc8s8"),A(t,"role","button"),A(t,"tabindex","0"),At(t,"c-editable-text--disabled",i[3])},m(r,s){b(r,t,s),O(t,n),e||(o=Dt(t,"dblclick",i[4]),e=!0)},p(r,s){2&s&&bt(n,r[1]),8&s&&At(t,"c-editable-text--disabled",r[3])},i:N,o:N,d(r){r&&x(t),e=!1,o()}}}function Jy(i){let t,n,e,o;function r(a){i[15](a)}function s(a){i[16](a)}let c={size:1,variant:"surface",placeholder:i[2]};return i[5]!==void 0&&(c.textInput=i[5]),i[6]!==void 0&&(c.value=i[6]),t=new ir({props:c}),Qt.push(()=>Ne(t,"textInput",r)),Qt.push(()=>Ne(t,"value",s)),t.$on("click",t6),t.$on("keydown",i[7]),{c(){v(t.$$.fragment)},m(a,l){w(t,a,l),o=!0},p(a,l){const u={};4&l&&(u.placeholder=a[2]),!n&&32&l&&(n=!0,u.textInput=a[5],Be(()=>n=!1)),!e&&64&l&&(e=!0,u.value=a[6],Be(()=>e=!1)),t.$set(u)},i(a){o||(d(t.$$.fragment,a),o=!0)},o(a){m(t.$$.fragment,a),o=!1},d(a){y(t,a)}}}function Qy(i){let t,n,e,o,r,s,c;const a=[Jy,Zy],l=[];function u($,f){return!$[3]&&$[0]?0:1}return n=u(i),e=l[n]=a[n](i),{c(){t=H(),e.c(),o=ft()},m($,f){b($,t,f),l[n].m($,f),b($,o,f),r=!0,s||(c=Dt(document.body,"click",i[8]),s=!0)},p($,[f]){let p=n;n=u($),n===p?l[n].p($,f):(q(),m(l[p],1,1,()=>{l[p]=null}),j(),e=l[n],e?e.p($,f):(e=l[n]=a[n]($),e.c()),d(e,1),e.m(o.parentNode,o))},i($){r||(d(e),r=!0)},o($){m(e),r=!1},d($){$&&(x(t),x(o)),l[n].d($),s=!1,c()}}}const t6=i=>i.stopPropagation();function e6(i,t,n){let e,{isEditing:o=!1}=t,{value:r}=t,{cancelOnClickOutside:s=!0}=t,{placeholder:c=""}=t,{disabled:a=!1}=t,{onStartEdit:l}=t,{onAcceptEdit:u}=t,{onCancelEdit:$}=t,f=r;function p(C){o&&(u(f),n(0,o=!1),n(6,f=""),C==null||C.stopPropagation())}function _(C){o&&s&&($(),n(0,o=!1),n(6,f=""),C==null||C.stopPropagation())}return i.$$set=C=>{"isEditing"in C&&n(0,o=C.isEditing),"value"in C&&n(1,r=C.value),"cancelOnClickOutside"in C&&n(9,s=C.cancelOnClickOutside),"placeholder"in C&&n(2,c=C.placeholder),"disabled"in C&&n(3,a=C.disabled),"onStartEdit"in C&&n(10,l=C.onStartEdit),"onAcceptEdit"in C&&n(11,u=C.onAcceptEdit),"onCancelEdit"in C&&n(12,$=C.onCancelEdit)},i.$$.update=()=>{32&i.$$.dirty&&(e==null||e.focus())},[o,r,c,a,function(C){o||a||(n(6,f=r),n(0,o=!0),l(),C==null||C.stopPropagation())},e,f,function(C){o&&(C.key==="Enter"?p(C):C.key==="Escape"&&_(C))},function(C){const M=C.target;M&&M.closest(`.${Om}`)||_(C)},s,l,u,$,p,_,function(C){e=C,n(5,e)},function(C){f=C,n(6,f)}]}class n6 extends ut{constructor(t){super(),dt(this,t,e6,Qy,lt,{isEditing:0,value:1,cancelOnClickOutside:9,placeholder:2,disabled:3,onStartEdit:10,onAcceptEdit:11,onCancelEdit:12,startEdit:4,acceptEdit:13,cancelEdit:14})}get startEdit(){return this.$$.ctx[4]}get acceptEdit(){return this.$$.ctx[13]}get cancelEdit(){return this.$$.ctx[14]}}function o6(i){let t,n;return{c(){t=oe("svg"),n=oe("path"),A(n,"fill-rule","evenodd"),A(n,"clip-rule","evenodd"),A(n,"d","M6 3.5C6 2.67157 6.67157 2 7.5 2C8.32843 2 9 2.67157 9 3.5C9 4.32843 8.32843 5 7.5 5C6.67157 5 6 4.32843 6 3.5ZM8 5.94999C9.14112 5.71836 10 4.70948 10 3.5C10 2.11929 8.88071 1 7.5 1C6.11929 1 5 2.11929 5 3.5C5 4.70948 5.85888 5.71836 7 5.94999V13.5C7 13.7761 7.22386 14 7.5 14C7.77614 14 8 13.7761 8 13.5V5.94999Z"),A(n,"fill","currentColor"),A(t,"width","15"),A(t,"height","15"),A(t,"viewBox","0 0 15 15"),A(t,"fill","none"),A(t,"xmlns","http://www.w3.org/2000/svg")},m(e,o){b(e,t,o),O(t,n)},p:N,i:N,o:N,d(e){e&&x(t)}}}class r6 extends ut{constructor(t){super(),dt(this,t,null,o6,lt,{})}}function i6(i){let t,n;return{c(){t=oe("svg"),n=oe("path"),A(n,"fill-rule","evenodd"),A(n,"clip-rule","evenodd"),A(n,"d","M10 3.5C10 4.70948 9.14112 5.71836 8 5.94999V13.5C8 13.7761 7.77614 14 7.5 14C7.22386 14 7 13.7761 7 13.5V5.94999C5.85888 5.71836 5 4.70948 5 3.5C5 2.11929 6.11929 1 7.5 1C8.88071 1 10 2.11929 10 3.5Z"),A(n,"fill","currentColor"),A(t,"width","15"),A(t,"height","15"),A(t,"viewBox","0 0 15 15"),A(t,"fill","none"),A(t,"xmlns","http://www.w3.org/2000/svg")},m(e,o){b(e,t,o),O(t,n)},p:N,i:N,o:N,d(e){e&&x(t)}}}class s6 extends ut{constructor(t){super(),dt(this,t,null,i6,lt,{})}}const a6=i=>({}),Ol=i=>({});function zl(i){let t,n,e,o;const r=[l6,c6],s=[];function c(a,l){return a[9]?0:1}return t=c(i),n=s[t]=r[t](i),{c(){n.c(),e=ft()},m(a,l){s[t].m(a,l),b(a,e,l),o=!0},p(a,l){let u=t;t=c(a),t!==u&&(q(),m(s[u],1,1,()=>{s[u]=null}),j(),n=s[t],n||(n=s[t]=r[t](a),n.c()),d(n,1),n.m(e.parentNode,e))},i(a){o||(d(n),o=!0)},o(a){m(n),o=!1},d(a){a&&x(e),s[t].d(a)}}}function c6(i){let t,n;return t=new So.Root({props:{color:"accent",size:1,variant:"soft",$$slots:{default:[u6]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function l6(i){let t,n;return t=new So.Root({props:{color:"accent",size:1,variant:"solid",highContrast:!0,$$slots:{default:[d6]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function u6(i){let t;return{c(){t=V("Agent")},m(n,e){b(n,t,e)},d(n){n&&x(t)}}}function d6(i){let t;return{c(){t=V("Agent")},m(n,e){b(n,t,e)},d(n){n&&x(t)}}}function $6(i){let t,n,e,o,r,s=pn(i[2]);function c(u){i[22](u)}let a={value:yn.getDisplayName(i[2]),placeholder:"Conversation name",onAcceptEdit:i[20],onStartEdit:W6,onCancelEdit:V6};i[0]!==void 0&&(a.isEditing=i[0]),n=new n6({props:a}),i[21](n),Qt.push(()=>Ne(n,"isEditing",c));let l=s&&zl(i);return{c(){t=L("span"),v(n.$$.fragment),o=H(),l&&l.c(),A(t,"class","l-thread-menu-item__title svelte-nvsyjc"),A(t,"data-testid","thread-menu-item-title"),A(t,"slot","title")},m(u,$){b(u,t,$),w(n,t,null),O(t,o),l&&l.m(t,null),r=!0},p(u,$){const f={};4&$&&(f.value=yn.getDisplayName(u[2])),12&$&&(f.onAcceptEdit=u[20]),!e&&1&$&&(e=!0,f.isEditing=u[0],Be(()=>e=!1)),n.$set(f),4&$&&(s=pn(u[2])),s?l?(l.p(u,$),4&$&&d(l,1)):(l=zl(u),l.c(),d(l,1),l.m(t,null)):l&&(q(),m(l,1,1,()=>{l=null}),j())},i(u){r||(d(n.$$.fragment,u),d(l),r=!0)},o(u){m(n.$$.fragment,u),m(l),r=!1},d(u){u&&x(t),i[21](null),y(n),l&&l.d()}}}function m6(i){let t,n;return t=new xt.Root({props:{open:i[7],$$slots:{default:[F6]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};128&o&&(r.open=e[7]),33555942&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function f6(i){let t,n,e,o;return t=new fe({props:{size:1,variant:"soft",color:"success",title:"Save",$$slots:{default:[O6]},$$scope:{ctx:i}}}),t.$on("click",function(){ze(i[1].acceptEdit)&&i[1].acceptEdit.apply(this,arguments)}),e=new fe({props:{size:1,variant:"soft",color:"neutral",title:"Cancel",$$slots:{default:[z6]},$$scope:{ctx:i}}}),e.$on("click",function(){ze(i[1].cancelEdit)&&i[1].cancelEdit.apply(this,arguments)}),{c(){v(t.$$.fragment),n=H(),v(e.$$.fragment)},m(r,s){w(t,r,s),b(r,n,s),w(e,r,s),o=!0},p(r,s){i=r;const c={};33554432&s&&(c.$$scope={dirty:s,ctx:i}),t.$set(c);const a={};33554432&s&&(a.$$scope={dirty:s,ctx:i}),e.$set(a)},i(r){o||(d(t.$$.fragment,r),d(e.$$.fragment,r),o=!0)},o(r){m(t.$$.fragment,r),m(e.$$.fragment,r),o=!1},d(r){r&&x(n),y(t,r),y(e,r)}}}function p6(i){let t,n;return t=new sr({}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function g6(i){let t,n,e;return n=new fe({props:{variant:"ghost-block",color:"neutral",size:1,title:U6,$$slots:{default:[p6]},$$scope:{ctx:i}}}),n.$on("click",i[13]),{c(){t=L("div"),v(n.$$.fragment),A(t,"class","l-thread-menu-item__options svelte-nvsyjc")},m(o,r){b(o,t,r),w(n,t,null),e=!0},p(o,r){const s={};33554432&r&&(s.$$scope={dirty:r,ctx:o}),n.$set(s)},i(o){e||(d(n.$$.fragment,o),e=!0)},o(o){m(n.$$.fragment,o),e=!1},d(o){o&&x(t),y(n)}}}function h6(i){let t;return{c(){t=V("Options")},m(n,e){b(n,t,e)},d(n){n&&x(t)}}}function Bl(i){let t,n;return t=new xt.Item({props:{class:"c-thread-menu__share-link",onSelect:i[14],$$slots:{iconLeft:[k6],default:[b6]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};4&o&&(r.onSelect=e[14]),33554688&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function v6(i){let t;return{c(){t=V("Share link to session")},m(n,e){b(n,t,e)},d(n){n&&x(t)}}}function w6(i){let t;return{c(){t=V("Unable to create link")},m(n,e){b(n,t,e)},d(n){n&&x(t)}}}function y6(i){let t;return{c(){t=V("Link copied")},m(n,e){b(n,t,e)},d(n){n&&x(t)}}}function x6(i){let t;return{c(){t=V("Creating link")},m(n,e){b(n,t,e)},d(n){n&&x(t)}}}function b6(i){let t;function n(r,s){return r[8]==="retrieving"?x6:r[8]==="copied"?y6:r[8]==="failure"?w6:v6}let e=n(i),o=e(i);return{c(){o.c(),t=ft()},m(r,s){o.m(r,s),b(r,t,s)},p(r,s){e!==(e=n(r))&&(o.d(1),o=e(r),o&&(o.c(),o.m(t.parentNode,t)))},d(r){r&&x(t),o.d(r)}}}function _6(i){let t,n;return t=new Bi({}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function C6(i){let t,n;return t=new _r({}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function A6(i){let t,n;return t=new Ho({}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function M6(i){let t,n;return t=new ro({props:{size:1}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function k6(i){let t,n,e,o;const r=[M6,A6,C6,_6],s=[];function c(a,l){return a[8]==="retrieving"?0:a[8]==="copied"?1:a[8]==="failure"?2:3}return t=c(i),n=s[t]=r[t](i),{c(){n.c(),e=ft()},m(a,l){s[t].m(a,l),b(a,e,l),o=!0},p(a,l){let u=t;t=c(a),t!==u&&(q(),m(s[u],1,1,()=>{s[u]=null}),j(),n=s[t],n||(n=s[t]=r[t](a),n.c()),d(n,1),n.m(e.parentNode,e))},i(a){o||(d(n),o=!0)},o(a){m(n),o=!1},d(a){a&&x(e),s[t].d(a)}}}function S6(i){let t;return{c(){t=V("Rename")},m(n,e){b(n,t,e)},d(n){n&&x(t)}}}function T6(i){let t,n;return t=new zs({props:{slot:"iconLeft"}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p:N,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function E6(i){let t,n=i[2].isPinned?"Unpin":"Pin";return{c(){t=V(n)},m(e,o){b(e,t,o)},p(e,o){4&o&&n!==(n=e[2].isPinned?"Unpin":"Pin")&&bt(t,n)},d(e){e&&x(t)}}}function I6(i){let t,n;return t=new s6({}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function L6(i){let t,n;return t=new r6({}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function R6(i){let t,n,e,o;const r=[L6,I6],s=[];function c(a,l){return a[2].isPinned?0:1}return t=c(i),n=s[t]=r[t](i),{c(){n.c(),e=ft()},m(a,l){s[t].m(a,l),b(a,e,l),o=!0},p(a,l){let u=t;t=c(a),t!==u&&(q(),m(s[u],1,1,()=>{s[u]=null}),j(),n=s[t],n||(n=s[t]=r[t](a),n.c()),d(n,1),n.m(e.parentNode,e))},i(a){o||(d(n),o=!0)},o(a){m(n),o=!1},d(a){a&&x(e),s[t].d(a)}}}function D6(i){let t;return{c(){t=V("Delete")},m(n,e){b(n,t,e)},d(n){n&&x(t)}}}function P6(i){let t,n;return t=new Wr({props:{slot:"iconLeft"}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p:N,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function N6(i){let t,n,e,o,r,s,c,a,l;t=new xt.Label({props:{$$slots:{default:[h6]},$$scope:{ctx:i}}});let u=i[10]&&i[2].isShareable&&Bl(i);return o=new xt.Item({props:{onSelect:i[15],$$slots:{iconLeft:[T6],default:[S6]},$$scope:{ctx:i}}}),s=new xt.Item({props:{title:q6,onSelect:i[16],$$slots:{iconLeft:[R6],default:[E6]},$$scope:{ctx:i}}}),a=new xt.Item({props:{title:j6,color:"error",onSelect:i[17],$$slots:{iconLeft:[P6],default:[D6]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment),n=H(),u&&u.c(),e=H(),v(o.$$.fragment),r=H(),v(s.$$.fragment),c=H(),v(a.$$.fragment)},m($,f){w(t,$,f),b($,n,f),u&&u.m($,f),b($,e,f),w(o,$,f),b($,r,f),w(s,$,f),b($,c,f),w(a,$,f),l=!0},p($,f){const p={};33554432&f&&(p.$$scope={dirty:f,ctx:$}),t.$set(p),$[10]&&$[2].isShareable?u?(u.p($,f),1028&f&&d(u,1)):(u=Bl($),u.c(),d(u,1),u.m(e.parentNode,e)):u&&(q(),m(u,1,1,()=>{u=null}),j());const _={};130&f&&(_.onSelect=$[15]),33554432&f&&(_.$$scope={dirty:f,ctx:$}),o.$set(_);const C={};196&f&&(C.onSelect=$[16]),33554436&f&&(C.$$scope={dirty:f,ctx:$}),s.$set(C);const M={};164&f&&(M.onSelect=$[17]),33554432&f&&(M.$$scope={dirty:f,ctx:$}),a.$set(M)},i($){l||(d(t.$$.fragment,$),d(u),d(o.$$.fragment,$),d(s.$$.fragment,$),d(a.$$.fragment,$),l=!0)},o($){m(t.$$.fragment,$),m(u),m(o.$$.fragment,$),m(s.$$.fragment,$),m(a.$$.fragment,$),l=!1},d($){$&&(x(n),x(e),x(r),x(c)),y(t,$),u&&u.d($),y(o,$),y(s,$),y(a,$)}}}function F6(i){let t,n,e,o;return t=new xt.Trigger({props:{$$slots:{default:[g6]},$$scope:{ctx:i}}}),e=new xt.Content({props:{size:1,side:"bottom",align:"end",onClickOutside:i[18],onEscapeKeyDown:i[19],$$slots:{default:[N6]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment),n=H(),v(e.$$.fragment)},m(r,s){w(t,r,s),b(r,n,s),w(e,r,s),o=!0},p(r,s){const c={};33554560&s&&(c.$$scope={dirty:s,ctx:r}),t.$set(c);const a={};128&s&&(a.onClickOutside=r[18]),128&s&&(a.onEscapeKeyDown=r[19]),33555942&s&&(a.$$scope={dirty:s,ctx:r}),e.$set(a)},i(r){o||(d(t.$$.fragment,r),d(e.$$.fragment,r),o=!0)},o(r){m(t.$$.fragment,r),m(e.$$.fragment,r),o=!1},d(r){r&&x(n),y(t,r),y(e,r)}}}function O6(i){let t,n;return t=new Ho({}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function z6(i){let t,n;return t=new _r({}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function B6(i){let t,n,e,o,r;const s=[f6,m6],c=[];function a($,f){return $[0]?0:1}n=a(i),e=c[n]=s[n](i);const l=i[12].right,u=Yt(l,i,i[25],Ol);return{c(){t=L("div"),e.c(),o=H(),u&&u.c(),A(t,"slot","right"),A(t,"class","l-thread-menu-item__right svelte-nvsyjc")},m($,f){b($,t,f),c[n].m(t,null),O(t,o),u&&u.m(t,null),r=!0},p($,f){let p=n;n=a($),n===p?c[n].p($,f):(q(),m(c[p],1,1,()=>{c[p]=null}),j(),e=c[n],e?e.p($,f):(e=c[n]=s[n]($),e.c()),d(e,1),e.m(t,o)),u&&u.p&&(!r||33554432&f)&&Xt(u,l,$,$[25],r?Jt(l,$[25],f,a6):Zt($[25]),Ol)},i($){r||(d(e),d(u,$),r=!0)},o($){m(e),m(u,$),r=!1},d($){$&&x(t),c[n].d(),u&&u.d($)}}}function H6(i){let t,n;return t=new Fm({props:{selected:i[9],isSelectable:!0,$$slots:{right:[B6],title:[$6]},$$scope:{ctx:i}}}),t.$on("click",i[23]),t.$on("keydown",function(){ze(vo("Enter",i[24]))&&vo("Enter",i[24]).apply(this,arguments)}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,[o]){i=e;const r={};512&o&&(r.selected=i[9]),33556463&o&&(r.$$scope={dirty:o,ctx:i}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}const U6="Conversation Options",q6="Pin session",j6="Delete session",W6=()=>{},V6=()=>{};function G6(i,t,n){let e,o,r,s=N,c=()=>(s(),s=ie($,R=>n(6,r=R)),$);i.$$.on_destroy.push(()=>s());let{$$slots:a={},$$scope:l}=t,{conversation:u}=t,{chatModel:$}=t;c();let f,{onConversationClicked:p}=t,{deleteConversation:_}=t,{editableTitle:C}=t,{isEditingTitle:M=!1}=t,T=!1;async function E(R){if(R!==void 0&&f===void 0){n(8,f=u.lastUrl?"copied":"retrieving");try{const P=await $.getConversationUrl(R);navigator.clipboard.writeText(P),n(8,f="copied")}catch(P){console.error("Failed to get conversation URL: ",P),n(8,f="failure")}finally{setTimeout(()=>{n(7,T=!1),n(8,f=void 0)},1200)}}}return i.$$set=R=>{"conversation"in R&&n(2,u=R.conversation),"chatModel"in R&&c(n(3,$=R.chatModel)),"onConversationClicked"in R&&n(4,p=R.onConversationClicked),"deleteConversation"in R&&n(5,_=R.deleteConversation),"editableTitle"in R&&n(1,C=R.editableTitle),"isEditingTitle"in R&&n(0,M=R.isEditingTitle),"$$scope"in R&&n(25,l=R.$$scope)},i.$$.update=()=>{64&i.$$.dirty&&n(10,e=r.flags.enableShareService),13&i.$$.dirty&&n(9,o=u.id===$.currentConversationId&&!M)},[M,C,u,$,p,_,r,T,f,o,e,E,a,()=>{n(7,T=!T)},()=>E(u.id),R=>{n(7,T=!1),C==null||C.startEdit(R)},()=>{r.toggleConversationPinned(u.id),n(7,T=!1)},async()=>{_(u.id),n(7,T=!1)},()=>n(7,T=!1),()=>n(7,T=!1),R=>{$.renameConversation(u.id,R)},function(R){Qt[R?"unshift":"push"](()=>{C=R,n(1,C)})},function(R){M=R,n(0,M)},()=>p(u.id),()=>p(u.id),l]}class K6 extends ut{constructor(t){super(),dt(this,t,G6,H6,lt,{conversation:2,chatModel:3,onConversationClicked:4,deleteConversation:5,editableTitle:1,isEditingTitle:0})}}function Hl(i,t,n){const e=i.slice();return e[10]=t[n],e}function Ul(i){let t,n,e,o,r,s;e=new Fm({props:{$$slots:{right:[nx],title:[Y6]},$$scope:{ctx:i}}});let c=se(i[1]),a=[];for(let u=0;u<c.length;u+=1)a[u]=ql(Hl(i,c,u));const l=u=>m(a[u],1,1,()=>{a[u]=null});return{c(){t=L("div"),n=L("div"),v(e.$$.fragment),o=H(),r=L("div");for(let u=0;u<a.length;u+=1)a[u].c();A(n,"class","l-thread-group__header svelte-1c3ly67"),A(t,"class","l-thread-group")},m(u,$){b(u,t,$),O(t,n),w(e,n,null),O(t,o),O(t,r);for(let f=0;f<a.length;f+=1)a[f]&&a[f].m(r,null);s=!0},p(u,$){const f={};if(8227&$&&(f.$$scope={dirty:$,ctx:u}),e.$set(f),30&$){let p;for(c=se(u[1]),p=0;p<c.length;p+=1){const _=Hl(u,c,p);a[p]?(a[p].p(_,$),d(a[p],1)):(a[p]=ql(_),a[p].c(),d(a[p],1),a[p].m(r,null))}for(q(),p=c.length;p<a.length;p+=1)l(p);j()}},i(u){if(!s){d(e.$$.fragment,u);for(let $=0;$<c.length;$+=1)d(a[$]);s=!0}},o(u){m(e.$$.fragment,u),a=a.filter(Boolean);for(let $=0;$<a.length;$+=1)m(a[$]);s=!1},d(u){u&&x(t),y(e),bn(a,u)}}}function Y6(i){let t,n;return{c(){t=L("span"),n=V(i[0]),A(t,"slot","title")},m(e,o){b(e,t,o),O(t,n)},p(e,o){1&o&&bt(n,e[0])},d(e){e&&x(t)}}}function X6(i){let t,n;return t=new sr({}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function Z6(i){let t,n;return t=new fe({props:{variant:"ghost-block",color:"neutral",size:1,title:"Group options",$$slots:{default:[X6]},$$scope:{ctx:i}}}),t.$on("click",i[7]),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};8192&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function J6(i){let t,n,e,o,r=i[1].length+"",s=i[1].length>1?"s":"";return{c(){t=V("Delete "),n=V(r),e=V(" thread"),o=V(s)},m(c,a){b(c,t,a),b(c,n,a),b(c,e,a),b(c,o,a)},p(c,a){2&a&&r!==(r=c[1].length+"")&&bt(n,r),2&a&&s!==(s=c[1].length>1?"s":"")&&bt(o,s)},d(c){c&&(x(t),x(n),x(e),x(o))}}}function Q6(i){let t,n;return t=new Wr({props:{slot:"iconLeft"}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p:N,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function tx(i){let t,n;return t=new xt.Item({props:{color:"error",onSelect:i[6],$$slots:{iconLeft:[Q6],default:[J6]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};8194&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function ex(i){let t,n,e,o;return t=new xt.Trigger({props:{$$slots:{default:[Z6]},$$scope:{ctx:i}}}),e=new xt.Content({props:{size:1,side:"bottom",align:"end",$$slots:{default:[tx]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment),n=H(),v(e.$$.fragment)},m(r,s){w(t,r,s),b(r,n,s),w(e,r,s),o=!0},p(r,s){const c={};8224&s&&(c.$$scope={dirty:s,ctx:r}),t.$set(c);const a={};8194&s&&(a.$$scope={dirty:s,ctx:r}),e.$set(a)},i(r){o||(d(t.$$.fragment,r),d(e.$$.fragment,r),o=!0)},o(r){m(t.$$.fragment,r),m(e.$$.fragment,r),o=!1},d(r){r&&x(n),y(t,r),y(e,r)}}}function nx(i){let t,n,e;return n=new xt.Root({props:{open:i[5],triggerOn:[te.Hover,te.Click],onHoverStart:rx,onHoverEnd:i[8],onOpenChange:i[9],$$slots:{default:[ex]},$$scope:{ctx:i}}}),{c(){t=L("div"),v(n.$$.fragment),A(t,"slot","right"),A(t,"class","l-thread-group__options")},m(o,r){b(o,t,r),w(n,t,null),e=!0},p(o,r){const s={};32&r&&(s.open=o[5]),32&r&&(s.onHoverEnd=o[8]),8226&r&&(s.$$scope={dirty:r,ctx:o}),n.$set(s)},i(o){e||(d(n.$$.fragment,o),e=!0)},o(o){m(n.$$.fragment,o),e=!1},d(o){o&&x(t),y(n)}}}function ql(i){let t,n;return t=new K6({props:{conversation:i[10],chatModel:i[4],onConversationClicked:i[2],deleteConversation:i[3]}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};2&o&&(r.conversation=e[10]),16&o&&(r.chatModel=e[4]),4&o&&(r.onConversationClicked=e[2]),8&o&&(r.deleteConversation=e[3]),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function ox(i){let t,n,e=i[1].length>0&&Ul(i);return{c(){e&&e.c(),t=ft()},m(o,r){e&&e.m(o,r),b(o,t,r),n=!0},p(o,[r]){o[1].length>0?e?(e.p(o,r),2&r&&d(e,1)):(e=Ul(o),e.c(),d(e,1),e.m(t.parentNode,t)):e&&(q(),m(e,1,1,()=>{e=null}),j())},i(o){n||(d(e),n=!0)},o(o){m(e),n=!1},d(o){o&&x(t),e&&e.d(o)}}}const rx=()=>{};function ix(i,t,n){let{groupTitle:e}=t,{conversations:o}=t,{onConversationClicked:r}=t,{deleteConversation:s}=t,{chatModel:c}=t,a=!1;return i.$$set=l=>{"groupTitle"in l&&n(0,e=l.groupTitle),"conversations"in l&&n(1,o=l.conversations),"onConversationClicked"in l&&n(2,r=l.onConversationClicked),"deleteConversation"in l&&n(3,s=l.deleteConversation),"chatModel"in l&&n(4,c=l.chatModel)},[e,o,r,s,c,a,async function(){await c.deleteConversations(o.map(l=>l.id))},()=>n(5,a=!a),()=>n(5,a=!1),l=>{var u;l||(u=document.activeElement)!=null&&u.closest(".l-thread-group__options")&&document.activeElement instanceof HTMLElement&&document.activeElement.blur()}]}class sx extends ut{constructor(t){super(),dt(this,t,ix,ox,lt,{groupTitle:0,conversations:1,onConversationClicked:2,deleteConversation:3,chatModel:4})}}function jl(i,t,n){const e=i.slice();return e[39]=t[n].label,e[40]=t[n].value,e}function Wl(i,t,n){const e=i.slice();return e[36]=t[n],e[38]=n,e}function Vl(i){let t,n,e={triggerOn:[te.Click],$$slots:{content:[mx],default:[cx]},$$scope:{ctx:i}};return t=new zt({props:e}),i[28](t),{c(){v(t.$$.fragment)},m(o,r){w(t,o,r),n=!0},p(o,r){const s={};2144&r[0]|4096&r[1]&&(s.$$scope={dirty:r,ctx:o}),t.$set(s)},i(o){n||(d(t.$$.fragment,o),n=!0)},o(o){m(t.$$.fragment,o),n=!1},d(o){i[28](null),y(t,o)}}}function ax(i){let t,n;return t=new Bi({}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function cx(i){let t,n;return t=new fe({props:{variant:"ghost-block",color:"neutral",size:1,title:"Share session",$$slots:{default:[ax]},$$scope:{ctx:i}}}),t.$on("click",i[27]),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};4096&o[1]&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function lx(i){let t;return{c(){t=V("Copy link to thread")},m(n,e){b(n,t,e)},p:N,i:N,o:N,d(n){n&&x(t)}}}function ux(i){let t;return{c(){t=V(i[6])},m(n,e){b(n,t,e)},p(n,e){64&e[0]&&bt(t,n[6])},i:N,o:N,d(n){n&&x(t)}}}function dx(i){let t;return{c(){t=V("Copied link to clipboard!")},m(n,e){b(n,t,e)},p:N,i:N,o:N,d(n){n&&x(t)}}}function $x(i){let t,n,e,o;return n=new ro({props:{size:1,useCurrentColor:!0}}),{c(){t=L("div"),v(n.$$.fragment),e=V(" Copying link...")},m(r,s){b(r,t,s),w(n,t,null),O(t,e),o=!0},p:N,i(r){o||(d(n.$$.fragment,r),o=!0)},o(r){m(n.$$.fragment,r),o=!1},d(r){r&&x(t),y(n)}}}function mx(i){let t,n,e,o;const r=[$x,dx,ux,lx],s=[];function c(a,l){return a[5]==="retrieving"?0:a[5]==="copied"?1:a[5]==="failure"?2:3}return n=c(i),e=s[n]=r[n](i),{c(){t=L("div"),e.c(),A(t,"slot","content")},m(a,l){b(a,t,l),s[n].m(t,null),o=!0},p(a,l){let u=n;n=c(a),n===u?s[n].p(a,l):(q(),m(s[u],1,1,()=>{s[u]=null}),j(),e=s[n],e?e.p(a,l):(e=s[n]=r[n](a),e.c()),d(e,1),e.m(t,null))},i(a){o||(d(e),o=!0)},o(a){m(e),o=!1},d(a){a&&x(t),s[n].d()}}}function fx(i){let t,n;return t=new Uo({}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function px(i){let t,n;return t=new As({}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function gx(i){let t,n;return t=new fe({props:{variant:"solid",color:"neutral",size:1,"data-testid":Sx,$$slots:{default:[px]},$$scope:{ctx:i}}}),t.$on("click",i[29]),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};4096&o[1]&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function hx(i){let t,n,e;return n=new Hr({props:{icons:[`${Si.cmdOrCtrl}`,"L"]}}),{c(){t=L("div"),v(n.$$.fragment),A(t,"slot","content"),A(t,"class","c-threads-menu__new-thread-tooltip-content svelte-113v40n")},m(o,r){b(o,t,r),w(n,t,null),e=!0},p:N,i(o){e||(d(n.$$.fragment,o),e=!0)},o(o){m(n.$$.fragment,o),e=!1},d(o){o&&x(t),y(n)}}}function vx(i){let t,n,e,o,r,s,c=i[1].flags.enableShareService&&i[10]&&Vl(i);return e=new fe({props:{variant:"ghost-block",color:"neutral",size:1,title:i[3]?Zl:Xl,$$slots:{default:[fx]},$$scope:{ctx:i}}}),e.$on("click",i[14]),e.$on("keydown",vo("Enter",i[14])),r=new zt({props:{$$slots:{content:[hx],default:[gx]},$$scope:{ctx:i}}}),{c(){t=L("div"),c&&c.c(),n=H(),v(e.$$.fragment),o=H(),v(r.$$.fragment),A(t,"class","c-threads-menu__right-btns svelte-113v40n"),A(t,"slot","buttons")},m(a,l){b(a,t,l),c&&c.m(t,null),O(t,n),w(e,t,null),O(t,o),w(r,t,null),s=!0},p(a,l){a[1].flags.enableShareService&&a[10]?c?(c.p(a,l),1026&l[0]&&d(c,1)):(c=Vl(a),c.c(),d(c,1),c.m(t,n)):c&&(q(),m(c,1,1,()=>{c=null}),j());const u={};8&l[0]&&(u.title=a[3]?Zl:Xl),4096&l[1]&&(u.$$scope={dirty:l,ctx:a}),e.$set(u);const $={};4096&l[1]&&($.$$scope={dirty:l,ctx:a}),r.$set($)},i(a){s||(d(c),d(e.$$.fragment,a),d(r.$$.fragment,a),s=!0)},o(a){m(c),m(e.$$.fragment,a),m(r.$$.fragment,a),s=!1},d(a){a&&x(t),c&&c.d(),y(e),y(r)}}}function wx(i){let t;return{c(){t=V("Sort by:")},m(n,e){b(n,t,e)},d(n){n&&x(t)}}}function yx(i){let t,n=i[2]==="lastMessageTimestamp"?"Last Message":"Created Date";return{c(){t=V(n)},m(e,o){b(e,t,o)},p(e,o){4&o[0]&&n!==(n=e[2]==="lastMessageTimestamp"?"Last Message":"Created Date")&&bt(t,n)},d(e){e&&x(t)}}}function xx(i){let t,n,e,o,r;return n=new Wt({props:{size:1,$$slots:{default:[yx]},$$scope:{ctx:i}}}),o=new Uo({}),{c(){t=L("div"),v(n.$$.fragment),e=H(),v(o.$$.fragment),A(t,"class","c-threads-menu__sort-trigger svelte-113v40n")},m(s,c){b(s,t,c),w(n,t,null),O(t,e),w(o,t,null),r=!0},p(s,c){const a={};4&c[0]|4096&c[1]&&(a.$$scope={dirty:c,ctx:s}),n.$set(a)},i(s){r||(d(n.$$.fragment,s),d(o.$$.fragment,s),r=!0)},o(s){m(n.$$.fragment,s),m(o.$$.fragment,s),r=!1},d(s){s&&x(t),y(n),y(o)}}}function bx(i){let t,n,e=i[39]+"";return{c(){t=V(e),n=H()},m(o,r){b(o,t,r),b(o,n,r)},p:N,d(o){o&&(x(t),x(n))}}}function Gl(i){let t,n;function e(){return i[25](i[40])}return t=new xt.Item({props:{onSelect:e,highlight:i[2]===i[40],$$slots:{default:[bx]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(o,r){w(t,o,r),n=!0},p(o,r){i=o;const s={};513&r[0]&&(s.onSelect=e),4&r[0]&&(s.highlight=i[2]===i[40]),4096&r[1]&&(s.$$scope={dirty:r,ctx:i}),t.$set(s)},i(o){n||(d(t.$$.fragment,o),n=!0)},o(o){m(t.$$.fragment,o),n=!1},d(o){y(t,o)}}}function _x(i){let t,n,e=se(i[13]),o=[];for(let s=0;s<e.length;s+=1)o[s]=Gl(jl(i,e,s));const r=s=>m(o[s],1,1,()=>{o[s]=null});return{c(){for(let s=0;s<o.length;s+=1)o[s].c();t=ft()},m(s,c){for(let a=0;a<o.length;a+=1)o[a]&&o[a].m(s,c);b(s,t,c),n=!0},p(s,c){if(8709&c[0]){let a;for(e=se(s[13]),a=0;a<e.length;a+=1){const l=jl(s,e,a);o[a]?(o[a].p(l,c),d(o[a],1)):(o[a]=Gl(l),o[a].c(),d(o[a],1),o[a].m(t.parentNode,t))}for(q(),a=e.length;a<o.length;a+=1)r(a);j()}},i(s){if(!n){for(let c=0;c<e.length;c+=1)d(o[c]);n=!0}},o(s){o=o.filter(Boolean);for(let c=0;c<o.length;c+=1)m(o[c]);n=!1},d(s){s&&x(t),bn(o,s)}}}function Cx(i){let t,n,e,o;return t=new xt.Trigger({props:{$$slots:{default:[xx]},$$scope:{ctx:i}}}),e=new xt.Content({props:{size:1,side:"bottom",align:"start",$$slots:{default:[_x]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment),n=H(),v(e.$$.fragment)},m(r,s){w(t,r,s),b(r,n,s),w(e,r,s),o=!0},p(r,s){const c={};4&s[0]|4096&s[1]&&(c.$$scope={dirty:s,ctx:r}),t.$set(c);const a={};517&s[0]|4096&s[1]&&(a.$$scope={dirty:s,ctx:r}),e.$set(a)},i(r){o||(d(t.$$.fragment,r),d(e.$$.fragment,r),o=!0)},o(r){m(t.$$.fragment,r),m(e.$$.fragment,r),o=!1},d(r){r&&x(n),y(t,r),y(e,r)}}}function Ax(i){let t,n,e,o,r,s;e=new Wt({props:{size:1,weight:"medium",$$slots:{default:[wx]},$$scope:{ctx:i}}});let c={$$slots:{default:[Cx]},$$scope:{ctx:i}};return r=new xt.Root({props:c}),i[26](r),{c(){t=L("div"),n=L("div"),v(e.$$.fragment),o=H(),v(r.$$.fragment),A(n,"class","c-threads-menu__sort-label svelte-113v40n"),A(t,"slot","sort-options"),A(t,"class","c-threads-menu__sort-options svelte-113v40n")},m(a,l){b(a,t,l),O(t,n),w(e,n,null),O(t,o),w(r,t,null),s=!0},p(a,l){const u={};4096&l[1]&&(u.$$scope={dirty:l,ctx:a}),e.$set(u);const $={};517&l[0]|4096&l[1]&&($.$$scope={dirty:l,ctx:a}),r.$set($)},i(a){s||(d(e.$$.fragment,a),d(r.$$.fragment,a),s=!0)},o(a){m(e.$$.fragment,a),m(r.$$.fragment,a),s=!1},d(a){a&&x(t),y(e),i[26](null),y(r)}}}function Kl(i){let t,n,e,o;return n=new nm({props:{size:4}}),{c(){t=L("div"),v(n.$$.fragment),e=H(),A(t,"class","c-threads-menu__separator svelte-113v40n")},m(r,s){b(r,t,s),w(n,t,null),O(t,e),o=!0},i(r){o||(d(n.$$.fragment,r),o=!0)},o(r){m(n.$$.fragment,r),o=!1},d(r){r&&x(t),y(n)}}}function Yl(i){let t,n,e,o;t=new sx({props:{groupTitle:i[36].groupTitle,conversations:i[36].conversations,onConversationClicked:i[17],deleteConversation:i[18],chatModel:i[1]}});let r=i[38]<i[4].length-1&&Kl();return{c(){v(t.$$.fragment),n=H(),r&&r.c(),e=ft()},m(s,c){w(t,s,c),b(s,n,c),r&&r.m(s,c),b(s,e,c),o=!0},p(s,c){const a={};16&c[0]&&(a.groupTitle=s[36].groupTitle),16&c[0]&&(a.conversations=s[36].conversations),2&c[0]&&(a.chatModel=s[1]),t.$set(a),s[38]<s[4].length-1?r?16&c[0]&&d(r,1):(r=Kl(),r.c(),d(r,1),r.m(e.parentNode,e)):r&&(q(),m(r,1,1,()=>{r=null}),j())},i(s){o||(d(t.$$.fragment,s),d(r),o=!0)},o(s){m(t.$$.fragment,s),m(r),o=!1},d(s){s&&(x(n),x(e)),y(t,s),r&&r.d(s)}}}function Mx(i){let t,n,e=se(i[4]),o=[];for(let s=0;s<e.length;s+=1)o[s]=Yl(Wl(i,e,s));const r=s=>m(o[s],1,1,()=>{o[s]=null});return{c(){t=L("div");for(let s=0;s<o.length;s+=1)o[s].c();A(t,"slot","body"),A(t,"data-testid","threads-menu-body")},m(s,c){b(s,t,c);for(let a=0;a<o.length;a+=1)o[a]&&o[a].m(t,null);n=!0},p(s,c){if(393234&c[0]){let a;for(e=se(s[4]),a=0;a<e.length;a+=1){const l=Wl(s,e,a);o[a]?(o[a].p(l,c),d(o[a],1)):(o[a]=Yl(l),o[a].c(),d(o[a],1),o[a].m(t,null))}for(q(),a=e.length;a<o.length;a+=1)r(a);j()}},i(s){if(!n){for(let c=0;c<e.length;c+=1)d(o[c]);n=!0}},o(s){o=o.filter(Boolean);for(let c=0;c<o.length;c+=1)m(o[c]);n=!1},d(s){s&&x(t),bn(o,s)}}}function kx(i){let t,n,e,o,r;function s(a){i[30](a)}let c={active:i[3],class:Om,title:yn.getDisplayName(i[11]),$$slots:{body:[Mx],"sort-options":[Ax],buttons:[vx]},$$scope:{ctx:i}};return i[8]!==void 0&&(c.element=i[8]),t=new Wy({props:c}),Qt.push(()=>Ne(t,"element",s)),t.$on("click",i[14]),t.$on("keydown",vo("Enter",i[14])),{c(){v(t.$$.fragment)},m(a,l){w(t,a,l),e=!0,o||(r=[Dt(window,"blur",i[19]),Dt(window,"keydown",vo("Escape",i[15])),Dt(window,"click",i[24],!0)],o=!0)},p(a,l){const u={};8&l[0]&&(u.active=a[3]),2048&l[0]&&(u.title=yn.getDisplayName(a[11])),3839&l[0]|4096&l[1]&&(u.$$scope={dirty:l,ctx:a}),!n&&256&l[0]&&(n=!0,u.element=a[8],Be(()=>n=!1)),t.$set(u)},i(a){e||(d(t.$$.fragment,a),e=!0)},o(a){m(t.$$.fragment,a),e=!1},d(a){y(t,a),o=!1,tn(r)}}}const Om="js-threads-menu",Sx="new-thread-button",Xl="Show Sessions",Zl="Collapse Sessions";var Ye=(i=>(i.Pinned="Pinned",i.Active="Active remote agents",i.Today="Today",i.New="New",i.ThisWeek="Last 7 days",i.ThisMonth="Last 30 days",i.Older="Older",i))(Ye||{});function Tx(i,t,n){let e,o,r,s,c,a,l=N,u=()=>(l(),l=ie(p,Z=>n(1,s=Z)),p),$=N,f=N;i.$$.on_destroy.push(()=>l()),i.$$.on_destroy.push(()=>$()),i.$$.on_destroy.push(()=>f());let{chatModel:p}=t;u();let{onActiveChanged:_=()=>{}}=t,{active:C}=t,M=C||!1;const T=[Ye.Pinned,Ye.Active,Ye.Today,Ye.ThisWeek,Ye.ThisMonth,Ye.Older];let E=[];function R(Z){C===void 0&&M!==Z&&(n(3,M=Z),_(Z))}function P(){R(!1)}function J(){p.setCurrentConversation(),P()}let K,et=!1,U,G,nt,X="";async function Y(Z){if(Z!==void 0){U&&(clearTimeout(void 0),U.requestOpen()),n(5,K="retrieving"),n(6,X="");try{const it=await p.getConversationUrl(Z);navigator.clipboard.writeText(it),n(5,K="copied")}catch(it){const rt=it;n(5,K="failure"),n(6,X=rt.message)}finally{setTimeout(()=>{U==null||U.requestClose()},1200)}}}return i.$$set=Z=>{"chatModel"in Z&&u(n(0,p=Z.chatModel)),"onActiveChanged"in Z&&n(21,_=Z.onActiveChanged),"active"in Z&&n(22,C=Z.active)},i.$$.update=()=>{2&i.$$.dirty[0]&&(n(12,e=s.sortConversationsBy),$(),$=ie(e,Z=>n(2,c=Z))),2&i.$$.dirty[0]&&(n(11,o=s.currentConversationModel),f(),f=ie(o,Z=>n(23,a=Z))),8388609&i.$$.dirty[0]&&n(10,r=!!a.id&&p.isConversationShareable(a.id)),7&i.$$.dirty[0]&&(Z=>{var ct;const it=new Map,rt=new Date(new Date().setHours(0,0,0,0)),ht=[{age:Ye.Today,date:rt},{age:Ye.ThisWeek,date:new Date(rt.getTime()-6048e5)},{age:Ye.ThisMonth,date:new Date(rt.getTime()-2592e6)}];for(const vt of Z){const Gt=yn.getTime(vt,c);let Ct=((ct=ht.find(jt=>Gt>=jt.date))==null?void 0:ct.age)||Ye.Older;vt.isPinned&&(Ct=Ye.Pinned),it.set(Ct,[...it.get(Ct)||[],vt])}n(4,E=T.map(vt=>({groupTitle:vt,conversations:it.get(vt)||[]})).filter(vt=>vt.conversations.length>0))})(s.orderedConversations(c).filter(Z=>!!p.flags.enableAgentMode||!pn(Z)))},[p,s,c,M,E,K,X,U,G,nt,r,o,e,[{label:"Last Message",value:"lastMessageTimestamp"},{label:"Created Date",value:"createdAt"}],function(Z){R(!M),Z.stopPropagation(),Z.preventDefault()},P,J,function(Z){p.setCurrentConversation(Z),P()},async function(Z){try{et=!0,await s.deleteConversation(Z)}finally{et=!1}},function(){et||P()},Y,_,C,a,Z=>{G&&Z.composedPath().includes(G)||P()},Z=>{p.setSortConversationsBy(Z),nt==null||nt.requestClose()},function(Z){Qt[Z?"unshift":"push"](()=>{nt=Z,n(9,nt)})},Z=>{Y(o.id),Z.stopPropagation()},function(Z){Qt[Z?"unshift":"push"](()=>{U=Z,n(7,U)})},Z=>{J(),Z.stopPropagation()},function(Z){G=Z,n(8,G)}]}class Ex extends ut{constructor(t){super(),dt(this,t,Tx,kx,lt,{chatModel:0,onActiveChanged:21,active:22},null,[-1,-1])}}const Ix=1e3,Lx=[Ye.New,Ye.Pinned,Ye.Active,Ye.Today,Ye.ThisWeek,Ye.ThisMonth,Ye.Older];function Rx(i){return i.sort((t,n)=>n.sortTimestamp.getTime()-t.sortTimestamp.getTime())}function Jl(i,t,n=200){return e=>function(o,r){const{onClose:s,isActive:c,threshold:a=200,resetTimeout:l=150}=r;let u,$=0,f=!1,p=!1,_={isTracking:!1,startedAtTop:!1,initialScrollTop:0,overscrollAmount:0};const C=E=>{if(!c())return;const{scrollTop:R}=o;return f||(f=!0,p=R===0,$=0,_={isTracking:p,startedAtTop:p,initialScrollTop:R,overscrollAmount:0}),p&&R===0&&E.deltaY<0&&($+=Math.abs(E.deltaY),_.overscrollAmount=$,$>=a)?(s(),void M()):p&&R>0?(clearTimeout(u),void(u=setTimeout(()=>{M()},l))):void(p&&E.deltaY>0?M():Math.abs(E.deltaY)<7||(clearTimeout(u),u=setTimeout(()=>{M()},l)))},M=()=>{f=!1,p=!1,$=0,clearTimeout(u),_={isTracking:!1,startedAtTop:!1,initialScrollTop:0,overscrollAmount:0}},T=()=>{f&&p&&o.scrollTop>10&&M()};return o.addEventListener("wheel",C,{passive:!0}),o.addEventListener("scroll",T,{passive:!0}),{destroy(){o.removeEventListener("wheel",C),o.removeEventListener("scroll",T),clearTimeout(u)},update(E){Object.assign(r,E)}}}(e,{onClose:i,isActive:t,threshold:n})}function Dx(i){let t,n;return t=new ve({props:{size:1,variant:"soft",color:"neutral","data-testid":zm,$$slots:{iconLeft:[Fx],default:[Nx]},$$scope:{ctx:i}}}),t.$on("click",i[17]),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};524288&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function Px(i){let t,n,e;return n=new Im.Root({props:{variant:"soft",color:"neutral",radius:"medium",size:1,dropdownSide:"bottom",dropdownAlign:"end",class:"c-agent-type-dropdown__button",$$slots:{"dropdown-content":[qx],button:[Ux]},$$scope:{ctx:i}}}),{c(){t=L("div"),v(n.$$.fragment),A(t,"class","new-thread-dropdown svelte-a7mgt")},m(o,r){b(o,t,r),w(n,t,null),e=!0},p(o,r){const s={};524409&r&&(s.$$scope={dirty:r,ctx:o}),n.$set(s)},i(o){e||(d(n.$$.fragment,o),e=!0)},o(o){m(n.$$.fragment,o),e=!1},d(o){o&&x(t),y(n)}}}function Nx(i){let t;return{c(){t=V("New")},m(n,e){b(n,t,e)},d(n){n&&x(t)}}}function Fx(i){let t,n;return t=new N$({props:{slot:"iconLeft"}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p:N,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function Ox(i){let t;return{c(){t=V("New")},m(n,e){b(n,t,e)},d(n){n&&x(t)}}}function zx(i){let t,n,e;var o=i[0].icon;return o&&(t=sn(o,{props:{slot:"iconLeft"}})),{c(){t&&v(t.$$.fragment),n=ft()},m(r,s){t&&w(t,r,s),b(r,n,s),e=!0},p(r,s){if(1&s&&o!==(o=r[0].icon)){if(t){q();const c=t;m(c.$$.fragment,1,0,()=>{y(c,1)}),j()}o?(t=sn(o,{props:{slot:"iconLeft"}}),v(t.$$.fragment),d(t.$$.fragment,1),w(t,n.parentNode,n)):t=null}},i(r){e||(t&&d(t.$$.fragment,r),e=!0)},o(r){t&&m(t.$$.fragment,r),e=!1},d(r){r&&x(n),t&&y(t,r)}}}function Bx(i){let t,n;return t=new ve({props:{size:1,variant:"soft",color:"neutral","data-testid":zm,"data-split-button-main":!0,$$slots:{iconLeft:[zx],default:[Ox]},$$scope:{ctx:i}}}),t.$on("click",i[16]),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};524289&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function Hx(i){let t,n,e,o,r,s;return r=new Hr({props:{icons:[`${Si.cmdOrCtrl}`,"L"]}}),{c(){t=L("div"),n=L("span"),e=V(i[4]),o=H(),v(r.$$.fragment),A(t,"slot","content"),A(t,"class","c-new-thread-dropdown__tooltip-content svelte-a7mgt")},m(c,a){b(c,t,a),O(t,n),O(n,e),O(t,o),w(r,t,null),s=!0},p(c,a){(!s||16&a)&&bt(e,c[4])},i(c){s||(d(r.$$.fragment,c),s=!0)},o(c){m(r.$$.fragment,c),s=!1},d(c){c&&x(t),y(r)}}}function Ux(i){let t,n;return t=new zt({props:{slot:"button",$$slots:{content:[Hx],default:[Bx]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};524305&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function Ql(i){let t,n;return t=new yr({props:{onSelect:i[14],isConversationAgentic:!0,tooltipSide:"right",tooltipContent:"Require approval for some tools","data-testid":Vx}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};8&o&&(r.onSelect=e[14]),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function tu(i){let t,n;return t=new yr({props:{onSelect:i[15],isBackgroundAgent:!0,tooltipSide:"right",tooltipContent:"Run background agents in the cloud","data-testid":Gx}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p:N,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function qx(i){let t,n,e,o,r;t=new yr({props:{onSelect:i[13],isConversationAgentic:!1,tooltipSide:"right",tooltipContent:"Ask Augment","data-testid":Wx}});let s=i[5]&&Ql(i),c=i[6]&&tu(i);return{c(){v(t.$$.fragment),n=H(),s&&s.c(),e=H(),c&&c.c(),o=ft()},m(a,l){w(t,a,l),b(a,n,l),s&&s.m(a,l),b(a,e,l),c&&c.m(a,l),b(a,o,l),r=!0},p(a,l){a[5]?s?(s.p(a,l),32&l&&d(s,1)):(s=Ql(a),s.c(),d(s,1),s.m(e.parentNode,e)):s&&(q(),m(s,1,1,()=>{s=null}),j()),a[6]?c?(c.p(a,l),64&l&&d(c,1)):(c=tu(a),c.c(),d(c,1),c.m(o.parentNode,o)):c&&(q(),m(c,1,1,()=>{c=null}),j())},i(a){r||(d(t.$$.fragment,a),d(s),d(c),r=!0)},o(a){m(t.$$.fragment,a),m(s),m(c),r=!1},d(a){a&&(x(n),x(e),x(o)),y(t,a),s&&s.d(a),c&&c.d(a)}}}function jx(i){let t,n,e,o;const r=[Px,Dx],s=[];function c(a,l){return a[5]||a[6]?0:1}return t=c(i),n=s[t]=r[t](i),{c(){n.c(),e=ft()},m(a,l){s[t].m(a,l),b(a,e,l),o=!0},p(a,[l]){let u=t;t=c(a),t===u?s[t].p(a,l):(q(),m(s[u],1,1,()=>{s[u]=null}),j(),n=s[t],n?n.p(a,l):(n=s[t]=r[t](a),n.c()),d(n,1),n.m(e.parentNode,e))},i(a){o||(d(n),o=!0)},o(a){m(n),o=!1},d(a){a&&x(e),s[t].d(a)}}}const zm="new-thread-button",Wx="new-chat-thread-button",Vx="new-local-agent-manual-thread-button",Gx="new-remote-agent-thread-button";function Kx(i,t,n){let e,o,r,s,c,a,l,u,$,f,p=N,_=N;i.$$.on_destroy.push(()=>p()),i.$$.on_destroy.push(()=>_());const C=kt(Rn.key);Tt(i,C,R=>n(10,l=R));const M=kt(vr.key),T=kt("chatModel");Tt(i,T,R=>n(12,f=R));const E=kt("agentConversationModel");return i.$$.update=()=>{4096&i.$$.dirty&&n(6,e=!!T&&f.flags.enableBackgroundAgents),4096&i.$$.dirty&&n(5,o=!!T&&f.flags.enableAgentMode),3086&i.$$.dirty&&n(0,c=zi({isConversationAgentic:!!r&&$,agentExecutionMode:s?u:void 0,isBackgroundAgent:!!C&&l.isActive})),1&i.$$.dirty&&n(4,a=c.type==="remoteAgent"?"New Remote Agent":c.type==="localAgent"?"New Agent":"New Chat")},n(2,r=E==null?void 0:E.isCurrConversationAgentic),_(),_=ie(r,R=>n(11,$=R)),n(1,s=T==null?void 0:T.agentExecutionMode),p(),p=ie(s,R=>n(3,u=R)),[c,s,r,u,a,o,e,C,M,T,l,$,f,()=>M.createNewChatThread(),()=>M.createNewLocalAgentThread(u),()=>M.createNewRemoteAgentThread(),()=>M.createThreadOfCurrentType(),()=>M.createNewChatThread()]}class Yx extends ut{constructor(t){super(),dt(this,t,Kx,jx,lt,{})}}function eu(i){let t;return{c(){t=L("div"),A(t,"class","update-indicator svelte-ef9b48")},m(n,e){b(n,t,e)},d(n){n&&x(t)}}}function Xx(i){let t,n,e,o;n=new Hi({});let r=i[0]&&eu();return{c(){t=L("div"),v(n.$$.fragment),e=H(),r&&r.c(),A(t,"class","remote-agent-icon svelte-ef9b48")},m(s,c){b(s,t,c),w(n,t,null),O(t,e),r&&r.m(t,null),o=!0},p(s,[c]){s[0]?r||(r=eu(),r.c(),r.m(t,null)):r&&(r.d(1),r=null)},i(s){o||(d(n.$$.fragment,s),o=!0)},o(s){m(n.$$.fragment,s),o=!1},d(s){s&&x(t),y(n),r&&r.d()}}}function Zx(i,t,n){let{hasUpdates:e=!1}=t;return i.$$set=o=>{"hasUpdates"in o&&n(0,e=o.hasUpdates)},[e]}class Jx extends ut{constructor(t){super(),dt(this,t,Zx,Xx,lt,{hasUpdates:0})}}function Qx(i){let t,n;return{c(){t=oe("svg"),n=oe("path"),A(n,"d","M11.45 7.25C11.9167 7.68333 12.15 8.21667 12.15 8.85C12.15 9.45 11.95 9.98333 11.55 10.45C11.15 10.8833 10.65 11.1333 10.05 11.2C9.45 11.2333 8.9 11.0833 8.4 10.75C7.93333 10.3833 7.63333 9.9 7.5 9.3C6.83333 9.26667 6.18333 9.08333 5.55 8.75C4.81667 8.38333 4.2 7.85 3.7 7.15V9.4C4.06667 9.46667 4.4 9.63333 4.7 9.9C5 10.1333 5.21667 10.4167 5.35 10.75C5.51667 11.0833 5.58333 11.4 5.55 11.7C5.55 12.2 5.41667 12.65 5.15 13.05C4.91667 13.4167 4.56667 13.7 4.1 13.9C3.66667 14.0667 3.21667 14.1 2.75 14C2.28333 13.9 1.88333 13.6833 1.55 13.35C1.21667 13.0167 1 12.6333 0.9 12.2C0.833333 11.7333 0.883333 11.2833 1.05 10.85C1.25 10.3833 1.53333 10.0167 1.9 9.75C2.16667 9.58333 2.45 9.46667 2.75 9.4V4.65C2.28333 4.55 1.88333 4.33333 1.55 4C1.21667 3.66667 1 3.26667 0.9 2.8C0.833333 2.33333 0.883333 1.88333 1.05 1.45C1.25 1.01667 1.53333 0.666666 1.9 0.4C2.3 0.133333 2.73333 0 3.2 0C3.53333 0 3.85 0.0666666 4.15 0.2C4.75 0.433333 5.16667 0.849999 5.4 1.45C5.53333 1.75 5.6 2.06667 5.6 2.4C5.6 2.86667 5.46667 3.3 5.2 3.7C4.93333 4.06667 4.58333 4.35 4.15 4.55C4.01667 4.61667 3.88333 4.65 3.75 4.65C3.85 5.65 4.25 6.5 4.95 7.2C5.65 7.9 6.5 8.3 7.5 8.4C7.53333 8.26667 7.56667 8.13333 7.6 8C7.8 7.56667 8.1 7.21667 8.5 6.95C8.96667 6.65 9.46667 6.53333 10 6.6C10.5667 6.63333 11.05 6.85 11.45 7.25ZM3.75 10.4C3.48333 10.3 3.21667 10.2833 2.95 10.35C2.68333 10.3833 2.43333 10.5167 2.2 10.75C2 10.95 1.86667 11.1833 1.8 11.45C1.76667 11.7167 1.8 11.9833 1.9 12.25C2.03333 12.5167 2.21667 12.7333 2.45 12.9C2.71667 13.0667 3.01667 13.1333 3.35 13.1C3.68333 13.0667 3.96667 12.9333 4.2 12.7C4.43333 12.4667 4.56667 12.1833 4.6 11.85C4.63333 11.5167 4.56667 11.2333 4.4 11C4.23333 10.7333 4.01667 10.5333 3.75 10.4ZM3.2 3.75C3.56667 3.75 3.86667 3.65 4.1 3.45C4.36667 3.21667 4.53333 2.93333 4.6 2.6C4.66667 2.26667 4.61667 1.96667 4.45 1.7C4.28333 1.4 4.05 1.2 3.75 1.1C3.48333 0.966667 3.21667 0.933333 2.95 1C2.68333 1.03333 2.43333 1.15 2.2 1.35C2 1.55 1.86667 1.8 1.8 2.1C1.76667 2.36667 1.8 2.63333 1.9 2.9C2.03333 3.13333 2.21667 3.33333 2.45 3.5C2.68333 3.66667 2.93333 3.75 3.2 3.75ZM10.8 9.9C10.9667 9.73333 11.0833 9.53333 11.15 9.3C11.2167 9.06667 11.2167 8.85 11.15 8.65C11.1167 8.41667 11.0167 8.21667 10.85 8.05C10.7167 7.85 10.5333 7.7 10.3 7.6C10.0667 7.5 9.8 7.48333 9.5 7.55C9.23333 7.58333 9 7.7 8.8 7.9C8.6 8.1 8.46667 8.35 8.4 8.65C8.33333 8.91667 8.35 9.16667 8.45 9.4C8.55 9.63333 8.68333 9.83333 8.85 10C9.05 10.1333 9.26667 10.2333 9.5 10.3C9.73333 10.3333 9.96667 10.3167 10.2 10.25C10.4333 10.1833 10.6333 10.0667 10.8 9.9Z"),A(t,"width","15"),A(t,"height","15"),A(t,"viewBox","-1 0 15 15"),A(t,"fill","currentColor"),A(t,"xmlns","http://www.w3.org/2000/svg")},m(e,o){b(e,t,o),O(t,n)},p:N,i:N,o:N,d(e){e&&x(t)}}}class Bm extends ut{constructor(t){super(),dt(this,t,null,Qx,lt,{})}}function tb(i){let t,n;return t=new sr({}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function eb(i){let t,n;return t=new fe({props:{variant:"ghost-block",color:"neutral",size:1,class:"c-agent-header__options-btn",$$slots:{default:[tb]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};2097152&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function nu(i){var s;let t,n,e,o=i[3]&&ou(i),r=i[2]&&((s=i[0].conversation)==null?void 0:s.isShareable)&&ru(i);return{c(){o&&o.c(),t=H(),r&&r.c(),n=ft()},m(c,a){o&&o.m(c,a),b(c,t,a),r&&r.m(c,a),b(c,n,a),e=!0},p(c,a){var l;c[3]?o?(o.p(c,a),8&a&&d(o,1)):(o=ou(c),o.c(),d(o,1),o.m(t.parentNode,t)):o&&(q(),m(o,1,1,()=>{o=null}),j()),c[2]&&((l=c[0].conversation)!=null&&l.isShareable)?r?(r.p(c,a),5&a&&d(r,1)):(r=ru(c),r.c(),d(r,1),r.m(n.parentNode,n)):r&&(q(),m(r,1,1,()=>{r=null}),j())},i(c){e||(d(o),d(r),e=!0)},o(c){m(o),m(r),e=!1},d(c){c&&(x(t),x(n)),o&&o.d(c),r&&r.d(c)}}}function ou(i){let t,n;return t=new xt.Item({props:{onSelect:i[13],$$slots:{iconLeft:[ob],default:[nb]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};2097152&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function nb(i){let t;return{c(){t=V("Rename")},m(n,e){b(n,t,e)},d(n){n&&x(t)}}}function ob(i){let t,n;return t=new zs({props:{slot:"iconLeft"}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p:N,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function ru(i){let t,n;return t=new xt.Item({props:{class:"c-thread-menu__share-link",onSelect:i[15],$$slots:{iconLeft:[fb],default:[lb]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};2097248&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function rb(i){let t;return{c(){t=V("Share link to session")},m(n,e){b(n,t,e)},p:N,d(n){n&&x(t)}}}function ib(i){let t;return{c(){t=V("Unable to create link")},m(n,e){b(n,t,e)},p:N,d(n){n&&x(t)}}}function sb(i){let t;return{c(){t=V("Link copied")},m(n,e){b(n,t,e)},p:N,d(n){n&&x(t)}}}function ab(i){let t;return{c(){t=V("Creating link")},m(n,e){b(n,t,e)},p:N,d(n){n&&x(t)}}}function cb(i){let t;return{c(){t=V(i[6])},m(n,e){b(n,t,e)},p(n,e){64&e&&bt(t,n[6])},d(n){n&&x(t)}}}function lb(i){let t;function n(r,s){return r[6]?cb:r[5]==="retrieving"?ab:r[5]==="copied"?sb:r[5]==="failure"?ib:rb}let e=n(i),o=e(i);return{c(){o.c(),t=ft()},m(r,s){o.m(r,s),b(r,t,s)},p(r,s){e===(e=n(r))&&o?o.p(r,s):(o.d(1),o=e(r),o&&(o.c(),o.m(t.parentNode,t)))},d(r){r&&x(t),o.d(r)}}}function ub(i){let t,n;return t=new Bi({}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function db(i){let t,n;return t=new _r({}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function $b(i){let t,n;return t=new Ho({}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function mb(i){let t,n;return t=new ro({props:{size:1}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function fb(i){let t,n,e,o;const r=[mb,$b,db,ub],s=[];function c(a,l){return a[5]==="retrieving"?0:a[5]==="copied"?1:a[5]==="failure"?2:3}return t=c(i),n=s[t]=r[t](i),{c(){n.c(),e=ft()},m(a,l){s[t].m(a,l),b(a,e,l),o=!0},p(a,l){let u=t;t=c(a),t!==u&&(q(),m(s[u],1,1,()=>{s[u]=null}),j(),n=s[t],n||(n=s[t]=r[t](a),n.c()),d(n,1),n.m(e.parentNode,e))},i(a){o||(d(n),o=!0)},o(a){m(n),o=!1},d(a){a&&x(e),s[t].d(a)}}}function pb(i){let t,n=i[0].isPinned?"Unpin":"Pin";return{c(){t=V(n)},m(e,o){b(e,t,o)},p(e,o){1&o&&n!==(n=e[0].isPinned?"Unpin":"Pin")&&bt(t,n)},d(e){e&&x(t)}}}function gb(i){let t,n,e;return n=new Ds({}),{c(){t=L("div"),v(n.$$.fragment),A(t,"class","pin-icon")},m(o,r){b(o,t,r),w(n,t,null),e=!0},p:N,i(o){e||(d(n.$$.fragment,o),e=!0)},o(o){m(n.$$.fragment,o),e=!1},d(o){o&&x(t),y(n)}}}function iu(i){let t,n;return t=new xt.Item({props:{onSelect:i[14],$$slots:{iconLeft:[yb],default:[wb]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};2097409&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function hb(i){let t;return{c(){t=V("Copy ID")},m(n,e){b(n,t,e)},p:N,d(n){n&&x(t)}}}function vb(i){let t,n=i[8].get(i[0].id)+"";return{c(){t=V(n)},m(e,o){b(e,t,o)},p(e,o){257&o&&n!==(n=e[8].get(e[0].id)+"")&&bt(t,n)},d(e){e&&x(t)}}}function wb(i){let t,n;function e(s,c){return 257&c&&(t=null),t==null&&(t=!!s[8].get(s[0].id)),t?vb:hb}let o=e(i,-1),r=o(i);return{c(){r.c(),n=ft()},m(s,c){r.m(s,c),b(s,n,c)},p(s,c){o===(o=e(s,c))&&r?r.p(s,c):(r.d(1),r=o(s),r&&(r.c(),r.m(n.parentNode,n)))},d(s){s&&x(n),r.d(s)}}}function yb(i){let t,n;return t=new im({props:{slot:"iconLeft"}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p:N,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function xb(i){let t;return{c(){t=V("Delete")},m(n,e){b(n,t,e)},d(n){n&&x(t)}}}function bb(i){let t,n,e;return n=new Wr({}),{c(){t=L("div"),v(n.$$.fragment),A(t,"class","trash-icon svelte-1l3udf2")},m(o,r){b(o,t,r),w(n,t,null),e=!0},p:N,i(o){e||(d(n.$$.fragment,o),e=!0)},o(o){m(n.$$.fragment,o),e=!1},d(o){o&&x(t),y(n)}}}function su(i){let t,n,e,o,r,s,c,a;return t=new xt.Separator({}),e=new xt.Label({props:{$$slots:{default:[_b]},$$scope:{ctx:i}}}),r=new xt.Item({props:{onSelect:i[17],$$slots:{default:[Cb]},$$scope:{ctx:i}}}),c=new xt.Item({props:{onSelect:i[18],$$slots:{default:[Ab]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment),n=H(),v(e.$$.fragment),o=H(),v(r.$$.fragment),s=H(),v(c.$$.fragment)},m(l,u){w(t,l,u),b(l,n,u),w(e,l,u),b(l,o,u),w(r,l,u),b(l,s,u),w(c,l,u),a=!0},p(l,u){const $={};2097152&u&&($.$$scope={dirty:u,ctx:l}),e.$set($);const f={};1&u&&(f.onSelect=l[17]),2097152&u&&(f.$$scope={dirty:u,ctx:l}),r.$set(f);const p={};1&u&&(p.onSelect=l[18]),2097152&u&&(p.$$scope={dirty:u,ctx:l}),c.$set(p)},i(l){a||(d(t.$$.fragment,l),d(e.$$.fragment,l),d(r.$$.fragment,l),d(c.$$.fragment,l),a=!0)},o(l){m(t.$$.fragment,l),m(e.$$.fragment,l),m(r.$$.fragment,l),m(c.$$.fragment,l),a=!1},d(l){l&&(x(n),x(o),x(s)),y(t,l),y(e,l),y(r,l),y(c,l)}}}function _b(i){let t;return{c(){t=V("INTERNAL Debug Features")},m(n,e){b(n,t,e)},d(n){n&&x(t)}}}function Cb(i){let t;return{c(){t=V("Pause")},m(n,e){b(n,t,e)},d(n){n&&x(t)}}}function Ab(i){let t;return{c(){t=V("Resume")},m(n,e){b(n,t,e)},d(n){n&&x(t)}}}function Mb(i){let t,n,e,o,r,s,c,a,l=i[1]!=="remoteAgent"&&nu(i);e=new xt.Item({props:{onSelect:i[11],$$slots:{iconLeft:[gb],default:[pb]},$$scope:{ctx:i}}});let u=i[1]==="remoteAgent"&&iu(i);s=new xt.Item({props:{color:"error",onSelect:i[12],$$slots:{iconLeft:[bb],default:[xb]},$$scope:{ctx:i}}});let $=i[1]==="remoteAgent"&&i[7]&&su(i);return{c(){t=L("div"),l&&l.c(),n=H(),v(e.$$.fragment),o=H(),u&&u.c(),r=H(),v(s.$$.fragment),c=H(),$&&$.c(),A(t,"class","c-thread-menu svelte-1l3udf2")},m(f,p){b(f,t,p),l&&l.m(t,null),O(t,n),w(e,t,null),O(t,o),u&&u.m(t,null),O(t,r),w(s,t,null),O(t,c),$&&$.m(t,null),a=!0},p(f,p){f[1]!=="remoteAgent"?l?(l.p(f,p),2&p&&d(l,1)):(l=nu(f),l.c(),d(l,1),l.m(t,n)):l&&(q(),m(l,1,1,()=>{l=null}),j());const _={};2097153&p&&(_.$$scope={dirty:p,ctx:f}),e.$set(_),f[1]==="remoteAgent"?u?(u.p(f,p),2&p&&d(u,1)):(u=iu(f),u.c(),d(u,1),u.m(t,r)):u&&(q(),m(u,1,1,()=>{u=null}),j());const C={};2097152&p&&(C.$$scope={dirty:p,ctx:f}),s.$set(C),f[1]==="remoteAgent"&&f[7]?$?($.p(f,p),130&p&&d($,1)):($=su(f),$.c(),d($,1),$.m(t,null)):$&&(q(),m($,1,1,()=>{$=null}),j())},i(f){a||(d(l),d(e.$$.fragment,f),d(u),d(s.$$.fragment,f),d($),a=!0)},o(f){m(l),m(e.$$.fragment,f),m(u),m(s.$$.fragment,f),m($),a=!1},d(f){f&&x(t),l&&l.d(),y(e),u&&u.d(),y(s),$&&$.d()}}}function kb(i){let t,n,e,o;return t=new xt.Trigger({props:{$$slots:{default:[eb]},$$scope:{ctx:i}}}),e=new xt.Content({props:{size:1,side:"bottom",align:"end",$$slots:{default:[Mb]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment),n=H(),v(e.$$.fragment)},m(r,s){w(t,r,s),b(r,n,s),w(e,r,s),o=!0},p(r,s){const c={};2097152&s&&(c.$$scope={dirty:s,ctx:r}),t.$set(c);const a={};2097647&s&&(a.$$scope={dirty:s,ctx:r}),e.$set(a)},i(r){o||(d(t.$$.fragment,r),d(e.$$.fragment,r),o=!0)},o(r){m(t.$$.fragment,r),m(e.$$.fragment,r),o=!1},d(r){r&&x(n),y(t,r),y(e,r)}}}function Sb(i){let t,n,e;function o(s){i[19](s)}let r={nested:!1,$$slots:{default:[kb]},$$scope:{ctx:i}};return i[4]!==void 0&&(r.requestClose=i[4]),t=new xt.Root({props:r}),Qt.push(()=>Ne(t,"requestClose",o)),{c(){v(t.$$.fragment)},m(s,c){w(t,s,c),e=!0},p(s,[c]){const a={};2097647&c&&(a.$$scope={dirty:c,ctx:s}),!n&&16&c&&(n=!0,a.requestClose=s[4],Be(()=>n=!1)),t.$set(a)},i(s){e||(d(t.$$.fragment,s),e=!0)},o(s){m(t.$$.fragment,s),e=!1},d(s){y(t,s)}}}function Tb(i,t,n){let e,o,r=kt("chatModel");const s=kt(Rn.key);let c,a,{thread:l}=t,{type:u="chat"}=t,{afterDelete:$}=t,{enableShareService:f=!1}=t,{onRename:p}=t,_="";const C=Re(new Map);return Tt(i,C,M=>n(8,o=M)),i.$$set=M=>{"thread"in M&&n(0,l=M.thread),"type"in M&&n(1,u=M.type),"afterDelete"in M&&n(16,$=M.afterDelete),"enableShareService"in M&&n(2,f=M.enableShareService),"onRename"in M&&n(3,p=M.onRename)},n(7,e=r.flags.enableDebugFeatures),[l,u,f,p,c,a,_,e,o,s,C,function(){u==="remoteAgent"?s==null||s.toggleAgentPinned(l.id,l.isPinned||!1):r&&r.toggleConversationPinned(l.id)},async function(){if(u==="remoteAgent"){if(!await(s==null?void 0:s.deleteAgent(l.id)))return}else await r.deleteConversation(l.id);$==null||$()},function(){p==null||p(l.id,l.title),c()},function(){navigator.clipboard.writeText(l.id),C.update(M=>(M.set(l.id,"Copied!"),M)),setTimeout(()=>{C.update(M=>(M.delete(l.id),M))},1e3)},async function(){var T;if(!((T=l.conversation)!=null&&T.id)||a!==void 0)return;const M=r==null?void 0:r.conversations[l.conversation.id];n(5,a=M!=null&&M.lastUrl?"copied":"retrieving");try{if(r){const E=await r.getConversationUrl(l.conversation.id);navigator.clipboard.writeText(E),n(5,a="copied")}}catch(E){console.error("Failed to get conversation URL: ",E),n(6,_=E instanceof Error?E.message:"Unknown error"),n(5,a="failure")}finally{setTimeout(()=>{n(5,a=void 0)},1200)}},$,()=>s.pauseRemoteAgentWorkspace(l.id),()=>s.resumeRemoteAgentWorkspace(l.id),function(M){c=M,n(4,c)}]}class Hm extends ut{constructor(t){super(),dt(this,t,Tb,Sb,lt,{thread:0,type:1,afterDelete:16,enableShareService:2,onRename:3})}}function au(i,{delay:t=0,duration:n=400,easing:e=qf,axis:o="y",scale:r=0}={}){const s=getComputedStyle(i),c=+s.opacity,a=o==="y"?"height":"width",l=parseFloat(s[a]),u=o==="y"?"scaleY":"scaleX",$=o==="y"?["top","bottom"]:["left","right"],f=$.map(R=>`${R[0].toUpperCase()}${R.slice(1)}`),p=parseFloat(s[`padding${f[0]}`]||"0"),_=parseFloat(s[`padding${f[1]}`]||"0"),C=parseFloat(s[`margin${f[0]}`]||"0"),M=parseFloat(s[`margin${f[1]}`]||"0"),T=parseFloat(s[`border${f[0]}Width`]||"0"),E=parseFloat(s[`border${f[1]}Width`]||"0");return{delay:t,duration:n,easing:e,css:R=>{const P=r+(1-r)*R;return`overflow: hidden;opacity: ${R*c};${a}: ${R*l}px;padding-${$[0]}: ${R*p}px;padding-${$[1]}: ${R*_}px;margin-${$[0]}: ${R*C}px;margin-${$[1]}: ${R*M}px;border-${$[0]}-width: ${R*T}px;border-${$[1]}-width: ${R*E}px;transform: ${u}(${P});transform-origin: center;`}}}function cu(i,t,n){const e=i.slice();return e[35]=t[n],e[37]=n,e}function ss(i){const t=i.slice(),n=t[8]?t[8](t[0].agent):{name:"Unknown",fullPath:"Unknown"};return t[38]=n,t}function Eb(i){let t,n,e,o;var r=i[16].icon;return r&&(n=sn(r,{})),{c(){t=L("div"),n&&v(n.$$.fragment),A(t,"class",e="thread-type-icon thread-type-icon--"+i[16].type+" svelte-1k2puwx")},m(s,c){b(s,t,c),n&&w(n,t,null),o=!0},p(s,c){if(65536&c[0]&&r!==(r=s[16].icon)){if(n){q();const a=n;m(a.$$.fragment,1,0,()=>{y(a,1)}),j()}r?(n=sn(r,{}),v(n.$$.fragment),d(n.$$.fragment,1),w(n,t,null)):n=null}(!o||65536&c[0]&&e!==(e="thread-type-icon thread-type-icon--"+s[16].type+" svelte-1k2puwx"))&&A(t,"class",e)},i(s){o||(n&&d(n.$$.fragment,s),o=!0)},o(s){n&&m(n.$$.fragment,s),o=!1},d(s){s&&x(t),n&&y(n)}}}function Ib(i){let t,n;return t=new Jx({props:{hasUpdates:i[0].type==="remoteAgent"&&i[0].has_updates}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};1&o[0]&&(r.hasUpdates=e[0].type==="remoteAgent"&&e[0].has_updates),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function lu(i){let t,n,e;return n=new zt({props:{nested:!1,hasPointerEvents:!1,content:i[0].isPinned?"Unpin thread":"Pin thread",triggerOn:[te.Hover],$$slots:{default:[Lb]},$$scope:{ctx:i}}}),{c(){t=L("div"),v(n.$$.fragment),A(t,"class","pin-icon svelte-1k2puwx"),At(t,"is-pinned",i[0].isPinned)},m(o,r){b(o,t,r),w(n,t,null),e=!0},p(o,r){const s={};1&r[0]&&(s.content=o[0].isPinned?"Unpin thread":"Pin thread"),65&r[0]|256&r[1]&&(s.$$scope={dirty:r,ctx:o}),n.$set(s),(!e||1&r[0])&&At(t,"is-pinned",o[0].isPinned)},i(o){e||(d(n.$$.fragment,o),e=!0)},o(o){m(n.$$.fragment,o),e=!1},d(o){o&&x(t),y(n)}}}function Lb(i){let t,n,e,o,r,s;return n=new Sm({}),{c(){t=L("button"),v(n.$$.fragment),A(t,"class","pin-icon__button svelte-1k2puwx"),A(t,"type","button"),A(t,"aria-label",e=i[0].isPinned?"Unpin thread":"Pin thread")},m(c,a){b(c,t,a),w(n,t,null),o=!0,r||(s=[Dt(t,"click",i[27]),Dt(t,"keydown",i[28])],r=!0)},p(c,a){(!o||1&a[0]&&e!==(e=c[0].isPinned?"Unpin thread":"Pin thread"))&&A(t,"aria-label",e)},i(c){o||(d(n.$$.fragment,c),o=!0)},o(c){m(n.$$.fragment,c),o=!1},d(c){c&&x(t),y(n),r=!1,tn(s)}}}function uu(i){let t,n;return t=new zt({props:{nested:!1,hasPointerEvents:!1,content:`Repository: ${i[38].fullPath}`,triggerOn:[te.Hover],$$slots:{default:[Rb]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};257&o[0]&&(r.content=`Repository: ${e[38].fullPath}`),257&o[0]|256&o[1]&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function Rb(i){let t,n,e,o,r,s,c,a=i[38].name+"";return e=new Bm({}),{c(){t=L("div"),n=L("div"),v(e.$$.fragment),o=H(),r=L("div"),s=V(a),A(n,"class","repo-pill-icon svelte-1k2puwx"),A(r,"class","repo-pill-text svelte-1k2puwx"),A(t,"class","repo-pill svelte-1k2puwx")},m(l,u){b(l,t,u),O(t,n),w(e,n,null),O(t,o),O(t,r),O(r,s),c=!0},p(l,u){(!c||257&u[0])&&a!==(a=l[38].name+"")&&bt(s,a)},i(l){c||(d(e.$$.fragment,l),c=!0)},o(l){m(e.$$.fragment,l),c=!1},d(l){l&&x(t),y(e)}}}function du(i){let t,n;return t=new zt({props:{nested:!1,hasPointerEvents:!1,triggerOn:[te.Hover],content:"Setup Script Agent",$$slots:{default:[Db]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function Db(i){let t,n,e;return n=new sm({}),{c(){t=L("div"),v(n.$$.fragment),A(t,"class","setup-script-badge svelte-1k2puwx")},m(o,r){b(o,t,r),w(n,t,null),e=!0},p:N,i(o){e||(d(n.$$.fragment,o),e=!0)},o(o){m(n.$$.fragment,o),e=!1},d(o){o&&x(t),y(n)}}}function $u(i){let t,n;return t=new zt({props:{nested:!1,hasPointerEvents:!1,triggerOn:[te.Hover],content:xr(i[0],"conversation.hasDraft")?"Draft message":"New thread",$$slots:{default:[Nb]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};1&o[0]&&(r.content=xr(e[0],"conversation.hasDraft")?"Draft message":"New thread"),1&o[0]|256&o[1]&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function Pb(i){let t,n=xr(i[0],"conversation.hasDraft")?"Draft":"New";return{c(){t=V(n)},m(e,o){b(e,t,o)},p(e,o){1&o[0]&&n!==(n=xr(e[0],"conversation.hasDraft")?"Draft":"New")&&bt(t,n)},d(e){e&&x(t)}}}function Nb(i){let t,n,e;return n=new Wt({props:{size:1,$$slots:{default:[Pb]},$$scope:{ctx:i}}}),{c(){t=L("div"),v(n.$$.fragment),A(t,"class","draft-badge svelte-1k2puwx")},m(o,r){b(o,t,r),w(n,t,null),e=!0},p(o,r){const s={};1&r[0]|256&r[1]&&(s.$$scope={dirty:r,ctx:o}),n.$set(s)},i(o){e||(d(n.$$.fragment,o),e=!0)},o(o){m(n.$$.fragment,o),e=!1},d(o){o&&x(t),y(n)}}}function Fb(i){let t,n;return t=new Wt({props:{size:1,truncate:!0,weight:i[0].type==="remoteAgent"&&i[0].has_updates?"medium":"regular",$$slots:{default:[Hb]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};1&o[0]&&(r.weight=e[0].type==="remoteAgent"&&e[0].has_updates?"medium":"regular"),1&o[0]|256&o[1]&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function Ob(i){let t,n,e,o,r;function s(l){i[29](l)}function c(l){i[30](l)}let a={size:1,variant:"surface",class:"edit-title-input"};return i[14]!==void 0&&(a.textInput=i[14]),i[13]!==void 0&&(a.value=i[13]),n=new ir({props:a}),Qt.push(()=>Ne(n,"textInput",s)),Qt.push(()=>Ne(n,"value",c)),n.$on("keydown",i[20]),n.$on("blur",i[31]),{c(){t=L("div"),v(n.$$.fragment),A(t,"class","edit-title-container svelte-1k2puwx")},m(l,u){b(l,t,u),w(n,t,null),r=!0},p(l,u){const $={};!e&&16384&u[0]&&(e=!0,$.textInput=l[14],Be(()=>e=!1)),!o&&8192&u[0]&&(o=!0,$.value=l[13],Be(()=>o=!1)),n.$set($)},i(l){r||(d(n.$$.fragment,l),r=!0)},o(l){m(n.$$.fragment,l),r=!1},d(l){l&&x(t),y(n)}}}function zb(i){let t,n;return t=new Wt({props:{size:1,truncate:!0,class:"draft-title",$$slots:{default:[Ub]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};1&o[0]|256&o[1]&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function Bb(i){let t,n;return t=new Wt({props:{size:1,truncate:!0,class:"setup-script-title",$$slots:{default:[qb]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};256&o[1]&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function Hb(i){let t,n=(i[0].title||i[23](i[0])||`New ${i[22][i[0].type]}`)+"";return{c(){t=V(n)},m(e,o){b(e,t,o)},p(e,o){1&o[0]&&n!==(n=(e[0].title||e[23](e[0])||`New ${e[22][e[0].type]}`)+"")&&bt(t,n)},d(e){e&&x(t)}}}function Ub(i){var e,o;let t,n=(i[0].title||((o=(e=i[0].conversation)==null?void 0:e.draftExchange)==null?void 0:o.request_message)||"New Thread")+"";return{c(){t=V(n)},m(r,s){b(r,t,s)},p(r,s){var c,a;1&s[0]&&n!==(n=(r[0].title||((a=(c=r[0].conversation)==null?void 0:c.draftExchange)==null?void 0:a.request_message)||"New Thread")+"")&&bt(t,n)},d(r){r&&x(t)}}}function qb(i){let t;return{c(){t=V("Generate a setup script")},m(n,e){b(n,t,e)},d(n){n&&x(t)}}}function jb(i){let t,n,e,o,r,s,c,a=i[0].type==="remoteAgent"&&i[0].is_setup_script_agent&&du(i),l=i[10]&&$u(i);const u=[Bb,zb,Ob,Fb],$=[];function f(p,_){return 135169&_[0]&&(o=null),p[0].type==="remoteAgent"&&p[0].is_setup_script_agent?0:p[10]?1:(o==null&&(o=!(!p[12]||p[17]||!["chat","localAgent"].includes(p[0].type))),o?2:3)}return r=f(i,[-1,-1]),s=$[r]=u[r](i),{c(){t=L("div"),a&&a.c(),n=H(),l&&l.c(),e=H(),s.c(),A(t,"class","agent-title-content svelte-1k2puwx")},m(p,_){b(p,t,_),a&&a.m(t,null),O(t,n),l&&l.m(t,null),O(t,e),$[r].m(t,null),c=!0},p(p,_){p[0].type==="remoteAgent"&&p[0].is_setup_script_agent?a?1&_[0]&&d(a,1):(a=du(p),a.c(),d(a,1),a.m(t,n)):a&&(q(),m(a,1,1,()=>{a=null}),j()),p[10]?l?(l.p(p,_),1024&_[0]&&d(l,1)):(l=$u(p),l.c(),d(l,1),l.m(t,e)):l&&(q(),m(l,1,1,()=>{l=null}),j());let C=r;r=f(p,_),r===C?$[r].p(p,_):(q(),m($[C],1,1,()=>{$[C]=null}),j(),s=$[r],s?s.p(p,_):(s=$[r]=u[r](p),s.c()),d(s,1),s.m(t,null))},i(p){c||(d(a),d(l),d(s),c=!0)},o(p){m(a),m(l),m(s),c=!1},d(p){p&&x(t),a&&a.d(),l&&l.d(),$[r].d()}}}function mu(i){let t,n,e,o,r;return n=new of({props:{workspaceStatus:i[0].workspace_status,status:i[0].status,isExpanded:i[2]>330,hasUpdates:i[0].has_updates}}),o=new Dm({props:{agentId:i[0].agent.remote_agent_id,status:i[0].status,workspaceStatus:i[0].workspace_status}}),{c(){t=L("div"),v(n.$$.fragment),e=H(),v(o.$$.fragment),A(t,"class","agent-status svelte-1k2puwx")},m(s,c){b(s,t,c),w(n,t,null),b(s,e,c),w(o,s,c),r=!0},p(s,c){const a={};1&c[0]&&(a.workspaceStatus=s[0].workspace_status),1&c[0]&&(a.status=s[0].status),4&c[0]&&(a.isExpanded=s[2]>330),1&c[0]&&(a.hasUpdates=s[0].has_updates),n.$set(a);const l={};1&c[0]&&(l.agentId=s[0].agent.remote_agent_id),1&c[0]&&(l.status=s[0].status),1&c[0]&&(l.workspaceStatus=s[0].workspace_status),o.$set(l)},i(s){r||(d(n.$$.fragment,s),d(o.$$.fragment,s),r=!0)},o(s){m(n.$$.fragment,s),m(o.$$.fragment,s),r=!1},d(s){s&&(x(t),x(e)),y(n),y(o,s)}}}function fu(i){let t,n,e=JSON.stringify(i[18].slice(-9)),o=gu(i);return{c(){o.c(),t=ft()},m(r,s){o.m(r,s),b(r,t,s),n=!0},p(r,s){262144&s[0]&&lt(e,e=JSON.stringify(r[18].slice(-9)))?(q(),m(o,1,1,N),j(),o=gu(r),o.c(),d(o,1),o.m(t.parentNode,t)):o.p(r,s)},i(r){n||(d(o),n=!0)},o(r){m(o),n=!1},d(r){r&&x(t),o.d(r)}}}function Wb(i){let t,n;return{c(){t=L("div"),t.textContent="|",n=H(),A(t,"class","agent-chat-history__item svelte-1k2puwx")},m(e,o){b(e,t,o),b(e,n,o)},p:N,d(e){e&&(x(t),x(n))}}}function pu(i,t){let n,e,o;return e=new zt({props:{delayDurationMs:0,content:Ii(t[35]||"",170),side:"bottom",nested:!1,hasPointerEvents:!1,triggerOn:[te.Hover],$$slots:{default:[Wb]},$$scope:{ctx:t}}}),{key:i,first:null,c(){n=ft(),v(e.$$.fragment),this.first=n},m(r,s){b(r,n,s),w(e,r,s),o=!0},p(r,s){t=r;const c={};262144&s[0]&&(c.content=Ii(t[35]||"",170)),256&s[1]&&(c.$$scope={dirty:s,ctx:t}),e.$set(c)},i(r){o||(d(e.$$.fragment,r),o=!0)},o(r){m(e.$$.fragment,r),o=!1},d(r){r&&x(n),y(e,r)}}}function gu(i){let t,n,e=[],o=new Map,r=se(i[18].slice(-9));const s=c=>c[35]+"-"+c[37];for(let c=0;c<r.length;c+=1){let a=cu(i,r,c),l=s(a);o.set(l,e[c]=pu(l,a))}return{c(){t=L("div");for(let c=0;c<e.length;c+=1)e[c].c();A(t,"class","agent-chat-history svelte-1k2puwx")},m(c,a){b(c,t,a);for(let l=0;l<e.length;l+=1)e[l]&&e[l].m(t,null);n=!0},p(c,a){262144&a[0]&&(r=se(c[18].slice(-9)),q(),e=jr(e,a,s,1,c,r,o,t,Fi,pu,null,cu),j())},i(c){if(!n){for(let a=0;a<r.length;a+=1)d(e[a]);n=!0}},o(c){for(let a=0;a<e.length;a+=1)m(e[a]);n=!1},d(c){c&&x(t);for(let a=0;a<e.length;a+=1)e[a].d()}}}function hu(i){let t,n,e;return n=new Hm({props:{thread:i[0],type:i[15],afterDelete:i[4],enableShareService:i[9],onRename:i[21]}}),{c(){t=L("div"),v(n.$$.fragment),A(t,"class","agent-actions svelte-1k2puwx")},m(o,r){b(o,t,r),w(n,t,null),e=!0},p(o,r){const s={};1&r[0]&&(s.thread=o[0]),32768&r[0]&&(s.type=o[15]),16&r[0]&&(s.afterDelete=o[4]),512&r[0]&&(s.enableShareService=o[9]),n.$set(s)},i(o){e||(d(n.$$.fragment,o),e=!0)},o(o){m(n.$$.fragment,o),e=!1},d(o){o&&x(t),y(n)}}}function vu(i){let t,n,e,o,r,s,c,a,l,u,$,f,p,_,C,M=i[0].type==="remoteAgent"&&i[0].agent&&i[7]&&i[7](i[0].agent);const T=[Ib,Eb],E=[];function R(G,nt){return G[15]==="remoteAgent"?0:1}r=R(i),s=E[r]=T[r](i);let P=!i[10]&&i[3]&&i[0].isPinned&&lu(i),J=M&&uu(ss(i));$=new zt({props:{nested:!1,hasPointerEvents:!1,content:Ii(i[0].title,200),triggerOn:[te.Hover],delayDurationMs:1e3,$$slots:{default:[jb]},$$scope:{ctx:i}}});let K=i[0].type==="remoteAgent"&&i[0].status&&mu(i),et=i[18].length>0&&fu(i),U=i[0].id!==or&&hu(i);return{c(){t=L("div"),n=L("div"),e=L("div"),o=L("div"),s.c(),c=H(),P&&P.c(),a=H(),J&&J.c(),l=H(),u=L("div"),v($.$$.fragment),f=H(),K&&K.c(),p=H(),et&&et.c(),_=H(),U&&U.c(),A(o,"class","agent-icon svelte-1k2puwx"),A(u,"class","agent-title svelte-1k2puwx"),A(e,"class","agent-details--left svelte-1k2puwx"),A(n,"class","agent-details svelte-1k2puwx"),A(t,"class","agent-content svelte-1k2puwx")},m(G,nt){b(G,t,nt),O(t,n),O(n,e),O(e,o),E[r].m(o,null),O(e,c),P&&P.m(e,null),O(e,a),J&&J.m(e,null),O(e,l),O(e,u),w($,u,null),O(n,f),K&&K.m(n,null),O(t,p),et&&et.m(t,null),O(t,_),U&&U.m(t,null),C=!0},p(G,nt){let X=r;r=R(G),r===X?E[r].p(G,nt):(q(),m(E[X],1,1,()=>{E[X]=null}),j(),s=E[r],s?s.p(G,nt):(s=E[r]=T[r](G),s.c()),d(s,1),s.m(o,null)),!G[10]&&G[3]&&G[0].isPinned?P?(P.p(G,nt),1033&nt[0]&&d(P,1)):(P=lu(G),P.c(),d(P,1),P.m(e,a)):P&&(q(),m(P,1,1,()=>{P=null}),j()),129&nt[0]&&(M=G[0].type==="remoteAgent"&&G[0].agent&&G[7]&&G[7](G[0].agent)),M?J?(J.p(ss(G),nt),129&nt[0]&&d(J,1)):(J=uu(ss(G)),J.c(),d(J,1),J.m(e,l)):J&&(q(),m(J,1,1,()=>{J=null}),j());const Y={};1&nt[0]&&(Y.content=Ii(G[0].title,200)),160769&nt[0]|256&nt[1]&&(Y.$$scope={dirty:nt,ctx:G}),$.$set(Y),G[0].type==="remoteAgent"&&G[0].status?K?(K.p(G,nt),1&nt[0]&&d(K,1)):(K=mu(G),K.c(),d(K,1),K.m(n,null)):K&&(q(),m(K,1,1,()=>{K=null}),j()),G[18].length>0?et?(et.p(G,nt),262144&nt[0]&&d(et,1)):(et=fu(G),et.c(),d(et,1),et.m(t,_)):et&&(q(),m(et,1,1,()=>{et=null}),j()),G[0].id!==or?U?(U.p(G,nt),1&nt[0]&&d(U,1)):(U=hu(G),U.c(),d(U,1),U.m(t,null)):U&&(q(),m(U,1,1,()=>{U=null}),j())},i(G){C||(d(s),d(P),d(J),d($.$$.fragment,G),d(K),d(et),d(U),C=!0)},o(G){m(s),m(P),m(J),m($.$$.fragment,G),m(K),m(et),m(U),C=!1},d(G){G&&x(t),E[r].d(),P&&P.d(),J&&J.d(),y($),K&&K.d(),et&&et.d(),U&&U.d()}}}function Vb(i){let t,n,e,o,r,s,c=`${i[0].title}--${i[0].isPinned}`,a=vu(i);return{c(){t=L("div"),a.c(),A(t,"class",n="agent-row class:agent-row--"+i[0].type+" svelte-1k2puwx"),A(t,"role","button"),A(t,"tabindex","0"),A(t,"data-testid",Gb),At(t,"agent-row--active",i[1]),At(t,"agent-row--new",i[10]),At(t,"agent-row--setup-script",i[0].type==="remoteAgent"&&i[0].is_setup_script_agent)},m(l,u){b(l,t,u),a.m(t,null),o=!0,r||(s=[Dt(t,"click",function(){ze(i[5])&&i[5].apply(this,arguments)}),Dt(t,"keydown",i[32])],r=!0)},p(l,u){i=l,1&u[0]&&lt(c,c=`${i[0].title}--${i[0].isPinned}`)?(q(),m(a,1,1,N),j(),a=vu(i),a.c(),d(a,1),a.m(t,null)):a.p(i,u),(!o||1&u[0]&&n!==(n="agent-row class:agent-row--"+i[0].type+" svelte-1k2puwx"))&&A(t,"class",n),(!o||3&u[0])&&At(t,"agent-row--active",i[1]),(!o||1025&u[0])&&At(t,"agent-row--new",i[10]),(!o||1&u[0])&&At(t,"agent-row--setup-script",i[0].type==="remoteAgent"&&i[0].is_setup_script_agent)},i(l){o||(d(a),Ln(()=>{o&&(e||(e=Mn(t,au,{duration:150},!0)),e.run(1))}),o=!0)},o(l){m(a),e||(e=Mn(t,au,{duration:150},!1)),e.run(0),o=!1},d(l){l&&x(t),a.d(l),l&&e&&e.end(),r=!1,tn(s)}}}const Gb="thread-list-item";function xr(i,t){return t.split(".").reduce((n,e)=>n&&n[e]!==void 0?n[e]:void 0,i)}function Ii(i="",t){return i.length<=t?i:i.slice(0,t-3)+"..."}function Kb(i,t,n){let e,o,r,s,c,a,l,u,$,f=N;i.$$.on_destroy.push(()=>f());let p,{thread:_}=t,{isSelected:C=!1}=t,{containerWidth:M=0}=t,{isExpanded:T=!1}=t,{afterDelete:E}=t,{onSelect:R}=t,{onTogglePinned:P}=t,{isFromDifferentRepo:J=()=>!1}=t,{getRepoInfo:K=()=>({name:"Unknown",fullPath:"Unknown"})}=t,{enableShareService:et=!1}=t,U=kt("chatModel"),G=!1,nt=_.title;function X(Y){Y.trim()&&Y!==_.title&&["chat","localAgent"].includes(_.type)&&U&&(U.renameConversation(_.id,Y),n(0,_.title=Y,_)),n(12,G=!1)}return so(()=>{const Y=Z=>{G&&p&&!p.contains(Z.target)&&X(nt)};return document.addEventListener("click",Y),()=>{document.removeEventListener("click",Y)}}),i.$$set=Y=>{"thread"in Y&&n(0,_=Y.thread),"isSelected"in Y&&n(1,C=Y.isSelected),"containerWidth"in Y&&n(2,M=Y.containerWidth),"isExpanded"in Y&&n(3,T=Y.isExpanded),"afterDelete"in Y&&n(4,E=Y.afterDelete),"onSelect"in Y&&n(5,R=Y.onSelect),"onTogglePinned"in Y&&n(6,P=Y.onTogglePinned),"isFromDifferentRepo"in Y&&n(7,J=Y.isFromDifferentRepo),"getRepoInfo"in Y&&n(8,K=Y.getRepoInfo),"enableShareService"in Y&&n(9,et=Y.enableShareService)},i.$$.update=()=>{1&i.$$.dirty[0]&&n(18,e=(xr(_,"conversation.chatHistory")||[]).map(Y=>Y.request_message).filter(Boolean)),1&i.$$.dirty[0]&&n(10,o=_.isNew),1&i.$$.dirty[0]&&n(17,r=yn.isThreadEmpty(_)),1&i.$$.dirty[0]&&n(25,s=_.type==="localAgent"),1&i.$$.dirty[0]&&n(24,c=_.type==="remoteAgent"),117442560&i.$$.dirty[0]&&n(16,l=zi({isConversationAgentic:s,agentExecutionMode:a?$:void 0,isBackgroundAgent:c})),1025&i.$$.dirty[0]&&n(15,u=_.type||(o&&xr(_,"conversation.extraData.isRemoteAgentConversation")?"remoteAgent":"chat"))},n(11,a=U==null?void 0:U.agentExecutionMode),f(),f=ie(a,Y=>n(26,$=Y)),[_,C,M,T,E,R,P,J,K,et,o,a,G,nt,p,u,l,r,e,X,function(Y){Y.key==="Enter"?(Y.preventDefault(),X(nt)):Y.key==="Escape"&&(Y.preventDefault(),n(13,nt=_.title),n(12,G=!1))},function(){r||(n(12,G=!0),n(13,nt=_.title),setTimeout(()=>p==null?void 0:p.focus(),0))},{chat:"Chat",localAgent:"Local Agent",remoteAgent:"Remote Agent"},Y=>{var it;const Z=(((it=Y==null?void 0:Y.conversation)==null?void 0:it.chatHistory)||[]).find(rt=>rt.request_message);return Z&&Z.request_message||""},c,s,$,Y=>{Y.stopPropagation(),P(Y)},Y=>{Y.key!=="Enter"&&Y.key!==" "||(Y.stopPropagation(),P(Y))},function(Y){p=Y,n(14,p)},function(Y){nt=Y,n(13,nt)},()=>X(nt),Y=>{Y.key==="Enter"&&R()}]}class Um extends ut{constructor(t){super(),dt(this,t,Kb,Vb,lt,{thread:0,isSelected:1,containerWidth:2,isExpanded:3,afterDelete:4,onSelect:5,onTogglePinned:6,isFromDifferentRepo:7,getRepoInfo:8,enableShareService:9},null,[-1,-1])}}function wu(i,t,n){const e=i.slice();return e[7]=t[n],e}function Yb(i){var e;let t,n=i[3]!=="all"?`${((e=i[0].find(i[4]))==null?void 0:e.label)||""}`:"All";return{c(){t=V(n)},m(o,r){b(o,t,r)},p(o,r){var s;9&r&&n!==(n=o[3]!=="all"?`${((s=o[0].find(o[4]))==null?void 0:s.label)||""}`:"All")&&bt(t,n)},d(o){o&&x(t)}}}function Xb(i){let t,n,e,o,r,s;return n=new Wt({props:{size:1,$$slots:{default:[Yb]},$$scope:{ctx:i}}}),r=new Uo({}),{c(){t=L("div"),v(n.$$.fragment),e=H(),o=L("div"),v(r.$$.fragment),A(o,"class","dropdown-indicator svelte-errogv"),A(t,"class","c-thread-type-filter-dropdown__trigger svelte-errogv")},m(c,a){b(c,t,a),w(n,t,null),O(t,e),O(t,o),w(r,o,null),s=!0},p(c,a){const l={};1033&a&&(l.$$scope={dirty:a,ctx:c}),n.$set(l)},i(c){s||(d(n.$$.fragment,c),d(r.$$.fragment,c),s=!0)},o(c){m(n.$$.fragment,c),m(r.$$.fragment,c),s=!1},d(c){c&&x(t),y(n),y(r)}}}function Zb(i){let t,n=i[7].label+"";return{c(){t=V(n)},m(e,o){b(e,t,o)},p(e,o){1&o&&n!==(n=e[7].label+"")&&bt(t,n)},d(e){e&&x(t)}}}function Jb(i){let t,n,e,o,r,s,c,a,l=i[7].count+"";return e=new Wt({props:{size:2,$$slots:{default:[Zb]},$$scope:{ctx:i}}}),{c(){t=L("div"),n=L("span"),v(e.$$.fragment),o=H(),r=L("span"),s=V(l),c=H(),A(n,"class","filter-label svelte-errogv"),A(r,"class","filter-count svelte-errogv"),A(t,"class","filter-item svelte-errogv")},m(u,$){b(u,t,$),O(t,n),w(e,n,null),O(t,o),O(t,r),O(r,s),b(u,c,$),a=!0},p(u,$){const f={};1025&$&&(f.$$scope={dirty:$,ctx:u}),e.$set(f),(!a||1&$)&&l!==(l=u[7].count+"")&&bt(s,l)},i(u){a||(d(e.$$.fragment,u),a=!0)},o(u){m(e.$$.fragment,u),a=!1},d(u){u&&(x(t),x(c)),y(e)}}}function yu(i){let t,n;function e(){return i[5](i[7])}return t=new xt.Item({props:{highlight:i[3]===i[7].value,onSelect:e,$$slots:{default:[Jb]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(o,r){w(t,o,r),n=!0},p(o,r){i=o;const s={};9&r&&(s.highlight=i[3]===i[7].value),7&r&&(s.onSelect=e),1025&r&&(s.$$scope={dirty:r,ctx:i}),t.$set(s)},i(o){n||(d(t.$$.fragment,o),n=!0)},o(o){m(t.$$.fragment,o),n=!1},d(o){y(t,o)}}}function Qb(i){let t,n,e=se(i[0]),o=[];for(let s=0;s<e.length;s+=1)o[s]=yu(wu(i,e,s));const r=s=>m(o[s],1,1,()=>{o[s]=null});return{c(){t=L("div");for(let s=0;s<o.length;s+=1)o[s].c();A(t,"class","filters-list svelte-errogv")},m(s,c){b(s,t,c);for(let a=0;a<o.length;a+=1)o[a]&&o[a].m(t,null);n=!0},p(s,c){if(15&c){let a;for(e=se(s[0]),a=0;a<e.length;a+=1){const l=wu(s,e,a);o[a]?(o[a].p(l,c),d(o[a],1)):(o[a]=yu(l),o[a].c(),d(o[a],1),o[a].m(t,null))}for(q(),a=e.length;a<o.length;a+=1)r(a);j()}},i(s){if(!n){for(let c=0;c<e.length;c+=1)d(o[c]);n=!0}},o(s){o=o.filter(Boolean);for(let c=0;c<o.length;c+=1)m(o[c]);n=!1},d(s){s&&x(t),bn(o,s)}}}function t5(i){let t,n,e,o;return t=new xt.Trigger({props:{$$slots:{default:[Xb]},$$scope:{ctx:i}}}),e=new xt.Content({props:{side:"bottom",align:"start",size:1,$$slots:{default:[Qb]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment),n=H(),v(e.$$.fragment)},m(r,s){w(t,r,s),b(r,n,s),w(e,r,s),o=!0},p(r,s){const c={};1033&s&&(c.$$scope={dirty:s,ctx:r}),t.$set(c);const a={};1039&s&&(a.$$scope={dirty:s,ctx:r}),e.$set(a)},i(r){o||(d(t.$$.fragment,r),d(e.$$.fragment,r),o=!0)},o(r){m(t.$$.fragment,r),m(e.$$.fragment,r),o=!1},d(r){r&&x(n),y(t,r),y(e,r)}}}function e5(i){let t,n,e,o;function r(c){i[6](c)}let s={$$slots:{default:[t5]},$$scope:{ctx:i}};return i[2]!==void 0&&(s.requestClose=i[2]),n=new xt.Root({props:s}),Qt.push(()=>Ne(n,"requestClose",r)),{c(){t=L("div"),v(n.$$.fragment),A(t,"class","c-thread-type-filter-dropdown")},m(c,a){b(c,t,a),w(n,t,null),o=!0},p(c,[a]){const l={};1039&a&&(l.$$scope={dirty:a,ctx:c}),!e&&4&a&&(e=!0,l.requestClose=c[2],Be(()=>e=!1)),n.$set(l)},i(c){o||(d(n.$$.fragment,c),o=!0)},o(c){m(n.$$.fragment,c),o=!1},d(c){c&&x(t),y(n)}}}function n5(i,t,n){let e,o=N,r=()=>(o(),o=ie(a,l=>n(3,e=l)),a);i.$$.on_destroy.push(()=>o());let s,{threadTypeFilters:c=[]}=t,{activeThreadTypeFilter:a=Re("all")}=t;return r(),i.$$set=l=>{"threadTypeFilters"in l&&n(0,c=l.threadTypeFilters),"activeThreadTypeFilter"in l&&r(n(1,a=l.activeThreadTypeFilter))},[c,a,s,e,l=>l.value===e,l=>{a.set(l.value),s()},function(l){s=l,n(2,s)}]}class o5 extends ut{constructor(t){super(),dt(this,t,n5,e5,lt,{threadTypeFilters:0,activeThreadTypeFilter:1})}}function xu(i){return{isDragging:!1,startY:0,startHeight:0,currentHeight:i,hasUserResized:!1,hasDraggedThisClick:!1}}function Li(i,t){const n=Math.floor(i-300);return Math.max(Math.min(t,n),0)}function bu(i,t,n){return n?(i.preventDefault(),{...t,isDragging:!0,hasDraggedThisClick:!1,startY:i.clientY,startHeight:t.currentHeight}):t}function _u(i,t,n,e){if(!e||!t.isDragging)return t;const o=i.clientY-t.startY,r=t.startHeight+o,s=Li(n.windowHeight,n.maxContentHeight),c=Math.max(n.minHeight,Math.min(s,r));return{...t,hasDraggedThisClick:!0,currentHeight:c}}function Cu(i){const t=i.isDragging;return{...i,isDragging:!1,hasUserResized:i.hasUserResized||t}}function Au(i){return{...i,hasDraggedThisClick:!1}}function Mu(i,t){const n=Li(t.windowHeight,t.maxContentHeight);if(i.currentHeight>n){const e=Math.max(t.minHeight,Math.min(n,i.currentHeight));return{...i,currentHeight:e}}return i}function ku(i,t,n){const e=i.slice();return e[126]=t[n],e[128]=n,e}function Su(i,t,n){const e=i.slice();return e[129]=t[n],e[131]=n,e}function Tu(i,t,n){const e=i.slice();return e[132]=t[n],e}function Eu(i,t,n){const e=i.slice();return e[129]=t[n],e[131]=n,e}function r5(i){let t;return{c(){t=V("Threads")},m(n,e){b(n,t,e)},d(n){n&&x(t)}}}function Iu(i){let t,n,e,o;return n=new o5({props:{threadTypeFilters:i[29],activeThreadTypeFilter:i[44]}}),{c(){t=L("div"),v(n.$$.fragment),A(t,"class","svelte-14aweiq")},m(r,s){b(r,t,s),w(n,t,null),o=!0},p(r,s){const c={};536870912&s[0]&&(c.threadTypeFilters=r[29]),n.$set(c)},i(r){o||(d(n.$$.fragment,r),r&&Ln(()=>{o&&(e||(e=Mn(t,wo,{axis:"x",duration:150},!0)),e.run(1))}),o=!0)},o(r){m(n.$$.fragment,r),r&&(e||(e=Mn(t,wo,{axis:"x",duration:150},!1)),e.run(0)),o=!1},d(r){r&&x(t),y(n),r&&e&&e.end()}}}function Lu(i){let t,n,e,o,r,s,c=i[11]&&Ru(i);return o=new zt({props:{content:"Search threads",nested:!1,hasPointerEvents:!1,$$slots:{default:[l5]},$$scope:{ctx:i}}}),{c(){t=L("div"),c&&c.c(),n=H(),e=L("div"),v(o.$$.fragment),A(e,"class","search-icon svelte-14aweiq"),At(e,"is-active",i[11]),A(t,"class","search-container action-button svelte-14aweiq"),At(t,"is-active",i[11])},m(a,l){b(a,t,l),c&&c.m(t,null),O(t,n),O(t,e),w(o,e,null),s=!0},p(a,l){a[11]?c?(c.p(a,l),2048&l[0]&&d(c,1)):(c=Ru(a),c.c(),d(c,1),c.m(t,n)):c&&(q(),m(c,1,1,()=>{c=null}),j());const u={};1&l[0]|4096&l[4]&&(u.$$scope={dirty:l,ctx:a}),o.$set(u),(!s||2048&l[0])&&At(e,"is-active",a[11]),(!s||2048&l[0])&&At(t,"is-active",a[11])},i(a){s||(d(c),d(o.$$.fragment,a),a&&Ln(()=>{s&&(r||(r=Mn(t,$r,{y:-2,duration:150},!0)),r.run(1))}),s=!0)},o(a){m(c),m(o.$$.fragment,a),a&&(r||(r=Mn(t,$r,{y:-2,duration:150},!1)),r.run(0)),s=!1},d(a){a&&x(t),c&&c.d(),y(o),a&&r&&r.end()}}}function Ru(i){var f,p;let t,n,e,o,r,s,c;function a(_){i[96](_)}function l(_){i[97](_)}let u={placeholder:`Search ${i[9]==="all"?"threads":(p=(f=i[29].find(i[95]))==null?void 0:f.label)==null?void 0:p.toLowerCase()}`,size:1,variant:"surface",class:"search-input",$$slots:{iconLeft:[i5]},$$scope:{ctx:i}};i[0]!==void 0&&(u.value=i[0]),i[10]!==void 0&&(u.textInput=i[10]),n=new ir({props:u}),Qt.push(()=>Ne(n,"value",a)),Qt.push(()=>Ne(n,"textInput",l)),n.$on("keydown",i[98]),n.$on("focus",i[99]),n.$on("blur",i[100]);let $=i[0]&&Du(i);return{c(){t=L("div"),v(n.$$.fragment),r=H(),$&&$.c(),A(t,"class","search-field-container svelte-14aweiq")},m(_,C){b(_,t,C),w(n,t,null),O(t,r),$&&$.m(t,null),c=!0},p(_,C){var T,E;const M={};536871424&C[0]&&(M.placeholder=`Search ${_[9]==="all"?"threads":(E=(T=_[29].find(_[95]))==null?void 0:T.label)==null?void 0:E.toLowerCase()}`),4096&C[4]&&(M.$$scope={dirty:C,ctx:_}),!e&&1&C[0]&&(e=!0,M.value=_[0],Be(()=>e=!1)),!o&&1024&C[0]&&(o=!0,M.textInput=_[10],Be(()=>o=!1)),n.$set(M),_[0]?$?($.p(_,C),1&C[0]&&d($,1)):($=Du(_),$.c(),d($,1),$.m(t,null)):$&&(q(),m($,1,1,()=>{$=null}),j())},i(_){c||(d(n.$$.fragment,_),d($),_&&Ln(()=>{c&&(s||(s=Mn(t,wo,{axis:"x",duration:150},!0)),s.run(1))}),c=!0)},o(_){m(n.$$.fragment,_),m($),_&&(s||(s=Mn(t,wo,{axis:"x",duration:150},!1)),s.run(0)),c=!1},d(_){_&&x(t),y(n),$&&$.d(),_&&s&&s.end()}}}function i5(i){let t,n,e;return n=new Q$({}),{c(){t=L("div"),v(n.$$.fragment),A(t,"class","search-field-container__icon svelte-14aweiq"),A(t,"slot","iconLeft")},m(o,r){b(o,t,r),w(n,t,null),e=!0},p:N,i(o){e||(d(n.$$.fragment,o),e=!0)},o(o){m(n.$$.fragment,o),e=!1},d(o){o&&x(t),y(n)}}}function Du(i){let t,n,e;return n=new zt({props:{content:"Clear search",nested:!1,$$slots:{default:[a5]},$$scope:{ctx:i}}}),{c(){t=L("div"),v(n.$$.fragment),A(t,"class","clear-search-button svelte-14aweiq")},m(o,r){b(o,t,r),w(n,t,null),e=!0},p(o,r){const s={};4096&r[4]&&(s.$$scope={dirty:r,ctx:o}),n.$set(s)},i(o){e||(d(n.$$.fragment,o),e=!0)},o(o){m(n.$$.fragment,o),e=!1},d(o){o&&x(t),y(n)}}}function s5(i){let t,n;return t=new Cr({}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function a5(i){let t,n;return t=new fe({props:{variant:"ghost",color:"neutral",size:1,$$slots:{default:[s5]},$$scope:{ctx:i}}}),t.$on("click",i[40]),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};4096&o[4]&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function c5(i){let t,n;return t=new Q$({}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function l5(i){let t,n;return t=new fe({props:{variant:"ghost",color:i[0].trim()!==""?"accent":"neutral",size:1,$$slots:{default:[c5]},$$scope:{ctx:i}}}),t.$on("click",i[39]),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};1&o[0]&&(r.color=e[0].trim()!==""?"accent":"neutral"),4096&o[4]&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function Pu(i){let t,n;return t=new zt({props:{content:"Data may be outdated. Last refreshed "+(i[33]>0?Fa(new Date(i[33]).toISOString()):"never"),nested:!1,$$slots:{default:[u5]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};4&o[1]&&(r.content="Data may be outdated. Last refreshed "+(e[33]>0?Fa(new Date(e[33]).toISOString()):"never")),4096&o[4]&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function u5(i){let t;return{c(){t=L("div"),t.innerHTML='<div class="stale-dot svelte-14aweiq"></div>',A(t,"class","stale-indicator svelte-14aweiq")},m(n,e){b(n,t,e)},p:N,d(n){n&&x(t)}}}function Nu(i){let t,n,e,o,r,s,c,a=[],l=new Map,u=se(i[24]);const $=f=>`${f[132].groupTitle}`;for(let f=0;f<u.length;f+=1){let p=Tu(i,u,f),_=$(p);l.set(_,a[f]=zu(_,p))}return{c(){t=L("div"),n=L("div");for(let f=0;f<a.length;f+=1)a[f].c();A(n,"class","agents-list-container__inner svelte-14aweiq"),Ln(()=>i[106].call(n)),A(t,"class","agents-list svelte-14aweiq"),qn(t,"height",i[23]),qn(t,"max-height",i[22]),Ln(()=>i[108].call(t))},m(f,p){b(f,t,p),O(t,n);for(let _=0;_<a.length;_+=1)a[_]&&a[_].m(n,null);e=cs(n,i[106].bind(n)),i[107](t),o=cs(t,i[108].bind(t)),r=!0,s||(c=Cs(i[41].call(null,t)),s=!0)},p(f,p){16793730&p[0]|1610747912&p[1]|2&p[2]&&(u=se(f[24]),q(),a=jr(a,p,$,1,f,u,l,n,Fi,zu,null,Tu),j()),(!r||8388608&p[0])&&qn(t,"height",f[23]),(!r||4194304&p[0])&&qn(t,"max-height",f[22])},i(f){if(!r){for(let p=0;p<u.length;p+=1)d(a[p]);r=!0}},o(f){for(let p=0;p<a.length;p+=1)m(a[p]);r=!1},d(f){f&&x(t);for(let p=0;p<a.length;p+=1)a[p].d();e(),i[107](null),o(),s=!1,c()}}}function Fu(i){let t,n,e,o,r,s,c,a;return e=new Wt({props:{size:1,weight:"medium",color:"secondary",$$slots:{default:[d5]},$$scope:{ctx:i}}}),s=new xt.Root({props:{$$slots:{default:[h5]},$$scope:{ctx:i}}}),{c(){t=L("div"),n=L("div"),v(e.$$.fragment),o=H(),r=L("div"),v(s.$$.fragment),A(r,"class","thread-group-options svelte-14aweiq"),A(n,"class","thread-group-header-content svelte-14aweiq"),A(t,"class","thread-group-header svelte-14aweiq")},m(l,u){b(l,t,u),O(t,n),w(e,n,null),O(n,o),O(n,r),w(s,r,null),a=!0},p(l,u){const $={};16777216&u[0]|4096&u[4]&&($.$$scope={dirty:u,ctx:l}),e.$set($);const f={};16777216&u[0]|4096&u[4]&&(f.$$scope={dirty:u,ctx:l}),s.$set(f)},i(l){a||(d(e.$$.fragment,l),d(s.$$.fragment,l),Ln(()=>{a&&(c||(c=Mn(t,wo,{duration:150},!0)),c.run(1))}),a=!0)},o(l){m(e.$$.fragment,l),m(s.$$.fragment,l),c||(c=Mn(t,wo,{duration:150},!1)),c.run(0),a=!1},d(l){l&&x(t),y(e),y(s),l&&c&&c.end()}}}function d5(i){let t,n=i[132].groupTitle+"";return{c(){t=V(n)},m(e,o){b(e,t,o)},p(e,o){16777216&o[0]&&n!==(n=e[132].groupTitle+"")&&bt(t,n)},d(e){e&&x(t)}}}function $5(i){let t,n;return t=new sr({}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function m5(i){let t,n;return t=new fe({props:{variant:"ghost-block",color:"neutral",size:1,title:"Group options",$$slots:{default:[$5]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};4096&o[4]&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function f5(i){let t,n,e,o,r=i[132].threads.length+"",s=i[132].threads.length>1?"s":"";return{c(){t=V("Delete "),n=V(r),e=V(" thread"),o=V(s)},m(c,a){b(c,t,a),b(c,n,a),b(c,e,a),b(c,o,a)},p(c,a){16777216&a[0]&&r!==(r=c[132].threads.length+"")&&bt(n,r),16777216&a[0]&&s!==(s=c[132].threads.length>1?"s":"")&&bt(o,s)},d(c){c&&(x(t),x(n),x(e),x(o))}}}function p5(i){let t,n;return t=new Wr({props:{slot:"iconLeft"}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p:N,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function g5(i){let t,n;function e(){return i[102](i[132])}return t=new xt.Item({props:{color:"error",onSelect:e,$$slots:{iconLeft:[p5],default:[f5]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(o,r){w(t,o,r),n=!0},p(o,r){i=o;const s={};16777216&r[0]&&(s.onSelect=e),16777216&r[0]|4096&r[4]&&(s.$$scope={dirty:r,ctx:i}),t.$set(s)},i(o){n||(d(t.$$.fragment,o),n=!0)},o(o){m(t.$$.fragment,o),n=!1},d(o){y(t,o)}}}function h5(i){let t,n,e,o;return t=new xt.Trigger({props:{$$slots:{default:[m5]},$$scope:{ctx:i}}}),e=new xt.Content({props:{size:1,side:"bottom",align:"end",$$slots:{default:[g5]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment),n=H(),v(e.$$.fragment)},m(r,s){w(t,r,s),b(r,n,s),w(e,r,s),o=!0},p(r,s){const c={};4096&s[4]&&(c.$$scope={dirty:s,ctx:r}),t.$set(c);const a={};16777216&s[0]|4096&s[4]&&(a.$$scope={dirty:s,ctx:r}),e.$set(a)},i(r){o||(d(t.$$.fragment,r),d(e.$$.fragment,r),o=!0)},o(r){m(t.$$.fragment,r),m(e.$$.fragment,r),o=!1},d(r){r&&x(n),y(t,r),y(e,r)}}}function Ou(i,t){let n,e,o;function r(){return t[103](t[129],t[132],t[131])}function s(){return t[104](t[129])}function c(...a){return t[105](t[129],...a)}return e=new Um({props:{thread:t[129],containerWidth:t[14],isSelected:t[7]===t[129].id,afterDelete:r,onSelect:s,onTogglePinned:c,isFromDifferentRepo:t[60],getRepoInfo:t[61],enableShareService:t[34],isExpanded:t[1]}}),{key:i,first:null,c(){n=ft(),v(e.$$.fragment),this.first=n},m(a,l){b(a,n,l),w(e,a,l),o=!0},p(a,l){t=a;const u={};16777216&l[0]&&(u.thread=t[129]),16384&l[0]&&(u.containerWidth=t[14]),16777344&l[0]&&(u.isSelected=t[7]===t[129].id),16777344&l[0]&&(u.afterDelete=r),16777216&l[0]&&(u.onSelect=s),16777216&l[0]&&(u.onTogglePinned=c),8&l[1]&&(u.enableShareService=t[34]),2&l[0]&&(u.isExpanded=t[1]),e.$set(u)},i(a){o||(d(e.$$.fragment,a),o=!0)},o(a){m(e.$$.fragment,a),o=!1},d(a){a&&x(n),y(e,a)}}}function zu(i,t){let n,e,o,r,s=[],c=new Map,a=t[132].groupTitle!==Ye.New&&Fu(t),l=se(t[132].threads);const u=$=>`${$[129].id}-${$[129].isPinned}-${$[131]}`;for(let $=0;$<l.length;$+=1){let f=Eu(t,l,$),p=u(f);c.set(p,s[$]=Ou(p,f))}return{key:i,first:null,c(){n=ft(),a&&a.c(),e=H();for(let $=0;$<s.length;$+=1)s[$].c();o=ft(),this.first=n},m($,f){b($,n,f),a&&a.m($,f),b($,e,f);for(let p=0;p<s.length;p+=1)s[p]&&s[p].m($,f);b($,o,f),r=!0},p($,f){(t=$)[132].groupTitle!==Ye.New?a?(a.p(t,f),16777216&f[0]&&d(a,1)):(a=Fu(t),a.c(),d(a,1),a.m(e.parentNode,e)):a&&(q(),m(a,1,1,()=>{a=null}),j()),16793730&f[0]|1610747912&f[1]&&(l=se(t[132].threads),q(),s=jr(s,f,u,1,t,l,c,o.parentNode,Fi,Ou,o,Eu),j())},i($){if(!r){d(a);for(let f=0;f<l.length;f+=1)d(s[f]);r=!0}},o($){m(a);for(let f=0;f<s.length;f+=1)m(s[f]);r=!1},d($){$&&(x(n),x(e),x(o)),a&&a.d($);for(let f=0;f<s.length;f+=1)s[f].d($)}}}function Bu(i){let t,n,e,o,r,s,c,a,l,u,$,f,p,_,C,M,T,E,R,P,J,K,et,U,G=[],nt=new Map;r=new Uo({}),a=new Hi({props:{class:"remote-agent-icon"}}),u=new Wt({props:{size:1,$$slots:{default:[v5]},$$scope:{ctx:i}}});let X=(i[18]>0||i[17]>0)&&Hu(i);_=new zt({props:{content:"Expand remote agents dashboard",nested:!1,triggerOn:[te.Hover],hasPointerEvents:!1,$$slots:{default:[y5]},$$scope:{ctx:i}}});let Y=se(i[5]);const Z=it=>it[129].id;for(let it=0;it<Y.length;it+=1){let rt=Su(i,Y,it),ht=Z(rt);nt.set(ht,G[it]=Wu(ht,rt))}return{c(){t=L("div"),n=L("div"),e=L("button"),o=L("div"),v(r.$$.fragment),c=H(),v(a.$$.fragment),l=H(),v(u.$$.fragment),$=H(),X&&X.c(),f=H(),p=L("div"),v(_.$$.fragment),E=H(),R=L("div");for(let it=0;it<G.length;it+=1)G[it].c();A(o,"class",s="expand-toggle-button "+(i[8]?"expand-toggle-button--active":"")+" svelte-14aweiq"),A(p,"class","home-panel-button svelte-14aweiq"),A(e,"class",M="expand-toggle-button-container "+(i[8]?"expand-toggle-button-container--active":"")+" svelte-14aweiq"),A(e,"aria-label",T=i[8]?"Hide recent remote agents":"Show recent remote agents"),A(e,"aria-expanded",i[8]),A(e,"type","button"),A(n,"class","active-remote-agents-header svelte-14aweiq"),A(R,"class","active-remote-agents-list svelte-14aweiq"),qn(R,"height",i[21]),qn(R,"max-height",i[20]),A(t,"class","active-remote-agents-section svelte-14aweiq")},m(it,rt){b(it,t,rt),O(t,n),O(n,e),O(e,o),w(r,o,null),O(e,c),w(a,e,null),O(e,l),w(u,e,null),O(e,$),X&&X.m(e,null),O(e,f),O(e,p),w(_,p,null),O(t,E),O(t,R);for(let ht=0;ht<G.length;ht+=1)G[ht]&&G[ht].m(R,null);i[113](R),K=!0,et||(U=[Dt(e,"click",i[47]),Cs(i[42].call(null,R))],et=!0)},p(it,rt){(!K||256&rt[0]&&s!==(s="expand-toggle-button "+(it[8]?"expand-toggle-button--active":"")+" svelte-14aweiq"))&&A(o,"class",s);const ht={};524288&rt[0]|4096&rt[4]&&(ht.$$scope={dirty:rt,ctx:it}),u.$set(ht),it[18]>0||it[17]>0?X?X.p(it,rt):(X=Hu(it),X.c(),X.m(e,f)):X&&(X.d(1),X=null);const ct={};2&rt[1]|4096&rt[4]&&(ct.$$scope={dirty:rt,ctx:it}),_.$set(ct),(!K||256&rt[0]&&M!==(M="expand-toggle-button-container "+(it[8]?"expand-toggle-button-container--active":"")+" svelte-14aweiq"))&&A(e,"class",M),(!K||256&rt[0]&&T!==(T=it[8]?"Hide recent remote agents":"Show recent remote agents"))&&A(e,"aria-label",T),(!K||256&rt[0])&&A(e,"aria-expanded",it[8]),16800&rt[0]|1610747912&rt[1]&&(Y=se(it[5]),q(),G=jr(G,rt,Z,1,it,Y,nt,R,Fi,Wu,null,Su),j()),(!K||2097152&rt[0])&&qn(R,"height",it[21]),(!K||1048576&rt[0])&&qn(R,"max-height",it[20])},i(it){if(!K){d(r.$$.fragment,it),d(a.$$.fragment,it),d(u.$$.fragment,it),d(_.$$.fragment,it),it&&Ln(()=>{K&&(C||(C=Mn(p,$r,{y:-2,duration:150},!0)),C.run(1))});for(let rt=0;rt<Y.length;rt+=1)d(G[rt]);it&&Ln(()=>{K&&(P||(P=Mn(R,wo,{duration:150},!0)),P.run(1))}),it&&Ln(()=>{K&&(J||(J=Mn(t,$r,{y:5,duration:150},!0)),J.run(1))}),K=!0}},o(it){m(r.$$.fragment,it),m(a.$$.fragment,it),m(u.$$.fragment,it),m(_.$$.fragment,it),it&&(C||(C=Mn(p,$r,{y:-2,duration:150},!1)),C.run(0));for(let rt=0;rt<G.length;rt+=1)m(G[rt]);it&&(P||(P=Mn(R,wo,{duration:150},!1)),P.run(0)),it&&(J||(J=Mn(t,$r,{y:5,duration:150},!1)),J.run(0)),K=!1},d(it){it&&x(t),y(r),y(a),y(u),X&&X.d(),y(_),it&&C&&C.end();for(let rt=0;rt<G.length;rt+=1)G[rt].d();i[113](null),it&&P&&P.end(),it&&J&&J.end(),et=!1,tn(U)}}}function v5(i){let t,n,e,o=i[19]===1?"":"s";return{c(){t=V(i[19]),n=V(" recent remote agent"),e=V(o)},m(r,s){b(r,t,s),b(r,n,s),b(r,e,s)},p(r,s){524288&s[0]&&bt(t,r[19]),524288&s[0]&&o!==(o=r[19]===1?"":"s")&&bt(e,o)},d(r){r&&(x(t),x(n),x(e))}}}function Hu(i){let t,n,e=i[18]>0&&Uu(i),o=i[17]>0&&qu(i);return{c(){t=L("div"),e&&e.c(),n=H(),o&&o.c(),A(t,"class","remote-agent-indicators svelte-14aweiq")},m(r,s){b(r,t,s),e&&e.m(t,null),O(t,n),o&&o.m(t,null)},p(r,s){r[18]>0?e?e.p(r,s):(e=Uu(r),e.c(),e.m(t,n)):e&&(e.d(1),e=null),r[17]>0?o?o.p(r,s):(o=qu(r),o.c(),o.m(t,null)):o&&(o.d(1),o=null)},d(r){r&&x(t),e&&e.d(),o&&o.d()}}}function Uu(i){let t,n,e,o,r,s;return{c(){t=L("div"),n=L("div"),e=H(),o=L("span"),r=V(i[18]),A(n,"class","indicator-dot running-dot svelte-14aweiq"),A(o,"class","indicator-count svelte-14aweiq"),A(t,"class","indicator running-indicator svelte-14aweiq"),A(t,"title",s=i[18]+" running agent"+(i[18]===1?"":"s"))},m(c,a){b(c,t,a),O(t,n),O(t,e),O(t,o),O(o,r)},p(c,a){262144&a[0]&&bt(r,c[18]),262144&a[0]&&s!==(s=c[18]+" running agent"+(c[18]===1?"":"s"))&&A(t,"title",s)},d(c){c&&x(t)}}}function qu(i){let t,n,e,o,r,s;return{c(){t=L("div"),n=L("div"),e=H(),o=L("span"),r=V(i[17]),A(n,"class","indicator-dot changes-dot svelte-14aweiq"),A(o,"class","indicator-count svelte-14aweiq"),A(t,"class","indicator changes-indicator svelte-14aweiq"),A(t,"title",s=i[17]+" agent"+(i[17]===1?"":"s")+" with changes")},m(c,a){b(c,t,a),O(t,n),O(t,e),O(t,o),O(o,r)},p(c,a){131072&a[0]&&bt(r,c[17]),131072&a[0]&&s!==(s=c[17]+" agent"+(c[17]===1?"":"s")+" with changes")&&A(t,"title",s)},d(c){c&&x(t)}}}function w5(i){let t,n;return t=new Ny({}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function y5(i){let t,n;return t=new fe({props:{variant:"ghost",color:i[32]?"accent":"neutral",size:1,$$slots:{default:[w5]},$$scope:{ctx:i}}}),t.$on("click",i[109]),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};2&o[1]&&(r.color=e[32]?"accent":"neutral"),4096&o[4]&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function ju(i){let t,n;function e(){return i[110](i[129],i[131])}function o(){return i[111](i[129])}function r(...s){return i[112](i[129],...s)}return t=new Um({props:{thread:i[129],containerWidth:i[14],isSelected:i[7]===i[129].id,afterDelete:e,onSelect:o,onTogglePinned:r,isFromDifferentRepo:i[60],getRepoInfo:i[61],enableShareService:i[34],isExpanded:!1}}),{c(){v(t.$$.fragment)},m(s,c){w(t,s,c),n=!0},p(s,c){i=s;const a={};32&c[0]&&(a.thread=i[129]),16384&c[0]&&(a.containerWidth=i[14]),160&c[0]&&(a.isSelected=i[7]===i[129].id),160&c[0]&&(a.afterDelete=e),32&c[0]&&(a.onSelect=o),32&c[0]&&(a.onTogglePinned=r),8&c[1]&&(a.enableShareService=i[34]),t.$set(a)},i(s){n||(d(t.$$.fragment,s),n=!0)},o(s){m(t.$$.fragment,s),n=!1},d(s){y(t,s)}}}function Wu(i,t){let n,e,o,r=t[8]&&ju(t);return{key:i,first:null,c(){n=ft(),r&&r.c(),e=ft(),this.first=n},m(s,c){b(s,n,c),r&&r.m(s,c),b(s,e,c),o=!0},p(s,c){(t=s)[8]?r?(r.p(t,c),256&c[0]&&d(r,1)):(r=ju(t),r.c(),d(r,1),r.m(e.parentNode,e)):r&&(q(),m(r,1,1,()=>{r=null}),j())},i(s){o||(d(r),o=!0)},o(s){m(r),o=!1},d(s){s&&(x(n),x(e)),r&&r.d(s)}}}function x5(i){let t,n,e,o,r;const s=[A5,C5],c=[];function a(l,u){return 1&u[0]&&(n=null),n==null&&(n=l[0].trim()!==""),n?0:1}return e=a(i,[-1,-1,-1,-1,-1]),o=c[e]=s[e](i),{c(){t=L("div"),o.c(),A(t,"class","empty-message svelte-14aweiq")},m(l,u){b(l,t,u),c[e].m(t,null),r=!0},p(l,u){let $=e;e=a(l,u),e===$?c[e].p(l,u):(q(),m(c[$],1,1,()=>{c[$]=null}),j(),o=c[e],o?o.p(l,u):(o=c[e]=s[e](l),o.c()),d(o,1),o.m(t,null))},i(l){r||(d(o),r=!0)},o(l){m(o),r=!1},d(l){l&&x(t),c[e].d()}}}function b5(i){let t,n,e,o,r,s,c,a,l,u;return n=new J$({}),o=new Wt({props:{size:1,$$slots:{default:[S5]},$$scope:{ctx:i}}}),c=new zt({props:{content:"Retry",triggerOn:[te.Hover],$$slots:{default:[E5]},$$scope:{ctx:i}}}),l=new zt({props:{content:"Dismiss",triggerOn:[te.Hover],$$slots:{default:[L5]},$$scope:{ctx:i}}}),{c(){t=L("div"),v(n.$$.fragment),e=H(),v(o.$$.fragment),r=H(),s=L("div"),v(c.$$.fragment),a=H(),v(l.$$.fragment),A(s,"class","error-actions svelte-14aweiq"),A(t,"class","error-message svelte-14aweiq")},m($,f){b($,t,f),w(n,t,null),O(t,e),w(o,t,null),O(t,r),O(t,s),w(c,s,null),O(s,a),w(l,s,null),u=!0},p($,f){const p={};64&f[0]|4096&f[4]&&(p.$$scope={dirty:f,ctx:$}),o.$set(p);const _={};4096&f[4]&&(_.$$scope={dirty:f,ctx:$}),c.$set(_);const C={};64&f[0]|4096&f[4]&&(C.$$scope={dirty:f,ctx:$}),l.$set(C)},i($){u||(d(n.$$.fragment,$),d(o.$$.fragment,$),d(c.$$.fragment,$),d(l.$$.fragment,$),u=!0)},o($){m(n.$$.fragment,$),m(o.$$.fragment,$),m(c.$$.fragment,$),m(l.$$.fragment,$),u=!1},d($){$&&x(t),y(n),y(o),y(c),y(l)}}}function _5(i){let t,n=[],e=new Map,o=se(i[28]);const r=s=>s[128];for(let s=0;s<o.length;s+=1){let c=ku(i,o,s),a=r(c);e.set(a,n[s]=Vu(a))}return{c(){t=L("div");for(let s=0;s<n.length;s+=1)n[s].c();A(t,"class","loading-state svelte-14aweiq")},m(s,c){b(s,t,c);for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(t,null)},p(s,c){268435456&c[0]&&(o=se(s[28]),n=jr(n,c,r,1,s,o,e,t,S1,Vu,null,ku))},i:N,o:N,d(s){s&&x(t);for(let c=0;c<n.length;c+=1)n[c].d()}}}function C5(i){let t,n;return t=new Wt({props:{size:1,color:"secondary",$$slots:{default:[M5]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};4096&o[4]&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function A5(i){let t,n;return t=new Wt({props:{size:1,color:"secondary",$$slots:{default:[k5]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};1&o[0]|4096&o[4]&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function M5(i){let t;return{c(){t=V("Create a new thread to get started.")},m(n,e){b(n,t,e)},d(n){n&&x(t)}}}function k5(i){let t,n,e;return{c(){t=V('No threads with "'),n=V(i[0]),e=V('" in the title.')},m(o,r){b(o,t,r),b(o,n,r),b(o,e,r)},p(o,r){1&r[0]&&bt(n,o[0])},d(o){o&&(x(t),x(n),x(e))}}}function S5(i){let t,n;return{c(){t=V("Failed to reload Remote Agent threads. "),n=V(i[6])},m(e,o){b(e,t,o),b(e,n,o)},p(e,o){64&o[0]&&bt(n,e[6])},d(e){e&&(x(t),x(n))}}}function T5(i){let t,n,e;return n=new ff({}),{c(){t=L("span"),v(n.$$.fragment),A(t,"slot","iconLeft")},m(o,r){b(o,t,r),w(n,t,null),e=!0},p:N,i(o){e||(d(n.$$.fragment,o),e=!0)},o(o){m(n.$$.fragment,o),e=!1},d(o){o&&x(t),y(n)}}}function E5(i){let t,n;return t=new ve({props:{color:"info",size:1,variant:"ghost",$$slots:{iconLeft:[T5]},$$scope:{ctx:i}}}),t.$on("click",i[62]),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};4096&o[4]&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function I5(i){let t,n;return t=new Cr({}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function L5(i){let t,n;return t=new fe({props:{variant:"ghost",color:"neutral",size:1,$$slots:{default:[I5]},$$scope:{ctx:i}}}),t.$on("click",i[114]),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};4096&o[4]&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function Vu(i,t){let n;return{key:i,first:null,c(){n=L("div"),n.innerHTML='<div class="agent-content svelte-14aweiq"><div class="agent-details svelte-14aweiq"><div class="agent-details--left svelte-14aweiq"><div class="agent-icon"><div class="skeleton-dot svelte-14aweiq"></div></div> <div class="skeleton-text svelte-14aweiq"></div></div></div></div> ',A(n,"class","agent-row skeleton-row svelte-14aweiq"),this.first=n},m(e,o){b(e,n,o)},p(e,o){},d(e){e&&x(n)}}}function Gu(i){let t,n,e;return n=new zt({props:{content:(i[1]?i[3].isDragging:i[4].isDragging)?void 0:"Drag to resize. Click or Esc to collapse",side:"bottom",hasPointerEvents:!1,offset:[0,8],$$slots:{default:[R5]},$$scope:{ctx:i}}}),{c(){t=L("div"),v(n.$$.fragment),A(t,"class","resize-handle-container svelte-14aweiq")},m(o,r){b(o,t,r),w(n,t,null),e=!0},p(o,r){const s={};26&r[0]&&(s.content=(o[1]?o[3].isDragging:o[4].isDragging)?void 0:"Drag to resize. Click or Esc to collapse"),26&r[0]|4096&r[4]&&(s.$$scope={dirty:r,ctx:o}),n.$set(s)},i(o){e||(d(n.$$.fragment,o),e=!0)},o(o){m(n.$$.fragment,o),e=!1},d(o){o&&x(t),y(n)}}}function R5(i){let t,n,e;return{c(){t=L("button"),t.innerHTML='<div class="resize-handle-line svelte-14aweiq"><div class="resize-handle-dash svelte-14aweiq"></div></div>',A(t,"class","resize-handle svelte-14aweiq"),At(t,"resize-handle--dragging",i[1]?i[3].isDragging:i[4].isDragging),At(t,"resize-handle--expanded",i[1])},m(o,r){b(o,t,r),n||(e=[Dt(t,"mousedown",function(){ze(i[1]?i[53]:i[56])&&(i[1]?i[53]:i[56]).apply(this,arguments)}),Dt(t,"click",i[115])],n=!0)},p(o,r){i=o,26&r[0]&&At(t,"resize-handle--dragging",i[1]?i[3].isDragging:i[4].isDragging),2&r[0]&&At(t,"resize-handle--expanded",i[1])},d(o){o&&x(t),n=!1,tn(e)}}}function D5(i){let t,n,e,o,r,s,c,a,l,u,$,f,p,_,C,M,T,E,R,P,J,K,et,U,G,nt,X,Y,Z,it,rt,ht;Ln(i[94]),a=new Uo({}),f=new Wt({props:{size:1,class:"header-text-main",$$slots:{default:[r5]},$$scope:{ctx:i}}});let ct=!i[11]&&i[1]&&Iu(i),vt=i[1]&&Lu(i),Gt=i[6]&&!i[26]&&Pu(i);K=new Yx({});let Ct=i[1]&&!i[27]&&!i[25]&&Nu(i),jt=i[19]>0&&Bu(i);const Ve=[_5,b5,x5],ye=[];function Ge(S,F){return S[27]?0:S[26]?1:S[25]?2:-1}~(nt=Ge(i))&&(X=ye[nt]=Ve[nt](i));let z=(!i[0]&&i[1]||!i[1]&&i[8])&&Gu(i);return{c(){t=L("div"),n=L("div"),e=L("div"),o=L("div"),r=L("div"),s=L("button"),c=L("div"),v(a.$$.fragment),u=H(),$=L("div"),v(f.$$.fragment),p=H(),_=L("div"),ct&&ct.c(),C=H(),vt&&vt.c(),E=H(),R=L("div"),Gt&&Gt.c(),P=H(),J=L("div"),v(K.$$.fragment),et=H(),Ct&&Ct.c(),U=H(),jt&&jt.c(),G=H(),X&&X.c(),Y=H(),z&&z.c(),A(c,"class",l="expand-toggle-button "+(i[1]?"expand-toggle-button--active":"")+" svelte-14aweiq"),A($,"class","header-text svelte-14aweiq"),A(_,"class","thread-type-filter svelte-14aweiq"),A(s,"class",M="expand-toggle-button-container "+(i[1]?"expand-toggle-button-container--active":"")+" svelte-14aweiq"),A(s,"aria-label",T=i[1]?"Collapse threads":"Expand threads"),A(s,"aria-expanded",i[1]),A(s,"type","button"),A(s,"data-testid",P5),A(r,"class","header-left svelte-14aweiq"),A(J,"class","new-thread-dropdown svelte-14aweiq"),A(R,"class","header-right svelte-14aweiq"),A(o,"class","header svelte-14aweiq"),A(e,"class","agents-list-container svelte-14aweiq"),A(e,"role","region"),A(e,"aria-label","Remote agents list"),At(e,"is-dragging",i[3].isDragging||i[4].isDragging),At(e,"is-expanded",i[1]),A(n,"class","remote-agent-threads svelte-14aweiq"),Ln(()=>i[116].call(n)),A(t,"class","remote-agent-threads-container svelte-14aweiq")},m(S,F){b(S,t,F),O(t,n),O(n,e),O(e,o),O(o,r),O(r,s),O(s,c),w(a,c,null),O(s,u),O(s,$),w(f,$,null),O(s,p),O(s,_),ct&&ct.m(_,null),O(s,C),vt&&vt.m(s,null),O(o,E),O(o,R),Gt&&Gt.m(R,null),O(R,P),O(R,J),w(K,J,null),O(e,et),Ct&&Ct.m(e,null),O(e,U),jt&&jt.m(e,null),O(n,G),~nt&&ye[nt].m(n,null),O(n,Y),z&&z.m(n,null),Z=cs(n,i[116].bind(n)),it=!0,rt||(ht=[Dt(window,"mousemove",i[92]),Dt(window,"mouseup",i[93]),Dt(window,"focus",i[49]),Dt(window,"blur",i[50]),Dt(window,"keydown",i[51]),Dt(window,"resize",i[94]),Dt(s,"click",i[46]),Dt(s,"keydown",i[101])],rt=!0)},p(S,F){(!it||2&F[0]&&l!==(l="expand-toggle-button "+(S[1]?"expand-toggle-button--active":"")+" svelte-14aweiq"))&&A(c,"class",l);const tt={};4096&F[4]&&(tt.$$scope={dirty:F,ctx:S}),f.$set(tt),!S[11]&&S[1]?ct?(ct.p(S,F),2050&F[0]&&d(ct,1)):(ct=Iu(S),ct.c(),d(ct,1),ct.m(_,null)):ct&&(q(),m(ct,1,1,()=>{ct=null}),j()),S[1]?vt?(vt.p(S,F),2&F[0]&&d(vt,1)):(vt=Lu(S),vt.c(),d(vt,1),vt.m(s,null)):vt&&(q(),m(vt,1,1,()=>{vt=null}),j()),(!it||2&F[0]&&M!==(M="expand-toggle-button-container "+(S[1]?"expand-toggle-button-container--active":"")+" svelte-14aweiq"))&&A(s,"class",M),(!it||2&F[0]&&T!==(T=S[1]?"Collapse threads":"Expand threads"))&&A(s,"aria-label",T),(!it||2&F[0])&&A(s,"aria-expanded",S[1]),S[6]&&!S[26]?Gt?(Gt.p(S,F),67108928&F[0]&&d(Gt,1)):(Gt=Pu(S),Gt.c(),d(Gt,1),Gt.m(R,P)):Gt&&(q(),m(Gt,1,1,()=>{Gt=null}),j()),!S[1]||S[27]||S[25]?Ct&&(q(),m(Ct,1,1,()=>{Ct=null}),j()):Ct?(Ct.p(S,F),167772162&F[0]&&d(Ct,1)):(Ct=Nu(S),Ct.c(),d(Ct,1),Ct.m(e,U)),S[19]>0?jt?(jt.p(S,F),524288&F[0]&&d(jt,1)):(jt=Bu(S),jt.c(),d(jt,1),jt.m(e,null)):jt&&(q(),m(jt,1,1,()=>{jt=null}),j()),(!it||24&F[0])&&At(e,"is-dragging",S[3].isDragging||S[4].isDragging),(!it||2&F[0])&&At(e,"is-expanded",S[1]);let st=nt;nt=Ge(S),nt===st?~nt&&ye[nt].p(S,F):(X&&(q(),m(ye[st],1,1,()=>{ye[st]=null}),j()),~nt?(X=ye[nt],X?X.p(S,F):(X=ye[nt]=Ve[nt](S),X.c()),d(X,1),X.m(n,Y)):X=null),!S[0]&&S[1]||!S[1]&&S[8]?z?(z.p(S,F),259&F[0]&&d(z,1)):(z=Gu(S),z.c(),d(z,1),z.m(n,null)):z&&(q(),m(z,1,1,()=>{z=null}),j())},i(S){it||(d(a.$$.fragment,S),d(f.$$.fragment,S),d(ct),d(vt),d(Gt),d(K.$$.fragment,S),d(Ct),d(jt),d(X),d(z),it=!0)},o(S){m(a.$$.fragment,S),m(f.$$.fragment,S),m(ct),m(vt),m(Gt),m(K.$$.fragment,S),m(Ct),m(jt),m(X),m(z),it=!1},d(S){S&&x(t),y(a),y(f),ct&&ct.d(),vt&&vt.d(),Gt&&Gt.d(),y(K),Ct&&Ct.d(),jt&&jt.d(),~nt&&ye[nt].d(),z&&z.d(),Z(),rt=!1,tn(ht)}}}const P5="threads-expand-button";function N5(i){if(i.id===or||i.type!=="remoteAgent")return!1;const t=new Date(i.updated_at),n=new Date().getTime()-t.getTime();return Math.floor(n/1e3/60/60)<168}const wi=25;function Ku(i){var t,n,e;return((e=(n=(t=i.workspace_setup)==null?void 0:t.starting_files)==null?void 0:n.github_commit_ref)==null?void 0:e.repository_url)||""}function F5(i,t,n){let e,o,r,s,c,a,l,u,$,f,p,_,C,M,T,E,R,P,J,K,et,U,G,nt,X,Y,Z,it,rt,ht,ct,vt,Gt,Ct,jt,Ve,ye,Ge,z,S,F,tt,st,gt,_t,Rt,ee,de,It,he,Ze,Le,ne=N,Ue=N;i.$$.on_destroy.push(()=>ne()),i.$$.on_destroy.push(()=>Ue());const _n=or,Je=kt(Rn.key);Tt(i,Je,pt=>n(88,gt=pt));const Cn=kt(Z$);Tt(i,Cn,pt=>n(89,It=pt));const Me=kt(wr.key),Jn=kt(vr.key);let{chatModelProp:gn}=t,en=gn||kt("chatModel");Tt(i,en,pt=>n(90,he=pt));const Wn=Re(!1);let hn;function an(pt){if(!pt)return new Date(0);const $e=C;return yn.getTime(pt,$e)}Tt(i,Wn,pt=>n(34,Le=pt)),so(async()=>{try{Me.getRemoteUrl(),en&&en.flags&&Wn.update(()=>en.flags.enableShareService||!1)}catch(pt){console.error("Failed to get current repository URL:",pt)}});let qe="",Tn=!1;function Kt(){n(0,qe=""),n(11,Tn=!1)}let fn,Dn=0,Pn=0,Un=0;const Nn=Jl(()=>{n(1,xe=!1)},()=>xe),Vn=Jl(()=>{je.set(!1)},()=>Rt);async function He(pt,$e){if($e&&$e.stopPropagation(),!pt.isNew)if(pt.type==="remoteAgent"){const Ft=await Je.toggleAgentPinned(pt.id,pt.isPinned||!1);Cn.update(Ke=>{if(Ke)return{...Ke,pinnedAgents:Ft}})}else["chat","localAgent"].includes(pt.type)&&en&&en.toggleConversationPinned(pt.id)}const En=Re("all");Tt(i,En,pt=>n(9,de=pt));let xe=!1;const je=Re(!1);function cn(){if(n(1,xe=!xe),xe){je.set(!1);const pt=Te.currentHeight||ge.defaultHeight,$e=Li(vt.windowHeight,vt.maxContentHeight),Ft=Math.max(vt.minHeight,Math.min($e,pt));n(3,Te={...Te,currentHeight:Ft})}}function Vt(){if(je.update(pt=>!pt),n(1,xe=!1),Rt){const pt=Li(Gt.windowHeight,Gt.maxContentHeight),$e=Math.max(Gt.minHeight,Math.min(pt,Gt.defaultHeight));n(4,Fe={...Fe,currentHeight:$e})}}function Mt(pt){if(!pt)return!1;pt.type==="remoteAgent"&&pt.has_updates&&Je.optimisticallyClearAgentUpdates(pt.id),Je.setIsActive(pt.type==="remoteAgent");const $e=Jn.switchToThread(pt.type,pt.id,ee);return $e&&(n(1,xe=!1),je.set(!1)),$e}let Ut;function Ae(pt){n(65,Ut=pt)}Tt(i,je,pt=>n(8,Rt=pt));let we=0;const ge={threadItemHeight:wi,minHeight:75,defaultHeight:375},Pe={threadItemHeight:wi,minHeight:25,defaultHeight:100};let St,Te=xu(ge.defaultHeight),Fe=xu(Pe.defaultHeight);function Qn(pt){n(3,Te=_u(pt,Te,vt,xe))}function Eo(){n(3,Te=Cu(Te)),setTimeout(()=>{n(3,Te=Au(Te))},0)}function Vo(pt){n(4,Fe=_u(pt,Fe,Gt,!xe&&Rt))}function Ar(){n(4,Fe=Cu(Fe)),setTimeout(()=>{n(4,Fe=Au(Fe))},0)}const Mr=Me.currentRepositoryUrl;async function Go(pt){const $e=[],Ft=[];for(const Ke of pt)Ke.type==="remoteAgent"?Ft.push(Ke.id):$e.push(Ke.id);await en.deleteConversations($e,void 0,Ft,Je)}return Tt(i,Mr,pt=>n(118,_t=pt)),i.$$set=pt=>{"chatModelProp"in pt&&n(64,gn=pt.chatModelProp)},i.$$.update=()=>{var pt,$e;67108864&i.$$.dirty[2]&&n(86,e=gt.currentAgentId),67108864&i.$$.dirty[2]&&n(82,o=gt.agentOverviews||[]),268435456&i.$$.dirty[2]&&n(87,r=en?Object.values(he.orderedConversations()):[]),33554432&i.$$.dirty[2]&&n(85,s=r.find(yn.isNew)),41943040&i.$$.dirty[2]&&n(84,c=en?r.filter(Ft=>{var Ke;return!((Ke=Ft.extraData)!=null&&Ke.isAgentConversation)&&Ft!==s}):[]),41943040&i.$$.dirty[2]&&n(83,a=en?r.filter(Ft=>{var Ke;return((Ke=Ft.extraData)==null?void 0:Ke.isAgentConversation)===!0&&Ft!==s}):[]),67108864&i.$$.dirty[2]&&n(75,l=gt.agentThreadsError),67108864&i.$$.dirty[2]&&n(74,u=gt.isLoading),67108864&i.$$.dirty[2]&&n(72,$=gt.hasFetchedOnce),67108864&i.$$.dirty[2]&&n(33,f=gt.lastSuccessfulOverviewFetch),134217728&i.$$.dirty[2]&&n(32,p=(pt=It.state)==null?void 0:pt.activeWebviews.includes("home")),536870912&i.$$.dirty[2]&&(C=Ze||"lastMessageTimestamp"),268435456&i.$$.dirty[2]&&(n(30,M=he.agentExecutionMode),ne(),ne=ie(M,Ft=>n(119,ee=Ft))),352321536&i.$$.dirty[2]&&n(7,T=gt.isActive?e??_n:he.currentConversationId),343932928&i.$$.dirty[2]&&n(79,E=(()=>{var Ft,Ke;if(gt.isActive){if(gt.isCreatingAgent)return;const to=(Ft=he.currentConversationModel.draftExchange)==null?void 0:Ft.request_message;return{id:_n,isNew:!0,type:"remoteAgent",title:to,updated_at:new Date().toISOString(),started_at:new Date().toISOString(),isPinned:!1,conversation:void 0,sortTimestamp:new Date}}if(s)return{id:s.id,isNew:!0,type:(Ke=s.extraData)!=null&&Ke.isAgentConversation?"localAgent":"chat",title:"",updated_at:s.lastInteractedAtIso,started_at:s.createdAtIso,isPinned:!1,conversation:s,sortTimestamp:an(s)}})()),4194304&i.$$.dirty[2]&&n(78,R=c.map(Ft=>({id:Ft.id,isNew:!1,type:"chat",title:Ft.name||"",updated_at:Ft.lastInteractedAtIso,started_at:Ft.createdAtIso,isPinned:Ft.isPinned,conversation:Ft,sortTimestamp:an(Ft)}))),2097152&i.$$.dirty[2]&&n(77,P=a.map(Ft=>({id:Ft.id,isNew:!1,type:"localAgent",title:Ft.name||"",updated_at:Ft.lastInteractedAtIso,started_at:Ft.createdAtIso,isPinned:Ft.isPinned,conversation:Ft,sortTimestamp:an(Ft)}))),134217728&i.$$.dirty[2]&&n(81,J=(($e=It.state)==null?void 0:$e.pinnedAgents)||{}),128&i.$$.dirty[0]|1572864&i.$$.dirty[2]&&n(67,K=o.map(Ft=>({id:Ft.remote_agent_id,isNew:!1,type:"remoteAgent",title:Ft.session_summary,updated_at:Ft.updated_at,started_at:Ft.started_at,status:Ft.status,workspace_status:Ft.workspace_status,is_setup_script_agent:Ft.is_setup_script_agent,workspace_setup:Ft.workspace_setup||{},agent:Ft,sortTimestamp:new Date(Ft.updated_at||Ft.started_at),isPinned:J[Ft.remote_agent_id]||!1,has_updates:Ft.has_updates&&Ft.remote_agent_id!==T}))),128&i.$$.dirty[0]|131072&i.$$.dirty[2]&&n(80,et=E&&T===E.id),491552&i.$$.dirty[2]&&n(76,U=[et&&E,...R,...P,...K].filter(Boolean)),114720&i.$$.dirty[2]&&n(29,G=[{value:"all",label:"All threads",count:U.length},{value:"chat",label:"Chats",count:R.length},{value:"localAgent",label:"Local agents",count:P.length},{value:"remoteAgent",label:"Remote agents",count:K.length}].filter(Ft=>Ft.count>0)),513&i.$$.dirty[0]|67125248&i.$$.dirty[2]&&n(69,nt=U.filter(Ft=>(de==="all"||Ft.type===de)&&function(Ke,to,Io,Fn){if(!to.trim())return!0;const Lo=to.toLowerCase().split(/\s+/).filter(Do=>Do.length>0),Ro=[Ke.title,Ke.type==="remoteAgent"?Oy(Ke):"",Fy(Ke,Io,Fn)].filter(Boolean).join(" ").toLowerCase();return Lo.every(Do=>Ro.includes(Do))}(Ft,qe,gt.currentAgentId,gt.currentConversation))),8192&i.$$.dirty[2]&&n(6,Z=l==null?void 0:l.errorMessage),64&i.$$.dirty[0]|8&i.$$.dirty[2]&&n(73,Y=Ut===Z),5120&i.$$.dirty[2]&&n(27,it=u&&!$),64&i.$$.dirty[0]|3072&i.$$.dirty[2]&&n(26,rt=!!Z&&$&&!Y),1152&i.$$.dirty[2]&&n(25,ht=$&&nt.length===0),2&i.$$.dirty[0]|128&i.$$.dirty[2]&&n(24,ct=xe?function(Ft,Ke=Ix){var Ko;const to=new Map,Io=new Date(new Date().setHours(0,0,0,0)),Fn=[{age:Ye.Today,date:Io},{age:Ye.ThisWeek,date:new Date(Io.getTime()-6048e5)},{age:Ye.ThisMonth,date:new Date(Io.getTime()-2592e6)}];for(const On of Ft){const Yo=On.sortTimestamp;let eo=((Ko=Fn.find(xo=>Yo>=xo.date))==null?void 0:Ko.age)||Ye.Older;On.isPinned&&(eo=Ye.Pinned),On.isNew&&(eo=Ye.New),to.set(eo,[...to.get(eo)||[],On])}const Lo=Lx.map(On=>({groupTitle:On,threads:Rx(to.get(On)||[])})).filter(On=>On.threads.length>0);let Ro=0;const Do=[];for(const On of Lo){const Yo=[];for(const eo of On.threads){if(Ro>=Ke)break;Yo.push(eo),Ro++}Do.push({groupTitle:On.groupTitle,threads:Yo})}return Do}(nt):[]),4&i.$$.dirty[0]|128&i.$$.dirty[2]&&n(71,vt={...ge,windowHeight:we,maxContentHeight:nt.length*wi}),128&i.$$.dirty[2]&&n(5,Ge=nt.filter(N5)),36&i.$$.dirty[0]&&n(70,Gt={...Pe,windowHeight:we,maxContentHeight:Ge.length*wi}),10&i.$$.dirty[0]|512&i.$$.dirty[2]&&xe&&n(3,Te=Mu(Te,vt)),274&i.$$.dirty[0]|256&i.$$.dirty[2]&&!xe&&Rt&&n(4,Fe=Mu(Fe,Gt)),10&i.$$.dirty[0]&&n(23,Ct=xe?`${Te.currentHeight}px`:""),10&i.$$.dirty[0]&&n(22,jt=xe?`${Te.currentHeight}px`:""),274&i.$$.dirty[0]&&n(21,Ve=!xe&&Rt?`${Fe.currentHeight}px`:""),274&i.$$.dirty[0]&&n(20,ye=!xe&&Rt?`${Fe.currentHeight}px`:""),32&i.$$.dirty[0]&&n(19,z=Ge.length),32&i.$$.dirty[2]&&n(68,S=K.filter(Ft=>(Ft.status===rn.agentRunning||Ft.status===rn.agentStarting)&&!Ft.has_updates)),64&i.$$.dirty[2]&&n(18,F=S.length),32&i.$$.dirty[2]&&n(66,tt=K.filter(Ft=>!!Ft.has_updates)),16&i.$$.dirty[2]&&n(17,st=tt.length)},n(31,_=en?en.sortConversationsBy:Re("lastMessageTimestamp")),Ue(),Ue=ie(_,pt=>n(91,Ze=pt)),n(28,X=Array(3).fill(null)),[qe,xe,we,Te,Fe,Ge,Z,T,Rt,de,hn,Tn,Dn,Pn,Un,fn,St,st,F,z,ye,Ve,jt,Ct,ct,ht,rt,it,X,G,M,_,p,f,Le,Je,Cn,en,Wn,function(){n(11,Tn=!Tn),n(1,xe=Tn),Tn?setTimeout(()=>{hn==null||hn.focus()},30):n(0,qe="")},Kt,Nn,Vn,He,En,je,cn,Vt,Mt,function(){Je.setIsPanelFocused(!0)},function(){Je.setIsPanelFocused(!1)},function(pt){pt.key==="Escape"&&(xe?(n(1,xe=!1),pt.preventDefault(),pt.stopPropagation()):Rt&&(je.set(!1),pt.preventDefault(),pt.stopPropagation()))},Ae,function(pt){n(3,Te=bu(pt,Te,xe))},Qn,Eo,function(pt){n(4,Fe=bu(pt,Fe,!xe&&Rt))},Vo,Ar,Mr,function(pt){if(!pt||typeof pt!="object"||!("workspace_setup"in pt))return!1;const $e=Ku(pt);return!!$e&&!!_t&&$e!==_t},function(pt){if(!pt||typeof pt!="object"||!("workspace_setup"in pt))return{name:"Unknown",fullPath:"Unknown"};const $e=Ku(pt);return{name:P$($e),fullPath:Ms($e)}},function(){gt.refreshAgentThreads()},Go,gn,Ut,tt,K,S,nt,Gt,vt,$,Y,u,l,U,P,R,E,et,J,o,a,c,s,e,r,gt,It,he,Ze,pt=>{Qn(pt),Vo(pt)},()=>{Eo(),Ar()},function(){n(2,we=window.innerHeight)},pt=>pt.value===de,function(pt){qe=pt,n(0,qe)},function(pt){hn=pt,n(10,hn)},pt=>{pt.key==="Escape"&&Kt()},()=>{n(11,Tn=!0)},()=>{qe.trim()||n(11,Tn=!1)},pt=>{pt.key!=="Enter"&&pt.key!==" "||(cn(),pt.stopPropagation(),pt.preventDefault())},pt=>Go(pt.threads),(pt,$e,Ft)=>{if(T!==pt.id)return;const Ke=$e.threads[Ft+1]||$e.threads[Ft-1];Ke&&Mt(Ke)},pt=>Mt(pt),(pt,$e)=>He(pt,$e),function(){Pn=this.clientHeight,n(13,Pn)},function(pt){Qt[pt?"unshift":"push"](()=>{fn=pt,n(15,fn)})},function(){Dn=this.clientHeight,n(12,Dn)},pt=>{pt.stopPropagation(),p?Je.closeRemoteAgentHomePanel():Je.showRemoteAgentHomePanel()},(pt,$e)=>{if(T!==pt.id)return;const Ft=Ge[$e+1]||Ge[$e-1];Ft&&Mt(Ft)},pt=>Mt(pt),(pt,$e)=>He(pt,$e),function(pt){Qt[pt?"unshift":"push"](()=>{St=pt,n(16,St)})},()=>Z&&Ae(Z),()=>{if(xe){if(Te.hasDraggedThisClick)return;cn()}else{if(Fe.hasDraggedThisClick)return;Vt()}},function(){Un=this.clientWidth,n(14,Un)}]}class O5 extends ut{constructor(t){super(),dt(this,t,F5,D5,lt,{chatModelProp:64},null,[-1,-1,-1,-1,-1])}}function z5(i){let t,n;return{c(){t=oe("svg"),n=oe("path"),A(n,"d","M6.85357 3.85355L7.65355 3.05353C8.2981 2.40901 9.42858 1.96172 10.552 1.80125C11.1056 1.72217 11.6291 1.71725 12.0564 1.78124C12.4987 1.84748 12.7698 1.97696 12.8965 2.10357C13.0231 2.23018 13.1526 2.50125 13.2188 2.94357C13.2828 3.37086 13.2779 3.89439 13.1988 4.44801C13.0383 5.57139 12.591 6.70188 11.9464 7.34645L7.49999 11.7929L6.35354 10.6465C6.15827 10.4512 5.84169 10.4512 5.64643 10.6465C5.45117 10.8417 5.45117 11.1583 5.64643 11.3536L7.14644 12.8536C7.34171 13.0488 7.65829 13.0488 7.85355 12.8536L8.40073 12.3064L9.57124 14.2572C9.65046 14.3893 9.78608 14.4774 9.9389 14.4963C10.0917 14.5151 10.2447 14.4624 10.3535 14.3536L12.3535 12.3536C12.4648 12.2423 12.5172 12.0851 12.495 11.9293L12.0303 8.67679L12.6536 8.05355C13.509 7.19808 14.0117 5.82855 14.1887 4.58943C14.2784 3.9618 14.2891 3.33847 14.2078 2.79546C14.1287 2.26748 13.9519 1.74482 13.6035 1.39645C13.2552 1.04809 12.7325 0.871332 12.2045 0.792264C11.6615 0.710945 11.0382 0.721644 10.4105 0.8113C9.17143 0.988306 7.80189 1.491 6.94644 2.34642L6.32322 2.96968L3.07071 2.50504C2.91492 2.48278 2.75773 2.53517 2.64645 2.64646L0.646451 4.64645C0.537579 4.75533 0.484938 4.90829 0.50375 5.0611C0.522563 5.21391 0.61073 5.34954 0.742757 5.42876L2.69364 6.59928L2.14646 7.14645C2.0527 7.24022 2.00002 7.3674 2.00002 7.50001C2.00002 7.63261 2.0527 7.75979 2.14646 7.85356L3.64647 9.35356C3.84173 9.54883 4.15831 9.54883 4.35357 9.35356C4.54884 9.1583 4.54884 8.84172 4.35357 8.64646L3.20712 7.50001L3.85357 6.85356L6.85357 3.85355ZM10.0993 13.1936L9.12959 11.5775L11.1464 9.56067L11.4697 11.8232L10.0993 13.1936ZM3.42251 5.87041L5.43935 3.85356L3.17678 3.53034L1.80638 4.90074L3.42251 5.87041ZM2.35356 10.3535C2.54882 10.1583 2.54882 9.8417 2.35356 9.64644C2.1583 9.45118 1.84171 9.45118 1.64645 9.64644L0.646451 10.6464C0.451188 10.8417 0.451188 11.1583 0.646451 11.3535C0.841713 11.5488 1.1583 11.5488 1.35356 11.3535L2.35356 10.3535ZM3.85358 11.8536C4.04884 11.6583 4.04885 11.3417 3.85359 11.1465C3.65833 10.9512 3.34175 10.9512 3.14648 11.1465L1.14645 13.1464C0.95119 13.3417 0.951187 13.6583 1.14645 13.8535C1.34171 14.0488 1.65829 14.0488 1.85355 13.8536L3.85358 11.8536ZM5.35356 13.3535C5.54882 13.1583 5.54882 12.8417 5.35356 12.6464C5.1583 12.4512 4.84171 12.4512 4.64645 12.6464L3.64645 13.6464C3.45119 13.8417 3.45119 14.1583 3.64645 14.3535C3.84171 14.5488 4.1583 14.5488 4.35356 14.3535L5.35356 13.3535ZM9.49997 6.74881C10.1897 6.74881 10.7488 6.1897 10.7488 5.5C10.7488 4.8103 10.1897 4.25118 9.49997 4.25118C8.81026 4.25118 8.25115 4.8103 8.25115 5.5C8.25115 6.1897 8.81026 6.74881 9.49997 6.74881Z"),A(n,"fill","currentColor"),A(n,"fill-rule","evenodd"),A(n,"clip-rule","evenodd"),A(t,"width","15"),A(t,"height","15"),A(t,"viewBox","0 0 15 15"),A(t,"fill","none"),A(t,"xmlns","http://www.w3.org/2000/svg")},m(e,o){b(e,t,o),O(t,n)},p:N,i:N,o:N,d(e){e&&x(t)}}}class B5 extends ut{constructor(t){super(),dt(this,t,null,z5,lt,{})}}const H5=i=>({}),Yu=i=>({});function U5(i){let t,n;return t=new O$({props:{slot:"rightIcon"}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p:N,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function q5(i){let t,n;return t=new kn({props:{class:"edit-item__filespan",size:1,filepath:i[0].relPath,$$slots:{rightIcon:[U5]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};1&o&&(r.filepath=e[0].relPath),1024&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function j5(i){let t,n;return t=new zt({props:{delayDurationMs:1500,triggerOn:[te.Hover],content:i[0].relPath,$$slots:{default:[q5]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};1&o&&(r.content=e[0].relPath),1025&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function Xu(i){let t,n;return t=new ve({props:{size:1,variant:"ghost",color:"neutral",$$slots:{default:[V5]},$$scope:{ctx:i}}}),t.$on("click",function(){ze(i[5])&&i[5].apply(this,arguments)}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){i=e;const r={};1026&o&&(r.$$scope={dirty:o,ctx:i}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function W5(i){let t,n;return t=new F$({props:{totalAddedLines:i[1].totalAddedLines,totalRemovedLines:i[1].totalRemovedLines}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};2&o&&(r.totalAddedLines=e[1].totalAddedLines),2&o&&(r.totalRemovedLines=e[1].totalRemovedLines),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function V5(i){let t,n;return t=new zt({props:{triggerOn:[te.Hover],content:"View Diff",$$slots:{default:[W5]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};1026&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function Zu(i){let t,n,e,o,r=i[8]&&Ju(i),s=i[6]&&Qu(i),c=i[7]&&td(i);return{c(){t=L("div"),r&&r.c(),n=H(),s&&s.c(),e=H(),c&&c.c(),A(t,"class","edit-item__controls-container")},m(a,l){b(a,t,l),r&&r.m(t,null),O(t,n),s&&s.m(t,null),O(t,e),c&&c.m(t,null),o=!0},p(a,l){a[8]?r?(r.p(a,l),256&l&&d(r,1)):(r=Ju(a),r.c(),d(r,1),r.m(t,n)):r&&(q(),m(r,1,1,()=>{r=null}),j()),a[6]?s?(s.p(a,l),64&l&&d(s,1)):(s=Qu(a),s.c(),d(s,1),s.m(t,e)):s&&(q(),m(s,1,1,()=>{s=null}),j()),a[7]?c?(c.p(a,l),128&l&&d(c,1)):(c=td(a),c.c(),d(c,1),c.m(t,null)):c&&(q(),m(c,1,1,()=>{c=null}),j())},i(a){o||(d(r),d(s),d(c),o=!0)},o(a){m(r),m(s),m(c),o=!1},d(a){a&&x(t),r&&r.d(),s&&s.d(),c&&c.d()}}}function Ju(i){let t,n,e,o;const r=[K5,G5],s=[];function c(a,l){return a[3]?0:1}return t=c(i),n=s[t]=r[t](i),{c(){n.c(),e=ft()},m(a,l){s[t].m(a,l),b(a,e,l),o=!0},p(a,l){let u=t;t=c(a),t===u?s[t].p(a,l):(q(),m(s[u],1,1,()=>{s[u]=null}),j(),n=s[t],n?n.p(a,l):(n=s[t]=r[t](a),n.c()),d(n,1),n.m(e.parentNode,e))},i(a){o||(d(n),o=!0)},o(a){m(n),o=!1},d(a){a&&x(e),s[t].d(a)}}}function G5(i){let t,n;return t=new fe({props:{size:1,variant:"ghost",color:"neutral",$$slots:{default:[J5]},$$scope:{ctx:i}}}),t.$on("click",function(){ze(i[8])&&i[8].apply(this,arguments)}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){i=e;const r={};1028&o&&(r.$$scope={dirty:o,ctx:i}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function K5(i){let t,n;return t=new zt({props:{triggerOn:[te.Hover],content:"Changes applied",class:"edit-item__controls-container__applied",$$slots:{default:[t8]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};1024&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function Y5(i){let t,n;return t=new B5({}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function X5(i){let t,n;return t=new sr({}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function Z5(i){let t,n,e,o;const r=[X5,Y5],s=[];function c(a,l){return a[2]?0:1}return t=c(i),n=s[t]=r[t](i),{c(){n.c(),e=ft()},m(a,l){s[t].m(a,l),b(a,e,l),o=!0},p(a,l){let u=t;t=c(a),t!==u&&(q(),m(s[u],1,1,()=>{s[u]=null}),j(),n=s[t],n||(n=s[t]=r[t](a),n.c()),d(n,1),n.m(e.parentNode,e))},i(a){o||(d(n),o=!0)},o(a){m(n),o=!1},d(a){a&&x(e),s[t].d(a)}}}function J5(i){let t,n;return t=new zt({props:{triggerOn:[te.Hover],content:i[2]?"Applying changes...":"Apply changes",$$slots:{default:[Z5]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};4&o&&(r.content=e[2]?"Applying changes...":"Apply changes"),1028&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function Q5(i){let t,n,e;return n=new Ho({}),{c(){t=V(`Applied
              `),v(n.$$.fragment)},m(o,r){b(o,t,r),w(n,o,r),e=!0},i(o){e||(d(n.$$.fragment,o),e=!0)},o(o){m(n.$$.fragment,o),e=!1},d(o){o&&x(t),y(n,o)}}}function t8(i){let t,n;return t=new Wt({props:{size:1,$$slots:{default:[Q5]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};1024&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function Qu(i){let t,n;return t=new fe({props:{size:1,variant:"ghost",color:"neutral",$$slots:{default:[n8]},$$scope:{ctx:i}}}),t.$on("click",function(){ze(i[6])&&i[6].apply(this,arguments)}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){i=e;const r={};1024&o&&(r.$$scope={dirty:o,ctx:i}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function e8(i){let t,n;return t=new uf({}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function n8(i){let t,n;return t=new zt({props:{triggerOn:[te.Hover],content:"Open File",$$slots:{default:[e8]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};1024&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function td(i){let t,n;return t=new fe({props:{size:1,variant:"ghost",color:"neutral",$$slots:{default:[r8]},$$scope:{ctx:i}}}),t.$on("click",function(){ze(i[7])&&i[7].apply(this,arguments)}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){i=e;const r={};1024&o&&(r.$$scope={dirty:o,ctx:i}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function o8(i){let t,n;return t=new Wr({}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function r8(i){let t,n;return t=new zt({props:{triggerOn:[te.Hover],content:"Undo Changes",$$slots:{default:[o8]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};1024&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function i8(i){let t,n,e,o,r,s,c;e=new ve({props:{class:"edit-item__file-button",size:1,variant:i[4]?"soft":"ghost",color:i[4]?"accent":"neutral",$$slots:{default:[j5]},$$scope:{ctx:i}}}),e.$on("click",function(){ze(i[5])&&i[5].apply(this,arguments)});const a=i[9].actions,l=Yt(a,i,i[10],Yu);let u=i[1]&&Xu(i),$=(i[8]||i[6]||i[7])&&Zu(i);return{c(){t=L("div"),n=L("div"),v(e.$$.fragment),o=H(),l&&l.c(),r=H(),u&&u.c(),s=H(),$&&$.c(),A(n,"class","edit-item__info-container"),A(t,"class","edit-item__container svelte-11cbs0v"),At(t,"edit-item__container--focused",i[4])},m(f,p){b(f,t,p),O(t,n),w(e,n,null),O(t,o),l&&l.m(t,null),O(t,r),u&&u.m(t,null),O(t,s),$&&$.m(t,null),c=!0},p(f,[p]){i=f;const _={};16&p&&(_.variant=i[4]?"soft":"ghost"),16&p&&(_.color=i[4]?"accent":"neutral"),1025&p&&(_.$$scope={dirty:p,ctx:i}),e.$set(_),l&&l.p&&(!c||1024&p)&&Xt(l,a,i,i[10],c?Jt(a,i[10],p,H5):Zt(i[10]),Yu),i[1]?u?(u.p(i,p),2&p&&d(u,1)):(u=Xu(i),u.c(),d(u,1),u.m(t,s)):u&&(q(),m(u,1,1,()=>{u=null}),j()),i[8]||i[6]||i[7]?$?($.p(i,p),448&p&&d($,1)):($=Zu(i),$.c(),d($,1),$.m(t,null)):$&&(q(),m($,1,1,()=>{$=null}),j()),(!c||16&p)&&At(t,"edit-item__container--focused",i[4])},i(f){c||(d(e.$$.fragment,f),d(l,f),d(u),d($),c=!0)},o(f){m(e.$$.fragment,f),m(l,f),m(u),m($),c=!1},d(f){f&&x(t),y(e),l&&l.d(f),u&&u.d(),$&&$.d()}}}function s8(i,t,n){let{$$slots:e={},$$scope:o}=t,{qualifiedPathName:r}=t,{lineChanges:s}=t,{isApplyPending:c=!1}=t,{hasApplied:a=!1}=t,{isFocused:l=!1}=t,{onClickReview:u}=t,{onClickFile:$}=t,{onClickRevert:f}=t,{onApplyChanges:p}=t;return i.$$set=_=>{"qualifiedPathName"in _&&n(0,r=_.qualifiedPathName),"lineChanges"in _&&n(1,s=_.lineChanges),"isApplyPending"in _&&n(2,c=_.isApplyPending),"hasApplied"in _&&n(3,a=_.hasApplied),"isFocused"in _&&n(4,l=_.isFocused),"onClickReview"in _&&n(5,u=_.onClickReview),"onClickFile"in _&&n(6,$=_.onClickFile),"onClickRevert"in _&&n(7,f=_.onClickRevert),"onApplyChanges"in _&&n(8,p=_.onApplyChanges),"$$scope"in _&&n(10,o=_.$$scope)},[r,s,c,a,l,u,$,f,p,e,o]}class qm extends ut{constructor(t){super(),dt(this,t,s8,i8,lt,{qualifiedPathName:0,lineChanges:1,isApplyPending:2,hasApplied:3,isFocused:4,onClickReview:5,onClickFile:6,onClickRevert:7,onApplyChanges:8})}}function a8(i){let t,n,e=[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 448 512"},i[0]],o={};for(let r=0;r<e.length;r+=1)o=Et(o,e[r]);return{c(){t=oe("svg"),n=new ln(!0),this.h()},l(r){t=un(r,"svg",{xmlns:!0,"data-ds-icon":!0,viewBox:!0});var s=dn(t);n=$n(s,!0),s.forEach(x),this.h()},h(){n.a=null,ue(t,o)},m(r,s){mn(r,t,s),n.m('<!--! Font Awesome Pro 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2024 Fonticons, Inc.--><path d="M337 81c9.4-9.4 9.4-24.6 0-33.9s-24.6-9.4-33.9 0l-143 143L97 127c-9.4-9.4-24.6-9.4-33.9 0s-9.4 24.6 0 33.9l80 80c9.4 9.4 24.6 9.4 33.9 0zm104 120c9.4-9.4 9.4-24.6 0-33.9s-24.6-9.4-33.9 0l-247 247L41 295c-9.4-9.4-24.6-9.4-33.9 0s-9.4 24.6 0 33.9L143 465c9.4 9.4 24.6 9.4 33.9 0z"/>',t)},p(r,[s]){ue(t,o=De(e,[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 448 512"},1&s&&r[0]]))},i:N,o:N,d(r){r&&x(t)}}}function c8(i,t,n){return i.$$set=e=>{n(0,t=Et(Et({},t),ae(e)))},[t=ae(t)]}class jm extends ut{constructor(t){super(),dt(this,t,c8,a8,lt,{})}}function l8(i){let t,n,e=[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 512 512"},i[0]],o={};for(let r=0;r<e.length;r+=1)o=Et(o,e[r]);return{c(){t=oe("svg"),n=new ln(!0),this.h()},l(r){t=un(r,"svg",{xmlns:!0,"data-ds-icon":!0,viewBox:!0});var s=dn(t);n=$n(s,!0),s.forEach(x),this.h()},h(){n.a=null,ue(t,o)},m(r,s){mn(r,t,s),n.m('<!--! Font Awesome Pro 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2024 Fonticons, Inc.--><path d="M135 369c9.4 9.4 24.6 9.4 33.9 0s9.4-24.6 0-33.9l-87-87L424 248c22.1 0 40 17.9 40 40v168c0 13.3 10.7 24 24 24s24-10.7 24-24V288c0-48.6-39.4-88-88-88H81.9l87-87c9.4-9.4 9.4-24.6 0-33.9s-24.6-9.4-33.9 0L7 207c-9.4 9.4-9.4 24.6 0 33.9z"/>',t)},p(r,[s]){ue(t,o=De(e,[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 512 512"},1&s&&r[0]]))},i:N,o:N,d(r){r&&x(t)}}}function u8(i,t,n){return i.$$set=e=>{n(0,t=Et(Et({},t),ae(e)))},[t=ae(t)]}class Wm extends ut{constructor(t){super(),dt(this,t,u8,l8,lt,{})}}function d8(i){let t,n,e;return t=new Wm({}),{c(){v(t.$$.fragment),n=V(`
      Discard All`)},m(o,r){w(t,o,r),b(o,n,r),e=!0},i(o){e||(d(t.$$.fragment,o),e=!0)},o(o){m(t.$$.fragment,o),e=!1},d(o){o&&x(n),y(t,o)}}}function $8(i){let t,n;return t=new zt({props:{triggerOn:[te.Hover],content:i[0]?"Discard all changes":"No changes to undo",$$slots:{default:[d8]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};1&o&&(r.content=e[0]?"Discard all changes":"No changes to undo"),32&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function m8(i){let t,n,e;return t=new jm({}),{c(){v(t.$$.fragment),n=V(`
      Keep All`)},m(o,r){w(t,o,r),b(o,n,r),e=!0},i(o){e||(d(t.$$.fragment,o),e=!0)},o(o){m(t.$$.fragment,o),e=!1},d(o){o&&x(n),y(t,o)}}}function f8(i){let t,n;return t=new zt({props:{triggerOn:[te.Hover],content:i[0]?"Keep all changes and clear checkpoints":"No changes to keep",$$slots:{default:[m8]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};1&o&&(r.content=e[0]?"Keep all changes and clear checkpoints":"No changes to keep"),32&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function p8(i){let t,n,e,o,r;return n=new ve({props:{class:"c-bottom-controls__revert-btn",variant:"soft",color:"neutral",size:1,disabled:!i[0],$$slots:{default:[$8]},$$scope:{ctx:i}}}),n.$on("click",i[2]),o=new ve({props:{class:"c-bottom-controls__accept-btn",variant:"soft",color:"success",size:1,disabled:!i[0],$$slots:{default:[f8]},$$scope:{ctx:i}}}),o.$on("click",i[3]),{c(){t=L("div"),v(n.$$.fragment),e=H(),v(o.$$.fragment),A(t,"class","c-bottom-controls svelte-1pc5clx")},m(s,c){b(s,t,c),w(n,t,null),O(t,e),w(o,t,null),r=!0},p(s,[c]){const a={};1&c&&(a.disabled=!s[0]),33&c&&(a.$$scope={dirty:c,ctx:s}),n.$set(a);const l={};1&c&&(l.disabled=!s[0]),33&c&&(l.$$scope={dirty:c,ctx:s}),o.$set(l)},i(s){r||(d(n.$$.fragment,s),d(o.$$.fragment,s),r=!0)},o(s){m(n.$$.fragment,s),m(o.$$.fragment,s),r=!1},d(s){s&&x(t),y(n),y(o)}}}function g8(i,t,n){let e;const o=kt("checkpointStore"),{targetCheckpointHasChanges:r}=o;return Tt(i,r,s=>n(0,e=s)),[e,r,async function(){await o.rejectAll()},async function(){await o.acceptAll()}]}class h8 extends ut{constructor(t){super(),dt(this,t,g8,p8,lt,{})}}function ed(i,t,n){const e=i.slice();return e[30]=t[n],e}function nd(i){let t,n,e,o;function r(c){i[25](c)}let s={class:"c-agent-edits-container__block-container",$$slots:{footer:[_8],header:[b8],default:[x8]},$$scope:{ctx:i}};return i[6]!==void 0&&(s.collapsed=i[6]),n=new Bs({props:s}),Qt.push(()=>Ne(n,"collapsed",r)),{c(){t=L("div"),v(n.$$.fragment),A(t,"class","c-agent-edits-container svelte-fdz1jv")},m(c,a){b(c,t,a),w(n,t,null),o=!0},p(c,a){const l={};197&a[0]|4&a[1]&&(l.$$scope={dirty:a,ctx:c}),!e&&64&a[0]&&(e=!0,l.collapsed=c[6],Be(()=>e=!1)),n.$set(l)},i(c){o||(d(n.$$.fragment,c),o=!0)},o(c){m(n.$$.fragment,c),o=!1},d(c){c&&x(t),y(n)}}}function v8(i){let t,n,e;return n=new Wt({props:{size:1,color:"neutral",$$slots:{default:[y8]},$$scope:{ctx:i}}}),{c(){t=L("div"),v(n.$$.fragment),A(t,"class","c-edits-list c-edits-list--empty svelte-fdz1jv")},m(o,r){b(o,t,r),w(n,t,null),e=!0},p(o,r){const s={};4&r[1]&&(s.$$scope={dirty:r,ctx:o}),n.$set(s)},i(o){e||(d(n.$$.fragment,o),e=!0)},o(o){m(n.$$.fragment,o),e=!1},d(o){o&&x(t),y(n)}}}function w8(i){let t,n,e,o=se(i[0]),r=[];for(let c=0;c<o.length;c+=1)r[c]=od(ed(i,o,c));const s=c=>m(r[c],1,1,()=>{r[c]=null});return{c(){t=L("div"),n=L("div");for(let c=0;c<r.length;c+=1)r[c].c();A(n,"class","c-edits-section svelte-fdz1jv"),A(t,"class","c-edits-list svelte-fdz1jv")},m(c,a){b(c,t,a),O(t,n);for(let l=0;l<r.length;l+=1)r[l]&&r[l].m(n,null);e=!0},p(c,a){if(229377&a[0]){let l;for(o=se(c[0]),l=0;l<o.length;l+=1){const u=ed(c,o,l);r[l]?(r[l].p(u,a),d(r[l],1)):(r[l]=od(u),r[l].c(),d(r[l],1),r[l].m(n,null))}for(q(),l=o.length;l<r.length;l+=1)s(l);j()}},i(c){if(!e){for(let a=0;a<o.length;a+=1)d(r[a]);e=!0}},o(c){r=r.filter(Boolean);for(let a=0;a<r.length;a+=1)m(r[a]);e=!1},d(c){c&&x(t),bn(r,c)}}}function y8(i){let t;return{c(){t=V("No changes to show")},m(n,e){b(n,t,e)},d(n){n&&x(t)}}}function od(i){let t,n;function e(){return i[22](i[30])}function o(){return i[23](i[30])}function r(){return i[24](i[30])}return t=new qm({props:{qualifiedPathName:i[30].qualifiedPathName,lineChanges:i[30].changesSummary,onClickFile:e,onClickReview:o,onClickRevert:r}}),{c(){v(t.$$.fragment)},m(s,c){w(t,s,c),n=!0},p(s,c){i=s;const a={};1&c[0]&&(a.qualifiedPathName=i[30].qualifiedPathName),1&c[0]&&(a.lineChanges=i[30].changesSummary),1&c[0]&&(a.onClickFile=e),1&c[0]&&(a.onClickReview=o),1&c[0]&&(a.onClickRevert=r),t.$set(a)},i(s){n||(d(t.$$.fragment,s),n=!0)},o(s){m(t.$$.fragment,s),n=!1},d(s){y(t,s)}}}function x8(i){let t,n,e,o;const r=[w8,v8],s=[];function c(a,l){return a[0].length>0?0:1}return t=c(i),n=s[t]=r[t](i),{c(){n.c(),e=ft()},m(a,l){s[t].m(a,l),b(a,e,l),o=!0},p(a,l){let u=t;t=c(a),t===u?s[t].p(a,l):(q(),m(s[u],1,1,()=>{s[u]=null}),j(),n=s[t],n?n.p(a,l):(n=s[t]=r[t](a),n.c()),d(n,1),n.m(e.parentNode,e))},i(a){o||(d(n),o=!0)},o(a){m(n),o=!1},d(a){a&&x(e),s[t].d(a)}}}function b8(i){let t,n;return t=new Ym({props:{filesCount:i[0].length,diffSummary:i[2],collapsed:i[6],hasChanges:i[7],onRevert:i[18],onKeep:i[19],slot:"header"}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};1&o[0]&&(r.filesCount=e[0].length),4&o[0]&&(r.diffSummary=e[2]),64&o[0]&&(r.collapsed=e[6]),128&o[0]&&(r.hasChanges=e[7]),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function _8(i){let t,n;return t=new h8({props:{slot:"footer"}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p:N,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function C8(i){let t,n,e=(i[3]&&i[4]>0&&i[0].length>0||i[5])&&nd(i);return{c(){e&&e.c(),t=ft()},m(o,r){e&&e.m(o,r),b(o,t,r),n=!0},p(o,r){o[3]&&o[4]>0&&o[0].length>0||o[5]?e?(e.p(o,r),57&r[0]&&d(e,1)):(e=nd(o),e.c(),d(e,1),e.m(t.parentNode,t)):e&&(q(),m(e,1,1,()=>{e=null}),j())},i(o){n||(d(e),n=!0)},o(o){m(e),n=!1},d(o){o&&x(t),e&&e.d(o)}}}function lT(i){if(!i)return"";if(i===Number.MAX_SAFE_INTEGER)return"Now";const t=new Date(i),n=new Date,e=t.getHours(),o=`${e%12||12}:${t.getMinutes().toString().padStart(2,"0")}${e>=12?"PM":"AM"}`,r=Math.floor((n.getTime()-t.getTime())/864e5);return r===0?o:r===1?`Yesterday at ${o}`:`${r} days ago at ${o}`}function A8(i,t,n){let e,o,r,s,c,a,l,u,$,f,p,_=N;i.$$.on_destroy.push(()=>_());const C=kt("chatModel");Tt(i,C,Y=>n(20,c=Y));const M=kt("agentConversationModel"),T=kt("checkpointStore"),E=kt(ho.key),{targetCheckpointSummary:R,totalCheckpointCount:P,targetCheckpoint:J,targetCheckpointHasChanges:K}=T;Tt(i,R,Y=>n(21,a=Y)),Tt(i,P,Y=>n(4,u=Y)),Tt(i,J,Y=>n(26,s=Y)),Tt(i,K,Y=>n(7,p=Y));const{isCurrConversationAgentic:et}=M;Tt(i,et,Y=>n(3,l=Y));const{canShowTaskList:U}=E;function G(Y){C.extensionClient.openFile({repoRoot:Y.rootPath,pathName:Y.relPath,allowOutOfWorkspace:!0})}function nt(Y){const Z=M.getBaselineTimestamp();C.extensionClient.showAgentReview(Y,Z,s==null?void 0:s.toTimestamp,!1,!0)}function X(Y){const Z=M.getBaselineTimestamp();T.revertDocumentToTimestamp(Y,Z)}return Tt(i,U,Y=>n(5,$=Y)),i.$$.update=()=>{2097152&i.$$.dirty[0]&&n(0,e=a.filter(Y=>Y.changesSummary&&(Y.changesSummary.totalAddedLines>0||Y.changesSummary.totalRemovedLines>0))),1&i.$$.dirty[0]&&n(2,o=e.reduce((Y,Z)=>{var it,rt;return Y.totalAddedLines+=((it=Z.changesSummary)==null?void 0:it.totalAddedLines)??0,Y.totalRemovedLines+=((rt=Z.changesSummary)==null?void 0:rt.totalRemovedLines)??0,Y},{totalAddedLines:0,totalRemovedLines:0})),1048576&i.$$.dirty[0]&&(n(1,r=c.isPanelCollapsed),_(),_=ie(r,Y=>n(6,f=Y)))},[e,r,o,l,u,$,f,p,C,R,P,J,K,et,U,G,nt,X,async function(){await T.rejectAll()},async function(){await T.acceptAll()},c,a,Y=>G(Y.qualifiedPathName),Y=>nt(Y.qualifiedPathName),Y=>X(Y.qualifiedPathName),function(Y){f=Y,r.set(f)}]}class M8 extends ut{constructor(t){super(),dt(this,t,A8,C8,lt,{},null,[-1,-1])}}function k8(i){let t,n,e=[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 128 512"},i[0]],o={};for(let r=0;r<e.length;r+=1)o=Et(o,e[r]);return{c(){t=oe("svg"),n=new ln(!0),this.h()},l(r){t=un(r,"svg",{xmlns:!0,"data-ds-icon":!0,viewBox:!0});var s=dn(t);n=$n(s,!0),s.forEach(x),this.h()},h(){n.a=null,ue(t,o)},m(r,s){mn(r,t,s),n.m('<!--! Font Awesome Pro 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2024 Fonticons, Inc.--><path d="M64 368a48 48 0 1 0 0 96 48 48 0 1 0 0-96m0-160a48 48 0 1 0 0 96 48 48 0 1 0 0-96m48-112a48 48 0 1 0-96 0 48 48 0 1 0 96 0"/>',t)},p(r,[s]){ue(t,o=De(e,[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 128 512"},1&s&&r[0]]))},i:N,o:N,d(r){r&&x(t)}}}function S8(i,t,n){return i.$$set=e=>{n(0,t=Et(Et({},t),ae(e)))},[t=ae(t)]}class T8 extends ut{constructor(t){super(),dt(this,t,S8,k8,lt,{})}}function E8(i){let t,n,e=[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 512 512"},i[0]],o={};for(let r=0;r<e.length;r+=1)o=Et(o,e[r]);return{c(){t=oe("svg"),n=new ln(!0),this.h()},l(r){t=un(r,"svg",{xmlns:!0,"data-ds-icon":!0,viewBox:!0});var s=dn(t);n=$n(s,!0),s.forEach(x),this.h()},h(){n.a=null,ue(t,o)},m(r,s){mn(r,t,s),n.m('<!--! Font Awesome Pro 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2024 Fonticons, Inc.--><path d="M448 464H192c-8.8 0-16-7.2-16-16v-80h-48v80c0 35.3 28.7 64 64 64h256c35.3 0 64-28.7 64-64V154.5c0-17-6.7-33.3-18.7-45.3l-90.6-90.5C390.7 6.7 374.5 0 357.5 0H192c-35.3 0-64 28.7-64 64v192h48V64c0-8.8 7.2-16 16-16h160v80c0 17.7 14.3 32 32 32h80v288c0 8.8-7.2 16-16 16M297 215c-9.4-9.4-24.6-9.4-33.9 0s-9.4 24.6 0 33.9l39 39L24 288c-13.3 0-24 10.7-24 24s10.7 24 24 24h278.1l-39 39c-9.4 9.4-9.4 24.6 0 33.9s24.6 9.4 33.9 0l80-80c9.4-9.4 9.4-24.6 0-33.9z"/>',t)},p(r,[s]){ue(t,o=De(e,[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 512 512"},1&s&&r[0]]))},i:N,o:N,d(r){r&&x(t)}}}function I8(i,t,n){return i.$$set=e=>{n(0,t=Et(Et({},t),ae(e)))},[t=ae(t)]}class L8 extends ut{constructor(t){super(),dt(this,t,I8,E8,lt,{})}}function R8(i){let t,n,e=[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 576 512"},i[0]],o={};for(let r=0;r<e.length;r+=1)o=Et(o,e[r]);return{c(){t=oe("svg"),n=new ln(!0),this.h()},l(r){t=un(r,"svg",{xmlns:!0,"data-ds-icon":!0,viewBox:!0});var s=dn(t);n=$n(s,!0),s.forEach(x),this.h()},h(){n.a=null,ue(t,o)},m(r,s){mn(r,t,s),n.m('<!--! Font Awesome Pro 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2024 Fonticons, Inc.--><path d="M336 448c0 8.8-7.2 16-16 16H64c-8.8 0-16-7.2-16-16V64c0-8.8 7.2-16 16-16h160v80c0 17.7 14.3 32 32 32h80v96h48V154.5c0-17-6.7-33.3-18.7-45.3l-90.6-90.5C262.7 6.7 246.5 0 229.5 0H64C28.7 0 0 28.7 0 64v384c0 35.3 28.7 64 64 64h256c35.3 0 64-28.7 64-64v-80h-48zm153-233c-9.4-9.4-24.6-9.4-33.9 0s-9.4 24.6 0 33.9l39 39-278.1.1c-13.3 0-24 10.7-24 24s10.7 24 24 24h278.1l-39 39c-9.4 9.4-9.4 24.6 0 33.9s24.6 9.4 33.9 0l80-80c9.4-9.4 9.4-24.6 0-33.9z"/>',t)},p(r,[s]){ue(t,o=De(e,[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 576 512"},1&s&&r[0]]))},i:N,o:N,d(r){r&&x(t)}}}function D8(i,t,n){return i.$$set=e=>{n(0,t=Et(Et({},t),ae(e)))},[t=ae(t)]}class P8 extends ut{constructor(t){super(),dt(this,t,D8,R8,lt,{})}}function N8(i){let t,n,e=[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 512 512"},i[0]],o={};for(let r=0;r<e.length;r+=1)o=Et(o,e[r]);return{c(){t=oe("svg"),n=new ln(!0),this.h()},l(r){t=un(r,"svg",{xmlns:!0,"data-ds-icon":!0,viewBox:!0});var s=dn(t);n=$n(s,!0),s.forEach(x),this.h()},h(){n.a=null,ue(t,o)},m(r,s){mn(r,t,s),n.m('<!--! Font Awesome Pro 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2024 Fonticons, Inc.--><path d="M208 416c0-26.5-21.5-48-48-48H64c-8.8 0-16-7.2-16-16V64c0-8.8 7.2-16 16-16h384c8.8 0 16 7.2 16 16v288c0 8.8-7.2 16-16 16H309.3c-10.4 0-20.5 3.4-28.8 9.6L208 432zm-.2 76.2.2-.2 101.3-76H448c35.3 0 64-28.7 64-64V64c0-35.3-28.7-64-64-64H64C28.7 0 0 28.7 0 64v288c0 35.3 28.7 64 64 64h96v80c0 6.1 3.4 11.6 8.8 14.3s11.9 2.1 16.8-1.5l17.1-12.8zM232 296c0 13.3 10.7 24 24 24s24-10.7 24-24v-64h64c13.3 0 24-10.7 24-24s-10.7-24-24-24h-64v-64c0-13.3-10.7-24-24-24s-24 10.7-24 24v64h-64c-13.3 0-24 10.7-24 24s10.7 24 24 24h64z"/>',t)},p(r,[s]){ue(t,o=De(e,[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 512 512"},1&s&&r[0]]))},i:N,o:N,d(r){r&&x(t)}}}function F8(i,t,n){return i.$$set=e=>{n(0,t=Et(Et({},t),ae(e)))},[t=ae(t)]}class Vm extends ut{constructor(t){super(),dt(this,t,F8,N8,lt,{})}}function O8(i){let t,n;return t=new T8({}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function z8(i){let t,n;return t=new ro({props:{size:1}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function B8(i){let t,n,e,o;const r=[z8,O8],s=[];function c(a,l){return a[1]?0:1}return t=c(i),n=s[t]=r[t](i),{c(){n.c(),e=ft()},m(a,l){s[t].m(a,l),b(a,e,l),o=!0},p(a,l){let u=t;t=c(a),t!==u&&(q(),m(s[u],1,1,()=>{s[u]=null}),j(),n=s[t],n||(n=s[t]=r[t](a),n.c()),d(n,1),n.m(e.parentNode,e))},i(a){o||(d(n),o=!0)},o(a){m(n),o=!1},d(a){a&&x(e),s[t].d(a)}}}function H8(i){let t,n;return t=new fe({props:{size:1,variant:"ghost-block",color:"neutral",disabled:i[1],$$slots:{default:[B8]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};2&o&&(r.disabled=e[1]),2050&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function U8(i){let t,n;return t=new zt({props:{content:"More Actions",triggerOn:[te.Hover],$$slots:{default:[H8]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};2050&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function q8(i){let t;return{c(){t=V("Import/Export")},m(n,e){b(n,t,e)},d(n){n&&x(t)}}}function j8(i){let t;return{c(){t=V("Export to Markdown")},m(n,e){b(n,t,e)},d(n){n&&x(t)}}}function W8(i){let t,n;return t=new P8({props:{slot:"iconLeft"}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p:N,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function V8(i){let t;return{c(){t=V("Import from Markdown")},m(n,e){b(n,t,e)},d(n){n&&x(t)}}}function G8(i){let t,n;return t=new L8({props:{slot:"iconLeft"}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p:N,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function K8(i){let t;return{c(){t=V("Continue in New Chat")},m(n,e){b(n,t,e)},d(n){n&&x(t)}}}function Y8(i){let t,n;return t=new Vm({props:{slot:"iconLeft"}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p:N,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function X8(i){let t,n,e,o,r,s,c,a;return t=new xt.Label({props:{$$slots:{default:[q8]},$$scope:{ctx:i}}}),e=new xt.Item({props:{onSelect:i[4],disabled:i[1],$$slots:{iconLeft:[W8],default:[j8]},$$scope:{ctx:i}}}),r=new xt.Item({props:{onSelect:i[5],disabled:i[1],$$slots:{iconLeft:[G8],default:[V8]},$$scope:{ctx:i}}}),c=new xt.Item({props:{onSelect:i[6],$$slots:{iconLeft:[Y8],default:[K8]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment),n=H(),v(e.$$.fragment),o=H(),v(r.$$.fragment),s=H(),v(c.$$.fragment)},m(l,u){w(t,l,u),b(l,n,u),w(e,l,u),b(l,o,u),w(r,l,u),b(l,s,u),w(c,l,u),a=!0},p(l,u){const $={};2048&u&&($.$$scope={dirty:u,ctx:l}),t.$set($);const f={};2&u&&(f.disabled=l[1]),2048&u&&(f.$$scope={dirty:u,ctx:l}),e.$set(f);const p={};2&u&&(p.disabled=l[1]),2048&u&&(p.$$scope={dirty:u,ctx:l}),r.$set(p);const _={};2048&u&&(_.$$scope={dirty:u,ctx:l}),c.$set(_)},i(l){a||(d(t.$$.fragment,l),d(e.$$.fragment,l),d(r.$$.fragment,l),d(c.$$.fragment,l),a=!0)},o(l){m(t.$$.fragment,l),m(e.$$.fragment,l),m(r.$$.fragment,l),m(c.$$.fragment,l),a=!1},d(l){l&&(x(n),x(o),x(s)),y(t,l),y(e,l),y(r,l),y(c,l)}}}function Z8(i){let t,n,e,o;return t=new xt.Trigger({props:{$$slots:{default:[U8]},$$scope:{ctx:i}}}),e=new xt.Content({props:{size:1,side:"bottom",align:"end",$$slots:{default:[X8]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment),n=H(),v(e.$$.fragment)},m(r,s){w(t,r,s),b(r,n,s),w(e,r,s),o=!0},p(r,s){const c={};2050&s&&(c.$$scope={dirty:s,ctx:r}),t.$set(c);const a={};2050&s&&(a.$$scope={dirty:s,ctx:r}),e.$set(a)},i(r){o||(d(t.$$.fragment,r),d(e.$$.fragment,r),o=!0)},o(r){m(t.$$.fragment,r),m(e.$$.fragment,r),o=!1},d(r){r&&x(n),y(t,r),y(e,r)}}}function J8(i){let t,n,e;function o(s){i[7](s)}let r={$$slots:{default:[Z8]},$$scope:{ctx:i}};return i[0]!==void 0&&(r.requestClose=i[0]),t=new xt.Root({props:r}),Qt.push(()=>Ne(t,"requestClose",o)),{c(){v(t.$$.fragment)},m(s,c){w(t,s,c),e=!0},p(s,[c]){const a={};2050&c&&(a.$$scope={dirty:c,ctx:s}),!n&&1&c&&(n=!0,a.requestClose=s[0],Be(()=>n=!1)),t.$set(a)},i(s){e||(d(t.$$.fragment,s),e=!0)},o(s){m(t.$$.fragment,s),e=!1},d(s){y(t,s)}}}function Q8(i,t,n){let e,o;const r=kt(ho.key),{isImportingExporting:s,rootTask:c}=r;Tt(i,s,u=>n(1,o=u)),Tt(i,c,u=>n(8,e=u));const a=kt("chatModel");let l;return[l,o,s,c,async function(){o||(await r.exportTasksToMarkdown(),l==null||l())},async function(){o||(await r.importTasksFromMarkdown(),l==null||l())},async function(){if(!e)return;const u=a.currentConversationId,$=await r.cloneHydratedTask(e);u===a.currentConversationId&&$&&await a.setCurrentConversation(void 0,!0,{newTaskUuid:$.uuid}),l==null||l()},function(u){l=u,n(0,l)}]}class t_ extends ut{constructor(t){super(),dt(this,t,Q8,J8,lt,{})}}function e_(i){let t,n,e=[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 512 512"},i[0]],o={};for(let r=0;r<e.length;r+=1)o=Et(o,e[r]);return{c(){t=oe("svg"),n=new ln(!0),this.h()},l(r){t=un(r,"svg",{xmlns:!0,"data-ds-icon":!0,viewBox:!0});var s=dn(t);n=$n(s,!0),s.forEach(x),this.h()},h(){n.a=null,ue(t,o)},m(r,s){mn(r,t,s),n.m('<!--! Font Awesome Pro 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2024 Fonticons, Inc.--><path d="M41.2 64C18.5 64 0 82.5 0 105.2c0 10.4 3.9 20.4 11 28.1l93 100.1v126c0 13.4 6.7 26 18 33.4l75.5 49.8c5.3 3.5 11.6 5.4 18 5.4 18 0 32.6-14.6 32.6-32.6v-182l93-100.1c7.1-7.6 11-17.6 11-28.1C352 82.5 333.5 64 310.8 64zm104.4 143.7L56.8 112h238.5l-88.8 95.7c-4.1 4.4-6.4 10.3-6.4 16.3v162.8l-48-31.7L152 224c0-6.1-2.3-11.9-6.4-16.3M344 392c-13.3 0-24 10.7-24 24s10.7 24 24 24h144c13.3 0 24-10.7 24-24s-10.7-24-24-24zm-24-136c0 13.3 10.7 24 24 24h144c13.3 0 24-10.7 24-24s-10.7-24-24-24H344c-13.3 0-24 10.7-24 24m88-184c-13.3 0-24 10.7-24 24s10.7 24 24 24h80c13.3 0 24-10.7 24-24s-10.7-24-24-24z"/>',t)},p(r,[s]){ue(t,o=De(e,[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 512 512"},1&s&&r[0]]))},i:N,o:N,d(r){r&&x(t)}}}function n_(i,t,n){return i.$$set=e=>{n(0,t=Et(Et({},t),ae(e)))},[t=ae(t)]}class o_ extends ut{constructor(t){super(),dt(this,t,n_,e_,lt,{})}}function r_(i){let t,n,e;return n=new Ps({}),{c(){t=L("span"),v(n.$$.fragment),A(t,"class","c-task-check-icon svelte-9rlaen")},m(o,r){b(o,t,r),w(n,t,null),e=!0},p:N,i(o){e||(d(n.$$.fragment,o),e=!0)},o(o){m(n.$$.fragment,o),e=!1},d(o){o&&x(t),y(n)}}}class i_ extends ut{constructor(t){super(),dt(this,t,null,r_,lt,{})}}function rd(i,t,n){const e=i.slice();e[11]=t[n];const o=e[0].has(e[11].value);return e[12]=o,e}function s_(i){let t,n;return t=new o_({}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function a_(i){let t,n;return t=new fe({props:{size:1,variant:i[3]?"soft":"ghost-block",color:i[3]?"accent":"neutral",$$slots:{default:[s_]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};8&o&&(r.variant=e[3]?"soft":"ghost-block"),8&o&&(r.color=e[3]?"accent":"neutral"),32768&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function c_(i){let t,n;return t=new zt({props:{content:"Filter Tasks",triggerOn:[te.Hover],$$slots:{default:[a_]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};32776&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function l_(i){let t;return{c(){t=V("Select All")},m(n,e){b(n,t,e)},d(n){n&&x(t)}}}function u_(i){let t;return{c(){t=V("Clear All")},m(n,e){b(n,t,e)},d(n){n&&x(t)}}}function d_(i){let t,n,e,o,r=i[11].label+"",s=i[11].count+"";return{c(){t=V(r),n=V(" ("),e=V(s),o=V(")")},m(c,a){b(c,t,a),b(c,n,a),b(c,e,a),b(c,o,a)},p(c,a){2&a&&r!==(r=c[11].label+"")&&bt(t,r),2&a&&s!==(s=c[11].count+"")&&bt(e,s)},d(c){c&&(x(t),x(n),x(e),x(o))}}}function $_(i){let t,n,e;return t=new Wt({props:{size:1,color:i[12]?"neutral":"secondary",$$slots:{default:[d_]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment),n=H()},m(o,r){w(t,o,r),b(o,n,r),e=!0},p(o,r){const s={};3&r&&(s.color=o[12]?"neutral":"secondary"),32770&r&&(s.$$scope={dirty:r,ctx:o}),t.$set(s)},i(o){e||(d(t.$$.fragment,o),e=!0)},o(o){m(t.$$.fragment,o),e=!1},d(o){o&&x(n),y(t,o)}}}function m_(i){let t,n;return t=new H1({props:{taskState:i[11].value,size:1}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};2&o&&(r.taskState=e[11].value),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function f_(i){let t,n;return t=new i_({}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p:N,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function p_(i){let t,n,e,o;const r=[f_,m_],s=[];function c(a,l){return a[12]?0:1}return t=c(i),n=s[t]=r[t](i),{c(){n.c(),e=H()},m(a,l){s[t].m(a,l),b(a,e,l),o=!0},p(a,l){let u=t;t=c(a),t===u?s[t].p(a,l):(q(),m(s[u],1,1,()=>{s[u]=null}),j(),n=s[t],n?n.p(a,l):(n=s[t]=r[t](a),n.c()),d(n,1),n.m(e.parentNode,e))},i(a){o||(d(n),o=!0)},o(a){m(n),o=!1},d(a){a&&x(e),s[t].d(a)}}}function id(i){let t,n;function e(){return i[9](i[11])}return t=new xt.Item({props:{onSelect:e,$$slots:{iconLeft:[p_],default:[$_]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(o,r){w(t,o,r),n=!0},p(o,r){i=o;const s={};2&r&&(s.onSelect=e),32771&r&&(s.$$scope={dirty:r,ctx:i}),t.$set(s)},i(o){n||(d(t.$$.fragment,o),n=!0)},o(o){m(t.$$.fragment,o),n=!1},d(o){y(t,o)}}}function g_(i){let t,n,e,o,r,s,c,a;t=new xt.Item({props:{onSelect:i[7],$$slots:{default:[l_]},$$scope:{ctx:i}}}),e=new xt.Item({props:{onSelect:i[8],$$slots:{default:[u_]},$$scope:{ctx:i}}}),r=new xt.Separator({});let l=se(i[1]),u=[];for(let f=0;f<l.length;f+=1)u[f]=id(rd(i,l,f));const $=f=>m(u[f],1,1,()=>{u[f]=null});return{c(){v(t.$$.fragment),n=H(),v(e.$$.fragment),o=H(),v(r.$$.fragment),s=H();for(let f=0;f<u.length;f+=1)u[f].c();c=ft()},m(f,p){w(t,f,p),b(f,n,p),w(e,f,p),b(f,o,p),w(r,f,p),b(f,s,p);for(let _=0;_<u.length;_+=1)u[_]&&u[_].m(f,p);b(f,c,p),a=!0},p(f,p){const _={};32768&p&&(_.$$scope={dirty:p,ctx:f}),t.$set(_);const C={};if(32768&p&&(C.$$scope={dirty:p,ctx:f}),e.$set(C),19&p){let M;for(l=se(f[1]),M=0;M<l.length;M+=1){const T=rd(f,l,M);u[M]?(u[M].p(T,p),d(u[M],1)):(u[M]=id(T),u[M].c(),d(u[M],1),u[M].m(c.parentNode,c))}for(q(),M=l.length;M<u.length;M+=1)$(M);j()}},i(f){if(!a){d(t.$$.fragment,f),d(e.$$.fragment,f),d(r.$$.fragment,f);for(let p=0;p<l.length;p+=1)d(u[p]);a=!0}},o(f){m(t.$$.fragment,f),m(e.$$.fragment,f),m(r.$$.fragment,f),u=u.filter(Boolean);for(let p=0;p<u.length;p+=1)m(u[p]);a=!1},d(f){f&&(x(n),x(o),x(s),x(c)),y(t,f),y(e,f),y(r,f),bn(u,f)}}}function h_(i){let t,n,e,o;return t=new xt.Trigger({props:{$$slots:{default:[c_]},$$scope:{ctx:i}}}),e=new xt.Content({props:{side:"bottom",align:"start",size:1,$$slots:{default:[g_]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment),n=H(),v(e.$$.fragment)},m(r,s){w(t,r,s),b(r,n,s),w(e,r,s),o=!0},p(r,s){const c={};32776&s&&(c.$$scope={dirty:s,ctx:r}),t.$set(c);const a={};32771&s&&(a.$$scope={dirty:s,ctx:r}),e.$set(a)},i(r){o||(d(t.$$.fragment,r),d(e.$$.fragment,r),o=!0)},o(r){m(t.$$.fragment,r),m(e.$$.fragment,r),o=!1},d(r){r&&x(n),y(t,r),y(e,r)}}}function v_(i){let t,n,e;function o(s){i[10](s)}let r={$$slots:{default:[h_]},$$scope:{ctx:i}};return i[2]!==void 0&&(r.requestClose=i[2]),t=new xt.Root({props:r}),Qt.push(()=>Ne(t,"requestClose",o)),{c(){v(t.$$.fragment)},m(s,c){w(t,s,c),e=!0},p(s,[c]){const a={};32779&c&&(a.$$scope={dirty:c,ctx:s}),!n&&4&c&&(n=!0,a.requestClose=s[2],Be(()=>n=!1)),t.$set(a)},i(s){e||(d(t.$$.fragment,s),e=!0)},o(s){m(t.$$.fragment,s),e=!1},d(s){y(t,s)}}}function w_(i,t,n){let e,o,{taskFilters:r=[]}=t,{activeTaskFilter:s=new Set}=t;function c(u){const $=new Set(s);$.has(u)?$.delete(u):$.add(u),n(0,s=$)}function a(){const u=r.map($=>$.value);n(0,s=new Set(u))}function l(){n(0,s=new Set)}return i.$$set=u=>{"taskFilters"in u&&n(1,r=u.taskFilters),"activeTaskFilter"in u&&n(0,s=u.activeTaskFilter)},i.$$.update=()=>{3&i.$$.dirty&&n(3,e=s.size===0||s.size<r.length)},[s,r,o,e,c,a,l,()=>a(),()=>l(),u=>{c(u.value)},function(u){o=u,n(2,o)}]}class y_ extends ut{constructor(t){super(),dt(this,t,w_,v_,lt,{taskFilters:1,activeTaskFilter:0})}}function sd(i){let t,n,e,o,r,s=i[4]&&i[4].total>0&&ad(i);const c=[A_,C_,__],a=[];function l(u,$){return u[5]?0:u[4]&&u[4].completed===u[4].total&&u[4].total>0?1:u[3]&&u[3].name?2:-1}return~(e=l(i))&&(o=a[e]=c[e](i)),{c(){t=L("div"),s&&s.c(),n=H(),o&&o.c(),A(t,"class","c-task-list-header__status svelte-qt9z9m")},m(u,$){b(u,t,$),s&&s.m(t,null),O(t,n),~e&&a[e].m(t,null),r=!0},p(u,$){u[4]&&u[4].total>0?s?(s.p(u,$),16&$&&d(s,1)):(s=ad(u),s.c(),d(s,1),s.m(t,n)):s&&(q(),m(s,1,1,()=>{s=null}),j());let f=e;e=l(u),e===f?~e&&a[e].p(u,$):(o&&(q(),m(a[f],1,1,()=>{a[f]=null}),j()),~e?(o=a[e],o?o.p(u,$):(o=a[e]=c[e](u),o.c()),d(o,1),o.m(t,null)):o=null)},i(u){r||(d(s),d(o),r=!0)},o(u){m(s),m(o),r=!1},d(u){u&&x(t),s&&s.d(),~e&&a[e].d()}}}function ad(i){let t,n;return t=new zt({props:{triggerOn:[te.Hover],content:"Completed "+i[4].completed+" of "+i[4].total+" tasks",$$slots:{default:[b_]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};16&o&&(r.content="Completed "+e[4].completed+" of "+e[4].total+" tasks"),131088&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function x_(i){let t,n,e,o=i[4].completed+"",r=i[4].total+"";return{c(){t=V(o),n=V("/"),e=V(r)},m(s,c){b(s,t,c),b(s,n,c),b(s,e,c)},p(s,c){16&c&&o!==(o=s[4].completed+"")&&bt(t,o),16&c&&r!==(r=s[4].total+"")&&bt(e,r)},d(s){s&&(x(t),x(n),x(e))}}}function b_(i){let t,n;return t=new U1({props:{color:i[4].completed===i[4].total?"success":"info",size:1,$$slots:{default:[x_]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};16&o&&(r.color=e[4].completed===e[4].total?"success":"info"),131088&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function __(i){let t,n;return t=new Wt({props:{size:1,color:"neutral",class:"c-task-list-header__task-name",$$slots:{default:[M_]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};131080&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function C_(i){let t,n;return t=new Wt({props:{size:1,color:"primary",class:"c-task-list-header__task-name",$$slots:{default:[k_]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};131072&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function A_(i){let t,n;return t=new Wt({props:{size:1,color:"primary",class:"c-task-list-header__task-name",$$slots:{default:[S_]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};131104&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function M_(i){let t,n=i[3].name+"";return{c(){t=V(n)},m(e,o){b(e,t,o)},p(e,o){8&o&&n!==(n=e[3].name+"")&&bt(t,n)},d(e){e&&x(t)}}}function k_(i){let t;return{c(){t=V("All tasks complete")},m(n,e){b(n,t,e)},d(n){n&&x(t)}}}function S_(i){let t,n=(i[5].name||"Untitled Task")+"";return{c(){t=V(n)},m(e,o){b(e,t,o)},p(e,o){32&o&&n!==(n=(e[5].name||"Untitled Task")+"")&&bt(t,n)},d(e){e&&x(t)}}}function T_(i){let t,n;return t=new df({}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function E_(i){let t,n;return t=new fe({props:{size:1,variant:"ghost-block",color:"neutral",disabled:!1,$$slots:{default:[T_]},$$scope:{ctx:i}}}),t.$on("click",i[15]),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};131072&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function I_(i){let t,n;return t=new As({}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function L_(i){let t,n;return t=new fe({props:{size:1,variant:"ghost-block",color:"neutral",disabled:!i[3],$$slots:{default:[I_]},$$scope:{ctx:i}}}),t.$on("click",i[10]),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};8&o&&(r.disabled=!e[3]),131072&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function R_(i){let t,n,e,o,r,s,c,a,l,u,$,f,p,_,C,M,T,E,R;o=new am({}),c=new Km({});let P=i[1]&&sd(i);function J(et){i[16](et)}$=new zt({props:{content:"Run All Tasks",triggerOn:[te.Hover],$$slots:{default:[E_]},$$scope:{ctx:i}}}),p=new zt({props:{content:"Add New Task",triggerOn:[te.Hover],$$slots:{default:[L_]},$$scope:{ctx:i}}});let K={taskFilters:i[2]};return i[0]!==void 0&&(K.activeTaskFilter=i[0]),C=new y_({props:K}),Qt.push(()=>Ne(C,"activeTaskFilter",J)),E=new t_({}),{c(){t=L("div"),n=L("div"),e=L("div"),v(o.$$.fragment),r=H(),s=L("div"),v(c.$$.fragment),a=H(),P&&P.c(),l=H(),u=L("div"),v($.$$.fragment),f=H(),v(p.$$.fragment),_=H(),v(C.$$.fragment),T=H(),v(E.$$.fragment),A(e,"class","c-task-list-header__collapse-btn svelte-qt9z9m"),A(s,"class","c-task-list-header__switch-btn svelte-qt9z9m"),A(n,"class","c-task-list-header__content svelte-qt9z9m"),A(u,"class","c-task-list-header__actions svelte-qt9z9m"),A(t,"class","c-task-list-header svelte-qt9z9m")},m(et,U){b(et,t,U),O(t,n),O(n,e),w(o,e,null),O(n,r),O(n,s),w(c,s,null),O(n,a),P&&P.m(n,null),O(t,l),O(t,u),w($,u,null),O(u,f),w(p,u,null),O(u,_),w(C,u,null),O(u,T),w(E,u,null),R=!0},p(et,[U]){et[1]?P?(P.p(et,U),2&U&&d(P,1)):(P=sd(et),P.c(),d(P,1),P.m(n,null)):P&&(q(),m(P,1,1,()=>{P=null}),j());const G={};131072&U&&(G.$$scope={dirty:U,ctx:et}),$.$set(G);const nt={};131080&U&&(nt.$$scope={dirty:U,ctx:et}),p.$set(nt);const X={};4&U&&(X.taskFilters=et[2]),!M&&1&U&&(M=!0,X.activeTaskFilter=et[0],Be(()=>M=!1)),C.$set(X)},i(et){R||(d(o.$$.fragment,et),d(c.$$.fragment,et),d(P),d($.$$.fragment,et),d(p.$$.fragment,et),d(C.$$.fragment,et),d(E.$$.fragment,et),R=!0)},o(et){m(o.$$.fragment,et),m(c.$$.fragment,et),m(P),m($.$$.fragment,et),m(p.$$.fragment,et),m(C.$$.fragment,et),m(E.$$.fragment,et),R=!1},d(et){et&&x(t),y(o),y(c),P&&P.d(),y($),y(p),y(C),y(E)}}}function D_(i,t,n){let e,o,r,s,{notStartedTasksCount:c=0}=t,{inProgressTasksCount:a=0}=t,{completedTasksCount:l=0}=t,{cancelledTasksCount:u=0}=t,{collapsed:$=!1}=t;const f=kt(ho.key),{rootTask:p,activeTask:_,taskProgress:C}=f;Tt(i,p,T=>n(3,o=T)),Tt(i,_,T=>n(5,s=T)),Tt(i,C,T=>n(4,r=T));let{activeTaskFilter:M=new Set}=t;return i.$$set=T=>{"notStartedTasksCount"in T&&n(11,c=T.notStartedTasksCount),"inProgressTasksCount"in T&&n(12,a=T.inProgressTasksCount),"completedTasksCount"in T&&n(13,l=T.completedTasksCount),"cancelledTasksCount"in T&&n(14,u=T.cancelledTasksCount),"collapsed"in T&&n(1,$=T.collapsed),"activeTaskFilter"in T&&n(0,M=T.activeTaskFilter)},i.$$.update=()=>{30720&i.$$.dirty&&n(2,e=[{value:Yn.NOT_STARTED,label:pi(Yn.NOT_STARTED),count:c},{value:Yn.IN_PROGRESS,label:pi(Yn.IN_PROGRESS),count:a},{value:Yn.COMPLETE,label:pi(Yn.COMPLETE),count:l},{value:Yn.CANCELLED,label:pi(Yn.CANCELLED),count:u}])},[M,$,e,o,r,s,f,p,_,C,async function(){if(o){const T=await f.createTask("","",o.uuid);setTimeout(()=>{const E=document.getElementById(`task-${T}`),R=E==null?void 0:E.querySelector(".c-task-tree-item__name-editable"),P=R==null?void 0:R.querySelector("input");P==null||P.focus()},100)}},c,a,l,u,()=>f.runAllTasks(),function(T){M=T,n(0,M)}]}class P_ extends ut{constructor(t){super(),dt(this,t,D_,R_,lt,{notStartedTasksCount:11,inProgressTasksCount:12,completedTasksCount:13,cancelledTasksCount:14,collapsed:1,activeTaskFilter:0})}}function cd(i){let t,n,e,o;function r(c){i[17](c)}let s={class:"c-task-list-container__block-container",$$slots:{header:[B_],default:[z_]},$$scope:{ctx:i}};return i[9]!==void 0&&(s.collapsed=i[9]),n=new Bs({props:s}),Qt.push(()=>Ne(n,"collapsed",r)),{c(){t=L("div"),v(n.$$.fragment),A(t,"class","c-task-list-container svelte-yamkbz")},m(c,a){b(c,t,a),w(n,t,null),o=!0},p(c,a){const l={};1049213&a&&(l.$$scope={dirty:a,ctx:c}),!e&&512&a&&(e=!0,l.collapsed=c[9],Be(()=>e=!1)),n.$set(l)},i(c){o||(d(n.$$.fragment,c),o=!0)},o(c){m(n.$$.fragment,c),o=!1},d(c){c&&x(t),y(n)}}}function N_(i){let t,n,e;return n=new Wt({props:{size:1,color:"neutral",$$slots:{default:[O_]},$$scope:{ctx:i}}}),{c(){t=L("div"),v(n.$$.fragment),A(t,"class","c-tasks-list c-tasks-list--empty svelte-yamkbz")},m(o,r){b(o,t,r),w(n,t,null),e=!0},p(o,r){const s={};1048576&r&&(s.$$scope={dirty:r,ctx:o}),n.$set(s)},i(o){e||(d(n.$$.fragment,o),e=!0)},o(o){m(n.$$.fragment,o),e=!1},d(o){o&&x(t),y(n)}}}function F_(i){let t,n,e;return n=new j1({props:{task:i[6],taskStore:i[11],editable:!0}}),{c(){t=L("div"),v(n.$$.fragment),A(t,"class","c-tasks-list svelte-yamkbz")},m(o,r){b(o,t,r),w(n,t,null),e=!0},p(o,r){const s={};64&r&&(s.task=o[6]),n.$set(s)},i(o){e||(d(n.$$.fragment,o),e=!0)},o(o){m(n.$$.fragment,o),e=!1},d(o){o&&x(t),y(n)}}}function O_(i){let t;return{c(){t=V("No tasks to show")},m(n,e){b(n,t,e)},d(n){n&&x(t)}}}function z_(i){let t,n,e,o;const r=[F_,N_],s=[];function c(a,l){var u,$;return(u=a[6])!=null&&u.isVisible&&(($=a[6].subTasksData)!=null&&$.length)?0:1}return t=c(i),n=s[t]=r[t](i),{c(){n.c(),e=ft()},m(a,l){s[t].m(a,l),b(a,e,l),o=!0},p(a,l){let u=t;t=c(a),t===u?s[t].p(a,l):(q(),m(s[u],1,1,()=>{s[u]=null}),j(),n=s[t],n?n.p(a,l):(n=s[t]=r[t](a),n.c()),d(n,1),n.m(e.parentNode,e))},i(a){o||(d(n),o=!0)},o(a){m(n),o=!1},d(a){a&&x(e),s[t].d(a)}}}function B_(i){let t,n,e;function o(s){i[16](s)}let r={notStartedTasksCount:i[5],inProgressTasksCount:i[4],completedTasksCount:i[3],cancelledTasksCount:i[2],collapsed:i[9],slot:"header"};return i[0]!==void 0&&(r.activeTaskFilter=i[0]),t=new P_({props:r}),Qt.push(()=>Ne(t,"activeTaskFilter",o)),{c(){v(t.$$.fragment)},m(s,c){w(t,s,c),e=!0},p(s,c){const a={};32&c&&(a.notStartedTasksCount=s[5]),16&c&&(a.inProgressTasksCount=s[4]),8&c&&(a.completedTasksCount=s[3]),4&c&&(a.cancelledTasksCount=s[2]),512&c&&(a.collapsed=s[9]),!n&&1&c&&(n=!0,a.activeTaskFilter=s[0],Be(()=>n=!1)),t.$set(a)},i(s){e||(d(t.$$.fragment,s),e=!0)},o(s){m(t.$$.fragment,s),e=!1},d(s){y(t,s)}}}function H_(i){let t,n,e=i[8]&&i[1]&&cd(i);return{c(){e&&e.c(),t=ft()},m(o,r){e&&e.m(o,r),b(o,t,r),n=!0},p(o,[r]){o[8]&&o[1]?e?(e.p(o,r),258&r&&d(e,1)):(e=cd(o),e.c(),d(e,1),e.m(t.parentNode,t)):e&&(q(),m(e,1,1,()=>{e=null}),j())},i(o){n||(d(e),n=!0)},o(o){m(e),n=!1},d(o){o&&x(t),e&&e.d(o)}}}function U_(i,t,n){let e,o,r,s,c,a,l,u,$,f,p,_=N;i.$$.on_destroy.push(()=>_());const C=kt("chatModel");Tt(i,C,K=>n(15,$=K));const M=kt("agentConversationModel"),T=kt(ho.key),{isCurrConversationAgentic:E}=M;Tt(i,E,K=>n(8,f=K));const{rootTask:R}=T;Tt(i,R,K=>n(1,u=K));let P=new Set(Object.values(Yn));function J(K,et=0){let U={notStarted:0,inProgress:0,completed:0,cancelled:0};if(!K)return U;if(et!==0&&(K.state===Yn.NOT_STARTED?U.notStarted++:K.state===Yn.IN_PROGRESS?U.inProgress++:K.state===Yn.COMPLETE?U.completed++:K.state===Yn.CANCELLED&&U.cancelled++),K.subTasksData&&K.subTasksData.length>0)for(const G of K.subTasksData){const nt=J(G,et+1);U.notStarted+=nt.notStarted,U.inProgress+=nt.inProgress,U.completed+=nt.completed,U.cancelled+=nt.cancelled}return U}return i.$$.update=()=>{32768&i.$$.dirty&&(n(7,e=$.isPanelCollapsed),_(),_=ie(e,K=>n(9,p=K))),3&i.$$.dirty&&n(6,o=u?q1(u,P):void 0),2&i.$$.dirty&&n(14,r=J(u)),16384&i.$$.dirty&&n(5,s=r.notStarted),16384&i.$$.dirty&&n(4,c=r.inProgress),16384&i.$$.dirty&&n(3,a=r.completed),16384&i.$$.dirty&&n(2,l=r.cancelled)},[P,u,l,a,c,s,o,e,f,p,C,T,E,R,r,$,function(K){P=K,n(0,P)},function(K){p=K,e.set(p)}]}class q_ extends ut{constructor(t){super(),dt(this,t,U_,H_,lt,{})}}function j_(i){let t,n;return t=new q_({}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function W_(i){let t,n;return t=new M8({}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function V_(i){let t,n,e,o,r;const s=[W_,j_],c=[];function a(l,u){return l[0]===An.agentEdits||!l[1]||l[2].isActive?0:l[0]===An.tasks?1:-1}return~(e=a(i))&&(o=c[e]=s[e](i)),{c(){t=L("div"),n=L("div"),o&&o.c(),A(n,"class","c-swappable-panel__content svelte-fjwpdg"),A(t,"class","c-swappable-panel svelte-fjwpdg")},m(l,u){b(l,t,u),O(t,n),~e&&c[e].m(n,null),r=!0},p(l,[u]){let $=e;e=a(l),e!==$&&(o&&(q(),m(c[$],1,1,()=>{c[$]=null}),j()),~e?(o=c[e],o||(o=c[e]=s[e](l),o.c()),d(o,1),o.m(n,null)):o=null)},i(l){r||(d(o),r=!0)},o(l){m(o),r=!1},d(l){l&&x(t),~e&&c[e].d()}}}var An=(i=>(i.agentEdits="agent_edits",i.tasks="tasks",i))(An||{});const Gm=Symbol("swappable-panel-context");function G_(i,t,n){let e,o,r;const s=kt(ho.key),{canShowTaskList:c}=s;Tt(i,c,f=>n(1,o=f));const a=kt("chatModel"),l=kt("agentConversationModel"),u=kt(Rn.key);Tt(i,u,f=>n(2,r=f));const $=Re(An.agentEdits);return Tt(i,$,f=>n(0,e=f)),zn(Gm,{activePanel:$,togglePanel:()=>{fr($,e=e===An.agentEdits?An.tasks:An.agentEdits,e)}}),so(()=>{const f=[],p=re(a==null?void 0:a.currentConversationModel);return p&&f.push(p.onNewConversation(()=>{re(l==null?void 0:l.isCurrConversationAgentic)&&o&&(fr($,e=An.tasks,e),a.isPanelCollapsed.set(!1))})),f.push(s.onTaskAdded(()=>{o&&(fr($,e=An.tasks,e),a.isPanelCollapsed.set(!1))})),()=>{f.forEach(_=>_==null?void 0:_())}}),[e,o,r,c,u,$]}class K_ extends ut{constructor(t){super(),dt(this,t,G_,V_,lt,{})}}function Y_(i){let t,n,e;return n=new W1({}),{c(){t=L("div"),v(n.$$.fragment),A(t,"class","c-switch-mode-button__content svelte-1t2edyt")},m(o,r){b(o,t,r),w(n,t,null),e=!0},p:N,i(o){e||(d(n.$$.fragment,o),e=!0)},o(o){m(n.$$.fragment,o),e=!1},d(o){o&&x(t),y(n)}}}function X_(i){let t,n,e;return n=new O$({}),{c(){t=L("div"),v(n.$$.fragment),A(t,"class","c-switch-mode-button__content svelte-1t2edyt")},m(o,r){b(o,t,r),w(n,t,null),e=!0},p:N,i(o){e||(d(n.$$.fragment,o),e=!0)},o(o){m(n.$$.fragment,o),e=!1},d(o){o&&x(t),y(n)}}}function Z_(i){let t,n,e,o,r,s;return e=new ve({props:{variant:i[0]===An.tasks?"soft":"ghost",color:i[0]===An.tasks?"accent":"neutral",size:1,class:"c-switch-mode-button__tasks-btn",$$slots:{default:[Y_]},$$scope:{ctx:i}}}),e.$on("click",i[5]),r=new ve({props:{variant:i[0]===An.agentEdits?"soft":"ghost",color:i[0]===An.agentEdits?"accent":"neutral",size:1,class:"c-switch-mode-button__changes-btn",$$slots:{default:[X_]},$$scope:{ctx:i}}}),r.$on("click",i[5]),{c(){t=L("div"),n=L("div"),v(e.$$.fragment),o=H(),v(r.$$.fragment),A(n,"class","c-switch-mode-button__group svelte-1t2edyt"),A(t,"class","c-switch-mode-button svelte-1t2edyt")},m(c,a){b(c,t,a),O(t,n),w(e,n,null),O(n,o),w(r,n,null),s=!0},p(c,a){const l={};1&a&&(l.variant=c[0]===An.tasks?"soft":"ghost"),1&a&&(l.color=c[0]===An.tasks?"accent":"neutral"),64&a&&(l.$$scope={dirty:a,ctx:c}),e.$set(l);const u={};1&a&&(u.variant=c[0]===An.agentEdits?"soft":"ghost"),1&a&&(u.color=c[0]===An.agentEdits?"accent":"neutral"),64&a&&(u.$$scope={dirty:a,ctx:c}),r.$set(u)},i(c){s||(d(e.$$.fragment,c),d(r.$$.fragment,c),s=!0)},o(c){m(e.$$.fragment,c),m(r.$$.fragment,c),s=!1},d(c){c&&x(t),y(e),y(r)}}}function J_(i){let t,n,e=i[2]&&i[3]&&function(o){let r,s;return r=new zt({props:{content:o[1],triggerOn:[te.Hover],side:"top",$$slots:{default:[Z_]},$$scope:{ctx:o}}}),{c(){v(r.$$.fragment)},m(c,a){w(r,c,a),s=!0},p(c,a){const l={};2&a&&(l.content=c[1]),65&a&&(l.$$scope={dirty:a,ctx:c}),r.$set(l)},i(c){s||(d(r.$$.fragment,c),s=!0)},o(c){m(r.$$.fragment,c),s=!1},d(c){y(r,c)}}}(i);return{c(){e&&e.c(),t=ft()},m(o,r){e&&e.m(o,r),b(o,t,r),n=!0},p(o,[r]){o[2]&&o[3]&&e.p(o,r)},i(o){n||(d(e),n=!0)},o(o){m(e),n=!1},d(o){o&&x(t),e&&e.d(o)}}}function Q_(i,t,n){let e,o;const r=kt(Gm),s=kt(ho.key),c=r==null?void 0:r.activePanel;return Tt(i,c,a=>n(0,o=a)),i.$$.update=()=>{1&i.$$.dirty&&n(1,e=o===An.agentEdits?"Switch to Tasks view":"Switch to Changes view")},[o,e,r,s,c,async function(){r==null||r.togglePanel()}]}class Km extends ut{constructor(t){super(),dt(this,t,Q_,J_,lt,{})}}const tC=i=>({}),ld=i=>({}),eC=i=>({}),ud=i=>({});function dd(i){let t,n,e;return n=new Km({}),{c(){t=L("div"),v(n.$$.fragment),A(t,"class","c-agent-edits-header__switch-btn")},m(o,r){b(o,t,r),w(n,t,null),e=!0},i(o){e||(d(n.$$.fragment,o),e=!0)},o(o){m(n.$$.fragment,o),e=!1},d(o){o&&x(t),y(n)}}}function nC(i){let t,n,e,o,r=i[0]===1?"":"s";return{c(){t=V(i[0]),n=V(" file"),e=V(r),o=V(" changed")},m(s,c){b(s,t,c),b(s,n,c),b(s,e,c),b(s,o,c)},p(s,c){1&c&&bt(t,s[0]),1&c&&r!==(r=s[0]===1?"":"s")&&bt(e,r)},d(s){s&&(x(t),x(n),x(e),x(o))}}}function $d(i){let t,n,e;return n=new F$({props:{totalAddedLines:i[1].totalAddedLines,totalRemovedLines:i[1].totalRemovedLines}}),{c(){t=L("div"),v(n.$$.fragment),A(t,"class","c-agent-edits-header__summary")},m(o,r){b(o,t,r),w(n,t,null),e=!0},p(o,r){const s={};2&r&&(s.totalAddedLines=o[1].totalAddedLines),2&r&&(s.totalRemovedLines=o[1].totalRemovedLines),n.$set(s)},i(o){e||(d(n.$$.fragment,o),e=!0)},o(o){m(n.$$.fragment,o),e=!1},d(o){o&&x(t),y(n)}}}function md(i){let t,n,e,o,r=i[4]&&fd(i),s=i[5]&&pd(i);const c=i[9].actions,a=Yt(c,i,i[10],ld);return{c(){t=L("div"),r&&r.c(),n=H(),s&&s.c(),e=H(),a&&a.c(),A(t,"class","c-agent-edits-header__actions")},m(l,u){b(l,t,u),r&&r.m(t,null),O(t,n),s&&s.m(t,null),O(t,e),a&&a.m(t,null),o=!0},p(l,u){l[4]?r?(r.p(l,u),16&u&&d(r,1)):(r=fd(l),r.c(),d(r,1),r.m(t,n)):r&&(q(),m(r,1,1,()=>{r=null}),j()),l[5]?s?(s.p(l,u),32&u&&d(s,1)):(s=pd(l),s.c(),d(s,1),s.m(t,e)):s&&(q(),m(s,1,1,()=>{s=null}),j()),a&&a.p&&(!o||1024&u)&&Xt(a,c,l,l[10],o?Jt(c,l[10],u,tC):Zt(l[10]),ld)},i(l){o||(d(r),d(s),d(a,l),o=!0)},o(l){m(r),m(s),m(a,l),o=!1},d(l){l&&x(t),r&&r.d(),s&&s.d(),a&&a.d(l)}}}function fd(i){let t,n;return t=new ve({props:{class:"c-agent-edits-header__revert-btn",variant:"soft",color:"neutral",size:1,$$slots:{default:[rC]},$$scope:{ctx:i}}}),t.$on("click",function(){ze(i[4])&&i[4].apply(this,arguments)}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){i=e;const r={};1024&o&&(r.$$scope={dirty:o,ctx:i}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function oC(i){let t,n,e,o;return t=new Wm({}),{c(){v(t.$$.fragment),n=H(),e=L("span"),e.textContent="Discard All",A(e,"class","c-agent-edits-header__revert-btn__text")},m(r,s){w(t,r,s),b(r,n,s),b(r,e,s),o=!0},p:N,i(r){o||(d(t.$$.fragment,r),o=!0)},o(r){m(t.$$.fragment,r),o=!1},d(r){r&&(x(n),x(e)),y(t,r)}}}function rC(i){let t,n;return t=new zt({props:{triggerOn:[te.Hover],content:"Discard all changes",$$slots:{default:[oC]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};1024&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function pd(i){let t,n;return t=new ve({props:{class:"c-agent-edits-header__accept-btn",variant:"soft",color:"success",size:1,$$slots:{default:[sC]},$$scope:{ctx:i}}}),t.$on("click",function(){ze(i[5])&&i[5].apply(this,arguments)}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){i=e;const r={};1024&o&&(r.$$scope={dirty:o,ctx:i}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function iC(i){let t,n,e,o;return t=new jm({}),{c(){v(t.$$.fragment),n=H(),e=L("span"),e.textContent="Keep All",A(e,"class","c-agent-edits-header__accept-btn__text")},m(r,s){w(t,r,s),b(r,n,s),b(r,e,s),o=!0},p:N,i(r){o||(d(t.$$.fragment,r),o=!0)},o(r){m(t.$$.fragment,r),o=!1},d(r){r&&(x(n),x(e)),y(t,r)}}}function sC(i){let t,n;return t=new zt({props:{triggerOn:[te.Hover],content:"Keep all changes and clear checkpoints",$$slots:{default:[iC]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};1024&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function aC(i){let t,n,e,o,r,s,c,a,l,u;o=new am({});let $=i[6].enableTaskList&&dd();const f=i[9].text,p=Yt(f,i,i[10],ud),_=p||function(T){let E,R;return E=new Wt({props:{size:1,color:"neutral",$$slots:{default:[nC]},$$scope:{ctx:T}}}),{c(){v(E.$$.fragment)},m(P,J){w(E,P,J),R=!0},p(P,J){const K={};1025&J&&(K.$$scope={dirty:J,ctx:P}),E.$set(K)},i(P){R||(d(E.$$.fragment,P),R=!0)},o(P){m(E.$$.fragment,P),R=!1},d(P){y(E,P)}}}(i);let C=i[3]&&$d(i),M=(i[2]&&i[3]&&(i[4]||i[5])||i[8].actions)&&md(i);return{c(){t=L("div"),n=L("div"),e=L("div"),v(o.$$.fragment),r=H(),$&&$.c(),s=H(),c=L("div"),_&&_.c(),a=H(),C&&C.c(),l=H(),M&&M.c(),A(e,"class","c-agent-edits-header__collapse-btn"),A(c,"class","c-agent-edits-header__info-container"),A(n,"class","c-agent-edits-header__content"),A(t,"class","c-agent-edits-header svelte-1lfr6nx")},m(T,E){b(T,t,E),O(t,n),O(n,e),w(o,e,null),O(n,r),$&&$.m(n,null),O(n,s),O(n,c),_&&_.m(c,null),O(n,a),C&&C.m(n,null),O(t,l),M&&M.m(t,null),u=!0},p(T,[E]){T[6].enableTaskList?$?64&E&&d($,1):($=dd(),$.c(),d($,1),$.m(n,s)):$&&(q(),m($,1,1,()=>{$=null}),j()),p?p.p&&(!u||1024&E)&&Xt(p,f,T,T[10],u?Jt(f,T[10],E,eC):Zt(T[10]),ud):_&&_.p&&(!u||1&E)&&_.p(T,u?E:-1),T[3]?C?(C.p(T,E),8&E&&d(C,1)):(C=$d(T),C.c(),d(C,1),C.m(n,null)):C&&(q(),m(C,1,1,()=>{C=null}),j()),T[2]&&T[3]&&(T[4]||T[5])||T[8].actions?M?(M.p(T,E),316&E&&d(M,1)):(M=md(T),M.c(),d(M,1),M.m(t,null)):M&&(q(),m(M,1,1,()=>{M=null}),j())},i(T){u||(d(o.$$.fragment,T),d($),d(_,T),d(C),d(M),u=!0)},o(T){m(o.$$.fragment,T),m($),m(_,T),m(C),m(M),u=!1},d(T){T&&x(t),y(o),$&&$.d(),_&&_.d(T),C&&C.d(),M&&M.d()}}}function cC(i,t,n){let e,{$$slots:o={},$$scope:r}=t;const s=T$(o);let{filesCount:c}=t,{diffSummary:a}=t,{collapsed:l}=t,{hasChanges:u}=t,{onRevert:$}=t,{onKeep:f}=t;const p=kt("chatModel").flags;return Tt(i,p,_=>n(6,e=_)),i.$$set=_=>{"filesCount"in _&&n(0,c=_.filesCount),"diffSummary"in _&&n(1,a=_.diffSummary),"collapsed"in _&&n(2,l=_.collapsed),"hasChanges"in _&&n(3,u=_.hasChanges),"onRevert"in _&&n(4,$=_.onRevert),"onKeep"in _&&n(5,f=_.onKeep),"$$scope"in _&&n(10,r=_.$$scope)},[c,a,l,u,$,f,e,p,s,o,r]}class Ym extends ut{constructor(t){super(),dt(this,t,cC,aC,lt,{filesCount:0,diffSummary:1,collapsed:2,hasChanges:3,onRevert:4,onKeep:5})}}function gd(i,t,n){const e=i.slice();e[21]=t[n];const o=e[1]===e[21].file.new_path||e[1]===e[21].file.old_path;return e[22]=o,e}function lC(i){let t,n,e;return n=new Wt({props:{size:1,color:"neutral",$$slots:{default:[dC]},$$scope:{ctx:i}}}),{c(){t=L("div"),v(n.$$.fragment),A(t,"class","c-edits-list c-edits-list--empty svelte-ut8b0v")},m(o,r){b(o,t,r),w(n,t,null),e=!0},p(o,r){const s={};33554436&r&&(s.$$scope={dirty:r,ctx:o}),n.$set(s)},i(o){e||(d(n.$$.fragment,o),e=!0)},o(o){m(n.$$.fragment,o),e=!1},d(o){o&&x(t),y(n)}}}function uC(i){let t,n,e,o;function r(c){i[19](c)}let s={class:"c-agent-edits-container__block-container",$$slots:{header:[bC],default:[vC]},$$scope:{ctx:i}};return i[0]!==void 0&&(s.collapsed=i[0]),n=new Bs({props:s}),Qt.push(()=>Ne(n,"collapsed",r)),{c(){t=L("div"),v(n.$$.fragment),A(t,"class","c-agent-edits-container svelte-ut8b0v")},m(c,a){b(c,t,a),w(n,t,null),o=!0},p(c,a){const l={};33558523&a&&(l.$$scope={dirty:a,ctx:c}),!e&&1&a&&(e=!0,l.collapsed=c[0],Be(()=>e=!1)),n.$set(l)},i(c){o||(d(n.$$.fragment,c),o=!0)},o(c){m(n.$$.fragment,c),o=!1},d(c){c&&x(t),y(n)}}}function dC(i){let t;return{c(){t=V(i[2])},m(n,e){b(n,t,e)},p(n,e){4&e&&bt(t,n[2])},d(n){n&&x(t)}}}function hd(i){let t,n;return t=new zt({props:{content:"Toggle collapse unchanged regions",triggerOn:[te.Hover],$$slots:{default:[mC]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};33554432&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function $C(i){let t,n;return t=new cm({props:{icon:"map"}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p:N,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function mC(i){let t,n;return t=new fe({props:{color:"neutral",size:1,variant:"soft",$$slots:{default:[$C]},$$scope:{ctx:i}}}),t.$on("click",i[13]),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};33554432&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function fC(i){let t,n,e=i[22]&&hd(i);return{c(){t=L("div"),e&&e.c(),A(t,"slot","actions")},m(o,r){b(o,t,r),e&&e.m(t,null),n=!0},p(o,r){o[22]?e?(e.p(o,r),386&r&&d(e,1)):(e=hd(o),e.c(),d(e,1),e.m(t,null)):e&&(q(),m(e,1,1,()=>{e=null}),j())},i(o){n||(d(e),n=!0)},o(o){m(e),n=!1},d(o){o&&x(t),e&&e.d()}}}function vd(i){let t,n,e,o;function r(){return i[16](i[21])}function s(){return i[17](i[21])}function c(){return i[18](i[21])}return n=new qm({props:{qualifiedPathName:i[21].qualifiedPathName,lineChanges:i[21].changesSummary,isFocused:i[22],onClickFile:i[3]?r:void 0,onClickReview:i[4]?s:void 0,onClickRevert:i[5]?c:void 0,$$slots:{actions:[fC]},$$scope:{ctx:i}}}),{c(){t=L("div"),v(n.$$.fragment),A(t,"class","c-edit")},m(a,l){b(a,t,l),w(n,t,null),o=!0},p(a,l){i=a;const u={};384&l&&(u.qualifiedPathName=i[21].qualifiedPathName),384&l&&(u.lineChanges=i[21].changesSummary),386&l&&(u.isFocused=i[22]),392&l&&(u.onClickFile=i[3]?r:void 0),400&l&&(u.onClickReview=i[4]?s:void 0),416&l&&(u.onClickRevert=i[5]?c:void 0),33554818&l&&(u.$$scope={dirty:l,ctx:i}),n.$set(u)},i(a){o||(d(n.$$.fragment,a),a&&Ln(()=>{o&&(e||(e=Mn(t,wo,{},!0)),e.run(1))}),o=!0)},o(a){m(n.$$.fragment,a),a&&(e||(e=Mn(t,wo,{},!1)),e.run(0)),o=!1},d(a){a&&x(t),y(n),a&&e&&e.end()}}}function wd(i){let t,n,e;return n=new ve({props:{color:"neutral",size:1,variant:"soft",$$slots:{default:[hC]},$$scope:{ctx:i}}}),n.$on("click",i[12]),{c(){t=L("div"),v(n.$$.fragment),A(t,"class","c-show-more-container svelte-ut8b0v")},m(o,r){b(o,t,r),w(n,t,null),e=!0},p(o,r){const s={};33554816&r&&(s.$$scope={dirty:r,ctx:o}),n.$set(s)},i(o){e||(d(n.$$.fragment,o),e=!0)},o(o){m(n.$$.fragment,o),e=!1},d(o){o&&x(t),y(n)}}}function pC(i){let t,n,e,o,r,s,c,a=i[7].length-Ur+"";return s=new Uo({props:{slot:"iconRight"}}),{c(){t=L("span"),n=V("Show "),e=V(a),o=V(" more files"),r=H(),v(s.$$.fragment)},m(l,u){b(l,t,u),O(t,n),O(t,e),O(t,o),b(l,r,u),w(s,l,u),c=!0},p(l,u){(!c||128&u)&&a!==(a=l[7].length-Ur+"")&&bt(e,a)},i(l){c||(d(s.$$.fragment,l),c=!0)},o(l){m(s.$$.fragment,l),c=!1},d(l){l&&(x(t),x(r)),y(s,l)}}}function gC(i){let t,n,e,o;return e=new R$({props:{slot:"iconRight"}}),{c(){t=L("span"),t.textContent="Show less",n=H(),v(e.$$.fragment)},m(r,s){b(r,t,s),b(r,n,s),w(e,r,s),o=!0},p:N,i(r){o||(d(e.$$.fragment,r),o=!0)},o(r){m(e.$$.fragment,r),o=!1},d(r){r&&(x(t),x(n)),y(e,r)}}}function hC(i){let t,n,e,o;const r=[gC,pC],s=[];function c(a,l){return a[8]?0:1}return t=c(i),n=s[t]=r[t](i),{c(){n.c(),e=ft()},m(a,l){s[t].m(a,l),b(a,e,l),o=!0},p(a,l){let u=t;t=c(a),t===u?s[t].p(a,l):(q(),m(s[u],1,1,()=>{s[u]=null}),j(),n=s[t],n?n.p(a,l):(n=s[t]=r[t](a),n.c()),d(n,1),n.m(e.parentNode,e))},i(a){o||(d(n),o=!0)},o(a){m(n),o=!1},d(a){a&&x(e),s[t].d(a)}}}function vC(i){let t,n,e,o,r=se(i[8]?i[7]:i[7].slice(0,Ur)),s=[];for(let l=0;l<r.length;l+=1)s[l]=vd(gd(i,r,l));const c=l=>m(s[l],1,1,()=>{s[l]=null});let a=i[11]&&wd(i);return{c(){t=L("div"),n=L("div");for(let l=0;l<s.length;l+=1)s[l].c();e=H(),a&&a.c(),A(n,"class","c-edits-section svelte-ut8b0v"),A(t,"class","c-edits-list svelte-ut8b0v")},m(l,u){b(l,t,u),O(t,n);for(let $=0;$<s.length;$+=1)s[$]&&s[$].m(n,null);O(n,e),a&&a.m(n,null),o=!0},p(l,u){if(8634&u){let $;for(r=se(l[8]?l[7]:l[7].slice(0,Ur)),$=0;$<r.length;$+=1){const f=gd(l,r,$);s[$]?(s[$].p(f,u),d(s[$],1)):(s[$]=vd(f),s[$].c(),d(s[$],1),s[$].m(n,e))}for(q(),$=r.length;$<s.length;$+=1)c($);j()}l[11]?a?(a.p(l,u),2048&u&&d(a,1)):(a=wd(l),a.c(),d(a,1),a.m(n,null)):a&&(q(),m(a,1,1,()=>{a=null}),j())},i(l){if(!o){for(let u=0;u<r.length;u+=1)d(s[u]);d(a),o=!0}},o(l){s=s.filter(Boolean);for(let u=0;u<s.length;u+=1)m(s[u]);m(a),o=!1},d(l){l&&x(t),bn(s,l),a&&a.d()}}}function wC(i){let t,n,e,o,r;return o=new cm({props:{icon:"diff-multiple"}}),{c(){t=L("div"),t.textContent="See full diff",n=H(),e=L("div"),v(o.$$.fragment),A(t,"class","c-agent-edits-header__buttons__text--long svelte-ut8b0v"),A(e,"class","c-agent-edits-header__buttons__text--short svelte-ut8b0v")},m(s,c){b(s,t,c),b(s,n,c),b(s,e,c),w(o,e,null),r=!0},p:N,i(s){r||(d(o.$$.fragment,s),r=!0)},o(s){m(o.$$.fragment,s),r=!1},d(s){s&&(x(t),x(n),x(e)),y(o)}}}function yC(i){let t,n;return t=new ve({props:{color:"neutral",size:1,variant:"soft",disabled:i[9],$$slots:{default:[wC]},$$scope:{ctx:i}}}),t.$on("click",function(){ze(i[6])&&i[6].apply(this,arguments)}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){i=e;const r={};512&o&&(r.disabled=i[9]),33554432&o&&(r.$$scope={dirty:o,ctx:i}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function xC(i){let t,n,e,o,r,s,c,a,l,u,$=i[7].length+"",f=i[7].length===1?"":"s";return l=new zt({props:{content:i[9]?Da:void 0,$$slots:{default:[yC]},$$scope:{ctx:i}}}),{c(){t=L("div"),n=L("div"),e=V($),o=V(" file"),r=V(f),s=V(" changed"),c=H(),a=L("div"),v(l.$$.fragment),A(n,"class","c-agent-edits-header__actions__count"),A(a,"class","c-agent-edits-header__buttons svelte-ut8b0v"),A(t,"class","c-agent-edits-header__actions svelte-ut8b0v"),A(t,"slot","text")},m(p,_){b(p,t,_),O(t,n),O(n,e),O(n,o),O(n,r),O(n,s),O(t,c),O(t,a),w(l,a,null),u=!0},p(p,_){(!u||128&_)&&$!==($=p[7].length+"")&&bt(e,$),(!u||128&_)&&f!==(f=p[7].length===1?"":"s")&&bt(r,f);const C={};512&_&&(C.content=p[9]?Da:void 0),33555008&_&&(C.$$scope={dirty:_,ctx:p}),l.$set(C)},i(p){u||(d(l.$$.fragment,p),u=!0)},o(p){m(l.$$.fragment,p),u=!1},d(p){p&&x(t),y(l)}}}function bC(i){let t,n;return t=new Ym({props:{filesCount:i[7].length,diffSummary:i[10],collapsed:i[0],hasChanges:!0,slot:"header",$$slots:{text:[xC]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};128&o&&(r.filesCount=e[7].length),1024&o&&(r.diffSummary=e[10]),1&o&&(r.collapsed=e[0]),33555136&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function _C(i){let t,n,e,o;const r=[uC,lC],s=[];function c(a,l){return a[7].length>0?0:1}return t=c(i),n=s[t]=r[t](i),{c(){n.c(),e=ft()},m(a,l){s[t].m(a,l),b(a,e,l),o=!0},p(a,[l]){let u=t;t=c(a),t===u?s[t].p(a,l):(q(),m(s[u],1,1,()=>{s[u]=null}),j(),n=s[t],n?n.p(a,l):(n=s[t]=r[t](a),n.c()),d(n,1),n.m(e.parentNode,e))},i(a){o||(d(n),o=!0)},o(a){m(n),o=!1},d(a){a&&x(e),s[t].d(a)}}}const Ur=3;function CC(i,t,n){let e,o,r,s,c,{changedFiles:a=[]}=t,{collapsed:l=!1}=t,{focusedFilePath:u=null}=t,{emptyMessage:$="No changes to show"}=t,{onFileClick:f}=t,{onReviewClick:p}=t,{onRevertClick:_}=t,{onOpenDiffView:C}=t;const M=kt("chatModel");let T=!1;return i.$$set=E=>{"changedFiles"in E&&n(14,a=E.changedFiles),"collapsed"in E&&n(0,l=E.collapsed),"focusedFilePath"in E&&n(1,u=E.focusedFilePath),"emptyMessage"in E&&n(2,$=E.emptyMessage),"onFileClick"in E&&n(3,f=E.onFileClick),"onReviewClick"in E&&n(4,p=E.onReviewClick),"onRevertClick"in E&&n(5,_=E.onRevertClick),"onOpenDiffView"in E&&n(6,C=E.onOpenDiffView)},i.$$.update=()=>{16384&i.$$.dirty&&n(15,o=a.map(E=>{const R=Ta.generateDiff(E.old_path,E.new_path,E.old_contents||"",E.new_contents||""),P=Ta.getDiffObjectStats(R),J={totalAddedLines:P.additions,totalRemovedLines:P.deletions};return{file:E,qualifiedPathName:{rootPath:"",relPath:E.new_path||E.old_path},changesSummary:J}})),32768&i.$$.dirty&&n(7,r=o.filter(E=>E.changesSummary.totalAddedLines>0||E.changesSummary.totalRemovedLines>0)),128&i.$$.dirty&&n(11,e=r.length>Ur),128&i.$$.dirty&&n(10,s=r.reduce((E,R)=>(E.totalAddedLines+=R.changesSummary.totalAddedLines,E.totalRemovedLines+=R.changesSummary.totalRemovedLines,E),{totalAddedLines:0,totalRemovedLines:0})),16384&i.$$.dirty&&n(9,c=a.length>$f)},[l,u,$,f,p,_,C,r,T,c,s,e,function(){n(8,T=!T)},function(){M.extensionClient.toggleCollapseUnchangedRegions()},a,o,E=>f(E.file.new_path||E.file.old_path),E=>p(E.file),E=>_(E.file),function(E){l=E,n(0,l)}]}class AC extends ut{constructor(t){super(),dt(this,t,CC,_C,lt,{changedFiles:14,collapsed:0,focusedFilePath:1,emptyMessage:2,onFileClick:3,onReviewClick:4,onRevertClick:5,onOpenDiffView:6})}}function MC(i){let t,n,e=[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 512 512"},i[0]],o={};for(let r=0;r<e.length;r+=1)o=Et(o,e[r]);return{c(){t=oe("svg"),n=new ln(!0),this.h()},l(r){t=un(r,"svg",{xmlns:!0,"data-ds-icon":!0,viewBox:!0});var s=dn(t);n=$n(s,!0),s.forEach(x),this.h()},h(){n.a=null,ue(t,o)},m(r,s){mn(r,t,s),n.m('<!--! Font Awesome Pro 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2024 Fonticons, Inc.--><path d="M305.8 2.1C314.4 5.9 320 14.5 320 24v48h16c66.3 0 120 53.7 120 120v163.7c32.5 10.2 56 40.5 56 76.3 0 44.2-35.8 80-80 80s-80-35.8-80-80c0-35.8 23.5-66.1 56-76.3V192c0-39.8-32.2-72-72-72h-16v48c0 9.5-5.6 18.1-14.2 21.9s-18.8 2.3-25.8-4.1l-80-72c-5.1-4.6-7.9-11-7.9-17.8s2.9-13.3 7.9-17.8l80-72c7-6.3 17.2-7.9 25.8-4.1M112 80a32 32 0 1 0-64 0 32 32 0 1 0 64 0m-8 76.3v199.3c32.5 10.2 56 40.5 56 76.3 0 44.2-35.8 80-80 80s-80-35.8-80-80c0-35.8 23.5-66.1 56-76.3V156.3C23.5 146.1 0 115.8 0 80 0 35.8 35.8 0 80 0s80 35.8 80 80c0 35.8-23.5 66.1-56 76.3m8 275.7a32 32 0 1 0-64 0 32 32 0 1 0 64 0m320 32a32 32 0 1 0 0-64 32 32 0 1 0 0 64"/>',t)},p(r,[s]){ue(t,o=De(e,[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 512 512"},1&s&&r[0]]))},i:N,o:N,d(r){r&&x(t)}}}function kC(i,t,n){return i.$$set=e=>{n(0,t=Et(Et({},t),ae(e)))},[t=ae(t)]}class SC extends ut{constructor(t){super(),dt(this,t,kC,MC,lt,{})}}function yd(i){let t,n,e,o,r=i[8].length>0&&xd(i),s=i[10]&&!i[1]&&bd(i);return{c(){t=L("div"),n=L("div"),r&&r.c(),e=H(),s&&s.c(),A(n,"class","c-agent-footer__status svelte-1fkxsim"),A(t,"class","c-agent-footer svelte-1fkxsim")},m(c,a){b(c,t,a),O(t,n),r&&r.m(n,null),O(t,e),s&&s.m(t,null),o=!0},p(c,a){c[8].length>0?r?(r.p(c,a),256&a&&d(r,1)):(r=xd(c),r.c(),d(r,1),r.m(n,null)):r&&(q(),m(r,1,1,()=>{r=null}),j()),c[10]&&!c[1]?s?(s.p(c,a),1026&a&&d(s,1)):(s=bd(c),s.c(),d(s,1),s.m(t,null)):s&&(q(),m(s,1,1,()=>{s=null}),j())},i(c){o||(d(r),d(s),o=!0)},o(c){m(r),m(s),o=!1},d(c){c&&x(t),r&&r.d(),s&&s.d()}}}function xd(i){let t,n;return t=new AC({props:{changedFiles:i[8],collapsed:!i[11],focusedFilePath:i[7],emptyMessage:i[9]?"Loading...":"No changes to show",onReviewClick:i[18],onOpenDiffView:i[21],onFileClick:i[6]}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};256&o&&(r.changedFiles=e[8]),2048&o&&(r.collapsed=!e[11]),128&o&&(r.focusedFilePath=e[7]),512&o&&(r.emptyMessage=e[9]?"Loading...":"No changes to show"),4364&o&&(r.onOpenDiffView=e[21]),64&o&&(r.onFileClick=e[6]),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function bd(i){let t,n,e,o=i[8].length>0&&_d(i),r=!i[1]&&Cd(i);return{c(){t=L("div"),o&&o.c(),n=H(),r&&r.c(),A(t,"class","c-agent-footer__buttons svelte-1fkxsim")},m(s,c){b(s,t,c),o&&o.m(t,null),O(t,n),r&&r.m(t,null),e=!0},p(s,c){s[8].length>0?o?(o.p(s,c),256&c&&d(o,1)):(o=_d(s),o.c(),d(o,1),o.m(t,n)):o&&(q(),m(o,1,1,()=>{o=null}),j()),s[1]?r&&(q(),m(r,1,1,()=>{r=null}),j()):r?(r.p(s,c),2&c&&d(r,1)):(r=Cd(s),r.c(),d(r,1),r.m(t,null))},i(s){e||(d(o),d(r),e=!0)},o(s){m(o),m(r),e=!1},d(s){s&&x(t),o&&o.d(),r&&r.d()}}}function _d(i){let t,n,e;return n=new zt({props:{triggerOn:[te.Hover],content:"Create a GitHub pull request with the changes",$$slots:{default:[RC]},$$scope:{ctx:i}}}),{c(){t=L("div"),v(n.$$.fragment),A(t,"class","c-agent-footer__button svelte-1fkxsim")},m(o,r){b(o,t,r),w(n,t,null),e=!0},p(o,r){const s={};67108884&r&&(s.$$scope={dirty:r,ctx:o}),n.$set(s)},i(o){e||(d(n.$$.fragment,o),e=!0)},o(o){m(n.$$.fragment,o),e=!1},d(o){o&&x(t),y(n)}}}function TC(i){let t;return{c(){t=V("Create a PR")},m(n,e){b(n,t,e)},d(n){n&&x(t)}}}function EC(i){let t;return{c(){t=V("Creating a PR...")},m(n,e){b(n,t,e)},d(n){n&&x(t)}}}function IC(i){let t;function n(r,s){return r[4]?EC:TC}let e=n(i),o=e(i);return{c(){o.c(),t=ft()},m(r,s){o.m(r,s),b(r,t,s)},p(r,s){e!==(e=n(r))&&(o.d(1),o=e(r),o&&(o.c(),o.m(t.parentNode,t)))},d(r){r&&x(t),o.d(r)}}}function LC(i){let t,n;return t=new SC({props:{slot:"iconRight"}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p:N,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function RC(i){var e;let t,n;return t=new ve({props:{size:2,variant:"soft",color:"neutral",class:"c-agent-footer__open-btn",disabled:[rn.agentUnspecified,rn.agentPending,rn.agentStarting].includes((e=i[2])==null?void 0:e.status),$$slots:{iconRight:[LC],default:[IC]},$$scope:{ctx:i}}}),t.$on("click",i[19]),{c(){v(t.$$.fragment)},m(o,r){w(t,o,r),n=!0},p(o,r){var c;const s={};4&r&&(s.disabled=[rn.agentUnspecified,rn.agentPending,rn.agentStarting].includes((c=o[2])==null?void 0:c.status)),67108880&r&&(s.$$scope={dirty:r,ctx:o}),t.$set(s)},i(o){n||(d(t.$$.fragment,o),n=!0)},o(o){m(t.$$.fragment,o),n=!1},d(o){y(t,o)}}}function Cd(i){let t,n,e;return n=new zt({props:{triggerOn:[te.Hover],content:"SSH into the remote agent's workspace in a new VSCode window",$$slots:{default:[BC]},$$scope:{ctx:i}}}),{c(){t=L("div"),v(n.$$.fragment),A(t,"class","c-agent-footer__button svelte-1fkxsim")},m(o,r){b(o,t,r),w(n,t,null),e=!0},p(o,r){const s={};67109924&r&&(s.$$scope={dirty:r,ctx:o}),n.$set(s)},i(o){e||(d(n.$$.fragment,o),e=!0)},o(o){m(n.$$.fragment,o),e=!1},d(o){o&&x(t),y(n)}}}function DC(i){let t;return{c(){t=V("Open remote workspace")},m(n,e){b(n,t,e)},d(n){n&&x(t)}}}function PC(i){let t;return{c(){t=V("Connecting...")},m(n,e){b(n,t,e)},d(n){n&&x(t)}}}function NC(i){let t;function n(r,s){return r[5]?PC:DC}let e=n(i),o=e(i);return{c(){o.c(),t=ft()},m(r,s){o.m(r,s),b(r,t,s)},p(r,s){e!==(e=n(r))&&(o.d(1),o=e(r),o&&(o.c(),o.m(t.parentNode,t)))},d(r){r&&x(t),o.d(r)}}}function FC(i){let t,n;return t=new Y$({}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function OC(i){let t,n;return t=new ro({props:{size:1,useCurrentColor:!0}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function zC(i){let t,n,e,o;const r=[OC,FC],s=[];function c(a,l){return a[5]?0:1}return t=c(i),n=s[t]=r[t](i),{c(){n.c(),e=ft()},m(a,l){s[t].m(a,l),b(a,e,l),o=!0},p(a,l){let u=t;t=c(a),t!==u&&(q(),m(s[u],1,1,()=>{s[u]=null}),j(),n=s[t],n||(n=s[t]=r[t](a),n.c()),d(n,1),n.m(e.parentNode,e))},i(a){o||(d(n),o=!0)},o(a){m(n),o=!1},d(a){a&&x(e),s[t].d(a)}}}function BC(i){var e;let t,n;return t=new ve({props:{size:2,variant:"soft",color:"accent",class:"c-agent-footer__open-btn",disabled:[rn.agentUnspecified,rn.agentPending,rn.agentStarting].includes((e=i[2])==null?void 0:e.status)||i[5],$$slots:{iconRight:[zC],default:[NC]},$$scope:{ctx:i}}}),t.$on("click",i[22]),{c(){v(t.$$.fragment)},m(o,r){w(t,o,r),n=!0},p(o,r){var c;const s={};36&r&&(s.disabled=[rn.agentUnspecified,rn.agentPending,rn.agentStarting].includes((c=o[2])==null?void 0:c.status)||o[5]),67108896&r&&(s.$$scope={dirty:r,ctx:o}),t.$set(s)},i(o){n||(d(t.$$.fragment,o),n=!0)},o(o){m(t.$$.fragment,o),n=!1},d(o){y(t,o)}}}function HC(i){let t,n,e,o;Ln(i[20]);let r=i[2]&&yd(i);return{c(){r&&r.c(),t=ft()},m(s,c){r&&r.m(s,c),b(s,t,c),n=!0,e||(o=Dt(window,"resize",i[20]),e=!0)},p(s,[c]){s[2]?r?(r.p(s,c),4&c&&d(r,1)):(r=yd(s),r.c(),d(r,1),r.m(t.parentNode,t)):r&&(q(),m(r,1,1,()=>{r=null}),j())},i(s){n||(d(r),n=!0)},o(s){m(r),n=!1},d(s){s&&x(t),r&&r.d(s),e=!1,o()}}}function UC(i,t,n){let e,o,r,s,c,a,l,u,$,f,p;const _=kt(Rn.key);Tt(i,_,U=>n(3,$=U));const C=kt("chatModel");Tt(i,C,U=>n(23,f=U));const M=kt(z$),T=kt(wr.key),E=Re(""),R=V1(E);Tt(i,R,U=>n(12,p=U)),so(async()=>{try{const{remoteUrl:U,error:G}=await T.getRemoteUrl();if(G)throw new Error(G);E.set(U)}catch(U){console.error("Failed to get current repository URL:",U)}});let P=!1,J=0;async function K(U){if(!U)return;const G=_.agentOverviews.find(nt=>nt.remote_agent_id===U);G&&await _.sshToRemoteAgent(G)}let et=!1;return i.$$.update=()=>{var U;1&i.$$.dirty&&n(11,e=J>660),8&i.$$.dirty&&n(2,o=$==null?void 0:$.currentAgent),4&i.$$.dirty&&n(10,r=o==null?void 0:o.remote_agent_id),8&i.$$.dirty&&n(9,s=$==null?void 0:$.isCurrentAgentDetailsLoading),8&i.$$.dirty&&n(8,c=Uf(((U=$.currentConversation)==null?void 0:U.exchanges)??[])),8&i.$$.dirty&&n(7,a=$.focusedFilePath),8&i.$$.dirty&&n(1,l=$.isRemoteAgentSshWindow),2&i.$$.dirty&&n(6,u=l?G=>{C.extensionClient.openFile({repoRoot:"",pathName:G})}:void 0)},[J,l,o,$,P,et,u,a,c,s,r,e,p,_,C,M,R,K,async function(U){const G=U.new_path||U.old_path;$.openDiffInBuffer(U.old_contents||"",U.new_contents||"",G)},function(){var nt;if(!((nt=$.currentAgent)!=null&&nt.remote_agent_id))return void console.error("No current agent ID found");_.reportRemoteAgentEvent({eventName:E1.createdPR,remoteAgentId:$.currentAgent.remote_agent_id,eventData:{createdPRData:{}}}),n(4,P=!0);const U=f.currentConversationModel,G=U==null?void 0:U.selectedModelId;$.sendMessage("Please create a pull request with the changes you've made.",G??void 0).then(()=>{n(4,P=!1)}).catch(X=>{console.error("Error sending PR creation request:",X),n(4,P=!1)})},function(){n(0,J=window.innerHeight)},()=>{M.set(-1),$.showRemoteAgentDiffPanel({turnIdx:-1,changedFiles:c,userPrompt:"",sessionSummary:"",isShowingAggregateChanges:!0,isAgentFromDifferentRepo:p(o)})},()=>{n(5,et=!0),K(r).then(()=>{n(5,et=!1)})}]}class qC extends ut{constructor(t){super(),dt(this,t,UC,HC,lt,{})}}function Ad(i){var it;let t,n,e,o,r,s,c,a,l,u,$,f,p,_,C,M,T,E,R,P,J,K;o=new Wt({props:{size:2,weight:"medium",$$slots:{default:[jC]},$$scope:{ctx:i}}}),s=new zt({props:{content:"View full script in editor",side:"bottom",$$slots:{default:[GC]},$$scope:{ctx:i}}});const et=[YC,KC],U=[];function G(rt,ht){return rt[1].length>0?0:1}l=G(i),u=U[l]=et[l](i);let nt=((it=i[5])==null?void 0:it.status)&&Md(i);function X(rt){i[15](rt)}let Y={placeholder:"Script name",size:2,$$slots:{iconLeft:[n7]},$$scope:{ctx:i}};i[2]!==void 0&&(Y.value=i[2]),_=new ir({props:Y}),Qt.push(()=>Ne(_,"value",X)),_.$on("blur",i[16]),E=new zt({props:{content:"Save the setup script in your machine's home directory",triggerOn:[te.Hover],$$slots:{default:[r7]},$$scope:{ctx:i}}}),P=new zt({props:{content:"Save the setup script in the Git repository, for your team to use when you push your changes",triggerOn:[te.Hover],$$slots:{default:[s7]},$$scope:{ctx:i}}});let Z=i[4]&&kd(i);return{c(){t=L("div"),n=L("div"),e=L("div"),v(o.$$.fragment),r=H(),v(s.$$.fragment),c=H(),a=L("div"),u.c(),$=H(),nt&&nt.c(),f=H(),p=L("div"),v(_.$$.fragment),M=H(),T=L("div"),v(E.$$.fragment),R=H(),v(P.$$.fragment),J=H(),Z&&Z.c(),A(e,"class","header-content__title svelte-bf326k"),A(a,"class","header-content__title svelte-bf326k"),A(n,"class","header-content svelte-bf326k"),A(T,"class","input-group location-buttons svelte-bf326k"),A(p,"class","save-bar-content svelte-bf326k"),A(t,"class","setup-script-save-bar svelte-bf326k")},m(rt,ht){b(rt,t,ht),O(t,n),O(n,e),w(o,e,null),O(e,r),w(s,e,null),O(n,c),O(n,a),U[l].m(a,null),O(a,$),nt&&nt.m(a,null),O(t,f),O(t,p),w(_,p,null),O(p,M),O(p,T),w(E,T,null),O(T,R),w(P,T,null),O(p,J),Z&&Z.m(p,null),K=!0},p(rt,ht){var ye;const ct={};4194304&ht&&(ct.$$scope={dirty:ht,ctx:rt}),o.$set(ct);const vt={};4194336&ht&&(vt.$$scope={dirty:ht,ctx:rt}),s.$set(vt);let Gt=l;l=G(rt),l===Gt?U[l].p(rt,ht):(q(),m(U[Gt],1,1,()=>{U[Gt]=null}),j(),u=U[l],u?u.p(rt,ht):(u=U[l]=et[l](rt),u.c()),d(u,1),u.m(a,$)),(ye=rt[5])!=null&&ye.status?nt?(nt.p(rt,ht),32&ht&&d(nt,1)):(nt=Md(rt),nt.c(),d(nt,1),nt.m(a,null)):nt&&(q(),m(nt,1,1,()=>{nt=null}),j());const Ct={};4194304&ht&&(Ct.$$scope={dirty:ht,ctx:rt}),!C&&4&ht&&(C=!0,Ct.value=rt[2],Be(()=>C=!1)),_.$set(Ct);const jt={};4194316&ht&&(jt.$$scope={dirty:ht,ctx:rt}),E.$set(jt);const Ve={};4194316&ht&&(Ve.$$scope={dirty:ht,ctx:rt}),P.$set(Ve),rt[4]?Z?(Z.p(rt,ht),16&ht&&d(Z,1)):(Z=kd(rt),Z.c(),d(Z,1),Z.m(p,null)):Z&&(q(),m(Z,1,1,()=>{Z=null}),j())},i(rt){K||(d(o.$$.fragment,rt),d(s.$$.fragment,rt),d(u),d(nt),d(_.$$.fragment,rt),d(E.$$.fragment,rt),d(P.$$.fragment,rt),d(Z),K=!0)},o(rt){m(o.$$.fragment,rt),m(s.$$.fragment,rt),m(u),m(nt),m(_.$$.fragment,rt),m(E.$$.fragment,rt),m(P.$$.fragment,rt),m(Z),K=!1},d(rt){rt&&x(t),y(o),y(s),U[l].d(),nt&&nt.d(),y(_),y(E),y(P),Z&&Z.d()}}}function jC(i){let t;return{c(){t=V("Setup script")},m(n,e){b(n,t,e)},d(n){n&&x(t)}}}function WC(i){let t;return{c(){t=V("View")},m(n,e){b(n,t,e)},d(n){n&&x(t)}}}function VC(i){let t,n;return t=new Y$({props:{slot:"iconLeft"}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p:N,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function GC(i){let t,n;return t=new ve({props:{variant:"ghost-block",color:"neutral",size:1,$$slots:{iconLeft:[VC],default:[WC]},$$scope:{ctx:i}}}),t.$on("click",i[12]),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};4194304&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function KC(i){let t,n;return t=new Wt({props:{size:1,color:"secondary",class:"header-content__version-count",$$slots:{default:[XC]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};4194304&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function YC(i){let t,n,e,o,r,s,c;return n=new zt({props:{content:i[0]===0?"":"Switch to previous script",triggerOn:[te.Hover],$$slots:{default:[JC]},$$scope:{ctx:i}}}),o=new Wt({props:{size:1,color:"secondary",class:"header-content__version-count",$$slots:{default:[QC]},$$scope:{ctx:i}}}),s=new zt({props:{content:i[0]===i[1].length-1?"":"Switch to next script",triggerOn:[te.Hover],$$slots:{default:[e7]},$$scope:{ctx:i}}}),{c(){t=L("div"),v(n.$$.fragment),e=H(),v(o.$$.fragment),r=H(),v(s.$$.fragment),A(t,"class","version-navigation svelte-bf326k")},m(a,l){b(a,t,l),w(n,t,null),O(t,e),w(o,t,null),O(t,r),w(s,t,null),c=!0},p(a,l){const u={};1&l&&(u.content=a[0]===0?"":"Switch to previous script"),4194305&l&&(u.$$scope={dirty:l,ctx:a}),n.$set(u);const $={};4194307&l&&($.$$scope={dirty:l,ctx:a}),o.$set($);const f={};3&l&&(f.content=a[0]===a[1].length-1?"":"Switch to next script"),4194307&l&&(f.$$scope={dirty:l,ctx:a}),s.$set(f)},i(a){c||(d(n.$$.fragment,a),d(o.$$.fragment,a),d(s.$$.fragment,a),c=!0)},o(a){m(n.$$.fragment,a),m(o.$$.fragment,a),m(s.$$.fragment,a),c=!1},d(a){a&&x(t),y(n),y(o),y(s)}}}function XC(i){let t;return{c(){t=V("No versions")},m(n,e){b(n,t,e)},d(n){n&&x(t)}}}function ZC(i){let t,n;return t=new om({}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function JC(i){let t,n;return t=new fe({props:{variant:"ghost-block",size:1,disabled:i[0]===0,title:"Previous version",$$slots:{default:[ZC]},$$scope:{ctx:i}}}),t.$on("click",i[13]),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};1&o&&(r.disabled=e[0]===0),4194304&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function QC(i){let t,n,e,o=i[0]+1+"",r=i[1].length+"";return{c(){t=V(o),n=V(" of "),e=V(r)},m(s,c){b(s,t,c),b(s,n,c),b(s,e,c)},p(s,c){1&c&&o!==(o=s[0]+1+"")&&bt(t,o),2&c&&r!==(r=s[1].length+"")&&bt(e,r)},d(s){s&&(x(t),x(n),x(e))}}}function t7(i){let t,n;return t=new Of({}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function e7(i){let t,n;return t=new fe({props:{variant:"ghost-block",size:1,disabled:i[0]===i[1].length-1,title:"Next version",$$slots:{default:[t7]},$$scope:{ctx:i}}}),t.$on("click",i[14]),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};3&o&&(r.disabled=e[0]===e[1].length-1),4194304&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function Md(i){let t,n,e;return n=new G1({props:{commandResult:i[5].status===Ce.completed?"success":i[5].status===Ce.error?"error":"loading"}}),{c(){t=L("div"),v(n.$$.fragment),A(t,"class","header-content__actions")},m(o,r){b(o,t,r),w(n,t,null),e=!0},p(o,r){const s={};32&r&&(s.commandResult=o[5].status===Ce.completed?"success":o[5].status===Ce.error?"error":"loading"),n.$set(s)},i(o){e||(d(n.$$.fragment,o),e=!0)},o(o){m(n.$$.fragment,o),e=!1},d(o){o&&x(t),y(n)}}}function n7(i){let t,n;return t=new Os({props:{slot:"iconLeft"}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p:N,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function o7(i){let t;return{c(){t=V("Save locally")},m(n,e){b(n,t,e)},d(n){n&&x(t)}}}function r7(i){let t,n;return t=new ve({props:{variant:"solid",color:"accent",disabled:i[3]||!i[2]||!Sd,$$slots:{default:[o7]},$$scope:{ctx:i}}}),t.$on("click",i[17]),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};12&o&&(r.disabled=e[3]||!e[2]||!Sd),4194304&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function i7(i){let t;return{c(){t=V("Save in repo")},m(n,e){b(n,t,e)},d(n){n&&x(t)}}}function s7(i){let t,n;return t=new ve({props:{variant:"solid",color:"accent",disabled:i[3]||!i[2],$$slots:{default:[i7]},$$scope:{ctx:i}}}),t.$on("click",i[18]),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};12&o&&(r.disabled=e[3]||!e[2]),4194304&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function kd(i){let t,n,e;return n=new Wt({props:{size:1,color:"error",$$slots:{default:[a7]},$$scope:{ctx:i}}}),{c(){t=L("div"),v(n.$$.fragment),A(t,"class","error-message svelte-bf326k")},m(o,r){b(o,t,r),w(n,t,null),e=!0},p(o,r){const s={};4194320&r&&(s.$$scope={dirty:r,ctx:o}),n.$set(s)},i(o){e||(d(n.$$.fragment,o),e=!0)},o(o){m(n.$$.fragment,o),e=!1},d(o){o&&x(t),y(n)}}}function a7(i){let t;return{c(){t=V(i[4])},m(n,e){b(n,t,e)},p(n,e){16&e&&bt(t,n[4])},d(n){n&&x(t)}}}function c7(i){let t,n,e=i[1].length>0&&Ad(i);return{c(){e&&e.c(),t=ft()},m(o,r){e&&e.m(o,r),b(o,t,r),n=!0},p(o,[r]){o[1].length>0?e?(e.p(o,r),2&r&&d(e,1)):(e=Ad(o),e.c(),d(e,1),e.m(t.parentNode,t)):e&&(q(),m(e,1,1,()=>{e=null}),j())},i(o){n||(d(e),n=!0)},o(o){m(e),n=!1},d(o){o&&x(t),e&&e.d(o)}}}let Sd="home";function l7(i,t,n){let e,o,r,s;const c=kt(Rn.key);Tt(i,c,M=>n(11,s=M));const a=kt("chatModel");let l="setup.sh",u=!1,$="",f=0;const p=M=>{const T=document.querySelector(`[data-tool-id="${M}"]`);T&&T.scrollIntoView({behavior:"smooth",block:"start"})};function _(M=1){n(0,f=Math.max(0,Math.min(e.length-1,f+M)));const T=e[f];T!=null&&T.id&&(p(T.id),setTimeout(()=>{p(T.id)},500))}async function C(M){var T,E,R,P,J,K;if(l&&M)if(r!=null&&r.content)try{n(3,u=!0),n(4,$="");const et=l.endsWith(".sh")?l:`${l}.sh`,U=await c.saveSetupScript(et,r.content,M);let G;if(!U.success||!U.path)return void n(4,$=U.error||"Failed to save setup script");if(G=(await c.listSetupScripts()).find(Z=>Z.path===U.path),!G)return void n(4,$="Failed to save script");const nt=s==null?void 0:s.currentAgent,X=(R=(E=(T=nt==null?void 0:nt.workspace_setup)==null?void 0:T.starting_files)==null?void 0:E.github_commit_ref)==null?void 0:R.git_ref,Y=(K=(J=(P=nt==null?void 0:nt.workspace_setup)==null?void 0:P.starting_files)==null?void 0:J.github_commit_ref)==null?void 0:K.repository_url;c.saveLastRemoteAgentSetup(Y||null,X||null,U.path),c.setCurrentAgent(void 0)}catch(et){n(4,$=et instanceof Error?et.message:"Unknown error occurred")}finally{n(3,u=!1)}else n(4,$="No script content to save");else n(4,$="Please provide both script name and location")}return i.$$.update=()=>{var T;var M;2048&i.$$.dirty&&n(1,(M=((T=s.currentConversation)==null?void 0:T.exchanges)||[],e=M&&Array.isArray(M)?M.flatMap(E=>(E.exchange.response_nodes||[]).filter(R=>{var P,J;return R.type===Nr.TOOL_USE&&((P=R.tool_use)==null?void 0:P.tool_name)==="setup-script"&&((J=R.tool_use)==null?void 0:J.input_json)}).map(R=>{var P;try{const J=typeof R.tool_use.input_json=="string"?JSON.parse(R.tool_use.input_json):R.tool_use.input_json,K=s.getToolUseState(R.tool_use.tool_use_id),et=((P=E.exchange)==null?void 0:P.request_id)||E.request_id||"";return et||console.warn("SetupScriptSaveBar: Missing request_id for an exchange",E),{content:J.script_content||"",timestamp:R.timestamp,status:K.phase,requestId:et,id:R.tool_use.tool_use_id}}catch(J){return console.error("Failed to parse setup script JSON:",J),null}})).filter(E=>E!==null&&E.content!==""):[])),2&i.$$.dirty&&n(10,o=e.length),1024&i.$$.dirty&&n(0,f=o-1),3&i.$$.dirty&&n(5,r=e[f])},[f,e,l,u,$,r,c,a,_,C,o,s,()=>{a.extensionClient.openScratchFile(r==null?void 0:r.content,"shellscript")},()=>_(-1),()=>_(1),function(M){l=M,n(2,l)},()=>{l?l.endsWith(".sh")||n(2,l+=".sh"):n(2,l="setup.sh")},()=>C("home"),()=>C("git")]}class u7 extends ut{constructor(t){super(),dt(this,t,l7,c7,lt,{})}}function Td(i){let t,n;return t=new Zn({props:{color:i[3],size:1,$$slots:{icon:[p7],default:[d7]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};8&o&&(r.color=e[3]),2070&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function d7(i){let t,n,e=i[1]===Bn.inProgress?` ${i[2].progress}%`:"";return{c(){t=V(i[4]),n=V(e)},m(o,r){b(o,t,r),b(o,n,r)},p(o,r){16&r&&bt(t,o[4]),6&r&&e!==(e=o[1]===Bn.inProgress?` ${o[2].progress}%`:"")&&bt(n,e)},d(o){o&&(x(t),x(n))}}}function $7(i){let t,n,e;return n=new B$({}),{c(){t=L("div"),v(n.$$.fragment),A(t,"class","c-orientation-status--spin-icon svelte-1a8540p")},m(o,r){b(o,t,r),w(n,t,null),e=!0},i(o){e||(d(n.$$.fragment,o),e=!0)},o(o){m(n.$$.fragment,o),e=!1},d(o){o&&x(t),y(n)}}}function m7(i){let t,n;return t=new jn({}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function f7(i){let t,n;return t=new Ho({}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function p7(i){let t,n,e,o;const r=[f7,m7,$7],s=[];function c(a,l){return a[1]===Bn.succeeded?0:a[1]===Bn.failed?1:2}return t=c(i),n=s[t]=r[t](i),{c(){n.c(),e=ft()},m(a,l){s[t].m(a,l),b(a,e,l),o=!0},p(a,l){let u=t;t=c(a),t!==u&&(q(),m(s[u],1,1,()=>{s[u]=null}),j(),n=s[t],n||(n=s[t]=r[t](a),n.c()),d(n,1),n.m(e.parentNode,e))},i(a){o||(d(n),o=!0)},o(a){m(n),o=!1},d(a){a&&x(e),s[t].d(a)}}}function g7(i){let t,n,e,o,r=i[0]&&Td(i);return{c(){r&&r.c(),t=ft()},m(s,c){r&&r.m(s,c),b(s,t,c),n=!0,e||(o=Dt(window,"message",i[5].onMessageFromExtension),e=!0)},p(s,[c]){s[0]?r?(r.p(s,c),1&c&&d(r,1)):(r=Td(s),r.c(),d(r,1),r.m(t.parentNode,t)):r&&(q(),m(r,1,1,()=>{r=null}),j())},i(s){n||(d(r),n=!0)},o(s){m(r),n=!1},d(s){s&&x(t),r&&r.d(s),e=!1,o()}}}function h7(i,t,n){let e,o;const r=new Oi(xn),s=Re({state:Bn.idle});Tt(i,s,f=>n(2,o=f));const c=Hn(s,f=>f.state);Tt(i,c,f=>n(1,e=f));const a={handleMessageFromExtension:f=>!(!f.data||f.data.type!==We.orientationStatusUpdate)&&(s.set(f.data.data),!0)};let l,u;so(()=>{r.registerConsumer(a),xn.postMessage({type:We.getOrientationStatus})});let $=!1;return i.$$.update=()=>{var f;2&i.$$.dirty&&n(3,l=(f=e)===Bn.succeeded?"success":f===Bn.failed||f===Bn.aborted?"error":"warning"),6&i.$$.dirty&&n(4,u=function(p,_){return p===Bn.succeeded?"Orientation complete! Check out `.augment/rules` folder.":p===Bn.failed?_.errorMessage?`Orientation failed: ${_.errorMessage}`:"Orientation failed":p===Bn.aborted?_.errorMessage?`Orientation aborted: ${_.errorMessage}`:"Orientation aborted":"Orienting to codebase and creating rules in `.augment/rules` folder... "}(e,o)),3&i.$$.dirty&&($?e!==Bn.succeeded&&e!==Bn.failed&&e!==Bn.aborted||setTimeout(()=>{n(0,$=!1)},3e3):e===Bn.inProgress&&n(0,$=!0))},[$,e,o,l,u,r,s,c]}class v7 extends ut{constructor(t){super(),dt(this,t,h7,g7,lt,{})}}function Ed(i){let t,n;return t=new Zn({props:{color:"error",size:1,$$slots:{icon:[y7],default:[w7]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function w7(i){let t;return{c(){t=V("Syncing disabled")},m(n,e){b(n,t,e)},d(n){n&&x(t)}}}function y7(i){let t,n;return t=new K1({}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function x7(i){let t,n,e=i[1].syncEnabledState==="disabled"&&Ed(i);return{c(){e&&e.c(),t=ft()},m(o,r){e&&e.m(o,r),b(o,t,r),n=!0},p(o,[r]){o[1].syncEnabledState==="disabled"?e?2&r&&d(e,1):(e=Ed(o),e.c(),d(e,1),e.m(t.parentNode,t)):e&&(q(),m(e,1,1,()=>{e=null}),j())},i(o){n||(d(e),n=!0)},o(o){m(e),n=!1},d(o){o&&x(t),e&&e.d(o)}}}function b7(i,t,n){let e,o=N,r=()=>(o(),o=ie(s,c=>n(1,e=c)),s);i.$$.on_destroy.push(()=>o());let{contextModel:s}=t;return r(),i.$$set=c=>{"contextModel"in c&&r(n(0,s=c.contextModel))},[s,e]}class _7 extends ut{constructor(t){super(),dt(this,t,b7,x7,lt,{contextModel:0})}}function Id(i){let t,n;return t=new Zn({props:{color:i[2],size:1,$$slots:{icon:[k7],default:[C7]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};4&o&&(r.color=e[2]),89&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function C7(i){var o;let t,n,e=((o=i[0])==null?void 0:o.status)===ko.done?"":` ${i[4]}%`;return{c(){t=V(i[3]),n=V(e)},m(r,s){b(r,t,s),b(r,n,s)},p(r,s){var c;8&s&&bt(t,r[3]),17&s&&e!==(e=((c=r[0])==null?void 0:c.status)===ko.done?"":` ${r[4]}%`)&&bt(n,e)},d(r){r&&(x(t),x(n))}}}function A7(i){let t,n,e;return n=new B$({}),{c(){t=L("div"),v(n.$$.fragment),A(t,"class","c-sync-status--spin-icon svelte-18a88kw")},m(o,r){b(o,t,r),w(n,t,null),e=!0},i(o){e||(d(n.$$.fragment,o),e=!0)},o(o){m(n.$$.fragment,o),e=!1},d(o){o&&x(t),y(n)}}}function M7(i){let t,n;return t=new Ho({}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function k7(i){let t,n,e,o;const r=[M7,A7],s=[];function c(a,l){var u;return((u=a[0])==null?void 0:u.status)===ko.done?0:1}return t=c(i),n=s[t]=r[t](i),{c(){n.c(),e=ft()},m(a,l){s[t].m(a,l),b(a,e,l),o=!0},p(a,l){let u=t;t=c(a),t!==u&&(q(),m(s[u],1,1,()=>{s[u]=null}),j(),n=s[t],n||(n=s[t]=r[t](a),n.c()),d(n,1),n.m(e.parentNode,e))},i(a){o||(d(n),o=!0)},o(a){m(n),o=!1},d(a){a&&x(e),s[t].d(a)}}}function S7(i){let t,n,e=!isNaN(i[4])&&i[1],o=e&&Id(i);return{c(){o&&o.c(),t=ft()},m(r,s){o&&o.m(r,s),b(r,t,s),n=!0},p(r,[s]){18&s&&(e=!isNaN(r[4])&&r[1]),e?o?(o.p(r,s),18&s&&d(o,1)):(o=Id(r),o.c(),d(o,1),o.m(t.parentNode,t)):o&&(q(),m(o,1,1,()=>{o=null}),j())},i(r){n||(d(o),n=!0)},o(r){m(o),n=!1},d(r){r&&x(t),o&&o.d(r)}}}function T7(i,t,n){let e,o,r,s,{progress:c}=t;return i.$$set=a=>{"progress"in a&&n(0,c=a.progress)},i.$$.update=()=>{var a;1&i.$$.dirty&&n(4,e=!(a=c)||a.totalFiles<=0?NaN:a.status===ko.done?100:Math.floor(a.syncedCount/a.totalFiles*100)),1&i.$$.dirty&&n(2,s=(c==null?void 0:c.status)===ko.done?"success":"info"),1&i.$$.dirty&&n(3,o=(c==null?void 0:c.status)===ko.done?"Indexing complete.":"Indexing codebase..."),3&i.$$.dirty&&(r?(c==null?void 0:c.status)===ko.done&&setTimeout(()=>{n(1,r=!1)},3e3):c&&c.status!==ko.done&&(c.status===ko.longRunning||c.newlyTrackedFolders.length>0)&&n(1,r=!0))},n(1,r=!1),[c,r,s,o,e]}class E7 extends ut{constructor(t){super(),dt(this,t,T7,S7,lt,{progress:0})}}function I7(i){let t,n,e,o,r,s;return t=new _7({props:{contextModel:i[0]}}),e=new E7({props:{progress:i[1].syncProgress}}),r=new v7({}),{c(){v(t.$$.fragment),n=H(),v(e.$$.fragment),o=H(),v(r.$$.fragment)},m(c,a){w(t,c,a),b(c,n,a),w(e,c,a),b(c,o,a),w(r,c,a),s=!0},p(c,[a]){const l={};1&a&&(l.contextModel=c[0]),t.$set(l);const u={};2&a&&(u.progress=c[1].syncProgress),e.$set(u)},i(c){s||(d(t.$$.fragment,c),d(e.$$.fragment,c),d(r.$$.fragment,c),s=!0)},o(c){m(t.$$.fragment,c),m(e.$$.fragment,c),m(r.$$.fragment,c),s=!1},d(c){c&&(x(n),x(o)),y(t,c),y(e,c),y(r,c)}}}function L7(i,t,n){let e,o=N,r=()=>(o(),o=ie(s,c=>n(1,e=c)),s);i.$$.on_destroy.push(()=>o());let{contextModel:s}=t;return r(),i.$$set=c=>{"contextModel"in c&&r(n(0,s=c.contextModel))},[s,e]}class R7 extends ut{constructor(t){super(),dt(this,t,L7,I7,lt,{contextModel:0})}}function D7(i){let t,n;return t=new sr({}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function P7(i){let t,n;return t=new fe({props:{variant:"ghost-block",color:"neutral",size:1,title:"Agent options",$$slots:{default:[D7]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};65536&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function Ld(i){let t,n;return t=new xt.Item({props:{title:"Pin or unpin agent",onSelect:i[11],$$slots:{iconLeft:[F7],default:[N7]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};8&o&&(r.onSelect=e[11]),65540&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function N7(i){let t,n=i[2]?"Unpin":"Pin";return{c(){t=V(n)},m(e,o){b(e,t,o)},p(e,o){4&o&&n!==(n=e[2]?"Unpin":"Pin")&&bt(t,n)},d(e){e&&x(t)}}}function F7(i){let t,n;return t=new Ds({props:{class:"pin-icon"}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p:N,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function O7(i){let t;return{c(){t=V("Copy ID")},m(n,e){b(n,t,e)},p:N,d(n){n&&x(t)}}}function z7(i){let t,n=i[5].get(i[0])+"";return{c(){t=V(n)},m(e,o){b(e,t,o)},p(e,o){33&o&&n!==(n=e[5].get(e[0])+"")&&bt(t,n)},d(e){e&&x(t)}}}function B7(i){let t,n;function e(s,c){return 33&c&&(t=null),t==null&&(t=!!s[5].get(s[0])),t?z7:O7}let o=e(i,-1),r=o(i);return{c(){r.c(),n=ft()},m(s,c){r.m(s,c),b(s,n,c)},p(s,c){o===(o=e(s,c))&&r?r.p(s,c):(r.d(1),r=o(s),r&&(r.c(),r.m(n.parentNode,n)))},d(s){s&&x(n),r.d(s)}}}function H7(i){let t,n;return t=new im({props:{slot:"iconLeft"}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p:N,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function U7(i){let t;return{c(){t=V("Share")},m(n,e){b(n,t,e)},p:N,d(n){n&&x(t)}}}function q7(i){let t,n=i[6].get(i[0])+"";return{c(){t=V(n)},m(e,o){b(e,t,o)},p(e,o){65&o&&n!==(n=e[6].get(e[0])+"")&&bt(t,n)},d(e){e&&x(t)}}}function j7(i){let t,n;function e(s,c){return 65&c&&(t=null),t==null&&(t=!!s[6].get(s[0])),t?q7:U7}let o=e(i,-1),r=o(i);return{c(){r.c(),n=ft()},m(s,c){r.m(s,c),b(s,n,c)},p(s,c){o===(o=e(s,c))&&r?r.p(s,c):(r.d(1),r=o(s),r&&(r.c(),r.m(n.parentNode,n)))},d(s){s&&x(n),r.d(s)}}}function W7(i){let t,n;return t=new Bi({props:{slot:"iconLeft"}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p:N,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function Rd(i){let t,n,e,o,r,s;return t=new xt.Separator({}),e=new xt.Label({props:{$$slots:{default:[V7]},$$scope:{ctx:i}}}),r=new xt.Item({props:{disabled:!0,$$slots:{default:[G7]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment),n=H(),v(e.$$.fragment),o=H(),v(r.$$.fragment)},m(c,a){w(t,c,a),b(c,n,a),w(e,c,a),b(c,o,a),w(r,c,a),s=!0},p(c,a){const l={};65536&a&&(l.$$scope={dirty:a,ctx:c}),e.$set(l);const u={};65538&a&&(u.$$scope={dirty:a,ctx:c}),r.$set(u)},i(c){s||(d(t.$$.fragment,c),d(e.$$.fragment,c),d(r.$$.fragment,c),s=!0)},o(c){m(t.$$.fragment,c),m(e.$$.fragment,c),m(r.$$.fragment,c),s=!1},d(c){c&&(x(n),x(o)),y(t,c),y(e,c),y(r,c)}}}function V7(i){let t;return{c(){t=V("Branch")},m(n,e){b(n,t,e)},d(n){n&&x(t)}}}function G7(i){let t;return{c(){t=V(i[1])},m(n,e){b(n,t,e)},p(n,e){2&e&&bt(t,n[1])},d(n){n&&x(t)}}}function K7(i){let t,n,e,o,r,s,c,a=i[3]&&Ld(i);n=new xt.Item({props:{onSelect:i[12],$$slots:{iconLeft:[H7],default:[B7]},$$scope:{ctx:i}}}),o=new xt.Item({props:{onSelect:i[13],$$slots:{iconLeft:[W7],default:[j7]},$$scope:{ctx:i}}});let l=i[1]&&Rd(i);return{c(){a&&a.c(),t=H(),v(n.$$.fragment),e=H(),v(o.$$.fragment),r=H(),l&&l.c(),s=ft()},m(u,$){a&&a.m(u,$),b(u,t,$),w(n,u,$),b(u,e,$),w(o,u,$),b(u,r,$),l&&l.m(u,$),b(u,s,$),c=!0},p(u,$){u[3]?a?(a.p(u,$),8&$&&d(a,1)):(a=Ld(u),a.c(),d(a,1),a.m(t.parentNode,t)):a&&(q(),m(a,1,1,()=>{a=null}),j());const f={};65569&$&&(f.$$scope={dirty:$,ctx:u}),n.$set(f);const p={};16&$&&(p.onSelect=u[13]),65601&$&&(p.$$scope={dirty:$,ctx:u}),o.$set(p),u[1]?l?(l.p(u,$),2&$&&d(l,1)):(l=Rd(u),l.c(),d(l,1),l.m(s.parentNode,s)):l&&(q(),m(l,1,1,()=>{l=null}),j())},i(u){c||(d(a),d(n.$$.fragment,u),d(o.$$.fragment,u),d(l),c=!0)},o(u){m(a),m(n.$$.fragment,u),m(o.$$.fragment,u),m(l),c=!1},d(u){u&&(x(t),x(e),x(r),x(s)),a&&a.d(u),y(n,u),y(o,u),l&&l.d(u)}}}function Y7(i){let t,n,e,o;return t=new xt.Trigger({props:{$$slots:{default:[P7]},$$scope:{ctx:i}}}),e=new xt.Content({props:{size:1,side:"bottom",align:"end",$$slots:{default:[K7]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment),n=H(),v(e.$$.fragment)},m(r,s){w(t,r,s),b(r,n,s),w(e,r,s),o=!0},p(r,s){const c={};65536&s&&(c.$$scope={dirty:s,ctx:r}),t.$set(c);const a={};65663&s&&(a.$$scope={dirty:s,ctx:r}),e.$set(a)},i(r){o||(d(t.$$.fragment,r),d(e.$$.fragment,r),o=!0)},o(r){m(t.$$.fragment,r),m(e.$$.fragment,r),o=!1},d(r){r&&x(n),y(t,r),y(e,r)}}}function X7(i){let t,n,e;function o(s){i[14](s)}let r={nested:!1,$$slots:{default:[Y7]},$$scope:{ctx:i}};return i[4]!==void 0&&(r.requestClose=i[4]),t=new xt.Root({props:r}),Qt.push(()=>Ne(t,"requestClose",o)),{c(){v(t.$$.fragment)},m(s,c){w(t,s,c),e=!0},p(s,[c]){const a={};65663&c&&(a.$$scope={dirty:c,ctx:s}),!n&&16&c&&(n=!0,a.requestClose=s[4],Be(()=>n=!1)),t.$set(a)},i(s){e||(d(t.$$.fragment,s),e=!0)},o(s){m(t.$$.fragment,s),e=!1},d(s){y(t,s)}}}function Z7(i,t,n){let e,o,{agentId:r}=t,{selectedBranch:s}=t,{isPinned:c=!1}=t,{togglePinned:a}=t,l=()=>{};const u=Re(new Map);Tt(i,u,C=>n(5,e=C));const $=Re(new Map);Tt(i,$,C=>n(6,o=C));const f=kt(Rn.key);function p(){navigator.clipboard.writeText(r),u.update(C=>(C.set(r,"Copied!"),C)),setTimeout(()=>{u.update(C=>(C.delete(r),C))},1e3)}async function _(){try{const C=await(f==null?void 0:f.getConversationUrl(r));C&&navigator.clipboard.writeText(C),$.update(M=>(M.set(r,"Link copied!"),M)),setTimeout(()=>{$.update(M=>(M.delete(r),M))},1e3)}catch(C){console.error("Failed to get conversation URL: ",C)}}return i.$$set=C=>{"agentId"in C&&n(0,r=C.agentId),"selectedBranch"in C&&n(1,s=C.selectedBranch),"isPinned"in C&&n(2,c=C.isPinned),"togglePinned"in C&&n(3,a=C.togglePinned)},[r,s,c,a,l,e,o,u,$,p,_,()=>{a()},()=>{p()},()=>{_(),l()},function(C){l=C,n(4,l)}]}class Xm extends ut{constructor(t){super(),dt(this,t,Z7,X7,lt,{agentId:0,selectedBranch:1,isPinned:2,togglePinned:3})}}function Dd(i){let t,n,e,o;n=new Wt({props:{size:i[4],weight:i[9],color:i[10],$$slots:{default:[t9]},$$scope:{ctx:i}}});let r=i[8]&&Pd(i);return{c(){t=L("div"),v(n.$$.fragment),e=H(),r&&r.c(),A(t,"class","c-inline-edit-text-augment__input svelte-jmpnji")},m(s,c){b(s,t,c),w(n,t,null),O(t,e),r&&r.m(t,null),o=!0},p(s,c){const a={};16&c[0]&&(a.size=s[4]),512&c[0]&&(a.weight=s[9]),1024&c[0]&&(a.color=s[10]),41100&c[0]|64&c[1]&&(a.$$scope={dirty:c,ctx:s}),n.$set(a),s[8]?r?(r.p(s,c),256&c[0]&&d(r,1)):(r=Pd(s),r.c(),d(r,1),r.m(t,null)):r&&(q(),m(r,1,1,()=>{r=null}),j())},i(s){o||(d(n.$$.fragment,s),d(r),o=!0)},o(s){m(n.$$.fragment,s),m(r),o=!1},d(s){s&&x(t),y(n),r&&r.d()}}}function J7(i){let t,n,e;return{c(){t=L("input"),qn(t,"field-sizing","content"),A(t,"class","c-inline-edit-text-augment__input-field svelte-jmpnji"),A(t,"type","text"),A(t,"placeholder",i[2]),t.disabled=i[3]},m(o,r){b(o,t,r),i[33](t),hr(t,i[15]),n||(e=[Dt(t,"input",i[34]),Dt(t,"keydown",i[16]),Dt(t,"blur",i[19])],n=!0)},p(o,r){4&r[0]&&A(t,"placeholder",o[2]),8&r[0]&&(t.disabled=o[3]),32768&r[0]&&t.value!==o[15]&&hr(t,o[15])},d(o){o&&x(t),i[33](null),n=!1,tn(e)}}}function Q7(i){let t,n,e;return{c(){t=L("textarea"),qn(t,"field-sizing","content"),A(t,"class","c-inline-edit-text-augment__input-field svelte-jmpnji"),A(t,"placeholder",i[2]),t.disabled=i[3],A(t,"rows","1")},m(o,r){b(o,t,r),i[31](t),hr(t,i[15]),n||(e=[Dt(t,"input",i[32]),Dt(t,"keydown",i[16]),Dt(t,"blur",i[19])],n=!0)},p(o,r){4&r[0]&&A(t,"placeholder",o[2]),8&r[0]&&(t.disabled=o[3]),32768&r[0]&&hr(t,o[15])},d(o){o&&x(t),i[31](null),n=!1,tn(e)}}}function t9(i){let t;function n(r,s){return r[7]?Q7:J7}let e=n(i),o=e(i);return{c(){o.c(),t=ft()},m(r,s){o.m(r,s),b(r,t,s)},p(r,s){e===(e=n(r))&&o?o.p(r,s):(o.d(1),o=e(r),o&&(o.c(),o.m(t.parentNode,t)))},d(r){r&&x(t),o.d(r)}}}function Pd(i){let t,n;return t=new fe({props:{size:1,variant:i[11],color:i[12],disabled:i[3],$$slots:{default:[e9]},$$scope:{ctx:i}}}),t.$on("click",i[18]),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};2048&o[0]&&(r.variant=e[11]),4096&o[0]&&(r.color=e[12]),8&o[0]&&(r.disabled=e[3]),64&o[1]&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function e9(i){let t,n;return t=new Ps({}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function n9(i){let t,n=(i[0]||i[2])+"";return{c(){t=V(n)},m(e,o){b(e,t,o)},p(e,o){5&o[0]&&n!==(n=(e[0]||e[2])+"")&&bt(t,n)},d(e){e&&x(t)}}}function o9(i){let t,n,e,o,r,s,c,a,l,u=i[6]&&!i[3]&&i[1]&&Dd(i);const $=i[30].default,f=Yt($,i,i[37],null),p=f||function(_){let C,M;return C=new Wt({props:{size:_[4],weight:_[9],color:_[10],value:_[0],placeholder:_[2],$$slots:{default:[n9]},$$scope:{ctx:_}}}),{c(){v(C.$$.fragment)},m(T,E){w(C,T,E),M=!0},p(T,E){const R={};16&E[0]&&(R.size=T[4]),512&E[0]&&(R.weight=T[9]),1024&E[0]&&(R.color=T[10]),1&E[0]&&(R.value=T[0]),4&E[0]&&(R.placeholder=T[2]),5&E[0]|64&E[1]&&(R.$$scope={dirty:E,ctx:T}),C.$set(R)},i(T){M||(d(C.$$.fragment,T),M=!0)},o(T){m(C.$$.fragment,T),M=!1},d(T){y(C,T)}}}(i);return{c(){t=L("div"),u&&u.c(),n=H(),e=L("div"),p&&p.c(),A(e,"class","c-inline-edit-text-augment__text svelte-jmpnji"),A(e,"role","button"),A(e,"tabindex",o=i[6]&&!i[3]?0:void 0),A(e,"aria-label",r=i[0]||i[2]),At(e,"c-inline-edit-text-augment__text--editable",i[6]&&!i[3]),A(t,"class",s="c-inline-edit-text-augment "+i[5]+" svelte-jmpnji"),At(t,"c-inline-edit-text-augment--is-editing",i[1]),At(t,"c-inline-edit-text-augment--disabled",i[3]),At(t,"c-inline-edit-text-augment--is-editable",i[6])},m(_,C){b(_,t,C),u&&u.m(t,null),O(t,n),O(t,e),p&&p.m(e,null),i[36](t),c=!0,a||(l=[Dt(e,"click",i[20]),Dt(e,"keydown",i[35])],a=!0)},p(_,C){_[6]&&!_[3]&&_[1]?u?(u.p(_,C),74&C[0]&&d(u,1)):(u=Dd(_),u.c(),d(u,1),u.m(t,n)):u&&(q(),m(u,1,1,()=>{u=null}),j()),f?f.p&&(!c||64&C[1])&&Xt(f,$,_,_[37],c?Jt($,_[37],C,null):Zt(_[37]),null):p&&p.p&&(!c||1557&C[0])&&p.p(_,c?C:[-1,-1]),(!c||72&C[0]&&o!==(o=_[6]&&!_[3]?0:void 0))&&A(e,"tabindex",o),(!c||5&C[0]&&r!==(r=_[0]||_[2]))&&A(e,"aria-label",r),(!c||72&C[0])&&At(e,"c-inline-edit-text-augment__text--editable",_[6]&&!_[3]),(!c||32&C[0]&&s!==(s="c-inline-edit-text-augment "+_[5]+" svelte-jmpnji"))&&A(t,"class",s),(!c||34&C[0])&&At(t,"c-inline-edit-text-augment--is-editing",_[1]),(!c||40&C[0])&&At(t,"c-inline-edit-text-augment--disabled",_[3]),(!c||96&C[0])&&At(t,"c-inline-edit-text-augment--is-editable",_[6])},i(_){c||(d(u),d(p,_),c=!0)},o(_){m(u),m(p,_),c=!1},d(_){_&&x(t),u&&u.d(),p&&p.d(_),i[36](null),a=!1,tn(l)}}}function r9(i,t,n){let e,o,{$$slots:r={},$$scope:s}=t,{value:c=""}=t,{placeholder:a=""}=t,{disabled:l=!1}=t,{size:u=2}=t,{class:$=""}=t,{isEditing:f=!1}=t,{isEditable:p=!0}=t,{multiline:_=!0}=t,{showCommitButton:C=!0}=t,{commitOnBlur:M=!0}=t,{commitOnEnter:T=!0}=t,{allowCtrlEnterForNewline:E=!0}=t,{doubleClickToEdit:R=!0}=t,{singleClickToEdit:P=!1}=t,{weight:J}=t,{color:K}=t,{onCancelEdit:et=ct=>{}}=t,{onStartEdit:U=()=>{}}=t,{onChange:G=(ct,vt)=>{}}=t,{outsideNode:nt}=t,{commitButtonVariant:X="classic"}=t,{commitButtonColor:Y="accent"}=t,Z=c;function it(){n(15,Z=c),n(1,f=!1),et(c)}function rt(){p&&!l&&(f||(U(),n(1,f=!0)),setTimeout(()=>{e==null||e.focus()},0))}function ht(){const ct=Z.trim(),vt=c;ct!==vt&&(n(0,c=ct),G(ct,vt)),setTimeout(()=>{e==null||e.blur()},0),n(1,f=!1)}return so(()=>{const ct=vt=>{var Gt;f&&((Gt=nt||o)==null?void 0:Gt.contains(vt.target))===!1&&(M?ht():it())};return document.addEventListener("click",ct),()=>{document.removeEventListener("click",ct)}}),i.$$set=ct=>{"value"in ct&&n(0,c=ct.value),"placeholder"in ct&&n(2,a=ct.placeholder),"disabled"in ct&&n(3,l=ct.disabled),"size"in ct&&n(4,u=ct.size),"class"in ct&&n(5,$=ct.class),"isEditing"in ct&&n(1,f=ct.isEditing),"isEditable"in ct&&n(6,p=ct.isEditable),"multiline"in ct&&n(7,_=ct.multiline),"showCommitButton"in ct&&n(8,C=ct.showCommitButton),"commitOnBlur"in ct&&n(21,M=ct.commitOnBlur),"commitOnEnter"in ct&&n(22,T=ct.commitOnEnter),"allowCtrlEnterForNewline"in ct&&n(23,E=ct.allowCtrlEnterForNewline),"doubleClickToEdit"in ct&&n(24,R=ct.doubleClickToEdit),"singleClickToEdit"in ct&&n(25,P=ct.singleClickToEdit),"weight"in ct&&n(9,J=ct.weight),"color"in ct&&n(10,K=ct.color),"onCancelEdit"in ct&&n(26,et=ct.onCancelEdit),"onStartEdit"in ct&&n(27,U=ct.onStartEdit),"onChange"in ct&&n(28,G=ct.onChange),"outsideNode"in ct&&n(29,nt=ct.outsideNode),"commitButtonVariant"in ct&&n(11,X=ct.commitButtonVariant),"commitButtonColor"in ct&&n(12,Y=ct.commitButtonColor),"$$scope"in ct&&n(37,s=ct.$$scope)},i.$$.update=()=>{3&i.$$.dirty[0]&&(f||n(15,Z=c)),2&i.$$.dirty[0]&&f&&rt()},[c,f,a,l,u,$,p,_,C,J,K,X,Y,e,o,Z,function(ct){T&&ct.key==="Enter"?_&&E&&(ct.ctrlKey||ct.metaKey||ct.altKey||ct.shiftKey)||(ct.preventDefault(),ht()):ct.key==="Escape"&&(ct.preventDefault(),it())},rt,ht,function(){M&&f&&ht()},function(ct){(P||R&&ct.detail===2)&&rt()},M,T,E,R,P,et,U,G,nt,r,function(ct){Qt[ct?"unshift":"push"](()=>{e=ct,n(13,e)})},function(){Z=this.value,n(15,Z),n(1,f),n(0,c)},function(ct){Qt[ct?"unshift":"push"](()=>{e=ct,n(13,e)})},function(){Z=this.value,n(15,Z),n(1,f),n(0,c)},ct=>{ct.key==="Enter"&&rt()},function(ct){Qt[ct?"unshift":"push"](()=>{o=ct,n(14,o)})},s]}class i9 extends ut{constructor(t){super(),dt(this,t,r9,o9,lt,{value:0,placeholder:2,disabled:3,size:4,class:5,isEditing:1,isEditable:6,multiline:7,showCommitButton:8,commitOnBlur:21,commitOnEnter:22,allowCtrlEnterForNewline:23,doubleClickToEdit:24,singleClickToEdit:25,weight:9,color:10,onCancelEdit:26,onStartEdit:27,onChange:28,outsideNode:29,commitButtonVariant:11,commitButtonColor:12},null,[-1,-1])}}const s9=i=>({}),Nd=i=>({}),a9=i=>({}),Fd=i=>({}),c9=i=>({}),Od=i=>({}),l9=i=>({}),zd=i=>({}),u9=i=>({}),Bd=i=>({}),d9=i=>({}),Hd=i=>({});function $9(i){let t,n;const e=i[11].icon,o=Yt(e,i,i[15],Bd);return{c(){t=L("span"),o&&o.c(),A(t,"class","c-thread-header__title-icon-content")},m(r,s){b(r,t,s),o&&o.m(t,null),n=!0},p(r,s){o&&o.p&&(!n||32768&s)&&Xt(o,e,r,r[15],n?Jt(e,r[15],s,u9):Zt(r[15]),Bd)},i(r){n||(d(o,r),n=!0)},o(r){m(o,r),n=!1},d(r){r&&x(t),o&&o.d(r)}}}function m9(i){let t,n,e;function o(s){i[13](s)}let r={outsideNode:i[4],size:1,weight:"bold",value:i[1]||"New Thread",color:"primary",isEditable:i[5],showCommitButton:!1,singleClickToEdit:!0,onChange:i[2]};return i[0]!==void 0&&(r.isEditing=i[0]),t=new i9({props:r}),Qt.push(()=>Ne(t,"isEditing",o)),{c(){v(t.$$.fragment)},m(s,c){w(t,s,c),e=!0},p(s,c){const a={};16&c&&(a.outsideNode=s[4]),2&c&&(a.value=s[1]||"New Thread"),32&c&&(a.isEditable=s[5]),4&c&&(a.onChange=s[2]),!n&&1&c&&(n=!0,a.isEditing=s[0],Be(()=>n=!1)),t.$set(a)},i(s){e||(d(t.$$.fragment,s),e=!0)},o(s){m(t.$$.fragment,s),e=!1},d(s){y(t,s)}}}function Ud(i){let t;const n=i[11]["title-actions"],e=Yt(n,i,i[15],Od);return{c(){e&&e.c()},m(o,r){e&&e.m(o,r),t=!0},p(o,r){e&&e.p&&(!t||32768&r)&&Xt(e,n,o,o[15],t?Jt(n,o[15],r,c9):Zt(o[15]),Od)},i(o){t||(d(e,o),t=!0)},o(o){m(e,o),t=!1},d(o){e&&e.d(o)}}}function qd(i){let t,n;const e=i[11]["info-row"],o=Yt(e,i,i[15],Fd);return{c(){t=L("div"),o&&o.c(),A(t,"class","c-thread-header__info-row svelte-9hycug")},m(r,s){b(r,t,s),o&&o.m(t,null),n=!0},p(r,s){o&&o.p&&(!n||32768&s)&&Xt(o,e,r,r[15],n?Jt(e,r[15],s,a9):Zt(r[15]),Fd)},i(r){n||(d(o,r),n=!0)},o(r){m(o,r),n=!1},d(r){r&&x(t),o&&o.d(r)}}}function f9(i){let t,n,e,o,r,s,c,a,l,u,$,f,p,_;Ln(i[12]);const C=i[11].banner,M=Yt(C,i,i[15],Hd);r=new fe({props:{size:0,class:"c-thread-header__title-icon",variant:"ghost-block",disabled:!i[5],color:"neutral",title:i[5]?"Edit Thread Title":"Add content to edit thread title",$$slots:{default:[$9]},$$scope:{ctx:i}}}),r.$on("click",i[7]);const T=i[11].title,E=Yt(T,i,i[15],zd),R=E||function(U){let G,nt;return G=new zt({props:{content:"Rename",nested:!1,hasPointerEvents:!1,class:"c-thread-header__title-text",$$slots:{default:[m9]},$$scope:{ctx:U}}}),{c(){v(G.$$.fragment)},m(X,Y){w(G,X,Y),nt=!0},p(X,Y){const Z={};32823&Y&&(Z.$$scope={dirty:Y,ctx:X}),G.$set(Z)},i(X){nt||(d(G.$$.fragment,X),nt=!0)},o(X){m(G.$$.fragment,X),nt=!1},d(X){y(G,X)}}}(i);let P=!i[0]&&Ud(i),J=!i[6]&&qd(i);const K=i[11].status,et=Yt(K,i,i[15],Nd);return{c(){t=L("div"),n=L("div"),M&&M.c(),e=H(),o=L("div"),v(r.$$.fragment),s=H(),c=L("div"),R&&R.c(),a=H(),P&&P.c(),l=H(),J&&J.c(),u=H(),$=L("div"),et&&et.c(),A(n,"class","c-thread-header__banner svelte-9hycug"),A(c,"class","c-thread-header__title-main svelte-9hycug"),A(o,"class","c-thread-header__title svelte-9hycug"),A($,"class","c-thread-header__status svelte-9hycug"),A(t,"class","c-thread-header svelte-9hycug"),At(t,"c-thread-header--is-editing",i[5]&&i[0]),At(t,"c-thread-header--is-editable",i[5])},m(U,G){b(U,t,G),O(t,n),M&&M.m(n,null),O(t,e),O(t,o),w(r,o,null),O(o,s),O(o,c),R&&R.m(c,null),O(o,a),P&&P.m(o,null),O(t,l),J&&J.m(t,null),O(t,u),O(t,$),et&&et.m($,null),i[14](t),f=!0,p||(_=Dt(window,"resize",i[12]),p=!0)},p(U,[G]){M&&M.p&&(!f||32768&G)&&Xt(M,C,U,U[15],f?Jt(C,U[15],G,d9):Zt(U[15]),Hd);const nt={};32&G&&(nt.disabled=!U[5]),32&G&&(nt.title=U[5]?"Edit Thread Title":"Add content to edit thread title"),32768&G&&(nt.$$scope={dirty:G,ctx:U}),r.$set(nt),E?E.p&&(!f||32768&G)&&Xt(E,T,U,U[15],f?Jt(T,U[15],G,l9):Zt(U[15]),zd):R&&R.p&&(!f||55&G)&&R.p(U,f?G:-1),U[0]?P&&(q(),m(P,1,1,()=>{P=null}),j()):P?(P.p(U,G),1&G&&d(P,1)):(P=Ud(U),P.c(),d(P,1),P.m(o,null)),U[6]?J&&(q(),m(J,1,1,()=>{J=null}),j()):J?(J.p(U,G),64&G&&d(J,1)):(J=qd(U),J.c(),d(J,1),J.m(t,u)),et&&et.p&&(!f||32768&G)&&Xt(et,K,U,U[15],f?Jt(K,U[15],G,s9):Zt(U[15]),Nd),(!f||33&G)&&At(t,"c-thread-header--is-editing",U[5]&&U[0]),(!f||32&G)&&At(t,"c-thread-header--is-editable",U[5])},i(U){f||(d(M,U),d(r.$$.fragment,U),d(R,U),d(P),d(J),d(et,U),f=!0)},o(U){m(M,U),m(r.$$.fragment,U),m(R,U),m(P),m(J),m(et,U),f=!1},d(U){U&&x(t),M&&M.d(U),y(r),R&&R.d(U),P&&P.d(),J&&J.d(),et&&et.d(U),i[14](null),p=!1,_()}}}function p9(i,t,n){let e,o,r,{$$slots:s={},$$scope:c}=t,{title:a=""}=t,{isSquished:l=!1}=t,{isEditing:u=!1}=t,{isEditable:$=!0}=t,{isThreadEmpty:f=!1}=t,{onRename:p=C=>{}}=t,_=0;return i.$$set=C=>{"title"in C&&n(1,a=C.title),"isSquished"in C&&n(8,l=C.isSquished),"isEditing"in C&&n(0,u=C.isEditing),"isEditable"in C&&n(9,$=C.isEditable),"isThreadEmpty"in C&&n(10,f=C.isThreadEmpty),"onRename"in C&&n(2,p=C.onRename),"$$scope"in C&&n(15,c=C.$$scope)},i.$$.update=()=>{1536&i.$$.dirty&&n(5,e=$&&!f),264&i.$$.dirty&&n(6,o=l||_<700)},[u,a,p,_,r,e,o,function(){n(0,u=e&&!0)},l,$,f,s,function(){n(3,_=window.innerHeight)},function(C){u=C,n(0,u)},function(C){Qt[C?"unshift":"push"](()=>{r=C,n(4,r)})},c]}class Zm extends ut{constructor(t){super(),dt(this,t,p9,f9,lt,{title:1,isSquished:8,isEditing:0,isEditable:9,isThreadEmpty:10,onRename:2})}}function jd(i){let t,n,e;return n=new Zm({props:{title:i[7]?"Generate a setup script":i[8],isEditable:!1,$$slots:{"info-row":[L9],"title-actions":[A9],title:[C9],banner:[w9],icon:[g9]},$$scope:{ctx:i}}}),{c(){t=L("div"),v(n.$$.fragment),A(t,"class","c-agent-header svelte-1i5b8x1"),At(t,"c-agent-header--setup-script",i[7]),At(t,"is-in-remote",i[6])},m(o,r){b(o,t,r),w(n,t,null),e=!0},p(o,r){const s={};384&r&&(s.title=o[7]?"Generate a setup script":o[8]),17143&r&&(s.$$scope={dirty:r,ctx:o}),n.$set(s),(!e||128&r)&&At(t,"c-agent-header--setup-script",o[7]),(!e||64&r)&&At(t,"is-in-remote",o[6])},i(o){e||(d(n.$$.fragment,o),e=!0)},o(o){m(n.$$.fragment,o),e=!1},d(o){o&&x(t),y(n)}}}function g9(i){let t,n;return t=new Hi({props:{slot:"icon"}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p:N,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function h9(i){let t,n,e,o,r;return e=new sm({}),{c(){t=L("span"),n=L("div"),v(e.$$.fragment),o=V(`
            Generate a setup script`),A(n,"class","c-setup-script-badge svelte-1i5b8x1"),A(t,"class","c-agent-header-banner__text svelte-1i5b8x1")},m(s,c){b(s,t,c),O(t,n),w(e,n,null),O(t,o),r=!0},i(s){r||(d(e.$$.fragment,s),r=!0)},o(s){m(e.$$.fragment,s),r=!1},d(s){s&&x(t),y(e)}}}function v9(i){let t,n,e,o,r;return n=new Hi({}),{c(){t=L("div"),v(n.$$.fragment),e=H(),o=L("div"),o.innerHTML='<div class="c-agent-header-banner__text svelte-1i5b8x1">Running in the cloud</div> <div class="c-agent-header-banner__text c-agent-header-banner__text--secondary svelte-1i5b8x1">Workspace opened via SSH in this VSCode window</div>',A(o,"class","c-agent-header-banner__stack svelte-1i5b8x1"),A(t,"class","c-agent-header-banner__with-icon svelte-1i5b8x1")},m(s,c){b(s,t,c),w(n,t,null),O(t,e),O(t,o),r=!0},i(s){r||(d(n.$$.fragment,s),r=!0)},o(s){m(n.$$.fragment,s),r=!1},d(s){s&&x(t),y(n)}}}function Wd(i){let t,n;return t=new Xm({props:{agentId:i[1],selectedBranch:i[4],isPinned:i[5],togglePinned:i[11]}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};2&o&&(r.agentId=e[1]),16&o&&(r.selectedBranch=e[4]),32&o&&(r.isPinned=e[5]),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function w9(i){var u;let t,n,e,o,r;const s=[v9,h9],c=[];function a($,f){var p;return $[6]?0:(p=$[0])!=null&&p.is_setup_script_agent?1:-1}~(t=a(i))&&(n=c[t]=s[t](i));let l=i[1]&&(i[6]||((u=i[0])==null?void 0:u.is_setup_script_agent))&&Wd(i);return{c(){n&&n.c(),e=H(),o=L("div"),l&&l.c(),A(o,"class","c-agent-header__actions svelte-1i5b8x1")},m($,f){~t&&c[t].m($,f),b($,e,f),b($,o,f),l&&l.m(o,null),r=!0},p($,f){var _;let p=t;t=a($),t!==p&&(n&&(q(),m(c[p],1,1,()=>{c[p]=null}),j()),~t?(n=c[t],n||(n=c[t]=s[t]($),n.c()),d(n,1),n.m(e.parentNode,e)):n=null),$[1]&&($[6]||(_=$[0])!=null&&_.is_setup_script_agent)?l?(l.p($,f),67&f&&d(l,1)):(l=Wd($),l.c(),d(l,1),l.m(o,null)):l&&(q(),m(l,1,1,()=>{l=null}),j())},i($){r||(d(n),d(l),r=!0)},o($){m(n),m(l),r=!1},d($){$&&(x(e),x(o)),~t&&c[t].d($),l&&l.d()}}}function y9(i){let t,n,e,o;return n=new Wt({props:{size:2,$$slots:{default:[b9]},$$scope:{ctx:i}}}),{c(){var r;t=L("div"),v(n.$$.fragment),A(t,"class","c-agent-user-message svelte-1i5b8x1"),A(t,"title",e=((r=i[0])==null?void 0:r.session_summary)||"")},m(r,s){b(r,t,s),w(n,t,null),o=!0},p(r,s){var a;const c={};16385&s&&(c.$$scope={dirty:s,ctx:r}),n.$set(c),(!o||1&s&&e!==(e=((a=r[0])==null?void 0:a.session_summary)||""))&&A(t,"title",e)},i(r){o||(d(n.$$.fragment,r),o=!0)},o(r){m(n.$$.fragment,r),o=!1},d(r){r&&x(t),y(n)}}}function x9(i){let t,n,e;return n=new Wt({props:{size:1,truncate:!0,weight:"medium",$$slots:{default:[_9]},$$scope:{ctx:i}}}),{c(){t=L("div"),v(n.$$.fragment),A(t,"class","c-agent-title-content svelte-1i5b8x1")},m(o,r){b(o,t,r),w(n,t,null),e=!0},p(o,r){const s={};16384&r&&(s.$$scope={dirty:r,ctx:o}),n.$set(s)},i(o){e||(d(n.$$.fragment,o),e=!0)},o(o){m(n.$$.fragment,o),e=!1},d(o){o&&x(t),y(n)}}}function b9(i){var e;let t,n=((e=i[0])==null?void 0:e.session_summary)+"";return{c(){t=V(n)},m(o,r){b(o,t,r)},p(o,r){var s;1&r&&n!==(n=((s=o[0])==null?void 0:s.session_summary)+"")&&bt(t,n)},d(o){o&&x(t)}}}function _9(i){let t,n,e,o;return{c(){t=V("We've tasked an agent to generate a setup script for your repository."),n=L("span"),n.textContent="..",e=H(),o=L("span"),o.textContent=`Once created, save it to use in a new remote agent, to install dependencies &
                configure the env before the agent starts.`,A(n,"class","c-agent-title-content__long-text-alternative svelte-1i5b8x1"),A(o,"class","c-agent-title-content__long-text svelte-1i5b8x1")},m(r,s){b(r,t,s),b(r,n,s),b(r,e,s),b(r,o,s)},p:N,d(r){r&&(x(t),x(n),x(e),x(o))}}}function C9(i){let t,n,e,o;const r=[x9,y9],s=[];function c(a,l){return a[7]?0:1}return n=c(i),e=s[n]=r[n](i),{c(){t=L("div"),e.c(),A(t,"slot","title")},m(a,l){b(a,t,l),s[n].m(t,null),o=!0},p(a,l){let u=n;n=c(a),n===u?s[n].p(a,l):(q(),m(s[u],1,1,()=>{s[u]=null}),j(),e=s[n],e?e.p(a,l):(e=s[n]=r[n](a),e.c()),d(e,1),e.m(t,null))},i(a){o||(d(e),o=!0)},o(a){m(e),o=!1},d(a){a&&x(t),s[n].d()}}}function Vd(i){let t,n;return t=new Xm({props:{agentId:i[1],selectedBranch:i[4],isPinned:i[5],togglePinned:i[11]}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};2&o&&(r.agentId=e[1]),16&o&&(r.selectedBranch=e[4]),32&o&&(r.isPinned=e[5]),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function A9(i){var o;let t,n,e=i[1]&&!(i[6]||(o=i[0])!=null&&o.is_setup_script_agent)&&Vd(i);return{c(){t=L("div"),e&&e.c(),A(t,"slot","title-actions"),A(t,"class","c-agent-header__menu svelte-1i5b8x1")},m(r,s){b(r,t,s),e&&e.m(t,null),n=!0},p(r,s){var c;!r[1]||r[6]||(c=r[0])!=null&&c.is_setup_script_agent?e&&(q(),m(e,1,1,()=>{e=null}),j()):e?(e.p(r,s),67&s&&d(e,1)):(e=Vd(r),e.c(),d(e,1),e.m(t,null))},i(r){n||(d(e),n=!0)},o(r){m(e),n=!1},d(r){r&&x(t),e&&e.d()}}}function M9(i){let t;return{c(){t=V(i[9])},m(n,e){b(n,t,e)},p(n,e){512&e&&bt(t,n[9])},d(n){n&&x(t)}}}function k9(i){let t,n,e;return n=new Wt({props:{size:1,$$slots:{default:[M9]},$$scope:{ctx:i}}}),{c(){t=L("div"),v(n.$$.fragment),A(t,"class","c-agent-info-value svelte-1i5b8x1")},m(o,r){b(o,t,r),w(n,t,null),e=!0},p(o,r){const s={};16896&r&&(s.$$scope={dirty:r,ctx:o}),n.$set(s)},i(o){e||(d(n.$$.fragment,o),e=!0)},o(o){m(n.$$.fragment,o),e=!1},d(o){o&&x(t),y(n)}}}function S9(i){let t,n,e,o,r;return n=new pf({}),o=new zt({props:{content:`Repository: ${i[2]}`,triggerOn:[te.Hover],$$slots:{default:[k9]},$$scope:{ctx:i}}}),{c(){t=L("a"),v(n.$$.fragment),e=H(),v(o.$$.fragment),A(t,"href",i[2]),A(t,"class","c-agent-info-item svelte-1i5b8x1")},m(s,c){b(s,t,c),w(n,t,null),O(t,e),w(o,t,null),r=!0},p(s,c){const a={};4&c&&(a.content=`Repository: ${s[2]}`),16896&c&&(a.$$scope={dirty:c,ctx:s}),o.$set(a),(!r||4&c)&&A(t,"href",s[2])},i(s){r||(d(n.$$.fragment,s),d(o.$$.fragment,s),r=!0)},o(s){m(n.$$.fragment,s),m(o.$$.fragment,s),r=!1},d(s){s&&x(t),y(n),y(o)}}}function T9(i){let t;return{c(){t=V(i[4])},m(n,e){b(n,t,e)},p(n,e){16&e&&bt(t,n[4])},d(n){n&&x(t)}}}function E9(i){let t,n,e;return n=new Wt({props:{size:1,$$slots:{default:[T9]},$$scope:{ctx:i}}}),{c(){t=L("div"),v(n.$$.fragment),A(t,"class","c-agent-info-value svelte-1i5b8x1")},m(o,r){b(o,t,r),w(n,t,null),e=!0},p(o,r){const s={};16400&r&&(s.$$scope={dirty:r,ctx:o}),n.$set(s)},i(o){e||(d(n.$$.fragment,o),e=!0)},o(o){m(n.$$.fragment,o),e=!1},d(o){o&&x(t),y(n)}}}function I9(i){let t,n,e,o,r,s;return n=new Bm({}),o=new zt({props:{content:`Started on branch: ${i[4]}`,triggerOn:[te.Hover],$$slots:{default:[E9]},$$scope:{ctx:i}}}),{c(){t=L("a"),v(n.$$.fragment),e=H(),v(o.$$.fragment),A(t,"href",r=`${i[2]}/tree/${i[4]}`),A(t,"class","c-agent-info-item svelte-1i5b8x1")},m(c,a){b(c,t,a),w(n,t,null),O(t,e),w(o,t,null),s=!0},p(c,a){const l={};16&a&&(l.content=`Started on branch: ${c[4]}`),16400&a&&(l.$$scope={dirty:a,ctx:c}),o.$set(l),(!s||20&a&&r!==(r=`${c[2]}/tree/${c[4]}`))&&A(t,"href",r)},i(c){s||(d(n.$$.fragment,c),d(o.$$.fragment,c),s=!0)},o(c){m(n.$$.fragment,c),m(o.$$.fragment,c),s=!1},d(c){c&&x(t),y(n),y(o)}}}function L9(i){let t,n,e,o,r;return n=new So.Root({props:{color:"neutral",radius:"full",$$slots:{default:[S9]},$$scope:{ctx:i}}}),o=new So.Root({props:{color:"neutral",radius:"full",$$slots:{default:[I9]},$$scope:{ctx:i}}}),{c(){t=L("div"),v(n.$$.fragment),e=H(),v(o.$$.fragment),A(t,"slot","info-row"),A(t,"class","c-agent-info-row svelte-1i5b8x1")},m(s,c){b(s,t,c),w(n,t,null),O(t,e),w(o,t,null),r=!0},p(s,c){const a={};16900&c&&(a.$$scope={dirty:c,ctx:s}),n.$set(a);const l={};16404&c&&(l.$$scope={dirty:c,ctx:s}),o.$set(l)},i(s){r||(d(n.$$.fragment,s),d(o.$$.fragment,s),r=!0)},o(s){m(n.$$.fragment,s),m(o.$$.fragment,s),r=!1},d(s){s&&x(t),y(n),y(o)}}}function R9(i){let t,n,e,o;Ln(i[13]);let r=i[0]&&jd(i);return{c(){r&&r.c(),t=ft()},m(s,c){r&&r.m(s,c),b(s,t,c),n=!0,e||(o=Dt(window,"resize",i[13]),e=!0)},p(s,[c]){s[0]?r?(r.p(s,c),1&c&&d(r,1)):(r=jd(s),r.c(),d(r,1),r.m(t.parentNode,t)):r&&(q(),m(r,1,1,()=>{r=null}),j())},i(s){n||(d(r),n=!0)},o(s){m(r),n=!1},d(s){s&&x(t),r&&r.d(s),e=!1,o()}}}function D9(i,t,n){let e,o,r,s,c,a,l,u,$,f,p=0;const _=kt(Rn.key);return Tt(i,_,C=>n(12,f=C)),i.$$.update=()=>{var C,M,T,E,R,P;4096&i.$$.dirty&&n(0,e=f==null?void 0:f.currentAgent),1&i.$$.dirty&&n(1,o=e==null?void 0:e.remote_agent_id),1&i.$$.dirty&&n(2,r=((T=(M=(C=e==null?void 0:e.workspace_setup)==null?void 0:C.starting_files)==null?void 0:M.github_commit_ref)==null?void 0:T.repository_url)||""),4&i.$$.dirty&&n(9,s=Ms(r)),1&i.$$.dirty&&n(8,c=(e==null?void 0:e.session_summary)||""),1&i.$$.dirty&&n(7,a=(e==null?void 0:e.is_setup_script_agent)||!1),4098&i.$$.dirty&&n(5,l=o&&(f==null?void 0:f.pinnedAgents[o])||!1),4096&i.$$.dirty&&n(6,u=f==null?void 0:f.isRemoteAgentSshWindow),1&i.$$.dirty&&n(4,$=(P=(R=(E=e==null?void 0:e.workspace_setup)==null?void 0:E.starting_files)==null?void 0:R.github_commit_ref)==null?void 0:P.git_ref)},[e,o,r,p,$,l,u,a,c,s,_,function(){o&&(_==null||_.toggleAgentPinned(o,l))},f,function(){n(3,p=window.innerHeight)}]}class P9 extends ut{constructor(t){super(),dt(this,t,D9,R9,lt,{})}}function N9(i){let t,n;return t=new N$({}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function F9(i){let t,n;return t=new gf({}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function O9(i){let t,n,e,o;const r=[F9,N9],s=[];function c(a,l){return a[1]?0:1}return t=c(i),n=s[t]=r[t](i),{c(){n.c(),e=ft()},m(a,l){s[t].m(a,l),b(a,e,l),o=!0},p(a,l){let u=t;t=c(a),t!==u&&(q(),m(s[u],1,1,()=>{s[u]=null}),j(),n=s[t],n||(n=s[t]=r[t](a),n.c()),d(n,1),n.m(e.parentNode,e))},i(a){o||(d(n),o=!0)},o(a){m(n),o=!1},d(a){a&&x(e),s[t].d(a)}}}function Gd(i){var e;let t,n;return t=new Hm({props:{thread:i[5],type:i[1]?"localAgent":"chat",enableShareService:(e=i[3].flags)==null?void 0:e.enableShareService,onRename:i[9]}}),{c(){v(t.$$.fragment)},m(o,r){w(t,o,r),n=!0},p(o,r){var c;const s={};32&r&&(s.thread=o[5]),2&r&&(s.type=o[1]?"localAgent":"chat"),8&r&&(s.enableShareService=(c=o[3].flags)==null?void 0:c.enableShareService),t.$set(s)},i(o){n||(d(t.$$.fragment,o),n=!0)},o(o){m(t.$$.fragment,o),n=!1},d(o){y(t,o)}}}function z9(i){let t,n,e=!i[2]&&Gd(i);return{c(){t=L("div"),e&&e.c(),A(t,"slot","title-actions"),A(t,"class","c-thread-header__menu")},m(o,r){b(o,t,r),e&&e.m(t,null),n=!0},p(o,r){o[2]?e&&(q(),m(e,1,1,()=>{e=null}),j()):e?(e.p(o,r),4&r&&d(e,1)):(e=Gd(o),e.c(),d(e,1),e.m(t,null))},i(o){n||(d(e),n=!0)},o(o){m(e),n=!1},d(o){o&&x(t),e&&e.d()}}}function B9(i){let t,n,e;function o(s){i[13](s)}let r={onRename:i[8],title:i[0],isThreadEmpty:i[6],$$slots:{"title-actions":[z9],icon:[O9]},$$scope:{ctx:i}};return i[4]!==void 0&&(r.isEditing=i[4]),t=new Zm({props:r}),Qt.push(()=>Ne(t,"isEditing",o)),{c(){v(t.$$.fragment)},m(s,c){w(t,s,c),e=!0},p(s,[c]){const a={};1&c&&(a.title=s[0]),64&c&&(a.isThreadEmpty=s[6]),32814&c&&(a.$$scope={dirty:c,ctx:s}),!n&&16&c&&(n=!0,a.isEditing=s[4],Be(()=>n=!1)),t.$set(a)},i(s){e||(d(t.$$.fragment,s),e=!0)},o(s){m(t.$$.fragment,s),e=!1},d(s){y(t,s)}}}function H9(i,t,n){let e,o,r,s,c,a,l,u,$;const f=kt("chatModel");Tt(i,f,_=>n(3,$=_));let p=!1;return i.$$.update=()=>{var _,C;8&i.$$.dirty&&n(12,e=$.currentConversationModel),4096&i.$$.dirty&&n(2,o=yn.isNew(e)),8&i.$$.dirty&&n(11,r=$.currentConversationId||""),4096&i.$$.dirty&&n(1,s=((_=e==null?void 0:e.extraData)==null?void 0:_.isAgentConversation)===!0),2056&i.$$.dirty&&n(10,c=$.conversations[r]),1026&i.$$.dirty&&n(0,a=(c==null?void 0:c.name)||((C=((c==null?void 0:c.chatHistory)||[]).find(M=>M.request_message))==null?void 0:C.request_message)||""||"New "+(s?"Agent":"Chat")),1028&i.$$.dirty&&n(6,l=yn.isThreadEmpty({conversation:c,isNew:o})),3075&i.$$.dirty&&n(5,u={id:r,type:s?"localAgent":"chat",title:a,isPinned:(c==null?void 0:c.isPinned)||!1,conversation:{id:r,isShareable:(c==null?void 0:c.isShareable)||!1}})},[a,s,o,$,p,u,l,f,function(_){f.renameConversation(r,_)},function(){setTimeout(()=>{n(4,p=!0)},10)},c,r,e,function(_){p=_,n(4,p)}]}class U9 extends ut{constructor(t){super(),dt(this,t,H9,B9,lt,{})}}function q9(i){let t,n;return t=new U9({}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function j9(i){let t,n;return t=new P9({}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function W9(i){let t,n,e,o;const r=[j9,q9],s=[];function c(a,l){var u;return(u=a[1])!=null&&u.isActive?0:a[0]?1:-1}return~(t=c(i))&&(n=s[t]=r[t](i)),{c(){n&&n.c(),e=ft()},m(a,l){~t&&s[t].m(a,l),b(a,e,l),o=!0},p(a,[l]){let u=t;t=c(a),t!==u&&(n&&(q(),m(s[u],1,1,()=>{s[u]=null}),j()),~t?(n=s[t],n||(n=s[t]=r[t](a),n.c()),d(n,1),n.m(e.parentNode,e)):n=null)},i(a){o||(d(n),o=!0)},o(a){m(n),o=!1},d(a){a&&x(e),~t&&s[t].d(a)}}}function V9(i,t,n){let e,o,r;const s=kt(Rn.key);Tt(i,s,a=>n(1,r=a));const c=kt("chatModel");return Tt(i,c,a=>n(4,o=a)),i.$$.update=()=>{16&i.$$.dirty&&n(0,e=o.currentConversationId)},[e,r,s,c,o]}class G9 extends ut{constructor(t){super(),dt(this,t,V9,W9,lt,{})}}function K9(i){let t,n,e;return t=new qo({props:{iconName:"play_arrow"}}),{c(){v(t.$$.fragment),n=V(`
    Feedback`)},m(o,r){w(t,o,r),b(o,n,r),e=!0},p:N,i(o){e||(d(t.$$.fragment,o),e=!0)},o(o){m(t.$$.fragment,o),e=!1},d(o){o&&x(n),y(t,o)}}}function Y9(i){let t,n,e,o,r,s;function c(l){i[3](l)}let a={disabled:i[1],variant:"surface",size:2};return i[0]!==void 0&&(a.value=i[0]),n=new ir({props:a}),Qt.push(()=>Ne(n,"value",c)),n.$on("keydown",i[2]),r=new ve({props:{disabled:!i[0]||i[1],size:2,variant:"solid",color:"accent",$$slots:{default:[K9]},$$scope:{ctx:i}}}),r.$on("click",i[4]),{c(){t=L("div"),v(n.$$.fragment),o=H(),v(r.$$.fragment),A(t,"class","simple-input-container svelte-16gfgo6")},m(l,u){b(l,t,u),w(n,t,null),O(t,o),w(r,t,null),s=!0},p(l,[u]){const $={};2&u&&($.disabled=l[1]),!e&&1&u&&(e=!0,$.value=l[0],Be(()=>e=!1)),n.$set($);const f={};3&u&&(f.disabled=!l[0]||l[1]),128&u&&(f.$$scope={dirty:u,ctx:l}),r.$set(f)},i(l){s||(d(n.$$.fragment,l),d(r.$$.fragment,l),s=!0)},o(l){m(n.$$.fragment,l),m(r.$$.fragment,l),s=!1},d(l){l&&x(t),y(n),y(r)}}}function X9(i,t,n){const e=kt("autofixConversationModel");if(!e)throw new Error("AutofixConversationModel not found in context");let o="",r=!1;async function s(c){if(c.shiftKey||c.ctrlKey||c.metaKey)return!1;if(c.stopPropagation(),c.key==="Enter"&&o.length>0){n(1,r=!0);try{await e.handleUserSteering(o)}finally{n(1,r=!1)}return n(0,o=""),!0}return c.key==="Escape"}return so(()=>{const c=document.querySelector("input");c&&(c.focus(),c.select())}),[o,r,s,function(c){o=c,n(0,o)},()=>s(new KeyboardEvent("keydown",{key:"Enter"}))]}class Z9 extends ut{constructor(t){super(),dt(this,t,X9,Y9,lt,{})}}function Kd(i){let t,n,e;return n=new zt({props:{class:"full-width-button",content:i[0],triggerOn:[te.Hover],$$slots:{default:[Q9]},$$scope:{ctx:i}}}),{c(){t=L("div"),v(n.$$.fragment),A(t,"class","create-agent-footer svelte-34my2")},m(o,r){b(o,t,r),w(n,t,null),e=!0},p(o,r){const s={};1&r&&(s.content=o[0]),131084&r&&(s.$$scope={dirty:r,ctx:o}),n.$set(s)},i(o){e||(d(n.$$.fragment,o),e=!0)},o(o){m(n.$$.fragment,o),e=!1},d(o){o&&x(t),y(n)}}}function J9(i){let t;return{c(){t=V("Create agent")},m(n,e){b(n,t,e)},d(n){n&&x(t)}}}function Q9(i){let t,n;return t=new ve({props:{variant:"solid",color:"accent",size:2,loading:i[3],disabled:i[2],$$slots:{default:[J9]},$$scope:{ctx:i}}}),t.$on("click",i[5]),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};8&o&&(r.loading=e[3]),4&o&&(r.disabled=e[2]),131072&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function tA(i){let t,n,e=i[1]&&Kd(i);return{c(){e&&e.c(),t=ft()},m(o,r){e&&e.m(o,r),b(o,t,r),n=!0},p(o,[r]){o[1]?e?(e.p(o,r),2&r&&d(e,1)):(e=Kd(o),e.c(),d(e,1),e.m(t.parentNode,t)):e&&(q(),m(e,1,1,()=>{e=null}),j())},i(o){n||(d(e),n=!0)},o(o){m(e),n=!1},d(o){o&&x(t),e&&e.d(o)}}}function eA(i,t,n){let e,o,r,s,c,a,l,u,$,f,p,_;const C=kt(Rn.key);Tt(i,C,R=>n(12,_=R));const M=kt(wr.key),T=kt("chatModel"),E=Am(C,T.currentConversationModel,M);return i.$$.update=()=>{var R,P,J;4096&i.$$.dirty&&n(8,e=((R=_.newAgentDraft)==null?void 0:R.commitRef)??null),4096&i.$$.dirty&&n(7,o=((P=_.newAgentDraft)==null?void 0:P.selectedBranch)??null),4096&i.$$.dirty&&(r=((J=_.newAgentDraft)==null?void 0:J.setupScript)??null),4096&i.$$.dirty&&n(3,s=_.isCreatingAgent),4096&i.$$.dirty&&n(11,c=!!_.maxRemoteAgents&&_.agentOverviews.length>=_.maxRemoteAgents),4096&i.$$.dirty&&n(10,a=!!_.maxActiveRemoteAgents&&_.agentOverviews.filter(K=>K.workspace_status===X$.workspaceRunning).length>=_.maxActiveRemoteAgents),7168&i.$$.dirty&&n(9,l=c?`You have reached the maximum number of ${_.maxRemoteAgents} remote agents.`:a?`You have reached the maximum number of ${_.maxActiveRemoteAgents} active remote agents.`:""),4992&i.$$.dirty&&n(0,u=(()=>{var G;const K=(G=e==null?void 0:e.github_commit_ref)==null?void 0:G.repository_url,et=o==null?void 0:o.name,U=_.remoteAgentCreationError;return l||U||!K&&"Please select a repository"||!et&&"Please select a branch"||(!(K&&et)&&K&&et?"Loading branch data...":"")||""})()),1&i.$$.dirty&&n(2,$=!!u),4096&i.$$.dirty&&n(6,f=_.isActive&&!_.currentAgentId),64&i.$$.dirty&&n(1,p=f)},[u,p,$,s,C,async function(){try{C.setRemoteAgentCreationError(null),E(),C.saveLastRemoteAgentSetup((e==null?void 0:e.github_commit_ref.repository_url)||null,(o==null?void 0:o.name)||null,(r==null?void 0:r.path)||null)}catch(R){console.error("Failed to create agent:",R)}},f,o,e,l,a,c,_]}class nA extends ut{constructor(t){super(),dt(this,t,eA,tA,lt,{})}}function oA(i){let t;return{c(){t=V(`Agent Auto mode allows Augment to run commands automatically on your behalf without your
        explicit approval. Changes can be destructive -- proceed with caution.`)},m(n,e){b(n,t,e)},d(n){n&&x(t)}}}function rA(i){let t;return{c(){t=V("Accept")},m(n,e){b(n,t,e)},d(n){n&&x(t)}}}function iA(i){let t;return{c(){t=V("Back to Manual Mode")},m(n,e){b(n,t,e)},d(n){n&&x(t)}}}function sA(i){let t,n,e,o,r,s,c,a;return n=new Wt({props:{size:2,$$slots:{default:[oA]},$$scope:{ctx:i}}}),r=new ve({props:{size:1,variant:"solid",color:"accent",class:"c-agent-auto-mode-warning__button",$$slots:{default:[rA]},$$scope:{ctx:i}}}),r.$on("click",i[1]),c=new ve({props:{size:1,variant:"solid",color:"neutral",class:"c-agent-auto-mode-warning__button",$$slots:{default:[iA]},$$scope:{ctx:i}}}),c.$on("click",i[2]),{c(){t=L("div"),v(n.$$.fragment),e=H(),o=L("div"),v(r.$$.fragment),s=H(),v(c.$$.fragment),A(o,"class","c-agent-auto-mode-warning__buttons"),A(t,"class","c-agent-auto-mode-warning__content")},m(l,u){b(l,t,u),w(n,t,null),O(t,e),O(t,o),w(r,o,null),O(o,s),w(c,o,null),a=!0},p(l,u){const $={};8&u&&($.$$scope={dirty:u,ctx:l}),n.$set($);const f={};8&u&&(f.$$scope={dirty:u,ctx:l}),r.$set(f);const p={};8&u&&(p.$$scope={dirty:u,ctx:l}),c.$set(p)},i(l){a||(d(n.$$.fragment,l),d(r.$$.fragment,l),d(c.$$.fragment,l),a=!0)},o(l){m(n.$$.fragment,l),m(r.$$.fragment,l),m(c.$$.fragment,l),a=!1},d(l){l&&x(t),y(n),y(r),y(c)}}}function aA(i){let t,n;return t=new jn({props:{slot:"icon"}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p:N,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function cA(i){let t,n,e;return n=new Zn({props:{color:"warning",variant:"soft",size:1,$$slots:{icon:[aA],default:[sA]},$$scope:{ctx:i}}}),{c(){t=L("div"),v(n.$$.fragment),A(t,"class","c-agent-auto-mode-warning svelte-ffctgo")},m(o,r){b(o,t,r),w(n,t,null),e=!0},p(o,[r]){const s={};8&r&&(s.$$scope={dirty:r,ctx:o}),n.$set(s)},i(o){e||(d(n.$$.fragment,o),e=!0)},o(o){m(n.$$.fragment,o),e=!1},d(o){o&&x(t),y(n)}}}function lA(i){const t=kt("agentConversationModel");return[t,()=>t.acceptAutoMode(),()=>t.rejectAutoMode()]}class uA extends ut{constructor(t){super(),dt(this,t,lA,cA,lt,{})}}const dA=i=>({}),Yd=i=>({}),$A=i=>({}),Xd=i=>({});function mA(i){let t;return{c(){t=V(i[0])},m(n,e){b(n,t,e)},p(n,e){1&e&&bt(t,n[0])},d(n){n&&x(t)}}}function fA(i){let t,n,e,o;const r=i[2]["left-content"],s=Yt(r,i,i[3],Xd),c=s||function(u){let $,f;return $=new Wt({props:{size:1,color:"neutral",$$slots:{default:[mA]},$$scope:{ctx:u}}}),{c(){v($.$$.fragment)},m(p,_){w($,p,_),f=!0},p(p,_){const C={};9&_&&(C.$$scope={dirty:_,ctx:p}),$.$set(C)},i(p){f||(d($.$$.fragment,p),f=!0)},o(p){m($.$$.fragment,p),f=!1},d(p){y($,p)}}}(i),a=i[2]["right-content"],l=Yt(a,i,i[3],Yd);return{c(){t=L("div"),c&&c.c(),n=H(),l&&l.c(),A(t,"class",e=pr(`c-chat-input-banner c-chat-input-banner--${i[1]}`)+" svelte-125x5mm")},m(u,$){b(u,t,$),c&&c.m(t,null),O(t,n),l&&l.m(t,null),o=!0},p(u,[$]){s?s.p&&(!o||8&$)&&Xt(s,r,u,u[3],o?Jt(r,u[3],$,$A):Zt(u[3]),Xd):c&&c.p&&(!o||1&$)&&c.p(u,o?$:-1),l&&l.p&&(!o||8&$)&&Xt(l,a,u,u[3],o?Jt(a,u[3],$,dA):Zt(u[3]),Yd),(!o||2&$&&e!==(e=pr(`c-chat-input-banner c-chat-input-banner--${u[1]}`)+" svelte-125x5mm"))&&A(t,"class",e)},i(u){o||(d(c,u),d(l,u),o=!0)},o(u){m(c,u),m(l,u),o=!1},d(u){u&&x(t),c&&c.d(u),l&&l.d(u)}}}function pA(i,t,n){let{$$slots:e={},$$scope:o}=t,{text:r}=t,{color:s="accent"}=t;return i.$$set=c=>{"text"in c&&n(0,r=c.text),"color"in c&&n(1,s=c.color),"$$scope"in c&&n(3,o=c.$$scope)},[r,s,e,o]}class Jm extends ut{constructor(t){super(),dt(this,t,pA,fA,lt,{text:0,color:1})}}function gA(i){let t;return{c(){t=V("Upgrade Now")},m(n,e){b(n,t,e)},d(n){n&&x(t)}}}function Zd(i){let t,n;return t=new zt({props:{content:"Dismiss",triggerOn:[te.Hover],$$slots:{default:[vA]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};132&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function hA(i){let t,n;return t=new Cr({}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function vA(i){let t,n;return t=new fe({props:{size:1,variant:"ghost-block",color:"neutral","data-testid":"dismiss-subscription-warning-button",$$slots:{default:[hA]},$$scope:{ctx:i}}}),t.$on("click",function(){ze(i[2])&&i[2].apply(this,arguments)}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){i=e;const r={};128&o&&(r.$$scope={dirty:o,ctx:i}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function wA(i){let t,n,e,o,r;e=new ve({props:{size:1,variant:"solid",color:i[4]?"error":"warning","data-testid":"subscription-page-button",$$slots:{default:[gA]},$$scope:{ctx:i}}}),e.$on("click",i[5]);let s=!i[0]&&!i[1]&&Zd(i);return{c(){t=L("div"),n=L("div"),v(e.$$.fragment),o=H(),s&&s.c(),A(n,"class","l-subscription-warning__upgrade-btn svelte-1m82ryz"),At(n,"is-error",i[4]),A(t,"class","l-subscription-warning__right svelte-1m82ryz"),A(t,"slot","right-content")},m(c,a){b(c,t,a),O(t,n),w(e,n,null),O(t,o),s&&s.m(t,null),r=!0},p(c,a){const l={};16&a&&(l.color=c[4]?"error":"warning"),128&a&&(l.$$scope={dirty:a,ctx:c}),e.$set(l),(!r||16&a)&&At(n,"is-error",c[4]),c[0]||c[1]?s&&(q(),m(s,1,1,()=>{s=null}),j()):s?(s.p(c,a),3&a&&d(s,1)):(s=Zd(c),s.c(),d(s,1),s.m(t,null))},i(c){r||(d(e.$$.fragment,c),d(s),r=!0)},o(c){m(e.$$.fragment,c),m(s),r=!1},d(c){c&&x(t),y(e),s&&s.d()}}}function yA(i){let t,n;return t=new Jm({props:{text:i[3],color:i[4]?"error":"warning",$$slots:{"right-content":[wA]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,[o]){const r={};8&o&&(r.text=e[3]),16&o&&(r.color=e[4]?"error":"warning"),151&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function xA(i,t,n){let e,{daysRemaining:o=null}=t,{isInactive:r=!1}=t,{usageBalanceDepleted:s=!1}=t,{onDismiss:c}=t,a="";return i.$$set=l=>{"daysRemaining"in l&&n(6,o=l.daysRemaining),"isInactive"in l&&n(0,r=l.isInactive),"usageBalanceDepleted"in l&&n(1,s=l.usageBalanceDepleted),"onDismiss"in l&&n(2,c=l.onDismiss)},i.$$.update=()=>{67&i.$$.dirty&&n(3,a=r?"Your subscription is no longer active":s?"You are out of user messages":`Your subscription expires in ${o} days`),3&i.$$.dirty&&n(4,e=r||s)},[r,s,c,a,e,function(){xn.postMessage({type:We.augmentLink,data:"https://app.augmentcode.com/account"})},o]}class bA extends ut{constructor(t){super(),dt(this,t,xA,yA,lt,{daysRemaining:6,isInactive:0,usageBalanceDepleted:1,onDismiss:2})}}function _A(i){let t,n,e,o,r,s,c;return o=new zt({props:{content:"Yes, never show again",triggerOn:[te.Hover],$$slots:{default:[MA]},$$scope:{ctx:i}}}),s=new zt({props:{content:"No, dismiss once",triggerOn:[te.Hover],$$slots:{default:[SA]},$$scope:{ctx:i}}}),{c(){t=L("span"),t.textContent="Never show again?",n=H(),e=L("div"),v(o.$$.fragment),r=H(),v(s.$$.fragment),A(t,"class","l-thread-length-warning__confirmation-text svelte-et9fl8"),A(e,"class","l-thread-length-warning__confirmation-buttons svelte-et9fl8")},m(a,l){b(a,t,l),b(a,n,l),b(a,e,l),w(o,e,null),O(e,r),w(s,e,null),c=!0},p(a,l){const u={};128&l&&(u.$$scope={dirty:l,ctx:a}),o.$set(u);const $={};128&l&&($.$$scope={dirty:l,ctx:a}),s.$set($)},i(a){c||(d(o.$$.fragment,a),d(s.$$.fragment,a),c=!0)},o(a){m(o.$$.fragment,a),m(s.$$.fragment,a),c=!1},d(a){a&&(x(t),x(n),x(e)),y(o),y(s)}}}function CA(i){let t,n,e,o;return t=new zt({props:{content:"New Thread",triggerOn:[te.Hover,te.Click],$$slots:{default:[EA]},$$scope:{ctx:i}}}),e=new zt({props:{content:"Dismiss",triggerOn:[te.Hover],$$slots:{default:[LA]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment),n=H(),v(e.$$.fragment)},m(r,s){w(t,r,s),b(r,n,s),w(e,r,s),o=!0},p(r,s){const c={};129&s&&(c.$$scope={dirty:s,ctx:r}),t.$set(c);const a={};128&s&&(a.$$scope={dirty:s,ctx:r}),e.$set(a)},i(r){o||(d(t.$$.fragment,r),d(e.$$.fragment,r),o=!0)},o(r){m(t.$$.fragment,r),m(e.$$.fragment,r),o=!1},d(r){r&&x(n),y(t,r),y(e,r)}}}function AA(i){let t,n;return t=new Ho({}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function MA(i){let t,n;return t=new fe({props:{size:1,variant:"ghost-block",color:"neutral","data-testid":"never-show-again-button",$$slots:{default:[AA]},$$scope:{ctx:i}}}),t.$on("click",i[3]),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};128&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function kA(i){let t,n;return t=new Cr({}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function SA(i){let t,n;return t=new fe({props:{size:1,variant:"ghost-block",color:"neutral","data-testid":"cancel-confirmation-button",$$slots:{default:[kA]},$$scope:{ctx:i}}}),t.$on("click",i[4]),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};128&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function TA(i){let t,n;return t=new Vm({}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function EA(i){let t,n;return t=new fe({props:{size:1,variant:"ghost-block",color:"neutral","data-testid":"new-thread-warning-button",$$slots:{default:[TA]},$$scope:{ctx:i}}}),t.$on("click",function(){ze(i[0])&&i[0].apply(this,arguments)}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){i=e;const r={};128&o&&(r.$$scope={dirty:o,ctx:i}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function IA(i){let t,n;return t=new Cr({}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function LA(i){let t,n;return t=new fe({props:{size:1,variant:"ghost-block",color:"neutral","data-testid":"dismiss-thread-warning-button",$$slots:{default:[IA]},$$scope:{ctx:i}}}),t.$on("click",i[2]),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};128&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function RA(i){let t,n,e,o;const r=[CA,_A],s=[];function c(a,l){return a[1]?1:0}return n=c(i),e=s[n]=r[n](i),{c(){t=L("div"),e.c(),A(t,"class","l-thread-length-warning__buttons svelte-et9fl8"),A(t,"slot","right-content")},m(a,l){b(a,t,l),s[n].m(t,null),o=!0},p(a,l){let u=n;n=c(a),n===u?s[n].p(a,l):(q(),m(s[u],1,1,()=>{s[u]=null}),j(),e=s[n],e?e.p(a,l):(e=s[n]=r[n](a),e.c()),d(e,1),e.m(t,null))},i(a){o||(d(e),o=!0)},o(a){m(e),o=!1},d(a){a&&x(t),s[n].d()}}}function DA(i){let t,n;return t=new Jm({props:{text:"Long threads can lead to worse results.",$$slots:{"right-content":[RA]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,[o]){const r={};131&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function PA(i,t,n){let{onNewThreadClick:e}=t,{onDismiss:o}=t,{onNeverShowAgain:r}=t,s=!1;return i.$$set=c=>{"onNewThreadClick"in c&&n(0,e=c.onNewThreadClick),"onDismiss"in c&&n(5,o=c.onDismiss),"onNeverShowAgain"in c&&n(6,r=c.onNeverShowAgain)},[e,s,function(){n(1,s=!0)},function(){r()},function(){o()},o,r]}class NA extends ut{constructor(t){super(),dt(this,t,PA,DA,lt,{onNewThreadClick:0,onDismiss:5,onNeverShowAgain:6})}}class FA{constructor(t,n,e,o){$t(this,"_disposables",[]);$t(this,"_chatHistoryCheckpoints");$t(this,"_currentCheckpoint",Re({request_id:crypto.randomUUID(),uuid:crypto.randomUUID(),chatItemType:mo.agenticCheckpointDelimiter,status:on.draft,fromTimestamp:0,toTimestamp:Number.MAX_SAFE_INTEGER}));$t(this,"checkpoints");$t(this,"uuidToIdx");$t(this,"_targetCheckpointIdx",Re(void 0));$t(this,"targetCheckpoint");$t(this,"isTargetCheckpointLatest");$t(this,"totalCheckpointCount");$t(this,"_targetCheckpointSummary",Re([]));$t(this,"targetCheckpointSummary",as(this._targetCheckpointSummary));$t(this,"targetCheckpointHasChanges",Hn(this.targetCheckpointSummary,t=>t.some(n=>{var e,o;return(((e=n.changesSummary)==null?void 0:e.totalAddedLines)??!1)||(((o=n.changesSummary)==null?void 0:o.totalRemovedLines)??!1)})));$t(this,"_doNothingOnAgentDisabled",t=>(...n)=>{this._flagsModel.enableAgentMode&&t(...n)});$t(this,"_doNothingOnNotAgentConversation",t=>(...n)=>{if(this._flagsModel.enableAgentMode&&pn(re(this._conversationModel)))return t(...n)});$t(this,"_refreshAgentEditsImmediate",async()=>{const t=this._targetCheckpoint;if(!t)return;const n=this._agentConversationModel?this._agentConversationModel.getBaselineTimestamp():0,e=await this.getCheckpointSummary({...t,fromTimestamp:n,toTimestamp:Number.MAX_SAFE_INTEGER});this._targetCheckpointSummary.set(e)});$t(this,"_refreshAgentEdits",L$(this._refreshAgentEditsImmediate,500,{leading:!0,trailing:!0}));$t(this,"_revertToTimestamp",this._doNothingOnNotAgentConversation(async t=>{await this._extensionClient.revertToTimestamp(t),this.createNewCheckpoint(),this._refreshAgentEdits()}));$t(this,"maybeCreateOriginalCheckpoint",this._doNothingOnNotAgentConversation(()=>{const t=re(this._conversationModel);t.chatHistory.some(Ea)||(yn.isEmpty(t)||yn.isNew(t))&&re(this.checkpoints).length===0&&this.createNewCheckpoint()}));$t(this,"dispose",()=>{this._disposables.forEach(t=>t.dispose())});this._flagsModel=t,this._conversationModel=n,this._extensionClient=e,this._agentConversationModel=o,this._chatHistoryCheckpoints=Hn([this._conversationModel],([r],s)=>{var a,l,u,$;const c=r.chatHistory.filter(Ea);(c==null?void 0:c.length)===((a=re(this._chatHistoryCheckpoints))==null?void 0:a.length)&&((l=c==null?void 0:c.at(-1))==null?void 0:l.uuid)===(($=(u=re(this._chatHistoryCheckpoints))==null?void 0:u.at(-1))==null?void 0:$.uuid)||(this._currentCheckpoint.update(f=>{var p;return{...f,fromTimestamp:((p=c.at(-1))==null?void 0:p.toTimestamp)??0,toTimestamp:Number.MAX_SAFE_INTEGER}}),s(c))}),this.checkpoints=Hn([this._chatHistoryCheckpoints,this._currentCheckpoint],([r,s])=>[...r,s].filter(c=>c.status!==on.draft)),this.totalCheckpointCount=Hn(this.checkpoints,r=>r.length),this.uuidToIdx=Hn(this.checkpoints,r=>new Map(r.map((s,c)=>[s.uuid,c]))),this.targetCheckpoint=Hn([this.targetCheckpointIdx,this.checkpoints],([r,s])=>s.at(r??-1)),this.isTargetCheckpointLatest=Hn([this.targetCheckpointIdx,this.checkpoints],([r,s])=>r===s.length-1||r===void 0),[this._conversationModel.onSendExchange(this._doNothingOnNotAgentConversation(()=>{re(this._currentCheckpoint).status===on.draft&&this._currentCheckpoint.update(r=>({...r,status:on.sent}))})),this.targetCheckpoint.subscribe(this._doNothingOnAgentDisabled(()=>{this._refreshAgentEdits()})),this.checkpoints.subscribe(this._doNothingOnAgentDisabled(()=>{re(this.isTargetCheckpointLatest)&&this._refreshAgentEdits()})),this._conversationModel.onNewConversation(()=>{this.targetCheckpointIdx.set(void 0),this._targetCheckpointSummary.set([]),this._refreshAgentEdits()}),this._conversationModel.onSendExchange(this._doNothingOnAgentDisabled(()=>this.targetCheckpointIdx.set(void 0)))].forEach(r=>{this._disposables.push({dispose:r})})}registerAgentConversationModel(t){this._agentConversationModel=t}get targetCheckpointIdx(){return{subscribe:this._targetCheckpointIdx.subscribe,set:()=>this._targetCheckpointIdx.set(void 0),update:()=>this._targetCheckpointIdx.set(void 0)}}get currentCheckpoint(){return this._currentCheckpoint}get _checkpoints(){return re(this.checkpoints)}get _targetCheckpoint(){return re(this.targetCheckpoint)}getCheckpointIdxForTimestamp(t){return this._checkpoints.findIndex(n=>n.fromTimestamp<=t&&n.toTimestamp>=t)}getCheckpointAtIdx(t){return this._checkpoints.at(t)}createNewCheckpoint(t={}){const n=re(this._currentCheckpoint),e=Date.now(),o={...n,status:on.success,toTimestamp:e,...t};this._currentCheckpoint.set({request_id:crypto.randomUUID(),uuid:crypto.randomUUID(),chatItemType:mo.agenticCheckpointDelimiter,status:on.draft,fromTimestamp:e,toTimestamp:Number.MAX_SAFE_INTEGER}),this._conversationModel.addChatItem(o)}async getCheckpointSummary(t){return(await this._extensionClient.getAgentEditList(t.fromTimestamp,t.toTimestamp)).edits}async getCheckpointIdxSummary(t){const n=this._checkpoints.at(t);return n?this.getCheckpointSummary(n):[]}async revertToCheckpoint(t){const n=re(this.uuidToIdx).get(t);if(n===void 0)return!1;const e=this._checkpoints.at(n);if(!e)return!1;const o=re(this._conversationModel).id,r=await this._extensionClient.revertToTimestamp(e.toTimestamp);return(r||re(this._conversationModel).id===o)&&this.createNewCheckpoint({revertTarget:{uuid:t}}),r}async revertDocumentToTimestamp(t,n){const e=re(this._conversationModel).id,o=await this._extensionClient.revertToTimestamp(n,[t]);return o&&re(this._conversationModel).id===e&&this.createNewCheckpoint({revertTarget:{filePath:t}}),o}async acceptAll(){const t=this._checkpoints.at(-1);if(t){const n=t.toTimestamp;return pn(re(this._conversationModel))&&this._agentConversationModel&&this._agentConversationModel.updateBaselineTimestamp(n),await this._extensionClient.acceptAllAgentEdits(),this._refreshAgentEdits(),!0}return!1}async rejectAll(){var n;const t=await this._extensionClient.openConfirmationModal({title:"Discard All Changes",message:"Are you sure you want to discard all changes? This will apply to all changes whether made by the agent or yourself.",confirmButtonText:"Discard",cancelButtonText:"Cancel"});if(t){const e=((n=this._agentConversationModel)==null?void 0:n.getBaselineTimestamp())??0;pn(re(this._conversationModel))&&this._agentConversationModel&&this._agentConversationModel.updateBaselineTimestamp(e),await this._revertToTimestamp(e),this._refreshAgentEdits()}return t}handleMessageFromExtension(t){switch(t.data.type){case We.chatAgentEditListHasUpdates:this._refreshAgentEdits();break;case We.chatMemoryHasUpdates:Em.notifyMemoryUpdated()}return!0}async updateBaselineTimestamp(t){pn(re(this._conversationModel))&&this._agentConversationModel&&(this._agentConversationModel.updateBaselineTimestamp(t),this._refreshAgentEdits())}}function Ri(i){const t=Object.prototype.toString.call(i);return i instanceof Date||typeof i=="object"&&t==="[object Date]"?new i.constructor(+i):typeof i=="number"||t==="[object Number]"||typeof i=="string"||t==="[object String]"?new Date(i):new Date(NaN)}const OA=864e5;function Jd(i){const t=Ri(i);return t.setHours(0,0,0,0),t}function Qd(i){const t=Ri(i),n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return n.setUTCFullYear(t.getFullYear()),+i-+n}function zA(i,t){const n=Ri(i),e=Ri(t),o=t$(n,e),r=Math.abs(function(c,a){const l=Jd(c),u=Jd(a),$=+l-Qd(l),f=+u-Qd(u);return Math.round(($-f)/OA)}(n,e));n.setDate(n.getDate()-o*r);const s=o*(r-+(t$(n,e)===-o));return s===0?0:s}function t$(i,t){const n=i.getFullYear()-t.getFullYear()||i.getMonth()-t.getMonth()||i.getDate()-t.getDate()||i.getHours()-t.getHours()||i.getMinutes()-t.getMinutes()||i.getSeconds()-t.getSeconds()||i.getMilliseconds()-t.getMilliseconds();return n<0?-1:n>0?1:n}const $o=class $o{constructor(t,n,e){$t(this,"pollInterval",null);$t(this,"subscriptionInfo",Re(null));$t(this,"isDismissed",Re(!1));$t(this,"dispose",()=>{this.pollInterval&&(clearInterval(this.pollInterval),this.pollInterval=null)});if(this.extensionClient=t,e!==void 0)this.isDismissed.set(e);else try{const o=localStorage.getItem($o.localStorageKey);if(o){const{dismissed:r,timestamp:s}=JSON.parse(o),c=new Date(s),a=new Date,l=c.toDateString()!==a.toDateString();r&&!l?this.isDismissed.set(!0):localStorage.removeItem($o.localStorageKey)}}catch(o){console.error("Failed to read from localStorage:",o)}n!==void 0?this.subscriptionInfo.set(n):(this.fetchSubscriptionInfo(),this.startPolling())}get info(){return this.subscriptionInfo}get dismissed(){return this.isDismissed}dismiss(){this.isDismissed.set(!0);try{localStorage.setItem($o.localStorageKey,JSON.stringify({dismissed:!0,timestamp:new Date().toISOString()}))}catch(t){console.error("Failed to write to localStorage:",t)}}shouldShowWarning(t){if(t==null)return!1;if(t.type==="inactive_subscription"||t.usageBalanceDepleted)return!0;if(t.type==="active_subscription"&&t.daysRemaining!==void 0){let n=!1;return this.isDismissed.subscribe(e=>n=e)(),!n&&t.daysRemaining<=$o.warningThresholdDays}return!1}async fetchSubscriptionInfo(){try{const t=await this.extensionClient.getSubscriptionInfo(),n=this.parseSubscriptionInfo(t);this.subscriptionInfo.set(n)}catch(t){console.error("Error fetching subscription info:",t)}}parseSubscriptionInfo(t){let n,e,o="unknown";if(t.data.enterprise)o="enterprise";else if(t.data.activeSubscription){if(o="active_subscription",t.data.activeSubscription.endDate){const r=new Date(t.data.activeSubscription.endDate);r.getFullYear()>2e3&&(n=Math.max(0,zA(r,new Date)))}e=t.data.activeSubscription.usageBalanceDepleted}else t.data.inactiveSubscription&&(o="inactive_subscription");return{type:o,daysRemaining:n,usageBalanceDepleted:e}}startPolling(){this.pollInterval=setInterval(()=>{this.fetchSubscriptionInfo()},$o.pollIntervalMs)}};$t($o,"pollIntervalMs",3e4),$t($o,"warningThresholdDays",14),$t($o,"localStorageKey","subscription-warning-dismissed");let _s=$o;const e$="thread-length-warning-never-show";function n$(i){let t,n,e;return n=new Zn({props:{variant:"soft",color:"warning",size:1,$$slots:{icon:[HA],default:[BA]},$$scope:{ctx:i}}}),{c(){t=L("div"),v(n.$$.fragment),A(t,"class","c-image-warning svelte-tf843j")},m(o,r){b(o,t,r),w(n,t,null),e=!0},p(o,r){const s={};31&r&&(s.$$scope={dirty:r,ctx:o}),n.$set(s)},i(o){e||(d(n.$$.fragment,o),e=!0)},o(o){m(n.$$.fragment,o),e=!1},d(o){o&&x(t),y(n)}}}function BA(i){let t,n=i[0]>i[1]?`Up to ${i[1]} images are supported.`:`Total image size exceeds the ${i[2]}KB limit. Current size: ${i[3]}KB`;return{c(){t=V(n)},m(e,o){b(e,t,o)},p(e,o){15&o&&n!==(n=e[0]>e[1]?`Up to ${e[1]} images are supported.`:`Total image size exceeds the ${e[2]}KB limit. Current size: ${e[3]}KB`)&&bt(t,n)},d(e){e&&x(t)}}}function HA(i){let t,n;return t=new jn({props:{slot:"icon"}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p:N,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function UA(i){let t,n,e=(i[0]>i[1]||i[3]>i[2])&&n$(i);return{c(){e&&e.c(),t=ft()},m(o,r){e&&e.m(o,r),b(o,t,r),n=!0},p(o,[r]){o[0]>o[1]||o[3]>o[2]?e?(e.p(o,r),15&r&&d(e,1)):(e=n$(o),e.c(),d(e,1),e.m(t.parentNode,t)):e&&(q(),m(e,1,1,()=>{e=null}),j())},i(o){n||(d(e),n=!0)},o(o){m(e),n=!1},d(o){o&&x(t),e&&e.d(o)}}}function qA(i,t,n){let{imageCount:e}=t,{maxImages:o}=t,{imageSizeLimitKb:r}=t,{imageSizeSumKb:s}=t;return i.$$set=c=>{"imageCount"in c&&n(0,e=c.imageCount),"maxImages"in c&&n(1,o=c.maxImages),"imageSizeLimitKb"in c&&n(2,r=c.imageSizeLimitKb),"imageSizeSumKb"in c&&n(3,s=c.imageSizeSumKb)},[e,o,r,s]}class jA extends ut{constructor(t){super(),dt(this,t,qA,UA,lt,{imageCount:0,maxImages:1,imageSizeLimitKb:2,imageSizeSumKb:3})}}function o$(i){let t,n;return t=new O5({props:{chatModelProp:i[34]}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p:N,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function r$(i){let t,n;return t=new G9({}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function WA(i){let t,n,e,o=i[27]&&o$(i),r=i[26]&&r$();return{c(){t=L("div"),o&&o.c(),n=H(),r&&r.c(),A(t,"class","l-chat-header svelte-196qknj")},m(s,c){b(s,t,c),o&&o.m(t,null),O(t,n),r&&r.m(t,null),e=!0},p(s,c){s[27]?o?(o.p(s,c),134217728&c[0]&&d(o,1)):(o=o$(s),o.c(),d(o,1),o.m(t,n)):o&&(q(),m(o,1,1,()=>{o=null}),j()),s[26]?r?67108864&c[0]&&d(r,1):(r=r$(),r.c(),d(r,1),r.m(t,null)):r&&(q(),m(r,1,1,()=>{r=null}),j())},i(s){e||(d(o),d(r),e=!0)},o(s){m(o),m(r),e=!1},d(s){s&&x(t),o&&o.d(),r&&r.d()}}}function i$(i){let t,n;return t=new Ex({props:{chatModel:i[34]}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p:N,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function VA(i){let t,n,e=i[25]&&i$(i);return{c(){t=L("div"),e&&e.c(),A(t,"class","l-chat-top-bars")},m(o,r){b(o,t,r),e&&e.m(t,null),n=!0},p(o,r){o[25]?e?(e.p(o,r),33554432&r[0]&&d(e,1)):(e=i$(o),e.c(),d(e,1),e.m(t,null)):e&&(q(),m(e,1,1,()=>{e=null}),j())},i(o){n||(d(e),n=!0)},o(o){m(e),n=!1},d(o){o&&x(t),e&&e.d()}}}function GA(i){let t,n;return t=new Ey({props:{chatModel:i[34],onboardingWorkspaceModel:i[41],remoteAgentsModel:i[35],slot:"message-area"}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p:N,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function KA(i){let t,n,e,o,r,s,c,a;n=new R7({props:{contextModel:i[32]}}),o=new cg({});let l=i[21]&&s$(),u=i[9].enableAgentMode&&i[8]&&a$(i),$=i[22]&&c$(i);return{c(){t=L("div"),v(n.$$.fragment),e=H(),v(o.$$.fragment),r=H(),l&&l.c(),s=H(),u&&u.c(),c=H(),$&&$.c(),A(t,"class","l-chat-actions-area svelte-196qknj")},m(f,p){b(f,t,p),w(n,t,null),O(t,e),w(o,t,null),O(t,r),l&&l.m(t,null),O(t,s),u&&u.m(t,null),O(t,c),$&&$.m(t,null),a=!0},p(f,p){f[21]?l?2097152&p[0]&&d(l,1):(l=s$(),l.c(),d(l,1),l.m(t,s)):l&&(q(),m(l,1,1,()=>{l=null}),j()),f[9].enableAgentMode&&f[8]?u?(u.p(f,p),768&p[0]&&d(u,1)):(u=a$(f),u.c(),d(u,1),u.m(t,c)):u&&(q(),m(u,1,1,()=>{u=null}),j()),f[22]?$?($.p(f,p),4194304&p[0]&&d($,1)):($=c$(f),$.c(),d($,1),$.m(t,null)):$&&(q(),m($,1,1,()=>{$=null}),j())},i(f){a||(d(n.$$.fragment,f),d(o.$$.fragment,f),d(l),d(u),d($),a=!0)},o(f){m(n.$$.fragment,f),m(o.$$.fragment,f),m(l),m(u),m($),a=!1},d(f){f&&x(t),y(n),y(o),l&&l.d(),u&&u.d(),$&&$.d()}}}function YA(i){let t,n;return t=new u7({}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p:N,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function XA(i){let t,n;return t=new qC({}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p:N,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function s$(i){let t,n;return t=new rg({}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function a$(i){let t,n,e,o;const r=[JA,ZA],s=[];function c(a,l){return a[30]?0:1}return t=c(i),n=s[t]=r[t](i),{c(){n.c(),e=ft()},m(a,l){s[t].m(a,l),b(a,e,l),o=!0},p(a,l){let u=t;t=c(a),t!==u&&(q(),m(s[u],1,1,()=>{s[u]=null}),j(),n=s[t],n||(n=s[t]=r[t](a),n.c()),d(n,1),n.m(e.parentNode,e))},i(a){o||(d(n),o=!0)},o(a){m(n),o=!1},d(a){a&&x(e),s[t].d(a)}}}function ZA(i){let t,n;return t=new K_({}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function JA(i){let t,n;return t=new uA({}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function c$(i){let t,n;return t=new Zp({props:{card:i[7].currentCard,flagsModel:i[9]}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};128&o[0]&&(r.card=e[7].currentCard),512&o[0]&&(r.flagsModel=e[9]),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function QA(i){let t,n,e,o,r;const s=[XA,YA,KA],c=[];function a(l,u){var $;return l[19]?0:l[5].isActive&&(($=l[5].currentAgent)!=null&&$.is_setup_script_agent)&&l[5].currentConversation?1:l[24]?2:-1}return~(t=a(i))&&(n=c[t]=s[t](i)),o=new jA({props:{imageSizeLimitKb:ys,maxImages:Or,imageSizeSumKb:i[11],imageCount:i[12]}}),{c(){n&&n.c(),e=H(),v(o.$$.fragment)},m(l,u){~t&&c[t].m(l,u),b(l,e,u),w(o,l,u),r=!0},p(l,u){let $=t;t=a(l),t===$?~t&&c[t].p(l,u):(n&&(q(),m(c[$],1,1,()=>{c[$]=null}),j()),~t?(n=c[t],n?n.p(l,u):(n=c[t]=s[t](l),n.c()),d(n,1),n.m(e.parentNode,e)):n=null);const f={};2048&u[0]&&(f.imageSizeSumKb=l[11]),4096&u[0]&&(f.imageCount=l[12]),o.$set(f)},i(l){r||(d(n),d(o.$$.fragment,l),r=!0)},o(l){m(n),m(o.$$.fragment,l),r=!1},d(l){l&&x(e),~t&&c[t].d(l),y(o,l)}}}function l$(i){let t,n,e;function o(s){i[72](s)}let r={};return i[10]!==void 0&&(r.inputArea=i[10]),t=new Ry({props:r}),Qt.push(()=>Ne(t,"inputArea",o)),t.$on("dragEnd",i[73]),{c(){v(t.$$.fragment)},m(s,c){w(t,s,c),e=!0},p(s,c){const a={};!n&&1024&c[0]&&(n=!0,a.inputArea=s[10],Be(()=>n=!1)),t.$set(a)},i(s){e||(d(t.$$.fragment,s),e=!0)},o(s){m(t.$$.fragment,s),e=!1},d(s){y(t,s)}}}function tM(i){let t,n,e=i[14]&&l$(i);return{c(){e&&e.c(),t=ft()},m(o,r){e&&e.m(o,r),b(o,t,r),n=!0},p(o,r){o[14]?e?(e.p(o,r),16384&r[0]&&d(e,1)):(e=l$(o),e.c(),d(e,1),e.m(t.parentNode,t)):e&&(q(),m(e,1,1,()=>{e=null}),j())},i(o){n||(d(e),n=!0)},o(o){m(e),n=!1},d(o){o&&x(t),e&&e.d(o)}}}function eM(i){let t,n,e,o;function r(c){i[70](c)}let s={editable:!i[30],placeholder:i[23],$$slots:{banner:[aM]},$$scope:{ctx:i}};return i[0]!==void 0&&(s.richTextEditorRoot=i[0]),n=new Pm({props:s}),Qt.push(()=>Ne(n,"richTextEditorRoot",r)),{c(){t=L("div"),v(n.$$.fragment),A(t,"class","l-input-area-design-system svelte-196qknj"),At(t,"l-input-area-design-system--tall",i[18]),At(t,"l-input-area-design-system--shrunk",i[17]),At(t,"l-input-area-design-system--editor-focused",i[29]),At(t,"l-input-area-design-system--has-banner",i[13])},m(c,a){b(c,t,a),w(n,t,null),i[71](t),o=!0},p(c,a){const l={};1073741824&a[0]&&(l.editable=!c[30]),8388608&a[0]&&(l.placeholder=c[23]),70&a[0]|134217728&a[2]&&(l.$$scope={dirty:a,ctx:c}),!e&&1&a[0]&&(e=!0,l.richTextEditorRoot=c[0],Be(()=>e=!1)),n.$set(l),(!o||262144&a[0])&&At(t,"l-input-area-design-system--tall",c[18]),(!o||131072&a[0])&&At(t,"l-input-area-design-system--shrunk",c[17]),(!o||536870912&a[0])&&At(t,"l-input-area-design-system--editor-focused",c[29]),(!o||8192&a[0])&&At(t,"l-input-area-design-system--has-banner",c[13])},i(c){o||(d(n.$$.fragment,c),o=!0)},o(c){m(n.$$.fragment,c),o=!1},d(c){c&&x(t),y(n),i[71](null)}}}function nM(i){let t,n;return t=new ym({props:{borders:["top"],style:"padding-top: 0;",overflowVisible:!0,$$slots:{default:[cM]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};134217728&o[2]&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function oM(i){let t,n,e;return n=new Pm({props:{editable:!0,hasSendButton:!1}}),{c(){t=L("div"),v(n.$$.fragment),A(t,"class","l-chat-setup-area l-input-area-design-system svelte-196qknj")},m(o,r){b(o,t,r),w(n,t,null),i[67](t),e=!0},p:N,i(o){e||(d(n.$$.fragment,o),e=!0)},o(o){m(n.$$.fragment,o),e=!1},d(o){o&&x(t),y(n),i[67](null)}}}function rM(i){let t,n;return t=new ym({props:{borders:["top"],style:"padding-top: 0;",overflowVisible:!0,$$slots:{default:[lM]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};134217728&o[2]&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function iM(i){let t,n;return t=new NA({props:{onNewThreadClick:i[69],onDismiss:i[44],onNeverShowAgain:i[45]}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p:N,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function sM(i){let t,n;return t=new bA({props:{daysRemaining:i[6].daysRemaining??null,usageBalanceDepleted:i[6].usageBalanceDepleted||!1,isInactive:i[6].type==="inactive_subscription",onDismiss:i[68]}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};64&o[0]&&(r.daysRemaining=e[6].daysRemaining??null),64&o[0]&&(r.usageBalanceDepleted=e[6].usageBalanceDepleted||!1),64&o[0]&&(r.isInactive=e[6].type==="inactive_subscription"),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function aM(i){let t,n,e,o;const r=[sM,iM],s=[];function c(a,l){return a[2]&&a[6]?0:a[1]?1:-1}return~(t=c(i))&&(n=s[t]=r[t](i)),{c(){n&&n.c(),e=ft()},m(a,l){~t&&s[t].m(a,l),b(a,e,l),o=!0},p(a,l){let u=t;t=c(a),t===u?~t&&s[t].p(a,l):(n&&(q(),m(s[u],1,1,()=>{s[u]=null}),j()),~t?(n=s[t],n?n.p(a,l):(n=s[t]=r[t](a),n.c()),d(n,1),n.m(e.parentNode,e)):n=null)},i(a){o||(d(n),o=!0)},o(a){m(n),o=!1},d(a){a&&x(e),~t&&s[t].d(a)}}}function cM(i){let t,n;return t=new Z9({}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function lM(i){let t,n;return t=new K3({}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function uM(i){let t,n,e,o;const r=[rM,oM,nM,eM],s=[];function c(a,l){return a[3]===tr.autofixCommand?0:a[15]?1:a[3]===tr.autofixPrompt?2:a[15]?-1:3}return~(t=c(i))&&(n=s[t]=r[t](i)),{c(){n&&n.c(),e=ft()},m(a,l){~t&&s[t].m(a,l),b(a,e,l),o=!0},p(a,l){let u=t;t=c(a),t===u?~t&&s[t].p(a,l):(n&&(q(),m(s[u],1,1,()=>{s[u]=null}),j()),~t?(n=s[t],n?n.p(a,l):(n=s[t]=r[t](a),n.c()),d(n,1),n.m(e.parentNode,e)):n=null)},i(a){o||(d(n),o=!0)},o(a){m(n),o=!1},d(a){a&&x(e),~t&&s[t].d(a)}}}function dM(i){let t,n;return t=new nA({}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function $M(i){let t,n,e,o,r;return n=new q3({props:{$$slots:{"footer-area":[dM],"input-area":[uM],"divider-area":[tM],"actions-area":[QA],"message-area":[GA],"floating-area":[VA],"header-area":[WA]},$$scope:{ctx:i}}}),{c(){t=L("div"),v(n.$$.fragment),A(t,"class","chat svelte-196qknj")},m(s,c){b(s,t,c),w(n,t,null),e=!0,o||(r=[Dt(window,"message",i[31].onMessageFromExtension),Dt(window,"beforeunload",i[65]),Dt(window,"keydown",i[66])],o=!0)},p(s,c){const a={};1877934063&c[0]|134217728&c[2]&&(a.$$scope={dirty:c,ctx:s}),n.$set(a)},i(s){e||(d(n.$$.fragment,s),e=!0)},o(s){m(n.$$.fragment,s),e=!1},d(s){s&&x(t),y(n),o=!1,tn(r)}}}function mM(i,t,n){let e,o,r,s,c,a,l,u,$,f,p,_,C,M,T,E,R,P,J,K,et,U,G,nt,X,Y,Z,it,rt,ht,ct,vt,Gt,Ct,jt,Ve,ye,Ge,z,S,F,tt=N,st=N,gt=N;i.$$.on_destroy.push(()=>tt()),i.$$.on_destroy.push(()=>st()),i.$$.on_destroy.push(()=>gt());let{initialConversation:_t}=t,{initialFlags:Rt}=t,{initialSubscriptionInfo:ee}=t,{initialSubscriptionDismissed:de}=t;const It=new Oi(xn);let he,Ze=new Y1,Le=new cp;Tt(i,Le,Mt=>n(7,Ct=Mt)),It.registerConsumer(Le);let ne=new X1(It,xn,Ze,{initialConversation:_t,initialFlags:Rt,onLoaded:()=>{if(ne.flags.enableAgentMode){const Mt=rt.currentChatMode;Mt?Mt===La.remoteAgent&&ne.flags.enableBackgroundAgents?qe.handleSetToBackgroundAgent():Mt===La.agent?qe.handleSetToAgent(re(rt.agentExecutionMode)):qe.handleSetToChat():qe.handleSetToAgent(re(rt.agentExecutionMode))}else he.setToChat()}});Tt(i,ne,Mt=>n(4,rt=Mt));const Ue=new Rn({msgBroker:It,isActive:!1,flagsModel:ne.flags,host:xn});Tt(i,Ue,Mt=>n(5,ht=Mt));let _n=new ws(ne.currentConversationModel,ne.extensionClient,ne,Ue);const Je=new FA(ne.flags,ne.currentConversationModel,ne.extensionClient);It.registerConsumer(Je),It.registerConsumer(ne),It.registerConsumer(ne.specialContextInputModel);const Cn=new j3(ne.currentConversationModel,ne.extensionClient);Tt(i,Cn,Mt=>n(62,Ve=Mt)),It.registerConsumer(Cn),he=new Jp(ne,_n,Je);const Me=new ho(ne,ne.extensionClient,ne.currentConversationModel,he);It.registerConsumer(Me);const{showAutoModeWarning:Jn}=he;Tt(i,Jn,Mt=>n(30,F=Mt));const gn=new wr(It),en=new Ra(It);It.registerConsumer(Ue),zn(Rn.key,Ue),zn(wr.key,gn),zn(Ra.key,en),zn(ho.key,Me);const Wn=Re(-1);zn(z$,Wn);const hn={agentOverviews:[],selectedAgentId:void 0,activeWebviews:["chat"],pinnedAgents:{}},an=new mp(It,hn,rf,sf);Tt(i,an,Mt=>n(64,z=Mt)),It.registerConsumer(an),zn(Z$,an);const qe=new vr(ne,he,Ue);It.registerConsumer(qe),zn(vr.key,qe),ne.setChatModeModel(qe);let Tn=an.state;const Kt=new jg(ne,he);It.registerConsumer(Kt);const fn=new _s(ne.extensionClient,ee,de),Dn=new lp(ne,ne.flags);It.registerConsumer(Dn);const Pn=new $p;lf(ne),zn("autofixConversationModel",Cn),zn("agentConversationModel",he),zn("toolsWebviewModel",_n),zn("checkpointStore",Je),zn("slashCommandModel",Kt),zn("modelRegistry",Pn),zn("subscriptionModel",fn);const Un=rt.flags;Tt(i,Un,Mt=>n(9,ye=Mt));const{isCurrConversationAgentic:Nn}=he;Tt(i,Nn,Mt=>n(8,jt=Mt));let Vn=!1;const He=fn.info;Tt(i,He,Mt=>n(6,ct=Mt));const En=fn.dismissed;Tt(i,En,Mt=>n(60,vt=Mt)),It.registerConsumer(new class{constructor(Mt){this._agentConversationModel=Mt}handleMessageFromExtension(Mt){return Mt.data.type===We.resetAgentOnboarding&&(this._agentConversationModel.resetOnboarding(),!0)}}(he));let xe,je=!1,cn,Vt;return so(()=>{ht.isRemoteAgentSshWindow&&ht.remoteAgentSshWindowId&&(qe.setToRemoteAgent(ht.remoteAgentSshWindowId),Ue.setCurrentAgent(ht.remoteAgentSshWindowId),Ue.setIsActive(!0));const Mt=[_n.dispose,Ue.dispose,fn.dispose];return()=>{Mt.forEach(Ut=>Ut==null?void 0:Ut())}}),i.$$set=Mt=>{"initialConversation"in Mt&&n(48,_t=Mt.initialConversation),"initialFlags"in Mt&&n(49,Rt=Mt.initialFlags),"initialSubscriptionInfo"in Mt&&n(50,ee=Mt.initialSubscriptionInfo),"initialSubscriptionDismissed"in Mt&&n(51,de=Mt.initialSubscriptionDismissed)},i.$$.update=()=>{var Mt,Ut,Ae;32&i.$$.dirty[0]&&((we,ge,Pe)=>{ge&&we.update(St=>{if(!St)return Pe;const Te=new Set(St.activeWebviews);return ge.isActive?Te.add("chat"):Te.delete("chat"),{...St,activeWebviews:Array.from(Te),agentOverviews:ge.agentOverviews,selectedAgentId:ge.currentAgentId,pinnedAgents:ge.pinnedAgents}})})(an,ht,hn),32&i.$$.dirty[0]|4&i.$$.dirty[2]&&((we,ge,Pe,St,Te)=>{if(JSON.stringify(we)!==JSON.stringify(ge.state)&&ge){const{selectedAgentId:Fe,pinnedAgents:Qn}=ge.state||{};Fe!==Pe.currentAgentId&&(St.extensionClient.showAugmentPanel(),Pe.setIsActive(!0),Te.setToRemoteAgent(Fe),Pe.setCurrentAgent(Fe)),Qn&&JSON.stringify(Qn)!==JSON.stringify(Pe.pinnedAgents)&&Pe.setPinnedAgents(Qn)}})(Tn,z,ht,ne,qe),16&i.$$.dirty[0]&&Pn.registerModels(Object.entries(rt.flags.modelRegistry||{}).map(([we,ge])=>({name:we,id:ge}))),32&i.$$.dirty[0]&&n(58,e=!ht.isRemoteAgentSshWindow),16&i.$$.dirty[0]&&(n(28,o=rt.flagsLoaded),st(),st=ie(o,we=>n(63,Ge=we))),544&i.$$.dirty[0]&&n(59,r=ye.doUseNewDraftFunctionality||ht.isActive),512&i.$$.dirty[0]|402653184&i.$$.dirty[1]|2&i.$$.dirty[2]&&n(27,s=Ge&&ye.fullFeatured&&e&&r),512&i.$$.dirty[0]|2&i.$$.dirty[2]&&n(26,c=Ge&&ye.doUseNewDraftFunctionality&&ye.fullFeatured),512&i.$$.dirty[0]|402653184&i.$$.dirty[1]|2&i.$$.dirty[2]&&n(25,a=Ge&&!r&&ye.fullFeatured&&e),32&i.$$.dirty[0]&&n(57,l=D$(ht)),67108864&i.$$.dirty[1]|1&i.$$.dirty[2]&&n(24,u=!Ve.isAutofixConversation()&&!l.doHideStatusBars),1&i.$$.dirty[2]&&n(3,$=Ve.isAutofixConversation()?Ve.shouldShowAutofixCommandInput()?tr.autofixCommand:tr.autofixPrompt:tr.normal),32&i.$$.dirty[0]&&n(56,f=ht.isCreatingAgent||ht.isActive&&((Mt=ht.currentAgent)==null?void 0:Mt.status)===rn.agentStarting),288&i.$$.dirty[0]|33554432&i.$$.dirty[1]&&n(23,p=f?"Remote Agent is starting":ht.isActive?ht.currentAgentId?"Ask Remote Agent to edit code, run tests, create a pull request":"Fix this bug, tackle this ticket, review comments in my pull request":jt?"Ask or instruct Augment Agent":"Ask or instruct Augment"),128&i.$$.dirty[0]&&n(22,_=Ct.actions.length>0),128&i.$$.dirty[0]&&n(21,C=Ct.actions.includes(Qe.allActionsComplete)),16&i.$$.dirty[0]&&(n(20,M=rt.currentConversationModel.totalCharactersStore),tt(),tt=ie(M,we=>n(61,Gt=we))),32&i.$$.dirty[0]|1075838976&i.$$.dirty[1]&&n(1,T=!Vn&&!function(){try{const we=localStorage.getItem(e$);return!!we&&JSON.parse(we).neverShow===!0}catch(we){return console.error("Failed to read thread length warning preference from localStorage:",we),!1}}()&&Gt>6e5&&!ht.isActive),32&i.$$.dirty[0]&&n(19,E=ht.isActive&&ht.currentAgent&&!((Ut=ht.currentAgent)!=null&&Ut.is_setup_script_agent)),64&i.$$.dirty[0]|536870912&i.$$.dirty[1]&&n(2,R=!(!ct||vt)&&fn.shouldShowWarning(ct)),32&i.$$.dirty[0]&&(we=>{const ge=we.isRemoteAgentSshWindow,Pe=we.remoteAgentSshWindowId;je===ge&&xe===Pe||(je=ge,xe=Pe,ge&&Pe&&(qe.setToRemoteAgent(Pe),we.setCurrentAgent(Pe),we.setIsActive(!0)))})(ht),32&i.$$.dirty[0]&&n(18,P=ht.isActive),32&i.$$.dirty[0]&&n(17,J=ht.isActive&&ht.currentAgentId),1&i.$$.dirty[0]&&(n(16,K=((Ae=Vt==null?void 0:Vt.isFocused)==null?void 0:Ae.call(Vt))||Re(!1)),gt(),gt=ie(K,we=>n(29,S=we))),32&i.$$.dirty[0]&&n(15,et=ht.isActive&&!ht.currentAgentId),8&i.$$.dirty[0]&&n(14,U=$!==tr.autofixCommand&&$!==tr.autofixPrompt),6&i.$$.dirty[0]&&n(13,G=R||T),16&i.$$.dirty[0]&&n(55,nt=rt.currentConversationModel.draftExchange),16777216&i.$$.dirty[1]&&n(54,X=nt==null?void 0:nt.rich_text_json_repr),8388608&i.$$.dirty[1]&&n(53,Y=xs(X)),4194304&i.$$.dirty[1]&&n(12,{imageCount:Z,imageSizeSumKb:it}=Y,Z,(n(11,it),n(53,Y),n(54,X),n(55,nt),n(4,rt)))},[Vt,T,R,$,rt,ht,ct,Ct,jt,ye,cn,it,Z,G,U,et,K,J,P,E,M,C,_,p,u,a,c,s,o,S,F,It,Ze,Le,ne,Ue,Cn,Jn,an,qe,fn,Dn,Un,Nn,function(){n(52,Vn=!0)},function(){(function(){try{const Mt={neverShow:!0,timestamp:new Date().toISOString()};localStorage.setItem(e$,JSON.stringify(Mt))}catch(Mt){console.error("Failed to save thread length warning preference to localStorage:",Mt)}})(),n(52,Vn=!0)},He,En,_t,Rt,ee,de,Vn,Y,X,nt,f,l,e,r,vt,Gt,Ve,Ge,z,()=>{rt.saveImmediate()},Mt=>function(Ut,Ae,we,ge,Pe){var St,Te;Ut.key==="Enter"&&!Ut.shiftKey&&Pe&&Pe.isFocused&&!re(Pe.isFocused())&&Pe.forceFocus(),!Ut.ctrlKey&&!Ut.metaKey||Ut.key!=="l"||Ut.shiftKey||(ge?ge.createThreadOfCurrentType():we.isActive?we.setCurrentAgent(void 0):(Ae.setCurrentConversation(),Ae.extensionClient.reportWebviewClientEvent(nr.chatNewConversation)),Ut.preventDefault()),Ae.flags.enableDebugFeatures&&(Ut.ctrlKey||Ut.metaKey)&&Ut.key==="."&&!Ut.shiftKey&&ge&&(ge.toggleChatAgentMode(),Ut.preventDefault()),Ae.flags.enableDebugFeatures&&(Ut.ctrlKey||Ut.metaKey)&&Ut.key==="."&&Ut.shiftKey&&ge&&(ge.toggleChatAgentMode(!0),Ut.preventDefault()),Ae.flags.enableDebugFeatures&&!we.isActive&&((Ut.ctrlKey||Ut.metaKey)&&Ut.shiftKey&&Ut.key==="l"&&(Ae.popCurrentConversation(),Ut.preventDefault()),Ut.altKey&&Ut.code==="BracketRight"&&(Ae.setCurrentConversation((St=Ae.nextConversation)==null?void 0:St.id,!1),Ut.preventDefault()),Ut.altKey&&Ut.code==="BracketLeft"&&(Ae.setCurrentConversation((Te=Ae.previousConversation)==null?void 0:Te.id,!1),Ut.preventDefault()),(Ut.ctrlKey||Ut.metaKey)&&Ut.key==="]"&&(Ae.currentConversationModel.focusModel.focusNext(),Ut.preventDefault()),(Ut.ctrlKey||Ut.metaKey)&&Ut.key==="["&&(Ae.currentConversationModel.focusModel.focusPrev(),Ut.preventDefault()),Ut.key==="Escape"&&(Ae.currentConversationModel.focusModel.setFocusIdx(void 0),Ut.preventDefault()))}(Mt,ne,Ue,qe,Vt),function(Mt){Qt[Mt?"unshift":"push"](()=>{cn=Mt,n(10,cn)})},()=>fn.dismiss(),()=>ne.setCurrentConversation(),function(Mt){Vt=Mt,n(0,Vt)},function(Mt){Qt[Mt?"unshift":"push"](()=>{cn=Mt,n(10,cn)})},function(Mt){cn=Mt,n(10,cn)},()=>{J&&(Vt==null||Vt.requestFocus())}]}class fM extends ut{constructor(t){super(),dt(this,t,mM,$M,lt,{initialConversation:48,initialFlags:49,initialSubscriptionInfo:50,initialSubscriptionDismissed:51},null,[-1,-1,-1])}}function u$(i){let t,n,e,o,r,s,c,a;n=new Wt({props:{size:1,$$slots:{default:[pM]},$$scope:{ctx:i}}}),o=new Wt({props:{size:1,$$slots:{default:[gM]},$$scope:{ctx:i}}}),s=new Wt({props:{size:1,$$slots:{default:[hM]},$$scope:{ctx:i}}});let l=i[0]!=="intellij"&&$$(i);return{c(){t=L("div"),v(n.$$.fragment),e=H(),v(o.$$.fragment),r=H(),v(s.$$.fragment),c=H(),l&&l.c(),A(t,"class","c-augment-features svelte-1jb2nyh")},m(u,$){b(u,t,$),w(n,t,null),O(t,e),w(o,t,null),O(t,r),w(s,t,null),O(t,c),l&&l.m(t,null),a=!0},p(u,$){const f={};2&$&&(f.$$scope={dirty:$,ctx:u}),n.$set(f);const p={};2&$&&(p.$$scope={dirty:$,ctx:u}),o.$set(p);const _={};3&$&&(_.$$scope={dirty:$,ctx:u}),s.$set(_),u[0]!=="intellij"?l?1&$&&d(l,1):(l=$$(u),l.c(),d(l,1),l.m(t,null)):l&&(q(),m(l,1,1,()=>{l=null}),j())},i(u){a||(d(n.$$.fragment,u),d(o.$$.fragment,u),d(s.$$.fragment,u),d(l),a=!0)},o(u){m(n.$$.fragment,u),m(o.$$.fragment,u),m(s.$$.fragment,u),m(l),a=!1},d(u){u&&x(t),y(n),y(o),y(s),l&&l.d()}}}function pM(i){let t;return{c(){t=V("Augment Features:")},m(n,e){b(n,t,e)},d(n){n&&x(t)}}}function gM(i){let t,n,e;return{c(){t=L("a"),t.textContent="Chat",n=V(` &
      `),e=L("a"),e.textContent="Agent,",A(t,"href","https://docs.augmentcode.com/using-augment/chat"),A(t,"class","svelte-1jb2nyh"),A(e,"href","https://docs.augmentcode.com/using-augment/agent"),A(e,"class","svelte-1jb2nyh")},m(o,r){b(o,t,r),b(o,n,r),b(o,e,r)},p:N,d(o){o&&(x(t),x(n),x(e))}}}function d$(i){let t,n,e;return{c(){t=V(`,
        `),n=L("a"),n.textContent="Instructions",e=V(","),A(n,"href","https://docs.augmentcode.com/using-augment/instructions"),A(n,"class","svelte-1jb2nyh")},m(o,r){b(o,t,r),b(o,n,r),b(o,e,r)},d(o){o&&(x(t),x(n),x(e))}}}function hM(i){let t,n,e=i[0]!=="intellij"&&d$();return{c(){t=L("a"),t.textContent="Code Completions",e&&e.c(),n=ft(),A(t,"href","https://docs.augmentcode.com/using-augment/completions"),A(t,"class","svelte-1jb2nyh")},m(o,r){b(o,t,r),e&&e.m(o,r),b(o,n,r)},p(o,r){o[0]!=="intellij"?e||(e=d$(),e.c(),e.m(n.parentNode,n)):e&&(e.d(1),e=null)},d(o){o&&(x(t),x(n)),e&&e.d(o)}}}function $$(i){let t,n;return t=new Wt({props:{size:1,$$slots:{default:[vM]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function vM(i){let t;return{c(){t=L("a"),t.textContent="Next Edit",A(t,"href","https://docs.augmentcode.com/using-augment/next-edit"),A(t,"class","svelte-1jb2nyh")},m(n,e){b(n,t,e)},p:N,d(n){n&&x(t)}}}function wM(i){let t,n,e=i[0]!==void 0&&u$(i);return{c(){e&&e.c(),t=ft()},m(o,r){e&&e.m(o,r),b(o,t,r),n=!0},p(o,[r]){o[0]!==void 0?e?(e.p(o,r),1&r&&d(e,1)):(e=u$(o),e.c(),d(e,1),e.m(t.parentNode,t)):e&&(q(),m(e,1,1,()=>{e=null}),j())},i(o){n||(d(e),n=!0)},o(o){m(e),n=!1},d(o){o&&x(t),e&&e.d(o)}}}function yM(i,t,n){let{client:e}=t;return i.$$set=o=>{"client"in o&&n(0,e=o.client)},[e]}class Qm extends ut{constructor(t){super(),dt(this,t,yM,wM,lt,{client:0})}}function xM(i){let t,n;return{c(){t=oe("svg"),n=oe("ellipse"),A(n,"cx","51"),A(n,"cy","4.5"),A(n,"rx","51"),A(n,"ry","4.5"),A(n,"fill","currentColor"),A(t,"width","102"),A(t,"height","9"),A(t,"viewBox","0 0 102 9"),A(t,"fill","none"),A(t,"xmlns","http://www.w3.org/2000/svg")},m(e,o){b(e,t,o),O(t,n)},p:N,i:N,o:N,d(e){e&&x(t)}}}class bM extends ut{constructor(t){super(),dt(this,t,null,xM,lt,{})}}function m$(i){let t,n,e;return n=new bM({}),{c(){t=L("div"),v(n.$$.fragment),A(t,"class","c-augment-logo-animated__shadow svelte-hwxi20")},m(o,r){b(o,t,r),w(n,t,null),e=!0},i(o){e||(d(n.$$.fragment,o),e=!0)},o(o){m(n.$$.fragment,o),e=!1},d(o){o&&x(t),y(n)}}}function _M(i){let t,n,e,o;const r=i[8].default,s=Yt(r,i,i[7],null),c=s||function(l){let u,$;return u=new jf({}),{c(){v(u.$$.fragment)},m(f,p){w(u,f,p),$=!0},i(f){$||(d(u.$$.fragment,f),$=!0)},o(f){m(u.$$.fragment,f),$=!1},d(f){y(u,f)}}}();let a=i[0]&&m$();return{c(){t=L("div"),n=L("div"),c&&c.c(),e=H(),a&&a.c(),A(n,"class","c-augment-logo-animated__icon svelte-hwxi20"),A(t,"class","c-augment-logo-animated svelte-hwxi20"),A(t,"style",i[2]),At(t,"c-augment-logo-animated--animated",i[1])},m(l,u){b(l,t,u),O(t,n),c&&c.m(n,null),O(t,e),a&&a.m(t,null),o=!0},p(l,[u]){s&&s.p&&(!o||128&u)&&Xt(s,r,l,l[7],o?Jt(r,l[7],u,null):Zt(l[7]),null),l[0]?a?1&u&&d(a,1):(a=m$(),a.c(),d(a,1),a.m(t,null)):a&&(q(),m(a,1,1,()=>{a=null}),j()),(!o||4&u)&&A(t,"style",l[2]),(!o||2&u)&&At(t,"c-augment-logo-animated--animated",l[1])},i(l){o||(d(c,l),d(a),o=!0)},o(l){m(c,l),m(a),o=!1},d(l){l&&x(t),c&&c.d(l),a&&a.d()}}}function CM(i,t,n){let e,o,{$$slots:r={},$$scope:s}=t,{heightPx:c=160}=t,{floatHeight:a=20}=t,{animationDuration:l=3}=t,{showShadow:u=!0}=t,{animated:$=!0}=t;return i.$$set=f=>{"heightPx"in f&&n(3,c=f.heightPx),"floatHeight"in f&&n(4,a=f.floatHeight),"animationDuration"in f&&n(5,l=f.animationDuration),"showShadow"in f&&n(0,u=f.showShadow),"animated"in f&&n(1,$=f.animated),"$$scope"in f&&n(7,s=f.$$scope)},i.$$.update=()=>{8&i.$$.dirty&&n(6,e=Math.round(.875*c)),120&i.$$.dirty&&n(2,o=`
    --augment-logo-height: ${c}px;
    --augment-logo-icon-size: ${e}px;
    --augment-logo-float-height: ${a}px;
    --animation-duration: ${l}s;
  `)},[u,$,o,c,a,l,e,s,r]}class t1 extends ut{constructor(t){super(),dt(this,t,CM,_M,lt,{heightPx:3,floatHeight:4,animationDuration:5,showShadow:0,animated:1})}}const AM=i=>({}),f$=i=>({}),MM=i=>({}),p$=i=>({});function g$(i){let t,n;const e=i[2].logo,o=Yt(e,i,i[1],p$);return{c(){t=L("div"),o&&o.c(),A(t,"class","c-onboarding-layout__logo svelte-72kwkw")},m(r,s){b(r,t,s),o&&o.m(t,null),n=!0},p(r,s){o&&o.p&&(!n||2&s)&&Xt(o,e,r,r[1],n?Jt(e,r[1],s,MM):Zt(r[1]),p$)},i(r){n||(d(o,r),n=!0)},o(r){m(o,r),n=!1},d(r){r&&x(t),o&&o.d(r)}}}function h$(i){let t,n;const e=i[2].error,o=Yt(e,i,i[1],f$);return{c(){t=L("div"),o&&o.c(),A(t,"class","c-onboarding-layout__error svelte-72kwkw")},m(r,s){b(r,t,s),o&&o.m(t,null),n=!0},p(r,s){o&&o.p&&(!n||2&s)&&Xt(o,e,r,r[1],n?Jt(e,r[1],s,AM):Zt(r[1]),f$)},i(r){n||(d(o,r),n=!0)},o(r){m(o,r),n=!1},d(r){r&&x(t),o&&o.d(r)}}}function kM(i){let t,n,e,o,r,s=i[0].logo&&g$(i);const c=i[2].default,a=Yt(c,i,i[1],null);let l=i[0].error&&h$(i);return{c(){t=L("div"),s&&s.c(),n=H(),e=L("div"),a&&a.c(),o=H(),l&&l.c(),A(e,"class","c-onboarding-layout__content svelte-72kwkw"),A(t,"class","c-onboarding-layout svelte-72kwkw"),At(t,"c-onboarding-layout__has-logo",i[0].logo)},m(u,$){b(u,t,$),s&&s.m(t,null),O(t,n),O(t,e),a&&a.m(e,null),O(t,o),l&&l.m(t,null),r=!0},p(u,[$]){u[0].logo?s?(s.p(u,$),1&$&&d(s,1)):(s=g$(u),s.c(),d(s,1),s.m(t,n)):s&&(q(),m(s,1,1,()=>{s=null}),j()),a&&a.p&&(!r||2&$)&&Xt(a,c,u,u[1],r?Jt(c,u[1],$,null):Zt(u[1]),null),u[0].error?l?(l.p(u,$),1&$&&d(l,1)):(l=h$(u),l.c(),d(l,1),l.m(t,null)):l&&(q(),m(l,1,1,()=>{l=null}),j()),(!r||1&$)&&At(t,"c-onboarding-layout__has-logo",u[0].logo)},i(u){r||(d(s),d(a,u),d(l),r=!0)},o(u){m(s),m(a,u),m(l),r=!1},d(u){u&&x(t),s&&s.d(),a&&a.d(u),l&&l.d()}}}function SM(i,t,n){let{$$slots:e={},$$scope:o}=t;const r=T$(e);return i.$$set=s=>{"$$scope"in s&&n(1,o=s.$$scope)},[r,o,e]}class Ws extends ut{constructor(t){super(),dt(this,t,SM,kM,lt,{})}}function TM(i){let t;return{c(){t=V(i[0])},m(n,e){b(n,t,e)},p(n,e){1&e&&bt(t,n[0])},d(n){n&&x(t)}}}function EM(i){let t;return{c(){t=V(i[1])},m(n,e){b(n,t,e)},p(n,e){2&e&&bt(t,n[1])},d(n){n&&x(t)}}}function IM(i){let t,n,e,o,r;return n=new Wt({props:{size:2,weight:"bold",class:"c-sign-in__welcome",$$slots:{default:[TM]},$$scope:{ctx:i}}}),o=new Wt({props:{size:1,$$slots:{default:[EM]},$$scope:{ctx:i}}}),{c(){t=L("div"),v(n.$$.fragment),e=H(),v(o.$$.fragment),A(t,"class","c-sign-in__title svelte-yuxz62")},m(s,c){b(s,t,c),w(n,t,null),O(t,e),w(o,t,null),r=!0},p(s,[c]){const a={};5&c&&(a.$$scope={dirty:c,ctx:s}),n.$set(a);const l={};6&c&&(l.$$scope={dirty:c,ctx:s}),o.$set(l)},i(s){r||(d(n.$$.fragment,s),d(o.$$.fragment,s),r=!0)},o(s){m(n.$$.fragment,s),m(o.$$.fragment,s),r=!1},d(s){s&&x(t),y(n),y(o)}}}function LM(i,t,n){let{title:e}=t,{subtitle:o}=t;return i.$$set=r=>{"title"in r&&n(0,e=r.title),"subtitle"in r&&n(1,o=r.subtitle)},[e,o]}class e1 extends ut{constructor(t){super(),dt(this,t,LM,IM,lt,{title:0,subtitle:1})}}function RM(i){let t,n,e,o,r,s;return{c(){t=oe("svg"),n=oe("g"),e=oe("path"),o=oe("defs"),r=oe("clipPath"),s=oe("rect"),A(e,"d","M16 7.99201C16 3.58042 12.416 0 8 0C3.584 0 0 3.58042 0 7.99201C0 10.4216 1.104 12.6114 2.832 14.0819C2.848 14.0979 2.864 14.0979 2.864 14.1139C3.008 14.2258 3.152 14.3377 3.312 14.4496C3.392 14.4975 3.456 14.5614 3.536 14.6254C4.816 15.4885 6.352 16 8.016 16C9.68 16 11.216 15.4885 12.496 14.6254C12.576 14.5774 12.64 14.5135 12.72 14.4655C12.864 14.3536 13.024 14.2418 13.168 14.1299C13.184 14.1139 13.2 14.1139 13.2 14.0979C14.896 12.6114 16 10.4216 16 7.99201ZM8 14.993C6.496 14.993 5.12 14.5135 3.984 13.7143C4 13.5864 4.032 13.4585 4.064 13.3307C4.16 12.979 4.304 12.6434 4.48 12.3397C4.656 12.036 4.864 11.7642 5.12 11.5245C5.36 11.2847 5.648 11.0609 5.936 10.8851C6.24 10.7093 6.56 10.5814 6.912 10.4855C7.264 10.3896 7.632 10.3417 8 10.3417C8.592 10.3417 9.136 10.4535 9.632 10.6613C10.128 10.8691 10.56 11.1568 10.928 11.5085C11.296 11.8761 11.584 12.3077 11.792 12.8032C11.904 13.0909 11.984 13.3946 12.032 13.7143C10.88 14.5135 9.504 14.993 8 14.993ZM5.552 7.59241C5.408 7.27273 5.344 6.92108 5.344 6.56943C5.344 6.21778 5.408 5.86613 5.552 5.54645C5.696 5.22677 5.888 4.93906 6.128 4.6993C6.368 4.45954 6.656 4.26773 6.976 4.12388C7.296 3.98002 7.648 3.91608 8 3.91608C8.368 3.91608 8.704 3.98002 9.024 4.12388C9.344 4.26773 9.632 4.45954 9.872 4.6993C10.112 4.93906 10.304 5.22677 10.448 5.54645C10.592 5.86613 10.656 6.21778 10.656 6.56943C10.656 6.93706 10.592 7.27273 10.448 7.59241C10.304 7.91209 10.112 8.1998 9.872 8.43956C9.632 8.67932 9.344 8.87113 9.024 9.01499C8.384 9.28671 7.6 9.28671 6.96 9.01499C6.64 8.87113 6.352 8.67932 6.112 8.43956C5.872 8.1998 5.68 7.91209 5.552 7.59241ZM12.976 12.8991C12.976 12.8671 12.96 12.8511 12.96 12.8192C12.8 12.3237 12.576 11.8442 12.272 11.4126C11.968 10.981 11.616 10.5974 11.184 10.2777C10.864 10.038 10.512 9.83017 10.144 9.67033C10.32 9.55844 10.48 9.41459 10.608 9.28671C10.848 9.04695 11.056 8.79121 11.232 8.5035C11.408 8.21579 11.536 7.91209 11.632 7.57642C11.728 7.24076 11.76 6.9051 11.76 6.56943C11.76 6.04196 11.664 5.54645 11.472 5.0989C11.28 4.65135 11.008 4.25175 10.656 3.9001C10.32 3.56444 9.904 3.29271 9.456 3.1009C9.008 2.90909 8.512 2.81319 7.984 2.81319C7.456 2.81319 6.96 2.90909 6.512 3.1009C6.064 3.29271 5.648 3.56444 5.312 3.91608C4.976 4.25175 4.704 4.66733 4.512 5.11489C4.32 5.56244 4.224 6.05794 4.224 6.58541C4.224 6.93706 4.272 7.27273 4.368 7.59241C4.464 7.92807 4.592 8.23177 4.768 8.51948C4.928 8.80719 5.152 9.06294 5.392 9.3027C5.536 9.44655 5.696 9.57443 5.872 9.68631C5.488 9.86214 5.136 10.0699 4.832 10.3097C4.416 10.6294 4.048 11.013 3.744 11.4286C3.44 11.8601 3.216 12.3237 3.056 12.8352C3.04 12.8671 3.04 12.8991 3.04 12.9151C1.776 11.6364 0.992 9.91009 0.992 7.99201C0.992 4.13986 4.144 0.991009 8 0.991009C11.856 0.991009 15.008 4.13986 15.008 7.99201C15.008 9.91009 14.224 11.6364 12.976 12.8991Z"),A(e,"fill","currentColor"),A(n,"clip-path","url(#clip0_9570_7560)"),A(s,"width","16"),A(s,"height","16"),A(s,"fill","currentColor"),A(r,"id","clip0_9570_7560"),A(t,"width","16"),A(t,"height","16"),A(t,"viewBox","0 0 16 16"),A(t,"fill","none"),A(t,"xmlns","http://www.w3.org/2000/svg")},m(c,a){b(c,t,a),O(t,n),O(n,e),O(t,o),O(o,r),O(r,s)},p:N,i:N,o:N,d(c){c&&x(t)}}}class DM extends ut{constructor(t){super(),dt(this,t,null,RM,lt,{})}}function PM(i){let t;return{c(){t=V("Sign In")},m(n,e){b(n,t,e)},d(n){n&&x(t)}}}function NM(i){let t,n;return t=new DM({props:{slot:"iconLeft"}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p:N,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function FM(i){let t,n,e,o,r,s,c;return n=new e1({props:{title:"Welcome!",subtitle:"Please sign in below."}}),o=new ve({props:{variant:"solid",color:"accent","data-testid":"sign-in-button",$$slots:{iconLeft:[NM],default:[PM]},$$scope:{ctx:i}}}),o.$on("click",i[1]),s=new Qm({props:{client:i[0]}}),{c(){t=L("div"),v(n.$$.fragment),e=H(),v(o.$$.fragment),r=H(),v(s.$$.fragment),A(t,"class","c-sign-in svelte-77uw5c")},m(a,l){b(a,t,l),w(n,t,null),O(t,e),w(o,t,null),O(t,r),w(s,t,null),c=!0},p(a,l){const u={};8&l&&(u.$$scope={dirty:l,ctx:a}),o.$set(u);const $={};1&l&&($.client=a[0]),s.$set($)},i(a){c||(d(n.$$.fragment,a),d(o.$$.fragment,a),d(s.$$.fragment,a),c=!0)},o(a){m(n.$$.fragment,a),m(o.$$.fragment,a),m(s.$$.fragment,a),c=!1},d(a){a&&x(t),y(n),y(o),y(s)}}}function OM(i){let t,n;return t=new t1({props:{slot:"logo"}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p:N,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function zM(i){let t,n,e,o;return t=new Ws({props:{$$slots:{logo:[OM],default:[FM]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(r,s){w(t,r,s),n=!0,e||(o=Dt(window,"message",i[2]),e=!0)},p(r,[s]){const c={};9&s&&(c.$$scope={dirty:s,ctx:r}),t.$set(c)},i(r){n||(d(t.$$.fragment,r),n=!0)},o(r){m(t.$$.fragment,r),n=!1},d(r){y(t,r),e=!1,o()}}}function BM(i,t,n){let e;return xn.postMessage({type:We.signInLoaded}),[e,function(){xn.postMessage({type:We.mainPanelPerformAction,data:"sign-in"})},o=>{const r=o.data;r.type===We.signInLoadedResponse&&n(0,e=r.data.client)}]}class HM extends ut{constructor(t){super(),dt(this,t,BM,zM,lt,{})}}const UM=i=>({}),v$=i=>({slot:"icon"}),qM=i=>({}),w$=i=>({slot:"icon"});function jM(i){let t,n;return t=new Zn({props:{variant:"soft",size:1,color:i[0],$$slots:{icon:[KM],default:[GM]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};1&o&&(r.color=e[0]),74&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function WM(i){let t,n,e,o;return t=new Zn({props:{variant:"soft",size:1,color:i[0],$$slots:{default:[YM]},$$scope:{ctx:i}}}),e=new Zn({props:{variant:"soft",size:1,color:"info",$$slots:{icon:[ZM],default:[XM]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment),n=H(),v(e.$$.fragment)},m(r,s){w(t,r,s),b(r,n,s),w(e,r,s),o=!0},p(r,s){const c={};1&s&&(c.color=r[0]),66&s&&(c.$$scope={dirty:s,ctx:r}),t.$set(c);const a={};68&s&&(a.$$scope={dirty:s,ctx:r}),e.$set(a)},i(r){o||(d(t.$$.fragment,r),d(e.$$.fragment,r),o=!0)},o(r){m(t.$$.fragment,r),m(e.$$.fragment,r),o=!1},d(r){r&&x(n),y(t,r),y(e,r)}}}function y$(i){let t,n;return t=new fe({props:{variant:"ghost",color:"neutral",size:1,$$slots:{default:[VM]},$$scope:{ctx:i}}}),t.$on("click",i[5]),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};64&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function VM(i){let t,n;return t=new _r({}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function GM(i){let t,n,e,o;n=new br({props:{markdown:i[1]}});let r=!!i[3]&&y$(i);return{c(){t=L("div"),v(n.$$.fragment),e=H(),r&&r.c(),A(t,"class","c-callout-wrapper svelte-fh6sa8")},m(s,c){b(s,t,c),w(n,t,null),O(t,e),r&&r.m(t,null),o=!0},p(s,c){const a={};2&c&&(a.markdown=s[1]),n.$set(a),s[3]?r?(r.p(s,c),8&c&&d(r,1)):(r=y$(s),r.c(),d(r,1),r.m(t,null)):r&&(q(),m(r,1,1,()=>{r=null}),j())},i(s){o||(d(n.$$.fragment,s),d(r),o=!0)},o(s){m(n.$$.fragment,s),m(r),o=!1},d(s){s&&x(t),y(n),r&&r.d()}}}function KM(i){let t;const n=i[4].icon,e=Yt(n,i,i[6],v$);return{c(){e&&e.c()},m(o,r){e&&e.m(o,r),t=!0},p(o,r){e&&e.p&&(!t||64&r)&&Xt(e,n,o,o[6],t?Jt(n,o[6],r,UM):Zt(o[6]),v$)},i(o){t||(d(e,o),t=!0)},o(o){m(e,o),t=!1},d(o){e&&e.d(o)}}}function YM(i){let t,n;return t=new br({props:{markdown:i[1]}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};2&o&&(r.markdown=e[1]),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function XM(i){let t,n;return t=new br({props:{markdown:i[2]}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};4&o&&(r.markdown=e[2]),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function ZM(i){let t;const n=i[4].icon,e=Yt(n,i,i[6],w$);return{c(){e&&e.c()},m(o,r){e&&e.m(o,r),t=!0},p(o,r){e&&e.p&&(!t||64&r)&&Xt(e,n,o,o[6],t?Jt(n,o[6],r,qM):Zt(o[6]),w$)},i(o){t||(d(e,o),t=!0)},o(o){m(e,o),t=!1},d(o){e&&e.d(o)}}}function JM(i){let t,n,e,o,r;const s=[WM,jM],c=[];function a($,f){return $[2]?0:1}n=a(i),e=c[n]=s[n](i);const l=i[4].default,u=Yt(l,i,i[6],null);return{c(){t=L("div"),e.c(),o=H(),u&&u.c(),A(t,"class","c-base-card svelte-fh6sa8")},m($,f){b($,t,f),c[n].m(t,null),O(t,o),u&&u.m(t,null),r=!0},p($,[f]){let p=n;n=a($),n===p?c[n].p($,f):(q(),m(c[p],1,1,()=>{c[p]=null}),j(),e=c[n],e?e.p($,f):(e=c[n]=s[n]($),e.c()),d(e,1),e.m(t,o)),u&&u.p&&(!r||64&f)&&Xt(u,l,$,$[6],r?Jt(l,$[6],f,null):Zt($[6]),null)},i($){r||(d(e),d(u,$),r=!0)},o($){m(e),m(u,$),r=!1},d($){$&&x(t),c[n].d(),u&&u.d($)}}}function QM(i,t,n){let{$$slots:e={},$$scope:o}=t,{color:r}=t,{description:s}=t,{callout:c}=t,{onClose:a}=t;return i.$$set=l=>{"color"in l&&n(0,r=l.color),"description"in l&&n(1,s=l.description),"callout"in l&&n(2,c=l.callout),"onClose"in l&&n(3,a=l.onClose),"$$scope"in l&&n(6,o=l.$$scope)},[r,s,c,a,e,()=>a(),o]}class Vs extends ut{constructor(t){super(),dt(this,t,QM,JM,lt,{color:0,description:1,callout:2,onClose:3})}}function x$(i,t,n){const e=i.slice();return e[9]=t[n].text,e[10]=t[n].action,e[11]=t[n].appearance,e}const tk=i=>({}),b$=i=>({slot:"icon"});function ek(i){let t,n,e=i[9]+"";return{c(){t=V(e),n=H()},m(o,r){b(o,t,r),b(o,n,r)},p(o,r){4&r&&e!==(e=o[9]+"")&&bt(t,e)},d(o){o&&(x(t),x(n))}}}function _$(i){let t,n;return t=new ve({props:{size:2,variant:"solid",color:i[11]?i[11]:"accent",class:"c-btns-card__button",title:i[9],$$slots:{default:[ek]},$$scope:{ctx:i}}}),t.$on("click",function(){return i[7](i[10])}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){i=e;const r={};4&o&&(r.color=i[11]?i[11]:"accent"),4&o&&(r.title=i[9]),260&o&&(r.$$scope={dirty:o,ctx:i}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function C$(i){let t,n;return t=new xm({}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function nk(i){let t,n,e,o,r=se(i[2]),s=[];for(let l=0;l<r.length;l+=1)s[l]=_$(x$(i,r,l));const c=l=>m(s[l],1,1,()=>{s[l]=null});let a=i[3]&&C$();return{c(){t=L("div");for(let l=0;l<s.length;l+=1)s[l].c();n=H(),a&&a.c(),e=ft(),A(t,"class","c-btns-card__buttons svelte-1701q2d")},m(l,u){b(l,t,u);for(let $=0;$<s.length;$+=1)s[$]&&s[$].m(t,null);b(l,n,u),a&&a.m(l,u),b(l,e,u),o=!0},p(l,u){if(36&u){let $;for(r=se(l[2]),$=0;$<r.length;$+=1){const f=x$(l,r,$);s[$]?(s[$].p(f,u),d(s[$],1)):(s[$]=_$(f),s[$].c(),d(s[$],1),s[$].m(t,null))}for(q(),$=r.length;$<s.length;$+=1)c($);j()}l[3]?a?8&u&&d(a,1):(a=C$(),a.c(),d(a,1),a.m(e.parentNode,e)):a&&(q(),m(a,1,1,()=>{a=null}),j())},i(l){if(!o){for(let u=0;u<r.length;u+=1)d(s[u]);d(a),o=!0}},o(l){s=s.filter(Boolean);for(let u=0;u<s.length;u+=1)m(s[u]);m(a),o=!1},d(l){l&&(x(t),x(n),x(e)),bn(s,l),a&&a.d(l)}}}function ok(i){let t;const n=i[6].icon,e=Yt(n,i,i[8],b$);return{c(){e&&e.c()},m(o,r){e&&e.m(o,r),t=!0},p(o,r){e&&e.p&&(!t||256&r)&&Xt(e,n,o,o[8],t?Jt(n,o[8],r,tk):Zt(o[8]),b$)},i(o){t||(d(e,o),t=!0)},o(o){m(e,o),t=!1},d(o){e&&e.d(o)}}}function rk(i){let t,n;return t=new Vs({props:{color:i[1],description:i[0],callout:i[4],$$slots:{icon:[ok],default:[nk]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,[o]){const r={};2&o&&(r.color=e[1]),1&o&&(r.description=e[0]),16&o&&(r.callout=e[4]),268&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function ik(i,t,n){let{$$slots:e={},$$scope:o}=t,{description:r}=t,{color:s}=t,{buttons:c=[]}=t,{inProgress:a=!1}=t,{callout:l}=t;function u($){xn.postMessage({type:We.mainPanelPerformAction,data:$})}return i.$$set=$=>{"description"in $&&n(0,r=$.description),"color"in $&&n(1,s=$.color),"buttons"in $&&n(2,c=$.buttons),"inProgress"in $&&n(3,a=$.inProgress),"callout"in $&&n(4,l=$.callout),"$$scope"in $&&n(8,o=$.$$scope)},[r,s,c,a,l,u,e,$=>u($),o]}class Xr extends ut{constructor(t){super(),dt(this,t,ik,rk,lt,{description:0,color:1,buttons:2,inProgress:3,callout:4})}}function sk(i){return{c:N,m:N,p:N,i:N,o:N,d:N}}function ak(i){let t,n;return t=new Vs({props:{color:"warning",description:"Current workspace contains your home directory. Augment cannot upload your home directory to the cloud. Please open a different workspace",$$slots:{icon:[fk]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};8&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function ck(i){let t,n;return t=new Vs({props:{color:"warning",description:`The workspace you have opened exceeds Augment's ${i[2].maxTrackableFileCount} file upload limit. Please use a .augmentignore or .gitignore to exclude files from being uploaded, or open a smaller workspace.`,$$slots:{icon:[pk]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};4&o&&(r.description=`The workspace you have opened exceeds Augment's ${e[2].maxTrackableFileCount} file upload limit. Please use a .augmentignore or .gitignore to exclude files from being uploaded, or open a smaller workspace.`),8&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function lk(i){let t,n;return t=new Xr({props:{color:"neutral",description:"To provide the best quality responses, Augment will index your code in our secure cloud. Your data always stays secure and private. [Learn More](https://docs.augmentcode.com/setup-augment/workspace-indexing)",callout:i[2].userTier==="community"?"You are subscribed to the Community plan, we may use any code you share to train our AI models.":void 0,buttons:[{text:"Enable Indexing",action:"grant-sync-permission"}],$$slots:{icon:[gk]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};4&o&&(r.callout=e[2].userTier==="community"?"You are subscribed to the Community plan, we may use any code you share to train our AI models.":void 0),8&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function uk(i){let t,n;return t=new Xr({props:{color:"warning",description:"Codeium suggestions will collide with Augment's suggestions. Turn off Codeium to fix this.",buttons:[{text:"Disable Codeium",action:"disable-codeium"}],$$slots:{icon:[hk]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};8&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function dk(i){let t,n;return t=new Xr({props:{color:"warning",description:"GitHub Copilot suggestions will collide with Augment's suggestions. Turn off Copilot to fix this.",buttons:[{text:"Disable Github Copilot",action:"disable-github-copilot"}],$$slots:{icon:[vk]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};8&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function $k(i){let t,n;return t=new Xr({props:{color:"neutral",description:"Please complete the sign-in process in your browser.",buttons:[{text:"Cancel",action:"cancel-sign-in",appearance:"neutral"}],inProgress:!0,$$slots:{icon:[wk]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};8&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function mk(i){let t,n;return t=new Xr({props:{color:"neutral",description:"Welcome to Augment! Sign in to your existing account or create a new one to get started.",buttons:[{text:"Start using Augment",action:"sign-in"}],$$slots:{icon:[yk]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};8&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function fk(i){let t,n;return t=new jn({props:{slot:"icon"}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p:N,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function pk(i){let t,n;return t=new jn({props:{slot:"icon"}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p:N,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function gk(i){let t,n;return t=new jo({props:{slot:"icon"}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p:N,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function hk(i){let t,n;return t=new jn({props:{slot:"icon"}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p:N,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function vk(i){let t,n;return t=new jn({props:{slot:"icon"}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p:N,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function wk(i){let t,n;return t=new jo({props:{slot:"icon"}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p:N,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function yk(i){let t,n;return t=new jo({props:{slot:"icon"}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p:N,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function xk(i){let t,n,e,o;const r=[mk,$k,dk,uk,lk,ck,ak,sk],s=[];function c(a,l){return a[0]===Qe.signInRequired?0:a[0]===qs.signInInProgress?1:a[0]===Qe.disableCopilot?2:a[0]===Qe.disableCodeium?3:a[0]===Qe.syncingPermissionNeeded?4:a[0]===Qe.workspaceTooLarge?5:a[0]===Qe.uploadingHomeDir?6:a[0]===Qe.allActionsComplete?7:-1}return~(t=c(i))&&(n=s[t]=r[t](i)),{c(){n&&n.c(),e=ft()},m(a,l){~t&&s[t].m(a,l),b(a,e,l),o=!0},p(a,[l]){let u=t;t=c(a),t===u?~t&&s[t].p(a,l):(n&&(q(),m(s[u],1,1,()=>{s[u]=null}),j()),~t?(n=s[t],n?n.p(a,l):(n=s[t]=r[t](a),n.c()),d(n,1),n.m(e.parentNode,e)):n=null)},i(a){o||(d(n),o=!0)},o(a){m(n),o=!1},d(a){a&&x(e),~t&&s[t].d(a)}}}function bk(i,t,n){let e,o=N,r=()=>(o(),o=ie(c,a=>n(2,e=a)),c);i.$$.on_destroy.push(()=>o());let{card:s}=t,{flagsModel:c}=t;return r(),i.$$set=a=>{"card"in a&&n(0,s=a.card),"flagsModel"in a&&r(n(1,c=a.flagsModel))},[s,c,e]}class _k extends ut{constructor(t){super(),dt(this,t,bk,xk,lt,{card:0,flagsModel:1})}}class Ck{constructor(){$t(this,"subscribers",new Set);$t(this,"_actions",[]);$t(this,"_currentIndex",0);$t(this,"subscribe",t=>(this.subscribers.add(t),t(this),()=>{this.subscribers.delete(t)}))}get currentCard(){return this.actions[this._currentIndex]}notifySubscribers(){this.subscribers.forEach(t=>t(this))}get actions(){return this._actions}handleMessageFromExtension(t){const n=t.data;return n.type===We.mainPanelActions&&(this.onActionsUpdates(n.data),!0)}onActionsUpdates(t){this._actions=t,this._currentIndex=0,this.notifySubscribers()}nextAction(){this._currentIndex=(this._currentIndex+1)%this._actions.length,this.notifySubscribers()}prevAction(){this._currentIndex=(this._currentIndex-1+this._actions.length)%this._actions.length,this.notifySubscribers()}isCollapsible(t){return t===Qe.allActionsComplete}}function Ak(i){let t,n,e;return t=new om({}),{c(){v(t.$$.fragment),n=V(`
        Back`)},m(o,r){w(t,o,r),b(o,n,r),e=!0},i(o){e||(d(t.$$.fragment,o),e=!0)},o(o){m(t.$$.fragment,o),e=!1},d(o){o&&x(n),y(t,o)}}}function Mk(i){let t;return{c(){t=V("Index Codebase")},m(n,e){b(n,t,e)},d(n){n&&x(t)}}}function kk(i){let t;return{c(){t=V(`Indexing allows Augment to make tailored code suggestions and explain common practices or
        patterns.`)},m(n,e){b(n,t,e)},d(n){n&&x(t)}}}function Sk(i){let t;return{c(){t=L("a"),t.textContent="Learn More",A(t,"href","https://docs.augmentcode.com/setup-augment/workspace-indexing"),A(t,"class","svelte-f8zg6u")},m(n,e){b(n,t,e)},p:N,d(n){n&&x(t)}}}function Tk(i){let t,n,e;return n=new Wt({props:{size:1,$$slots:{default:[Sk]},$$scope:{ctx:i}}}),{c(){t=V(`Your data always stays secure, private and anonymized.
        `),v(n.$$.fragment)},m(o,r){b(o,t,r),w(n,o,r),e=!0},p(o,r){const s={};4096&r&&(s.$$scope={dirty:r,ctx:o}),n.$set(s)},i(o){e||(d(n.$$.fragment,o),e=!0)},o(o){m(n.$$.fragment,o),e=!1},d(o){o&&x(t),y(n,o)}}}function Ek(i){let t,n=(i[2]??A$)+"";return{c(){t=V(n)},m(e,o){b(e,t,o)},p(e,o){4&o&&n!==(n=(e[2]??A$)+"")&&bt(t,n)},d(e){e&&x(t)}}}function Ik(i){let t,n;return t=new Z1({props:{slot:"iconLeft"}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p:N,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function Lk(i){let t,n;return t=new ve({props:{variant:"outline",color:"neutral",size:2,$$slots:{iconLeft:[Ik],default:[Ek]},$$scope:{ctx:i}}}),t.$on("click",i[7]),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};4100&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function Rk(i){let t;return{c(){t=V("Index Codebase")},m(n,e){b(n,t,e)},d(n){n&&x(t)}}}function Dk(i){let t,n,e,o,r,s,c,a,l,u,$,f,p,_=I$(),C=_&&function(M){let T,E,R;return E=new ve({props:{variant:"ghost",color:"neutral",size:1,$$slots:{default:[Ak]},$$scope:{ctx:M}}}),E.$on("click",M[8]),{c(){T=L("div"),v(E.$$.fragment),A(T,"class","c-back-button-container svelte-f8zg6u")},m(P,J){b(P,T,J),w(E,T,null),R=!0},p(P,J){const K={};4096&J&&(K.$$scope={dirty:J,ctx:P}),E.$set(K)},i(P){R||(d(E.$$.fragment,P),R=!0)},o(P){m(E.$$.fragment,P),R=!1},d(P){P&&x(T),y(E)}}}(i);return e=new Wt({props:{size:2,weight:"bold",class:"c-awaiting-syncing-permission__title",$$slots:{default:[Mk]},$$scope:{ctx:i}}}),s=new Wt({props:{size:1,$$slots:{default:[kk]},$$scope:{ctx:i}}}),a=new Wt({props:{size:1,$$slots:{default:[Tk]},$$scope:{ctx:i}}}),u=new zt({props:{content:"Open a new project",$$slots:{default:[Lk]},$$scope:{ctx:i}}}),f=new ve({props:{variant:"solid",color:"accent",size:2,disabled:!i[2]||i[3],loading:i[1],$$slots:{default:[Rk]},$$scope:{ctx:i}}}),f.$on("click",i[6]),{c(){C&&C.c(),t=H(),n=L("div"),v(e.$$.fragment),o=H(),r=L("div"),v(s.$$.fragment),c=H(),v(a.$$.fragment),l=H(),v(u.$$.fragment),$=H(),v(f.$$.fragment),A(r,"class","c-awaiting-syncing-permission__text svelte-f8zg6u"),A(n,"class","c-awaiting-syncing-permission svelte-f8zg6u")},m(M,T){C&&C.m(M,T),b(M,t,T),b(M,n,T),w(e,n,null),O(n,o),O(n,r),w(s,r,null),O(r,c),w(a,r,null),O(n,l),w(u,n,null),O(n,$),w(f,n,null),p=!0},p(M,T){_&&C.p(M,T);const E={};4096&T&&(E.$$scope={dirty:T,ctx:M}),e.$set(E);const R={};4096&T&&(R.$$scope={dirty:T,ctx:M}),s.$set(R);const P={};4096&T&&(P.$$scope={dirty:T,ctx:M}),a.$set(P);const J={};4100&T&&(J.$$scope={dirty:T,ctx:M}),u.$set(J);const K={};12&T&&(K.disabled=!M[2]||M[3]),2&T&&(K.loading=M[1]),4096&T&&(K.$$scope={dirty:T,ctx:M}),f.$set(K)},i(M){p||(d(C),d(e.$$.fragment,M),d(s.$$.fragment,M),d(a.$$.fragment,M),d(u.$$.fragment,M),d(f.$$.fragment,M),p=!0)},o(M){m(C),m(e.$$.fragment,M),m(s.$$.fragment,M),m(a.$$.fragment,M),m(u.$$.fragment,M),m(f.$$.fragment,M),p=!1},d(M){M&&(x(t),x(n)),C&&C.d(M),y(e),y(s),y(a),y(u),y(f)}}}function Pk(i){let t,n,e;return n=new _k({props:{card:i[0].currentCard,flagsModel:i[5]}}),{c(){t=L("div"),v(n.$$.fragment),A(t,"slot","error")},m(o,r){b(o,t,r),w(n,t,null),e=!0},p(o,r){const s={};1&r&&(s.card=o[0].currentCard),n.$set(s)},i(o){e||(d(n.$$.fragment,o),e=!0)},o(o){m(n.$$.fragment,o),e=!1},d(o){o&&x(t),y(n)}}}function Nk(i){let t,n,e,o;return t=new Ws({props:{$$slots:{error:[Pk],default:[Dk]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(r,s){w(t,r,s),n=!0,e||(o=Dt(window,"message",i[9]),e=!0)},p(r,[s]){const c={};4111&s&&(c.$$scope={dirty:s,ctx:r}),t.$set(c)},i(r){n||(d(t.$$.fragment,r),n=!0)},o(r){m(t.$$.fragment,r),n=!1},d(r){y(t,r),e=!1,o()}}}const A$="Open a folder";function Fk(i,t,n){let e;const o=new Oi(xn);let r=new Ck;Tt(i,r,$=>n(0,e=$)),o.registerConsumer(r);const s=new lm,c=new um(xn,o,s);let a,l=!1,u=!1;return xn.postMessage({type:We.awaitingSyncingPermissionLoaded}),i.$$.update=()=>{1&i.$$.dirty&&n(3,u=e.currentCard===Qe.workspaceTooLarge||e.currentCard===Qe.uploadingHomeDir)},[e,l,a,u,r,s,function(){n(1,l=!0),c.grantSyncPermission()},function(){c.openProjectFolder()},function(){c.closeProjectFolder()},function($){const f=$.data;switch(f.type){case We.awaitingSyncingPermissionInitialize:{const{enableDebugFeatures:p,maxTrackableFileCount:_,userTier:C}=f.data;n(2,a=f.data.workspaceName),s.update({enableDebugFeatures:p,maxTrackableFileCount:_,userTier:C});break}case We.mainPanelActions:r.onActionsUpdates(function(p){const _=new Set([Qe.workspaceNotSelected,Qe.workspaceTooLarge,Qe.uploadingHomeDir]);return p.filter(C=>_.has(C))}(f.data))}}]}class Ok extends ut{constructor(t){super(),dt(this,t,Fk,Nk,lt,{})}}function zk(i){let t,n;return{c(){t=oe("svg"),n=oe("path"),A(n,"fill-rule","evenodd"),A(n,"clip-rule","evenodd"),A(n,"d","M8.14645 3.14645C8.34171 2.95118 8.65829 2.95118 8.85355 3.14645L12.8536 7.14645C13.0488 7.34171 13.0488 7.65829 12.8536 7.85355L8.85355 11.8536C8.65829 12.0488 8.34171 12.0488 8.14645 11.8536C7.95118 11.6583 7.95118 11.3417 8.14645 11.1464L11.2929 8H2.5C2.22386 8 2 7.77614 2 7.5C2 7.22386 2.22386 7 2.5 7H11.2929L8.14645 3.85355C7.95118 3.65829 7.95118 3.34171 8.14645 3.14645Z"),A(n,"fill","currentColor"),A(t,"width","15"),A(t,"height","15"),A(t,"viewBox","0 0 15 15"),A(t,"fill","none"),A(t,"xmlns","http://www.w3.org/2000/svg")},m(e,o){b(e,t,o),O(t,n)},p:N,i:N,o:N,d(e){e&&x(t)}}}class Bk extends ut{constructor(t){super(),dt(this,t,null,zk,lt,{})}}function Hk(i){let t,n;return{c(){t=oe("svg"),n=oe("path"),A(n,"fill-rule","evenodd"),A(n,"clip-rule","evenodd"),A(n,"d","M2 3.5C2 3.22386 2.22386 3 2.5 3H12.5C12.7761 3 13 3.22386 13 3.5V9.5C13 9.77614 12.7761 10 12.5 10H2.5C2.22386 10 2 9.77614 2 9.5V3.5ZM2 10.9146C1.4174 10.7087 1 10.1531 1 9.5V3.5C1 2.67157 1.67157 2 2.5 2H12.5C13.3284 2 14 2.67157 14 3.5V9.5C14 10.1531 13.5826 10.7087 13 10.9146V11.5C13 12.3284 12.3284 13 11.5 13H3.5C2.67157 13 2 12.3284 2 11.5V10.9146ZM12 11V11.5C12 11.7761 11.7761 12 11.5 12H3.5C3.22386 12 3 11.7761 3 11.5V11H12ZM5 6.5C5 6.22386 5.22386 6 5.5 6H7V4.5C7 4.22386 7.22386 4 7.5 4C7.77614 4 8 4.22386 8 4.5V6H9.5C9.77614 6 10 6.22386 10 6.5C10 6.77614 9.77614 7 9.5 7H8V8.5C8 8.77614 7.77614 9 7.5 9C7.22386 9 7 8.77614 7 8.5V7H5.5C5.22386 7 5 6.77614 5 6.5Z"),A(n,"fill","currentColor"),A(t,"width","15"),A(t,"height","15"),A(t,"viewBox","0 0 15 15"),A(t,"fill","none"),A(t,"xmlns","http://www.w3.org/2000/svg")},m(e,o){b(e,t,o),O(t,n)},p:N,i:N,o:N,d(e){e&&x(t)}}}class Uk extends ut{constructor(t){super(),dt(this,t,null,Hk,lt,{})}}function qk(i){let t;return{c(){t=V("Create a new project")},m(n,e){b(n,t,e)},d(n){n&&x(t)}}}function jk(i){let t,n;return t=new zs({props:{slot:"iconLeft"}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p:N,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function M$(i){let t,n,e,o,r,s,c;function a($){i[9]($)}function l($){i[10]($)}let u={color:i[2]?"error":"neutral",placeholder:"Project Name"};return i[1]!==void 0&&(u.value=i[1]),i[3]!==void 0&&(u.textInput=i[3]),n=new ir({props:u}),Qt.push(()=>Ne(n,"value",a)),Qt.push(()=>Ne(n,"textInput",l)),n.$on("keydown",i[11]),s=new fe({props:{disabled:i[4],$$slots:{default:[Wk]},$$scope:{ctx:i}}}),s.$on("click",i[12]),{c(){t=L("div"),v(n.$$.fragment),r=H(),v(s.$$.fragment),A(t,"class","c-folder-selection__project-name-input svelte-1hmau15")},m($,f){b($,t,f),w(n,t,null),O(t,r),w(s,t,null),c=!0},p($,f){const p={};4&f&&(p.color=$[2]?"error":"neutral"),!e&&2&f&&(e=!0,p.value=$[1],Be(()=>e=!1)),!o&&8&f&&(o=!0,p.textInput=$[3],Be(()=>o=!1)),n.$set(p);const _={};16&f&&(_.disabled=$[4]),16384&f&&(_.$$scope={dirty:f,ctx:$}),s.$set(_)},i($){c||(d(n.$$.fragment,$),d(s.$$.fragment,$),c=!0)},o($){m(n.$$.fragment,$),m(s.$$.fragment,$),c=!1},d($){$&&x(t),y(n),y(s)}}}function Wk(i){let t,n;return t=new Bk({}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function Vk(i){let t;return{c(){t=V("Open a local folder")},m(n,e){b(n,t,e)},d(n){n&&x(t)}}}function Gk(i){let t,n;return t=new rm({props:{slot:"iconLeft"}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p:N,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function Kk(i){let t;return{c(){t=V("Clone a repository")},m(n,e){b(n,t,e)},d(n){n&&x(t)}}}function Yk(i){let t,n;return t=new Uk({props:{slot:"iconLeft"}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p:N,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function Xk(i){let t,n,e,o,r,s,c,a,l,u,$,f,p;n=new e1({props:{title:"Welcome back!",subtitle:"Please open a project folder to begin."}}),r=new ve({props:{variant:"outline",color:"neutral",size:2,alignment:"left",$$slots:{iconLeft:[jk],default:[qk]},$$scope:{ctx:i}}}),r.$on("click",i[8]);let _=i[0]&&M$(i);return a=new ve({props:{variant:"outline",color:"neutral",size:2,alignment:"left",$$slots:{iconLeft:[Gk],default:[Vk]},$$scope:{ctx:i}}}),a.$on("click",i[6]),u=new ve({props:{variant:"outline",color:"neutral",size:2,alignment:"left",$$slots:{iconLeft:[Yk],default:[Kk]},$$scope:{ctx:i}}}),u.$on("click",i[7]),f=new Qm({}),{c(){t=L("div"),v(n.$$.fragment),e=H(),o=L("div"),v(r.$$.fragment),s=H(),_&&_.c(),c=H(),v(a.$$.fragment),l=H(),v(u.$$.fragment),$=H(),v(f.$$.fragment),A(o,"class","c-folder-selection__buttons svelte-1hmau15"),A(t,"class","c-folder-selection svelte-1hmau15")},m(C,M){b(C,t,M),w(n,t,null),O(t,e),O(t,o),w(r,o,null),O(o,s),_&&_.m(o,null),O(o,c),w(a,o,null),O(o,l),w(u,o,null),O(t,$),w(f,t,null),p=!0},p(C,M){const T={};16384&M&&(T.$$scope={dirty:M,ctx:C}),r.$set(T),C[0]?_?(_.p(C,M),1&M&&d(_,1)):(_=M$(C),_.c(),d(_,1),_.m(o,c)):_&&(q(),m(_,1,1,()=>{_=null}),j());const E={};16384&M&&(E.$$scope={dirty:M,ctx:C}),a.$set(E);const R={};16384&M&&(R.$$scope={dirty:M,ctx:C}),u.$set(R)},i(C){p||(d(n.$$.fragment,C),d(r.$$.fragment,C),d(_),d(a.$$.fragment,C),d(u.$$.fragment,C),d(f.$$.fragment,C),p=!0)},o(C){m(n.$$.fragment,C),m(r.$$.fragment,C),m(_),m(a.$$.fragment,C),m(u.$$.fragment,C),m(f.$$.fragment,C),p=!1},d(C){C&&x(t),y(n),y(r),_&&_.d(),y(a),y(u),y(f)}}}function Zk(i){let t,n;return t=new t1({props:{slot:"logo"}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p:N,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function k$(i){let t,n;return t=new Zn({props:{variant:"soft",color:"error",size:1,$$slots:{icon:[Qk],default:[Jk]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function Jk(i){let t;return{c(){t=V("Must contain only letters, numbers, hyphens, underscores, and spaces")},m(n,e){b(n,t,e)},d(n){n&&x(t)}}}function Qk(i){let t,n;return t=new jn({props:{slot:"icon"}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p:N,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function tS(i){let t,n,e=i[2]&&k$(i);return{c(){t=L("div"),e&&e.c(),A(t,"slot","error")},m(o,r){b(o,t,r),e&&e.m(t,null),n=!0},p(o,r){o[2]?e?4&r&&d(e,1):(e=k$(o),e.c(),d(e,1),e.m(t,null)):e&&(q(),m(e,1,1,()=>{e=null}),j())},i(o){n||(d(e),n=!0)},o(o){m(e),n=!1},d(o){o&&x(t),e&&e.d()}}}function eS(i){let t,n;return t=new Ws({props:{$$slots:{error:[tS],logo:[Zk],default:[Xk]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,[o]){const r={};16415&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function nS(i,t,n){const e=new um(xn,new Oi(xn),new lm);function o(u){e.createProject(u)}let r,s=!1,c="",a=!0,l=!1;return i.$$.update=()=>{7&i.$$.dirty&&(n(2,l=!/^[a-zA-Z0-9\-_ ]+$/.test(c)&&c.trim().length>0),n(4,a=!s||!c.trim().length||l))},[s,c,l,r,a,o,function(){e.openProjectFolder()},function(){e.cloneRepository()},function(){s?n(0,s=!1):(n(0,s=!0),setTimeout(()=>{r==null||r.focus()},0))},function(u){c=u,n(1,c)},function(u){r=u,n(3,r)},u=>{u.key!=="Enter"||a||(u.preventDefault(),o(c.trim()))},()=>o(c.trim())]}class oS extends ut{constructor(t){super(),dt(this,t,nS,eS,lt,{})}}function rS(i){let t,n;return t=new oS({}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function iS(i){let t,n;return t=new Ok({}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function sS(i){let t,n;return t=new fM({}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function aS(i){let t,n;return t=new HM({}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function cS(i){let t,n,e,o;const r=[aS,sS,iS,rS],s=[];function c(a,l){return a[0]===fi.signIn?0:a[0]===fi.chat?1:a[0]===fi.awaitingSyncingPermission?2:a[0]===fi.folderSelection?3:-1}return~(n=c(i))&&(e=s[n]=r[n](i)),{c(){t=L("main"),e&&e.c()},m(a,l){b(a,t,l),~n&&s[n].m(t,null),o=!0},p(a,l){let u=n;n=c(a),n!==u&&(e&&(q(),m(s[u],1,1,()=>{s[u]=null}),j()),~n?(e=s[n],e||(e=s[n]=r[n](a),e.c()),d(e,1),e.m(t,null)):e=null)},i(a){o||(d(e),o=!0)},o(a){m(e),o=!1},d(a){a&&x(t),~n&&s[n].d()}}}function lS(i){let t,n,e,o;return t=new Wf.Root({props:{$$slots:{default:[cS]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(r,s){w(t,r,s),n=!0,e||(o=Dt(window,"message",i[1]),e=!0)},p(r,[s]){const c={};5&s&&(c.$$scope={dirty:s,ctx:r}),t.$set(c)},i(r){n||(d(t.$$.fragment,r),n=!0)},o(r){m(t.$$.fragment,r),n=!1},d(r){y(t,r),e=!1,o()}}}function uS(i,t,n){let e;return xn.postMessage({type:We.mainPanelLoaded}),[e,o=>{const r=o.data;r.type===We.mainPanelDisplayApp&&n(0,e=r.data)}]}class dS extends ut{constructor(t){super(),dt(this,t,uS,lS,lt,{})}}(async function(){xn&&xn.initialize&&await xn.initialize(),new dS({target:document.getElementById("app")})})();export{Bk as A,Bm as B,av as C,pg as D,ki as I,Ug as R,aT as S,Kg as a,cT as b,d3 as c,yo as d,G4 as e,lT as f,qm as g};
