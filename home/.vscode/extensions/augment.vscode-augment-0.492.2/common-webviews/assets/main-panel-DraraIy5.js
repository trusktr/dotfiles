const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./index-oyQWDnzB.js","./SpinnerAugment-BEPEN2tu.js","./SpinnerAugment-DnPofOlT.css","./index-CiMDylqQ.js","./index-McRKs1sU.css","./RemoteAgentSetup-D4Tft-uG.js","./CalloutAugment-DzngRWi1.js","./CalloutAugment-Dvw-pMXw.css","./types-DK4HA_lx.js","./TextTooltipAugment-DAVq7Vla.js","./BaseButton-DBHsDlhs.js","./BaseButton-B2NZuaj3.css","./IconButtonAugment-DT9AU8SC.js","./IconButtonAugment-CA6XnfI-.css","./Content-Bm7C6iJ1.js","./globals-D0QH3NT1.js","./Content-LuLOeTld.css","./TextTooltipAugment-CXnRMJBa.css","./index-DqflzTEb.js","./ButtonAugment-xh-SOBaV.js","./ButtonAugment-zn72hvQy.css","./github-kew-evZ8.js","./magnifying-glass-BmBw0jRN.js","./folder-DhY9vbAU.js","./arrow-up-right-from-square-Yo0BPgM2.js","./file-paths-BcSg4gks.js","./folder-opened-BLAu3pyz.js","./types-CGlLNakm.js","./file-type-utils-B3gunxPI.js","./check-56hMuF8e.js","./types-DDm27S8B.js","./utils-Rh_q5w_c.js","./ra-diff-ops-model-pDvb0wIq.js","./index-DY0Q9XhW.js","./CardAugment-RCmwRtRa.js","./CardAugment-BuBr3xQZ.css","./index-CLSyEK0S.css","./isObjectLike-C4kUqRHQ.js","./TextAreaAugment-C1Wf9cvH.js","./TextAreaAugment-J75lFxU7.css","./diff-utils-CHDUdEQq.js","./toggleHighContrast-CwIv4U26.js","./preload-helper-Dv6uf1Os.js","./toggleHighContrast-D4zjdeIP.css","./diff-utils-DTcQ2vsq.css","./folder-CQqSbZRe.css","./CopyButton-BVbGAvmE.js","./CopyButton-C581jDHd.css","./terminal-CS_V-nAg.js","./pen-to-square-DEUxz3in.js","./Keybindings-tA5aIx1O.js","./exclamation-triangle-Ovva0uhO.js","./augment-logo-DTgokSKV.js","./Keybindings-BFFBoxX3.css","./StatusIndicator-By29C4Fu.js","./StatusIndicator-D-yOSWp9.css","./trash-can-C3k9v09A.js","./trash-can-Df_FYENN.css","./design-system-init-BG5cEFim.js","./design-system-init-Be7obQsv.css","./await_block-DO_bDmS_.js","./Filespan-CId0aUQb.js","./Filespan-uhpSTama.css","./CollapseButtonAugment-CEo2LYfW.js","./CollapseButtonAugment-CLLTFP8m.css","./ellipsis-DsAFryUF.js","./keypress-DD1aQVr0.js","./MaterialIcon-BGa1zPPN.js","./MaterialIcon-BO_oU5T3.css","./VSCodeCodicon-DfXdb5mS.js","./VSCodeCodicon-DVaocTud.css","./autofix-state-d-ymFdyn.js","./chat-flags-model-CRX90O9_.js","./RemoteAgentSetup-CE-yp3a6.css","./MessageList-BR5DdrAJ.js","./RemoteAgentRetry-DEfHN_nB.js","./AugmentMessage-DtUuYhLr.js","./IconFilePath-BCQiczSW.js","./LanguageIcon-CV8JBzL9.js","./LanguageIcon-D78BqCXT.css","./next-edit-types-904A5ehg.js","./IconFilePath-CiKel2Kp.css","./lodash-CujEqTm9.js","./mcp-logo-C2xFPiFq.js","./AugmentMessage-WtoiG0Z-.css","./expand-QHrAftyc.js","./RemoteAgentRetry-DYgtEKQz.css","./MessageList-DRTeF5X0.css","./VirtualizedMessageList-rgJZuMFQ.js","./VirtualizedMessageList-CIYMwUjL.css"])))=>i.map(i=>d[i]);
var Dm=Object.defineProperty;var Nm=(i,t,n)=>t in i?Dm(i,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):i[t]=n;var $t=(i,t,n)=>Nm(i,typeof t!="symbol"?t+"":t,n);import{al as oe,S as ut,i as dt,s as ct,P as Yt,G as L,c as A,Y as fr,K as Mt,e as x,f as O,R as Kt,V as Xt,W as Jt,u as d,t as $,h as b,Q as U,q as j,r as q,I as v,L as w,M as y,n as P,a9 as mt,ae as pn,X as G,Z as _t,b as ie,ah as ce,ak as jn,A as Le,af as St,ag as Et,ab as Ne,a5 as Lt,ax as $r,aE as bi,a7 as Qe,T as Gt,a8 as vn,_ as te,aj as go,aC as Ia,a2 as jr,aD as ds,aA as on,a as kt,g as Se,a0 as fo,N as mr,j as le,H as rn,w as sn,x as an,y as cn,d as $e,z as ln,J as Pm,F as Fm,$ as Te,a1 as Re,aa as qn,a3 as ro,k as Om,l as zm,U as Bm,a6 as Ss,am as Fo,ap as xi,ao as q$,a4 as pr,ac as Nn,ad as xn,aG as $s,an as Un,O as W$}from"./SpinnerAugment-BEPEN2tu.js";import{P as Ts,a as Um,B as Ao,F as V$,L as Hm,b as jm,D as qm,T as Wm}from"./trash-can-C3k9v09A.js";import"./design-system-init-BG5cEFim.js";import{W as je,e as se,h as wn,i as G$,u as qr,o as Bi,d as Vm,O as Hn,M as pi}from"./BaseButton-DBHsDlhs.js";import{c as La,L as fs,C as Rr,a as Gm,T as Pt,P as gi,M as Ui}from"./TextTooltipAugment-DAVq7Vla.js";import{C as Qo,F as Ym,D as Do,E as Ra,b as Mo,d as ms,e as ps,n as gs,o as Km,z as Pr,B as Fr,l as Xm,q as _o}from"./types-DK4HA_lx.js";import{A as Co,i as mn,t as Y$,c as Jm,d as Sn,e as Da,g as Zm,f as Qm,h as tp,j as hs,r as ep,N as tr,k as gr,l as np,m as op,n as rp,o as Ti,p as Hi,q as K$,s as ip,u as mo,D as Na,a as To,G as hr,v as X$,w as sp,x as ji,y as J$,z as Es,M as Z$,B as qi,E as Q$,F as tf,H as Or,T as ap,I as Xn,J as hi,K as cp,L as lp,O as up,P as dp,Q as Pa,R as ef,U as $p,V as fp,W as nf,b as mp,S as pp,C as gp,X as Jo,Y as hp}from"./folder-DhY9vbAU.js";import{C as uo,E as nn,c as vp,n as Dr,q as Nr,g as of,I as wp,u as Is,v as Ls,x as Rs,z as Ds,y as Wi,B as Ns,w as Ps,s as rf,F as Fs,J as sf,K as af,L as yp,M as zr,N as cf,U as lf,O as uf,P as df,Q as bp,A as $f,k as Fa}from"./arrow-up-right-from-square-Yo0BPgM2.js";import{a as Ze,R as ff}from"./types-DDm27S8B.js";import{b as Os,T as Wr,a as xp,S as mf,v as _p,c as Cp}from"./StatusIndicator-By29C4Fu.js";import{R as Oa}from"./ra-diff-ops-model-pDvb0wIq.js";import{R as Tn,T as xe,C as zs,g as Ap,s as Mp}from"./check-56hMuF8e.js";import{C as Zn}from"./CalloutAugment-DzngRWi1.js";import{M as br,O as kp,P as Sp,h as Tp,j as za}from"./diff-utils-CHDUdEQq.js";import{c as xr,F as Ep,g as vs,a as Ip,j as Br,C as Oo,M as pf,R as Lp,G as Rp,U as Dp}from"./github-kew-evZ8.js";import{I as fe}from"./IconButtonAugment-DT9AU8SC.js";import{B as he}from"./ButtonAugment-xh-SOBaV.js";import{E as Wn}from"./exclamation-triangle-Ovva0uhO.js";import"./isObjectLike-C4kUqRHQ.js";import{T as Zt,H as Np,o as Pp,t as Fp}from"./Content-Bm7C6iJ1.js";import{g as Op}from"./globals-D0QH3NT1.js";import{h as Bs,i as zp,N as Bp,m as Up,n as Hp,j as jp,k as qp,K as Ur,a as Us,A as Ba,R as Wp,B as Vp,P as Gp,b as Yp,C as gf,c as Kp,G as Xp,d as Jp,T as Zp,l as Qp,M as er,e as hf,f as t1,g as e1}from"./Keybindings-tA5aIx1O.js";import{h as vr,u as Vi}from"./await_block-DO_bDmS_.js";import{i as n1,c as Ua}from"./file-type-utils-B3gunxPI.js";import{D as wt,S as vf,T as nr,a as wf,C as o1}from"./index-DY0Q9XhW.js";import{g as ws}from"./file-paths-BcSg4gks.js";import{F as _n}from"./Filespan-CId0aUQb.js";import{a as yf,b as Hs,P as r1,C as bf}from"./folder-opened-BLAu3pyz.js";import{T as i1,a as js,C as xf}from"./CollapseButtonAugment-CEo2LYfW.js";import{E as or}from"./ellipsis-DsAFryUF.js";import{_ as Gi}from"./preload-helper-Dv6uf1Os.js";import{o as ko}from"./keypress-DD1aQVr0.js";import{t as s1}from"./index-CiMDylqQ.js";import{M as zo}from"./MaterialIcon-BGa1zPPN.js";import{b as a1,c as c1,a as l1}from"./utils-Rh_q5w_c.js";import{P as Vr}from"./pen-to-square-DEUxz3in.js";import{c as u1,s as po,f as dr}from"./index-DqflzTEb.js";import{T as _f}from"./terminal-CS_V-nAg.js";import{V as Cf}from"./VSCodeCodicon-DfXdb5mS.js";import{A as lr}from"./autofix-state-d-ymFdyn.js";import{C as Ha}from"./types-CGlLNakm.js";import{A as d1}from"./augment-logo-DTgokSKV.js";import{C as Af,E as Mf}from"./chat-flags-model-CRX90O9_.js";import{M as $1}from"./index-oyQWDnzB.js";import"./TextAreaAugment-C1Wf9cvH.js";import"./toggleHighContrast-CwIv4U26.js";import"./CardAugment-RCmwRtRa.js";function So(i){return Array.isArray?Array.isArray(i):Tf(i)==="[object Array]"}const f1=1/0;function m1(i){return i==null?"":function(t){if(typeof t=="string")return t;let n=t+"";return n=="0"&&1/t==-f1?"-0":n}(i)}function $o(i){return typeof i=="string"}function kf(i){return typeof i=="number"}function p1(i){return i===!0||i===!1||function(t){return Sf(t)&&t!==null}(i)&&Tf(i)=="[object Boolean]"}function Sf(i){return typeof i=="object"}function Jn(i){return i!=null}function as(i){return!i.trim().length}function Tf(i){return i==null?i===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(i)}const g1=i=>`Missing ${i} property in key`,h1=i=>`Property 'weight' in key '${i}' must be a positive integer`,ja=Object.prototype.hasOwnProperty;class v1{constructor(t){this._keys=[],this._keyMap={};let n=0;t.forEach(e=>{let o=Ef(e);this._keys.push(o),this._keyMap[o.id]=o,n+=o.weight}),this._keys.forEach(e=>{e.weight/=n})}get(t){return this._keyMap[t]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function Ef(i){let t=null,n=null,e=null,o=1,r=null;if($o(i)||So(i))e=i,t=qa(i),n=ys(i);else{if(!ja.call(i,"name"))throw new Error(g1("name"));const s=i.name;if(e=s,ja.call(i,"weight")&&(o=i.weight,o<=0))throw new Error(h1(s));t=qa(s),n=ys(s),r=i.getFn}return{path:t,id:n,weight:o,src:e,getFn:r}}function qa(i){return So(i)?i:i.split(".")}function ys(i){return So(i)?i.join("."):i}var me={isCaseSensitive:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(i,t)=>i.score===t.score?i.idx<t.idx?-1:1:i.score<t.score?-1:1,includeMatches:!1,findAllMatches:!1,minMatchCharLength:1,location:0,threshold:.6,distance:100,useExtendedSearch:!1,getFn:function(i,t){let n=[],e=!1;const o=(r,s,c)=>{if(Jn(r))if(s[c]){const a=r[s[c]];if(!Jn(a))return;if(c===s.length-1&&($o(a)||kf(a)||p1(a)))n.push(m1(a));else if(So(a)){e=!0;for(let l=0,u=a.length;l<u;l+=1)o(a[l],s,c+1)}else s.length&&o(a,s,c+1)}else n.push(r)};return o(i,$o(t)?t.split("."):t,0),e?n:n[0]},ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1};const w1=/[^ ]+/g;class qs{constructor({getFn:t=me.getFn,fieldNormWeight:n=me.fieldNormWeight}={}){this.norm=function(e=1,o=3){const r=new Map,s=Math.pow(10,o);return{get(c){const a=c.match(w1).length;if(r.has(a))return r.get(a);const l=1/Math.pow(a,.5*e),u=parseFloat(Math.round(l*s)/s);return r.set(a,u),u},clear(){r.clear()}}}(n,3),this.getFn=t,this.isCreated=!1,this.setIndexRecords()}setSources(t=[]){this.docs=t}setIndexRecords(t=[]){this.records=t}setKeys(t=[]){this.keys=t,this._keysMap={},t.forEach((n,e)=>{this._keysMap[n.id]=e})}create(){!this.isCreated&&this.docs.length&&(this.isCreated=!0,$o(this.docs[0])?this.docs.forEach((t,n)=>{this._addString(t,n)}):this.docs.forEach((t,n)=>{this._addObject(t,n)}),this.norm.clear())}add(t){const n=this.size();$o(t)?this._addString(t,n):this._addObject(t,n)}removeAt(t){this.records.splice(t,1);for(let n=t,e=this.size();n<e;n+=1)this.records[n].i-=1}getValueForItemAtKeyId(t,n){return t[this._keysMap[n]]}size(){return this.records.length}_addString(t,n){if(!Jn(t)||as(t))return;let e={v:t,i:n,n:this.norm.get(t)};this.records.push(e)}_addObject(t,n){let e={i:n,$:{}};this.keys.forEach((o,r)=>{let s=o.getFn?o.getFn(t):this.getFn(t,o.path);if(Jn(s)){if(So(s)){let c=[];const a=[{nestedArrIndex:-1,value:s}];for(;a.length;){const{nestedArrIndex:l,value:u}=a.pop();if(Jn(u))if($o(u)&&!as(u)){let f={v:u,i:l,n:this.norm.get(u)};c.push(f)}else So(u)&&u.forEach((f,m)=>{a.push({nestedArrIndex:m,value:f})})}e.$[r]=c}else if($o(s)&&!as(s)){let c={v:s,n:this.norm.get(s)};e.$[r]=c}}}),this.records.push(e)}toJSON(){return{keys:this.keys,records:this.records}}}function If(i,t,{getFn:n=me.getFn,fieldNormWeight:e=me.fieldNormWeight}={}){const o=new qs({getFn:n,fieldNormWeight:e});return o.setKeys(i.map(Ef)),o.setSources(t),o.create(),o}function vi(i,{errors:t=0,currentLocation:n=0,expectedLocation:e=0,distance:o=me.distance,ignoreLocation:r=me.ignoreLocation}={}){const s=t/i.length;if(r)return s;const c=Math.abs(e-n);return o?s+c/o:c?1:s}const Zo=32;function y1(i,t,n,{location:e=me.location,distance:o=me.distance,threshold:r=me.threshold,findAllMatches:s=me.findAllMatches,minMatchCharLength:c=me.minMatchCharLength,includeMatches:a=me.includeMatches,ignoreLocation:l=me.ignoreLocation}={}){if(t.length>Zo)throw new Error(`Pattern length exceeds max of ${Zo}.`);const u=t.length,f=i.length,m=Math.max(0,Math.min(e,f));let p=r,_=m;const M=c>1||a,C=M?Array(f):[];let T;for(;(T=i.indexOf(t,_))>-1;){let X=vi(t,{currentLocation:T,expectedLocation:m,distance:o,ignoreLocation:l});if(p=Math.min(X,p),_=T+u,M){let K=0;for(;K<u;)C[T+K]=1,K+=1}}_=-1;let E=[],R=1,N=u+f;const Z=1<<u-1;for(let X=0;X<u;X+=1){let K=0,H=N;for(;K<H;)vi(t,{errors:X,currentLocation:m+H,expectedLocation:m,distance:o,ignoreLocation:l})<=p?K=H:N=H,H=Math.floor((N-K)/2+K);N=H;let Y=Math.max(1,m-H+1),V=s?f:Math.min(m+H,f)+u,J=Array(V+2);J[V+1]=(1<<X)-1;for(let rt=V;rt>=Y;rt-=1){let lt=rt-1,ot=n[i.charAt(lt)];if(M&&(C[lt]=+!!ot),J[rt]=(J[rt+1]<<1|1)&ot,X&&(J[rt]|=(E[rt+1]|E[rt])<<1|1|E[rt+1]),J[rt]&Z&&(R=vi(t,{errors:X,currentLocation:lt,expectedLocation:m,distance:o,ignoreLocation:l}),R<=p)){if(p=R,_=lt,_<=m)break;Y=Math.max(1,2*m-_)}}if(vi(t,{errors:X+1,currentLocation:m,expectedLocation:m,distance:o,ignoreLocation:l})>p)break;E=J}const Q={isMatch:_>=0,score:Math.max(.001,R)};if(M){const X=function(K=[],H=me.minMatchCharLength){let Y=[],V=-1,J=-1,rt=0;for(let lt=K.length;rt<lt;rt+=1){let ot=K[rt];ot&&V===-1?V=rt:ot||V===-1||(J=rt-1,J-V+1>=H&&Y.push([V,J]),V=-1)}return K[rt-1]&&rt-V>=H&&Y.push([V,rt-1]),Y}(C,c);X.length?a&&(Q.indices=X):Q.isMatch=!1}return Q}function b1(i){let t={};for(let n=0,e=i.length;n<e;n+=1){const o=i.charAt(n);t[o]=(t[o]||0)|1<<e-n-1}return t}class Lf{constructor(t,{location:n=me.location,threshold:e=me.threshold,distance:o=me.distance,includeMatches:r=me.includeMatches,findAllMatches:s=me.findAllMatches,minMatchCharLength:c=me.minMatchCharLength,isCaseSensitive:a=me.isCaseSensitive,ignoreLocation:l=me.ignoreLocation}={}){if(this.options={location:n,threshold:e,distance:o,includeMatches:r,findAllMatches:s,minMatchCharLength:c,isCaseSensitive:a,ignoreLocation:l},this.pattern=a?t:t.toLowerCase(),this.chunks=[],!this.pattern.length)return;const u=(m,p)=>{this.chunks.push({pattern:m,alphabet:b1(m),startIndex:p})},f=this.pattern.length;if(f>Zo){let m=0;const p=f%Zo,_=f-p;for(;m<_;)u(this.pattern.substr(m,Zo),m),m+=Zo;if(p){const M=f-Zo;u(this.pattern.substr(M),M)}}else u(this.pattern,0)}searchIn(t){const{isCaseSensitive:n,includeMatches:e}=this.options;if(n||(t=t.toLowerCase()),this.pattern===t){let _={isMatch:!0,score:0};return e&&(_.indices=[[0,t.length-1]]),_}const{location:o,distance:r,threshold:s,findAllMatches:c,minMatchCharLength:a,ignoreLocation:l}=this.options;let u=[],f=0,m=!1;this.chunks.forEach(({pattern:_,alphabet:M,startIndex:C})=>{const{isMatch:T,score:E,indices:R}=y1(t,_,M,{location:o+C,distance:r,threshold:s,findAllMatches:c,minMatchCharLength:a,includeMatches:e,ignoreLocation:l});T&&(m=!0),f+=E,T&&R&&(u=[...u,...R])});let p={isMatch:m,score:m?f/this.chunks.length:1};return m&&e&&(p.indices=u),p}}class No{constructor(t){this.pattern=t}static isMultiMatch(t){return Wa(t,this.multiRegex)}static isSingleMatch(t){return Wa(t,this.singleRegex)}search(){}}function Wa(i,t){const n=i.match(t);return n?n[1]:null}class Rf extends No{constructor(t,{location:n=me.location,threshold:e=me.threshold,distance:o=me.distance,includeMatches:r=me.includeMatches,findAllMatches:s=me.findAllMatches,minMatchCharLength:c=me.minMatchCharLength,isCaseSensitive:a=me.isCaseSensitive,ignoreLocation:l=me.ignoreLocation}={}){super(t),this._bitapSearch=new Lf(t,{location:n,threshold:e,distance:o,includeMatches:r,findAllMatches:s,minMatchCharLength:c,isCaseSensitive:a,ignoreLocation:l})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(t){return this._bitapSearch.searchIn(t)}}class Df extends No{constructor(t){super(t)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(t){let n,e=0;const o=[],r=this.pattern.length;for(;(n=t.indexOf(this.pattern,e))>-1;)e=n+r,o.push([n,e-1]);const s=!!o.length;return{isMatch:s,score:s?0:1,indices:o}}}const bs=[class extends No{constructor(i){super(i)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(i){const t=i===this.pattern;return{isMatch:t,score:t?0:1,indices:[0,this.pattern.length-1]}}},Df,class extends No{constructor(i){super(i)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(i){const t=i.startsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,this.pattern.length-1]}}},class extends No{constructor(i){super(i)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(i){const t=!i.startsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,i.length-1]}}},class extends No{constructor(i){super(i)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(i){const t=!i.endsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,i.length-1]}}},class extends No{constructor(i){super(i)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(i){const t=i.endsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[i.length-this.pattern.length,i.length-1]}}},class extends No{constructor(i){super(i)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(i){const t=i.indexOf(this.pattern)===-1;return{isMatch:t,score:t?0:1,indices:[0,i.length-1]}}},Rf],Va=bs.length,x1=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,_1=new Set([Rf.type,Df.type]);class C1{constructor(t,{isCaseSensitive:n=me.isCaseSensitive,includeMatches:e=me.includeMatches,minMatchCharLength:o=me.minMatchCharLength,ignoreLocation:r=me.ignoreLocation,findAllMatches:s=me.findAllMatches,location:c=me.location,threshold:a=me.threshold,distance:l=me.distance}={}){this.query=null,this.options={isCaseSensitive:n,includeMatches:e,minMatchCharLength:o,findAllMatches:s,ignoreLocation:r,location:c,threshold:a,distance:l},this.pattern=n?t:t.toLowerCase(),this.query=function(u,f={}){return u.split("|").map(m=>{let p=m.trim().split(x1).filter(M=>M&&!!M.trim()),_=[];for(let M=0,C=p.length;M<C;M+=1){const T=p[M];let E=!1,R=-1;for(;!E&&++R<Va;){const N=bs[R];let Z=N.isMultiMatch(T);Z&&(_.push(new N(Z,f)),E=!0)}if(!E)for(R=-1;++R<Va;){const N=bs[R];let Z=N.isSingleMatch(T);if(Z){_.push(new N(Z,f));break}}}return _})}(this.pattern,this.options)}static condition(t,n){return n.useExtendedSearch}searchIn(t){const n=this.query;if(!n)return{isMatch:!1,score:1};const{includeMatches:e,isCaseSensitive:o}=this.options;t=o?t:t.toLowerCase();let r=0,s=[],c=0;for(let a=0,l=n.length;a<l;a+=1){const u=n[a];s.length=0,r=0;for(let f=0,m=u.length;f<m;f+=1){const p=u[f],{isMatch:_,indices:M,score:C}=p.search(t);if(!_){c=0,r=0,s.length=0;break}if(r+=1,c+=C,e){const T=p.constructor.type;_1.has(T)?s=[...s,...M]:s.push(M)}}if(r){let f={isMatch:!0,score:c/r};return e&&(f.indices=s),f}}return{isMatch:!1,score:1}}}const xs=[];function _s(i,t){for(let n=0,e=xs.length;n<e;n+=1){let o=xs[n];if(o.condition(i,t))return new o(i,t)}return new Lf(i,t)}const Ws="$and",A1="$or",Ga="$path",M1="$val",cs=i=>!(!i[Ws]&&!i[A1]),Ya=i=>({[Ws]:Object.keys(i).map(t=>({[t]:i[t]}))});function Nf(i,t,{auto:n=!0}={}){const e=o=>{let r=Object.keys(o);const s=(a=>!!a[Ga])(o);if(!s&&r.length>1&&!cs(o))return e(Ya(o));if((a=>!So(a)&&Sf(a)&&!cs(a))(o)){const a=s?o[Ga]:r[0],l=s?o[M1]:o[a];if(!$o(l))throw new Error((f=>`Invalid value for key ${f}`)(a));const u={keyId:ys(a),pattern:l};return n&&(u.searcher=_s(l,t)),u}let c={children:[],operator:r[0]};return r.forEach(a=>{const l=o[a];So(l)&&l.forEach(u=>{c.children.push(e(u))})}),c};return cs(i)||(i=Ya(i)),e(i)}function k1(i,t){const n=i.matches;t.matches=[],Jn(n)&&n.forEach(e=>{if(!Jn(e.indices)||!e.indices.length)return;const{indices:o,value:r}=e;let s={indices:o,value:r};e.key&&(s.key=e.key.src),e.idx>-1&&(s.refIndex=e.idx),t.matches.push(s)})}function S1(i,t){t.score=i.score}class ur{constructor(t,n={},e){this.options={...me,...n},this.options.useExtendedSearch,this._keyStore=new v1(this.options.keys),this.setCollection(t,e)}setCollection(t,n){if(this._docs=t,n&&!(n instanceof qs))throw new Error("Incorrect 'index' type");this._myIndex=n||If(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(t){Jn(t)&&(this._docs.push(t),this._myIndex.add(t))}remove(t=()=>!1){const n=[];for(let e=0,o=this._docs.length;e<o;e+=1){const r=this._docs[e];t(r,e)&&(this.removeAt(e),e-=1,o-=1,n.push(r))}return n}removeAt(t){this._docs.splice(t,1),this._myIndex.removeAt(t)}getIndex(){return this._myIndex}search(t,{limit:n=-1}={}){const{includeMatches:e,includeScore:o,shouldSort:r,sortFn:s,ignoreFieldNorm:c}=this.options;let a=$o(t)?$o(this._docs[0])?this._searchStringList(t):this._searchObjectList(t):this._searchLogical(t);return function(l,{ignoreFieldNorm:u=me.ignoreFieldNorm}){l.forEach(f=>{let m=1;f.matches.forEach(({key:p,norm:_,score:M})=>{const C=p?p.weight:null;m*=Math.pow(M===0&&C?Number.EPSILON:M,(C||1)*(u?1:_))}),f.score=m})}(a,{ignoreFieldNorm:c}),r&&a.sort(s),kf(n)&&n>-1&&(a=a.slice(0,n)),function(l,u,{includeMatches:f=me.includeMatches,includeScore:m=me.includeScore}={}){const p=[];return f&&p.push(k1),m&&p.push(S1),l.map(_=>{const{idx:M}=_,C={item:u[M],refIndex:M};return p.length&&p.forEach(T=>{T(_,C)}),C})}(a,this._docs,{includeMatches:e,includeScore:o})}_searchStringList(t){const n=_s(t,this.options),{records:e}=this._myIndex,o=[];return e.forEach(({v:r,i:s,n:c})=>{if(!Jn(r))return;const{isMatch:a,score:l,indices:u}=n.searchIn(r);a&&o.push({item:r,idx:s,matches:[{score:l,value:r,norm:c,indices:u}]})}),o}_searchLogical(t){const n=Nf(t,this.options),e=(c,a,l)=>{if(!c.children){const{keyId:f,searcher:m}=c,p=this._findMatches({key:this._keyStore.get(f),value:this._myIndex.getValueForItemAtKeyId(a,f),searcher:m});return p&&p.length?[{idx:l,item:a,matches:p}]:[]}const u=[];for(let f=0,m=c.children.length;f<m;f+=1){const p=c.children[f],_=e(p,a,l);if(_.length)u.push(..._);else if(c.operator===Ws)return[]}return u},o=this._myIndex.records,r={},s=[];return o.forEach(({$:c,i:a})=>{if(Jn(c)){let l=e(n,c,a);l.length&&(r[a]||(r[a]={idx:a,item:c,matches:[]},s.push(r[a])),l.forEach(({matches:u})=>{r[a].matches.push(...u)}))}}),s}_searchObjectList(t){const n=_s(t,this.options),{keys:e,records:o}=this._myIndex,r=[];return o.forEach(({$:s,i:c})=>{if(!Jn(s))return;let a=[];e.forEach((l,u)=>{a.push(...this._findMatches({key:l,value:s[u],searcher:n}))}),a.length&&r.push({idx:c,item:s,matches:a})}),r}_findMatches({key:t,value:n,searcher:e}){if(!Jn(n))return[];let o=[];if(So(n))n.forEach(({v:r,i:s,n:c})=>{if(!Jn(r))return;const{isMatch:a,score:l,indices:u}=e.searchIn(r);a&&o.push({score:l,key:t,value:r,idx:s,norm:c,indices:u})});else{const{v:r,n:s}=n,{isMatch:c,score:a,indices:l}=e.searchIn(r);c&&o.push({score:a,key:t,value:r,norm:s,indices:l})}return o}}ur.version="7.0.0",ur.createIndex=If,ur.parseIndex=function(i,{getFn:t=me.getFn,fieldNormWeight:n=me.fieldNormWeight}={}){const{keys:e,records:o}=i,r=new qs({getFn:t,fieldNormWeight:n});return r.setKeys(e),r.setIndexRecords(o),r},ur.config=me,ur.parseQuery=Nf,function(...i){xs.push(...i)}(C1);var Je=(i=>(i.disableCopilot="ShouldDisableCopilot",i.disableCodeium="ShouldDisableCodeium",i.workspacePopulated="WorkspacePopulated",i.workspaceNotPopulated="WorkspaceNotPopulated",i.workspaceNotSelected="WorkspaceNotSelected",i.signInRequired="UserShouldSignIn",i.allActionsComplete="AllActionsComplete",i.syncingPermissionNeeded="SyncingPermissionNeeded",i.workspaceTooLarge="workspaceTooLarge",i.uploadingHomeDir="uploadingHomeDir",i))(Je||{}),Vs=(i=>(i.signInInProgress="SignInInProgress",i))(Vs||{});let T1=class{constructor(){$t(this,"subscribers",new Set);$t(this,"_actions",[]);$t(this,"_currentIndex",0);$t(this,"subscribe",i=>(this.subscribers.add(i),i(this),()=>{this.subscribers.delete(i)}))}get currentCard(){return this.actions[this._currentIndex]}notifySubscribers(){this.subscribers.forEach(i=>i(this))}get actions(){return this._actions}handleMessageFromExtension(i){const t=i.data;return t.type===je.mainPanelActions&&(this.onActionsUpdates(t.data),!0)}onActionsUpdates(i){this._actions=i,this._currentIndex=0,this.notifySubscribers()}nextAction(){this._currentIndex=(this._currentIndex+1)%this._actions.length,this.notifySubscribers()}prevAction(){this._currentIndex=(this._currentIndex-1+this._actions.length)%this._actions.length,this.notifySubscribers()}isCollapsible(i){return i===Je.allActionsComplete}};const jT=`Augment just finished syncing with your codebase! Here is a summary of what we saw:

`;class E1{constructor(t,n){$t(this,"handleMessageFromExtension",t=>(t.data.type===je.shouldShowSummary&&this.showProjectSummary(),!0));this._chatModel=t,this._flagsModel=n}async retryProjectSummary(t){const[n]=await Promise.all([this.generateQuestions(),this._chatModel.currentConversationModel.resendTurn(t)]);await this.attachQuestions(n)}async showProjectSummary(){const t=this.generateQuestions();await this.generateSummary();const n=await t;this.attachQuestions(n)}async generateQuestions(){const{responseText:t}=await this._chatModel.currentConversationModel.sendSilentExchange({request_message:"Give me the five most important questions a developer would need answered about this codebase. These questions should be separated by a newline. I want you to say absolutely nothing else.",model_id:this._flagsModel.modelDisplayNameToId.Overview??void 0,disableSelectedCodeDetails:!0,chatHistory:[]});return t.split(`
`).filter(n=>n.trim()!=="")}async generateSummary(){this._chatModel.extensionClient.showAugmentPanel(),await this._chatModel.currentConversationModel.sendExchange({chatItemType:uo.summaryResponse,request_message:"Provide a short summary of this project",model_id:this._flagsModel.modelDisplayNameToId.Overview??void 0,status:nn.draft,disableSelectedCodeDetails:!0,chatHistory:[]},!0)}async attachQuestions(t){const n=this._chatModel.currentConversationModel.chatHistory.findLast(vp);n&&n.request_id&&t&&this._chatModel.currentConversationModel.updateChatItem(n.request_id,{questionsLoaded:!0,questions:t})}}function I1(i){let t,n,e,o;const r=i[12].default,s=Yt(r,i,i[11],null);return{c(){t=L("div"),n=L("div"),s&&s.c(),A(n,"class",e=fr(`c-card ${i[0]}`)+" svelte-1hp682e"),Mt(n,"highlighted",i[1]),Mt(n,"hasTop",i[8]),Mt(n,"hasBottom",i[7]),Mt(n,"hasLeft",i[6]),Mt(n,"hasRight",i[5]),Mt(n,"reserve-border-space",i[4]),A(t,"class","c-card-container svelte-1hp682e"),A(t,"style",i[2]),Mt(t,"overflow-visible",i[3])},m(c,a){x(c,t,a),O(t,n),s&&s.m(n,null),o=!0},p(c,[a]){s&&s.p&&(!o||2048&a)&&Kt(s,r,c,c[11],o?Jt(r,c[11],a,null):Xt(c[11]),null),(!o||1&a&&e!==(e=fr(`c-card ${c[0]}`)+" svelte-1hp682e"))&&A(n,"class",e),(!o||3&a)&&Mt(n,"highlighted",c[1]),(!o||257&a)&&Mt(n,"hasTop",c[8]),(!o||129&a)&&Mt(n,"hasBottom",c[7]),(!o||65&a)&&Mt(n,"hasLeft",c[6]),(!o||33&a)&&Mt(n,"hasRight",c[5]),(!o||17&a)&&Mt(n,"reserve-border-space",c[4]),(!o||4&a)&&A(t,"style",c[2]),(!o||8&a)&&Mt(t,"overflow-visible",c[3])},i(c){o||(d(s,c),o=!0)},o(c){$(s,c),o=!1},d(c){c&&b(t),s&&s.d(c)}}}function L1(i,t,n){let e,o,r,s,c,{$$slots:a={},$$scope:l}=t,{class:u=""}=t,{highlighted:f=!1}=t,{style:m=""}=t,{overflowVisible:p=!1}=t,{borders:_=["top","bottom","left","right"]}=t,{reserveBorderSpace:M=!1}=t;return i.$$set=C=>{"class"in C&&n(0,u=C.class),"highlighted"in C&&n(1,f=C.highlighted),"style"in C&&n(2,m=C.style),"overflowVisible"in C&&n(3,p=C.overflowVisible),"borders"in C&&n(9,_=C.borders),"reserveBorderSpace"in C&&n(4,M=C.reserveBorderSpace),"$$scope"in C&&n(11,l=C.$$scope)},i.$$.update=()=>{512&i.$$.dirty&&n(10,e=_.map(C=>C.split("-")).flat()),1024&i.$$.dirty&&n(8,o=e.includes("top")),1024&i.$$.dirty&&n(7,r=e.includes("bottom")),1024&i.$$.dirty&&n(6,s=e.includes("left")),1024&i.$$.dirty&&n(5,c=e.includes("right"))},[u,f,m,p,M,c,s,r,o,_,e,l,a]}class Pf extends ut{constructor(t){super(),dt(this,t,L1,I1,ct,{class:0,highlighted:1,style:2,overflowVisible:3,borders:9,reserveBorderSpace:4})}}const _i={id:null,name:"Default"};class R1{constructor(){$t(this,"models",[_i])}registerModels(t){this.models=[_i,...t]}getModels(){return this.models}getModel(t){return this.models.find(n=>n.id===t)??_i}}class D1{constructor(t,n=void 0,e,o){$t(this,"subscribers",new Set);this._msgBroker=t,this._state=n,this.validateState=e,this._storeId=o,n&&this.setStateInternal(n)}subscribe(t){return this.subscribers.add(t),t(this),()=>{this.subscribers.delete(t)}}notifySubscribers(){this.subscribers.forEach(t=>t(this))}get state(){return this._state}get storeId(){return this._storeId}shouldAcceptMessage(t,n){return t.id===this.storeId&&this.validateState(n)}update(t){const n=t(this._state);n!==void 0&&this.setStateInternal(n)}setState(t){this.setStateInternal(t)}async setStateInternal(t){JSON.stringify(this._state)!==JSON.stringify(t)&&(this._state=t,this._msgBroker.postMessage({type:je.updateSharedWebviewState,data:t,id:this.storeId}))}async fetchStateFromExtension(){const t=await this._msgBroker.send({type:je.getSharedWebviewState,id:this.storeId,data:{}});t.type===je.getSharedWebviewStateResponse&&this.shouldAcceptMessage(t,t.data)&&(this._state=t.data,this.notifySubscribers())}handleMessageFromExtension(t){switch(t.data.type){case je.updateSharedWebviewState:case je.getSharedWebviewStateResponse:return!!this.shouldAcceptMessage(t.data,t.data.data)&&(this._state=t.data.data,this.notifySubscribers(),!0);default:return!1}}}const N1=i=>({}),Ka=i=>({slot:"icon"}),P1=i=>({}),Xa=i=>({slot:"icon"});function F1(i){let t,n;return t=new Zn({props:{variant:"soft",size:1,color:i[0],$$slots:{icon:[U1],default:[B1]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};1&o&&(r.color=e[0]),74&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function O1(i){let t,n,e,o;return t=new Zn({props:{variant:"soft",size:1,color:i[0],$$slots:{default:[H1]},$$scope:{ctx:i}}}),e=new Zn({props:{variant:"soft",size:1,color:"info",$$slots:{icon:[q1],default:[j1]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment),n=U(),v(e.$$.fragment)},m(r,s){w(t,r,s),x(r,n,s),w(e,r,s),o=!0},p(r,s){const c={};1&s&&(c.color=r[0]),66&s&&(c.$$scope={dirty:s,ctx:r}),t.$set(c);const a={};68&s&&(a.$$scope={dirty:s,ctx:r}),e.$set(a)},i(r){o||(d(t.$$.fragment,r),d(e.$$.fragment,r),o=!0)},o(r){$(t.$$.fragment,r),$(e.$$.fragment,r),o=!1},d(r){r&&b(n),y(t,r),y(e,r)}}}function Ja(i){let t,n;return t=new fe({props:{variant:"ghost",color:"neutral",size:1,$$slots:{default:[z1]},$$scope:{ctx:i}}}),t.$on("click",i[5]),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};64&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function z1(i){let t,n;return t=new xr({}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function B1(i){let t,n,e,o;n=new br({props:{markdown:i[1]}});let r=!!i[3]&&Ja(i);return{c(){t=L("div"),v(n.$$.fragment),e=U(),r&&r.c(),A(t,"class","c-callout-wrapper svelte-fh6sa8")},m(s,c){x(s,t,c),w(n,t,null),O(t,e),r&&r.m(t,null),o=!0},p(s,c){const a={};2&c&&(a.markdown=s[1]),n.$set(a),s[3]?r?(r.p(s,c),8&c&&d(r,1)):(r=Ja(s),r.c(),d(r,1),r.m(t,null)):r&&(j(),$(r,1,1,()=>{r=null}),q())},i(s){o||(d(n.$$.fragment,s),d(r),o=!0)},o(s){$(n.$$.fragment,s),$(r),o=!1},d(s){s&&b(t),y(n),r&&r.d()}}}function U1(i){let t;const n=i[4].icon,e=Yt(n,i,i[6],Ka);return{c(){e&&e.c()},m(o,r){e&&e.m(o,r),t=!0},p(o,r){e&&e.p&&(!t||64&r)&&Kt(e,n,o,o[6],t?Jt(n,o[6],r,N1):Xt(o[6]),Ka)},i(o){t||(d(e,o),t=!0)},o(o){$(e,o),t=!1},d(o){e&&e.d(o)}}}function H1(i){let t,n;return t=new br({props:{markdown:i[1]}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};2&o&&(r.markdown=e[1]),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function j1(i){let t,n;return t=new br({props:{markdown:i[2]}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};4&o&&(r.markdown=e[2]),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function q1(i){let t;const n=i[4].icon,e=Yt(n,i,i[6],Xa);return{c(){e&&e.c()},m(o,r){e&&e.m(o,r),t=!0},p(o,r){e&&e.p&&(!t||64&r)&&Kt(e,n,o,o[6],t?Jt(n,o[6],r,P1):Xt(o[6]),Xa)},i(o){t||(d(e,o),t=!0)},o(o){$(e,o),t=!1},d(o){e&&e.d(o)}}}function W1(i){let t,n,e,o,r;const s=[O1,F1],c=[];function a(f,m){return f[2]?0:1}n=a(i),e=c[n]=s[n](i);const l=i[4].default,u=Yt(l,i,i[6],null);return{c(){t=L("div"),e.c(),o=U(),u&&u.c(),A(t,"class","c-base-card svelte-fh6sa8")},m(f,m){x(f,t,m),c[n].m(t,null),O(t,o),u&&u.m(t,null),r=!0},p(f,[m]){let p=n;n=a(f),n===p?c[n].p(f,m):(j(),$(c[p],1,1,()=>{c[p]=null}),q(),e=c[n],e?e.p(f,m):(e=c[n]=s[n](f),e.c()),d(e,1),e.m(t,o)),u&&u.p&&(!r||64&m)&&Kt(u,l,f,f[6],r?Jt(l,f[6],m,null):Xt(f[6]),null)},i(f){r||(d(e),d(u,f),r=!0)},o(f){$(e),$(u,f),r=!1},d(f){f&&b(t),c[n].d(),u&&u.d(f)}}}function V1(i,t,n){let{$$slots:e={},$$scope:o}=t,{color:r}=t,{description:s}=t,{callout:c}=t,{onClose:a}=t;return i.$$set=l=>{"color"in l&&n(0,r=l.color),"description"in l&&n(1,s=l.description),"callout"in l&&n(2,c=l.callout),"onClose"in l&&n(3,a=l.onClose),"$$scope"in l&&n(6,o=l.$$scope)},[r,s,c,a,e,()=>a(),o]}let Gr=class extends ut{constructor(i){super(),dt(this,i,V1,W1,ct,{color:0,description:1,callout:2,onClose:3})}};function G1(i){let t;return{c(){t=L("div"),t.innerHTML='<div class="c-progress-bar__bar svelte-dg8hvh"></div>',A(t,"class","c-progress-bar svelte-dg8hvh")},m(n,e){x(n,t,e)},p:P,i:P,o:P,d(n){n&&b(t)}}}class Ff extends ut{constructor(t){super(),dt(this,t,null,G1,ct,{})}}function Za(i,t,n){const e=i.slice();return e[9]=t[n].text,e[10]=t[n].action,e[11]=t[n].appearance,e}const Y1=i=>({}),Qa=i=>({slot:"icon"});function K1(i){let t,n,e=i[9]+"";return{c(){t=G(e),n=U()},m(o,r){x(o,t,r),x(o,n,r)},p(o,r){4&r&&e!==(e=o[9]+"")&&_t(t,e)},d(o){o&&(b(t),b(n))}}}function tc(i){let t,n;return t=new he({props:{size:2,variant:"solid",color:i[11]?i[11]:"accent",class:"c-btns-card__button",title:i[9],$$slots:{default:[K1]},$$scope:{ctx:i}}}),t.$on("click",function(){return i[7](i[10])}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){i=e;const r={};4&o&&(r.color=i[11]?i[11]:"accent"),4&o&&(r.title=i[9]),260&o&&(r.$$scope={dirty:o,ctx:i}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function ec(i){let t,n;return t=new Ff({}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function X1(i){let t,n,e,o,r=se(i[2]),s=[];for(let l=0;l<r.length;l+=1)s[l]=tc(Za(i,r,l));const c=l=>$(s[l],1,1,()=>{s[l]=null});let a=i[3]&&ec();return{c(){t=L("div");for(let l=0;l<s.length;l+=1)s[l].c();n=U(),a&&a.c(),e=mt(),A(t,"class","c-btns-card__buttons svelte-1701q2d")},m(l,u){x(l,t,u);for(let f=0;f<s.length;f+=1)s[f]&&s[f].m(t,null);x(l,n,u),a&&a.m(l,u),x(l,e,u),o=!0},p(l,u){if(36&u){let f;for(r=se(l[2]),f=0;f<r.length;f+=1){const m=Za(l,r,f);s[f]?(s[f].p(m,u),d(s[f],1)):(s[f]=tc(m),s[f].c(),d(s[f],1),s[f].m(t,null))}for(j(),f=r.length;f<s.length;f+=1)c(f);q()}l[3]?a?8&u&&d(a,1):(a=ec(),a.c(),d(a,1),a.m(e.parentNode,e)):a&&(j(),$(a,1,1,()=>{a=null}),q())},i(l){if(!o){for(let u=0;u<r.length;u+=1)d(s[u]);d(a),o=!0}},o(l){s=s.filter(Boolean);for(let u=0;u<s.length;u+=1)$(s[u]);$(a),o=!1},d(l){l&&(b(t),b(n),b(e)),pn(s,l),a&&a.d(l)}}}function J1(i){let t;const n=i[6].icon,e=Yt(n,i,i[8],Qa);return{c(){e&&e.c()},m(o,r){e&&e.m(o,r),t=!0},p(o,r){e&&e.p&&(!t||256&r)&&Kt(e,n,o,o[8],t?Jt(n,o[8],r,Y1):Xt(o[8]),Qa)},i(o){t||(d(e,o),t=!0)},o(o){$(e,o),t=!1},d(o){e&&e.d(o)}}}function Z1(i){let t,n;return t=new Gr({props:{color:i[1],description:i[0],callout:i[4],$$slots:{icon:[J1],default:[X1]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,[o]){const r={};2&o&&(r.color=e[1]),1&o&&(r.description=e[0]),16&o&&(r.callout=e[4]),268&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function Q1(i,t,n){let{$$slots:e={},$$scope:o}=t,{description:r}=t,{color:s}=t,{buttons:c=[]}=t,{inProgress:a=!1}=t,{callout:l}=t;function u(f){wn.postMessage({type:je.mainPanelPerformAction,data:f})}return i.$$set=f=>{"description"in f&&n(0,r=f.description),"color"in f&&n(1,s=f.color),"buttons"in f&&n(2,c=f.buttons),"inProgress"in f&&n(3,a=f.inProgress),"callout"in f&&n(4,l=f.callout),"$$scope"in f&&n(8,o=f.$$scope)},[r,s,c,a,l,u,e,f=>u(f),o]}let Yr=class extends ut{constructor(i){super(),dt(this,i,Q1,Z1,ct,{description:0,color:1,buttons:2,inProgress:3,callout:4})}};function tg(i){let t,n;return{c(){t=ie("svg"),n=ie("path"),A(n,"fill-rule","evenodd"),A(n,"clip-rule","evenodd"),A(n,"d","M7.49991 0.876892C3.84222 0.876892 0.877075 3.84204 0.877075 7.49972C0.877075 11.1574 3.84222 14.1226 7.49991 14.1226C11.1576 14.1226 14.1227 11.1574 14.1227 7.49972C14.1227 3.84204 11.1576 0.876892 7.49991 0.876892ZM1.82707 7.49972C1.82707 4.36671 4.36689 1.82689 7.49991 1.82689C10.6329 1.82689 13.1727 4.36671 13.1727 7.49972C13.1727 10.6327 10.6329 13.1726 7.49991 13.1726C4.36689 13.1726 1.82707 10.6327 1.82707 7.49972ZM8.24992 4.49999C8.24992 4.9142 7.91413 5.24999 7.49992 5.24999C7.08571 5.24999 6.74992 4.9142 6.74992 4.49999C6.74992 4.08577 7.08571 3.74999 7.49992 3.74999C7.91413 3.74999 8.24992 4.08577 8.24992 4.49999ZM6.00003 5.99999H6.50003H7.50003C7.77618 5.99999 8.00003 6.22384 8.00003 6.49999V9.99999H8.50003H9.00003V11H8.50003H7.50003H6.50003H6.00003V9.99999H6.50003H7.00003V6.99999H6.50003H6.00003V5.99999Z"),A(n,"fill","currentColor"),A(t,"width","15"),A(t,"height","15"),A(t,"viewBox","0 0 15 15"),A(t,"fill","none"),A(t,"xmlns","http://www.w3.org/2000/svg")},m(e,o){x(e,t,o),O(t,n)},p:P,i:P,o:P,d(e){e&&b(t)}}}class Bo extends ut{constructor(t){super(),dt(this,t,null,tg,ct,{})}}function eg(i){return{c:P,m:P,p:P,i:P,o:P,d:P}}function ng(i){let t,n;return t=new Gr({props:{color:"warning",description:"Current workspace contains your home directory. Augment cannot upload your home directory to the cloud. Please open a different workspace",$$slots:{icon:[lg]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};8&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function og(i){let t,n;return t=new Gr({props:{color:"warning",description:`The workspace you have opened exceeds Augment's ${i[2].maxTrackableFileCount} file upload limit. Please use a .augmentignore or .gitignore to exclude files from being uploaded, or open a smaller workspace.`,$$slots:{icon:[ug]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};4&o&&(r.description=`The workspace you have opened exceeds Augment's ${e[2].maxTrackableFileCount} file upload limit. Please use a .augmentignore or .gitignore to exclude files from being uploaded, or open a smaller workspace.`),8&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function rg(i){let t,n;return t=new Yr({props:{color:"neutral",description:"To provide the best quality responses, Augment will index your code in our secure cloud. Your data always stays secure and private. [Learn More](https://docs.augmentcode.com/setup-augment/workspace-indexing)",callout:i[2].userTier==="community"?"You are subscribed to the Community plan, we may use any code you share to train our AI models.":void 0,buttons:[{text:"Enable Indexing",action:"grant-sync-permission"}],$$slots:{icon:[dg]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};4&o&&(r.callout=e[2].userTier==="community"?"You are subscribed to the Community plan, we may use any code you share to train our AI models.":void 0),8&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function ig(i){let t,n;return t=new Yr({props:{color:"warning",description:"Codeium suggestions will collide with Augment's suggestions. Turn off Codeium to fix this.",buttons:[{text:"Disable Codeium",action:"disable-codeium"}],$$slots:{icon:[$g]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};8&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function sg(i){let t,n;return t=new Yr({props:{color:"warning",description:"GitHub Copilot suggestions will collide with Augment's suggestions. Turn off Copilot to fix this.",buttons:[{text:"Disable Github Copilot",action:"disable-github-copilot"}],$$slots:{icon:[fg]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};8&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function ag(i){let t,n;return t=new Yr({props:{color:"neutral",description:"Please complete the sign-in process in your browser.",buttons:[{text:"Cancel",action:"cancel-sign-in",appearance:"neutral"}],inProgress:!0,$$slots:{icon:[mg]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};8&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function cg(i){let t,n;return t=new Yr({props:{color:"neutral",description:"Welcome to Augment! Sign in to your existing account or create a new one to get started.",buttons:[{text:"Start using Augment",action:"sign-in"}],$$slots:{icon:[pg]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};8&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function lg(i){let t,n;return t=new Wn({props:{slot:"icon"}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p:P,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function ug(i){let t,n;return t=new Wn({props:{slot:"icon"}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p:P,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function dg(i){let t,n;return t=new Bo({props:{slot:"icon"}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p:P,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function $g(i){let t,n;return t=new Wn({props:{slot:"icon"}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p:P,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function fg(i){let t,n;return t=new Wn({props:{slot:"icon"}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p:P,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function mg(i){let t,n;return t=new Bo({props:{slot:"icon"}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p:P,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function pg(i){let t,n;return t=new Bo({props:{slot:"icon"}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p:P,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function gg(i){let t,n,e,o;const r=[cg,ag,sg,ig,rg,og,ng,eg],s=[];function c(a,l){return a[0]===Je.signInRequired?0:a[0]===Vs.signInInProgress?1:a[0]===Je.disableCopilot?2:a[0]===Je.disableCodeium?3:a[0]===Je.syncingPermissionNeeded?4:a[0]===Je.workspaceTooLarge?5:a[0]===Je.uploadingHomeDir?6:a[0]===Je.allActionsComplete?7:-1}return~(t=c(i))&&(n=s[t]=r[t](i)),{c(){n&&n.c(),e=mt()},m(a,l){~t&&s[t].m(a,l),x(a,e,l),o=!0},p(a,[l]){let u=t;t=c(a),t===u?~t&&s[t].p(a,l):(n&&(j(),$(s[u],1,1,()=>{s[u]=null}),q()),~t?(n=s[t],n?n.p(a,l):(n=s[t]=r[t](a),n.c()),d(n,1),n.m(e.parentNode,e)):n=null)},i(a){o||(d(n),o=!0)},o(a){$(n),o=!1},d(a){a&&b(e),~t&&s[t].d(a)}}}function hg(i,t,n){let e,o=P,r=()=>(o(),o=ce(c,a=>n(2,e=a)),c);i.$$.on_destroy.push(()=>o());let{card:s}=t,{flagsModel:c}=t;return r(),i.$$set=a=>{"card"in a&&n(0,s=a.card),"flagsModel"in a&&r(n(1,c=a.flagsModel))},[s,c,e]}let vg=class extends ut{constructor(i){super(),dt(this,i,hg,gg,ct,{card:0,flagsModel:1})}};class wg{constructor(t,n,e){$t(this,"_agenticExchangeStatus",Le(Dr.notRunning));$t(this,"_isCurrConversationAgentic",Le(!1));$t(this,"_isAutoModeApproved",Le(!1));$t(this,"_showAutoModeWarning");$t(this,"_hasEverUsedAgent",Le(void 0));$t(this,"_classifiedMemoriesMap",new Map);$t(this,"_disposers",[]);$t(this,"isAgenticTurnComplete",jn(this._agenticExchangeStatus,t=>t===Dr.notRunning));$t(this,"_lastConversation",Le({chat:void 0,agent:void 0}));$t(this,"_shouldCreateNewConversation",()=>{const t=this._chatModel.currentConversationModel;return!Sn.isEmpty(t)});$t(this,"setToAgentic",async(t=!1)=>{if(mn(this._chatModel.currentConversationModel))return;let n;if(this._chatModel.flags.doUseNewDraftFunctionality){if(n=this._chatModel.currentConversationModel.id,!n&&(this._chatModel.setCurrentConversation(tr),n=tr),!mn(this._chatModel.currentConversationModel))if(t){const o=this._chatModel.orderedConversations().find(mn),r=o==null?void 0:o.id;r?this._chatModel.setCurrentConversation(r):(await this._chatModel.setCurrentConversation(),this._chatModel.currentConversationModel.extraData={isAgentConversation:!0,baselineTimestamp:0},n=this._chatModel.currentConversationModel.id)}else this._chatModel.currentConversationModel.extraData={isAgentConversation:!0,baselineTimestamp:0}}else{const o=this._shouldCreateNewConversation(),r=oe(this._lastConversation).agent;if(this._lastConversation.update(()=>({chat:this._chatModel.currentConversationModel.id,agent:void 0})),o||!r){const s=await this._create();s.extraData={isAgentConversation:!0},this._chatModel.deleteInvalidConversations("agent"),this._chatModel.currentConversationModel.setConversation(s),n=s.id}else this._chatModel.setCurrentConversation(r),n=r}this._chatModel.extensionClient.reportAgentSessionEvent({eventName:Mo.openedAgentConversation,conversationId:n});const e=this._chatModel.currentConversationModel.subscribe(async o=>{await this._maybeTriggerWelcomeMessage(o.id)&&e()})});$t(this,"setToChat",()=>{if(!mn(this._chatModel.currentConversationModel))return;const t=this._shouldCreateNewConversation(),n=oe(this._lastConversation).chat;if(this._lastConversation.update(()=>({chat:void 0,agent:this._chatModel.currentConversationModel.id})),t||!n)if(this._chatModel.flags.doUseNewDraftFunctionality)this._chatModel.setCurrentConversation(tr),this._chatModel.currentConversationModel.extraData={isAgentConversation:!1,baselineTimestamp:0};else{const e={...Sn.create(),extraData:{isAgentConversation:!1}};this._chatModel.deleteInvalidConversations("chat"),this._chatModel.currentConversationModel.setConversation(e)}else this._chatModel.setCurrentConversation(n)});$t(this,"_maybeTriggerWelcomeMessage",async t=>{var o;const n=this._chatModel.currentConversationModel;if(n.id!==t)return!1;if(await this.refreshHasEverUsedAgent(),!Sn.isEmpty(n)||Sn.isNamed(n)||((o=n.extraData)==null?void 0:o.hasAgentOnboarded)||oe(this._hasEverUsedAgent)||(this.setHasEverUsedAgent(!0),n.setName("Welcome to the Augment Agent"),n.extraData={isAgentConversation:!0,hasAgentOnboarded:!0},!G$()))return!0;const e=await this._chatModel.extensionClient.getAgentOnboardingPrompt();return await n.sendExchange({chatItemType:uo.agentOnboarding,request_message:e,status:nn.draft}),!0});$t(this,"markDirty",()=>{const t=this._chatModel.currentConversationModel;t.extraData={...t.extraData,hasDirtyEdits:!0}});$t(this,"markClean",()=>{const t=this._chatModel.currentConversationModel;t.extraData={...t.extraData,hasDirtyEdits:!1}});$t(this,"_findAgentic",()=>this._chatModel.orderedConversations().find(mn));$t(this,"_findChat",()=>this._chatModel.orderedConversations().find(t=>!mn(t)));$t(this,"_create",async()=>({...Sn.create({personaType:await this._chatModel.currentConversationModel.decidePersonaType()}),extraData:{isAgentConversation:!0,baselineTimestamp:0}}));$t(this,"updateBaselineTimestamp",t=>{const n=Math.min(t,Date.now()),e=this._chatModel.currentConversationModel;mn(e)&&(e.extraData={...e.extraData,baselineTimestamp:n})});$t(this,"getBaselineTimestamp",()=>{const t=this._chatModel.currentConversationModel;return mn(t)?t.extraData.baselineTimestamp??0:0});$t(this,"getConversationId",()=>this._chatModel.currentConversationModel.id);$t(this,"interruptAgent",async()=>{if(oe(this._agenticExchangeStatus)===Dr.notRunning)return;await this._toolsModel.interruptAllTools(),await this._chatModel.currentConversationModel.cancelMessage();const t=this._chatModel.currentConversationModel.lastExchange;t!=null&&t.request_id&&this._classifiedMemoriesMap.delete(t.request_id)});$t(this,"_resetStateToDefaultValues",()=>{this.setHasEverUsedAgent(!1),this._chatModel.extensionClient.setAgentAutoModeApproved(!1),this._isAutoModeApproved.set(!1),this._chatModel.extensionClient.setHasEverUsedRemoteAgent(!1),this._chatModel.agentExecutionMode.set(Co.manual)});$t(this,"acceptAutoMode",()=>{this._chatModel.extensionClient.setAgentAutoModeApproved(!0),this._isAutoModeApproved.set(!0),this._chatModel.agentExecutionMode.set(Co.auto)});$t(this,"refreshAutoModeAcceptance",async()=>{const t=await this._chatModel.extensionClient.checkAgentAutoModeApproval();this._isAutoModeApproved.set(t)});$t(this,"rejectAutoMode",()=>{this._chatModel.extensionClient.setAgentAutoModeApproved(!1),this._isAutoModeApproved.set(!1),this._chatModel.agentExecutionMode.set(Co.manual)});$t(this,"setHasEverUsedAgent",t=>{this._chatModel.extensionClient.setHasEverUsedAgent(t),this._hasEverUsedAgent.set(t)});$t(this,"refreshHasEverUsedAgent",async()=>{if(oe(this.hasEverUsedAgent)!==void 0)return;const t=await this._chatModel.extensionClient.checkHasEverUsedAgent();oe(this.hasEverUsedAgent)===void 0&&this._hasEverUsedAgent.set(t)});var s;this._chatModel=t,this._toolsModel=n,this._checkpointStore=e,this._checkpointStore.registerAgentConversationModel(this);const o=Object.values(this._chatModel.conversations).some(c=>{var a;return(a=c.extraData)==null?void 0:a.isAgentConversation}),r=((s=this._chatModel.currentConversationModel.extraData)==null?void 0:s.isAgentConversation)===!0;(o||r)&&this.setHasEverUsedAgent(!0),this.refreshAutoModeAcceptance(),this.refreshHasEverUsedAgent(),this._showAutoModeWarning=jn([this._isAutoModeApproved,this._chatModel.agentExecutionMode,this._isCurrConversationAgentic],([c,a,l])=>!c&&a===Co.auto&&l),this._disposers.push(this._chatModel.currentConversationModel.subscribe(()=>{const c=this._chatModel.currentConversationModel,a=mn(c);this._isCurrConversationAgentic.set(a)})),this._disposers.push(this._chatModel.currentConversationModel.subscribe(Y$(()=>{const c=Jm(this._chatModel.currentConversationModel);this._agenticExchangeStatus.set(c)},1e3,{leading:!0,trailing:!0}))),this._disposers.push(this._isCurrConversationAgentic.subscribe(c=>{c?(this._chatModel.extensionClient.setChatMode(La.agent),this._chatModel.specialContextInputModel.enableAgentMemories()):(this._chatModel.extensionClient.setChatMode(La.chat),this._chatModel.specialContextInputModel.disableAgentMemories()),this._agenticExchangeStatus.set(Dr.notRunning)})),this._disposers.push(this._chatModel.currentConversationModel.onBeforeChangeConversation((c,a)=>{var l;if(mn(c))return Sn.isEmpty(a)&&((l=a.extraData)==null?void 0:l.isAgentConversation)!==!1&&this._chatModel.conversations[a.id]===void 0&&(a={...a,extraData:{...a.extraData,isAgentConversation:!0}}),a})),this._disposers.push(this._chatModel.currentConversationModel.subscribe(c=>{const a=c.lastExchange,l=this._chatModel.flags.memoryClassificationOnFirstToken;a&&a.request_id&&l&&(a.status===nn.sent&&a.response_text&&a.response_text.length>0&&!this._classifiedMemoriesMap.has(a.request_id)&&(this._classifiedMemoriesMap.set(a.request_id,!0),Da(c,a)),!a.request_id||a.status!==nn.success&&a.status!==nn.failed&&a.status!==nn.cancelled||this._classifiedMemoriesMap.delete(a.request_id))})),this._disposers.push(this._chatModel.currentConversationModel.onSendExchange(c=>{this._chatModel.flags.memoryClassificationOnFirstToken||Da(this._chatModel.currentConversationModel,c)})),this._disposers.push(this._chatModel.currentConversationModel.onNewConversation(()=>{const c=this._chatModel.currentConversationModel.id;this._chatModel.extensionClient.setCurrentConversation(c),this._checkpointStore.maybeCreateOriginalCheckpoint()})),this._chatModel.extensionClient.setCurrentConversation(this._chatModel.currentConversationModel.id),this._disposers.push(this.isAgenticTurnComplete.subscribe(c=>{var f,m;if(!c||!mn(this._chatModel.currentConversationModel))return;const a=this._chatModel.currentConversationModel,l=Zm(a);if(!l)return;const u=Ym.create();u.setFlag(Do.start);try{const p=(f=Qm(a))==null?void 0:f.request_id;p&&u.setRequestId(Do.lastUserExchangeRequestId,p);const{memoriesRequestId:_,memory:M}=l;if(u.setRequestId(Do.memoriesRequestId,_),!M)return void u.setFlag(Do.emptyMemory);if(tp(a))return void u.setFlag(Do.agenticTurnHasRememberToolCall);if(this._chatModel.extensionClient.callTool(((m=a.lastExchange)==null?void 0:m.request_id)??"","remember","remember",{memory:M,caller:Ra.classify_and_distill,isComplexNewMemory:!1,memoriesRequestId:_},a.chatHistory.filter(C=>Nr(C)).map(hs),a.id),p){const C=ep(a,p);u.setFlag(Do.removeUserExchangeMemoryFailed,!C)}}catch{u.setFlag(Do.exceptionThrown)}finally{u.setFlag(Do.end),this._chatModel.extensionClient.reportAgentSessionEvent({eventName:Mo.flushMemories,conversationId:this._chatModel.currentConversationModel.id,eventData:{flushMemoriesData:u}})}})),this._disposers.push(this.isAgenticTurnComplete.subscribe(async c=>{if(c){const a=oe(this._checkpointStore.currentCheckpoint),l=oe(this._chatModel.currentConversationModel).id;await this._chatModel.extensionClient.hasChangesSince((a==null?void 0:a.fromTimestamp)??this.getBaselineTimestamp())&&l===oe(this._chatModel.currentConversationModel).id&&this._checkpointStore.createNewCheckpoint()}})),this._disposers.push(this._checkpointStore.targetCheckpointSummary.subscribe(()=>{oe(this._checkpointStore.targetCheckpointHasChanges)?this.markDirty():this.markClean()}))}get isCurrConversationAgentic(){return this._isCurrConversationAgentic}get agentExchangeStatus(){return this._agenticExchangeStatus}async distillMemory(t){const n=this._chatModel.currentConversationModel.chatHistory.find(o=>of(o)&&o.request_id===t);if(!(n!=null&&n.request_message))return;const{responseText:e}=await this._chatModel.currentConversationModel.sendSilentExchange({request_message:n.request_message,disableRetrieval:!0,disableSelectedCodeDetails:!0,memoriesInfo:{isDistill:!0}});try{const o=JSON.parse(e);o.content&&await this._chatModel.extensionClient.callTool(t,"remember","remember",{memory:o.content,caller:Ra.classify_and_distill,isComplexNewMemory:!1},this._chatModel.currentConversationModel.chatHistory.filter(Nr).map(hs),this._chatModel.currentConversationModel.id)}catch(o){console.warn("Failed to parse JSON from distill memory response",o)}}async resetOnboarding(){this._resetStateToDefaultValues();const t=this._chatModel.currentConversationModel;mn(t)&&(t.extraData={...t.extraData,hasAgentOnboarded:!1},await this._maybeTriggerWelcomeMessage(t.id))}get showAutoModeWarning(){return this._showAutoModeWarning}get hasEverUsedAgent(){return this._hasEverUsedAgent}dispose(){this._disposers.forEach(t=>t()),this._disposers=[],this._classifiedMemoriesMap.clear()}}function nc(i){let t,n;return t=new Gr({props:{color:"accent",description:i[0],onClose:i[1],$$slots:{icon:[xg],default:[bg]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};1&o&&(r.description=e[0]),2&o&&(r.onClose=e[1]),131076&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function yg(i){let t;return{c(){t=G("Try it out")},m(n,e){x(n,t,e)},d(n){n&&b(t)}}}function bg(i){let t,n;return t=new he({props:{size:2,variant:"solid",color:"accent",title:"Try it out",$$slots:{default:[yg]},$$scope:{ctx:i}}}),t.$on("click",function(){Ne(i[2])&&i[2].apply(this,arguments)}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){i=e;const r={};131072&o&&(r.$$scope={dirty:o,ctx:i}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function xg(i){let t,n;return t=new Bo({props:{slot:"icon"}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p:P,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function _g(i){let t,n,e=i[3]&&nc(i);return{c(){e&&e.c(),t=mt()},m(o,r){e&&e.m(o,r),x(o,t,r),n=!0},p(o,[r]){o[3]?e?(e.p(o,r),8&r&&d(e,1)):(e=nc(o),e.c(),d(e,1),e.m(t.parentNode,t)):e&&(j(),$(e,1,1,()=>{e=null}),q())},i(o){n||(d(e),n=!0)},o(o){$(e),n=!1},d(o){o&&b(t),e&&e.d(o)}}}function Cg(i,t,n){let e,o,r,s,c,a,l,u,f,m=P,p=P;i.$$.on_destroy.push(()=>m()),i.$$.on_destroy.push(()=>p());const _=St("chatModel");Et(i,_,Q=>n(13,f=Q));const M=f.flags;Et(i,M,Q=>n(12,u=Q));const C=St(gr.key),T=St("agentConversationModel"),E=St(Tn.key);let R="",N=()=>{},Z=()=>{};return i.$$.update=()=>{6144&i.$$.dirty&&n(9,o=u.enableAgentMode&&l===!1),5120&i.$$.dirty&&n(8,s=u.enableBackgroundAgents&&!a),3840&i.$$.dirty&&(o?(n(0,R="Agent Mode is now available"),n(1,N=async()=>{n(9,o=!1),l===!1&&T.setHasEverUsedAgent(!0)}),n(2,Z=async()=>{n(9,o=!1),await T.setToAgentic()})):s&&(n(0,R="Remote Agent Mode is now available"),n(1,N=async()=>{n(8,s=!1),E.setHasEverUsedRemoteAgent(!0)}),n(2,Z=async()=>{n(8,s=!1),C.handleSetToBackgroundAgent(),a===!1&&(E==null||E.setHasEverUsedRemoteAgent(!0))}))),768&i.$$.dirty&&n(3,c=o||s)},n(5,e=T.hasEverUsedAgent),p(),p=ce(e,Q=>n(11,l=Q)),n(4,r=E.hasEverUsedRemoteAgent),m(),m=ce(r,Q=>n(10,a=Q)),[R,N,Z,c,r,e,_,M,s,o,a,l,u]}class Ag extends ut{constructor(t){super(),dt(this,t,Cg,_g,ct,{})}}function oc(i){let t,n;return t=new Gr({props:{color:"accent",description:i[0],onClose:i[8],$$slots:{icon:[Mg]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};1&o&&(r.description=e[0]),3&o&&(r.onClose=e[8]),512&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function Mg(i){let t,n;return t=new Bo({props:{slot:"icon"}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p:P,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function kg(i){let t,n,e=i[1]&&oc(i);return{c(){e&&e.c(),t=mt()},m(o,r){e&&e.m(o,r),x(o,t,r),n=!0},p(o,[r]){o[1]?e?(e.p(o,r),2&r&&d(e,1)):(e=oc(o),e.c(),d(e,1),e.m(t.parentNode,t)):e&&(j(),$(e,1,1,()=>{e=null}),q())},i(o){n||(d(e),n=!0)},o(o){$(e),n=!1},d(o){o&&b(t),e&&e.d(o)}}}function Sg(i,t,n){let e,o,r,s,c,a,l,u=P,f=P;i.$$.on_destroy.push(()=>u()),i.$$.on_destroy.push(()=>f());const m=St("chatModel");return Et(i,m,p=>n(6,a=p)),i.$$.update=()=>{64&i.$$.dirty&&(n(3,e=a.flags),f(),f=ce(e,p=>n(7,l=p))),128&i.$$.dirty&&n(0,o=l.clientAnnouncement),64&i.$$.dirty&&(n(2,r=a.displayedAnnouncements),u(),u=ce(r,p=>n(5,c=p))),33&i.$$.dirty&&n(1,s=!!o&&o.length>0&&!c.includes(o))},[o,s,r,e,m,c,a,l,async()=>{n(1,s=!1),m.displayedAnnouncements.update(p=>(p.push(o),p)),m.saveImmediate()}]}class Tg extends ut{constructor(t){super(),dt(this,t,Sg,kg,ct,{})}}const Eg=Le(!1);function Ig(i){let t;return{c(){t=G("Drop files to attach as context")},m(n,e){x(n,t,e)},d(n){n&&b(t)}}}function Lg(i){let t,n=i[0].enableDebugFeatures?"images (png, jpg, jpeg) and text-based files":"images (png, jpg, jpeg)";return{c(){t=G(n)},m(e,o){x(e,t,o)},p(e,o){1&o&&n!==(n=e[0].enableDebugFeatures?"images (png, jpg, jpeg) and text-based files":"images (png, jpg, jpeg)")&&_t(t,n)},d(e){e&&b(t)}}}function Rg(i){let t,n,e,o,r;const s=i[8].default,c=Yt(s,i,i[12],null),a=c||function(l){let u,f,m,p,_,M;return u=new Ep({}),m=new Gt({props:{class:"c-rich-text-editor-dropzone__text",size:2,$$slots:{default:[Ig]},$$scope:{ctx:l}}}),_=new Gt({props:{class:"c-rich-text-editor-dropzone__text",size:1,$$slots:{default:[Lg]},$$scope:{ctx:l}}}),{c(){v(u.$$.fragment),f=U(),v(m.$$.fragment),p=U(),v(_.$$.fragment)},m(C,T){w(u,C,T),x(C,f,T),w(m,C,T),x(C,p,T),w(_,C,T),M=!0},p(C,T){const E={};4096&T&&(E.$$scope={dirty:T,ctx:C}),m.$set(E);const R={};4097&T&&(R.$$scope={dirty:T,ctx:C}),_.$set(R)},i(C){M||(d(u.$$.fragment,C),d(m.$$.fragment,C),d(_.$$.fragment,C),M=!0)},o(C){$(u.$$.fragment,C),$(m.$$.fragment,C),$(_.$$.fragment,C),M=!1},d(C){C&&(b(f),b(p)),y(u,C),y(m,C),y(_,C)}}}(i);return{c(){t=L("div"),n=L("div"),a&&a.c(),A(n,"class","c-rich-text-editor-dropzone__content svelte-1f75lrb"),A(t,"class","c-rich-text-editor-dropzone svelte-1f75lrb"),A(t,"role","button"),A(t,"tabindex","-1"),Mt(t,"is-active",i[1])},m(l,u){x(l,t,u),O(t,n),a&&a.m(n,null),e=!0,o||(r=[Lt(window,"dragstart",i[11]),Lt(window,"dragenter",i[6]),Lt(window,"dragleave",i[4]),Lt(window,"drop",i[5]),Lt(window,"blur",i[5]),Lt(t,"dragover",$r(bi(i[9]))),Lt(t,"dragenter",$r(bi(i[10]))),Lt(t,"drop",$r(bi(i[3])))],o=!0)},p(l,[u]){c?c.p&&(!e||4096&u)&&Kt(c,s,l,l[12],e?Jt(s,l[12],u,null):Xt(l[12]),null):a&&a.p&&(!e||1&u)&&a.p(l,e?u:-1),(!e||2&u)&&Mt(t,"is-active",l[1])},i(l){e||(d(a,l),e=!0)},o(l){$(a,l),e=!1},d(l){l&&b(t),a&&a.d(l),o=!1,Qe(r)}}}const Dg="application/x-augment/drag-origin/{}";function rc(i){return Dg.replace("{}",i.instanceId)}function Ng(i,t,n){let{$$slots:e={},$$scope:o}=t,{flags:r}=t,{draggingStore:s=Eg}=t;const c=St(Bs.CONTEXT_KEY);let a;return s.subscribe(l=>n(1,a=l)),i.$$set=l=>{"flags"in l&&n(0,r=l.flags),"draggingStore"in l&&n(7,s=l.draggingStore),"$$scope"in l&&n(12,o=l.$$scope)},[r,a,c,function(l){var u,f,m,p,_;s.set(!1),(u=l.dataTransfer)!=null&&u.files&&((_=(f=c==null?void 0:c.commandManager.chain())==null?void 0:(m=f.command(({view:M,tr:C})=>{if(!M)return!0;const T=M.posAtCoords({left:l.clientX,top:l.clientY});if(T){const E=C.doc.resolve(T.pos);C.setSelection(zp.create(C.doc,E.pos))}return!0})).insertFilesIntoEditor)==null||_.call(m,[...((p=l.dataTransfer)==null?void 0:p.files)??[]]))},function(l){l.relatedTarget&&l.relatedTarget!==document.body||s.set(!1)},()=>s.set(!1),l=>{var m,p;var u,f;u=l,f=c,(m=u.dataTransfer)!=null&&m.types.includes(rc(f))||(p=l.dataTransfer)!=null&&p.types.includes("Files")&&s.set(!0)},s,e,function(l){vn.call(this,i,l)},function(l){vn.call(this,i,l)},l=>function(u,f){var m;f.rootNode&&u.composedPath().includes(f.rootNode)&&((m=u.dataTransfer)==null||m.setData(rc(f),f.instanceId))}(l,c),o]}class Pg extends ut{constructor(t){super(),dt(this,t,Ng,Rg,ct,{flags:0,draggingStore:7})}}const Fg=/(?:^|\s)(!\[(.+|:?)]\((\S+)(?:(?:\s+)["'](\S+)["'])?\))$/,Og=Bp.create({name:"image",addOptions:()=>({inline:!1,allowBase64:!1,HTMLAttributes:{}}),inline(){return this.options.inline},group(){return this.options.inline?"inline":"block"},draggable:!0,addAttributes:()=>({src:{default:null},alt:{default:null},title:{default:null}}),parseHTML(){return[{tag:this.options.allowBase64?"img[src]":'img[src]:not([src^="data:"])'}]},renderHTML({HTMLAttributes:i}){return["img",Up(this.options.HTMLAttributes,i)]},addCommands(){return{setImage:i=>({commands:t})=>t.insertContent({type:this.name,attrs:i})}},addInputRules(){return[Hp({find:Fg,type:this.type,getAttributes:i=>{const[,,t,n,e]=i;return{src:n,alt:t,title:e}}})]}});class Cs extends Error{constructor(n,e){super(e);$t(this,"files");this.files=n,this.name="FileError"}}class zg extends Cs{constructor(t){super([t],`File "${t.name}" is not a supported file type`)}}function ic(i){return i.type.startsWith("image/")}function sc(i){let t,n,e;return{c(){t=L("button"),t.textContent="",A(t,"class","c-image-chip__close svelte-1war7ei"),A(t,"aria-label","Remove image")},m(o,r){x(o,t,r),n||(e=Lt(t,"click",$r(function(){Ne(i[3])&&i[3].apply(this,arguments)})),n=!0)},p(o,r){i=o},d(o){o&&b(t),n=!1,e()}}}function Bg(i){let t,n,e,o={ctx:i,current:null,token:null,hasCatch:!1,pending:Gg,then:qg,catch:jg,value:11,blocks:[,,,]};return vr(n=i[2](i[1]),o),{c(){t=mt(),o.block.c()},m(r,s){x(r,t,s),o.block.m(r,o.anchor=s),o.mount=()=>t.parentNode,o.anchor=t,e=!0},p(r,s){i=r,o.ctx=i,6&s&&n!==(n=i[2](i[1]))&&vr(n,o)||Vi(o,i,s)},i(r){e||(d(o.block),e=!0)},o(r){for(let s=0;s<3;s+=1){const c=o.blocks[s];$(c)}e=!1},d(r){r&&b(t),o.block.d(r),o.token=null,o=null}}}function Ug(i){let t,n,e=(Ua(i[0])||i[0])+"";return{c(){t=L("div"),n=G(e),A(t,"class","c-image-chip__file-extension svelte-1war7ei")},m(o,r){x(o,t,r),O(t,n)},p(o,r){1&r&&e!==(e=(Ua(o[0])||o[0])+"")&&_t(n,e)},i:P,o:P,d(o){o&&b(t)}}}function Hg(i){let t,n,e;return n=new go({props:{size:1}}),{c(){t=L("div"),v(n.$$.fragment),A(t,"class","c-image-chip__loading svelte-1war7ei")},m(o,r){x(o,t,r),w(n,t,null),e=!0},p:P,i(o){e||(d(n.$$.fragment,o),e=!0)},o(o){$(n.$$.fragment,o),e=!1},d(o){o&&b(t),y(n)}}}function jg(i){return{c:P,m:P,p:P,i:P,o:P,d:P}}function qg(i){let t;function n(r,s){return r[11]?Vg:Wg}let e=n(i),o=e(i);return{c(){o.c(),t=mt()},m(r,s){o.m(r,s),x(r,t,s)},p(r,s){e===(e=n(r))&&o?o.p(r,s):(o.d(1),o=e(r),o&&(o.c(),o.m(t.parentNode,t)))},i:P,o:P,d(r){r&&b(t),o.d(r)}}}function Wg(i){let t;return{c(){t=L("div"),t.innerHTML='<svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M14,2H6A2,2 0 0,0 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2M18,20H6V4H13V9H18V20Z"></path></svg>',A(t,"class","c-image-chip__file-icon svelte-1war7ei")},m(n,e){x(n,t,e)},p:P,d(n){n&&b(t)}}}function Vg(i){let t,n;return{c(){t=L("img"),Ia(t.src,n=i[11])||A(t,"src",n),A(t,"alt",""),A(t,"class","c-image-chip__image svelte-1war7ei")},m(e,o){x(e,t,o),i[9](t)},p(e,o){6&o&&!Ia(t.src,n=e[11])&&A(t,"src",n)},d(e){e&&b(t),i[9](null)}}}function Gg(i){let t,n,e;return n=new go({props:{size:1}}),{c(){t=L("div"),v(n.$$.fragment),A(t,"class","c-image-chip__loading svelte-1war7ei")},m(o,r){x(o,t,r),w(n,t,null),e=!0},p:P,i(o){e||(d(n.$$.fragment,o),e=!0)},o(o){$(n.$$.fragment,o),e=!1},d(o){o&&b(t),y(n)}}}function Yg(i){let t,n,e=i[6]?`${Math.round(i[6]/1024)}KB`:"",o=i[5]&&ac();return{c(){o&&o.c(),t=U(),n=G(e)},m(r,s){o&&o.m(r,s),x(r,t,s),x(r,n,s)},p(r,s){r[5]?o||(o=ac(),o.c(),o.m(t.parentNode,t)):o&&(o.d(1),o=null),64&s&&e!==(e=r[6]?`${Math.round(r[6]/1024)}KB`:"")&&_t(n,e)},i:P,o:P,d(r){r&&(b(t),b(n)),o&&o.d(r)}}}function Kg(i){let t,n,e;return n=new go({props:{size:1}}),{c(){t=L("div"),v(n.$$.fragment),A(t,"class","c-image-chip__size-loading svelte-1war7ei")},m(o,r){x(o,t,r),w(n,t,null),e=!0},p:P,i(o){e||(d(n.$$.fragment,o),e=!0)},o(o){$(n.$$.fragment,o),e=!1},d(o){o&&b(t),y(n)}}}function ac(i){let t;return{c(){t=L("span"),t.textContent="",A(t,"class","c-image-chip__warning-icon svelte-1war7ei")},m(n,e){x(n,t,e)},d(n){n&&b(t)}}}function Xg(i){let t,n,e,o,r,s,c,a,l,u,f,m,p,_,M,C,T,E=i[7](),R=E&&sc(i);const N=[Hg,Ug,Bg],Z=[];function Q(Y,V){return 1&V&&(o=null),Y[4]?0:(o==null&&(o=!n1(Y[0])),o?1:2)}r=Q(i,-1),s=Z[r]=N[r](i);const X=[Kg,Yg],K=[];function H(Y,V){return Y[4]?0:1}return p=H(i),_=K[p]=X[p](i),{c(){t=L("div"),R&&R.c(),n=U(),e=L("div"),s.c(),c=U(),a=L("div"),l=L("div"),u=G(i[0]),f=U(),m=L("div"),_.c(),A(e,"class","c-image-render__chip-preview svelte-1war7ei"),A(l,"class","c-image-chip__filename svelte-1war7ei"),A(l,"title",i[0]),A(m,"class","c-image-chip__size svelte-1war7ei"),A(a,"class","c-image-chip__info svelte-1war7ei"),A(t,"class","c-image-chip svelte-1war7ei"),A(t,"role","button"),A(t,"tabindex","0"),Mt(t,"is-over-limit",i[5])},m(Y,V){x(Y,t,V),R&&R.m(t,null),O(t,n),O(t,e),Z[r].m(e,null),O(t,c),O(t,a),O(a,l),O(l,u),O(a,f),O(a,m),K[p].m(m,null),M=!0,C||(T=[Lt(t,"click",Jg),Lt(t,"keydown",i[10])],C=!0)},p(Y,[V]){128&V&&(E=Y[7]()),E?R?R.p(Y,V):(R=sc(Y),R.c(),R.m(t,n)):R&&(R.d(1),R=null);let J=r;r=Q(Y,V),r===J?Z[r].p(Y,V):(j(),$(Z[J],1,1,()=>{Z[J]=null}),q(),s=Z[r],s?s.p(Y,V):(s=Z[r]=N[r](Y),s.c()),d(s,1),s.m(e,null)),(!M||1&V)&&_t(u,Y[0]),(!M||1&V)&&A(l,"title",Y[0]);let rt=p;p=H(Y),p===rt?K[p].p(Y,V):(j(),$(K[rt],1,1,()=>{K[rt]=null}),q(),_=K[p],_?_.p(Y,V):(_=K[p]=X[p](Y),_.c()),d(_,1),_.m(m,null)),(!M||32&V)&&Mt(t,"is-over-limit",Y[5])},i(Y){M||(d(s),d(_),M=!0)},o(Y){$(s),$(_),M=!1},d(Y){Y&&b(t),R&&R.d(),Z[r].d(),K[p].d(),C=!1,Qe(T)}}}const Jg=i=>{i.preventDefault()};function Zg(i,t,n){let e,{title:o}=t,{src:r}=t,{loadImage:s}=t,{removeImage:c}=t,{isLoading:a=!1}=t,{isOverLimit:l=!1}=t,{fileSizeBytes:u=0}=t,{isEditable:f}=t;return i.$$set=m=>{"title"in m&&n(0,o=m.title),"src"in m&&n(1,r=m.src),"loadImage"in m&&n(2,s=m.loadImage),"removeImage"in m&&n(3,c=m.removeImage),"isLoading"in m&&n(4,a=m.isLoading),"isOverLimit"in m&&n(5,l=m.isOverLimit),"fileSizeBytes"in m&&n(6,u=m.fileSizeBytes),"isEditable"in m&&n(7,f=m.isEditable)},[o,r,s,c,a,l,u,f,e,function(m){te[m?"unshift":"push"](()=>{e=m,n(8,e)})},m=>{(function(p){p.key!=="ArrowUp"&&p.key!=="ArrowDown"&&p.key!=="ArrowLeft"&&p.key!=="ArrowRight"||(p.preventDefault(),p.stopPropagation())})(m)}]}class Qg extends ut{constructor(t){super(),dt(this,t,Zg,Xg,ct,{title:0,src:1,loadImage:2,removeImage:3,isLoading:4,isOverLimit:5,fileSizeBytes:6,isEditable:7})}}async function Of(i,t=1024){return new Promise((n,e)=>{const o=document.createElement("canvas"),r=o.getContext("2d"),s=new Image;s.onload=()=>{let c=s.width,a=s.height;c>a?c>t&&(a=Math.round(a*(t/c)),c=t):a>t&&(c=Math.round(c*(t/a)),a=t),o.width=c,o.height=a,r?(r.drawImage(s,0,0,c,a),o.toBlob(l=>{l!=null?n(l):e(new Error("Failed to create blob"))})):e(new Error("Could not get canvas context"))},s.onerror=()=>e(new Error("Failed to load image")),s.src=URL.createObjectURL(i)})}var Ci=(i=>(i.collapsed="collapsed",i.preview="preview",i.full="full",i))(Ci||{});const Fi=class Fi{constructor(t){$t(this,"_tipTapExtension");$t(this,"_editor");$t(this,"_createTipTapExtension",()=>{const t=this.registerEditor,n=this.unregisterEditor,e=this.insertFilesIntoEditor;return Og.extend({name:"file",addOptions(){var o;return{...(o=this.parent)==null?void 0:o.call(this),allowBase64:!0,preserveOnSplit:!1,defaultRenderMode:Ci.collapsed}},addAttributes(){var o;return{...(o=this.parent)==null?void 0:o.call(this),renderMode:{default:Ci.collapsed},title:{default:""},isLoading:{default:!1},fileSizeBytes:{default:0},mimeType:{default:""}}},onCreate(){var o;(o=this.parent)==null||o.call(this),t(this.editor)},onDestroy(){var o;(o=this.parent)==null||o.call(this),n()},addCommands(){var o;return{...(o=this.parent)==null?void 0:o.call(this),insertFilesIntoEditor:r=>({chain:s})=>s().command(()=>!!e(r)).focus("end").run()}},addNodeView:()=>this._createNodeView(),addProseMirrorPlugins(){var o;return[...((o=this.parent)==null?void 0:o.call(this))??[],new qp({key:Fi.IMAGE_PASTE_HANDLER_PLUGIN_KEY,props:{handlePaste:(r,s)=>{var c,a;return(a=(c=s.clipboardData)==null?void 0:c.files)!=null&&a.length?e([...s.clipboardData.files]).okFiles.length>0&&(s.preventDefault(),!0):!1}}})]}})});$t(this,"_createNodeView",()=>({node:t})=>{var o,r;const n=document.createElement("div"),e=new Qg({target:n,props:{title:String(t.attrs.title),src:String(t.attrs.src),loadImage:((o=this._options)==null?void 0:o.renderImage)??(()=>Promise.resolve(void 0)),isLoading:!!t.attrs.isLoading,fileSizeBytes:Number(t.attrs.fileSizeBytes)||0,isOverLimit:this._calculateIsOverLimit(Number(t.attrs.fileSizeBytes)||0,String(t.attrs.mimeType||"").startsWith("image/")),removeImage:async()=>{var s;if(this._editor){try{(s=this._options)!=null&&s.deleteImage&&await this._options.deleteImage(String(t.attrs.src))}catch(c){console.error("Failed to delete image:",c)}this._editor.chain().command(({tr:c,state:a})=>(a.doc.descendants((l,u)=>{if(t===l)return c.delete(u,u+l.nodeSize),!1}),!0)).focus("end").run()}},isEditable:((r=this._options)==null?void 0:r.isEditable)??(()=>!0)}});return{dom:n,destroy:()=>{e.$destroy()},update:s=>s.type.name==="file"&&(t=s,e.$set({src:String(s.attrs.src),isLoading:!!s.attrs.isLoading,fileSizeBytes:Number(s.attrs.fileSizeBytes)||0,isOverLimit:this._calculateIsOverLimit(Number(s.attrs.fileSizeBytes)||0,String(s.attrs.mimeType||"").startsWith("image/"))}),!0)}});$t(this,"registerEditor",t=>{this._editor=t});$t(this,"unregisterEditor",()=>{this._editor=void 0});$t(this,"_getImageNodeCount",()=>{if(!this._editor)return;let t=0;return this._editor.state.doc.descendants(n=>{n.type.name==="file"&&t++}),t});$t(this,"_calculateIsOverLimit",(t,n=!0)=>{var o,r;if(t===0)return!1;const e=n?(o=this._options)==null?void 0:o.maxImageSizeKb:(r=this._options)==null?void 0:r.maxTextSizeKb;return e?t>1024*e:!1});$t(this,"updateOptions",t=>{this._options={...t}});$t(this,"insertFilesIntoEditor",t=>{const{validFiles:n,errors:e}=this.validateFiles(t),o=[];for(const r of n){if(!this._editor)continue;const s=this._insertLoadingImage(this._editor,r.name);this._processImage(r,s).catch(c=>{o.push(new Cs([r],String(c)))})}return{errors:[...e,...o],okFiles:n}});this._options=t,this._tipTapExtension=this._createTipTapExtension()}validateFiles(t){const n=[],e=[];for(const s of t){const c=(o=s,r=this._options,function(a,l){const u=l||["image","text"];if(u.includes("image")&&a.type.startsWith("image/"))return!0;if(!u.includes("text"))return!1;if(a.type.startsWith("text/")||["application/json","application/xml","application/javascript","application/typescript","application/x-sh","application/x-shellscript","application/x-yaml","application/yaml"].includes(a.type))return!0;const f=a.name.toLowerCase();return!(!f.endsWith(".md")&&!f.endsWith(".markdown"))||!!["dockerfile",".gitignore",".gitattributes","makefile","readme","license","changelog","authors","contributors","copying","install","news","todo",".env",".env.example",".env.local",".env.development",".env.production"].includes(f)}(o,r==null?void 0:r.supportedFileTypes)?o:new zg(o));c instanceof Cs?n.push(c):e.push(c)}var o,r;return{validFiles:e,errors:n}}async _processImage(t,n){var e,o,r,s;try{let c,a;if(ic(t)){const l=await Of(t);if(!l||!this._editor)return;c=new File([l],t.name,{type:t.type})}else c=t;a=ic(t)?await((o=(e=this._options)==null?void 0:e.saveImage)==null?void 0:o.call(e,c))??c.name:await((s=(r=this._options)==null?void 0:r.saveAttachment)==null?void 0:s.call(r,c))??c.name,this._updateImageNode(n,{src:a,title:c.name,isLoading:!1,fileSizeBytes:c.size,mimeType:c.type})}catch(c){throw console.error("Could not process image: ",c),this._editor&&this._removeImageNode(n),c}}get tipTapExtension(){return this._tipTapExtension}_findImageNodeBySrc(t){if(!this._editor||!t)return null;let n=null;return this._editor.state.doc.descendants((e,o)=>e.type.name!=="file"||e.attrs.src!==t||(n={node:e,pos:o},!1)),n}_insertLoadingImage(t,n){const{from:e}=t.state.selection,o=`${n}-${Date.now()}-${Math.random().toString(36).substring(2)}`;return t.chain().command(({tr:r})=>{const s=e||r.doc.content.size;return r.insert(s,[t.schema.nodes.file.create({src:o,originalName:n,title:n,renderMode:Ci.collapsed,isLoading:!0}),t.schema.nodes.paragraph.create({text:""})]),!0}).focus("end").run(),o}_updateImageNode(t,n){if(!this._editor)return;const e=this._findImageNodeBySrc(t);e&&this._editor.chain().command(({tr:o})=>(o.setNodeMarkup(e.pos,void 0,{...e.node.attrs,...n}),!0)).run()}_removeImageNode(t){if(!this._editor)return;const n=this._findImageNodeBySrc(t);n&&this._editor.chain().command(({tr:e})=>(e.delete(n.pos,n.pos+n.node.nodeSize),!0)).run()}static hasLoadingImages(t){if(!t)return!1;const n=e=>{var o;if(!e)return!1;if(e.type==="file"&&((o=e.attrs)!=null&&o.isLoading))return!0;if(e.content){if(!Array.isArray(e.content))return!1;for(const r of e.content)if(n(r))return!0}return!1};return n(t)}};$t(Fi,"IMAGE_PASTE_HANDLER_PLUGIN_KEY",new jp("augment-prosemirror-image-paste-handler"));let Ei=Fi;const Ai=10,Mi=1024,ki=24;function t0(i){const t=function(e){if(!e)return[];const o=[],r=s=>{if(s&&(s.type==="file"&&s.attrs&&o.push({src:s.attrs.src||"",title:s.attrs.title||"",fileSizeBytes:Number(s.attrs.fileSizeBytes)||0,isLoading:!!s.attrs.isLoading}),s.content&&Array.isArray(s.content)))for(const c of s.content)r(c)};return r(e),o}(i),n=t.filter(e=>!e.isLoading);return{imageCount:n.length,imageSizeSumKb:Math.round(n.reduce((e,o)=>e+o.fileSizeBytes,0)/1024)}}function e0(i){const t=function(e){if(!e)return[];const o=[],r=s=>{if(s&&(s.type==="file"&&s.attrs&&((s.attrs.mimeType||"").startsWith("image/")||o.push({src:s.attrs.src||"",title:s.attrs.title||"",fileSizeBytes:Number(s.attrs.fileSizeBytes)||0,isLoading:!!s.attrs.isLoading})),s.content&&Array.isArray(s.content)))for(const c of s.content)r(c)};return r(e),o}(i),n=t.filter(e=>!e.isLoading);return{textSizeSumKb:Math.round(n.reduce((e,o)=>e+o.fileSizeBytes,0)/1024)}}function zf(i){const t=t0(i),n=e0(i),{imageCount:e,imageSizeSumKb:o}=t,{textSizeSumKb:r}=n,s=e>Ai&&Ai>0,c=o>Mi&&Mi>0,a=r>ki&&ki>0,l=s||c||a,u=[s?`Up to ${Ai} images are supported.`:null,c?`Total image size exceeds the ${Mi}KB limit. Current size: ${o}KB`:null,a?`Total text file size exceeds the ${ki}KB limit. Current size: ${r}KB`:null].filter(Boolean);return{hasWarning:l,warningMessage:u.length>0?u[0]:"",warningMessages:u}}function n0(i,t,n){let{maxImages:e}=t,{saveImage:o}=t,{saveAttachment:r}=t,{deleteImage:s}=t,{renderImage:c}=t,{isEditable:a=()=>!0}=t,{changeImageMode:l}=t,{supportedFileTypes:u=["image"]}=t;const f=new Ei({changeImageMode:l,maxImages:e,saveImage:o,saveAttachment:r,deleteImage:s,renderImage:c,isEditable:a,maxImageSizeKb:Mi,maxTextSizeKb:ki,supportedFileTypes:u}),m=St(Bs.CONTEXT_KEY).pluginManager.registerPlugin(f);return jr(m),i.$$set=p=>{"maxImages"in p&&n(0,e=p.maxImages),"saveImage"in p&&n(1,o=p.saveImage),"saveAttachment"in p&&n(2,r=p.saveAttachment),"deleteImage"in p&&n(3,s=p.deleteImage),"renderImage"in p&&n(4,c=p.renderImage),"isEditable"in p&&n(5,a=p.isEditable),"changeImageMode"in p&&n(6,l=p.changeImageMode),"supportedFileTypes"in p&&n(7,u=p.supportedFileTypes)},[e,o,r,s,c,a,l,u]}let o0=class extends ut{constructor(i){super(),dt(this,i,n0,null,ct,{maxImages:0,saveImage:1,saveAttachment:2,deleteImage:3,renderImage:4,isEditable:5,changeImageMode:6,supportedFileTypes:7})}};function cc(i){return i.line_start===i.line_end?`L${i.line_start+1}`:`L${i.line_start+1}-${i.line_end+1}`}const Bf=[{id:"find",label:"find",description:"things in your code base",requiresInput:!0,requiresEditorSelection:!1,placeholderText:"What code are you looking for?",selectionReminderMessage:"Select code in the editor to find.",visible:!0,promptFactory:async i=>`Find ${i}`},{id:"explain",label:"explain",description:"how selected code works",requiresInput:!1,requiresEditorSelection:!0,placeholderText:"",selectionReminderMessage:"Select code in the editor to explain.",visible:!0,promptFactory:async()=>"Explain the selected code"},{id:"fix",label:"fix",description:"issues in selected code",requiresInput:!1,requiresEditorSelection:!0,placeholderText:"",selectionReminderMessage:"Select code in the editor to fix.",visible:!0,promptFactory:async function(i,t){const n=await async function(o){let r=[];try{r=await o.extensionClient.getDiagnostics()}catch(s){console.error("Failed to get diagnostic messages:",s)}return r}(t);let e="Fix the selected code.";return e+=function(o){if(o.length===0)return" The IDE does not report any issues on the selected code.";if(o.length===1)return` The IDE reports the following issue:

 ${cc(o[0].location)}: ${o[0].message}`;{const r=o.sort((l,u)=>l.location.line_start-u.location.line_start).reduce((l,u)=>{const f=`${u.location.line_start},${u.location.line_end}`;return l[f]||(l[f]=[]),l[f].push(u),l},{}),s=Object.entries(r).map(([l,u])=>{const[f,m]=l.split(",").map(Number),p=cc({path:"",line_start:f,line_end:m});return u.length===1?` ${p}: ${u[0].message}`:` ${p}:
${u.map((_,M)=>`    ${M+1}. ${_.message}`).join(`
`)}`}).join(`
`),c=Math.min(...o.map(l=>l.location.line_start)),a=Math.max(...o.map(l=>l.location.line_end));return` The IDE reports the following issues on ${c===a?`L${c+1}`:`L${c+1}-${a+1}`}:

${s}`}}(n),e}},{id:"write-test",label:"write-test",description:"add tests for selected code",requiresInput:!1,requiresEditorSelection:!0,placeholderText:"",selectionReminderMessage:"Select code in the editor to test.",visible:!0,promptFactory:async()=>"Write a test for the selected code"},{id:"document",label:"document",description:"write documentation for selected code",requiresInput:!1,requiresEditorSelection:!0,placeholderText:"",selectionReminderMessage:"Select code in the editor to document.",visible:!0,promptFactory:async()=>"Document selected code. Do not make unnecessary changes."},{id:"generate-commit-message",label:"generate-commit-message",description:"generate a commit message",requiresInput:!1,requiresEditorSelection:!1,placeholderText:"",selectionReminderMessage:"Hit enter or send to generate a commit message",visible:!0,promptFactory:async()=>""}];function Si(i){return Bf.find(t=>t.id===i)}function Uf(){return Bf.filter(i=>i.visible)}class r0{constructor(t,n){$t(this,"_model");$t(this,"_fn");$t(this,"dispose",()=>{this._model.removeAfterCommandListener(this._fn)});this._model=t,this._fn=n}}class i0{constructor(t,n){$t(this,"_activeCommand",Le(void 0));$t(this,"_isActiveCommandRunnable",Le(!1));$t(this,"_afterCommandListeners",[]);$t(this,"_inputText","");$t(this,"_selections",[]);$t(this,"hasActiveCommand",jn(this._activeCommand,t=>t!==void 0));$t(this,"isActiveCommandRunnable",ds(this._isActiveCommandRunnable));$t(this,"activeCommand",ds(this._activeCommand));$t(this,"activeCommandData",jn(this._activeCommand,t=>Si(t)));this._chatModel=t,this._agentConversationModel=n}get inputText(){return this._inputText}get selections(){return this._selections}setActiveCommand(t){this._activeCommand.set(t),this.updateRunnable()}setInputText(t){this._inputText=t,this.updateRunnable()}setSelections(t){this._selections=t,this.updateRunnable()}async runActiveCommand(){var e,o,r;const t=Si(oe(this._activeCommand));if(!t)return;const n=await t.promptFactory(this._inputText,this._chatModel);this._activeCommand.set(void 0),await this._chatModel.setCurrentConversation(),t.id==="generate-commit-message"?(e=this._chatModel.currentConversationModel)==null||e.generateCommitMessage():(r=this._chatModel.currentConversationModel)==null||r.sendExchange({request_message:n,rich_text_json_repr:void 0,status:nn.draft,model_id:((o=this._chatModel.currentConversationModel)==null?void 0:o.selectedModelId)??void 0}),this._chatModel.host.postMessage({type:je.usedSlashAction}),this.reportCommandMetric(t.id),this._afterCommandListeners.forEach(s=>s(n))}reportCommandMetric(t){switch(t){case"fix":this._chatModel.extensionClient.reportWebviewClientEvent(Qo.chatUseActionFix);break;case"explain":this._chatModel.extensionClient.reportWebviewClientEvent(Qo.chatUseActionExplain);break;case"write-test":this._chatModel.extensionClient.reportWebviewClientEvent(Qo.chatUseActionWriteTest);break;case"find":this._chatModel.extensionClient.reportWebviewClientEvent(Qo.chatUseActionFind)}}cancelActiveCommand(){this._activeCommand.set(void 0),this._afterCommandListeners.forEach(t=>t(void 0))}afterCommand(t){return this._afterCommandListeners.push(t),new r0(this,t)}removeAfterCommandListener(t){this._afterCommandListeners=this._afterCommandListeners.filter(n=>n!==t)}updateRunnable(){let t=!1;const n=oe(this._activeCommand),e=Si(n);n!==void 0&&e!==void 0&&(t=!0,e!=null&&e.requiresInput&&(t=t&&this._inputText!==""),e!=null&&e.requiresEditorSelection&&(t=t&&this._selections.length>0)),this._isActiveCommandRunnable.set(t)}handleMessageFromExtension(t){const n=t.data;return n.type===je.runSlashCommand&&(n.data==="fix"?this._createNewThreadForFix():oe(this._agentConversationModel.isCurrConversationAgentic)&&this._agentConversationModel.setToChat(),this.setActiveCommand(n.data),this.runActiveCommand(),!0)}async _createNewThreadForFix(){const t=this._chatModel.chatModeModel;if(t)if(this._chatModel.currentChatMode===fs.chat)t.setToChat();else{const n=oe(this._chatModel.agentExecutionMode);await t.createNewLocalAgentThread(n)}else{const n=oe(this._chatModel.agentExecutionMode);oe(this._agentConversationModel.isCurrConversationAgentic)||(this._agentConversationModel.setToAgentic(),this._chatModel.agentExecutionMode.set(n))}}}function lc(i,t){return function(n,e){if(n.length<=e||n.length===0)return{truncatedText:n};const o=n.split(`
`),r="... additional lines truncated ..."+(o[0].endsWith("\r")?"\r":"");let s,c="";if(o.length<2||o[0].length+o[o.length-1].length+r.length>e){const a=Math.floor(e/2);c=[n.slice(0,a),"<...>",n.slice(-a)].join(""),s=[1,1,o.length,o.length]}else{const a=[],l=[];let u=r.length+1;for(let f=0;f<Math.floor(o.length/2);f++){const m=o[f],p=o[o.length-1-f],_=m.length+p.length+2;if(u+_>e)break;u+=_,a.push(m),l.push(p)}s=[1,a.length,o.length-l.length+1,o.length],a.push(r),a.push(...l.reverse()),c=a.join(`
`)}return{truncatedText:c,shownRangeWhenTruncated:s}}(i,t).truncatedText}async function s0(i,t,n,e=1024){try{const o=function(s,c,a){const l=atob(s);let u=l.length;const f=new Uint8Array(u);for(;u--;)f[u]=l.charCodeAt(u);return new File([f],c,{type:a})}(i,t,n),r=await Of(o,e);return new Promise((s,c)=>{const a=new FileReader;a.onloadend=()=>{if(typeof a.result=="string"){const l=a.result.split(","),u=l.length>1?l[1]:a.result;s({dataUrl:u,mimeType:"image/png"})}else c(new Error("Failed to convert blob to data URL"))},a.onerror=l=>{c(new Error("FileReader error"))},a.readAsDataURL(r)})}catch(o){return console.error("Error scaling image:",o),{dataUrl:i,mimeType:n}}}async function a0(i,t=!0){if(!i.contentNodes||i.contentNodes.length===0)return i;const n=await async function(e,o=!0){const r=[];for(const s of e)if(s.type===vs.ContentImage&&s.image_content&&s.image_content.image_data){if(!o)continue;const c=s.image_content.image_data,a=s.image_content.media_type||"image/png",l=`image.${a.split("/")[1]||"png"}`,u=await s0(c,l,a);r.push({type:vs.ContentImage,image_content:{image_data:u.dataUrl,media_type:u.mimeType}})}else r.push(s);return r}(i.contentNodes,t);return{...i,contentNodes:n}}const c0={"save-file":`save-file tool call generation failed because tool input exceeded the token limit.
Please try again by limiting the file content to at most 300 lines. If more content needs to be added call save-file tool to edit the file after it has been created.
`,"str-replace-edit":`edit tool call generation failed because tool input exceeded the token limit.
Please try again by breaking down the edits into smaller chunks of at most 300 lines each. Then put as many of these chunks in a single tool call as possible up to the total limit of 300 lines.
`},Oi=class Oi{constructor(t,n,e,o){$t(this,"_disposables",[]);$t(this,"_activeTool");$t(this,"_processLastExchange",(t,n)=>{var o;if(n.stop_reason===Ha.MAX_TOKENS&&this._handleMaxTokensRetry(t,n))return;const e=(o=n.structured_output_nodes)==null?void 0:o.filter(r=>r.type===Rr.TOOL_USE);for(const r of e??[]){const s=r.tool_use;if(s===void 0)continue;const c=this._conversationModel.getToolUseState(t,s.tool_use_id);c.phase===xe.new&&this._validateAndCheckTool(t,s.tool_use_id,s.tool_name,JSON.parse(s.input_json),this._conversationModel.chatHistory.reduce((a,l)=>(Nr(l)&&a.push(hs(l)),a),[])),this._markCancelledIfStale(t,s.tool_use_id,c.phase)}});$t(this,"_handleMaxTokensRetry",(t,n)=>{var a;const e=np(n.structured_output_nodes),o=e==null?void 0:e.tool_use;if(!o||(e==null?void 0:e.type)!==Rr.TOOL_USE_START)return!1;const r=this._conversationModel.chatHistory.filter(Nr).slice(-6).filter(l=>{var u;return l.stop_reason===Ha.MAX_TOKENS&&((u=l.structured_output_nodes)==null?void 0:u.some(f=>f.type===Rr.TOOL_USE_START))});if(r.length>2)return this._conversationModel.updateChatItem(t,{...n,response_text:"",display_error_message:`We encountered difficulties running the ${o.tool_name} tool after attempting ${r.length} different approaches.`,status:nn.failed}),this._conversationModel.updateToolUseState({requestId:t,toolUseId:o.tool_use_id,phase:xe.error}),!0;const s=o.tool_use_id;if(!((a=this._conversationModel.getToolUseState(t,s).result)!=null&&a.isError)){const l=function(u,f=0){const m=c0[u];if(!m)return"";switch(f){case 0:return m;case 1:return m+", be better this time.";default:return`${u} tool call generation failed because tool input exceeded the token limit. Take some care in making smaller chunks`}}(o.tool_name,r.length);this._conversationModel.updateToolUseState({requestId:t,toolUseId:s,phase:xe.error,result:{text:l,isError:!0}}),this._sendToolResultExchange(t,o.tool_use_id)}return!0});$t(this,"_validateAndCheckTool",async(t,n,e,o,r)=>{if(this._activeTool!==void 0)return void console.error("_validateAndCheckTool called while another tool is active",this._activeTool);this._activeTool={id:n,requestId:t,phase:xe.checkingSafety},this._conversationModel.updateToolUseState({requestId:t,toolUseId:n,phase:xe.checkingSafety});const s=await this._extensionClient.getToolIdentifier(e);if(!s.found)return this._activeTool=void 0,void this._reportToolError(t,n,`Tool "${e}" does not exist`);if(s.toolIdentifier.hostName===Ip.mcpHost){const l=this._conversationModel.lastExchange;if(l!=null&&l.structured_output_nodes){const u=l.structured_output_nodes.find(f=>{var m;return f.type===Rr.TOOL_USE&&((m=f.tool_use)==null?void 0:m.tool_use_id)===n});u!=null&&u.tool_use&&s.mcpToolName&&s.mcpServerName&&(u.tool_use.mcp_server_name=s.mcpServerName,u.tool_use.mcp_tool_name=s.mcpToolName)}}const c={toolName:e,input:o,agentMode:oe(this._chatModel.agentExecutionMode)},a=(await this._extensionClient.checkSafe(c)).isSafe;this._activeTool=void 0,a?await this.callTool(t,n,e,o,r,this._conversationModel.id):this._conversationModel.updateToolUseState({requestId:t,toolUseId:n,phase:xe.runnable})});$t(this,"_reportToolError",(t,n,e)=>{this._conversationModel.updateToolUseState({requestId:t,toolUseId:n,phase:xe.error,result:{isError:!0,text:e}}),this._sendToolResultExchange(t,n)});$t(this,"_sendToolResultExchange",(t,n)=>{const e=this._conversationModel.getLastToolUseState(),o=this._generateToolResultNodesFromState(t,n);(e==null?void 0:e.requestId)===t&&(e==null?void 0:e.toolUseId)===n&&o?this._conversationModel.sendExchange({request_message:"",status:nn.draft,structured_request_nodes:[{id:1,type:Gm.TOOL_RESULT,tool_result_node:o}],model_id:this._conversationModel.selectedModelId??void 0}):o?this._extensionClient.reportError({originalRequestId:t,sanitizedMessage:"Tried to send tool result after conversation advanced",stackTrace:"",diagnostics:[{key:"tool_use_id",value:n}]}):this._extensionClient.reportError({originalRequestId:t,sanitizedMessage:"Tried to send tool result, but no tool result found",stackTrace:"",diagnostics:[{key:"tool_use_id",value:n},{key:"request_id",value:t}]})});$t(this,"callTool",async(t,n,e,o,r,s)=>{var c,a;if(this._activeTool===void 0){this._conversationModel.updateToolUseState({requestId:t,toolUseId:n,phase:xe.running}),this._activeTool={id:n,requestId:t,phase:xe.running};try{const l=function(p,_){if(p.contentNodes&&p.contentNodes.length>0){const M=p.contentNodes.map(C=>{if(C.type===vs.ContentText){let T="";return C.text_content&&(T=lc(C.text_content,_/p.contentNodes.length)),{...C,text_content:T}}return C});return{...p,contentNodes:M}}return{...p,text:lc(p.text,_)}}(await this._extensionClient.callTool(t,n,e,o,r,s),Oi.maxResultBytes),u=await a0(l,this._chatModel.flags.enableDebugFeatures),f=this._conversationModel.getToolUseState(t,n);if(f.phase===xe.new||f.phase===xe.cancelled)return;if(f.phase===xe.cancelling)return void this._conversationModel.updateToolUseState({requestId:t,toolUseId:n,phase:xe.cancelled,result:u});let m=u.isError?xe.error:xe.completed;this._conversationModel.updateToolUseState({requestId:t,toolUseId:n,phase:m,result:u})}catch(l){const u=this._conversationModel.getToolUseState(t,n);if(u.phase===xe.new||u.phase===xe.cancelled)return;const f=l instanceof Error?l.message:String(l);if(u.phase===xe.cancelling)return void this._conversationModel.updateToolUseState({requestId:t,toolUseId:n,phase:xe.cancelled,result:{isError:!0,text:f}});this._conversationModel.updateToolUseState({requestId:t,toolUseId:n,phase:xe.error,result:{isError:!0,text:f}})}finally{((c=this._activeTool)==null?void 0:c.id)===n&&((a=this._activeTool)==null?void 0:a.requestId)===t&&(this._activeTool=void 0)}this._sendToolResultExchange(t,n)}else console.error("callTool called while another tool is active","tried to run:",n,"active tool:",this._activeTool)});$t(this,"cancelToolRun",async(t,n)=>{var e,o;this._remoteAgentsModel&&this._remoteAgentsModel.isActive&&await this._remoteAgentsModel.interruptAgent(),this._activeTool!==void 0&&this._activeTool.requestId===t&&this._activeTool.id===n?(this._activeTool={id:n,requestId:t,phase:xe.cancelling},this._conversationModel.updateToolUseState({requestId:t,toolUseId:n,phase:xe.cancelling}),await this._extensionClient.cancelToolRun(t,n),((e=this._activeTool)==null?void 0:e.id)===n&&((o=this._activeTool)==null?void 0:o.requestId)===t&&(this._activeTool=void 0)):console.error("cancelToolRun called while another tool is active","tried to cancel:",n,"active tool:",this._activeTool)});$t(this,"skipToolRun",async(t,n)=>{this._activeTool===void 0?(this._conversationModel.updateToolUseState({requestId:t,toolUseId:n,phase:xe.cancelled,result:{isError:!0,text:"Tool did not run. User clicked `Skip` to cancel."}}),this._sendToolResultExchange(t,n)):console.error("skipToolRun called while another tool is active","tried to cancel:",n,"active tool:",this._activeTool)});$t(this,"_markCancelledIfStale",(t,n,e)=>{this._activeTool!==void 0&&this._activeTool.id===n&&this._activeTool.requestId===t||e!==xe.new&&e!==xe.checkingSafety&&e!==xe.cancelling&&e!==xe.running||this._conversationModel.updateToolUseState({requestId:t,toolUseId:n,phase:xe.cancelled})});$t(this,"cancelActiveToolRun",async()=>{this._activeTool!==void 0&&await this.cancelToolRun(this._activeTool.requestId,this._activeTool.id)});$t(this,"interruptAllTools",async()=>{rp(this._conversationModel),await this.cancelActiveToolRun();const t=this._conversationModel.lastExchange;t&&!wp(t)&&this._conversationModel.addChatItem({request_id:crypto.randomUUID(),status:nn.cancelled,chatItemType:uo.agenticTurnDelimiter})});$t(this,"interruptToolsConversation",async()=>{await this._conversationModel.cancelMessage(),await this.interruptAllTools()});$t(this,"dispose",()=>{this._disposables.forEach(t=>t.dispose())});let r;this._conversationModel=t,this._extensionClient=n,this._chatModel=e,this._remoteAgentsModel=o;const s=this._conversationModel.subscribe(l=>{const u=l.lastExchange;if(Nr(u)&&u.request_id!==void 0){const f=u.request_id;r!==f&&(this._processLastExchange(f,u),r=f)}}),c=this._conversationModel.onNewConversation(()=>{this._extensionClient.closeAllToolProcesses()}),a=this._conversationModel.onHistoryDelete(()=>{this.cancelActiveToolRun()});this._disposables.push({dispose:s},{dispose:c},{dispose:a})}_generateToolResultNodesFromState(t,n){var r,s;const e=this._conversationModel.getToolUseState(t,n);if(e.phase!==xe.cancelled&&e.phase!==xe.completed&&e.phase!==xe.error)return;let o;return(r=e.result)!=null&&r.contentNodes?(o=op(e.result.contentNodes,this._chatModel.flags.enableDebugFeatures),{content:"",is_error:e.result.isError,request_id:e.result.requestId,tool_use_id:n,content_nodes:o}):((s=e.result)==null?void 0:s.text)!==void 0?{content:e.result.text,is_error:e.result.isError,request_id:e.result.requestId,tool_use_id:n}:void 0}async getToolCallCheckpoint(t){try{return await this._extensionClient.getToolCallCheckpoint(t)}catch(n){return void console.error("Failed to get tool call checkpoint:",n)}}};$t(Oi,"maxResultBytes",65536);let As=Oi;const l0="You can only have %MAX_AGENTS% agents at a time. Please delete some before creating a new one.",qT="You can only have %MAX_AGENTS% active agents at a time. Please pause some before creating a new one.",Hf=(i,t,n,e,o)=>()=>{var l,u;if(o)return!1;const r=((l=t.draftExchange)==null?void 0:l.request_message)??"",s=(u=t.draftExchange)==null?void 0:u.rich_text_json_repr,c=()=>{t.draftExchange||t.saveDraftExchange(r,s)};if(!i.currentAgentId){if(i.isCreatingAgent)return!1;i.setIsCreatingAgent(!0),t.clearDraftExchange();const f=async()=>{try{const m=await i.createRemoteAgentFromDraft(r,t.selectedModelId??void 0);m?i==null||i.setCurrentAgent(m):c()}catch(m){console.error("Failed to create remote agent: ",m),c()}finally{i.setIsCreatingAgent(!1)}};return n?(n==null||n.isGithubAuthenticated().then(m=>{if(!m)return i.setIsCreatingAgent(!1),void c();f()}).catch(m=>{console.error("Failed to check GitHub authentication status:",m),i.setIsCreatingAgent(!1),c()}),!0):(f(),!0)}const a=t.draftExchange;if(a&&i){t.clearDraftExchange();const f=t.selectedModelId;i.sendMessage(a.request_message,f??void 0).then(m=>{m||c()}).catch(()=>{c()})}return setTimeout(()=>e==null?void 0:e.blur(),50),!0};async function wi(i,t){await i.interruptAgent(),await t.sendDraftExchange()}async function u0(i,t,n,e,o){var r,s,c;switch(i){case Ti.send:return void await wi(n,t);case Ti.addTask:{if(!((r=e.flags)!=null&&r.enableTaskList)||!o||!t.rootTaskUuid)return void await wi(n,t);const a=((c=(s=t.draftExchange)==null?void 0:s.request_message)==null?void 0:c.trim())||"";if(!a)return;try{await async function(u,f,m){if(!m)throw new Error("No root task found for current conversation");const p=function(C){if(C=C.trim(),!C)return;const T=C.indexOf(`
`),E=C.substring(0,T===-1?void 0:T),R=C.substring(T).trim().replace(/\n/g," ");return{name:E,description:R}}(f);if(!p)return;const{name:_,description:M}=p;return await u.createTask(_,M,m)}(o,a,t.rootTaskUuid)&&t.clearDraftExchange()}catch(l){console.error("Task creation failed, falling back to regular send:",l),await wi(n,t)}return}default:return void await wi(n,t)}}function d0(i,t,n,e,o,r,s,c,a){var C,T;const l=i.currentConversationModel;if(!l)return{stateName:"noConversation",showCancelButton:!1,isDisabled:!0,disabledReason:"No active conversation",action:()=>!1,cancelAction:()=>!1};const u=oe(e.activeCommand),f=oe(t.isCurrConversationAgentic),m=(((T=(C=l.draftExchange)==null?void 0:C.request_message)==null?void 0:T.length)||0)>Br,p=(()=>{var E,R;if((E=i.flags)!=null&&E.enableChatMultimodal){const N=(R=l.draftExchange)==null?void 0:R.rich_text_json_repr;return!!N&&Ei.hasLoadingImages(N)}return!1})(),{hasFileWarning:_,fileWarningMessage:M}=(()=>{var E,R;if((E=i.flags)!=null&&E.enableChatMultimodal){const N=(R=l.draftExchange)==null?void 0:R.rich_text_json_repr;if(!N)return{hasFileWarning:!1,fileWarningMessage:""};const{hasWarning:Z,warningMessage:Q}=zf(N);return{hasFileWarning:Z,fileWarningMessage:Q}}return{hasFileWarning:!1,fileWarningMessage:""}})();return m?{stateName:"overCharLimit",showCancelButton:!1,isDisabled:!0,disabledReason:`Message exceeds the ${Br} character limit`,action:()=>!1,cancelAction:()=>!1}:_?{stateName:"overImageLimit",showCancelButton:!1,isDisabled:!0,disabledReason:M,action:()=>!1,cancelAction:()=>!1}:s!=null&&s.isActive?function(E,R,N,Z){var J,rt,lt,ot,ht,it,xt,ee;let Q=!1;E.agentOverviews&&(Q=!!E.maxRemoteAgents&&E.agentOverviews.length>=E.maxRemoteAgents);let X=!1;const K=E.isCreatingAgent||(E==null?void 0:E.isActive)&&((J=E==null?void 0:E.currentAgent)==null?void 0:J.status)===Ze.agentStarting,H=((rt=E==null?void 0:E.currentAgent)==null?void 0:rt.status)===Ze.agentFailed;if(E.currentAgentId)X=!((lt=R.draftExchange)!=null&&lt.request_message)||K||H;else{const At=E.newAgentDraft;X=!((ot=R.draftExchange)!=null&&ot.request_message)||E.isCreatingAgent||Q||!((it=(ht=At==null?void 0:At.commitRef)==null?void 0:ht.github_commit_ref)!=null&&it.repository_url)||!((xt=At.selectedBranch)!=null&&xt.name)}const Y=E.isCurrentAgentRunning&&!K;let V;return X&&((ee=R.draftExchange)!=null&&ee.request_message?E.isCreatingAgent?V="Creating agent...":K?V="Agent is starting...":H?V="Agent has failed and cannot accept messages":Q&&(V=l0.replace("%MAX_AGENTS%",E.maxRemoteAgents.toString())):V="Please enter a message"),{stateName:"remoteAgentMode",showCancelButton:Y,isDisabled:X,disabledReason:V,action:Hf(E,R,N,Z,X),cancelAction:()=>(E.interruptAgent(),!0)}}(s,l,c,a):p?{stateName:"imagesLoading",showCancelButton:!1,isDisabled:!0,action:()=>!1,cancelAction:()=>(f?t.interruptAgent().catch(E=>{console.error("Failed to interrupt agent:",E)}):n.interruptToolsConversation(),!0)}:u?{stateName:"slashCommandActive",showCancelButton:!1,isDisabled:!1,action:()=>(e.runActiveCommand(),l.clearDraftExchange(),!0),cancelAction:()=>!1}:f?{stateName:"agentMode",showCancelButton:!1,isDisabled:!l.hasDraft,action:()=>(u0(o,l,t,i,r),!0),cancelAction:()=>(t.interruptAgent().catch(E=>{console.error("Failed to interrupt agent:",E)}),!0)}:{stateName:"chatMode",showCancelButton:l.canCancelMessage,isDisabled:!l.canSendDraft,action:()=>(l.sendDraftExchange(),!0),cancelAction:$0(t,n)}}function $0(i,t){return()=>(oe(i.isCurrConversationAgentic)?i.interruptAgent().catch(n=>{console.error("Failed to interrupt agent:",n)}):t.interruptToolsConversation(),!0)}const f0=navigator.platform.toUpperCase().indexOf("MAC")>=0;var jf=(i=>(i.cmd="",i.shift="",i.plus="+",i.minus="-",i.at="@",i.arrowUp="",i.arrowDown="",i.enter="",i.esc="",i.backspace="",i))(jf||{}),qf=(i=>(i.leftBracket="[",i.rightBracket="]",i.forwardSlash="/",i.backSlash="\\",i.ctrl="Ctrl",i.L="L",i.R="R",i))(qf||{});const Ii={cmdOrCtrl:f0?"":"Ctrl"};function m0(i){let t,n=i[4].primaryText+"";return{c(){t=G(n)},m(e,o){x(e,t,o)},p(e,o){16&o&&n!==(n=e[4].primaryText+"")&&_t(t,n)},d(e){e&&b(t)}}}function uc(i){let t,n;return t=new Gt({props:{size:1,class:"c-mode-secondary-label",$$slots:{default:[p0]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};272&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function p0(i){let t,n=i[4].secondaryText+"";return{c(){t=G(n)},m(e,o){x(e,t,o)},p(e,o){16&o&&n!==(n=e[4].secondaryText+"")&&_t(t,n)},d(e){e&&b(t)}}}function g0(i){let t,n,e;return n=new zs({}),{c(){t=L("div"),v(n.$$.fragment),A(t,"class","c-mode-checkmark svelte-mfvmmy")},m(o,r){x(o,t,r),w(n,t,null),e=!0},i(o){e||(d(n.$$.fragment,o),e=!0)},o(o){$(n.$$.fragment,o),e=!1},d(o){o&&b(t),y(n)}}}function h0(i){let t,n,e,o,r;return o=new Ts({}),{c(){t=L("div"),n=L("span"),n.textContent="Creates new thread",e=U(),v(o.$$.fragment),A(n,"class","c-mode-right-label__text svelte-mfvmmy"),A(t,"class","c-mode-right-label svelte-mfvmmy")},m(s,c){x(s,t,c),O(t,n),O(t,e),w(o,t,null),r=!0},i(s){r||(d(o.$$.fragment,s),r=!0)},o(s){$(o.$$.fragment,s),r=!1},d(s){s&&b(t),y(o)}}}function dc(i){let t,n,e;return n=new Gt({props:{size:1,class:"c-mode-secondary-label",$$slots:{default:[v0]},$$scope:{ctx:i}}}),{c(){t=L("div"),v(n.$$.fragment),A(t,"class","c-mode-display__bottom svelte-mfvmmy"),Mt(t,"c-mode-display__bottom--hidden",!i[2])},m(o,r){x(o,t,r),w(n,t,null),e=!0},p(o,r){const s={};258&r&&(s.$$scope={dirty:r,ctx:o}),n.$set(s),(!e||4&r)&&Mt(t,"c-mode-display__bottom--hidden",!o[2])},i(o){e||(d(n.$$.fragment,o),e=!0)},o(o){$(n.$$.fragment,o),e=!1},d(o){o&&b(t),y(n)}}}function v0(i){let t;return{c(){t=G(i[1])},m(n,e){x(n,t,e)},p(n,e){2&e&&_t(t,n[1])},d(n){n&&b(t)}}}function w0(i){let t,n,e,o,r,s,c,a,l,u,f;var m=i[4].icon;m&&(e=on(m,{})),r=new Gt({props:{size:1,$$slots:{default:[m0]},$$scope:{ctx:i}}});let p=i[4].secondaryText&&uc(i);const _=[h0,g0],M=[];function C(E,R){return E[0]?0:E[3]?1:-1}~(a=C(i))&&(l=M[a]=_[a](i));let T=i[1]&&dc(i);return{c(){t=L("div"),n=L("div"),e&&v(e.$$.fragment),o=U(),v(r.$$.fragment),s=U(),p&&p.c(),c=U(),l&&l.c(),u=U(),T&&T.c(),A(n,"class","c-mode-display__top svelte-mfvmmy"),A(t,"class","c-mode-display svelte-mfvmmy")},m(E,R){x(E,t,R),O(t,n),e&&w(e,n,null),O(n,o),w(r,n,null),O(n,s),p&&p.m(n,null),O(n,c),~a&&M[a].m(n,null),O(t,u),T&&T.m(t,null),f=!0},p(E,[R]){if(16&R&&m!==(m=E[4].icon)){if(e){j();const Q=e;$(Q.$$.fragment,1,0,()=>{y(Q,1)}),q()}m?(e=on(m,{}),v(e.$$.fragment),d(e.$$.fragment,1),w(e,n,o)):e=null}const N={};272&R&&(N.$$scope={dirty:R,ctx:E}),r.$set(N),E[4].secondaryText?p?(p.p(E,R),16&R&&d(p,1)):(p=uc(E),p.c(),d(p,1),p.m(n,c)):p&&(j(),$(p,1,1,()=>{p=null}),q());let Z=a;a=C(E),a!==Z&&(l&&(j(),$(M[Z],1,1,()=>{M[Z]=null}),q()),~a?(l=M[a],l||(l=M[a]=_[a](E),l.c()),d(l,1),l.m(n,null)):l=null),E[1]?T?(T.p(E,R),2&R&&d(T,1)):(T=dc(E),T.c(),d(T,1),T.m(t,null)):T&&(j(),$(T,1,1,()=>{T=null}),q())},i(E){f||(e&&d(e.$$.fragment,E),d(r.$$.fragment,E),d(p),d(l),d(T),f=!0)},o(E){e&&$(e.$$.fragment,E),$(r.$$.fragment,E),$(p),$(l),$(T),f=!1},d(E){E&&b(t),e&&y(e),y(r),p&&p.d(),~a&&M[a].d(),T&&T.d()}}}function y0(i,t,n){let e,{isConversationAgentic:o=!1}=t,{agentExecutionMode:r}=t,{isBackgroundAgent:s=!1}=t,{willStartNewThread:c=!1}=t,{description:a=""}=t,{doShowSecondaryText:l=!0}=t,{selected:u=!1}=t;return i.$$set=f=>{"isConversationAgentic"in f&&n(5,o=f.isConversationAgentic),"agentExecutionMode"in f&&n(6,r=f.agentExecutionMode),"isBackgroundAgent"in f&&n(7,s=f.isBackgroundAgent),"willStartNewThread"in f&&n(0,c=f.willStartNewThread),"description"in f&&n(1,a=f.description),"doShowSecondaryText"in f&&n(2,l=f.doShowSecondaryText),"selected"in f&&n(3,u=f.selected)},i.$$.update=()=>{224&i.$$.dirty&&n(4,e=Hi({isConversationAgentic:o,agentExecutionMode:r,isBackgroundAgent:s}))},[c,a,l,u,e,o,r,s]}new Set(Object.values(qf));class b0 extends ut{constructor(t){super(),dt(this,t,y0,w0,ct,{isConversationAgentic:5,agentExecutionMode:6,isBackgroundAgent:7,willStartNewThread:0,description:1,doShowSecondaryText:2,selected:3})}}function x0(i){let t,n,e;return n=new b0({props:{isConversationAgentic:i[2],agentExecutionMode:i[3],isBackgroundAgent:i[5],willStartNewThread:i[6],description:i[1],selected:i[4]}}),{c(){t=L("div"),v(n.$$.fragment),A(t,"class","c-mode-display-item svelte-1kjq29y")},m(o,r){x(o,t,r),w(n,t,null),e=!0},p(o,r){const s={};4&r&&(s.isConversationAgentic=o[2]),8&r&&(s.agentExecutionMode=o[3]),32&r&&(s.isBackgroundAgent=o[5]),64&r&&(s.willStartNewThread=o[6]),2&r&&(s.description=o[1]),16&r&&(s.selected=o[4]),n.$set(s)},i(o){e||(d(n.$$.fragment,o),e=!0)},o(o){$(n.$$.fragment,o),e=!1},d(o){o&&b(t),y(n)}}}function _0(i){let t,n,e,o;const r=[{onSelect:i[9]},i[7]];let s={$$slots:{default:[x0]},$$scope:{ctx:i}};for(let c=0;c<r.length;c+=1)s=kt(s,r[c]);return n=new wt.Item({props:s}),{c(){t=L("div"),v(n.$$.fragment),A(t,"class",e="c-mode-display-item-container "+i[8]+" svelte-1kjq29y"),Mt(t,"c-mode-display-item--selected",i[4])},m(c,a){x(c,t,a),w(n,t,null),o=!0},p(c,[a]){const l=129&a?Se(r,[1&a&&{onSelect:c[9]},128&a&&fo(c[7])]):{};2174&a&&(l.$$scope={dirty:a,ctx:c}),n.$set(l),(!o||256&a&&e!==(e="c-mode-display-item-container "+c[8]+" svelte-1kjq29y"))&&A(t,"class",e),(!o||272&a)&&Mt(t,"c-mode-display-item--selected",c[4])},i(c){o||(d(n.$$.fragment,c),o=!0)},o(c){$(n.$$.fragment,c),o=!1},d(c){c&&b(t),y(n)}}}function C0(i,t,n){let e,o;const r=["onSelect","description","isConversationAgentic","agentExecutionMode","selected","isBackgroundAgent","willStartNewThread"];let s=mr(t,r),{onSelect:c}=t,{description:a=""}=t,{isConversationAgentic:l=!1}=t,{agentExecutionMode:u}=t,{selected:f=!1}=t,{isBackgroundAgent:m=!1}=t,{willStartNewThread:p=!1}=t;return i.$$set=_=>{t=kt(kt({},t),le(_)),n(10,s=mr(t,r)),"onSelect"in _&&n(0,c=_.onSelect),"description"in _&&n(1,a=_.description),"isConversationAgentic"in _&&n(2,l=_.isConversationAgentic),"agentExecutionMode"in _&&n(3,u=_.agentExecutionMode),"selected"in _&&n(4,f=_.selected),"isBackgroundAgent"in _&&n(5,m=_.isBackgroundAgent),"willStartNewThread"in _&&n(6,p=_.willStartNewThread)},i.$$.update=()=>{n(8,{class:e="",...o}=s,e,(n(7,o),n(10,s)))},[c,a,l,u,f,m,p,o,e,_=>{c(_)}]}class wr extends ut{constructor(t){super(),dt(this,t,C0,_0,ct,{onSelect:0,description:1,isConversationAgentic:2,agentExecutionMode:3,selected:4,isBackgroundAgent:5,willStartNewThread:6})}}function A0(i){let t,n=i[4].primaryText+"";return{c(){t=G(n)},m(e,o){x(e,t,o)},p(e,o){16&o&&n!==(n=e[4].primaryText+"")&&_t(t,n)},d(e){e&&b(t)}}}function M0(i){let t,n,e;var o=i[4].icon;return o&&(t=on(o,{props:{slot:"iconLeft"}})),{c(){t&&v(t.$$.fragment),n=mt()},m(r,s){t&&w(t,r,s),x(r,n,s),e=!0},p(r,s){if(16&s&&o!==(o=r[4].icon)){if(t){j();const c=t;$(c.$$.fragment,1,0,()=>{y(c,1)}),q()}o?(t=on(o,{props:{slot:"iconLeft"}}),v(t.$$.fragment),d(t.$$.fragment,1),w(t,n.parentNode,n)):t=null}},i(r){e||(t&&d(t.$$.fragment,r),e=!0)},o(r){t&&$(t.$$.fragment,r),e=!1},d(r){r&&b(n),t&&y(t,r)}}}function k0(i){let t,n;return t=new Oo({}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function S0(i){let t,n;return t=new K$({}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function T0(i){let t,n,e,o;const r=[S0,k0],s=[];function c(a,l){return a[0]?0:1}return t=c(i),n=s[t]=r[t](i),{c(){n.c(),e=mt()},m(a,l){s[t].m(a,l),x(a,e,l),o=!0},p(a,l){let u=t;t=c(a),t!==u&&(j(),$(s[u],1,1,()=>{s[u]=null}),q(),n=s[t],n||(n=s[t]=r[t](a),n.c()),d(n,1),n.m(e.parentNode,e))},i(a){o||(d(n),o=!0)},o(a){$(n),o=!1},d(a){a&&b(e),s[t].d(a)}}}function E0(i){let t,n;return t=new he({props:{size:1,variant:i[1],color:i[2],disabled:i[3],$$slots:{iconRight:[T0],iconLeft:[M0],default:[A0]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,[o]){const r={};2&o&&(r.variant=e[1]),4&o&&(r.color=e[2]),8&o&&(r.disabled=e[3]),273&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function I0(i,t,n){let e,{isDropdownOpen:o}=t,{isCurrConversationAgentic:r}=t,{agentExecutionMode:s}=t,{isBackgroundAgent:c}=t,{variant:a="ghost"}=t,{color:l="neutral"}=t,{disabled:u=!1}=t;return i.$$set=f=>{"isDropdownOpen"in f&&n(0,o=f.isDropdownOpen),"isCurrConversationAgentic"in f&&n(5,r=f.isCurrConversationAgentic),"agentExecutionMode"in f&&n(6,s=f.agentExecutionMode),"isBackgroundAgent"in f&&n(7,c=f.isBackgroundAgent),"variant"in f&&n(1,a=f.variant),"color"in f&&n(2,l=f.color),"disabled"in f&&n(3,u=f.disabled)},i.$$.update=()=>{224&i.$$.dirty&&n(4,e=Hi({isConversationAgentic:r,agentExecutionMode:s,isBackgroundAgent:!!c}))},[o,a,l,u,e,r,s,c]}class Gs extends ut{constructor(t){super(),dt(this,t,I0,E0,ct,{isDropdownOpen:0,isCurrConversationAgentic:5,agentExecutionMode:6,isBackgroundAgent:7,variant:1,color:2,disabled:3})}}function L0(i){let t,n,e,o,r={onOpenChange:i[16],nested:!1,$$slots:{default:[B0]},$$scope:{ctx:i}};t=new wt.Root({props:r}),i[27](t);let s=i[8]&&fc(i);return{c(){v(t.$$.fragment),n=U(),s&&s.c(),e=mt()},m(c,a){w(t,c,a),x(c,n,a),s&&s.m(c,a),x(c,e,a),o=!0},p(c,a){const l={};17006&a[0]|1&a[1]&&(l.$$scope={dirty:a,ctx:c}),t.$set(l),c[8]?s?(s.p(c,a),256&a[0]&&d(s,1)):(s=fc(c),s.c(),d(s,1),s.m(e.parentNode,e)):s&&(j(),$(s,1,1,()=>{s=null}),q())},i(c){o||(d(t.$$.fragment,c),d(s),o=!0)},o(c){$(t.$$.fragment,c),$(s),o=!1},d(c){c&&(b(n),b(e)),i[27](null),y(t,c),s&&s.d(c)}}}function R0(i){let t,n;return t=new Pt({props:{content:"You can only interact with your remote agent in this window.",triggerOn:[Zt.Hover],side:"bottom",$$slots:{default:[H0]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};1&o[1]&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function D0(i){var e;let t,n;return t=new Gs({props:{isDropdownOpen:i[5],isCurrConversationAgentic:i[3],agentExecutionMode:i[1],isBackgroundAgent:(e=i[2])==null?void 0:e.isActive,variant:"ghost",color:"neutral"}}),{c(){v(t.$$.fragment)},m(o,r){w(t,o,r),n=!0},p(o,r){var c;const s={};32&r[0]&&(s.isDropdownOpen=o[5]),8&r[0]&&(s.isCurrConversationAgentic=o[3]),2&r[0]&&(s.agentExecutionMode=o[1]),4&r[0]&&(s.isBackgroundAgent=(c=o[2])==null?void 0:c.isActive),t.$set(s)},i(o){n||(d(t.$$.fragment,o),n=!0)},o(o){$(t.$$.fragment,o),n=!1},d(o){y(t,o)}}}function N0(i){let t,n;return t=new Pt({props:{triggerOn:[Zt.Hover],side:"right",align:"start",$$slots:{content:[F0],default:[P0]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};46&o[0]|1&o[1]&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function P0(i){var e;let t,n;return t=new Gs({props:{isDropdownOpen:i[5],isCurrConversationAgentic:i[3],agentExecutionMode:i[1],isBackgroundAgent:(e=i[2])==null?void 0:e.isActive,variant:"ghost",color:"neutral"}}),{c(){v(t.$$.fragment)},m(o,r){w(t,o,r),n=!0},p(o,r){var c;const s={};32&r[0]&&(s.isDropdownOpen=o[5]),8&r[0]&&(s.isCurrConversationAgentic=o[3]),2&r[0]&&(s.agentExecutionMode=o[1]),4&r[0]&&(s.isBackgroundAgent=(c=o[2])==null?void 0:c.isActive),t.$set(s)},i(o){n||(d(t.$$.fragment,o),n=!0)},o(o){$(t.$$.fragment,o),n=!1},d(o){y(t,o)}}}function F0(i){let t,n,e,o,r,s,c,a,l;return o=new Ur({props:{icons:[`${Ii.cmdOrCtrl}`,"."]}}),a=new Ur({props:{icons:[`${Ii.cmdOrCtrl}`,`${jf.shift}`,"."]}}),{c(){t=L("div"),n=L("div"),e=G(`Toggle forward
                `),v(o.$$.fragment),r=U(),s=L("div"),c=G(`or backward
                `),v(a.$$.fragment),A(t,"slot","content"),A(t,"class","c-toggle-mode-tooltip svelte-1t5cx1d")},m(u,f){x(u,t,f),O(t,n),O(n,e),w(o,n,null),O(t,r),O(t,s),O(s,c),w(a,s,null),l=!0},p:P,i(u){l||(d(o.$$.fragment,u),d(a.$$.fragment,u),l=!0)},o(u){$(o.$$.fragment,u),$(a.$$.fragment,u),l=!1},d(u){u&&b(t),y(o),y(a)}}}function O0(i){let t,n,e,o;const r=[N0,D0],s=[];function c(a,l){return a[9]?0:1}return t=c(i),n=s[t]=r[t](i),{c(){n.c(),e=mt()},m(a,l){s[t].m(a,l),x(a,e,l),o=!0},p(a,l){let u=t;t=c(a),t===u?s[t].p(a,l):(j(),$(s[u],1,1,()=>{s[u]=null}),q(),n=s[t],n?n.p(a,l):(n=s[t]=r[t](a),n.c()),d(n,1),n.m(e.parentNode,e))},i(a){o||(d(n),o=!0)},o(a){$(n),o=!1},d(a){a&&b(e),s[t].d(a)}}}function $c(i){let t,n,e,o;return t=new wt.Separator({}),e=new wr({props:{onSelect:i[26],description:"Run an agent in the cloud to lighten your workload.",isBackgroundAgent:!0,selected:i[6]==="remoteAgent"}}),{c(){v(t.$$.fragment),n=U(),v(e.$$.fragment)},m(r,s){w(t,r,s),x(r,n,s),w(e,r,s),o=!0},p(r,s){const c={};64&s[0]&&(c.selected=r[6]==="remoteAgent"),e.$set(c)},i(r){o||(d(t.$$.fragment,r),d(e.$$.fragment,r),o=!0)},o(r){$(t.$$.fragment,r),$(e.$$.fragment,r),o=!1},d(r){r&&b(n),y(t,r),y(e,r)}}}function z0(i){let t,n,e,o,r,s;n=new wr({props:{onSelect:i[24],isConversationAgentic:!1,description:"Use chat for advice and general knowledge.",selected:i[6]==="chat"}}),o=new wr({props:{onSelect:i[25],isConversationAgentic:!0,description:"Work with an agent on guided tasks.",selected:i[6]==="localAgent"}});let c=i[14]&&$c(i);return{c(){t=L("div"),v(n.$$.fragment),e=U(),v(o.$$.fragment),r=U(),c&&c.c(),A(t,"class","c-mode-display-dropdown svelte-1t5cx1d")},m(a,l){x(a,t,l),w(n,t,null),O(t,e),w(o,t,null),O(t,r),c&&c.m(t,null),s=!0},p(a,l){const u={};64&l[0]&&(u.selected=a[6]==="chat"),n.$set(u);const f={};2&l[0]&&(f.onSelect=a[25]),64&l[0]&&(f.selected=a[6]==="localAgent"),o.$set(f),a[14]?c?(c.p(a,l),16384&l[0]&&d(c,1)):(c=$c(a),c.c(),d(c,1),c.m(t,null)):c&&(j(),$(c,1,1,()=>{c=null}),q())},i(a){s||(d(n.$$.fragment,a),d(o.$$.fragment,a),d(c),s=!0)},o(a){$(n.$$.fragment,a),$(o.$$.fragment,a),$(c),s=!1},d(a){a&&b(t),y(n),y(o),c&&c.d()}}}function B0(i){let t,n,e,o;return t=new wt.Trigger({props:{$$slots:{default:[O0]},$$scope:{ctx:i}}}),t.$on("click",q0),e=new wt.Content({props:{size:1,side:"top",align:"start",$$slots:{default:[z0]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment),n=U(),v(e.$$.fragment)},m(r,s){w(t,r,s),x(r,n,s),w(e,r,s),o=!0},p(r,s){const c={};558&s[0]|1&s[1]&&(c.$$scope={dirty:s,ctx:r}),t.$set(c);const a={};16450&s[0]|1&s[1]&&(a.$$scope={dirty:s,ctx:r}),e.$set(a)},i(r){o||(d(t.$$.fragment,r),d(e.$$.fragment,r),o=!0)},o(r){$(t.$$.fragment,r),$(e.$$.fragment,r),o=!1},d(r){r&&b(n),y(t,r),y(e,r)}}}function fc(i){let t,n,e;return n=new Pt({props:{content:i[7]?"":"Run tools automatically",triggerOn:[Zt.Hover],side:"bottom",$$slots:{default:[U0]},$$scope:{ctx:i}}}),{c(){t=L("div"),v(n.$$.fragment),A(t,"class","c-toggle-mode-button__agent-toggle svelte-1t5cx1d")},m(o,r){x(o,t,r),w(n,t,null),e=!0},p(o,r){const s={};128&r[0]&&(s.content=o[7]?"":"Run tools automatically"),128&r[0]|1&r[1]&&(s.$$scope={dirty:r,ctx:o}),n.$set(s)},i(o){e||(d(n.$$.fragment,o),e=!0)},o(o){$(n.$$.fragment,o),e=!1},d(o){o&&b(t),y(n)}}}function U0(i){let t,n;return t=new Um({props:{checked:i[7],size:2,onText:"Auto",offText:"Auto",ariaLabel:"Toggle between manual and auto agent mode"}}),t.$on("change",i[20]),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};128&o[0]&&(r.checked=e[7]),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function H0(i){let t,n;return t=new Gs({props:{isDropdownOpen:!1,isCurrConversationAgentic:!0,agentExecutionMode:Co.auto,isBackgroundAgent:!0,disabled:!0,variant:"ghost",color:"accent"}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p:P,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function j0(i){let t,n,e,o;const r=[R0,L0],s=[];function c(a,l){var u;return(u=a[2])!=null&&u.isRemoteAgentSshWindow?0:1}return n=c(i),e=s[n]=r[n](i),{c(){t=L("div"),e.c(),A(t,"class","c-toggle-mode-button svelte-1t5cx1d")},m(a,l){x(a,t,l),s[n].m(t,null),o=!0},p(a,l){let u=n;n=c(a),n===u?s[n].p(a,l):(j(),$(s[u],1,1,()=>{s[u]=null}),q(),e=s[n],e?e.p(a,l):(e=s[n]=r[n](a),e.c()),d(e,1),e.m(t,null))},i(a){o||(d(e),o=!0)},o(a){$(e),o=!1},d(a){a&&b(t),s[n].d()}}}const q0=i=>{i.stopPropagation()};function W0(i,t,n){let e,o,r,s,c,a,l,u,f,m,p,_,M,C,T,E=P,R=P,N=P,Z=P,Q=P,X=()=>(Q(),Q=ce(K,xt=>n(23,T=xt)),K);i.$$.on_destroy.push(()=>E()),i.$$.on_destroy.push(()=>R()),i.$$.on_destroy.push(()=>N()),i.$$.on_destroy.push(()=>Z()),i.$$.on_destroy.push(()=>Q());let{chatModel:K=St("chatModel")}=t;X();let{agentConversationModel:H=St("agentConversationModel")}=t;const Y=St(Tn.key);Et(i,Y,xt=>n(2,p=xt));const V=St(gr.key);let J,rt=!1;function lt(){V.handleSetToChat(),J==null||J.requestClose()}async function ot(xt){await V.handleSetToAgent(xt),C===!1&&H.setHasEverUsedAgent(!0),J==null||J.requestClose()}function ht(){V.handleSetToBackgroundAgent(),M===!1&&(Y==null||Y.setHasEverUsedRemoteAgent(!0)),J==null||J.requestClose()}let it="chat";return i.$$set=xt=>{"chatModel"in xt&&X(n(0,K=xt.chatModel)),"agentConversationModel"in xt&&n(21,H=xt.agentConversationModel)},i.$$.update=()=>{8388608&i.$$.dirty[0]&&n(14,e=T.flags.enableBackgroundAgents),8388608&i.$$.dirty[0]&&n(22,o=T.flags.enableAgentAutoMode),2097152&i.$$.dirty[0]&&(n(13,r=H.isCurrConversationAgentic),R(),R=ce(r,xt=>n(3,_=xt))),8388608&i.$$.dirty[0]&&(n(12,s=T.agentExecutionMode),E(),E=ce(s,xt=>n(1,m=xt))),2097152&i.$$.dirty[0]&&(n(11,c=H.hasEverUsedAgent),Z(),Z=ce(c,xt=>n(29,C=xt))),8388608&i.$$.dirty[0]&&n(9,l=T.flags.enableDebugFeatures),14&i.$$.dirty[0]&&(p.isActive?n(6,it="remoteAgent"):n(6,it=_?m===Co.auto?"agentAuto":"localAgent":"chat")),4194316&i.$$.dirty[0]&&n(8,u=_&&!p.isActive&&o),2&i.$$.dirty[0]&&n(7,f=m===Co.auto)},n(10,a=Y==null?void 0:Y.hasEverUsedRemoteAgent),N(),N=ce(a,xt=>n(28,M=xt)),[K,m,p,_,J,rt,it,f,u,l,a,c,s,r,e,Y,function(xt){n(5,rt=xt),xt?V.reportModeSelectorOpen():V.reportModeSelectorClose()},lt,ot,ht,async function(){const xt=f?Co.manual:Co.auto;await V.setToAgent(xt)},H,o,T,()=>lt(),()=>ot(m),()=>ht(),function(xt){te[xt?"unshift":"push"](()=>{J=xt,n(4,J)})}]}class V0 extends ut{constructor(t){super(),dt(this,t,W0,j0,ct,{chatModel:0,agentConversationModel:21},null,[-1,-1])}}function G0(i){let t,n,e=[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 384 512"},i[0]],o={};for(let r=0;r<e.length;r+=1)o=kt(o,e[r]);return{c(){t=ie("svg"),n=new rn(!0),this.h()},l(r){t=sn(r,"svg",{xmlns:!0,"data-ds-icon":!0,viewBox:!0});var s=an(t);n=cn(s,!0),s.forEach(b),this.h()},h(){n.a=null,$e(t,o)},m(r,s){ln(r,t,s),n.m('<!--! Font Awesome Pro 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2024 Fonticons, Inc.--><path d="M32 32C32 14.3 46.3 0 64 0h256c17.7 0 32 14.3 32 32s-14.3 32-32 32h-29.5l11.4 148.2c36.7 19.9 65.7 53.2 79.5 94.7l1 3c3.3 9.8 1.6 20.5-4.4 28.8S362.3 352 352 352H32c-10.3 0-19.9-4.9-26-13.3s-7.7-19.1-4.4-28.8l1-3c13.8-41.5 42.8-74.8 79.5-94.7L93.5 64H64c-17.7 0-32-14.3-32-32m128 352h64v96c0 17.7-14.3 32-32 32s-32-14.3-32-32z"/>',t)},p(r,[s]){$e(t,o=Se(e,[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 384 512"},1&s&&r[0]]))},i:P,o:P,d(r){r&&b(t)}}}function Y0(i,t,n){return i.$$set=e=>{n(0,t=kt(kt({},t),le(e)))},[t=le(t)]}class Wf extends ut{constructor(t){super(),dt(this,t,Y0,G0,ct,{})}}function K0(i){let t,n;return t=new Os({}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function X0(i){let t,n;return t=new Wf({}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function J0(i){let t,n,e,o;const r=[X0,K0],s=[];function c(a,l){return a[0]?0:1}return n=c(i),e=s[n]=r[n](i),{c(){t=L("span"),e.c(),A(t,"class","c-pin-button svelte-16rnrv4")},m(a,l){x(a,t,l),s[n].m(t,null),o=!0},p(a,l){let u=n;n=c(a),n!==u&&(j(),$(s[u],1,1,()=>{s[u]=null}),q(),e=s[n],e||(e=s[n]=r[n](a),e.c()),d(e,1),e.m(t,null))},i(a){o||(d(e),o=!0)},o(a){$(e),o=!1},d(a){a&&b(t),s[n].d()}}}function Z0(i){let t,n;return t=new Ao.IconButton({props:{color:"neutral",$$slots:{default:[J0]},$$scope:{ctx:i}}}),t.$on("click",i[3]),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};17&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function Q0(i){let t,n;return t=new Pt({props:{content:i[2],$$slots:{default:[Z0]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,[o]){const r={};4&o&&(r.content=e[2]),19&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function th(i,t,n){let{isPinned:e=!1}=t,{onPin:o}=t,{title:r=e?"Unpin":"Pin to context"}=t;return i.$$set=s=>{"isPinned"in s&&n(0,e=s.isPinned),"onPin"in s&&n(1,o=s.onPin),"title"in s&&n(2,r=s.title)},[e,o,r,s=>{s.stopPropagation(),o()}]}class eh extends ut{constructor(t){super(),dt(this,t,th,Q0,ct,{isPinned:0,onPin:1,title:2})}}function nh(i){let t,n,e=[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 576 512"},i[0]],o={};for(let r=0;r<e.length;r+=1)o=kt(o,e[r]);return{c(){t=ie("svg"),n=new rn(!0),this.h()},l(r){t=sn(r,"svg",{xmlns:!0,"data-ds-icon":!0,viewBox:!0});var s=an(t);n=cn(s,!0),s.forEach(b),this.h()},h(){n.a=null,$e(t,o)},m(r,s){ln(r,t,s),n.m('<!--! Font Awesome Pro 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2024 Fonticons, Inc.--><path d="M156 32C100.6 32 48.8 46.6 27.1 53.6 10.3 59 0 74.5 0 91.1v312.4c0 26.1 24 44.2 48 40.2 19.8-3.3 54.8-7.7 100-7.7 54 0 97.5 25.5 112.5 35.6 7.5 5 16.8 8.4 27 8.4 11.5 0 21.6-4.2 29.3-9.9 13.4-9.8 52.3-34.1 111.2-34.1 47.7 0 80.5 4 99 7.2 23.9 4.1 49-13.8 49-40.6V91.1c0-16.5-10.3-32.1-27.1-37.5C527.2 46.6 475.4 32 420 32c-36.8 0-71.8 6.4-97.4 12.7-12.8 3.2-23.5 6.3-30.9 8.7-1.3.4-2.6.8-3.7 1.2-1.1-.4-2.4-.8-3.7-1.2-7.5-2.4-18.1-5.5-30.9-8.7C227.8 38.4 192.8 32 156 32m108 65.3v320.6c-26-13.7-67.2-29.9-116-29.9-42.9 0-77.4 3.7-100 7.1V97.3C70.3 90.6 112.4 80 156 80c31.6 0 62.6 5.6 85.9 11.3 8.6 2.1 16.1 4.2 22.1 6m48 319.2V97.3c6-1.8 13.5-3.9 22.1-6C357.4 85.6 388.4 80 420 80c43.6 0 85.7 10.6 108 17.3v297.4c-21.7-3.3-54.9-6.7-100-6.7-51.4 0-90.8 15-116 28.6z"/>',t)},p(r,[s]){$e(t,o=Se(e,[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 576 512"},1&s&&r[0]]))},i:P,o:P,d(r){r&&b(t)}}}function oh(i,t,n){return i.$$set=e=>{n(0,t=kt(kt({},t),le(e)))},[t=le(t)]}class rh extends ut{constructor(t){super(),dt(this,t,oh,nh,ct,{})}}function ih(i){let t,n,e=[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 576 512"},i[0]],o={};for(let r=0;r<e.length;r+=1)o=kt(o,e[r]);return{c(){t=ie("svg"),n=new rn(!0),this.h()},l(r){t=sn(r,"svg",{xmlns:!0,"data-ds-icon":!0,viewBox:!0});var s=an(t);n=cn(s,!0),s.forEach(b),this.h()},h(){n.a=null,$e(t,o)},m(r,s){ln(r,t,s),n.m('<!--! Font Awesome Pro 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2024 Fonticons, Inc.--><path d="M384 480h48c11.4 0 21.9-6 27.6-15.9l112-192c5.8-9.9 5.8-22.1.1-32.1s-16.2-16-27.7-16H144c-11.4 0-21.9 6-27.6 15.9L48 357.1V96c0-8.8 7.2-16 16-16h117.5c4.2 0 8.3 1.7 11.3 4.7l26.5 26.5c21 21 49.5 32.8 79.2 32.8H416c8.8 0 16 7.2 16 16v32h48v-32c0-35.3-28.7-64-64-64H298.5c-17 0-33.3-6.7-45.3-18.7l-26.5-26.6c-12-12-28.3-18.7-45.3-18.7H64C28.7 32 0 60.7 0 96v320c0 35.3 28.7 64 64 64h23.7z"/>',t)},p(r,[s]){$e(t,o=Se(e,[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 576 512"},1&s&&r[0]]))},i:P,o:P,d(r){r&&b(t)}}}function sh(i,t,n){return i.$$set=e=>{n(0,t=kt(kt({},t),le(e)))},[t=le(t)]}class ah extends ut{constructor(t){super(),dt(this,t,sh,ih,ct,{})}}function ch(i){let t,n,e=[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 512 512"},i[0]],o={};for(let r=0;r<e.length;r+=1)o=kt(o,e[r]);return{c(){t=ie("svg"),n=new rn(!0),this.h()},l(r){t=sn(r,"svg",{xmlns:!0,"data-ds-icon":!0,viewBox:!0});var s=an(t);n=cn(s,!0),s.forEach(b),this.h()},h(){n.a=null,$e(t,o)},m(r,s){ln(r,t,s),n.m('<!--! Font Awesome Pro 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2024 Fonticons, Inc.--><path d="M64 32C28.7 32 0 60.7 0 96v320c0 35.3 28.7 64 64 64h384c35.3 0 64-28.7 64-64V160c0-35.3-28.7-64-64-64H289.9L247 53.1A71.983 71.983 0 0 0 196.1 32zM48 96c0-8.8 7.2-16 16-16h132.1c6.4 0 12.5 2.5 17 7l45.3 45.3c7.5 7.5 17.7 11.7 28.3 11.7H448c8.8 0 16 7.2 16 16v256c0 8.8-7.2 16-16 16H64c-8.8 0-16-7.2-16-16zm305.2 168.2c6.3-3.6 9.5-11.2 6.8-17.9-1.7-4.3-3.7-8.4-5.9-12.4l-2-3.5c-2.4-4-5.1-7.9-7.9-11.5-4.5-5.7-12.6-6.8-18.9-3.1l-1.2.7c-8 4.6-17.9 3.5-25.9-1.2s-14.1-12.7-14.1-21.9V192c0-7.3-4.9-13.8-12.2-14.8-5.2-.7-10.5-1.1-15.8-1.1s-10.7.4-15.8 1.1c-7.2 1-12.2 7.5-12.2 14.8v1.4c0 9.3-6.1 17.3-14.1 21.9s-17.9 5.8-25.9 1.2l-1.2-.7c-6.3-3.6-14.4-2.6-18.9 3.1-2.9 3.7-5.5 7.5-8 11.5l-2 3.4c-2.2 4-4.2 8.2-5.9 12.5-2.7 6.8.4 14.3 6.8 17.9l1.2.7c8 4.6 12 13.8 12 23.1s-4 18.4-12 23.1l-1.2.7c-6.3 3.6-9.5 11.2-6.8 17.9 1.7 4.3 3.7 8.4 5.9 12.4l2.1 3.6c2.4 4 5 7.8 7.9 11.5 4.5 5.7 12.6 6.8 18.9 3.1l1.2-.7c8-4.6 17.9-3.5 25.9 1.2s14.1 12.7 14.1 21.9v1.4c0 7.3 4.9 13.8 12.2 14.8 5.2.7 10.5 1.1 15.8 1.1s10.7-.4 15.8-1.1c7.2-1 12.2-7.5 12.2-14.8v-1.4c0-9.3 6.1-17.3 14.1-21.9s17.9-5.8 25.9-1.2l1.2.7c6.3 3.6 14.4 2.6 18.9-3.1 2.9-3.6 5.5-7.5 7.9-11.4l2.1-3.6c2.2-4 4.2-8.1 5.9-12.4 2.7-6.8-.4-14.3-6.8-17.9l-1.2-.7c-8-4.6-12-13.8-12-23.1s4-18.5 12-23.1l1.2-.7zM221 288a35 35 0 1 1 70 0 35 35 0 1 1-70 0"/>',t)},p(r,[s]){$e(t,o=Se(e,[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 512 512"},1&s&&r[0]]))},i:P,o:P,d(r){r&&b(t)}}}function lh(i,t,n){return i.$$set=e=>{n(0,t=kt(kt({},t),le(e)))},[t=le(t)]}class uh extends ut{constructor(t){super(),dt(this,t,lh,ch,ct,{})}}function dh(i){let t,n;return t=new Us({}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function $h(i){let t,n;return t=new rh({}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function fh(i){let t,n;return t=new uh({}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function mh(i){let t,n;return t=new ah({}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function ph(i){let t,n;return t=new V$({}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function gh(i){let t,n,e,o;const r=[ph,mh,fh,$h,dh],s=[];function c(a,l){return a[0]==="file"?0:a[0]==="folder-opened"?1:a[0]==="root-folder"?2:a[0]==="book"?3:a[0]==="rule"?4:-1}return~(t=c(i))&&(n=s[t]=r[t](i)),{c(){n&&n.c(),e=mt()},m(a,l){~t&&s[t].m(a,l),x(a,e,l),o=!0},p(a,[l]){let u=t;t=c(a),t!==u&&(n&&(j(),$(s[u],1,1,()=>{s[u]=null}),q()),~t?(n=s[t],n||(n=s[t]=r[t](a),n.c()),d(n,1),n.m(e.parentNode,e)):n=null)},i(a){o||(d(n),o=!0)},o(a){$(n),o=!1},d(a){a&&b(e),~t&&s[t].d(a)}}}function hh(i,t,n){let{icon:e}=t;return i.$$set=o=>{"icon"in o&&n(0,e=o.icon)},[e]}class vh extends ut{constructor(t){super(),dt(this,t,hh,gh,ct,{icon:0})}}function Li(i){switch(i){case gi.DEFAULT:return Ba;case gi.PROTOTYPER:return Gp;case gi.BRAINSTORM:return Vp;case gi.REVIEWER:return Wp;default:return Ba}}function wh(i){let t,n=i[0].label+"";return{c(){t=G(n)},m(e,o){x(e,t,o)},p(e,o){1&o&&n!==(n=e[0].label+"")&&_t(t,n)},i:P,o:P,d(e){e&&b(t)}}}function yh(i){let t,n,e,o;return t=new Us({}),e=new _n({props:{filepath:`${ms}/${ps}/${i[0].rule.path}`}}),{c(){v(t.$$.fragment),n=U(),v(e.$$.fragment)},m(r,s){w(t,r,s),x(r,n,s),w(e,r,s),o=!0},p(r,s){const c={};1&s&&(c.filepath=`${ms}/${ps}/${r[0].rule.path}`),e.$set(c)},i(r){o||(d(t.$$.fragment,r),d(e.$$.fragment,r),o=!0)},o(r){$(t.$$.fragment,r),$(e.$$.fragment,r),o=!1},d(r){r&&b(n),y(t,r),y(e,r)}}}function bh(i){let t,n,e,o,r,s,c,a;return n=new Yp({props:{heightPx:32,floatHeight:4,animationDuration:2.25,$$slots:{default:[Th]},$$scope:{ctx:i}}}),r=new Gt({props:{size:2,weight:"medium",$$slots:{default:[Eh]},$$scope:{ctx:i}}}),c=new Gt({props:{size:1,$$slots:{default:[Ih]},$$scope:{ctx:i}}}),{c(){t=L("div"),v(n.$$.fragment),e=U(),o=L("div"),v(r.$$.fragment),s=U(),v(c.$$.fragment),A(t,"class","c-mention-hover-contents__personality-icon svelte-11069rs"),A(o,"class","c-mention-hover-contents__personality svelte-11069rs")},m(l,u){x(l,t,u),w(n,t,null),x(l,e,u),x(l,o,u),w(r,o,null),O(o,s),w(c,o,null),a=!0},p(l,u){const f={};3&u&&(f.$$scope={dirty:u,ctx:l}),n.$set(f);const m={};3&u&&(m.$$scope={dirty:u,ctx:l}),r.$set(m);const p={};3&u&&(p.$$scope={dirty:u,ctx:l}),c.$set(p)},i(l){a||(d(n.$$.fragment,l),d(r.$$.fragment,l),d(c.$$.fragment,l),a=!0)},o(l){$(n.$$.fragment,l),$(r.$$.fragment,l),$(c.$$.fragment,l),a=!1},d(l){l&&(b(t),b(e),b(o)),y(n),y(r),y(c)}}}function xh(i){var r,s;let t,n,e,o;return t=new gf({}),e=new _n({props:{filepath:`${i[0].selection.pathName}:L${(r=i[0].selection.fullRange)==null?void 0:r.startLineNumber}-${(s=i[0].selection.fullRange)==null?void 0:s.endLineNumber}`}}),{c(){v(t.$$.fragment),n=U(),v(e.$$.fragment)},m(c,a){w(t,c,a),x(c,n,a),w(e,c,a),o=!0},p(c,a){var u,f;const l={};1&a&&(l.filepath=`${c[0].selection.pathName}:L${(u=c[0].selection.fullRange)==null?void 0:u.startLineNumber}-${(f=c[0].selection.fullRange)==null?void 0:f.endLineNumber}`),e.$set(l)},i(c){o||(d(t.$$.fragment,c),d(e.$$.fragment,c),o=!0)},o(c){$(t.$$.fragment,c),$(e.$$.fragment,c),o=!1},d(c){c&&b(n),y(t,c),y(e,c)}}}function _h(i){var o;let t,n,e=(i[0].userGuidelines.overLimit||((o=i[0].rulesAndGuidelinesState)==null?void 0:o.overLimit))&&mc(i);return{c(){e&&e.c(),t=mt()},m(r,s){e&&e.m(r,s),x(r,t,s),n=!0},p(r,s){var c;r[0].userGuidelines.overLimit||(c=r[0].rulesAndGuidelinesState)!=null&&c.overLimit?e?(e.p(r,s),1&s&&d(e,1)):(e=mc(r),e.c(),d(e,1),e.m(t.parentNode,t)):e&&(j(),$(e,1,1,()=>{e=null}),q())},i(r){n||(d(e),n=!0)},o(r){$(e),n=!1},d(r){r&&b(t),e&&e.d(r)}}}function Ch(i){let t,n,e,o,r,s,c,a;return e=new Kp({}),r=new _n({props:{class:"c-source-folder-item",filepath:i[0].sourceFolder.folderRoot}}),c=new Xp({props:{class:"guidelines-filespan",sourceFolder:i[0].sourceFolder}}),{c(){t=L("div"),n=L("div"),v(e.$$.fragment),o=U(),v(r.$$.fragment),s=U(),v(c.$$.fragment),A(n,"class","l-source-folder-name svelte-11069rs"),A(t,"class","l-mention-hover-contents__source-folder")},m(l,u){x(l,t,u),O(t,n),w(e,n,null),O(n,o),w(r,n,null),O(t,s),w(c,t,null),a=!0},p(l,u){const f={};1&u&&(f.filepath=l[0].sourceFolder.folderRoot),r.$set(f);const m={};1&u&&(m.sourceFolder=l[0].sourceFolder),c.$set(m)},i(l){a||(d(e.$$.fragment,l),d(r.$$.fragment,l),d(c.$$.fragment,l),a=!0)},o(l){$(e.$$.fragment,l),$(r.$$.fragment,l),$(c.$$.fragment,l),a=!1},d(l){l&&b(t),y(e),y(r),y(c)}}}function Ah(i){let t,n,e,o;return t=new Jp({}),e=new _n({props:{filepath:i[0].externalSource.name}}),{c(){v(t.$$.fragment),n=U(),v(e.$$.fragment)},m(r,s){w(t,r,s),x(r,n,s),w(e,r,s),o=!0},p(r,s){const c={};1&s&&(c.filepath=r[0].externalSource.name),e.$set(c)},i(r){o||(d(t.$$.fragment,r),d(e.$$.fragment,r),o=!0)},o(r){$(t.$$.fragment,r),$(e.$$.fragment,r),o=!1},d(r){r&&b(n),y(t,r),y(e,r)}}}function Mh(i){let t,n,e,o;return t=new yf({}),e=new _n({props:{filepath:i[0].folder.pathName}}),{c(){v(t.$$.fragment),n=U(),v(e.$$.fragment)},m(r,s){w(t,r,s),x(r,n,s),w(e,r,s),o=!0},p(r,s){const c={};1&s&&(c.filepath=r[0].folder.pathName),e.$set(c)},i(r){o||(d(t.$$.fragment,r),d(e.$$.fragment,r),o=!0)},o(r){$(t.$$.fragment,r),$(e.$$.fragment,r),o=!1},d(r){r&&b(n),y(t,r),y(e,r)}}}function kh(i){let t,n,e,o;return t=new Hs({}),e=new _n({props:{filepath:i[0].recentFile.pathName}}),{c(){v(t.$$.fragment),n=U(),v(e.$$.fragment)},m(r,s){w(t,r,s),x(r,n,s),w(e,r,s),o=!0},p(r,s){const c={};1&s&&(c.filepath=r[0].recentFile.pathName),e.$set(c)},i(r){o||(d(t.$$.fragment,r),d(e.$$.fragment,r),o=!0)},o(r){$(t.$$.fragment,r),$(e.$$.fragment,r),o=!1},d(r){r&&b(n),y(t,r),y(e,r)}}}function Sh(i){let t,n,e,o;return t=new Hs({}),e=new _n({props:{filepath:i[0].file.pathName}}),{c(){v(t.$$.fragment),n=U(),v(e.$$.fragment)},m(r,s){w(t,r,s),x(r,n,s),w(e,r,s),o=!0},p(r,s){const c={};1&s&&(c.filepath=r[0].file.pathName),e.$set(c)},i(r){o||(d(t.$$.fragment,r),d(e.$$.fragment,r),o=!0)},o(r){$(t.$$.fragment,r),$(e.$$.fragment,r),o=!1},d(r){r&&b(n),y(t,r),y(e,r)}}}function Th(i){let t,n,e;var o=Li(i[0].personality.type);return o&&(t=on(o,{})),{c(){t&&v(t.$$.fragment),n=mt()},m(r,s){t&&w(t,r,s),x(r,n,s),e=!0},p(r,s){if(1&s&&o!==(o=Li(r[0].personality.type))){if(t){j();const c=t;$(c.$$.fragment,1,0,()=>{y(c,1)}),q()}o?(t=on(o,{}),v(t.$$.fragment),d(t.$$.fragment,1),w(t,n.parentNode,n)):t=null}},i(r){e||(t&&d(t.$$.fragment,r),e=!0)},o(r){t&&$(t.$$.fragment,r),e=!1},d(r){r&&b(n),t&&y(t,r)}}}function Eh(i){let t,n=i[0].label+"";return{c(){t=G(n)},m(e,o){x(e,t,o)},p(e,o){1&o&&n!==(n=e[0].label+"")&&_t(t,n)},d(e){e&&b(t)}}}function Ih(i){let t,n=i[0].personality.description+"";return{c(){t=G(n)},m(e,o){x(e,t,o)},p(e,o){1&o&&n!==(n=e[0].personality.description+"")&&_t(t,n)},d(e){e&&b(t)}}}function mc(i){let t,n,e,o;const r=[Rh,Lh],s=[];function c(a,l){var u;return(u=a[0].rulesAndGuidelinesState)!=null&&u.overLimit?0:a[0].userGuidelines.overLimit?1:-1}return~(t=c(i))&&(n=s[t]=r[t](i)),{c(){n&&n.c(),e=mt()},m(a,l){~t&&s[t].m(a,l),x(a,e,l),o=!0},p(a,l){let u=t;t=c(a),t===u?~t&&s[t].p(a,l):(n&&(j(),$(s[u],1,1,()=>{s[u]=null}),q()),~t?(n=s[t],n?n.p(a,l):(n=s[t]=r[t](a),n.c()),d(n,1),n.m(e.parentNode,e)):n=null)},i(a){o||(d(n),o=!0)},o(a){$(n),o=!1},d(a){a&&b(e),~t&&s[t].d(a)}}}function Lh(i){let t,n;return t=new Gt({props:{size:1,$$slots:{default:[Dh]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};3&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function Rh(i){let t,n;return t=new Gt({props:{size:1,$$slots:{default:[Nh]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};3&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function Dh(i){let t,n=`Guidelines exceeded length limit of ${i[0].userGuidelines.lengthLimit} characters`;return{c(){t=G(n)},m(e,o){x(e,t,o)},p(e,o){1&o&&n!==(n=`Guidelines exceeded length limit of ${e[0].userGuidelines.lengthLimit} characters`)&&_t(t,n)},d(e){e&&b(t)}}}function Nh(i){let t,n=`Rules and workspace guidelines (${i[0].rulesAndGuidelinesState.totalCharacterCount} chars)
          exceeded limit of ${i[0].rulesAndGuidelinesState.lengthLimit} characters, remove some rules
          or reduce the length of your guidelines.`;return{c(){t=G(n)},m(e,o){x(e,t,o)},p(e,o){1&o&&n!==(n=`Rules and workspace guidelines (${e[0].rulesAndGuidelinesState.totalCharacterCount} chars)
          exceeded limit of ${e[0].rulesAndGuidelinesState.lengthLimit} characters, remove some rules
          or reduce the length of your guidelines.`)&&_t(t,n)},d(e){e&&b(t)}}}function Ph(i){let t,n,e,o,r,s,c,a,l,u,f,m,p;const _=[Sh,kh,Mh,Ah,Ch,_h,xh,bh,yh,wh],M=[];function C(T,E){return 1&E&&(n=null),1&E&&(e=null),1&E&&(o=null),1&E&&(r=null),1&E&&(s=null),1&E&&(c=null),1&E&&(a=null),1&E&&(l=null),1&E&&(u=null),n==null&&(n=!(!T[0]||!Is(T[0]))),n?0:(e==null&&(e=!(!T[0]||!Ls(T[0]))),e?1:(o==null&&(o=!(!T[0]||!Rs(T[0]))),o?2:(r==null&&(r=!(!T[0]||!Ds(T[0]))),r?3:(s==null&&(s=!(!T[0]||!Wi(T[0]))),s?4:(c==null&&(c=!!(T[0]&&Ns(T[0])&&T[0].userGuidelines.enabled)),c?5:(a==null&&(a=!(!T[0]||!Ps(T[0]))),a?6:(l==null&&(l=!(!T[0]||!rf(T[0]))),l?7:(u==null&&(u=!(!T[0]||!Fs(T[0]))),u?8:9))))))))}return f=C(i,-1),m=M[f]=_[f](i),{c(){t=L("div"),m.c(),A(t,"class","c-mention-hover-contents svelte-11069rs")},m(T,E){x(T,t,E),M[f].m(t,null),p=!0},p(T,[E]){let R=f;f=C(T,E),f===R?M[f].p(T,E):(j(),$(M[R],1,1,()=>{M[R]=null}),q(),m=M[f],m?m.p(T,E):(m=M[f]=_[f](T),m.c()),d(m,1),m.m(t,null))},i(T){p||(d(m),p=!0)},o(T){$(m),p=!1},d(T){T&&b(t),M[f].d()}}}function Fh(i,t,n){let{option:e}=t;return i.$$set=o=>{"option"in o&&n(0,e=o.option)},[e]}class Kr extends ut{constructor(t){super(),dt(this,t,Fh,Ph,ct,{option:0})}}function Oh(i){let t,n,e=[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 384 512"},i[0]],o={};for(let r=0;r<e.length;r+=1)o=kt(o,e[r]);return{c(){t=ie("svg"),n=new rn(!0),this.h()},l(r){t=sn(r,"svg",{xmlns:!0,"data-ds-icon":!0,viewBox:!0});var s=an(t);n=cn(s,!0),s.forEach(b),this.h()},h(){n.a=null,$e(t,o)},m(r,s){ln(r,t,s),n.m('<!--! Font Awesome Pro 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2024 Fonticons, Inc.--><path d="M345 137c9.4-9.4 9.4-24.6 0-33.9s-24.6-9.4-33.9 0l-119 119L73 103c-9.4-9.4-24.6-9.4-33.9 0s-9.4 24.6 0 33.9l119 119L39 375c-9.4 9.4-9.4 24.6 0 33.9s24.6 9.4 33.9 0l119-119L311 409c9.4 9.4 24.6 9.4 33.9 0s9.4-24.6 0-33.9l-119-119z"/>',t)},p(r,[s]){$e(t,o=Se(e,[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 384 512"},1&s&&r[0]]))},i:P,o:P,d(r){r&&b(t)}}}function zh(i,t,n){return i.$$set=e=>{n(0,t=kt(kt({},t),le(e)))},[t=le(t)]}class rr extends ut{constructor(t){super(),dt(this,t,zh,Oh,ct,{})}}const Bh=i=>({}),pc=i=>({slot:"chaser"}),Uh=i=>({}),gc=i=>({}),Hh=i=>({}),hc=i=>({slot:"leftButtons"}),jh=i=>({}),vc=i=>({});function wc(i){let t,n;return t=new i1({props:{class:"c-pulse-chip-warning-icon"}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function qh(i){let t,n,e;const o=i[4].default,r=Yt(o,i,i[6],null);let s=i[3]&&wc();return{c(){t=L("div"),r&&r.c(),n=U(),s&&s.c(),A(t,"class","c-context-badge__content svelte-gkpz0s")},m(c,a){x(c,t,a),r&&r.m(t,null),O(t,n),s&&s.m(t,null),e=!0},p(c,a){r&&r.p&&(!e||64&a)&&Kt(r,o,c,c[6],e?Jt(o,c[6],a,null):Xt(c[6]),null),c[3]?s?8&a&&d(s,1):(s=wc(),s.c(),d(s,1),s.m(t,null)):s&&(j(),$(s,1,1,()=>{s=null}),q())},i(c){e||(d(r,c),d(s),e=!0)},o(c){$(r,c),$(s),e=!1},d(c){c&&b(t),r&&r.d(c),s&&s.d()}}}function Wh(i){let t;const n=i[4].chaser,e=Yt(n,i,i[6],pc);return{c(){e&&e.c()},m(o,r){e&&e.m(o,r),t=!0},p(o,r){e&&e.p&&(!t||64&r)&&Kt(e,n,o,o[6],t?Jt(n,o[6],r,Bh):Xt(o[6]),pc)},i(o){t||(d(e,o),t=!0)},o(o){$(e,o),t=!1},d(o){e&&e.d(o)}}}function Vh(i){let t;const n=i[4].leftIcon,e=Yt(n,i,i[6],gc),o=e||function(r){let s,c;return s=new V$({}),{c(){v(s.$$.fragment)},m(a,l){w(s,a,l),c=!0},i(a){c||(d(s.$$.fragment,a),c=!0)},o(a){$(s.$$.fragment,a),c=!1},d(a){y(s,a)}}}();return{c(){o&&o.c()},m(r,s){o&&o.m(r,s),t=!0},p(r,s){e&&e.p&&(!t||64&s)&&Kt(e,n,r,r[6],t?Jt(n,r[6],s,Uh):Xt(r[6]),gc)},i(r){t||(d(o,r),t=!0)},o(r){$(o,r),t=!1},d(r){o&&o.d(r)}}}function Gh(i){let t;const n=i[4].leftButtons,e=Yt(n,i,i[6],hc),o=e||function(r){let s,c,a;return c=new Ao.IconButton({props:{disabled:!0,$$slots:{default:[Vh]},$$scope:{ctx:r}}}),{c(){s=L("div"),v(c.$$.fragment),A(s,"class","c-context-badge__left-icon svelte-gkpz0s")},m(l,u){x(l,s,u),w(c,s,null),a=!0},p(l,u){const f={};64&u&&(f.$$scope={dirty:u,ctx:l}),c.$set(f)},i(l){a||(d(c.$$.fragment,l),a=!0)},o(l){$(c.$$.fragment,l),a=!1},d(l){l&&b(s),y(c)}}}(i);return{c(){o&&o.c()},m(r,s){o&&o.m(r,s),t=!0},p(r,s){e?e.p&&(!t||64&s)&&Kt(e,n,r,r[6],t?Jt(n,r[6],s,Hh):Xt(r[6]),hc):o&&o.p&&(!t||64&s)&&o.p(r,t?s:-1)},i(r){t||(d(o,r),t=!0)},o(r){$(o,r),t=!1},d(r){o&&o.d(r)}}}function yc(i){let t,n;return t=new Ao.IconButton({props:{class:"c-context-badge__remove-btn",title:i[2].title,size:i[1],variant:"ghost",color:"neutral",$$slots:{default:[Yh]},$$scope:{ctx:i}}}),t.$on("click",function(){Ne(i[2].onRemove)&&i[2].onRemove.apply(this,arguments)}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){i=e;const r={};4&o&&(r.title=i[2].title),2&o&&(r.size=i[1]),64&o&&(r.$$scope={dirty:o,ctx:i}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function Yh(i){let t,n;return t=new rr({}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function Kh(i){let t,n,e;const o=i[4].rightButtons,r=Yt(o,i,i[6],vc);let s=i[2]&&yc(i);return{c(){r&&r.c(),t=U(),s&&s.c(),n=mt()},m(c,a){r&&r.m(c,a),x(c,t,a),s&&s.m(c,a),x(c,n,a),e=!0},p(c,a){r&&r.p&&(!e||64&a)&&Kt(r,o,c,c[6],e?Jt(o,c[6],a,jh):Xt(c[6]),vc),c[2]?s?(s.p(c,a),4&a&&d(s,1)):(s=yc(c),s.c(),d(s,1),s.m(n.parentNode,n)):s&&(j(),$(s,1,1,()=>{s=null}),q())},i(c){e||(d(r,c),d(s),e=!0)},o(c){$(r,c),$(s),e=!1},d(c){c&&(b(t),b(n)),r&&r.d(c),s&&s.d(c)}}}function Xh(i){let t,n,e;return n=new Ao.Root({props:{color:i[0],size:i[1],$$slots:{rightButtons:[Kh],leftButtons:[Gh],chaser:[Wh],default:[qh]},$$scope:{ctx:i}}}),n.$on("click",i[5]),{c(){t=L("div"),v(n.$$.fragment),A(t,"class","c-context-badge svelte-gkpz0s")},m(o,r){x(o,t,r),w(n,t,null),e=!0},p(o,[r]){const s={};1&r&&(s.color=o[0]),2&r&&(s.size=o[1]),78&r&&(s.$$scope={dirty:r,ctx:o}),n.$set(s)},i(o){e||(d(n.$$.fragment,o),e=!0)},o(o){$(n.$$.fragment,o),e=!1},d(o){o&&b(t),y(n)}}}function Jh(i,t,n){let{$$slots:e={},$$scope:o}=t,{color:r="neutral"}=t,{size:s=1}=t,{removeBtn:c}=t,{showWarning:a}=t;return i.$$set=l=>{"color"in l&&n(0,r=l.color),"size"in l&&n(1,s=l.size),"removeBtn"in l&&n(2,c=l.removeBtn),"showWarning"in l&&n(3,a=l.showWarning),"$$scope"in l&&n(6,o=l.$$scope)},[r,s,c,a,e,function(l){vn.call(this,i,l)},o]}class Uo extends ut{constructor(t){super(),dt(this,t,Jh,Xh,ct,{color:0,size:1,removeBtn:2,showWarning:3})}}function Zh(i){let t,n;return{c(){t=ie("svg"),n=ie("path"),A(n,"fill-rule","evenodd"),A(n,"clip-rule","evenodd"),A(n,"d","M7.07095 0.650238C6.67391 0.650238 6.32977 0.925096 6.24198 1.31231L6.0039 2.36247C5.6249 2.47269 5.26335 2.62363 4.92436 2.81013L4.01335 2.23585C3.67748 2.02413 3.23978 2.07312 2.95903 2.35386L2.35294 2.95996C2.0722 3.2407 2.0232 3.6784 2.23493 4.01427L2.80942 4.92561C2.62307 5.2645 2.47227 5.62594 2.36216 6.00481L1.31209 6.24287C0.924883 6.33065 0.650024 6.6748 0.650024 7.07183V7.92897C0.650024 8.32601 0.924883 8.67015 1.31209 8.75794L2.36228 8.99603C2.47246 9.375 2.62335 9.73652 2.80979 10.0755L2.2354 10.9867C2.02367 11.3225 2.07267 11.7602 2.35341 12.041L2.95951 12.6471C3.24025 12.9278 3.67795 12.9768 4.01382 12.7651L4.92506 12.1907C5.26384 12.377 5.62516 12.5278 6.0039 12.6379L6.24198 13.6881C6.32977 14.0753 6.67391 14.3502 7.07095 14.3502H7.92809C8.32512 14.3502 8.66927 14.0753 8.75705 13.6881L8.99505 12.6383C9.37411 12.5282 9.73573 12.3773 10.0748 12.1909L10.986 12.7653C11.3218 12.977 11.7595 12.928 12.0403 12.6473L12.6464 12.0412C12.9271 11.7604 12.9761 11.3227 12.7644 10.9869L12.1902 10.076C12.3768 9.73688 12.5278 9.37515 12.638 8.99596L13.6879 8.75794C14.0751 8.67015 14.35 8.32601 14.35 7.92897V7.07183C14.35 6.6748 14.0751 6.33065 13.6879 6.24287L12.6381 6.00488C12.528 5.62578 12.3771 5.26414 12.1906 4.92507L12.7648 4.01407C12.9766 3.6782 12.9276 3.2405 12.6468 2.95975L12.0407 2.35366C11.76 2.07292 11.3223 2.02392 10.9864 2.23565L10.0755 2.80989C9.73622 2.62328 9.37437 2.47229 8.99505 2.36209L8.75705 1.31231C8.66927 0.925096 8.32512 0.650238 7.92809 0.650238H7.07095ZM4.92053 3.81251C5.44724 3.44339 6.05665 3.18424 6.71543 3.06839L7.07095 1.50024H7.92809L8.28355 3.06816C8.94267 3.18387 9.5524 3.44302 10.0794 3.81224L11.4397 2.9547L12.0458 3.56079L11.1882 4.92117C11.5573 5.44798 11.8164 6.0575 11.9321 6.71638L13.5 7.07183V7.92897L11.932 8.28444C11.8162 8.94342 11.557 9.55301 11.1878 10.0798L12.0453 11.4402L11.4392 12.0462L10.0787 11.1886C9.55192 11.5576 8.94241 11.8166 8.28355 11.9323L7.92809 13.5002H7.07095L6.71543 11.932C6.0569 11.8162 5.44772 11.5572 4.92116 11.1883L3.56055 12.046L2.95445 11.4399L3.81213 10.0794C3.4431 9.55266 3.18403 8.94326 3.06825 8.2845L1.50002 7.92897V7.07183L3.06818 6.71632C3.18388 6.05765 3.44283 5.44833 3.81171 4.92165L2.95398 3.561L3.56008 2.95491L4.92053 3.81251ZM9.02496 7.50008C9.02496 8.34226 8.34223 9.02499 7.50005 9.02499C6.65786 9.02499 5.97513 8.34226 5.97513 7.50008C5.97513 6.65789 6.65786 5.97516 7.50005 5.97516C8.34223 5.97516 9.02496 6.65789 9.02496 7.50008ZM9.92496 7.50008C9.92496 8.83932 8.83929 9.92499 7.50005 9.92499C6.1608 9.92499 5.07513 8.83932 5.07513 7.50008C5.07513 6.16084 6.1608 5.07516 7.50005 5.07516C8.83929 5.07516 9.92496 6.16084 9.92496 7.50008Z"),A(n,"fill","currentColor"),A(t,"width","15"),A(t,"height","15"),A(t,"viewBox","0 0 15 15"),A(t,"fill","none"),A(t,"xmlns","http://www.w3.org/2000/svg")},m(e,o){x(e,t,o),O(t,n)},p:P,i:P,o:P,d(e){e&&b(t)}}}class Qh extends ut{constructor(t){super(),dt(this,t,null,Zh,ct,{})}}function bc(i,t,n){const e=i.slice();return e[1]=t[n],e}function t2(i){let t;return{c(){t=G("Repos")},m(n,e){x(n,t,e)},d(n){n&&b(t)}}}function e2(i){let t,n=i[1].sourceFolderGroup.length+"";return{c(){t=G(n)},m(e,o){x(e,t,o)},p(e,o){2&o&&n!==(n=e[1].sourceFolderGroup.length+"")&&_t(t,n)},d(e){e&&b(t)}}}function n2(i){let t,n,e;n=new Gt({props:{size:1,$$slots:{default:[e2]},$$scope:{ctx:i}}});let o=[Fm("accent"),{slot:"leftIcon"},{class:"c-multi-repo-chip__count"}],r={};for(let s=0;s<o.length;s+=1)r=kt(r,o[s]);return{c(){t=L("div"),v(n.$$.fragment),Pm(t,r),Mt(t,"svelte-sqp0vc",!0)},m(s,c){x(s,t,c),w(n,t,null),e=!0},p(s,c){const a={};4098&c&&(a.$$scope={dirty:c,ctx:s}),n.$set(a),Mt(t,"svelte-sqp0vc",!0)},i(s){e||(d(n.$$.fragment,s),e=!0)},o(s){$(n.$$.fragment,s),e=!1},d(s){s&&b(t),y(n)}}}function o2(i){let t,n;return t=new or({}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function r2(i){let t,n;return t=new Ao.IconButton({props:{title:"Open menu",variant:"ghost",color:"neutral",size:1,$$slots:{default:[o2]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};4096&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function i2(i){let t;return{c(){t=G("Repos")},m(n,e){x(n,t,e)},d(n){n&&b(t)}}}function s2(i){let t,n,e=i[1].name+"";return{c(){t=G(e),n=U()},m(o,r){x(o,t,r),x(o,n,r)},p(o,r){4&r&&e!==(e=o[1].name+"")&&_t(t,e)},d(o){o&&(b(t),b(n))}}}function xc(i){let t,n;return t=new Pt({props:{content:"Edit repo instructions",$$slots:{default:[c2]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};4100&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function a2(i){let t,n;return t=new Qh({}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function c2(i){let t,n;const e=[i[5]];let o={$$slots:{default:[a2]},$$scope:{ctx:i}};for(let r=0;r<e.length;r+=1)o=kt(o,e[r]);return t=new fe({props:o}),t.$on("click",function(){Ne(i[1].onEditGuideline)&&i[1].onEditGuideline.apply(this,arguments)}),{c(){v(t.$$.fragment)},m(r,s){w(t,r,s),n=!0},p(r,s){i=r;const c=32&s?Se(e,[fo(i[5])]):{};4096&s&&(c.$$scope={dirty:s,ctx:i}),t.$set(c)},i(r){n||(d(t.$$.fragment,r),n=!0)},o(r){$(t.$$.fragment,r),n=!1},d(r){y(t,r)}}}function l2(i){let t,n;return t=new xr({}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function u2(i){let t,n;const e=[i[5]];let o={$$slots:{default:[l2]},$$scope:{ctx:i}};for(let r=0;r<e.length;r+=1)o=kt(o,e[r]);return t=new fe({props:o}),t.$on("click",function(){Ne(i[1].onRemove)&&i[1].onRemove.apply(this,arguments)}),{c(){v(t.$$.fragment)},m(r,s){w(t,r,s),n=!0},p(r,s){i=r;const c=32&s?Se(e,[fo(i[5])]):{};4096&s&&(c.$$scope={dirty:s,ctx:i}),t.$set(c)},i(r){n||(d(t.$$.fragment,r),n=!0)},o(r){$(t.$$.fragment,r),n=!1},d(r){y(t,r)}}}function d2(i){let t,n,e,o,r,s=i[1].onEditGuideline&&xc(i);return e=new Pt({props:{content:"Remove repo from context",$$slots:{default:[u2]},$$scope:{ctx:i}}}),{c(){t=L("div"),s&&s.c(),n=U(),v(e.$$.fragment),o=U(),A(t,"class","c-multi-repo-chip__dropdown-item__actions svelte-sqp0vc"),A(t,"slot","iconRight"),Mt(t,"c-multi-repo-chip__dropdown-item__guideline-space",i[3]&&!i[1].onEditGuideline)},m(c,a){x(c,t,a),s&&s.m(t,null),O(t,n),w(e,t,null),O(t,o),r=!0},p(c,a){c[1].onEditGuideline?s?(s.p(c,a),4&a&&d(s,1)):(s=xc(c),s.c(),d(s,1),s.m(t,n)):s&&(j(),$(s,1,1,()=>{s=null}),q());const l={};4100&a&&(l.$$scope={dirty:a,ctx:c}),e.$set(l),(!r||12&a)&&Mt(t,"c-multi-repo-chip__dropdown-item__guideline-space",c[3]&&!c[1].onEditGuideline)},i(c){r||(d(s),d(e.$$.fragment,c),r=!0)},o(c){$(s),$(e.$$.fragment,c),r=!1},d(c){c&&b(t),s&&s.d(),y(e)}}}function _c(i){let t,n;const e=[i[1],{class:"c-multi-repo-chip__dropdown-item"},{highlight:!1},{disabled:!0}];let o={$$slots:{iconRight:[d2],default:[s2]},$$scope:{ctx:i}};for(let r=0;r<e.length;r+=1)o=kt(o,e[r]);return t=new wt.Item({props:o}),{c(){v(t.$$.fragment)},m(r,s){w(t,r,s),n=!0},p(r,s){const c=4&s?Se(e,[fo(r[1]),e[1],e[2],e[3]]):{};4108&s&&(c.$$scope={dirty:s,ctx:r}),t.$set(c)},i(r){n||(d(t.$$.fragment,r),n=!0)},o(r){$(t.$$.fragment,r),n=!1},d(r){y(t,r)}}}function $2(i){let t,n,e,o;t=new wt.Label({props:{$$slots:{default:[i2]},$$scope:{ctx:i}}});let r=se(i[2]),s=[];for(let a=0;a<r.length;a+=1)s[a]=_c(bc(i,r,a));const c=a=>$(s[a],1,1,()=>{s[a]=null});return{c(){v(t.$$.fragment),n=U();for(let a=0;a<s.length;a+=1)s[a].c();e=mt()},m(a,l){w(t,a,l),x(a,n,l);for(let u=0;u<s.length;u+=1)s[u]&&s[u].m(a,l);x(a,e,l),o=!0},p(a,l){const u={};if(4096&l&&(u.$$scope={dirty:l,ctx:a}),t.$set(u),44&l){let f;for(r=se(a[2]),f=0;f<r.length;f+=1){const m=bc(a,r,f);s[f]?(s[f].p(m,l),d(s[f],1)):(s[f]=_c(m),s[f].c(),d(s[f],1),s[f].m(e.parentNode,e))}for(j(),f=r.length;f<s.length;f+=1)c(f);q()}},i(a){if(!o){d(t.$$.fragment,a);for(let l=0;l<r.length;l+=1)d(s[l]);o=!0}},o(a){$(t.$$.fragment,a),s=s.filter(Boolean);for(let l=0;l<s.length;l+=1)$(s[l]);o=!1},d(a){a&&(b(n),b(e)),y(t,a),pn(s,a)}}}function f2(i){let t,n,e,o;return t=new wt.Trigger({props:{$$slots:{default:[r2]},$$scope:{ctx:i}}}),e=new wt.Content({props:{$$slots:{default:[$2]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment),n=U(),v(e.$$.fragment)},m(r,s){w(t,r,s),x(r,n,s),w(e,r,s),o=!0},p(r,s){const c={};4096&s&&(c.$$scope={dirty:s,ctx:r}),t.$set(c);const a={};4108&s&&(a.$$scope={dirty:s,ctx:r}),e.$set(a)},i(r){o||(d(t.$$.fragment,r),d(e.$$.fragment,r),o=!0)},o(r){$(t.$$.fragment,r),$(e.$$.fragment,r),o=!1},d(r){r&&b(n),y(t,r),y(e,r)}}}function m2(i){let t,n;return t=new wt.Root({props:{slot:"rightButtons",$$slots:{default:[f2]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};4108&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function p2(i){let t,n;return t=new Uo({props:{$$slots:{rightButtons:[m2],leftIcon:[n2],default:[t2]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,[o]){const r={};4110&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function g2(i,t,n){let e,o,r,s,c,a=P,l=P,u=()=>(l(),l=ce(m,p=>n(6,c=p)),m);i.$$.on_destroy.push(()=>a()),i.$$.on_destroy.push(()=>l());let{item:f}=t,{chatModel:m}=t;return u(),i.$$set=p=>{"item"in p&&n(1,f=p.item),"chatModel"in p&&u(n(0,m=p.chatModel))},i.$$.update=()=>{64&i.$$.dirty&&(n(4,e=c==null?void 0:c.specialContextInputModel),a(),a=ce(e,p=>n(7,s=p))),2&i.$$.dirty&&n(2,o=f.sourceFolderGroup.map(p=>({filePath:p.sourceFolder.folderRoot,name:ws(p.sourceFolder.folderRoot),onRemove:()=>{return _=p,s==null||s.markInactive(_),void(s==null?void 0:s.unpin(_));var _},onEditGuideline:!!p.sourceFolder.guidelinesEnabled&&(()=>{return _=p.sourceFolder.folderRoot,void(m==null?void 0:m.extensionClient.openGuidelines(_));var _})}))),4&i.$$.dirty&&n(3,r=o.some(p=>p.onEditGuideline))},[m,f,o,r,e,{size:1,variant:"ghost-block",color:"neutral"},c]}class h2 extends ut{constructor(t){super(),dt(this,t,g2,p2,ct,{item:1,chatModel:0})}}function v2(i){let t,n,e,o=(i[0]??"")+"";return{c(){t=L("pre"),n=L("code"),e=G(o),A(t,"class","c-selection-preview__code svelte-mrw7pf")},m(r,s){x(r,t,s),O(t,n),O(n,e)},p(r,s){1&s&&o!==(o=(r[0]??"")+"")&&_t(e,o)},i:P,o:P,d(r){r&&b(t)}}}function w2(i){let t,n,e,o;function r(a){i[5](a)}var s=i[8].default;function c(a,l){let u={text:a[0]??"",options:{automaticLayout:!0,lineNumbers:"off",wrappingIndent:"same",padding:{top:0,bottom:0},wordWrap:"off",contextmenu:!1,wordBasedSuggestions:"off",renderLineHighlight:"none",occurrencesHighlight:"off",selectionHighlight:!1,codeLens:!1,links:!1,hover:{enabled:!1},hideCursorInOverviewRuler:!0,renderWhitespace:"none",renderFinalNewline:"on"}};return a[1]!==void 0&&(u.editorInstance=a[1]),{props:u}}return s&&(t=on(s,c(i)),te.push(()=>Te(t,"editorInstance",r))),{c(){t&&v(t.$$.fragment),e=mt()},m(a,l){t&&w(t,a,l),x(a,e,l),o=!0},p(a,l){if(s!==(s=a[8].default)){if(t){j();const u=t;$(u.$$.fragment,1,0,()=>{y(u,1)}),q()}s?(t=on(s,c(a)),te.push(()=>Te(t,"editorInstance",r)),v(t.$$.fragment),d(t.$$.fragment,1),w(t,e.parentNode,e)):t=null}else if(s){const u={};1&l&&(u.text=a[0]??""),!n&&2&l&&(n=!0,u.editorInstance=a[1],Re(()=>n=!1)),t.$set(u)}},i(a){o||(t&&d(t.$$.fragment,a),o=!0)},o(a){t&&$(t.$$.fragment,a),o=!1},d(a){a&&b(e),t&&y(t,a)}}}function y2(i){let t,n,e,o=(i[0]??"")+"";return{c(){t=L("pre"),n=L("code"),e=G(o),A(t,"class","c-selection-preview__code svelte-mrw7pf")},m(r,s){x(r,t,s),O(t,n),O(n,e)},p(r,s){1&s&&o!==(o=(r[0]??"")+"")&&_t(e,o)},i:P,o:P,d(r){r&&b(t)}}}function b2(i){let t,n,e=i[3]&&function(o){let r,s,c={ctx:o,current:null,token:null,hasCatch:!0,pending:y2,then:w2,catch:v2,value:8,blocks:[,,,]};return vr(o[3],c),{c(){r=mt(),c.block.c()},m(a,l){x(a,r,l),c.block.m(a,c.anchor=l),c.mount=()=>r.parentNode,c.anchor=r,s=!0},p(a,l){Vi(c,o=a,l)},i(a){s||(d(c.block),s=!0)},o(a){for(let l=0;l<3;l+=1){const u=c.blocks[l];$(u)}s=!1},d(a){a&&b(r),c.block.d(a),c.token=null,c=null}}}(i);return{c(){t=L("div"),e&&e.c(),A(t,"class","c-selection-hover-contents svelte-mrw7pf"),A(t,"style",i[2])},m(o,r){x(o,t,r),e&&e.m(t,null),n=!0},p(o,[r]){o[3]&&e.p(o,r),(!n||4&r)&&A(t,"style",o[2])},i(o){n||(d(e),n=!0)},o(o){$(e),n=!1},d(o){o&&b(t),e&&e.d()}}}function x2(i,t,n){let{originalCode:e}=t;const o=Gi(()=>import("./index-oyQWDnzB.js").then(l=>l.d),__vite__mapDeps([0,1,2,3,4]),import.meta.url);let r,s="",c=!1;const a=async(l,u)=>{n(4,c=!0),n(2,s=`
         width: ${l}px;
         height: min(${u}px, 40vh);
    `)};return i.$$set=l=>{"originalCode"in l&&n(0,e=l.originalCode)},i.$$.update=()=>{2&i.$$.dirty&&(r==null||r.onDidContentSizeChange(l=>a(l.contentWidth,l.contentHeight))),18&i.$$.dirty&&r&&!c&&a(r==null?void 0:r.getContentWidth(),r==null?void 0:r.getContentHeight())},[e,r,s,o,c,function(l){r=l,n(1,r)}]}class _2 extends ut{constructor(t){super(),dt(this,t,x2,b2,ct,{originalCode:0})}}function C2(i){let t,n;const e=i[2].default,o=Yt(e,i,i[3],null);return{c(){t=G(`Selection
    `),o&&o.c()},m(r,s){x(r,t,s),o&&o.m(r,s),n=!0},p(r,s){o&&o.p&&(!n||8&s)&&Kt(o,e,r,r[3],n?Jt(e,r[3],s,null):Xt(r[3]),null)},i(r){n||(d(o,r),n=!0)},o(r){$(o,r),n=!1},d(r){r&&b(t),o&&o.d(r)}}}function A2(i){let t,n;return t=new gf({props:{slot:"leftIcon"}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p:P,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function M2(i){let t,n;return t=new Uo({props:{color:"info",removeBtn:{title:"Remove selection from context",onRemove:i[1]},$$slots:{leftIcon:[A2],default:[C2]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};2&o&&(r.removeBtn={title:"Remove selection from context",onRemove:e[1]}),8&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function k2(i){let t,n;return t=new _2({props:{slot:"content",originalCode:i[0]}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};1&o&&(r.originalCode=e[0]),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function S2(i){let t,n;return t=new Pt({props:{maxWidth:"",$$slots:{content:[k2],default:[M2]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,[o]){const r={};11&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function T2(i,t,n){let{$$slots:e={},$$scope:o}=t,{originalCode:r}=t,{onRemove:s}=t;return i.$$set=c=>{"originalCode"in c&&n(0,r=c.originalCode),"onRemove"in c&&n(1,s=c.onRemove),"$$scope"in c&&n(3,o=c.$$scope)},[r,s,e,o]}class E2 extends ut{constructor(t){super(),dt(this,t,T2,S2,ct,{originalCode:0,onRemove:1})}}function Cc(i){let t,n,e,o;const r=[L2,I2],s=[];function c(a,l){return a[1]?0:1}return t=c(i),n=s[t]=r[t](i),{c(){n.c(),e=mt()},m(a,l){s[t].m(a,l),x(a,e,l),o=!0},p(a,l){let u=t;t=c(a),t===u?s[t].p(a,l):(j(),$(s[u],1,1,()=>{s[u]=null}),q(),n=s[t],n?n.p(a,l):(n=s[t]=r[t](a),n.c()),d(n,1),n.m(e.parentNode,e))},i(a){o||(d(n),o=!0)},o(a){$(n),o=!1},d(a){a&&b(e),s[t].d(a)}}}function I2(i){let t,n;return t=new Pt({props:{content:"Edit guidelines for Augment Chat and Agent",$$slots:{default:[N2]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};520&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function L2(i){let t,n;return t=new Pt({props:{$$slots:{content:[z2],default:[O2]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};521&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function R2(i){let t;return{c(){t=G(i[3])},m(n,e){x(n,t,e)},p(n,e){8&e&&_t(t,n[3])},d(n){n&&b(t)}}}function D2(i){let t,n;return t=new Hm({props:{slot:"leftIcon"}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p:P,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function N2(i){let t,n,e,o,r;return n=new Uo({props:{$$slots:{leftIcon:[D2],default:[R2]},$$scope:{ctx:i}}}),{c(){t=L("div"),v(n.$$.fragment),A(t,"role","button"),A(t,"tabindex","0"),qn(t,"cursor","pointer")},m(s,c){x(s,t,c),w(n,t,null),e=!0,o||(r=[Lt(t,"click",i[5]),Lt(t,"keyup",ko("Enter",i[5]))],o=!0)},p(s,c){const a={};520&c&&(a.$$scope={dirty:c,ctx:s}),n.$set(a)},i(s){e||(d(n.$$.fragment,s),e=!0)},o(s){$(n.$$.fragment,s),e=!1},d(s){s&&b(t),y(n),o=!1,Qe(r)}}}function P2(i){let t,n,e,o;return{c(){t=L("div"),n=G(i[3]),A(t,"role","button"),A(t,"tabindex","0"),qn(t,"cursor","pointer")},m(r,s){x(r,t,s),O(t,n),e||(o=[Lt(t,"click",$r(i[5])),Lt(t,"keyup",ko("Enter",i[5]))],e=!0)},p(r,s){8&s&&_t(n,r[3])},d(r){r&&b(t),e=!1,Qe(o)}}}function F2(i){let t,n;return t=new Wn({props:{class:"c-user-guidelines-warning-icon",slot:"leftIcon"}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p:P,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function O2(i){let t,n;return t=new Uo({props:{color:"warning",showWarning:!1,$$slots:{leftIcon:[F2],default:[P2]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};520&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function z2(i){let t,n;return t=new Kr({props:{option:i[0],slot:"content"}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};1&o&&(r.option=e[0]),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function B2(i){let t,n,e=i[2]&&Cc(i);return{c(){e&&e.c(),t=mt()},m(o,r){e&&e.m(o,r),x(o,t,r),n=!0},p(o,[r]){o[2]?e?(e.p(o,r),4&r&&d(e,1)):(e=Cc(o),e.c(),d(e,1),e.m(t.parentNode,t)):e&&(j(),$(e,1,1,()=>{e=null}),q())},i(o){n||(d(e),n=!0)},o(o){$(e),n=!1},d(o){o&&b(t),e&&e.d(o)}}}function U2(i,t,n){let e,o,r,s,c,a,{item:l}=t;const u=Ap();return Et(i,u,f=>n(8,a=f)),i.$$set=f=>{"item"in f&&n(0,l=f.item)},i.$$.update=()=>{var f;1&i.$$.dirty&&n(1,e=l.showWarning),1&i.$$.dirty&&n(7,o=((f=l.userGuidelines)==null?void 0:f.enabled)??!1),256&i.$$.dirty&&n(6,r=(a==null?void 0:a.flags.enableRules)??!1),64&i.$$.dirty&&n(3,s=r?"Rules & Guidelines":"User Guidelines"),194&i.$$.dirty&&n(2,c=o||r&&e)},[l,e,c,s,u,function(){u&&u.extensionClient.openSettingsPage("guidelines")},r,o,a]}class H2 extends ut{constructor(t){super(),dt(this,t,U2,B2,ct,{item:0})}}var Vf,j2={exports:{}};Vf=()=>(()=>{var i=[,(o,r,s)=>{s.r(r),s.d(r,{default:()=>l});var c,a=(c=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0,function(u={}){var f,m,p=u;function _(){function g(W){const et=I;k=h=0,I=new Map,et.forEach(ft=>{try{ft(W)}catch(nt){console.error(nt)}}),this.ob(),D&&D.Tb()}let h=0,k=0,I=new Map,D=null,B=null;this.requestAnimationFrame=function(W){h||(h=requestAnimationFrame(g.bind(this)));const et=++k;return I.set(et,W),et},this.cancelAnimationFrame=function(W){I.delete(W),h&&I.size==0&&(cancelAnimationFrame(h),h=0)},this.Rb=function(W){B&&(document.body.remove(B),B=null),W||(B=document.createElement("div"),B.style.backgroundColor="black",B.style.position="fixed",B.style.right=0,B.style.top=0,B.style.color="white",B.style.padding="4px",B.innerHTML="RIVE FPS",W=function(et){B.innerHTML="RIVE FPS "+et.toFixed(1)},document.body.appendChild(B)),D=new function(){let et=0,ft=0;this.Tb=function(){var nt=performance.now();ft?(++et,1e3<(nt-=ft)&&(W(1e3*et/nt),et=ft=0)):(ft=nt,et=0)}}},this.Ob=function(){B&&(document.body.remove(B),B=null),D=null},this.ob=function(){}}function M(g){console.assert(!0);const h=new Map;let k=-1/0;this.push=function(I){return I=I+((1<<g)-1)>>g,h.has(I)&&clearTimeout(h.get(I)),h.set(I,setTimeout(function(){h.delete(I),h.length==0?k=-1/0:I==k&&(k=Math.max(...h.keys()),console.assert(k<I))},1e3)),k=Math.max(I,k),k<<g}}p.ready=new Promise((g,h)=>{f=g,m=h});const C=p.onRuntimeInitialized;p.onRuntimeInitialized=function(){C&&C();let g=p.decodeAudio;p.decodeAudio=function(D,B){B(D=g(D))};let h=p.decodeFont;p.decodeFont=function(D,B){B(D=h(D))};const k=p.FileAssetLoader;p.ptrToAsset=D=>{let B=p.ptrToFileAsset(D);return B.isImage?p.ptrToImageAsset(D):B.isFont?p.ptrToFontAsset(D):B.isAudio?p.ptrToAudioAsset(D):B},p.CustomFileAssetLoader=k.extend("CustomFileAssetLoader",{__construct:function({loadContents:D}){this.__parent.__construct.call(this),this.Gb=D},loadContents:function(D,B){return D=p.ptrToAsset(D),this.Gb(D,B)}}),p.CDNFileAssetLoader=k.extend("CDNFileAssetLoader",{__construct:function(){this.__parent.__construct.call(this)},loadContents:function(D){let B=p.ptrToAsset(D);return(D=B.cdnUuid)!==""&&(W=B.cdnBaseUrl+"/"+D,(et=new XMLHttpRequest).responseType="arraybuffer",et.onreadystatechange=function(){et.readyState==4&&et.status==200&&(ft=>{B.decode(new Uint8Array(ft.response))})(et)},et.open("GET",W,!0),et.send(null),!0);var W,et}}),p.FallbackFileAssetLoader=k.extend("FallbackFileAssetLoader",{__construct:function(){this.__parent.__construct.call(this),this.kb=[]},addLoader:function(D){this.kb.push(D)},loadContents:function(D,B){for(let W of this.kb)if(W.loadContents(D,B))return!0;return!1}});let I=p.computeAlignment;p.computeAlignment=function(D,B,W,et,ft=1){return I.call(this,D,B,W,et,ft)}};const T="createConicGradient createImageData createLinearGradient createPattern createRadialGradient getContextAttributes getImageData getLineDash getTransform isContextLost isPointInPath isPointInStroke measureText".split(" "),E=new function(){function g(){if(!h){let Ce=function(at,bt,de){if(bt=It.createShader(bt),It.shaderSource(bt,de),It.compileShader(bt),0<((de=It.getShaderInfoLog(bt))||"").length)throw de;It.attachShader(at,bt)};var jt=document.createElement("canvas"),Ot={alpha:1,depth:0,stencil:0,antialias:0,premultipliedAlpha:1,preserveDrawingBuffer:0,powerPreference:"high-performance",failIfMajorPerformanceCaveat:0,enableExtensionsByDefault:1,explicitSwapControl:1,renderViaOffscreenBackBuffer:1};let It;if(/iPhone|iPad|iPod/i.test(navigator.userAgent)){if(It=jt.getContext("webgl",Ot),k=1,!It)return console.log("No WebGL support. Image mesh will not be drawn."),!1}else if(It=jt.getContext("webgl2",Ot))k=2;else{if(!(It=jt.getContext("webgl",Ot)))return console.log("No WebGL support. Image mesh will not be drawn."),!1;k=1}if(It=new Proxy(It,{get:(at,bt)=>at.isContextLost()?(ft||(console.error("Cannot render the mesh because the GL Context was lost. Tried to invoke ",bt),ft=!0),typeof at[bt]=="function"?function(){}:void 0):typeof at[bt]=="function"?function(...de){return at[bt].apply(at,de)}:at[bt],set(at,bt,de){if(!at.isContextLost())return at[bt]=de,!0;ft||(console.error("Cannot render the mesh because the GL Context was lost. Tried to set property "+bt),ft=!0)}}),I=Math.min(It.getParameter(It.MAX_RENDERBUFFER_SIZE),It.getParameter(It.MAX_TEXTURE_SIZE)),Ce(jt=It.createProgram(),It.VERTEX_SHADER,`attribute vec2 vertex;
                attribute vec2 uv;
                uniform vec4 mat;
                uniform vec2 translate;
                varying vec2 st;
                void main() {
                    st = uv;
                    gl_Position = vec4(mat2(mat) * vertex + translate, 0, 1);
                }`),Ce(jt,It.FRAGMENT_SHADER,`precision highp float;
                uniform sampler2D image;
                varying vec2 st;
                void main() {
                    gl_FragColor = texture2D(image, st);
                }`),It.bindAttribLocation(jt,0,"vertex"),It.bindAttribLocation(jt,1,"uv"),It.linkProgram(jt),0<((Ot=It.getProgramInfoLog(jt))||"").trim().length)throw Ot;D=It.getUniformLocation(jt,"mat"),B=It.getUniformLocation(jt,"translate"),It.useProgram(jt),It.bindBuffer(It.ARRAY_BUFFER,It.createBuffer()),It.enableVertexAttribArray(0),It.enableVertexAttribArray(1),It.bindBuffer(It.ELEMENT_ARRAY_BUFFER,It.createBuffer()),It.uniform1i(It.getUniformLocation(jt,"image"),0),It.pixelStorei(It.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),h=It}return!0}let h=null,k=0,I=0,D=null,B=null,W=0,et=0,ft=!1;g(),this.hc=function(){return g(),I},this.Mb=function(jt){h.deleteTexture&&h.deleteTexture(jt)},this.Lb=function(jt){if(!g())return null;const Ot=h.createTexture();return Ot?(h.bindTexture(h.TEXTURE_2D,Ot),h.texImage2D(h.TEXTURE_2D,0,h.RGBA,h.RGBA,h.UNSIGNED_BYTE,jt),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_S,h.CLAMP_TO_EDGE),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_T,h.CLAMP_TO_EDGE),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MAG_FILTER,h.LINEAR),k==2?(h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MIN_FILTER,h.LINEAR_MIPMAP_LINEAR),h.generateMipmap(h.TEXTURE_2D)):h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MIN_FILTER,h.LINEAR),Ot):null};const nt=new M(8),Rt=new M(8),Nt=new M(10),Bt=new M(10);this.Qb=function(jt,Ot,It,Ce,at){if(g()){var bt=nt.push(jt),de=Rt.push(Ot);if(h.canvas){for(var Ke of(h.canvas.width==bt&&h.canvas.height==de||(h.canvas.width=bt,h.canvas.height=de),h.viewport(0,de-Ot,jt,Ot),h.disable(h.SCISSOR_TEST),h.clearColor(0,0,0,0),h.clear(h.COLOR_BUFFER_BIT),h.enable(h.SCISSOR_TEST),It.sort((Ae,ao)=>ao.wb-Ae.wb),bt=Nt.push(Ce),W!=bt&&(h.bufferData(h.ARRAY_BUFFER,8*bt,h.DYNAMIC_DRAW),W=bt),bt=0,It))h.bufferSubData(h.ARRAY_BUFFER,bt,Ke.Ta),bt+=4*Ke.Ta.length;for(var Kn of(console.assert(bt==4*Ce),It))h.bufferSubData(h.ARRAY_BUFFER,bt,Kn.Db),bt+=4*Kn.Db.length;for(var Yo of(console.assert(bt==8*Ce),bt=Bt.push(at),et!=bt&&(h.bufferData(h.ELEMENT_ARRAY_BUFFER,2*bt,h.DYNAMIC_DRAW),et=bt),Ke=0,It))h.bufferSubData(h.ELEMENT_ARRAY_BUFFER,Ke,Yo.indices),Ke+=2*Yo.indices.length;console.assert(Ke==2*at),Yo=0,Kn=!0,bt=Ke=0;for(const Ae of It){Ae.image.Ka!=Yo&&(h.bindTexture(h.TEXTURE_2D,Ae.image.Ja||null),Yo=Ae.image.Ka),Ae.mc?(h.scissor(Ae.Ya,de-Ae.Za-Ae.jb,Ae.Ac,Ae.jb),Kn=!0):Kn&&(h.scissor(0,de-Ot,jt,Ot),Kn=!1),It=2/jt;const ao=-2/Ot;h.uniform4f(D,Ae.ha[0]*It*Ae.Ba,Ae.ha[1]*ao*Ae.Ca,Ae.ha[2]*It*Ae.Ba,Ae.ha[3]*ao*Ae.Ca),h.uniform2f(B,Ae.ha[4]*It*Ae.Ba+It*(Ae.Ya-Ae.ic*Ae.Ba)-1,Ae.ha[5]*ao*Ae.Ca+ao*(Ae.Za-Ae.jc*Ae.Ca)+1),h.vertexAttribPointer(0,2,h.FLOAT,!1,0,bt),h.vertexAttribPointer(1,2,h.FLOAT,!1,0,bt+4*Ce),h.drawElements(h.TRIANGLES,Ae.indices.length,h.UNSIGNED_SHORT,Ke),bt+=4*Ae.Ta.length,Ke+=2*Ae.indices.length}console.assert(bt==4*Ce),console.assert(Ke==2*at)}}},this.canvas=function(){return g()&&h.canvas}},R=p.onRuntimeInitialized;p.onRuntimeInitialized=function(){function g(yt){switch(yt){case nt.srcOver:return"source-over";case nt.screen:return"screen";case nt.overlay:return"overlay";case nt.darken:return"darken";case nt.lighten:return"lighten";case nt.colorDodge:return"color-dodge";case nt.colorBurn:return"color-burn";case nt.hardLight:return"hard-light";case nt.softLight:return"soft-light";case nt.difference:return"difference";case nt.exclusion:return"exclusion";case nt.multiply:return"multiply";case nt.hue:return"hue";case nt.saturation:return"saturation";case nt.color:return"color";case nt.luminosity:return"luminosity"}}function h(yt){return"rgba("+((16711680&yt)>>>16)+","+((65280&yt)>>>8)+","+((255&yt)>>>0)+","+((4278190080&yt)>>>24)/255+")"}function k(){0<de.length&&(E.Qb(bt.drawWidth(),bt.drawHeight(),de,Ke,Kn),de=[],Kn=Ke=0,bt.reset(512,512));for(const yt of at){for(const Ut of yt.H)Ut();yt.H=[]}at.clear()}R&&R();var I=p.RenderPaintStyle;const D=p.RenderPath,B=p.RenderPaint,W=p.Renderer,et=p.StrokeCap,ft=p.StrokeJoin,nt=p.BlendMode,Rt=I.fill,Nt=I.stroke,Bt=p.FillRule.evenOdd;let jt=1;var Ot=p.RenderImage.extend("CanvasRenderImage",{__construct:function({la:yt,xa:Ut}={}){this.__parent.__construct.call(this),this.Ka=jt,jt=jt+1&2147483647||1,this.la=yt,this.xa=Ut},__destruct:function(){this.Ja&&(E.Mb(this.Ja),URL.revokeObjectURL(this.Wa)),this.__parent.__destruct.call(this)},decode:function(yt){var Ut=this;Ut.xa&&Ut.xa(Ut);var ye=new Image;Ut.Wa=URL.createObjectURL(new Blob([yt],{type:"image/png"})),ye.onload=function(){Ut.Fb=ye,Ut.Ja=E.Lb(ye),Ut.size(ye.width,ye.height),Ut.la&&Ut.la(Ut)},ye.src=Ut.Wa}}),It=D.extend("CanvasRenderPath",{__construct:function(){this.__parent.__construct.call(this),this.T=new Path2D},rewind:function(){this.T=new Path2D},addPath:function(yt,Ut,ye,be,pe,Me,ke){var Fe=this.T,eo=Fe.addPath;yt=yt.T;const hn=new DOMMatrix;hn.a=Ut,hn.b=ye,hn.c=be,hn.d=pe,hn.e=Me,hn.f=ke,eo.call(Fe,yt,hn)},fillRule:function(yt){this.Va=yt},moveTo:function(yt,Ut){this.T.moveTo(yt,Ut)},lineTo:function(yt,Ut){this.T.lineTo(yt,Ut)},cubicTo:function(yt,Ut,ye,be,pe,Me){this.T.bezierCurveTo(yt,Ut,ye,be,pe,Me)},close:function(){this.T.closePath()}}),Ce=B.extend("CanvasRenderPaint",{color:function(yt){this.Xa=h(yt)},thickness:function(yt){this.Ib=yt},join:function(yt){switch(yt){case ft.miter:this.Ia="miter";break;case ft.round:this.Ia="round";break;case ft.bevel:this.Ia="bevel"}},cap:function(yt){switch(yt){case et.butt:this.Ha="butt";break;case et.round:this.Ha="round";break;case et.square:this.Ha="square"}},style:function(yt){this.Hb=yt},blendMode:function(yt){this.Eb=g(yt)},clearGradient:function(){this.ja=null},linearGradient:function(yt,Ut,ye,be){this.ja={yb:yt,zb:Ut,bb:ye,cb:be,Ra:[]}},radialGradient:function(yt,Ut,ye,be){this.ja={yb:yt,zb:Ut,bb:ye,cb:be,Ra:[],ec:!0}},addStop:function(yt,Ut){this.ja.Ra.push({color:yt,stop:Ut})},completeGradient:function(){},draw:function(yt,Ut,ye){let be=this.Hb;var pe=this.Xa,Me=this.ja;if(yt.globalCompositeOperation=this.Eb,Me!=null){pe=Me.yb;var ke=Me.zb;const eo=Me.bb;var Fe=Me.cb;const hn=Me.Ra;Me.ec?(Me=eo-pe,Fe-=ke,pe=yt.createRadialGradient(pe,ke,0,pe,ke,Math.sqrt(Me*Me+Fe*Fe))):pe=yt.createLinearGradient(pe,ke,eo,Fe);for(let co=0,kn=hn.length;co<kn;co++)ke=hn[co],pe.addColorStop(ke.stop,h(ke.color));this.Xa=pe,this.ja=null}switch(be){case Nt:yt.strokeStyle=pe,yt.lineWidth=this.Ib,yt.lineCap=this.Ha,yt.lineJoin=this.Ia,yt.stroke(Ut);break;case Rt:yt.fillStyle=pe,yt.fill(Ut,ye)}}});const at=new Set;let bt=null,de=[],Ke=0,Kn=0;var Yo=p.CanvasRenderer=W.extend("Renderer",{__construct:function(yt){this.__parent.__construct.call(this),this.S=[1,0,0,1,0,0],this.C=yt.getContext("2d"),this.Ua=yt,this.H=[]},save:function(){this.S.push(...this.S.slice(this.S.length-6)),this.H.push(this.C.save.bind(this.C))},restore:function(){const yt=this.S.length-6;if(6>yt)throw"restore() called without matching save().";this.S.splice(yt),this.H.push(this.C.restore.bind(this.C))},transform:function(yt,Ut,ye,be,pe,Me){const ke=this.S,Fe=ke.length-6;ke.splice(Fe,6,ke[Fe]*yt+ke[Fe+2]*Ut,ke[Fe+1]*yt+ke[Fe+3]*Ut,ke[Fe]*ye+ke[Fe+2]*be,ke[Fe+1]*ye+ke[Fe+3]*be,ke[Fe]*pe+ke[Fe+2]*Me+ke[Fe+4],ke[Fe+1]*pe+ke[Fe+3]*Me+ke[Fe+5]),this.H.push(this.C.transform.bind(this.C,yt,Ut,ye,be,pe,Me))},rotate:function(yt){const Ut=Math.sin(yt);yt=Math.cos(yt),this.transform(yt,Ut,-Ut,yt,0,0)},_drawPath:function(yt,Ut){this.H.push(Ut.draw.bind(Ut,this.C,yt.T,yt.Va===Bt?"evenodd":"nonzero"))},_drawRiveImage:function(yt,Ut,ye){var be=yt.Fb;if(be){var pe=this.C,Me=g(Ut);this.H.push(function(){pe.globalCompositeOperation=Me,pe.globalAlpha=ye,pe.drawImage(be,0,0),pe.globalAlpha=1})}},_getMatrix:function(yt){const Ut=this.S,ye=Ut.length-6;for(let be=0;6>be;++be)yt[be]=Ut[ye+be]},_drawImageMesh:function(yt,Ut,ye,be,pe,Me,ke,Fe,eo,hn){var co=this.C.canvas.width,kn=this.C.canvas.height;const Ma=eo-ke,ka=hn-Fe;ke=Math.max(ke,0),Fe=Math.max(Fe,0),eo=Math.min(eo,co),hn=Math.min(hn,kn);const Ir=eo-ke,Lr=hn-Fe;if(console.assert(Ir<=Math.min(Ma,co)),console.assert(Lr<=Math.min(ka,kn)),!(0>=Ir||0>=Lr)){eo=Ir<Ma||Lr<ka,co=hn=1;var Ko=Math.ceil(Ir*hn),Xo=Math.ceil(Lr*co);kn=E.hc(),Ko>kn&&(hn*=kn/Ko,Ko=kn),Xo>kn&&(co*=kn/Xo,Xo=kn),bt||(bt=new p.DynamicRectanizer(kn),bt.reset(512,512)),0>(kn=bt.addRect(Ko,Xo))&&(k(),at.add(this),kn=bt.addRect(Ko,Xo),console.assert(0<=kn));var Sa=65535&kn,Ta=kn>>16;de.push({ha:this.S.slice(this.S.length-6),image:yt,Ya:Sa,Za:Ta,ic:ke,jc:Fe,Ac:Ko,jb:Xo,Ba:hn,Ca:co,Ta:new Float32Array(be),Db:new Float32Array(pe),indices:new Uint16Array(Me),mc:eo,wb:yt.Ka<<1|(eo?1:0)}),Ke+=be.length,Kn+=Me.length;var cr=this.C,Rm=g(Ut);this.H.push(function(){cr.save(),cr.resetTransform(),cr.globalCompositeOperation=Rm,cr.globalAlpha=ye;const Ea=E.canvas();Ea&&cr.drawImage(Ea,Sa,Ta,Ko,Xo,ke,Fe,Ir,Lr),cr.restore()})}},_clipPath:function(yt){this.H.push(this.C.clip.bind(this.C,yt.T,yt.Va===Bt?"evenodd":"nonzero"))},clear:function(){at.add(this),this.H.push(this.C.clearRect.bind(this.C,0,0,this.Ua.width,this.Ua.height))},flush:function(){},translate:function(yt,Ut){this.transform(1,0,0,1,yt,Ut)}});p.makeRenderer=function(yt){const Ut=new Yo(yt),ye=Ut.C;return new Proxy(Ut,{get(be,pe){if(typeof be[pe]=="function")return function(...Me){return be[pe].apply(be,Me)};if(typeof ye[pe]=="function"){if(-1<T.indexOf(pe))throw Error("RiveException: Method call to '"+pe+"()' is not allowed, as the renderer cannot immediately pass through the return                 values of any canvas 2d context methods.");return function(...Me){Ut.H.push(ye[pe].bind(ye,...Me))}}return be[pe]},set(be,pe,Me){if(pe in ye)return Ut.H.push(()=>{ye[pe]=Me}),!0}})},p.decodeImage=function(yt,Ut){new Ot({la:Ut}).decode(yt)},p.renderFactory={makeRenderPaint:function(){return new Ce},makeRenderPath:function(){return new It},makeRenderImage:function(){let yt=ao;return new Ot({xa:()=>{yt.total++},la:()=>{if(yt.loaded++,yt.loaded===yt.total){const Ut=yt.ready;Ut&&(Ut(),yt.ready=null)}}})}};let Ae=p.load,ao=null;p.load=function(yt,Ut,ye=!0){const be=new p.FallbackFileAssetLoader;return Ut!==void 0&&be.addLoader(Ut),ye&&(Ut=new p.CDNFileAssetLoader,be.addLoader(Ut)),new Promise(function(pe){let Me=null;ao={total:0,loaded:0,ready:function(){pe(Me)}},Me=Ae(yt,be),ao.total==0&&pe(Me)})};let Lm=p.RendererWrapper.prototype.align;p.RendererWrapper.prototype.align=function(yt,Ut,ye,be,pe=1){Lm.call(this,yt,Ut,ye,be,pe)},I=new _,p.requestAnimationFrame=I.requestAnimationFrame.bind(I),p.cancelAnimationFrame=I.cancelAnimationFrame.bind(I),p.enableFPSCounter=I.Rb.bind(I),p.disableFPSCounter=I.Ob,I.ob=k,p.resolveAnimationFrame=k,p.cleanup=function(){bt&&bt.delete()}};var N,Z,Q=Object.assign({},p),X="./this.program",K=typeof window=="object",H=typeof importScripts=="function",Y="";(K||H)&&(H?Y=self.location.href:typeof document<"u"&&document.currentScript&&(Y=document.currentScript.src),c&&(Y=c),Y=Y.indexOf("blob:")!==0?Y.substr(0,Y.replace(/[?#].*/,"").lastIndexOf("/")+1):"",H&&(Z=g=>{var h=new XMLHttpRequest;return h.open("GET",g,!1),h.responseType="arraybuffer",h.send(null),new Uint8Array(h.response)}),N=(g,h,k)=>{var I=new XMLHttpRequest;I.open("GET",g,!0),I.responseType="arraybuffer",I.onload=()=>{I.status==200||I.status==0&&I.response?h(I.response):k()},I.onerror=k,I.send(null)});var V,J=p.print||console.log.bind(console),rt=p.printErr||console.error.bind(console);Object.assign(p,Q),Q=null,p.thisProgram&&(X=p.thisProgram),p.wasmBinary&&(V=p.wasmBinary),p.noExitRuntime,typeof WebAssembly!="object"&&re("no native wasm support detected");var lt,ot,ht,it,xt,ee,At,Ht,De,Ee,un=!1;function z(){var g=lt.buffer;p.HEAP8=ht=new Int8Array(g),p.HEAP16=xt=new Int16Array(g),p.HEAP32=At=new Int32Array(g),p.HEAPU8=it=new Uint8Array(g),p.HEAPU16=ee=new Uint16Array(g),p.HEAPU32=Ht=new Uint32Array(g),p.HEAPF32=De=new Float32Array(g),p.HEAPF64=Ee=new Float64Array(g)}var S,F=[],tt=[],st=[];function vt(){var g=p.preRun.shift();F.unshift(g)}var Ct,Ft=0,qt=null;function re(g){throw p.onAbort&&p.onAbort(g),rt(g="Aborted("+g+")"),un=!0,g=new WebAssembly.RuntimeError(g+". Build with -sASSERTIONS for more info."),m(g),g}function Vt(g){return g.startsWith("data:application/octet-stream;base64,")}if(!Vt(Ct="canvas_advanced.wasm")){var ze=Ct;Ct=p.locateFile?p.locateFile(ze,Y):Y+ze}function Qt(g){if(g==Ct&&V)return new Uint8Array(V);if(Z)return Z(g);throw"both async and sync fetching of the wasm failed"}function Ie(g,h,k){return function(I){if(!V&&(K||H)){if(typeof fetch=="function"&&!I.startsWith("file://"))return fetch(I,{credentials:"same-origin"}).then(D=>{if(!D.ok)throw"failed to load wasm binary file at '"+I+"'";return D.arrayBuffer()}).catch(()=>Qt(I));if(N)return new Promise((D,B)=>{N(I,W=>D(new Uint8Array(W)),B)})}return Promise.resolve().then(()=>Qt(I))}(g).then(I=>WebAssembly.instantiate(I,h)).then(I=>I).then(k,I=>{rt("failed to asynchronously prepare wasm: "+I),re(I)})}var Oe,Pe,Cn={448252:(g,h,k,I,D)=>{if(typeof window>"u"||(window.AudioContext||window.webkitAudioContext)===void 0)return 0;if(window.h===void 0){window.h={Aa:0},window.h.I={},window.h.I.ya=g,window.h.I.capture=h,window.h.I.La=k,window.h.ga={},window.h.ga.stopped=I,window.h.ga.xb=D;let B=window.h;B.D=[],B.yc=function(W){for(var et=0;et<B.D.length;++et)if(B.D[et]==null)return B.D[et]=W,et;return B.D.push(W),B.D.length-1},B.Cb=function(W){for(B.D[W]=null;0<B.D.length&&B.D[B.D.length-1]==null;)B.D.pop()},B.Sc=function(W){for(var et=0;et<B.D.length;++et)if(B.D[et]==W)return B.Cb(et)},B.ra=function(W){return B.D[W]},B.Bb=["touchend","click"],B.unlock=function(){for(var W=0;W<B.D.length;++W){var et=B.D[W];et!=null&&et.J!=null&&et.state===B.ga.xb&&et.J.resume().then(()=>{ya(et.pb)},ft=>{console.error("Failed to resume audiocontext",ft)})}B.Bb.map(function(ft){document.removeEventListener(ft,B.unlock,!0)})},B.Bb.map(function(W){document.addEventListener(W,B.unlock,!0)})}return window.h.Aa+=1,1},450430:()=>{window.h!==void 0&&(--window.h.Aa,window.h.Aa===0&&delete window.h)},450594:()=>navigator.mediaDevices!==void 0&&navigator.mediaDevices.getUserMedia!==void 0,450698:()=>{try{var g=new(window.AudioContext||window.webkitAudioContext),h=g.sampleRate;return g.close(),h}catch{return 0}},450869:(g,h,k,I,D,B)=>{if(window.h===void 0)return-1;var W={},et={};return g==window.h.I.ya&&k!=0&&(et.sampleRate=k),W.J=new(window.AudioContext||window.webkitAudioContext)(et),W.J.suspend(),W.state=window.h.ga.stopped,k=0,g!=window.h.I.ya&&(k=h),W.Z=W.J.createScriptProcessor(I,k,h),W.Z.onaudioprocess=function(ft){if(W.sa!=null&&W.sa.length!=0||(W.sa=new Float32Array(De.buffer,D,I*h)),g==window.h.I.capture||g==window.h.I.La){for(var nt=0;nt<h;nt+=1)for(var Rt=ft.inputBuffer.getChannelData(nt),Nt=W.sa,Bt=0;Bt<I;Bt+=1)Nt[Bt*h+nt]=Rt[Bt];ba(B,I,D)}if(g==window.h.I.ya||g==window.h.I.La)for(xa(B,I,D),nt=0;nt<ft.outputBuffer.numberOfChannels;++nt)for(Rt=ft.outputBuffer.getChannelData(nt),Nt=W.sa,Bt=0;Bt<I;Bt+=1)Rt[Bt]=Nt[Bt*h+nt];else for(nt=0;nt<ft.outputBuffer.numberOfChannels;++nt)ft.outputBuffer.getChannelData(nt).fill(0)},g!=window.h.I.capture&&g!=window.h.I.La||navigator.mediaDevices.getUserMedia({audio:!0,video:!1}).then(function(ft){W.Da=W.J.createMediaStreamSource(ft),W.Da.connect(W.Z),W.Z.connect(W.J.destination)}).catch(function(ft){console.log("Failed to get user media: "+ft)}),g==window.h.I.ya&&W.Z.connect(W.J.destination),W.pb=B,window.h.yc(W)},453746:g=>window.h.ra(g).J.sampleRate,453819:g=>{(g=window.h.ra(g)).Z!==void 0&&(g.Z.onaudioprocess=function(){},g.Z.disconnect(),g.Z=void 0),g.Da!==void 0&&(g.Da.disconnect(),g.Da=void 0),g.J.close(),g.J=void 0,g.pb=void 0},454219:g=>{window.h.Cb(g)},454269:g=>{(g=window.h.ra(g)).J.resume(),g.state=window.h.ga.xb},454408:g=>{(g=window.h.ra(g)).J.suspend(),g.state=window.h.ga.stopped}},An=g=>{for(;0<g.length;)g.shift()(p)},Be=(g,h)=>{for(var k=0,I=g.length-1;0<=I;I--){var D=g[I];D==="."?g.splice(I,1):D===".."?(g.splice(I,1),k++):k&&(g.splice(I,1),k--)}if(h)for(;k;k--)g.unshift("..");return g},$n=g=>{var h=g.charAt(0)==="/",k=g.substr(-1)==="/";return(g=Be(g.split("/").filter(I=>!!I),!h).join("/"))||h||(g="."),g&&k&&(g+="/"),(h?"/":"")+g},Ge=g=>{var h=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/.exec(g).slice(1);return g=h[0],h=h[1],g||h?(h&&(h=h.substr(0,h.length-1)),g+h):"."},gn=g=>{if(g==="/")return"/";var h=(g=(g=$n(g)).replace(/\/$/,"")).lastIndexOf("/");return h===-1?g:g.substr(h+1)},Pn=g=>(Pn=(()=>{if(typeof crypto=="object"&&typeof crypto.getRandomValues=="function")return h=>crypto.getRandomValues(h);re("initRandomDevice")})())(g);function tn(){for(var g="",h=!1,k=arguments.length-1;-1<=k&&!h;k--){if(typeof(h=0<=k?arguments[k]:"/")!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!h)return"";g=h+"/"+g,h=h.charAt(0)==="/"}return(h?"/":"")+(g=Be(g.split("/").filter(I=>!!I),!h).join("/"))||"."}var Ye=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,Xe=(g,h,k)=>{var I=h+k;for(k=h;g[k]&&!(k>=I);)++k;if(16<k-h&&g.buffer&&Ye)return Ye.decode(g.subarray(h,k));for(I="";h<k;){var D=g[h++];if(128&D){var B=63&g[h++];if((224&D)==192)I+=String.fromCharCode((31&D)<<6|B);else{var W=63&g[h++];65536>(D=(240&D)==224?(15&D)<<12|B<<6|W:(7&D)<<18|B<<12|W<<6|63&g[h++])?I+=String.fromCharCode(D):(D-=65536,I+=String.fromCharCode(55296|D>>10,56320|1023&D))}}else I+=String.fromCharCode(D)}return I},Qn=[],Wt=g=>{for(var h=0,k=0;k<g.length;++k){var I=g.charCodeAt(k);127>=I?h++:2047>=I?h+=2:55296<=I&&57343>=I?(h+=4,++k):h+=3}return h},Fn=(g,h,k,I)=>{if(!(0<I))return 0;var D=k;I=k+I-1;for(var B=0;B<g.length;++B){var W=g.charCodeAt(B);if(55296<=W&&57343>=W&&(W=65536+((1023&W)<<10)|1023&g.charCodeAt(++B)),127>=W){if(k>=I)break;h[k++]=W}else{if(2047>=W){if(k+1>=I)break;h[k++]=192|W>>6}else{if(65535>=W){if(k+2>=I)break;h[k++]=224|W>>12}else{if(k+3>=I)break;h[k++]=240|W>>18,h[k++]=128|W>>12&63}h[k++]=128|W>>6&63}h[k++]=128|63&W}}return h[k]=0,k-D};function On(g,h){var k=Array(Wt(g)+1);return g=Fn(g,k,0,k.length),h&&(k.length=g),k}var zn=[];function Vn(g,h){zn[g]={input:[],F:[],V:h},jo(g,yn)}var yn={open:function(g){var h=zn[g.node.za];if(!h)throw new Tt(43);g.s=h,g.seekable=!1},close:function(g){g.s.V.qa(g.s)},qa:function(g){g.s.V.qa(g.s)},read:function(g,h,k,I){if(!g.s||!g.s.V.ib)throw new Tt(60);for(var D=0,B=0;B<I;B++){try{var W=g.s.V.ib(g.s)}catch{throw new Tt(29)}if(W===void 0&&D===0)throw new Tt(6);if(W==null)break;D++,h[k+B]=W}return D&&(g.node.timestamp=Date.now()),D},write:function(g,h,k,I){if(!g.s||!g.s.V.Oa)throw new Tt(60);try{for(var D=0;D<I;D++)g.s.V.Oa(g.s,h[k+D])}catch{throw new Tt(29)}return I&&(g.node.timestamp=Date.now()),D}},qe={ib:function(){t:{if(!Qn.length){var g=null;if(typeof window<"u"&&typeof window.prompt=="function"?(g=window.prompt("Input: "))!==null&&(g+=`
`):typeof readline=="function"&&(g=readline())!==null&&(g+=`
`),!g){g=null;break t}Qn=On(g,!0)}g=Qn.shift()}return g},Oa:function(g,h){h===null||h===10?(J(Xe(g.F,0)),g.F=[]):h!=0&&g.F.push(h)},qa:function(g){g.F&&0<g.F.length&&(J(Xe(g.F,0)),g.F=[])},bc:function(){return{Fc:25856,Hc:5,Ec:191,Gc:35387,Dc:[3,28,127,21,4,0,1,0,17,19,26,0,18,15,23,22,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}},cc:function(){return 0},dc:function(){return[24,80]}},En={Oa:function(g,h){h===null||h===10?(rt(Xe(g.F,0)),g.F=[]):h!=0&&g.F.push(h)},qa:function(g){g.F&&0<g.F.length&&(rt(Xe(g.F,0)),g.F=[])}};function ve(g,h){var k=g.j?g.j.length:0;k>=h||(h=Math.max(h,k*(1048576>k?2:1.125)>>>0),k!=0&&(h=Math.max(h,256)),k=g.j,g.j=new Uint8Array(h),0<g.v&&g.j.set(k.subarray(0,g.v),0))}var fn,Bn,Ve,Ue,gt={O:null,U:()=>gt.createNode(null,"/",16895,0),createNode(g,h,k,I){if((61440&k)==24576||(61440&k)==4096)throw new Tt(63);return gt.O||(gt.O={dir:{node:{Y:gt.l.Y,P:gt.l.P,ka:gt.l.ka,va:gt.l.va,ub:gt.l.ub,Ab:gt.l.Ab,vb:gt.l.vb,sb:gt.l.sb,Ea:gt.l.Ea},stream:{ba:gt.m.ba}},file:{node:{Y:gt.l.Y,P:gt.l.P},stream:{ba:gt.m.ba,read:gt.m.read,write:gt.m.write,pa:gt.m.pa,lb:gt.m.lb,nb:gt.m.nb}},link:{node:{Y:gt.l.Y,P:gt.l.P,ma:gt.l.ma},stream:{}},$a:{node:{Y:gt.l.Y,P:gt.l.P},stream:_r}}),(61440&(k=pt(g,h,k,I)).mode)==16384?(k.l=gt.O.dir.node,k.m=gt.O.dir.stream,k.j={}):(61440&k.mode)==32768?(k.l=gt.O.file.node,k.m=gt.O.file.stream,k.v=0,k.j=null):(61440&k.mode)==40960?(k.l=gt.O.link.node,k.m=gt.O.link.stream):(61440&k.mode)==8192&&(k.l=gt.O.$a.node,k.m=gt.O.$a.stream),k.timestamp=Date.now(),g&&(g.j[h]=k,g.timestamp=k.timestamp),k},Kc:g=>g.j?g.j.subarray?g.j.subarray(0,g.v):new Uint8Array(g.j):new Uint8Array(0),l:{Y(g){var h={};return h.Jc=(61440&g.mode)==8192?g.id:1,h.Mc=g.id,h.mode=g.mode,h.Oc=1,h.uid=0,h.Lc=0,h.za=g.za,(61440&g.mode)==16384?h.size=4096:(61440&g.mode)==32768?h.size=g.v:(61440&g.mode)==40960?h.size=g.link.length:h.size=0,h.Bc=new Date(g.timestamp),h.Nc=new Date(g.timestamp),h.Ic=new Date(g.timestamp),h.Jb=4096,h.Cc=Math.ceil(h.size/h.Jb),h},P(g,h){if(h.mode!==void 0&&(g.mode=h.mode),h.timestamp!==void 0&&(g.timestamp=h.timestamp),h.size!==void 0&&(h=h.size,g.v!=h))if(h==0)g.j=null,g.v=0;else{var k=g.j;g.j=new Uint8Array(h),k&&g.j.set(k.subarray(0,Math.min(h,g.v))),g.v=h}},ka(){throw Gn[44]},va:(g,h,k,I)=>gt.createNode(g,h,k,I),ub(g,h,k){if((61440&g.mode)==16384){try{var I=Ho(h,k)}catch{}if(I)for(var D in I.j)throw new Tt(55)}delete g.parent.j[g.name],g.parent.timestamp=Date.now(),g.name=k,h.j[k]=g,h.timestamp=g.parent.timestamp,g.parent=h},Ab(g,h){delete g.j[h],g.timestamp=Date.now()},vb(g,h){var k,I=Ho(g,h);for(k in I.j)throw new Tt(55);delete g.j[h],g.timestamp=Date.now()},sb(g){var h,k=[".",".."];for(h in g.j)g.j.hasOwnProperty(h)&&k.push(h);return k},Ea:(g,h,k)=>((g=gt.createNode(g,h,41471,0)).link=k,g),ma(g){if((61440&g.mode)!=40960)throw new Tt(28);return g.link}},m:{read(g,h,k,I,D){var B=g.node.j;if(D>=g.node.v)return 0;if(8<(g=Math.min(g.node.v-D,I))&&B.subarray)h.set(B.subarray(D,D+g),k);else for(I=0;I<g;I++)h[k+I]=B[D+I];return g},write(g,h,k,I,D,B){if(h.buffer===ht.buffer&&(B=!1),!I)return 0;if((g=g.node).timestamp=Date.now(),h.subarray&&(!g.j||g.j.subarray)){if(B)return g.j=h.subarray(k,k+I),g.v=I;if(g.v===0&&D===0)return g.j=h.slice(k,k+I),g.v=I;if(D+I<=g.v)return g.j.set(h.subarray(k,k+I),D),I}if(ve(g,D+I),g.j.subarray&&h.subarray)g.j.set(h.subarray(k,k+I),D);else for(B=0;B<I;B++)g.j[D+B]=h[k+B];return g.v=Math.max(g.v,D+I),I},ba(g,h,k){if(k===1?h+=g.position:k===2&&(61440&g.node.mode)==32768&&(h+=g.node.v),0>h)throw new Tt(28);return h},pa(g,h,k){ve(g.node,h+k),g.node.v=Math.max(g.node.v,h+k)},lb(g,h,k,I,D){if((61440&g.node.mode)!=32768)throw new Tt(43);if(g=g.node.j,2&D||g.buffer!==ht.buffer){if((0<k||k+h<g.length)&&(g=g.subarray?g.subarray(k,k+h):Array.prototype.slice.call(g,k,k+h)),k=!0,re(),!(h=void 0))throw new Tt(48);ht.set(g,h)}else k=!1,h=g.byteOffset;return{o:h,M:k}},nb:(g,h,k,I)=>(gt.m.write(g,h,0,I,k,!1),0)}},zt=null,_e={},ue=[],ne=1,ae=null,dn=!0,Tt=null,Gn={},In=(g,h={})=>{if(!(g=tn(g)))return{path:"",node:null};if(8<(h=Object.assign({gb:!0,Qa:0},h)).Qa)throw new Tt(32);g=g.split("/").filter(W=>!!W);for(var k=zt,I="/",D=0;D<g.length;D++){var B=D===g.length-1;if(B&&h.parent)break;if(k=Ho(k,g[D]),I=$n(I+"/"+g[D]),k.wa&&(!B||B&&h.gb)&&(k=k.wa.root),!B||h.fb){for(B=0;(61440&k.mode)==40960;)if(k=ir(I),I=tn(Ge(I),k),k=In(I,{Qa:h.Qa+1}).node,40<B++)throw new Tt(32)}}return{path:I,node:k}},Eo=g=>{for(var h;;){if(g===g.parent)return g=g.U.mb,h?g[g.length-1]!=="/"?`${g}/${h}`:g+h:g;h=h?`${g.name}/${h}`:g.name,g=g.parent}},Io=(g,h)=>{for(var k=0,I=0;I<h.length;I++)k=(k<<5)-k+h.charCodeAt(I)|0;return(g+k>>>0)%ae.length},Ho=(g,h)=>{var k;if(k=(k=Dt(g,"x"))?k:g.l.ka?0:2)throw new Tt(k,g);for(k=ae[Io(g.id,h)];k;k=k.lc){var I=k.name;if(k.parent.id===g.id&&I===h)return k}return g.l.ka(g,h)},pt=(g,h,k,I)=>(g=new ha(g,h,k,I),h=Io(g.parent.id,g.name),g.lc=ae[h],ae[h]=g),we=g=>{var h=["r","w","rw"][3&g];return 512&g&&(h+="w"),h},Dt=(g,h)=>dn?0:!h.includes("r")||292&g.mode?h.includes("w")&&!(146&g.mode)||h.includes("x")&&!(73&g.mode)?2:0:2,He=(g,h)=>{try{return Ho(g,h),20}catch{}return Dt(g,"wx")},Mn=g=>{if(!(g=ue[g]))throw new Tt(8);return g},Lo=(g,h=-1)=>(Ve||((Ve=function(){this.h={}}).prototype={},Object.defineProperties(Ve.prototype,{object:{get(){return this.node},set(k){this.node=k}},flags:{get(){return this.h.flags},set(k){this.h.flags=k}},position:{get(){return this.h.position},set(k){this.h.position=k}}})),g=Object.assign(new Ve,g),h==-1&&(h=(()=>{for(var k=0;4096>=k;k++)if(!ue[k])return k;throw new Tt(33)})()),g.X=h,ue[h]=g),_r={open:g=>{g.m=_e[g.node.za].m,g.m.open&&g.m.open(g)},ba:()=>{throw new Tt(70)}},jo=(g,h)=>{_e[g]={m:h}},qo=(g,h)=>{var k=h==="/",I=!h;if(k&&zt)throw new Tt(10);if(!k&&!I){var D=In(h,{gb:!1});if(h=D.path,(D=D.node).wa)throw new Tt(10);if((61440&D.mode)!=16384)throw new Tt(54)}h={type:g,Qc:{},mb:h,kc:[]},(g=g.U(h)).U=h,h.root=g,k?zt=g:D&&(D.wa=h,D.U&&D.U.kc.push(h))},bn=(g,h,k)=>{var I=In(g,{parent:!0}).node;if(!(g=gn(g))||g==="."||g==="..")throw new Tt(28);var D=He(I,g);if(D)throw new Tt(D);if(!I.l.va)throw new Tt(63);return I.l.va(I,g,h,k)},Wo=(g,h,k)=>{k===void 0&&(k=h,h=438),bn(g,8192|h,k)},Ln=(g,h)=>{if(!tn(g))throw new Tt(44);var k=In(h,{parent:!0}).node;if(!k)throw new Tt(44);h=gn(h);var I=He(k,h);if(I)throw new Tt(I);if(!k.l.Ea)throw new Tt(63);k.l.Ea(k,h,g)},ir=g=>{if(!(g=In(g).node))throw new Tt(44);if(!g.l.ma)throw new Tt(28);return tn(Eo(g.parent),g.l.ma(g))},no=(g,h,k)=>{if(g==="")throw new Tt(44);if(typeof h=="string"){var I={r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090}[h];if(I===void 0)throw Error(`Unknown file open mode: ${h}`);h=I}if(k=64&h?4095&(k===void 0?438:k)|32768:0,typeof g=="object")var D=g;else{g=$n(g);try{D=In(g,{fb:!(131072&h)}).node}catch{}}if(I=!1,64&h)if(D){if(128&h)throw new Tt(20)}else D=bn(g,k,0),I=!0;if(!D)throw new Tt(44);if((61440&D.mode)==8192&&(h&=-513),65536&h&&(61440&D.mode)!=16384)throw new Tt(54);if(!I&&(k=D?(61440&D.mode)==40960?32:(61440&D.mode)==16384&&(we(h)!=="r"||512&h)?31:Dt(D,we(h)):44))throw new Tt(k);if(512&h&&!I){if(!(k=typeof(k=D)=="string"?In(k,{fb:!0}).node:k).l.P)throw new Tt(63);if((61440&k.mode)==16384)throw new Tt(31);if((61440&k.mode)!=32768)throw new Tt(28);if(I=Dt(k,"w"))throw new Tt(I);k.l.P(k,{size:0,timestamp:Date.now()})}return h&=-131713,(D=Lo({node:D,path:Eo(D),flags:h,seekable:!0,position:0,m:D.m,zc:[],error:!1})).m.open&&D.m.open(D),!p.logReadFiles||1&h||(Ue||(Ue={}),g in Ue||(Ue[g]=1)),D},Jr=(g,h,k)=>{if(g.X===null)throw new Tt(8);if(!g.seekable||!g.m.ba)throw new Tt(70);if(k!=0&&k!=1&&k!=2)throw new Tt(28);g.position=g.m.ba(g,h,k),g.zc=[]},Js=()=>{Tt||((Tt=function(g,h){this.name="ErrnoError",this.node=h,this.pc=function(k){this.aa=k},this.pc(g),this.message="FS error"}).prototype=Error(),Tt.prototype.constructor=Tt,[44].forEach(g=>{Gn[g]=new Tt(g),Gn[g].stack="<generic error, no stack>"}))},Cr=(g,h,k)=>{g=$n("/dev/"+g);var I=function(B,W){var et=0;return B&&(et|=365),W&&(et|=146),et}(!!h,!!k);Bn||(Bn=64);var D=Bn++<<8;jo(D,{open:B=>{B.seekable=!1},close:()=>{k&&k.buffer&&k.buffer.length&&k(10)},read:(B,W,et,ft)=>{for(var nt=0,Rt=0;Rt<ft;Rt++){try{var Nt=h()}catch{throw new Tt(29)}if(Nt===void 0&&nt===0)throw new Tt(6);if(Nt==null)break;nt++,W[et+Rt]=Nt}return nt&&(B.node.timestamp=Date.now()),nt},write:(B,W,et,ft)=>{for(var nt=0;nt<ft;nt++)try{k(W[et+nt])}catch{throw new Tt(29)}return ft&&(B.node.timestamp=Date.now()),nt}}),Wo(g,I,D)},Vo={},Zr=void 0;function vo(){return At[(Zr+=4)-4>>2]}function Zs(g){if(g===void 0)return"_unknown";var h=(g=g.replace(/[^a-zA-Z0-9_]/g,"$")).charCodeAt(0);return 48<=h&&57>=h?`_${g}`:g}function Qr(g,h){return g=Zs(g),{[g]:function(){return h.apply(this,arguments)}}[g]}function Qs(){this.M=[void 0],this.hb=[]}var to=new Qs,sr=void 0;function ge(g){throw new sr(g)}var oo=g=>(g||ge("Cannot use deleted val. handle = "+g),to.get(g).value),io=g=>{switch(g){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:return to.pa({tb:1,value:g})}};function ta(g){var h=Error,k=Qr(g,function(I){this.name=g,this.message=I,(I=Error(I).stack)!==void 0&&(this.stack=this.toString()+`
`+I.replace(/^Error(:[^\n]*)?\n/,""))});return k.prototype=Object.create(h.prototype),k.prototype.constructor=k,k.prototype.toString=function(){return this.message===void 0?this.name:`${this.name}: ${this.message}`},k}var ea=void 0,na=void 0;function en(g){for(var h="";it[g];)h+=na[it[g++]];return h}var Ar=[];function Ki(){for(;Ar.length;){var g=Ar.pop();g.g.fa=!1,g.delete()}}var Mr=void 0,wo={};function Xi(g,h){for(h===void 0&&ge("ptr should not be undefined");g.A;)h=g.na(h),g=g.A;return h}var Go={};function oa(g){var h=en(g=Ca(g));return xo(g),h}function kr(g,h){var k=Go[g];return k===void 0&&ge(h+" has unknown type "+oa(g)),k}function ti(){}var Ji=!1;function ra(g){--g.count.value,g.count.value===0&&(g.G?g.L.W(g.G):g.u.i.W(g.o))}function ia(g,h,k){return h===k?g:k.A===void 0||(g=ia(g,h,k.A))===null?null:k.Pb(g)}var sa={},aa=void 0;function ei(g){throw new aa(g)}function ni(g,h){return h.u&&h.o||ei("makeClassHandle requires ptr and ptrType"),!!h.L!=!!h.G&&ei("Both smartPtrType and smartPtr must be specified"),h.count={value:1},Sr(Object.create(g,{g:{value:h}}))}function Sr(g){return typeof FinalizationRegistry>"u"?(Sr=h=>h,g):(Ji=new FinalizationRegistry(h=>{ra(h.g)}),ti=h=>{Ji.unregister(h)},(Sr=h=>{var k=h.g;return k.G&&Ji.register(h,{g:k},h),h})(g))}var oi={};function Tr(g){for(;g.length;){var h=g.pop();g.pop()(h)}}function Er(g){return this.fromWireType(At[g>>2])}var ar={},ri={};function Yn(g,h,k){function I(et){(et=k(et)).length!==g.length&&ei("Mismatched type converter count");for(var ft=0;ft<g.length;++ft)so(g[ft],et[ft])}g.forEach(function(et){ri[et]=h});var D=Array(h.length),B=[],W=0;h.forEach((et,ft)=>{Go.hasOwnProperty(et)?D[ft]=Go[et]:(B.push(et),ar.hasOwnProperty(et)||(ar[et]=[]),ar[et].push(()=>{D[ft]=Go[et],++W===B.length&&I(D)}))}),B.length===0&&I(D)}function ii(g){switch(g){case 1:return 0;case 2:return 1;case 4:return 2;case 8:return 3;default:throw new TypeError(`Unknown type size: ${g}`)}}function so(g,h,k={}){if(!("argPackAdvance"in h))throw new TypeError("registerType registeredInstance requires argPackAdvance");(function(I,D,B={}){var W=D.name;if(I||ge(`type "${W}" must have a positive integer typeid pointer`),Go.hasOwnProperty(I)){if(B.$b)return;ge(`Cannot register type '${W}' twice`)}Go[I]=D,delete ri[I],ar.hasOwnProperty(I)&&(D=ar[I],delete ar[I],D.forEach(et=>et()))})(g,h,k)}function Zi(g){ge(g.g.u.i.name+" instance already deleted")}function Ro(){}function Qi(g,h,k){if(g[h].B===void 0){var I=g[h];g[h]=function(){return g[h].B.hasOwnProperty(arguments.length)||ge(`Function '${k}' called with an invalid number of arguments (${arguments.length}) - expects one of (${g[h].B})!`),g[h].B[arguments.length].apply(this,arguments)},g[h].B=[],g[h].B[I.ea]=I}}function ts(g,h,k){p.hasOwnProperty(g)?((k===void 0||p[g].B!==void 0&&p[g].B[k]!==void 0)&&ge(`Cannot register public name '${g}' twice`),Qi(p,g,g),p.hasOwnProperty(k)&&ge(`Cannot register multiple overloads of a function with the same number of arguments (${k})!`),p[g].B[k]=h):(p[g]=h,k!==void 0&&(p[g].Pc=k))}function vm(g,h,k,I,D,B,W,et){this.name=g,this.constructor=h,this.N=k,this.W=I,this.A=D,this.Ub=B,this.na=W,this.Pb=et,this.qb=[]}function si(g,h,k){for(;h!==k;)h.na||ge(`Expected null or instance of ${k.name}, got an instance of ${h.name}`),g=h.na(g),h=h.A;return g}function wm(g,h){return h===null?(this.Na&&ge(`null is not a valid ${this.name}`),0):(h.g||ge(`Cannot pass "${ns(h)}" as a ${this.name}`),h.g.o||ge(`Cannot pass deleted object as a pointer of type ${this.name}`),si(h.g.o,h.g.u.i,this.i))}function ym(g,h){if(h===null){if(this.Na&&ge(`null is not a valid ${this.name}`),this.ua){var k=this.Pa();return g!==null&&g.push(this.W,k),k}return 0}if(h.g||ge(`Cannot pass "${ns(h)}" as a ${this.name}`),h.g.o||ge(`Cannot pass deleted object as a pointer of type ${this.name}`),!this.ta&&h.g.u.ta&&ge(`Cannot convert argument of type ${h.g.L?h.g.L.name:h.g.u.name} to parameter type ${this.name}`),k=si(h.g.o,h.g.u.i,this.i),this.ua)switch(h.g.G===void 0&&ge("Passing raw pointer to smart pointer is illegal"),this.tc){case 0:h.g.L===this?k=h.g.G:ge(`Cannot convert argument of type ${h.g.L?h.g.L.name:h.g.u.name} to parameter type ${this.name}`);break;case 1:k=h.g.G;break;case 2:if(h.g.L===this)k=h.g.G;else{var I=h.clone();k=this.oc(k,io(function(){I.delete()})),g!==null&&g.push(this.W,k)}break;default:ge("Unsupporting sharing policy")}return k}function bm(g,h){return h===null?(this.Na&&ge(`null is not a valid ${this.name}`),0):(h.g||ge(`Cannot pass "${ns(h)}" as a ${this.name}`),h.g.o||ge(`Cannot pass deleted object as a pointer of type ${this.name}`),h.g.u.ta&&ge(`Cannot convert argument of type ${h.g.u.name} to parameter type ${this.name}`),si(h.g.o,h.g.u.i,this.i))}function yo(g,h,k,I){this.name=g,this.i=h,this.Na=k,this.ta=I,this.ua=!1,this.W=this.oc=this.Pa=this.rb=this.tc=this.nc=void 0,h.A!==void 0?this.toWireType=ym:(this.toWireType=I?wm:bm,this.K=null)}function ca(g,h,k){p.hasOwnProperty(g)||ei("Replacing nonexistant public symbol"),p[g].B!==void 0&&k!==void 0?p[g].B[k]=h:(p[g]=h,p[g].ea=k)}var ai=[],la=g=>{var h=ai[g];return h||(g>=ai.length&&(ai.length=g+1),ai[g]=h=S.get(g)),h};function Rn(g,h){var k=(g=en(g)).includes("j")?((I,D)=>{var B=[];return function(){if(B.length=0,Object.assign(B,arguments),I.includes("j")){var W=p["dynCall_"+I];W=B&&B.length?W.apply(null,[D].concat(B)):W.call(null,D)}else W=la(D).apply(null,B);return W}})(g,h):la(h);return typeof k!="function"&&ge(`unknown function pointer with signature ${g}: ${h}`),k}var ua=void 0;function bo(g,h){var k=[],I={};throw h.forEach(function D(B){I[B]||Go[B]||(ri[B]?ri[B].forEach(D):(k.push(B),I[B]=!0))}),new ua(`${g}: `+k.map(oa).join([", "]))}function ci(g,h,k,I,D){var B=h.length;2>B&&ge("argTypes array size mismatch! Must at least get return value and 'this' types!");var W=h[1]!==null&&k!==null,et=!1;for(k=1;k<h.length;++k)if(h[k]!==null&&h[k].K===void 0){et=!0;break}var ft=h[0].name!=="void",nt=B-2,Rt=Array(nt),Nt=[],Bt=[];return function(){if(arguments.length!==nt&&ge(`function ${g} called with ${arguments.length} arguments, expected ${nt} args!`),Bt.length=0,Nt.length=W?2:1,Nt[0]=D,W){var jt=h[1].toWireType(Bt,this);Nt[1]=jt}for(var Ot=0;Ot<nt;++Ot)Rt[Ot]=h[Ot+2].toWireType(Bt,arguments[Ot]),Nt.push(Rt[Ot]);if(Ot=I.apply(null,Nt),et)Tr(Bt);else for(var It=W?1:2;It<h.length;It++){var Ce=It===1?jt:Rt[It-2];h[It].K!==null&&h[It].K(Ce)}return jt=ft?h[0].fromWireType(Ot):void 0}}function li(g,h){for(var k=[],I=0;I<g;I++)k.push(Ht[h+4*I>>2]);return k}function da(g,h,k){return g instanceof Object||ge(`${k} with invalid "this": ${g}`),g instanceof h.i.constructor||ge(`${k} incompatible with "this" of type ${g.constructor.name}`),g.g.o||ge(`cannot call emscripten binding method ${k} on deleted object`),si(g.g.o,g.g.u.i,h.i)}function es(g){g>=to.h&&--to.get(g).tb==0&&to.Zb(g)}function xm(g,h,k){switch(h){case 0:return function(I){return this.fromWireType((k?ht:it)[I])};case 1:return function(I){return this.fromWireType((k?xt:ee)[I>>1])};case 2:return function(I){return this.fromWireType((k?At:Ht)[I>>2])};default:throw new TypeError("Unknown integer type: "+g)}}function ns(g){if(g===null)return"null";var h=typeof g;return h==="object"||h==="array"||h==="function"?g.toString():""+g}function _m(g,h){switch(h){case 2:return function(k){return this.fromWireType(De[k>>2])};case 3:return function(k){return this.fromWireType(Ee[k>>3])};default:throw new TypeError("Unknown float type: "+g)}}function Cm(g,h,k){switch(h){case 0:return k?function(I){return ht[I]}:function(I){return it[I]};case 1:return k?function(I){return xt[I>>1]}:function(I){return ee[I>>1]};case 2:return k?function(I){return At[I>>2]}:function(I){return Ht[I>>2]};default:throw new TypeError("Unknown integer type: "+g)}}var $a=typeof TextDecoder<"u"?new TextDecoder("utf-16le"):void 0,Am=(g,h)=>{for(var k=g>>1,I=k+h/2;!(k>=I)&&ee[k];)++k;if(32<(k<<=1)-g&&$a)return $a.decode(it.subarray(g,k));for(k="",I=0;!(I>=h/2);++I){var D=xt[g+2*I>>1];if(D==0)break;k+=String.fromCharCode(D)}return k},Mm=(g,h,k)=>{if(k===void 0&&(k=2147483647),2>k)return 0;var I=h;k=(k-=2)<2*g.length?k/2:g.length;for(var D=0;D<k;++D)xt[h>>1]=g.charCodeAt(D),h+=2;return xt[h>>1]=0,h-I},km=g=>2*g.length,Sm=(g,h)=>{for(var k=0,I="";!(k>=h/4);){var D=At[g+4*k>>2];if(D==0)break;++k,65536<=D?(D-=65536,I+=String.fromCharCode(55296|D>>10,56320|1023&D)):I+=String.fromCharCode(D)}return I},Tm=(g,h,k)=>{if(k===void 0&&(k=2147483647),4>k)return 0;var I=h;k=I+k-4;for(var D=0;D<g.length;++D){var B=g.charCodeAt(D);if(55296<=B&&57343>=B&&(B=65536+((1023&B)<<10)|1023&g.charCodeAt(++D)),At[h>>2]=B,(h+=4)+4>k)break}return At[h>>2]=0,h-I},Em=g=>{for(var h=0,k=0;k<g.length;++k){var I=g.charCodeAt(k);55296<=I&&57343>=I&&++k,h+=4}return h},Im={};function ui(g){var h=Im[g];return h===void 0?en(g):h}var os,di=[],fa=[],rs=[],is={},ma=()=>{if(!os){var g,h={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:X||"./this.program"};for(g in is)is[g]===void 0?delete h[g]:h[g]=is[g];var k=[];for(g in h)k.push(`${g}=${h[g]}`);os=k}return os},$i=g=>g%4==0&&(g%100!=0||g%400==0),pa=[31,29,31,30,31,30,31,31,30,31,30,31],ga=[31,28,31,30,31,30,31,31,30,31,30,31];function ha(g,h,k,I){g||(g=this),this.parent=g,this.U=g.U,this.wa=null,this.id=ne++,this.name=h,this.mode=k,this.l={},this.m={},this.za=I}Object.defineProperties(ha.prototype,{read:{get:function(){return!(365&~this.mode)},set:function(g){g?this.mode|=365:this.mode&=-366}},write:{get:function(){return!(146&~this.mode)},set:function(g){g?this.mode|=146:this.mode&=-147}}}),Js(),ae=Array(4096),qo(gt,"/"),bn("/tmp",16895,0),bn("/home",16895,0),bn("/home/web_user",16895,0),(()=>{bn("/dev",16895,0),jo(259,{read:()=>0,write:(I,D,B,W)=>W}),Wo("/dev/null",259),Vn(1280,qe),Vn(1536,En),Wo("/dev/tty",1280),Wo("/dev/tty1",1536);var g=new Uint8Array(1024),h=0,k=()=>(h===0&&(h=Pn(g).byteLength),g[--h]);Cr("random",k),Cr("urandom",k),bn("/dev/shm",16895,0),bn("/dev/shm/tmp",16895,0)})(),(()=>{bn("/proc",16895,0);var g=bn("/proc/self",16895,0);bn("/proc/self/fd",16895,0),qo({U:()=>{var h=pt(g,"fd",16895,73);return h.l={ka:(k,I)=>{var D=Mn(+I);return(k={parent:null,U:{mb:"fake"},l:{ma:()=>D.path}}).parent=k}},h}},"/proc/self/fd")})(),Object.assign(Qs.prototype,{get(g){return this.M[g]},has(g){return this.M[g]!==void 0},pa(g){var h=this.hb.pop()||this.M.length;return this.M[h]=g,h},Zb(g){this.M[g]=void 0,this.hb.push(g)}}),sr=p.BindingError=class extends Error{constructor(g){super(g),this.name="BindingError"}},to.M.push({value:void 0},{value:null},{value:!0},{value:!1}),to.h=to.M.length,p.count_emval_handles=function(){for(var g=0,h=to.h;h<to.M.length;++h)to.M[h]!==void 0&&++g;return g},ea=p.PureVirtualError=ta("PureVirtualError");for(var va=Array(256),fi=0;256>fi;++fi)va[fi]=String.fromCharCode(fi);na=va,p.getInheritedInstanceCount=function(){return Object.keys(wo).length},p.getLiveInheritedInstances=function(){var g,h=[];for(g in wo)wo.hasOwnProperty(g)&&h.push(wo[g]);return h},p.flushPendingDeletes=Ki,p.setDelayFunction=function(g){Mr=g,Ar.length&&Mr&&Mr(Ki)},aa=p.InternalError=class extends Error{constructor(g){super(g),this.name="InternalError"}},Ro.prototype.isAliasOf=function(g){if(!(this instanceof Ro&&g instanceof Ro))return!1;var h=this.g.u.i,k=this.g.o,I=g.g.u.i;for(g=g.g.o;h.A;)k=h.na(k),h=h.A;for(;I.A;)g=I.na(g),I=I.A;return h===I&&k===g},Ro.prototype.clone=function(){if(this.g.o||Zi(this),this.g.ia)return this.g.count.value+=1,this;var g=Sr,h=Object,k=h.create,I=Object.getPrototypeOf(this),D=this.g;return(g=g(k.call(h,I,{g:{value:{count:D.count,fa:D.fa,ia:D.ia,o:D.o,u:D.u,G:D.G,L:D.L}}}))).g.count.value+=1,g.g.fa=!1,g},Ro.prototype.delete=function(){this.g.o||Zi(this),this.g.fa&&!this.g.ia&&ge("Object already scheduled for deletion"),ti(this),ra(this.g),this.g.ia||(this.g.G=void 0,this.g.o=void 0)},Ro.prototype.isDeleted=function(){return!this.g.o},Ro.prototype.deleteLater=function(){return this.g.o||Zi(this),this.g.fa&&!this.g.ia&&ge("Object already scheduled for deletion"),Ar.push(this),Ar.length===1&&Mr&&Mr(Ki),this.g.fa=!0,this},yo.prototype.Vb=function(g){return this.rb&&(g=this.rb(g)),g},yo.prototype.ab=function(g){this.W&&this.W(g)},yo.prototype.argPackAdvance=8,yo.prototype.readValueFromPointer=Er,yo.prototype.deleteObject=function(g){g!==null&&g.delete()},yo.prototype.fromWireType=function(g){function h(){return this.ua?ni(this.i.N,{u:this.nc,o:k,L:this,G:g}):ni(this.i.N,{u:this,o:g})}var k=this.Vb(g);if(!k)return this.ab(g),null;var I=function(B,W){return W=Xi(B,W),wo[W]}(this.i,k);if(I!==void 0)return I.g.count.value===0?(I.g.o=k,I.g.G=g,I.clone()):(I=I.clone(),this.ab(g),I);if(I=this.i.Ub(k),!(I=sa[I]))return h.call(this);I=this.ta?I.Kb:I.pointerType;var D=ia(k,this.i,I.i);return D===null?h.call(this):this.ua?ni(I.i.N,{u:I,o:D,L:this,G:g}):ni(I.i.N,{u:I,o:D})},ua=p.UnboundTypeError=ta("UnboundTypeError");var wa={__syscall_fcntl64:function(g,h,k){Zr=k;try{var I=Mn(g);switch(h){case 0:var D=vo();return 0>D?-28:Lo(I,D).X;case 1:case 2:case 6:case 7:return 0;case 3:return I.flags;case 4:return D=vo(),I.flags|=D,0;case 5:return D=vo(),xt[D+0>>1]=2,0;case 16:case 8:default:return-28;case 9:return At[_a()>>2]=28,-1}}catch(B){if(Vo===void 0||B.name!=="ErrnoError")throw B;return-B.aa}},__syscall_ioctl:function(g,h,k){Zr=k;try{var I=Mn(g);switch(h){case 21509:case 21510:case 21511:case 21512:case 21524:case 21515:return I.s?0:-59;case 21505:if(!I.s)return-59;if(I.s.V.bc){h=[3,28,127,21,4,0,1,0,17,19,26,0,18,15,23,22,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];var D=vo();At[D>>2]=25856,At[D+4>>2]=5,At[D+8>>2]=191,At[D+12>>2]=35387;for(var B=0;32>B;B++)ht[D+B+17|0]=h[B]||0}return 0;case 21506:case 21507:case 21508:if(!I.s)return-59;if(I.s.V.cc)for(D=vo(),h=[],B=0;32>B;B++)h.push(ht[D+B+17|0]);return 0;case 21519:return I.s?(D=vo(),At[D>>2]=0):-59;case 21520:return I.s?-28:-59;case 21531:if(D=vo(),!I.m.ac)throw new Tt(59);return I.m.ac(I,h,D);case 21523:return I.s?(I.s.V.dc&&(B=[24,80],D=vo(),xt[D>>1]=B[0],xt[D+2>>1]=B[1]),0):-59;default:return-28}}catch(W){if(Vo===void 0||W.name!=="ErrnoError")throw W;return-W.aa}},__syscall_openat:function(g,h,k,I){Zr=I;try{var D=h=h?Xe(it,h):"";if(D.charAt(0)==="/")h=D;else{var B=g===-100?"/":Mn(g).path;if(D.length==0)throw new Tt(44);h=$n(B+"/"+D)}var W=I?vo():0;return no(h,k,W).X}catch(et){if(Vo===void 0||et.name!=="ErrnoError")throw et;return-et.aa}},_embind_create_inheriting_constructor:function(g,h,k){g=en(g),h=kr(h,"wrapper"),k=oo(k);var I=[].slice,D=h.i,B=D.N,W=D.A.N,et=D.A.constructor;for(var ft in g=Qr(g,function(){D.A.qb.forEach((function(nt){if(this[nt]===W[nt])throw new ea(`Pure virtual function ${nt} must be implemented in JavaScript`)}).bind(this)),Object.defineProperty(this,"__parent",{value:B}),this.__construct.apply(this,I.call(arguments))}),B.__construct=function(){this===B&&ge("Pass correct 'this' to __construct");var nt=et.implement.apply(void 0,[this].concat(I.call(arguments)));ti(nt);var Rt=nt.g;nt.notifyOnDestruction(),Rt.ia=!0,Object.defineProperties(this,{g:{value:Rt}}),Sr(this),nt=Rt.o,nt=Xi(D,nt),wo.hasOwnProperty(nt)?ge(`Tried to register registered instance: ${nt}`):wo[nt]=this},B.__destruct=function(){this===B&&ge("Pass correct 'this' to __destruct"),ti(this);var nt=this.g.o;nt=Xi(D,nt),wo.hasOwnProperty(nt)?delete wo[nt]:ge(`Tried to unregister unregistered instance: ${nt}`)},g.prototype=Object.create(B),k)g.prototype[ft]=k[ft];return io(g)},_embind_finalize_value_object:function(g){var h=oi[g];delete oi[g];var k=h.Pa,I=h.W,D=h.eb;Yn([g],D.map(B=>B.Yb).concat(D.map(B=>B.rc)),B=>{var W={};return D.forEach((et,ft)=>{var nt=B[ft],Rt=et.Wb,Nt=et.Xb,Bt=B[ft+D.length],jt=et.qc,Ot=et.sc;W[et.Sb]={read:It=>nt.fromWireType(Rt(Nt,It)),write:(It,Ce)=>{var at=[];jt(Ot,It,Bt.toWireType(at,Ce)),Tr(at)}}}),[{name:h.name,fromWireType:function(et){var ft,nt={};for(ft in W)nt[ft]=W[ft].read(et);return I(et),nt},toWireType:function(et,ft){for(var nt in W)if(!(nt in ft))throw new TypeError(`Missing field: "${nt}"`);var Rt=k();for(nt in W)W[nt].write(Rt,ft[nt]);return et!==null&&et.push(I,Rt),Rt},argPackAdvance:8,readValueFromPointer:Er,K:I}]})},_embind_register_bigint:function(){},_embind_register_bool:function(g,h,k,I,D){var B=ii(k);so(g,{name:h=en(h),fromWireType:function(W){return!!W},toWireType:function(W,et){return et?I:D},argPackAdvance:8,readValueFromPointer:function(W){if(k===1)var et=ht;else if(k===2)et=xt;else{if(k!==4)throw new TypeError("Unknown boolean type size: "+h);et=At}return this.fromWireType(et[W>>B])},K:null})},_embind_register_class:function(g,h,k,I,D,B,W,et,ft,nt,Rt,Nt,Bt){Rt=en(Rt),B=Rn(D,B),et&&(et=Rn(W,et)),nt&&(nt=Rn(ft,nt)),Bt=Rn(Nt,Bt);var jt=Zs(Rt);ts(jt,function(){bo(`Cannot construct ${Rt} due to unbound types`,[I])}),Yn([g,h,k],I?[I]:[],function(Ot){if(Ot=Ot[0],I)var It=Ot.i,Ce=It.N;else Ce=Ro.prototype;Ot=Qr(jt,function(){if(Object.getPrototypeOf(this)!==at)throw new sr("Use 'new' to construct "+Rt);if(bt.$===void 0)throw new sr(Rt+" has no accessible constructor");var Ke=bt.$[arguments.length];if(Ke===void 0)throw new sr(`Tried to invoke ctor of ${Rt} with invalid number of parameters (${arguments.length}) - expected (${Object.keys(bt.$).toString()}) parameters instead!`);return Ke.apply(this,arguments)});var at=Object.create(Ce,{constructor:{value:Ot}});Ot.prototype=at;var bt=new vm(Rt,Ot,at,Bt,It,B,et,nt);bt.A&&(bt.A.oa===void 0&&(bt.A.oa=[]),bt.A.oa.push(bt)),It=new yo(Rt,bt,!0,!1),Ce=new yo(Rt+"*",bt,!1,!1);var de=new yo(Rt+" const*",bt,!1,!0);return sa[g]={pointerType:Ce,Kb:de},ca(jt,Ot),[It,Ce,de]})},_embind_register_class_class_function:function(g,h,k,I,D,B,W){var et=li(k,I);h=en(h),B=Rn(D,B),Yn([],[g],function(ft){function nt(){bo(`Cannot call ${Rt} due to unbound types`,et)}var Rt=`${(ft=ft[0]).name}.${h}`;h.startsWith("@@")&&(h=Symbol[h.substring(2)]);var Nt=ft.i.constructor;return Nt[h]===void 0?(nt.ea=k-1,Nt[h]=nt):(Qi(Nt,h,Rt),Nt[h].B[k-1]=nt),Yn([],et,function(Bt){if(Bt=ci(Rt,[Bt[0],null].concat(Bt.slice(1)),null,B,W),Nt[h].B===void 0?(Bt.ea=k-1,Nt[h]=Bt):Nt[h].B[k-1]=Bt,ft.i.oa)for(const jt of ft.i.oa)jt.constructor.hasOwnProperty(h)||(jt.constructor[h]=Bt);return[]}),[]})},_embind_register_class_class_property:function(g,h,k,I,D,B,W,et){h=en(h),B=Rn(D,B),Yn([],[g],function(ft){var nt=`${(ft=ft[0]).name}.${h}`,Rt={get(){bo(`Cannot access ${nt} due to unbound types`,[k])},enumerable:!0,configurable:!0};return Rt.set=et?()=>{bo(`Cannot access ${nt} due to unbound types`,[k])}:()=>{ge(`${nt} is a read-only property`)},Object.defineProperty(ft.i.constructor,h,Rt),Yn([],[k],function(Nt){Nt=Nt[0];var Bt={get:()=>Nt.fromWireType(B(I)),enumerable:!0};return et&&(et=Rn(W,et),Bt.set=jt=>{var Ot=[];et(I,Nt.toWireType(Ot,jt)),Tr(Ot)}),Object.defineProperty(ft.i.constructor,h,Bt),[]}),[]})},_embind_register_class_constructor:function(g,h,k,I,D,B){var W=li(h,k);D=Rn(I,D),Yn([],[g],function(et){var ft=`constructor ${(et=et[0]).name}`;if(et.i.$===void 0&&(et.i.$=[]),et.i.$[h-1]!==void 0)throw new sr(`Cannot register multiple constructors with identical number of parameters (${h-1}) for class '${et.name}'! Overload resolution is currently only performed using the parameter count, not actual type info!`);return et.i.$[h-1]=()=>{bo(`Cannot construct ${et.name} due to unbound types`,W)},Yn([],W,function(nt){return nt.splice(1,0,null),et.i.$[h-1]=ci(ft,nt,null,D,B),[]}),[]})},_embind_register_class_function:function(g,h,k,I,D,B,W,et){var ft=li(k,I);h=en(h),B=Rn(D,B),Yn([],[g],function(nt){function Rt(){bo(`Cannot call ${Nt} due to unbound types`,ft)}var Nt=`${(nt=nt[0]).name}.${h}`;h.startsWith("@@")&&(h=Symbol[h.substring(2)]),et&&nt.i.qb.push(h);var Bt=nt.i.N,jt=Bt[h];return jt===void 0||jt.B===void 0&&jt.className!==nt.name&&jt.ea===k-2?(Rt.ea=k-2,Rt.className=nt.name,Bt[h]=Rt):(Qi(Bt,h,Nt),Bt[h].B[k-2]=Rt),Yn([],ft,function(Ot){return Ot=ci(Nt,Ot,nt,B,W),Bt[h].B===void 0?(Ot.ea=k-2,Bt[h]=Ot):Bt[h].B[k-2]=Ot,[]}),[]})},_embind_register_class_property:function(g,h,k,I,D,B,W,et,ft,nt){h=en(h),D=Rn(I,D),Yn([],[g],function(Rt){var Nt=`${(Rt=Rt[0]).name}.${h}`,Bt={get(){bo(`Cannot access ${Nt} due to unbound types`,[k,W])},enumerable:!0,configurable:!0};return Bt.set=ft?()=>{bo(`Cannot access ${Nt} due to unbound types`,[k,W])}:()=>{ge(Nt+" is a read-only property")},Object.defineProperty(Rt.i.N,h,Bt),Yn([],ft?[k,W]:[k],function(jt){var Ot=jt[0],It={get(){var at=da(this,Rt,Nt+" getter");return Ot.fromWireType(D(B,at))},enumerable:!0};if(ft){ft=Rn(et,ft);var Ce=jt[1];It.set=function(at){var bt=da(this,Rt,Nt+" setter"),de=[];ft(nt,bt,Ce.toWireType(de,at)),Tr(de)}}return Object.defineProperty(Rt.i.N,h,It),[]}),[]})},_embind_register_emval:function(g,h){so(g,{name:h=en(h),fromWireType:function(k){var I=oo(k);return es(k),I},toWireType:function(k,I){return io(I)},argPackAdvance:8,readValueFromPointer:Er,K:null})},_embind_register_enum:function(g,h,k,I){function D(){}k=ii(k),h=en(h),D.values={},so(g,{name:h,constructor:D,fromWireType:function(B){return this.constructor.values[B]},toWireType:function(B,W){return W.value},argPackAdvance:8,readValueFromPointer:xm(h,k,I),K:null}),ts(h,D)},_embind_register_enum_value:function(g,h,k){var I=kr(g,"enum");h=en(h),g=I.constructor,I=Object.create(I.constructor.prototype,{value:{value:k},constructor:{value:Qr(`${I.name}_${h}`,function(){})}}),g.values[k]=I,g[h]=I},_embind_register_float:function(g,h,k){k=ii(k),so(g,{name:h=en(h),fromWireType:function(I){return I},toWireType:function(I,D){return D},argPackAdvance:8,readValueFromPointer:_m(h,k),K:null})},_embind_register_function:function(g,h,k,I,D,B){var W=li(h,k);g=en(g),D=Rn(I,D),ts(g,function(){bo(`Cannot call ${g} due to unbound types`,W)},h-1),Yn([],W,function(et){return ca(g,ci(g,[et[0],null].concat(et.slice(1)),null,D,B),h-1),[]})},_embind_register_integer:function(g,h,k,I,D){h=en(h),D===-1&&(D=4294967295),D=ii(k);var B=et=>et;if(I===0){var W=32-8*k;B=et=>et<<W>>>W}k=h.includes("unsigned")?function(et,ft){return ft>>>0}:function(et,ft){return ft},so(g,{name:h,fromWireType:B,toWireType:k,argPackAdvance:8,readValueFromPointer:Cm(h,D,I!==0),K:null})},_embind_register_memory_view:function(g,h,k){function I(B){B>>=2;var W=Ht;return new D(W.buffer,W[B+1],W[B])}var D=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array][h];so(g,{name:k=en(k),fromWireType:I,argPackAdvance:8,readValueFromPointer:I},{$b:!0})},_embind_register_std_string:function(g,h){var k=(h=en(h))==="std::string";so(g,{name:h,fromWireType:function(I){var D=Ht[I>>2],B=I+4;if(k)for(var W=B,et=0;et<=D;++et){var ft=B+et;if(et==D||it[ft]==0){if(W=W?Xe(it,W,ft-W):"",nt===void 0)var nt=W;else nt+="\0",nt+=W;W=ft+1}}else{for(nt=Array(D),et=0;et<D;++et)nt[et]=String.fromCharCode(it[B+et]);nt=nt.join("")}return xo(I),nt},toWireType:function(I,D){D instanceof ArrayBuffer&&(D=new Uint8Array(D));var B=typeof D=="string";B||D instanceof Uint8Array||D instanceof Uint8ClampedArray||D instanceof Int8Array||ge("Cannot pass non-string to std::string");var W=k&&B?Wt(D):D.length,et=ss(4+W+1),ft=et+4;if(Ht[et>>2]=W,k&&B)Fn(D,it,ft,W+1);else if(B)for(B=0;B<W;++B){var nt=D.charCodeAt(B);255<nt&&(xo(ft),ge("String has UTF-16 code units that do not fit in 8 bits")),it[ft+B]=nt}else for(B=0;B<W;++B)it[ft+B]=D[B];return I!==null&&I.push(xo,et),et},argPackAdvance:8,readValueFromPointer:Er,K:function(I){xo(I)}})},_embind_register_std_wstring:function(g,h,k){if(k=en(k),h===2)var I=Am,D=Mm,B=km,W=()=>ee,et=1;else h===4&&(I=Sm,D=Tm,B=Em,W=()=>Ht,et=2);so(g,{name:k,fromWireType:function(ft){for(var nt,Rt=Ht[ft>>2],Nt=W(),Bt=ft+4,jt=0;jt<=Rt;++jt){var Ot=ft+4+jt*h;jt!=Rt&&Nt[Ot>>et]!=0||(Bt=I(Bt,Ot-Bt),nt===void 0?nt=Bt:(nt+="\0",nt+=Bt),Bt=Ot+h)}return xo(ft),nt},toWireType:function(ft,nt){typeof nt!="string"&&ge(`Cannot pass non-string to C++ string type ${k}`);var Rt=B(nt),Nt=ss(4+Rt+h);return Ht[Nt>>2]=Rt>>et,D(nt,Nt+4,Rt+h),ft!==null&&ft.push(xo,Nt),Nt},argPackAdvance:8,readValueFromPointer:Er,K:function(ft){xo(ft)}})},_embind_register_value_object:function(g,h,k,I,D,B){oi[g]={name:en(h),Pa:Rn(k,I),W:Rn(D,B),eb:[]}},_embind_register_value_object_field:function(g,h,k,I,D,B,W,et,ft,nt){oi[g].eb.push({Sb:en(h),Yb:k,Wb:Rn(I,D),Xb:B,rc:W,qc:Rn(et,ft),sc:nt})},_embind_register_void:function(g,h){so(g,{fc:!0,name:h=en(h),argPackAdvance:0,fromWireType:function(){},toWireType:function(){}})},_emscripten_get_now_is_monotonic:()=>!0,_emval_as:function(g,h,k){g=oo(g),h=kr(h,"emval::as");var I=[],D=io(I);return Ht[k>>2]=D,h.toWireType(I,g)},_emval_call_method:function(g,h,k,I,D){g=di[g],h=oo(h),k=ui(k);var B=[];return Ht[I>>2]=io(B),g(h,k,B,D)},_emval_call_void_method:function(g,h,k,I){(g=di[g])(h=oo(h),k=ui(k),null,I)},_emval_decref:es,_emval_get_method_caller:function(g,h){var k=function(W,et){for(var ft=Array(W),nt=0;nt<W;++nt)ft[nt]=kr(Ht[et+4*nt>>2],"parameter "+nt);return ft}(g,h),I=k[0];h=I.name+"_$"+k.slice(1).map(function(W){return W.name}).join("_")+"$";var D=fa[h];if(D!==void 0)return D;var B=Array(g-1);return D=function(W){var et=di.length;return di.push(W),et}((W,et,ft,nt)=>{for(var Rt=0,Nt=0;Nt<g-1;++Nt)B[Nt]=k[Nt+1].readValueFromPointer(nt+Rt),Rt+=k[Nt+1].argPackAdvance;for(W=W[et].apply(W,B),Nt=0;Nt<g-1;++Nt)k[Nt+1].Nb&&k[Nt+1].Nb(B[Nt]);if(!I.fc)return I.toWireType(ft,W)}),fa[h]=D},_emval_get_module_property:function(g){return g=ui(g),io(p[g])},_emval_get_property:function(g,h){return g=oo(g),h=oo(h),io(g[h])},_emval_incref:function(g){4<g&&(to.get(g).tb+=1)},_emval_new_cstring:function(g){return io(ui(g))},_emval_new_object:function(){return io({})},_emval_run_destructors:function(g){Tr(oo(g)),es(g)},_emval_set_property:function(g,h,k){g=oo(g),h=oo(h),k=oo(k),g[h]=k},_emval_take_value:function(g,h){return g=(g=kr(g,"_emval_take_value")).readValueFromPointer(h),io(g)},abort:()=>{re("")},emscripten_asm_const_int:(g,h,k)=>{var I;for(rs.length=0,k>>=2;I=it[h++];)k+=I!=105&k,rs.push(I==105?At[k]:Ee[k++>>1]),++k;return Cn[g].apply(null,rs)},emscripten_date_now:function(){return Date.now()},emscripten_get_now:()=>performance.now(),emscripten_memcpy_big:(g,h,k)=>it.copyWithin(g,h,h+k),emscripten_resize_heap:g=>{var h=it.length;if(2147483648<(g>>>=0))return!1;for(var k=1;4>=k;k*=2){var I=h*(1+.2/k);I=Math.min(I,g+100663296);var D=Math;I=Math.max(g,I);t:{D=D.min.call(D,2147483648,I+(65536-I%65536)%65536)-lt.buffer.byteLength+65535>>>16;try{lt.grow(D),z();var B=1;break t}catch{}B=void 0}if(B)return!0}return!1},environ_get:(g,h)=>{var k=0;return ma().forEach(function(I,D){var B=h+k;for(D=Ht[g+4*D>>2]=B,B=0;B<I.length;++B)ht[0|D++]=I.charCodeAt(B);ht[0|D]=0,k+=I.length+1}),0},environ_sizes_get:(g,h)=>{var k=ma();Ht[g>>2]=k.length;var I=0;return k.forEach(function(D){I+=D.length+1}),Ht[h>>2]=I,0},fd_close:function(g){try{var h=Mn(g);if(h.X===null)throw new Tt(8);h.Ma&&(h.Ma=null);try{h.m.close&&h.m.close(h)}catch(k){throw k}finally{ue[h.X]=null}return h.X=null,0}catch(k){if(Vo===void 0||k.name!=="ErrnoError")throw k;return k.aa}},fd_read:function(g,h,k,I){try{t:{var D=Mn(g);g=h;for(var B,W=h=0;W<k;W++){var et=Ht[g>>2],ft=Ht[g+4>>2];g+=8;var nt=D,Rt=et,Nt=ft,Bt=B,jt=ht;if(0>Nt||0>Bt)throw new Tt(28);if(nt.X===null)throw new Tt(8);if((2097155&nt.flags)==1)throw new Tt(8);if((61440&nt.node.mode)==16384)throw new Tt(31);if(!nt.m.read)throw new Tt(28);var Ot=Bt!==void 0;if(Ot){if(!nt.seekable)throw new Tt(70)}else Bt=nt.position;var It=nt.m.read(nt,jt,Rt,Nt,Bt);Ot||(nt.position+=It);var Ce=It;if(0>Ce){var at=-1;break t}if(h+=Ce,Ce<ft)break;B!==void 0&&(B+=Ce)}at=h}return Ht[I>>2]=at,0}catch(bt){if(Vo===void 0||bt.name!=="ErrnoError")throw bt;return bt.aa}},fd_seek:function(g,h,k,I,D){h=k+2097152>>>0<4194305-!!h?(h>>>0)+4294967296*k:NaN;try{if(isNaN(h))return 61;var B=Mn(g);return Jr(B,h,I),Pe=[B.position>>>0,(Oe=B.position,1<=+Math.abs(Oe)?0<Oe?+Math.floor(Oe/4294967296)>>>0:~~+Math.ceil((Oe-+(~~Oe>>>0))/4294967296)>>>0:0)],At[D>>2]=Pe[0],At[D+4>>2]=Pe[1],B.Ma&&h===0&&I===0&&(B.Ma=null),0}catch(W){if(Vo===void 0||W.name!=="ErrnoError")throw W;return W.aa}},fd_write:function(g,h,k,I){try{t:{var D=Mn(g);g=h;for(var B,W=h=0;W<k;W++){var et=Ht[g>>2],ft=Ht[g+4>>2];g+=8;var nt=D,Rt=et,Nt=ft,Bt=B,jt=ht;if(0>Nt||0>Bt)throw new Tt(28);if(nt.X===null)throw new Tt(8);if(!(2097155&nt.flags))throw new Tt(8);if((61440&nt.node.mode)==16384)throw new Tt(31);if(!nt.m.write)throw new Tt(28);nt.seekable&&1024&nt.flags&&Jr(nt,0,2);var Ot=Bt!==void 0;if(Ot){if(!nt.seekable)throw new Tt(70)}else Bt=nt.position;var It=nt.m.write(nt,jt,Rt,Nt,Bt,void 0);Ot||(nt.position+=It);var Ce=It;if(0>Ce){var at=-1;break t}h+=Ce,B!==void 0&&(B+=Ce)}at=h}return Ht[I>>2]=at,0}catch(bt){if(Vo===void 0||bt.name!=="ErrnoError")throw bt;return bt.aa}},strftime_l:(g,h,k,I)=>((D,B,W,et)=>{function ft(at,bt,de){for(at=typeof at=="number"?at.toString():at||"";at.length<bt;)at=de[0]+at;return at}function nt(at,bt){return ft(at,bt,"0")}function Rt(at,bt){function de(Kn){return 0>Kn?-1:0<Kn?1:0}var Ke;return(Ke=de(at.getFullYear()-bt.getFullYear()))===0&&(Ke=de(at.getMonth()-bt.getMonth()))===0&&(Ke=de(at.getDate()-bt.getDate())),Ke}function Nt(at){switch(at.getDay()){case 0:return new Date(at.getFullYear()-1,11,29);case 1:return at;case 2:return new Date(at.getFullYear(),0,3);case 3:return new Date(at.getFullYear(),0,2);case 4:return new Date(at.getFullYear(),0,1);case 5:return new Date(at.getFullYear()-1,11,31);case 6:return new Date(at.getFullYear()-1,11,30)}}function Bt(at){var bt=at.ca;for(at=new Date(new Date(at.da+1900,0,1).getTime());0<bt;){var de=at.getMonth(),Ke=($i(at.getFullYear())?pa:ga)[de];if(!(bt>Ke-at.getDate())){at.setDate(at.getDate()+bt);break}bt-=Ke-at.getDate()+1,at.setDate(1),11>de?at.setMonth(de+1):(at.setMonth(0),at.setFullYear(at.getFullYear()+1))}return de=new Date(at.getFullYear()+1,0,4),bt=Nt(new Date(at.getFullYear(),0,4)),de=Nt(de),0>=Rt(bt,at)?0>=Rt(de,at)?at.getFullYear()+1:at.getFullYear():at.getFullYear()-1}var jt=At[et+40>>2];for(var Ot in et={wc:At[et>>2],vc:At[et+4>>2],Fa:At[et+8>>2],Sa:At[et+12>>2],Ga:At[et+16>>2],da:At[et+20>>2],R:At[et+24>>2],ca:At[et+28>>2],Rc:At[et+32>>2],uc:At[et+36>>2],xc:jt&&jt?Xe(it,jt):""},W=W?Xe(it,W):"",jt={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"})W=W.replace(new RegExp(Ot,"g"),jt[Ot]);var It="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),Ce="January February March April May June July August September October November December".split(" ");for(Ot in jt={"%a":at=>It[at.R].substring(0,3),"%A":at=>It[at.R],"%b":at=>Ce[at.Ga].substring(0,3),"%B":at=>Ce[at.Ga],"%C":at=>nt((at.da+1900)/100|0,2),"%d":at=>nt(at.Sa,2),"%e":at=>ft(at.Sa,2," "),"%g":at=>Bt(at).toString().substring(2),"%G":at=>Bt(at),"%H":at=>nt(at.Fa,2),"%I":at=>((at=at.Fa)==0?at=12:12<at&&(at-=12),nt(at,2)),"%j":at=>{for(var bt=0,de=0;de<=at.Ga-1;bt+=($i(at.da+1900)?pa:ga)[de++]);return nt(at.Sa+bt,3)},"%m":at=>nt(at.Ga+1,2),"%M":at=>nt(at.vc,2),"%n":()=>`
`,"%p":at=>0<=at.Fa&&12>at.Fa?"AM":"PM","%S":at=>nt(at.wc,2),"%t":()=>"	","%u":at=>at.R||7,"%U":at=>nt(Math.floor((at.ca+7-at.R)/7),2),"%V":at=>{var bt=Math.floor((at.ca+7-(at.R+6)%7)/7);if(2>=(at.R+371-at.ca-2)%7&&bt++,bt)bt==53&&((de=(at.R+371-at.ca)%7)==4||de==3&&$i(at.da)||(bt=1));else{bt=52;var de=(at.R+7-at.ca-1)%7;(de==4||de==5&&$i(at.da%400-1))&&bt++}return nt(bt,2)},"%w":at=>at.R,"%W":at=>nt(Math.floor((at.ca+7-(at.R+6)%7)/7),2),"%y":at=>(at.da+1900).toString().substring(2),"%Y":at=>at.da+1900,"%z":at=>{var bt=0<=(at=at.uc);return at=Math.abs(at)/60,(bt?"+":"-")+("0000"+(at/60*100+at%60)).slice(-4)},"%Z":at=>at.xc,"%%":()=>"%"},W=W.replace(/%%/g,"\0\0"),jt)W.includes(Ot)&&(W=W.replace(new RegExp(Ot,"g"),jt[Ot](et)));return(Ot=On(W=W.replace(/\0\0/g,"%"),!1)).length>B?0:(ht.set(Ot,D),Ot.length-1)})(g,h,k,I)};(function(){function g(k){if(ot=k=k.exports,lt=ot.memory,z(),S=ot.__indirect_function_table,tt.unshift(ot.__wasm_call_ctors),Ft--,p.monitorRunDependencies&&p.monitorRunDependencies(Ft),Ft==0&&qt){var I=qt;qt=null,I()}return k}var h={env:wa,wasi_snapshot_preview1:wa};if(Ft++,p.monitorRunDependencies&&p.monitorRunDependencies(Ft),p.instantiateWasm)try{return p.instantiateWasm(h,g)}catch(k){rt("Module.instantiateWasm callback failed with error: "+k),m(k)}(function(k,I){var D=Ct;return V||typeof WebAssembly.instantiateStreaming!="function"||Vt(D)||D.startsWith("file://")||typeof fetch!="function"?Ie(D,k,I):fetch(D,{credentials:"same-origin"}).then(B=>WebAssembly.instantiateStreaming(B,k).then(I,function(W){return rt("wasm streaming compile failed: "+W),rt("falling back to ArrayBuffer instantiation"),Ie(D,k,I)}))})(h,function(k){g(k.instance)}).catch(m)})();var xo=g=>(xo=ot.free)(g),ss=g=>(ss=ot.malloc)(g),ya=p._ma_device__on_notification_unlocked=g=>(ya=p._ma_device__on_notification_unlocked=ot.ma_device__on_notification_unlocked)(g);p._ma_malloc_emscripten=(g,h)=>(p._ma_malloc_emscripten=ot.ma_malloc_emscripten)(g,h),p._ma_free_emscripten=(g,h)=>(p._ma_free_emscripten=ot.ma_free_emscripten)(g,h);var mi,ba=p._ma_device_process_pcm_frames_capture__webaudio=(g,h,k)=>(ba=p._ma_device_process_pcm_frames_capture__webaudio=ot.ma_device_process_pcm_frames_capture__webaudio)(g,h,k),xa=p._ma_device_process_pcm_frames_playback__webaudio=(g,h,k)=>(xa=p._ma_device_process_pcm_frames_playback__webaudio=ot.ma_device_process_pcm_frames_playback__webaudio)(g,h,k),_a=()=>(_a=ot.__errno_location)(),Ca=g=>(Ca=ot.__getTypeName)(g);function Aa(){function g(){if(!mi&&(mi=!0,p.calledRun=!0,!un)){if(p.noFSInit||fn||(fn=!0,Js(),p.stdin=p.stdin,p.stdout=p.stdout,p.stderr=p.stderr,p.stdin?Cr("stdin",p.stdin):Ln("/dev/tty","/dev/stdin"),p.stdout?Cr("stdout",null,p.stdout):Ln("/dev/tty","/dev/stdout"),p.stderr?Cr("stderr",null,p.stderr):Ln("/dev/tty1","/dev/stderr"),no("/dev/stdin",0),no("/dev/stdout",1),no("/dev/stderr",1)),dn=!1,An(tt),f(p),p.onRuntimeInitialized&&p.onRuntimeInitialized(),p.postRun)for(typeof p.postRun=="function"&&(p.postRun=[p.postRun]);p.postRun.length;){var h=p.postRun.shift();st.unshift(h)}An(st)}}if(!(0<Ft)){if(p.preRun)for(typeof p.preRun=="function"&&(p.preRun=[p.preRun]);p.preRun.length;)vt();An(F),0<Ft||(p.setStatus?(p.setStatus("Running..."),setTimeout(function(){setTimeout(function(){p.setStatus("")},1),g()},1)):g())}}if(p.__embind_initialize_bindings=()=>(p.__embind_initialize_bindings=ot._embind_initialize_bindings)(),p.dynCall_iiji=(g,h,k,I,D)=>(p.dynCall_iiji=ot.dynCall_iiji)(g,h,k,I,D),p.dynCall_jiji=(g,h,k,I,D)=>(p.dynCall_jiji=ot.dynCall_jiji)(g,h,k,I,D),p.dynCall_iiiji=(g,h,k,I,D,B)=>(p.dynCall_iiiji=ot.dynCall_iiiji)(g,h,k,I,D,B),p.dynCall_iij=(g,h,k,I)=>(p.dynCall_iij=ot.dynCall_iij)(g,h,k,I),p.dynCall_jii=(g,h,k)=>(p.dynCall_jii=ot.dynCall_jii)(g,h,k),p.dynCall_viijii=(g,h,k,I,D,B,W)=>(p.dynCall_viijii=ot.dynCall_viijii)(g,h,k,I,D,B,W),p.dynCall_iiiiij=(g,h,k,I,D,B,W)=>(p.dynCall_iiiiij=ot.dynCall_iiiiij)(g,h,k,I,D,B,W),p.dynCall_iiiiijj=(g,h,k,I,D,B,W,et,ft)=>(p.dynCall_iiiiijj=ot.dynCall_iiiiijj)(g,h,k,I,D,B,W,et,ft),p.dynCall_iiiiiijj=(g,h,k,I,D,B,W,et,ft,nt)=>(p.dynCall_iiiiiijj=ot.dynCall_iiiiiijj)(g,h,k,I,D,B,W,et,ft,nt),qt=function g(){mi||Aa(),mi||(qt=g)},p.preInit)for(typeof p.preInit=="function"&&(p.preInit=[p.preInit]);0<p.preInit.length;)p.preInit.pop()();return Aa(),u.ready});const l=a},o=>{o.exports=JSON.parse(`{"name":"@rive-app/canvas","version":"2.26.4","description":"Rive's canvas based web api.","main":"rive.js","homepage":"https://rive.app","repository":{"type":"git","url":"https://github.com/rive-app/rive-wasm/tree/master/js"},"keywords":["rive","animation"],"author":"Rive","contributors":["Luigi Rosso <luigi@rive.app> (https://rive.app)","Maxwell Talbot <max@rive.app> (https://rive.app)","Arthur Vivian <arthur@rive.app> (https://rive.app)","Umberto Sonnino <umberto@rive.app> (https://rive.app)","Matthew Sullivan <matt.j.sullivan@gmail.com> (mailto:matt.j.sullivan@gmail.com)"],"license":"MIT","files":["rive.js","rive.js.map","rive.wasm","rive_fallback.wasm","rive.d.ts","rive_advanced.mjs.d.ts"],"typings":"rive.d.ts","dependencies":{},"browser":{"fs":false,"path":false}}`)},(o,r,s)=>{s.r(r),s.d(r,{Animation:()=>c.Animation});var c=s(4)},(o,r,s)=>{s.r(r),s.d(r,{Animation:()=>c});var c=function(){function a(l,u,f,m){this.animation=l,this.artboard=u,this.playing=m,this.loopCount=0,this.scrubTo=null,this.instance=new f.LinearAnimationInstance(l,u)}return Object.defineProperty(a.prototype,"name",{get:function(){return this.animation.name},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"time",{get:function(){return this.instance.time},set:function(l){this.instance.time=l},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"loopValue",{get:function(){return this.animation.loopValue},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"needsScrub",{get:function(){return this.scrubTo!==null},enumerable:!1,configurable:!0}),a.prototype.advance=function(l){this.scrubTo===null?this.instance.advance(l):(this.instance.time=0,this.instance.advance(this.scrubTo),this.scrubTo=null)},a.prototype.apply=function(l){this.instance.apply(l)},a.prototype.cleanup=function(){this.instance.delete()},a}()},(o,r,s)=>{s.r(r),s.d(r,{BLANK_URL:()=>a.BLANK_URL,registerTouchInteractions:()=>c.registerTouchInteractions,sanitizeUrl:()=>a.sanitizeUrl});var c=s(6),a=s(7)},(o,r,s)=>{s.r(r),s.d(r,{registerTouchInteractions:()=>c});var c=function(a){var l=a.canvas,u=a.artboard,f=a.stateMachines,m=f===void 0?[]:f,p=a.renderer,_=a.rive,M=a.fit,C=a.alignment,T=a.isTouchScrollEnabled,E=T!==void 0&&T,R=a.layoutScaleFactor,N=R===void 0?1:R;if(!(l&&m.length&&p&&_&&u&&typeof window<"u"))return null;var Z=null,Q=!1,X=(function(K){if(Q&&K instanceof MouseEvent)K.type=="mouseup"&&(Q=!1);else{Q=E&&K.type==="touchend"&&Z==="touchstart",Z=K.type;var H=K.currentTarget.getBoundingClientRect(),Y=function(st,vt){var Ct,Ft;return["touchstart","touchmove"].indexOf(st.type)>-1&&(!((Ct=st.touches)===null||Ct===void 0)&&Ct.length)?(vt||st.preventDefault(),{clientX:st.touches[0].clientX,clientY:st.touches[0].clientY}):st.type==="touchend"&&(!((Ft=st.changedTouches)===null||Ft===void 0)&&Ft.length)?{clientX:st.changedTouches[0].clientX,clientY:st.changedTouches[0].clientY}:{clientX:st.clientX,clientY:st.clientY}}(K,E),V=Y.clientX,J=Y.clientY;if(V||J){var rt=V-H.left,lt=J-H.top,ot=_.computeAlignment(M,C,{minX:0,minY:0,maxX:H.width,maxY:H.height},u.bounds,N),ht=new _.Mat2D;ot.invert(ht);var it=new _.Vec2D(rt,lt),xt=_.mapXY(ht,it),ee=xt.x(),At=xt.y();switch(xt.delete(),ht.delete(),it.delete(),ot.delete(),K.type){case"mouseout":for(var Ht=0,De=m;Ht<De.length;Ht++)De[Ht].pointerMove(ee,At);break;case"touchmove":case"mouseover":case"mousemove":for(var Ee=0,un=m;Ee<un.length;Ee++)un[Ee].pointerMove(ee,At);break;case"touchstart":case"mousedown":for(var z=0,S=m;z<S.length;z++)S[z].pointerDown(ee,At);break;case"touchend":case"mouseup":for(var F=0,tt=m;F<tt.length;F++)tt[F].pointerUp(ee,At)}}}}).bind(void 0);return l.addEventListener("mouseover",X),l.addEventListener("mouseout",X),l.addEventListener("mousemove",X),l.addEventListener("mousedown",X),l.addEventListener("mouseup",X),l.addEventListener("touchmove",X,{passive:E}),l.addEventListener("touchstart",X,{passive:E}),l.addEventListener("touchend",X),function(){l.removeEventListener("mouseover",X),l.removeEventListener("mouseout",X),l.removeEventListener("mousemove",X),l.removeEventListener("mousedown",X),l.removeEventListener("mouseup",X),l.removeEventListener("touchmove",X),l.removeEventListener("touchstart",X),l.removeEventListener("touchend",X)}}},(o,r,s)=>{s.r(r),s.d(r,{BLANK_URL:()=>p,sanitizeUrl:()=>_});var c=/^([^\w]*)(javascript|data|vbscript)/im,a=/&#(\w+)(^\w|;)?/g,l=/&(newline|tab);/gi,u=/[\u0000-\u001F\u007F-\u009F\u2000-\u200D\uFEFF]/gim,f=/^.+(:|&colon;)/gim,m=[".","/"],p="about:blank";function _(M){if(!M)return p;var C,T=(C=M,C.replace(u,"").replace(a,function(N,Z){return String.fromCharCode(Z)})).replace(l,"").replace(u,"").trim();if(!T)return p;if(function(N){return m.indexOf(N[0])>-1}(T))return T;var E=T.match(f);if(!E)return T;var R=E[0];return c.test(R)?p:T}}],t={};function n(o){var r=t[o];if(r!==void 0)return r.exports;var s=t[o]={exports:{}};return i[o](s,s.exports,n),s.exports}n.d=(o,r)=>{for(var s in r)n.o(r,s)&&!n.o(o,s)&&Object.defineProperty(o,s,{enumerable:!0,get:r[s]})},n.o=(o,r)=>Object.prototype.hasOwnProperty.call(o,r),n.r=o=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(o,"__esModule",{value:!0})};var e={};return(()=>{n.r(e),n.d(e,{Alignment:()=>s,EventType:()=>N,Fit:()=>r,Layout:()=>C,LoopType:()=>Z,Rive:()=>xt,RiveEventType:()=>E,RiveFile:()=>it,RuntimeLoader:()=>T,StateMachineInput:()=>R,StateMachineInputType:()=>M,Testing:()=>Ht,decodeAudio:()=>De,decodeFont:()=>un,decodeImage:()=>Ee});var o,r,s,c=n(1),a=n(2),l=n(3),u=n(5),f=(o=function(z,S){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(F,tt){F.__proto__=tt}||function(F,tt){for(var st in tt)Object.prototype.hasOwnProperty.call(tt,st)&&(F[st]=tt[st])},o(z,S)},function(z,S){if(typeof S!="function"&&S!==null)throw new TypeError("Class extends value "+String(S)+" is not a constructor or null");function F(){this.constructor=z}o(z,S),z.prototype=S===null?Object.create(S):(F.prototype=S.prototype,new F)}),m=function(z,S,F,tt){return new(F||(F=Promise))(function(st,vt){function Ct(re){try{qt(tt.next(re))}catch(Vt){vt(Vt)}}function Ft(re){try{qt(tt.throw(re))}catch(Vt){vt(Vt)}}function qt(re){var Vt;re.done?st(re.value):(Vt=re.value,Vt instanceof F?Vt:new F(function(ze){ze(Vt)})).then(Ct,Ft)}qt((tt=tt.apply(z,S||[])).next())})},p=function(z,S){var F,tt,st,vt={label:0,sent:function(){if(1&st[0])throw st[1];return st[1]},trys:[],ops:[]},Ct=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return Ct.next=Ft(0),Ct.throw=Ft(1),Ct.return=Ft(2),typeof Symbol=="function"&&(Ct[Symbol.iterator]=function(){return this}),Ct;function Ft(qt){return function(re){return function(Vt){if(F)throw new TypeError("Generator is already executing.");for(;Ct&&(Ct=0,Vt[0]&&(vt=0)),vt;)try{if(F=1,tt&&(st=2&Vt[0]?tt.return:Vt[0]?tt.throw||((st=tt.return)&&st.call(tt),0):tt.next)&&!(st=st.call(tt,Vt[1])).done)return st;switch(tt=0,st&&(Vt=[2&Vt[0],st.value]),Vt[0]){case 0:case 1:st=Vt;break;case 4:return vt.label++,{value:Vt[1],done:!1};case 5:vt.label++,tt=Vt[1],Vt=[0];continue;case 7:Vt=vt.ops.pop(),vt.trys.pop();continue;default:if(!((st=(st=vt.trys).length>0&&st[st.length-1])||Vt[0]!==6&&Vt[0]!==2)){vt=0;continue}if(Vt[0]===3&&(!st||Vt[1]>st[0]&&Vt[1]<st[3])){vt.label=Vt[1];break}if(Vt[0]===6&&vt.label<st[1]){vt.label=st[1],st=Vt;break}if(st&&vt.label<st[2]){vt.label=st[2],vt.ops.push(Vt);break}st[2]&&vt.ops.pop(),vt.trys.pop();continue}Vt=S.call(z,vt)}catch(ze){Vt=[6,ze],tt=0}finally{F=st=0}if(5&Vt[0])throw Vt[1];return{value:Vt[0]?Vt[1]:void 0,done:!0}}([qt,re])}}},_=function(z){function S(){var F=z!==null&&z.apply(this,arguments)||this;return F.isHandledError=!0,F}return f(S,z),S}(Error);(function(z){z.Cover="cover",z.Contain="contain",z.Fill="fill",z.FitWidth="fitWidth",z.FitHeight="fitHeight",z.None="none",z.ScaleDown="scaleDown",z.Layout="layout"})(r||(r={})),function(z){z.Center="center",z.TopLeft="topLeft",z.TopCenter="topCenter",z.TopRight="topRight",z.CenterLeft="centerLeft",z.CenterRight="centerRight",z.BottomLeft="bottomLeft",z.BottomCenter="bottomCenter",z.BottomRight="bottomRight"}(s||(s={}));var M,C=function(){function z(S){var F,tt,st,vt,Ct,Ft,qt;this.fit=(F=S==null?void 0:S.fit)!==null&&F!==void 0?F:r.Contain,this.alignment=(tt=S==null?void 0:S.alignment)!==null&&tt!==void 0?tt:s.Center,this.layoutScaleFactor=(st=S==null?void 0:S.layoutScaleFactor)!==null&&st!==void 0?st:1,this.minX=(vt=S==null?void 0:S.minX)!==null&&vt!==void 0?vt:0,this.minY=(Ct=S==null?void 0:S.minY)!==null&&Ct!==void 0?Ct:0,this.maxX=(Ft=S==null?void 0:S.maxX)!==null&&Ft!==void 0?Ft:0,this.maxY=(qt=S==null?void 0:S.maxY)!==null&&qt!==void 0?qt:0}return z.new=function(S){var F=S.fit,tt=S.alignment,st=S.minX,vt=S.minY,Ct=S.maxX,Ft=S.maxY;return console.warn("This function is deprecated: please use `new Layout({})` instead"),new z({fit:F,alignment:tt,minX:st,minY:vt,maxX:Ct,maxY:Ft})},z.prototype.copyWith=function(S){var F=S.fit,tt=S.alignment,st=S.layoutScaleFactor,vt=S.minX,Ct=S.minY,Ft=S.maxX,qt=S.maxY;return new z({fit:F??this.fit,alignment:tt??this.alignment,layoutScaleFactor:st??this.layoutScaleFactor,minX:vt??this.minX,minY:Ct??this.minY,maxX:Ft??this.maxX,maxY:qt??this.maxY})},z.prototype.runtimeFit=function(S){return this.cachedRuntimeFit?this.cachedRuntimeFit:(F=this.fit===r.Cover?S.Fit.cover:this.fit===r.Contain?S.Fit.contain:this.fit===r.Fill?S.Fit.fill:this.fit===r.FitWidth?S.Fit.fitWidth:this.fit===r.FitHeight?S.Fit.fitHeight:this.fit===r.ScaleDown?S.Fit.scaleDown:this.fit===r.Layout?S.Fit.layout:S.Fit.none,this.cachedRuntimeFit=F,F);var F},z.prototype.runtimeAlignment=function(S){return this.cachedRuntimeAlignment?this.cachedRuntimeAlignment:(F=this.alignment===s.TopLeft?S.Alignment.topLeft:this.alignment===s.TopCenter?S.Alignment.topCenter:this.alignment===s.TopRight?S.Alignment.topRight:this.alignment===s.CenterLeft?S.Alignment.centerLeft:this.alignment===s.CenterRight?S.Alignment.centerRight:this.alignment===s.BottomLeft?S.Alignment.bottomLeft:this.alignment===s.BottomCenter?S.Alignment.bottomCenter:this.alignment===s.BottomRight?S.Alignment.bottomRight:S.Alignment.center,this.cachedRuntimeAlignment=F,F);var F},z}(),T=function(){function z(){}return z.loadRuntime=function(){c.default({locateFile:function(){return z.wasmURL}}).then(function(S){var F;for(z.runtime=S;z.callBackQueue.length>0;)(F=z.callBackQueue.shift())===null||F===void 0||F(z.runtime)}).catch(function(S){var F={message:(S==null?void 0:S.message)||"Unknown error",type:(S==null?void 0:S.name)||"Error",wasmError:S instanceof WebAssembly.CompileError||S instanceof WebAssembly.RuntimeError,originalError:S};console.debug("Rive WASM load error details:",F);var tt="https://cdn.jsdelivr.net/npm/".concat(a.name,"@").concat(a.version,"/rive_fallback.wasm");if(z.wasmURL.toLowerCase()!==tt)console.warn("Failed to load WASM from ".concat(z.wasmURL," (").concat(F.message,"), trying jsdelivr as a backup")),z.setWasmUrl(tt),z.loadRuntime();else{var st=["Could not load Rive WASM file from ".concat(z.wasmURL," or ").concat(tt,"."),"Possible reasons:","- Network connection is down","- WebAssembly is not supported in this environment","- The WASM file is corrupted or incompatible",`
Error details:`,"- Type: ".concat(F.type),"- Message: ".concat(F.message),"- WebAssembly-specific error: ".concat(F.wasmError),`
To resolve, you may need to:`,"1. Check your network connection","2. Set a new WASM source via RuntimeLoader.setWasmUrl()","3. Call RuntimeLoader.loadRuntime() again"].join(`
`);console.error(st)}})},z.getInstance=function(S){z.isLoading||(z.isLoading=!0,z.loadRuntime()),z.runtime?S(z.runtime):z.callBackQueue.push(S)},z.awaitInstance=function(){return new Promise(function(S){return z.getInstance(function(F){return S(F)})})},z.setWasmUrl=function(S){z.wasmURL=S},z.getWasmUrl=function(){return z.wasmURL},z.isLoading=!1,z.callBackQueue=[],z.wasmURL="https://unpkg.com/".concat(a.name,"@").concat(a.version,"/rive.wasm"),z}();(function(z){z[z.Number=56]="Number",z[z.Trigger=58]="Trigger",z[z.Boolean=59]="Boolean"})(M||(M={}));var E,R=function(){function z(S,F){this.type=S,this.runtimeInput=F}return Object.defineProperty(z.prototype,"name",{get:function(){return this.runtimeInput.name},enumerable:!1,configurable:!0}),Object.defineProperty(z.prototype,"value",{get:function(){return this.runtimeInput.value},set:function(S){this.runtimeInput.value=S},enumerable:!1,configurable:!0}),z.prototype.fire=function(){this.type===M.Trigger&&this.runtimeInput.fire()},z.prototype.delete=function(){this.runtimeInput=null},z}();(function(z){z[z.General=128]="General",z[z.OpenUrl=131]="OpenUrl"})(E||(E={}));var N,Z,Q=function(){function z(S,F,tt,st){this.stateMachine=S,this.playing=tt,this.artboard=st,this.inputs=[],this.instance=new F.StateMachineInstance(S,st),this.initInputs(F)}return Object.defineProperty(z.prototype,"name",{get:function(){return this.stateMachine.name},enumerable:!1,configurable:!0}),Object.defineProperty(z.prototype,"statesChanged",{get:function(){for(var S=[],F=0;F<this.instance.stateChangedCount();F++)S.push(this.instance.stateChangedNameByIndex(F));return S},enumerable:!1,configurable:!0}),z.prototype.advance=function(S){this.instance.advance(S)},z.prototype.advanceAndApply=function(S){this.instance.advanceAndApply(S)},z.prototype.reportedEventCount=function(){return this.instance.reportedEventCount()},z.prototype.reportedEventAt=function(S){return this.instance.reportedEventAt(S)},z.prototype.initInputs=function(S){for(var F=0;F<this.instance.inputCount();F++){var tt=this.instance.input(F);this.inputs.push(this.mapRuntimeInput(tt,S))}},z.prototype.mapRuntimeInput=function(S,F){return S.type===F.SMIInput.bool?new R(M.Boolean,S.asBool()):S.type===F.SMIInput.number?new R(M.Number,S.asNumber()):S.type===F.SMIInput.trigger?new R(M.Trigger,S.asTrigger()):void 0},z.prototype.cleanup=function(){this.inputs.forEach(function(S){S.delete()}),this.inputs.length=0,this.instance.delete()},z}(),X=function(){function z(S,F,tt,st,vt){st===void 0&&(st=[]),vt===void 0&&(vt=[]),this.runtime=S,this.artboard=F,this.eventManager=tt,this.animations=st,this.stateMachines=vt}return z.prototype.add=function(S,F,tt){if(tt===void 0&&(tt=!0),(S=At(S)).length===0)this.animations.forEach(function(Ie){return Ie.playing=F}),this.stateMachines.forEach(function(Ie){return Ie.playing=F});else for(var st=this.animations.map(function(Ie){return Ie.name}),vt=this.stateMachines.map(function(Ie){return Ie.name}),Ct=0;Ct<S.length;Ct++){var Ft=st.indexOf(S[Ct]),qt=vt.indexOf(S[Ct]);if(Ft>=0||qt>=0)Ft>=0?this.animations[Ft].playing=F:this.stateMachines[qt].playing=F;else{var re=this.artboard.animationByName(S[Ct]);if(re){var Vt=new l.Animation(re,this.artboard,this.runtime,F);Vt.advance(0),Vt.apply(1),this.animations.push(Vt)}else{var ze=this.artboard.stateMachineByName(S[Ct]);if(ze){var Qt=new Q(ze,this.runtime,F,this.artboard);this.stateMachines.push(Qt)}}}}return tt&&(F?this.eventManager.fire({type:N.Play,data:this.playing}):this.eventManager.fire({type:N.Pause,data:this.paused})),F?this.playing:this.paused},z.prototype.initLinearAnimations=function(S,F){for(var tt=this.animations.map(function(qt){return qt.name}),st=0;st<S.length;st++){var vt=tt.indexOf(S[st]);if(vt>=0)this.animations[vt].playing=F;else{var Ct=this.artboard.animationByName(S[st]);if(Ct){var Ft=new l.Animation(Ct,this.artboard,this.runtime,F);Ft.advance(0),Ft.apply(1),this.animations.push(Ft)}}}},z.prototype.initStateMachines=function(S,F){for(var tt=this.stateMachines.map(function(qt){return qt.name}),st=0;st<S.length;st++){var vt=tt.indexOf(S[st]);if(vt>=0)this.stateMachines[vt].playing=F;else{var Ct=this.artboard.stateMachineByName(S[st]);if(Ct){var Ft=new Q(Ct,this.runtime,F,this.artboard);this.stateMachines.push(Ft)}else this.initLinearAnimations([S[st]],F)}}},z.prototype.play=function(S){return this.add(S,!0)},z.prototype.pause=function(S){return this.add(S,!1)},z.prototype.scrub=function(S,F){var tt=this.animations.filter(function(st){return S.includes(st.name)});return tt.forEach(function(st){return st.scrubTo=F}),tt.map(function(st){return st.name})},Object.defineProperty(z.prototype,"playing",{get:function(){return this.animations.filter(function(S){return S.playing}).map(function(S){return S.name}).concat(this.stateMachines.filter(function(S){return S.playing}).map(function(S){return S.name}))},enumerable:!1,configurable:!0}),Object.defineProperty(z.prototype,"paused",{get:function(){return this.animations.filter(function(S){return!S.playing}).map(function(S){return S.name}).concat(this.stateMachines.filter(function(S){return!S.playing}).map(function(S){return S.name}))},enumerable:!1,configurable:!0}),z.prototype.stop=function(S){var F=this,tt=[];if((S=At(S)).length===0)tt=this.animations.map(function(Ct){return Ct.name}).concat(this.stateMachines.map(function(Ct){return Ct.name})),this.animations.forEach(function(Ct){return Ct.cleanup()}),this.stateMachines.forEach(function(Ct){return Ct.cleanup()}),this.animations.splice(0,this.animations.length),this.stateMachines.splice(0,this.stateMachines.length);else{var st=this.animations.filter(function(Ct){return S.includes(Ct.name)});st.forEach(function(Ct){Ct.cleanup(),F.animations.splice(F.animations.indexOf(Ct),1)});var vt=this.stateMachines.filter(function(Ct){return S.includes(Ct.name)});vt.forEach(function(Ct){Ct.cleanup(),F.stateMachines.splice(F.stateMachines.indexOf(Ct),1)}),tt=st.map(function(Ct){return Ct.name}).concat(vt.map(function(Ct){return Ct.name}))}return this.eventManager.fire({type:N.Stop,data:tt}),tt},Object.defineProperty(z.prototype,"isPlaying",{get:function(){return this.animations.reduce(function(S,F){return S||F.playing},!1)||this.stateMachines.reduce(function(S,F){return S||F.playing},!1)},enumerable:!1,configurable:!0}),Object.defineProperty(z.prototype,"isPaused",{get:function(){return!this.isPlaying&&(this.animations.length>0||this.stateMachines.length>0)},enumerable:!1,configurable:!0}),Object.defineProperty(z.prototype,"isStopped",{get:function(){return this.animations.length===0&&this.stateMachines.length===0},enumerable:!1,configurable:!0}),z.prototype.atLeastOne=function(S,F){var tt;return F===void 0&&(F=!0),this.animations.length===0&&this.stateMachines.length===0&&(this.artboard.animationCount()>0?this.add([tt=this.artboard.animationByIndex(0).name],S,F):this.artboard.stateMachineCount()>0&&this.add([tt=this.artboard.stateMachineByIndex(0).name],S,F)),tt},z.prototype.handleLooping=function(){for(var S=0,F=this.animations.filter(function(st){return st.playing});S<F.length;S++){var tt=F[S];tt.loopValue===0&&tt.loopCount?(tt.loopCount=0,this.stop(tt.name)):tt.loopValue===1&&tt.loopCount?(this.eventManager.fire({type:N.Loop,data:{animation:tt.name,type:Z.Loop}}),tt.loopCount=0):tt.loopValue===2&&tt.loopCount>1&&(this.eventManager.fire({type:N.Loop,data:{animation:tt.name,type:Z.PingPong}}),tt.loopCount=0)}},z.prototype.handleStateChanges=function(){for(var S=[],F=0,tt=this.stateMachines.filter(function(vt){return vt.playing});F<tt.length;F++){var st=tt[F];S.push.apply(S,st.statesChanged)}S.length>0&&this.eventManager.fire({type:N.StateChange,data:S})},z.prototype.handleAdvancing=function(S){this.eventManager.fire({type:N.Advance,data:S})},z}();(function(z){z.Load="load",z.LoadError="loaderror",z.Play="play",z.Pause="pause",z.Stop="stop",z.Loop="loop",z.Draw="draw",z.Advance="advance",z.StateChange="statechange",z.RiveEvent="riveevent",z.AudioStatusChange="audiostatuschange"})(N||(N={})),function(z){z.OneShot="oneshot",z.Loop="loop",z.PingPong="pingpong"}(Z||(Z={}));var K,H=function(){function z(S){S===void 0&&(S=[]),this.listeners=S}return z.prototype.getListeners=function(S){return this.listeners.filter(function(F){return F.type===S})},z.prototype.add=function(S){this.listeners.includes(S)||this.listeners.push(S)},z.prototype.remove=function(S){for(var F=0;F<this.listeners.length;F++){var tt=this.listeners[F];if(tt.type===S.type&&tt.callback===S.callback){this.listeners.splice(F,1);break}}},z.prototype.removeAll=function(S){var F=this;S?this.listeners.filter(function(tt){return tt.type===S}).forEach(function(tt){return F.remove(tt)}):this.listeners.splice(0,this.listeners.length)},z.prototype.fire=function(S){this.getListeners(S.type).forEach(function(F){return F.callback(S)})},z}(),Y=function(){function z(S){this.eventManager=S,this.queue=[]}return z.prototype.add=function(S){this.queue.push(S)},z.prototype.process=function(){for(;this.queue.length>0;){var S=this.queue.shift();S!=null&&S.action&&S.action(),S!=null&&S.event&&this.eventManager.fire(S.event)}},z}();(function(z){z[z.AVAILABLE=0]="AVAILABLE",z[z.UNAVAILABLE=1]="UNAVAILABLE"})(K||(K={}));var V=function(z){function S(){var F=z!==null&&z.apply(this,arguments)||this;return F._started=!1,F._enabled=!1,F._status=K.UNAVAILABLE,F}return f(S,z),S.prototype.delay=function(F){return m(this,void 0,void 0,function(){return p(this,function(tt){return[2,new Promise(function(st){return setTimeout(st,F)})]})})},S.prototype.timeout=function(){return m(this,void 0,void 0,function(){return p(this,function(F){return[2,new Promise(function(tt,st){return setTimeout(st,50)})]})})},S.prototype.reportToListeners=function(){this.fire({type:N.AudioStatusChange}),this.removeAll()},S.prototype.enableAudio=function(){return m(this,void 0,void 0,function(){return p(this,function(F){return this._enabled||(this._enabled=!0,this._status=K.AVAILABLE,this.reportToListeners()),[2]})})},S.prototype.testAudio=function(){return m(this,void 0,void 0,function(){return p(this,function(F){switch(F.label){case 0:if(this._status!==K.UNAVAILABLE||this._audioContext===null)return[3,4];F.label=1;case 1:return F.trys.push([1,3,,4]),[4,Promise.race([this._audioContext.resume(),this.timeout()])];case 2:return F.sent(),this.enableAudio(),[3,4];case 3:return F.sent(),[3,4];case 4:return[2]}})})},S.prototype._establishAudio=function(){return m(this,void 0,void 0,function(){return p(this,function(F){switch(F.label){case 0:return this._started?[3,5]:(this._started=!0,typeof window<"u"?[3,1]:(this.enableAudio(),[3,5]));case 1:this._audioContext=new AudioContext,this.listenForUserAction(),F.label=2;case 2:return this._status!==K.UNAVAILABLE?[3,5]:[4,this.testAudio()];case 3:return F.sent(),[4,this.delay(1e3)];case 4:return F.sent(),[3,2];case 5:return[2]}})})},S.prototype.listenForUserAction=function(){var F=this;document.addEventListener("pointerdown",function(){return m(F,void 0,void 0,function(){return p(this,function(tt){return this.enableAudio(),[2]})})},{once:!0})},S.prototype.establishAudio=function(){return m(this,void 0,void 0,function(){return p(this,function(F){return this._establishAudio(),[2]})})},Object.defineProperty(S.prototype,"systemVolume",{get:function(){return this._status===K.UNAVAILABLE?(this.testAudio(),0):1},enumerable:!1,configurable:!0}),Object.defineProperty(S.prototype,"status",{get:function(){return this._status},enumerable:!1,configurable:!0}),S}(H),J=new V,rt=function(){function z(){}return z.prototype.observe=function(){},z.prototype.unobserve=function(){},z.prototype.disconnect=function(){},z}(),lt=globalThis.ResizeObserver||rt,ot=function(){function z(){var S=this;this._elementsMap=new Map,this._onObservedEntry=function(F){var tt=S._elementsMap.get(F.target);tt!==null?tt.onResize(F.target.clientWidth==0||F.target.clientHeight==0):S._resizeObserver.unobserve(F.target)},this._onObserved=function(F){F.forEach(S._onObservedEntry)},this._resizeObserver=new lt(this._onObserved)}return z.prototype.add=function(S,F){var tt={onResize:F,element:S};return this._elementsMap.set(S,tt),this._resizeObserver.observe(S),tt},z.prototype.remove=function(S){this._resizeObserver.unobserve(S.element),this._elementsMap.delete(S.element)},z}(),ht=new ot,it=function(){function z(S){this.enableRiveAssetCDN=!0,this.referenceCount=0,this.destroyed=!1,this.src=S.src,this.buffer=S.buffer,S.assetLoader&&(this.assetLoader=S.assetLoader),this.enableRiveAssetCDN=typeof S.enableRiveAssetCDN!="boolean"||S.enableRiveAssetCDN,this.eventManager=new H,S.onLoad&&this.on(N.Load,S.onLoad),S.onLoadError&&this.on(N.LoadError,S.onLoadError)}return z.prototype.initData=function(){return m(this,void 0,void 0,function(){var S,F,tt,st;return p(this,function(vt){switch(vt.label){case 0:return this.src?(S=this,[4,ee(this.src)]):[3,2];case 1:S.buffer=vt.sent(),vt.label=2;case 2:return this.destroyed?[2]:(this.assetLoader&&(F=new this.runtime.CustomFileAssetLoader({loadContents:this.assetLoader})),tt=this,[4,this.runtime.load(new Uint8Array(this.buffer),F,this.enableRiveAssetCDN)]);case 3:if(tt.file=vt.sent(),this.destroyed)return(st=this.file)===null||st===void 0||st.delete(),this.file=null,[2];if(this.file===null)throw this.eventManager.fire({type:N.LoadError,data:null}),new Error(z.fileLoadErrorMessage);return this.eventManager.fire({type:N.Load,data:this}),[2]}})})},z.prototype.init=function(){return m(this,void 0,void 0,function(){var S;return p(this,function(F){switch(F.label){case 0:if(!this.src&&!this.buffer)throw new Error(z.missingErrorMessage);return S=this,[4,T.awaitInstance()];case 1:return S.runtime=F.sent(),this.destroyed?[2]:[4,this.initData()];case 2:return F.sent(),[2]}})})},z.prototype.on=function(S,F){this.eventManager.add({type:S,callback:F})},z.prototype.off=function(S,F){this.eventManager.remove({type:S,callback:F})},z.prototype.cleanup=function(){var S;this.referenceCount-=1,this.referenceCount<=0&&(this.removeAllRiveEventListeners(),(S=this.file)===null||S===void 0||S.delete(),this.file=null,this.destroyed=!0)},z.prototype.removeAllRiveEventListeners=function(S){this.eventManager.removeAll(S)},z.prototype.getInstance=function(){if(this.file!==null)return this.referenceCount+=1,this.file},z.missingErrorMessage="Rive source file or data buffer required",z.fileLoadErrorMessage="The file failed to load",z}(),xt=function(){function z(S){var F,tt=this;this.loaded=!1,this.destroyed=!1,this._observed=null,this.readyForPlaying=!1,this.artboard=null,this.eventCleanup=null,this.shouldDisableRiveListeners=!1,this.automaticallyHandleEvents=!1,this.enableRiveAssetCDN=!0,this._volume=1,this._artboardWidth=void 0,this._artboardHeight=void 0,this._devicePixelRatioUsed=1,this._hasZeroSize=!1,this._audioEventListener=null,this._boundDraw=null,this.durations=[],this.frameTimes=[],this.frameCount=0,this.isTouchScrollEnabled=!1,this.onCanvasResize=function(st){var vt=tt._hasZeroSize!==st;tt._hasZeroSize=st,st?tt._layout.maxX&&tt._layout.maxY||tt.resizeToCanvas():vt&&tt.resizeDrawingSurfaceToCanvas()},this.renderSecondTimer=0,this._boundDraw=this.draw.bind(this),this.canvas=S.canvas,S.canvas.constructor===HTMLCanvasElement&&(this._observed=ht.add(this.canvas,this.onCanvasResize)),this.src=S.src,this.buffer=S.buffer,this.riveFile=S.riveFile,this.layout=(F=S.layout)!==null&&F!==void 0?F:new C,this.shouldDisableRiveListeners=!!S.shouldDisableRiveListeners,this.isTouchScrollEnabled=!!S.isTouchScrollEnabled,this.automaticallyHandleEvents=!!S.automaticallyHandleEvents,this.enableRiveAssetCDN=S.enableRiveAssetCDN===void 0||S.enableRiveAssetCDN,this.eventManager=new H,S.onLoad&&this.on(N.Load,S.onLoad),S.onLoadError&&this.on(N.LoadError,S.onLoadError),S.onPlay&&this.on(N.Play,S.onPlay),S.onPause&&this.on(N.Pause,S.onPause),S.onStop&&this.on(N.Stop,S.onStop),S.onLoop&&this.on(N.Loop,S.onLoop),S.onStateChange&&this.on(N.StateChange,S.onStateChange),S.onAdvance&&this.on(N.Advance,S.onAdvance),S.onload&&!S.onLoad&&this.on(N.Load,S.onload),S.onloaderror&&!S.onLoadError&&this.on(N.LoadError,S.onloaderror),S.onplay&&!S.onPlay&&this.on(N.Play,S.onplay),S.onpause&&!S.onPause&&this.on(N.Pause,S.onpause),S.onstop&&!S.onStop&&this.on(N.Stop,S.onstop),S.onloop&&!S.onLoop&&this.on(N.Loop,S.onloop),S.onstatechange&&!S.onStateChange&&this.on(N.StateChange,S.onstatechange),S.assetLoader&&(this.assetLoader=S.assetLoader),this.taskQueue=new Y(this.eventManager),this.init({src:this.src,buffer:this.buffer,riveFile:this.riveFile,autoplay:S.autoplay,animations:S.animations,stateMachines:S.stateMachines,artboard:S.artboard,useOffscreenRenderer:S.useOffscreenRenderer})}return z.new=function(S){return console.warn("This function is deprecated: please use `new Rive({})` instead"),new z(S)},z.prototype.onSystemAudioChanged=function(){this.volume=this._volume},z.prototype.init=function(S){var F=this,tt=S.src,st=S.buffer,vt=S.riveFile,Ct=S.animations,Ft=S.stateMachines,qt=S.artboard,re=S.autoplay,Vt=re!==void 0&&re,ze=S.useOffscreenRenderer,Qt=ze!==void 0&&ze;if(!this.destroyed){if(this.src=tt,this.buffer=st,this.riveFile=vt,!this.src&&!this.buffer&&!this.riveFile)throw new _(z.missingErrorMessage);var Ie=At(Ct),Oe=At(Ft);this.loaded=!1,this.readyForPlaying=!1,T.awaitInstance().then(function(Pe){F.destroyed||(F.runtime=Pe,F.removeRiveListeners(),F.deleteRiveRenderer(),F.renderer=F.runtime.makeRenderer(F.canvas,Qt),F.canvas.width||F.canvas.height||F.resizeDrawingSurfaceToCanvas(),F.initData(qt,Ie,Oe,Vt).then(function(){return F.setupRiveListeners()}).catch(function(Cn){console.error(Cn)}))}).catch(function(Pe){console.error(Pe)})}},z.prototype.setupRiveListeners=function(S){var F=this;if(this.eventCleanup&&this.eventCleanup(),!this.shouldDisableRiveListeners){var tt=(this.animator.stateMachines||[]).filter(function(vt){return vt.playing&&F.runtime.hasListeners(vt.instance)}).map(function(vt){return vt.instance}),st=this.isTouchScrollEnabled;S&&"isTouchScrollEnabled"in S&&(st=S.isTouchScrollEnabled),this.eventCleanup=(0,u.registerTouchInteractions)({canvas:this.canvas,artboard:this.artboard,stateMachines:tt,renderer:this.renderer,rive:this.runtime,fit:this._layout.runtimeFit(this.runtime),alignment:this._layout.runtimeAlignment(this.runtime),isTouchScrollEnabled:st,layoutScaleFactor:this._layout.layoutScaleFactor})}},z.prototype.removeRiveListeners=function(){this.eventCleanup&&(this.eventCleanup(),this.eventCleanup=null)},z.prototype.initializeAudio=function(){var S,F=this;J.status==K.UNAVAILABLE&&(!((S=this.artboard)===null||S===void 0)&&S.hasAudio)&&this._audioEventListener===null&&(this._audioEventListener={type:N.AudioStatusChange,callback:function(){return F.onSystemAudioChanged()}},J.add(this._audioEventListener),J.establishAudio())},z.prototype.initArtboardSize=function(){this.artboard&&(this._artboardWidth=this.artboard.width=this._artboardWidth||this.artboard.width,this._artboardHeight=this.artboard.height=this._artboardHeight||this.artboard.height)},z.prototype.initData=function(S,F,tt,st){return m(this,void 0,void 0,function(){var vt,Ct,Ft;return p(this,function(qt){switch(qt.label){case 0:return qt.trys.push([0,3,,4]),this.riveFile!=null?[3,2]:(this.riveFile=new it({src:this.src,buffer:this.buffer,enableRiveAssetCDN:this.enableRiveAssetCDN,assetLoader:this.assetLoader}),[4,this.riveFile.init()]);case 1:qt.sent(),qt.label=2;case 2:if(!this.riveFile)throw new _(z.cleanupErrorMessage);return this.file=this.riveFile.getInstance(),this.initArtboard(S,F,tt,st),this.initArtboardSize(),this.initializeAudio(),this.loaded=!0,this.eventManager.fire({type:N.Load,data:(Ft=this.src)!==null&&Ft!==void 0?Ft:"buffer"}),this.readyForPlaying=!0,this.taskQueue.process(),this.drawFrame(),[2,Promise.resolve()];case 3:return vt=qt.sent(),Ct=(re=vt)&&re.isHandledError?re.message:"Problem loading file; may be corrupt!",console.warn(Ct),this.eventManager.fire({type:N.LoadError,data:Ct}),[2,Promise.reject(Ct)];case 4:return[2]}var re})})},z.prototype.initArtboard=function(S,F,tt,st){if(this.file){var vt,Ct=S?this.file.artboardByName(S):this.file.defaultArtboard();if(!Ct){var Ft="Invalid artboard name or no default artboard";return console.warn(Ft),void this.eventManager.fire({type:N.LoadError,data:Ft})}if(this.artboard=Ct,Ct.volume=this._volume*J.systemVolume,this.artboard.animationCount()<1)throw Ft="Artboard has no animations",this.eventManager.fire({type:N.LoadError,data:Ft}),Ft;this.animator=new X(this.runtime,this.artboard,this.eventManager),F.length>0||tt.length>0?(vt=F.concat(tt),this.animator.initLinearAnimations(F,st),this.animator.initStateMachines(tt,st)):vt=[this.animator.atLeastOne(st,!1)],this.taskQueue.add({event:{type:st?N.Play:N.Pause,data:vt}})}},z.prototype.drawFrame=function(){var S;!((S=document==null?void 0:document.timeline)===null||S===void 0)&&S.currentTime?this.loaded&&this.artboard&&!this.frameRequestId&&this._boundDraw(document.timeline.currentTime):this.startRendering()},z.prototype.draw=function(S,F){this.frameRequestId=null;var tt=performance.now();this.lastRenderTime||(this.lastRenderTime=S),this.renderSecondTimer+=S-this.lastRenderTime,this.renderSecondTimer>5e3&&(this.renderSecondTimer=0,F==null||F());var st=(S-this.lastRenderTime)/1e3;this.lastRenderTime=S;for(var vt=0,Ct=this.animator.animations.filter(function(gn){return gn.playing||gn.needsScrub}).sort(function(gn){return gn.needsScrub?-1:1});vt<Ct.length;vt++){var Ft=Ct[vt];Ft.advance(st),Ft.instance.didLoop&&(Ft.loopCount+=1),Ft.apply(1)}for(var qt=0,re=this.animator.stateMachines.filter(function(gn){return gn.playing});qt<re.length;qt++){var Vt=re[qt],ze=Vt.reportedEventCount();if(ze)for(var Qt=0;Qt<ze;Qt++){var Ie=Vt.reportedEventAt(Qt);if(Ie)if(Ie.type===E.OpenUrl){if(this.eventManager.fire({type:N.RiveEvent,data:Ie}),this.automaticallyHandleEvents){var Oe=document.createElement("a"),Pe=Ie,Cn=Pe.url,An=Pe.target,Be=(0,u.sanitizeUrl)(Cn);Cn&&Oe.setAttribute("href",Be),An&&Oe.setAttribute("target",An),Be&&Be!==u.BLANK_URL&&Oe.click()}}else this.eventManager.fire({type:N.RiveEvent,data:Ie})}Vt.advanceAndApply(st)}this.animator.stateMachines.length==0&&this.artboard.advance(st);var $n=this.renderer;$n.clear(),$n.save(),this.alignRenderer(),this._hasZeroSize||this.artboard.draw($n),$n.restore(),$n.flush(),this.animator.handleLooping(),this.animator.handleStateChanges(),this.animator.handleAdvancing(st),this.frameCount++;var Ge=performance.now();for(this.frameTimes.push(Ge),this.durations.push(Ge-tt);this.frameTimes[0]<=Ge-1e3;)this.frameTimes.shift(),this.durations.shift();this.animator.isPlaying?this.startRendering():(this.animator.isPaused||this.animator.isStopped)&&(this.lastRenderTime=0)},z.prototype.alignRenderer=function(){var S=this,F=S.renderer,tt=S.runtime,st=S._layout,vt=S.artboard;F.align(st.runtimeFit(tt),st.runtimeAlignment(tt),{minX:st.minX,minY:st.minY,maxX:st.maxX,maxY:st.maxY},vt.bounds,this._devicePixelRatioUsed*st.layoutScaleFactor)},Object.defineProperty(z.prototype,"fps",{get:function(){return this.durations.length},enumerable:!1,configurable:!0}),Object.defineProperty(z.prototype,"frameTime",{get:function(){return this.durations.length===0?0:(this.durations.reduce(function(S,F){return S+F},0)/this.durations.length).toFixed(4)},enumerable:!1,configurable:!0}),z.prototype.cleanup=function(){var S;this.destroyed=!0,this.stopRendering(),this.cleanupInstances(),this._observed!==null&&ht.remove(this._observed),this.removeRiveListeners(),this.file&&((S=this.riveFile)===null||S===void 0||S.cleanup(),this.file=null),this.riveFile=null,this.deleteRiveRenderer(),this._audioEventListener!==null&&(J.remove(this._audioEventListener),this._audioEventListener=null)},z.prototype.deleteRiveRenderer=function(){var S;(S=this.renderer)===null||S===void 0||S.delete(),this.renderer=null},z.prototype.cleanupInstances=function(){this.eventCleanup!==null&&this.eventCleanup(),this.stop(),this.artboard&&(this.artboard.delete(),this.artboard=null)},z.prototype.retrieveTextRun=function(S){var F;if(S)if(this.artboard){var tt=this.artboard.textRun(S);if(tt)return tt;console.warn("Could not access a text run with name '".concat(S,"' in the '").concat((F=this.artboard)===null||F===void 0?void 0:F.name,"' Artboard. Note that you must rename a text run node in the Rive editor to make it queryable at runtime."))}else console.warn("Tried to access text run, but the Artboard is null");else console.warn("No text run name provided")},z.prototype.getTextRunValue=function(S){var F=this.retrieveTextRun(S);return F?F.text:void 0},z.prototype.setTextRunValue=function(S,F){var tt=this.retrieveTextRun(S);tt&&(tt.text=F)},z.prototype.play=function(S,F){var tt=this;S=At(S),this.readyForPlaying?(this.animator.play(S),this.eventCleanup&&this.eventCleanup(),this.setupRiveListeners(),this.startRendering()):this.taskQueue.add({action:function(){return tt.play(S,F)}})},z.prototype.pause=function(S){var F=this;S=At(S),this.readyForPlaying?(this.eventCleanup&&this.eventCleanup(),this.animator.pause(S)):this.taskQueue.add({action:function(){return F.pause(S)}})},z.prototype.scrub=function(S,F){var tt=this;S=At(S),this.readyForPlaying?(this.animator.scrub(S,F||0),this.drawFrame()):this.taskQueue.add({action:function(){return tt.scrub(S,F)}})},z.prototype.stop=function(S){var F=this;S=At(S),this.readyForPlaying?(this.animator&&this.animator.stop(S),this.eventCleanup&&this.eventCleanup()):this.taskQueue.add({action:function(){return F.stop(S)}})},z.prototype.reset=function(S){var F,tt=S==null?void 0:S.artboard,st=At(S==null?void 0:S.animations),vt=At(S==null?void 0:S.stateMachines),Ct=(F=S==null?void 0:S.autoplay)!==null&&F!==void 0&&F;this.cleanupInstances(),this.initArtboard(tt,st,vt,Ct),this.taskQueue.process()},z.prototype.load=function(S){this.file=null,this.stop(),this.init(S)},Object.defineProperty(z.prototype,"layout",{get:function(){return this._layout},set:function(S){this._layout=S,S.maxX&&S.maxY||this.resizeToCanvas(),this.loaded&&!this.animator.isPlaying&&this.drawFrame()},enumerable:!1,configurable:!0}),z.prototype.resizeToCanvas=function(){this._layout=this.layout.copyWith({minX:0,minY:0,maxX:this.canvas.width,maxY:this.canvas.height})},z.prototype.resizeDrawingSurfaceToCanvas=function(S){if(this.canvas instanceof HTMLCanvasElement&&window){var F=this.canvas.getBoundingClientRect(),tt=F.width,st=F.height,vt=S||window.devicePixelRatio||1;if(this.devicePixelRatioUsed=vt,this.canvas.width=vt*tt,this.canvas.height=vt*st,this.resizeToCanvas(),this.drawFrame(),this.layout.fit===r.Layout){var Ct=this._layout.layoutScaleFactor;this.artboard.width=tt/Ct,this.artboard.height=st/Ct}}},Object.defineProperty(z.prototype,"source",{get:function(){return this.src},enumerable:!1,configurable:!0}),Object.defineProperty(z.prototype,"activeArtboard",{get:function(){return this.artboard?this.artboard.name:""},enumerable:!1,configurable:!0}),Object.defineProperty(z.prototype,"animationNames",{get:function(){if(!this.loaded||!this.artboard)return[];for(var S=[],F=0;F<this.artboard.animationCount();F++)S.push(this.artboard.animationByIndex(F).name);return S},enumerable:!1,configurable:!0}),Object.defineProperty(z.prototype,"stateMachineNames",{get:function(){if(!this.loaded||!this.artboard)return[];for(var S=[],F=0;F<this.artboard.stateMachineCount();F++)S.push(this.artboard.stateMachineByIndex(F).name);return S},enumerable:!1,configurable:!0}),z.prototype.stateMachineInputs=function(S){if(this.loaded){var F=this.animator.stateMachines.find(function(tt){return tt.name===S});return F==null?void 0:F.inputs}},z.prototype.retrieveInputAtPath=function(S,F){if(S)if(this.artboard){var tt=this.artboard.inputByPath(S,F);if(tt)return tt;console.warn("Could not access an input with name: '".concat(S,"', at path:'").concat(F,"'"))}else console.warn("Tried to access input: '".concat(S,"', at path: '").concat(F,"', but the Artboard is null"));else console.warn("No input name provided for path '".concat(F,"'"))},z.prototype.setBooleanStateAtPath=function(S,F,tt){var st=this.retrieveInputAtPath(S,tt);st&&(st.type===M.Boolean?st.asBool().value=F:console.warn("Input with name: '".concat(S,"', at path:'").concat(tt,"' is not a boolean")))},z.prototype.setNumberStateAtPath=function(S,F,tt){var st=this.retrieveInputAtPath(S,tt);st&&(st.type===M.Number?st.asNumber().value=F:console.warn("Input with name: '".concat(S,"', at path:'").concat(tt,"' is not a number")))},z.prototype.fireStateAtPath=function(S,F){var tt=this.retrieveInputAtPath(S,F);tt&&(tt.type===M.Trigger?tt.asTrigger().fire():console.warn("Input with name: '".concat(S,"', at path:'").concat(F,"' is not a trigger")))},z.prototype.retrieveTextAtPath=function(S,F){if(S)if(F)if(this.artboard){var tt=this.artboard.textByPath(S,F);if(tt)return tt;console.warn("Could not access text with name: '".concat(S,"', at path:'").concat(F,"'"))}else console.warn("Tried to access text: '".concat(S,"', at path: '").concat(F,"', but the Artboard is null"));else console.warn("No path provided for text '".concat(S,"'"));else console.warn("No text name provided for path '".concat(F,"'"))},z.prototype.getTextRunValueAtPath=function(S,F){var tt=this.retrieveTextAtPath(S,F);if(tt)return tt.text;console.warn("Could not get text with name: '".concat(S,"', at path:'").concat(F,"'"))},z.prototype.setTextRunValueAtPath=function(S,F,tt){var st=this.retrieveTextAtPath(S,tt);st?st.text=F:console.warn("Could not set text with name: '".concat(S,"', at path:'").concat(tt,"'"))},Object.defineProperty(z.prototype,"playingStateMachineNames",{get:function(){return this.loaded?this.animator.stateMachines.filter(function(S){return S.playing}).map(function(S){return S.name}):[]},enumerable:!1,configurable:!0}),Object.defineProperty(z.prototype,"playingAnimationNames",{get:function(){return this.loaded?this.animator.animations.filter(function(S){return S.playing}).map(function(S){return S.name}):[]},enumerable:!1,configurable:!0}),Object.defineProperty(z.prototype,"pausedAnimationNames",{get:function(){return this.loaded?this.animator.animations.filter(function(S){return!S.playing}).map(function(S){return S.name}):[]},enumerable:!1,configurable:!0}),Object.defineProperty(z.prototype,"pausedStateMachineNames",{get:function(){return this.loaded?this.animator.stateMachines.filter(function(S){return!S.playing}).map(function(S){return S.name}):[]},enumerable:!1,configurable:!0}),Object.defineProperty(z.prototype,"isPlaying",{get:function(){return this.animator.isPlaying},enumerable:!1,configurable:!0}),Object.defineProperty(z.prototype,"isPaused",{get:function(){return this.animator.isPaused},enumerable:!1,configurable:!0}),Object.defineProperty(z.prototype,"isStopped",{get:function(){return this.animator.isStopped},enumerable:!1,configurable:!0}),Object.defineProperty(z.prototype,"bounds",{get:function(){return this.artboard?this.artboard.bounds:void 0},enumerable:!1,configurable:!0}),z.prototype.on=function(S,F){this.eventManager.add({type:S,callback:F})},z.prototype.off=function(S,F){this.eventManager.remove({type:S,callback:F})},z.prototype.unsubscribe=function(S,F){console.warn("This function is deprecated: please use `off()` instead."),this.off(S,F)},z.prototype.removeAllRiveEventListeners=function(S){this.eventManager.removeAll(S)},z.prototype.unsubscribeAll=function(S){console.warn("This function is deprecated: please use `removeAllRiveEventListeners()` instead."),this.removeAllRiveEventListeners(S)},z.prototype.stopRendering=function(){this.loaded&&this.frameRequestId&&(this.runtime.cancelAnimationFrame?this.runtime.cancelAnimationFrame(this.frameRequestId):cancelAnimationFrame(this.frameRequestId),this.frameRequestId=null)},z.prototype.startRendering=function(){this.loaded&&this.artboard&&!this.frameRequestId&&(this.runtime.requestAnimationFrame?this.frameRequestId=this.runtime.requestAnimationFrame(this._boundDraw):this.frameRequestId=requestAnimationFrame(this._boundDraw))},z.prototype.enableFPSCounter=function(S){this.runtime.enableFPSCounter(S)},z.prototype.disableFPSCounter=function(){this.runtime.disableFPSCounter()},Object.defineProperty(z.prototype,"contents",{get:function(){if(this.loaded){for(var S={artboards:[]},F=0;F<this.file.artboardCount();F++){for(var tt=this.file.artboardByIndex(F),st={name:tt.name,animations:[],stateMachines:[]},vt=0;vt<tt.animationCount();vt++){var Ct=tt.animationByIndex(vt);st.animations.push(Ct.name)}for(var Ft=0;Ft<tt.stateMachineCount();Ft++){for(var qt=tt.stateMachineByIndex(Ft),re=qt.name,Vt=new this.runtime.StateMachineInstance(qt,tt),ze=[],Qt=0;Qt<Vt.inputCount();Qt++){var Ie=Vt.input(Qt);ze.push({name:Ie.name,type:Ie.type})}st.stateMachines.push({name:re,inputs:ze})}S.artboards.push(st)}return S}},enumerable:!1,configurable:!0}),Object.defineProperty(z.prototype,"volume",{get:function(){return this.artboard&&this.artboard.volume!==this._volume&&(this._volume=this.artboard.volume),this._volume},set:function(S){this._volume=S,this.artboard&&(this.artboard.volume=S*J.systemVolume)},enumerable:!1,configurable:!0}),Object.defineProperty(z.prototype,"artboardWidth",{get:function(){var S;return this.artboard?this.artboard.width:(S=this._artboardWidth)!==null&&S!==void 0?S:0},set:function(S){this._artboardWidth=S,this.artboard&&(this.artboard.width=S)},enumerable:!1,configurable:!0}),Object.defineProperty(z.prototype,"artboardHeight",{get:function(){var S;return this.artboard?this.artboard.height:(S=this._artboardHeight)!==null&&S!==void 0?S:0},set:function(S){this._artboardHeight=S,this.artboard&&(this.artboard.height=S)},enumerable:!1,configurable:!0}),z.prototype.resetArtboardSize=function(){this.artboard?(this.artboard.resetArtboardSize(),this._artboardWidth=this.artboard.width,this._artboardHeight=this.artboard.height):(this._artboardWidth=void 0,this._artboardHeight=void 0)},Object.defineProperty(z.prototype,"devicePixelRatioUsed",{get:function(){return this._devicePixelRatioUsed},set:function(S){this._devicePixelRatioUsed=S},enumerable:!1,configurable:!0}),z.missingErrorMessage="Rive source file or data buffer required",z.cleanupErrorMessage="Attempt to use file after calling cleanup.",z}(),ee=function(z){return m(void 0,void 0,void 0,function(){var S;return p(this,function(F){switch(F.label){case 0:return S=new Request(z),[4,fetch(S)];case 1:return[4,F.sent().arrayBuffer()];case 2:return[2,F.sent()]}})})},At=function(z){return typeof z=="string"?[z]:z instanceof Array?z:[]},Ht={EventManager:H,TaskQueueManager:Y},De=function(z){return new Promise(function(S){return T.getInstance(function(F){F.decodeAudio(z,S)})})},Ee=function(z){return new Promise(function(S){return T.getInstance(function(F){F.decodeImage(z,S)})})},un=function(z){return new Promise(function(S){return T.getInstance(function(F){F.decodeFont(z,S)})})}})(),e})();var q2=j2.exports=Vf();const zi=class zi{constructor(){$t(this,"memoryUpdates",Le(null));$t(this,"clearTimeout")}notifyMemoryUpdated(){this.clearTimeout||(this.memoryUpdates.set({timestamp:Date.now()}),clearTimeout(this.clearTimeout),this.clearTimeout=void 0,this.clearTimeout=setTimeout(()=>{this.memoryUpdates.set(null),this.clearTimeout=void 0},zi.CLEAR_DELAY_MS))}subscribe(t){return this.memoryUpdates.subscribe(t)}};$t(zi,"CLEAR_DELAY_MS",1e4);let Ms=zi;const Gf=new Ms,W2=""+new URL("memories-dark-DhQ4ghw7.riv",import.meta.url).href,Ac=""+new URL("memories-light-Cj0fATGz.riv",import.meta.url).href;function V2(i){let t,n,e;return{c(){t=L("span"),t.textContent="Augment Memories",A(t,"role","button"),A(t,"tabindex","0")},m(o,r){x(o,t,r),n||(e=[Lt(t,"click",i[3]),Lt(t,"keydown",i[4])],n=!0)},p:P,d(o){o&&b(t),n=!1,Qe(e)}}}function G2(i){let t,n;return t=new Pt({props:{content:"Information that Agent remembered from previous interactions (click to open)",$$slots:{default:[V2]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};2048&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function Y2(i){let t;return{c(){t=L("canvas"),A(t,"slot","leftIcon"),A(t,"width","32"),A(t,"height","32"),qn(t,"width","14px"),qn(t,"height","14px")},m(n,e){x(n,t,e),i[5](t)},p:P,d(n){n&&b(t),i[5](null)}}}function K2(i){let t,n;return t=new Uo({props:{$$slots:{leftIcon:[Y2],default:[G2]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,[o]){const r={};2049&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function X2(i,t,n){let e;Et(i,Gf,u=>n(2,e=u));let o,r,s=Ac;function c(){r&&(r==null||r.cleanup(),n(1,r=void 0)),o&&!r&&n(1,r=new q2.Rive({src:s,canvas:o,autoplay:!1,onLoad:()=>{r==null||r.resizeDrawingSurfaceToCanvas(),r==null||r.play(),r==null||r.stop()}}))}function a(u){s=u===Bm.dark?W2:Ac,c()}function l(){r==null||r.reset()}return ro(()=>{Om(a),a(zm())}),jr(()=>{r==null||r.cleanup()}),i.$$.update=()=>{3&i.$$.dirty&&o&&!r&&c(),4&i.$$.dirty&&(e!=null&&e.timestamp)&&(r==null||r.reset(),r==null||r.play(),setTimeout(l,2500))},[o,r,e,function(u){vn.call(this,i,u)},function(u){vn.call(this,i,u)},function(u){te[u?"unshift":"push"](()=>{o=u,n(0,o)})}]}class J2 extends ut{constructor(t){super(),dt(this,t,X2,K2,ct,{})}}function Mc(i){let t,n,e,o,r,s,c,a;const l=[nv,ev,tv,Q2,Z2],u=[];function f(m,p){return 2&p&&(t=null),2&p&&(n=null),2&p&&(e=null),2&p&&(o=null),t==null&&(t=!!Ps(m[1])),t?0:(n==null&&(n=!!Ns(m[1])),n?1:(e==null&&(e=!!sf(m[1])),e?2:(o==null&&(o=!!af(m[1])),o?3:4)))}return r=f(i,-1),s=u[r]=l[r](i),{c(){s.c(),c=mt()},m(m,p){u[r].m(m,p),x(m,c,p),a=!0},p(m,p){let _=r;r=f(m,p),r===_?u[r].p(m,p):(j(),$(u[_],1,1,()=>{u[_]=null}),q(),s=u[r],s?s.p(m,p):(s=u[r]=l[r](m),s.c()),d(s,1),s.m(c.parentNode,c))},i(m){a||(d(s),a=!0)},o(m){$(s),a=!1},d(m){m&&b(c),u[r].d(m)}}}function Z2(i){let t,n,e,o,r,s;const c=[iv,rv,ov],a=[];function l(u,f){return u[3]?0:u[2].iconName?1:2}return n=l(i),e=a[n]=c[n](i),{c(){t=L("div"),e.c(),A(t,"class","pulse-chip-container svelte-s9omdo")},m(u,f){x(u,t,f),a[n].m(t,null),o=!0,r||(s=Ss(Pp.call(null,t,i[6])),r=!0)},p(u,f){let m=n;n=l(u),n===m?a[n].p(u,f):(j(),$(a[m],1,1,()=>{a[m]=null}),q(),e=a[n],e?e.p(u,f):(e=a[n]=c[n](u),e.c()),d(e,1),e.m(t,null))},i(u){o||(d(e),o=!0)},o(u){$(e),o=!1},d(u){u&&b(t),a[n].d(),r=!1,s()}}}function Q2(i){let t,n;return t=new J2({}),t.$on("click",function(){Ne(i[2].onClick)&&i[2].onClick.apply(this,arguments)}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){i=e},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function tv(i){let t,n;return t=new h2({props:{item:i[1],chatModel:i[0]}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};2&o&&(r.item=e[1]),1&o&&(r.chatModel=e[0]),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function ev(i){let t,n;return t=new H2({props:{item:i[1]}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};2&o&&(r.item=e[1]),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function nv(i){let t,n;return t=new E2({props:{originalCode:i[1].selection.originalCode,onRemove:i[7]}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};2&o&&(r.originalCode=e[1].selection.originalCode),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function ov(i){let t,n;return t=new Uo({props:{removeBtn:{title:i[2].removeTitle,onRemove:i[7]},showWarning:i[2].showWarning,$$slots:{default:[cv]},$$scope:{ctx:i}}}),t.$on("click",function(){Ne(i[2].onClick)&&i[2].onClick.apply(this,arguments)}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){i=e;const r={};4&o&&(r.removeBtn={title:i[2].removeTitle,onRemove:i[7]}),4&o&&(r.showWarning=i[2].showWarning),4102&o&&(r.$$scope={dirty:o,ctx:i}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function rv(i){let t,n;return t=new Uo({props:{removeBtn:{title:i[2].removeTitle,onRemove:i[7]},showWarning:i[2].showWarning,$$slots:{leftIcon:[$v],default:[dv]},$$scope:{ctx:i}}}),t.$on("click",function(){Ne(i[2].onClick)&&i[2].onClick.apply(this,arguments)}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){i=e;const r={};4&o&&(r.removeBtn={title:i[2].removeTitle,onRemove:i[7]}),4&o&&(r.showWarning=i[2].showWarning),4102&o&&(r.$$scope={dirty:o,ctx:i}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function iv(i){let t,n;return t=new Uo({props:{removeBtn:{title:i[2].removeTitle,onRemove:i[7]},showWarning:i[2].showWarning,$$slots:{leftButtons:[gv],default:[pv]},$$scope:{ctx:i}}}),t.$on("click",function(){Ne(i[2].onClick)&&i[2].onClick.apply(this,arguments)}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){i=e;const r={};4&o&&(r.removeBtn={title:i[2].removeTitle,onRemove:i[7]}),4&o&&(r.showWarning=i[2].showWarning),4118&o&&(r.$$scope={dirty:o,ctx:i}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function sv(i){let t,n;return t=new _n({props:{nopath:!0,filepath:i[2].filepath}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};4&o&&(r.filepath=e[2].filepath),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function av(i){let t,n;return t=new Kr({props:{option:i[1],slot:"content"}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};2&o&&(r.option=e[1]),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function cv(i){let t,n;return t=new Pt({props:{triggerOn:[Zt.Hover],$$slots:{content:[av],default:[sv]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};4102&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function lv(i){let t,n;return t=new _n({props:{nopath:!0,filepath:i[2].filepath}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};4&o&&(r.filepath=e[2].filepath),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function uv(i){let t,n;return t=new Kr({props:{option:i[1],slot:"content"}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};2&o&&(r.option=e[1]),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function dv(i){let t,n;return t=new Pt({props:{triggerOn:[Zt.Hover],$$slots:{content:[uv],default:[lv]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};4102&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function $v(i){let t,n;return t=new vh({props:{icon:i[2].iconName,slot:"leftIcon"}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};4&o&&(r.icon=e[2].iconName),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function fv(i){let t,n;return t=new _n({props:{nopath:!0,filepath:i[2].filepath}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};4&o&&(r.filepath=e[2].filepath),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function mv(i){let t,n;return t=new Kr({props:{option:i[1],slot:"content"}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};2&o&&(r.option=e[1]),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function pv(i){let t,n;return t=new Pt({props:{triggerOn:[Zt.Hover],$$slots:{content:[mv],default:[fv]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};4102&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function gv(i){let t,n;const e=[i[4],{slot:"leftButtons"}];let o={};for(let r=0;r<e.length;r+=1)o=kt(o,e[r]);return t=new eh({props:o}),{c(){v(t.$$.fragment)},m(r,s){w(t,r,s),n=!0},p(r,s){const c=16&s?Se(e,[fo(r[4]),e[1]]):{};t.$set(c)},i(r){n||(d(t.$$.fragment,r),n=!0)},o(r){$(t.$$.fragment,r),n=!1},d(r){y(t,r)}}}function hv(i){let t,n,e=i[1]&&Mc(i);return{c(){e&&e.c(),t=mt()},m(o,r){e&&e.m(o,r),x(o,t,r),n=!0},p(o,[r]){o[1]?e?(e.p(o,r),2&r&&d(e,1)):(e=Mc(o),e.c(),d(e,1),e.m(t.parentNode,t)):e&&(j(),$(e,1,1,()=>{e=null}),q())},i(o){n||(d(e),n=!0)},o(o){$(e),n=!1},d(o){o&&b(t),e&&e.d(o)}}}function vv(i,t,n){let e,o,r,s,c,a,l=P,u=P,f=()=>(u(),u=ce(m,C=>n(10,a=C)),m);i.$$.on_destroy.push(()=>l()),i.$$.on_destroy.push(()=>u());let{chatModel:m}=t;f();let{item:p}=t,_=!1;const M=new Np({onHoverStart:()=>{n(8,_=!0)},onHoverEnd:()=>{n(8,_=!1)},hoverTriggerDuration:0});return i.$$set=C=>{"chatModel"in C&&f(n(0,m=C.chatModel)),"item"in C&&n(1,p=C.item)},i.$$.update=()=>{1024&i.$$.dirty&&(n(5,e=a==null?void 0:a.specialContextInputModel),l(),l=ce(e,C=>n(9,c=C))),2&i.$$.dirty&&n(2,o=(C=>{const T={onClick:void 0,removeTitle:"",filepath:"",pinnable:!0,iconName:void 0,showWarning:!1};if(Is(C))return{...T,onClick:()=>{m==null||m.extensionClient.openFile(C.file)},removeTitle:"Remove file from context",filepath:C.file.pathName};if(Ls(C))return{...T,onClick:()=>{m==null||m.extensionClient.openFile(C.recentFile)},removeTitle:"Remove file from context",filepath:C.recentFile.pathName};if(Rs(C))return{...T,onClick:()=>{m==null||m.extensionClient.openFile(C.folder)},removeTitle:"Remove folder from context",filepath:C.folder.pathName,iconName:"folder-opened"};if(Ds(C))return{...T,removeTitle:"Remove external source from context",filepath:C.label,iconName:"book"};if(Wi(C))return{...T,removeTitle:"Remove source folder from context",filepath:C.sourceFolder.folderRoot,iconName:"root-folder",pinnable:!1,showWarning:C.showWarning};if(sf(C))return{...T,iconName:"root-folder",pinnable:!1};if(Fs(C)){const E=`${ms}/${ps}/${C.rule.path}`;return{...T,onClick:()=>{m==null||m.extensionClient.openFile({repoRoot:"",pathName:E})},removeTitle:"Remove rule from context",filepath:E,iconName:"rule"}}return af(C)?{...T,onClick:()=>{const E=m==null?void 0:m.flags.agentMemoriesFilePathName;m!=null&&m.currentConversationId&&m.extensionClient.reportAgentSessionEvent({eventName:Mo.openedMemoriesFile,conversationId:m.currentConversationId,eventData:{memoriesFileOpenData:{memoriesPathUndefined:!E}}}),m==null||m.extensionClient.openMemoriesFile()},pinnable:!1}:T})(p)),514&i.$$.dirty&&n(4,r={title:p.pinned?"Unpin":"Pin to context",onPin:()=>c==null?void 0:c.togglePinned(p),isPinned:p.pinned}),262&i.$$.dirty&&n(3,s=o.pinnable&&(_||p.pinned))},[m,p,o,s,r,e,M,()=>{c==null||c.markInactive(p),c==null||c.unpin(p)},_,c,a]}class wv extends ut{constructor(t){super(),dt(this,t,vv,hv,ct,{chatModel:0,item:1})}}function kc(i,t,n){const e=i.slice();return e[4]=t[n],e}function Sc(i){let t,n;return t=new wv({props:{item:i[4],chatModel:i[0]}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};2&o&&(r.item=e[4]),1&o&&(r.chatModel=e[0]),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function yv(i){let t,n,e,o=se(i[1]),r=[];for(let c=0;c<o.length;c+=1)r[c]=Sc(kc(i,o,c));const s=c=>$(r[c],1,1,()=>{r[c]=null});return{c(){t=L("div"),n=L("div");for(let c=0;c<r.length;c+=1)r[c].c();A(n,"class","c-action-bar-context-container svelte-1wj2viq"),A(t,"class","c-action-bar-context svelte-1wj2viq")},m(c,a){x(c,t,a),O(t,n);for(let l=0;l<r.length;l+=1)r[l]&&r[l].m(n,null);e=!0},p(c,[a]){if(3&a){let l;for(o=se(c[1]),l=0;l<o.length;l+=1){const u=kc(c,o,l);r[l]?(r[l].p(u,a),d(r[l],1)):(r[l]=Sc(u),r[l].c(),d(r[l],1),r[l].m(n,null))}for(j(),l=o.length;l<r.length;l+=1)s(l);q()}},i(c){if(!e){for(let a=0;a<o.length;a+=1)d(r[a]);e=!0}},o(c){r=r.filter(Boolean);for(let a=0;a<r.length;a+=1)$(r[a]);e=!1},d(c){c&&b(t),pn(r,c)}}}function bv(i,t,n){let e,o,r=P;i.$$.on_destroy.push(()=>r());let{chatModel:s}=t,c=[];return i.$$set=a=>{"chatModel"in a&&n(0,s=a.chatModel)},i.$$.update=()=>{if(1&i.$$.dirty&&(n(2,e=s.specialContextInputModel),r(),r=ce(e,a=>n(3,o=a))),8&i.$$.dirty){const a=o.recentActiveItems,l=[],u=a.filter(f=>!Wi(f)||(l.push(f),!1));l.length>1?(u.push({id:"sourceFoldersGroup",label:"Repos",status:ip.active,sourceFolderGroup:l.sort((f,m)=>{const p=ws(f.sourceFolder.folderRoot),_=ws(m.sourceFolder.folderRoot);return p.localeCompare(_)}),referenceCount:1}),n(1,c=u.reverse())):n(1,c=a.reverse())}},[s,c,e,o]}class xv extends ut{constructor(t){super(),dt(this,t,bv,yv,ct,{chatModel:0})}}const _v=i=>({}),Tc=i=>({}),Cv=i=>({}),Ec=i=>({});function Av(i){let t,n,e,o,r;const s=i[1].leftAlign,c=Yt(s,i,i[0],Ec),a=i[1].rightAlign,l=Yt(a,i,i[0],Tc);return{c(){t=L("div"),n=L("div"),c&&c.c(),e=U(),o=L("div"),l&&l.c(),A(n,"class","c-input-action-bar__left-align"),A(o,"class","c-input-action-bar__right-align"),A(t,"class","c-input-action-bar svelte-zhy9ha")},m(u,f){x(u,t,f),O(t,n),c&&c.m(n,null),O(t,e),O(t,o),l&&l.m(o,null),r=!0},p(u,[f]){c&&c.p&&(!r||1&f)&&Kt(c,s,u,u[0],r?Jt(s,u[0],f,Cv):Xt(u[0]),Ec),l&&l.p&&(!r||1&f)&&Kt(l,a,u,u[0],r?Jt(a,u[0],f,_v):Xt(u[0]),Tc)},i(u){r||(d(c,u),d(l,u),r=!0)},o(u){$(c,u),$(l,u),r=!1},d(u){u&&b(t),c&&c.d(u),l&&l.d(u)}}}function Mv(i,t,n){let{$$slots:e={},$$scope:o}=t;return i.$$set=r=>{"$$scope"in r&&n(0,o=r.$$scope)},[o,e]}const kv=i=>({}),Ic=i=>({closeDropdown:i[11]}),Sv=i=>({}),Lc=i=>({}),Tv=i=>({}),Rc=i=>({}),Ev=i=>({dropdownIconSize:1024&i[0],variant:2&i[0],color:4&i[0],disabled:16384&i[0],radius:8&i[0]}),Dc=i=>({dropdownButtonDataAttr:jv,dropdownIconSize:i[10],variant:i[1],color:i[2],disabled:i[14],radius:i[3]}),Iv=i=>({}),Nc=i=>({slot:"iconLeft"}),Lv=i=>({size:1&i[0],variant:2&i[0],color:4&i[0],radius:8&i[0],disabled:32768&i[0],highContrast:16&i[0]}),Pc=i=>({mainButtonDataAttr:Hv,size:i[0],variant:i[1],color:i[2],radius:i[3],disabled:i[15],highContrast:i[4]});function Rv(i){let t;const n=i[26].default,e=Yt(n,i,i[37],null);return{c(){e&&e.c()},m(o,r){e&&e.m(o,r),t=!0},p(o,r){e&&e.p&&(!t||64&r[1])&&Kt(e,n,o,o[37],t?Jt(n,o[37],r,null):Xt(o[37]),null)},i(o){t||(d(e,o),t=!0)},o(o){$(e,o),t=!1},d(o){e&&e.d(o)}}}function Dv(i){let t;const n=i[26].iconLeft,e=Yt(n,i,i[37],Nc);return{c(){e&&e.c()},m(o,r){e&&e.m(o,r),t=!0},p(o,r){e&&e.p&&(!t||64&r[1])&&Kt(e,n,o,o[37],t?Jt(n,o[37],r,Iv):Xt(o[37]),Nc)},i(o){t||(d(e,o),t=!0)},o(o){$(e,o),t=!1},d(o){e&&e.d(o)}}}function Fc(i){let t,n,e;return n=new vf({props:{size:4,orientation:"vertical"}}),{c(){t=L("div"),v(n.$$.fragment),A(t,"class","c-split-button__separator svelte-1tmsqjt")},m(o,r){x(o,t,r),w(n,t,null),e=!0},i(o){e||(d(n.$$.fragment,o),e=!0)},o(o){$(n.$$.fragment,o),e=!1},d(o){o&&b(t),y(n)}}}function Oc(i){let t,n,e={onOpenChange:i[16],$$slots:{default:[Bv]},$$scope:{ctx:i}};return t=new wt.Root({props:e}),i[36](t),{c(){v(t.$$.fragment)},m(o,r){w(t,o,r),n=!0},p(o,r){const s={};59278&r[0]|64&r[1]&&(s.$$scope={dirty:r,ctx:o}),t.$set(s)},i(o){n||(d(t.$$.fragment,o),n=!0)},o(o){$(t.$$.fragment,o),n=!1},d(o){i[36](null),y(t,o)}}}function Nv(i){let t;const n=i[26]["custom-dropdown-icon"],e=Yt(n,i,i[37],Lc);return{c(){e&&e.c()},m(o,r){e&&e.m(o,r),t=!0},p(o,r){e&&e.p&&(!t||64&r[1])&&Kt(e,n,o,o[37],t?Jt(n,o[37],r,Sv):Xt(o[37]),Lc)},i(o){t||(d(e,o),t=!0)},o(o){$(e,o),t=!1},d(o){e&&e.d(o)}}}function Pv(i){let t,n;return t=new Oo({}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p:P,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function Fv(i){let t;const n=i[26]["dropdown-icon"],e=Yt(n,i,i[37],Rc),o=e||function(r){let s,c,a,l;const u=[Pv,Nv],f=[];function m(p,_){return p[9]==="chevron"?0:1}return s=m(r),c=f[s]=u[s](r),{c(){c.c(),a=mt()},m(p,_){f[s].m(p,_),x(p,a,_),l=!0},p(p,_){let M=s;s=m(p),s===M?f[s].p(p,_):(j(),$(f[M],1,1,()=>{f[M]=null}),q(),c=f[s],c?c.p(p,_):(c=f[s]=u[s](p),c.c()),d(c,1),c.m(a.parentNode,a))},i(p){l||(d(c),l=!0)},o(p){$(c),l=!1},d(p){p&&b(a),f[s].d(p)}}}(i);return{c(){o&&o.c()},m(r,s){o&&o.m(r,s),t=!0},p(r,s){e?e.p&&(!t||64&s[1])&&Kt(e,n,r,r[37],t?Jt(n,r[37],s,Tv):Xt(r[37]),Rc):o&&o.p&&(!t||512&s[0]|64&s[1])&&o.p(r,t?s:[-1,-1])},i(r){t||(d(o,r),t=!0)},o(r){$(o,r),t=!1},d(r){o&&o.d(r)}}}function Ov(i){let t;const n=i[26]["dropdown-trigger"],e=Yt(n,i,i[37],Dc),o=e||function(r){let s,c;return s=new fe({props:{size:r[10],variant:r[15]?"soft":r[1],color:r[2],disabled:r[14],radius:r[3],"data-split-button-dropdown":"true",$$slots:{default:[Fv]},$$scope:{ctx:r}}}),{c(){v(s.$$.fragment)},m(a,l){w(s,a,l),c=!0},p(a,l){const u={};1024&l[0]&&(u.size=a[10]),32770&l[0]&&(u.variant=a[15]?"soft":a[1]),4&l[0]&&(u.color=a[2]),16384&l[0]&&(u.disabled=a[14]),8&l[0]&&(u.radius=a[3]),512&l[0]|64&l[1]&&(u.$$scope={dirty:l,ctx:a}),s.$set(u)},i(a){c||(d(s.$$.fragment,a),c=!0)},o(a){$(s.$$.fragment,a),c=!1},d(a){y(s,a)}}}(i);return{c(){o&&o.c()},m(r,s){o&&o.m(r,s),t=!0},p(r,s){e?e.p&&(!t||17422&s[0]|64&s[1])&&Kt(e,n,r,r[37],t?Jt(n,r[37],s,Ev):Xt(r[37]),Dc):o&&o.p&&(!t||50702&s[0]|64&s[1])&&o.p(r,t?s:[-1,-1])},i(r){t||(d(o,r),t=!0)},o(r){$(o,r),t=!1},d(r){o&&o.d(r)}}}function zv(i){let t,n,e,o;const r=i[26]["dropdown-content"],s=Yt(r,i,i[37],Ic);return{c(){t=L("div"),s&&s.c(),A(t,"class","c-split-button__dropdown-contents svelte-1tmsqjt")},m(c,a){x(c,t,a),s&&s.m(t,null),n=!0,e||(o=Lt(t,"click",i[19]),e=!0)},p(c,a){s&&s.p&&(!n||64&a[1])&&Kt(s,r,c,c[37],n?Jt(r,c[37],a,kv):Xt(c[37]),Ic)},i(c){n||(d(s,c),n=!0)},o(c){$(s,c),n=!1},d(c){c&&b(t),s&&s.d(c),e=!1,o()}}}function Bv(i){let t,n,e,o;return t=new wt.Trigger({props:{$$slots:{default:[Ov]},$$scope:{ctx:i}}}),e=new wt.Content({props:{size:i[13],side:i[7],align:i[8],onClickOutside:i[17],onEscapeKeyDown:i[18],$$slots:{default:[zv]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment),n=U(),v(e.$$.fragment)},m(r,s){w(t,r,s),x(r,n,s),w(e,r,s),o=!0},p(r,s){const c={};50702&s[0]|64&s[1]&&(c.$$scope={dirty:s,ctx:r}),t.$set(c);const a={};8192&s[0]&&(a.size=r[13]),128&s[0]&&(a.side=r[7]),256&s[0]&&(a.align=r[8]),64&s[1]&&(a.$$scope={dirty:s,ctx:r}),e.$set(a)},i(r){o||(d(t.$$.fragment,r),d(e.$$.fragment,r),o=!0)},o(r){$(t.$$.fragment,r),$(e.$$.fragment,r),o=!1},d(r){r&&b(n),y(t,r),y(e,r)}}}function Uv(i){let t,n,e,o,r,s;const c=i[26].button,a=Yt(c,i,i[37],Pc),l=a||function(m){let p,_;const M=[{size:m[0]},{variant:m[1]},{color:m[2]},{radius:m[3]},{disabled:m[15]},{highContrast:m[4]},{"data-split-button-main":m[6]?"true":void 0},m[20]];let C={$$slots:{iconLeft:[Dv],default:[Rv]},$$scope:{ctx:m}};for(let T=0;T<M.length;T+=1)C=kt(C,M[T]);return p=new he({props:C}),p.$on("click",m[27]),p.$on("keyup",m[28]),p.$on("keydown",m[29]),p.$on("mousedown",m[30]),p.$on("mouseover",m[31]),p.$on("focus",m[32]),p.$on("mouseleave",m[33]),p.$on("blur",m[34]),p.$on("contextmenu",m[35]),{c(){v(p.$$.fragment)},m(T,E){w(p,T,E),_=!0},p(T,E){const R=1081439&E[0]?Se(M,[1&E[0]&&{size:T[0]},2&E[0]&&{variant:T[1]},4&E[0]&&{color:T[2]},8&E[0]&&{radius:T[3]},32768&E[0]&&{disabled:T[15]},16&E[0]&&{highContrast:T[4]},64&E[0]&&{"data-split-button-main":T[6]?"true":void 0},1048576&E[0]&&fo(T[20])]):{};64&E[1]&&(R.$$scope={dirty:E,ctx:T}),p.$set(R)},i(T){_||(d(p.$$.fragment,T),_=!0)},o(T){$(p.$$.fragment,T),_=!1},d(T){y(p,T)}}}(i);let u=i[6]&&Fc(),f=i[6]&&Oc(i);return{c(){t=L("div"),n=L("div"),l&&l.c(),e=U(),u&&u.c(),o=U(),f&&f.c(),A(n,"class","c-split-button__main svelte-1tmsqjt"),A(t,"class",r="c-split-button c-split-button--size-"+i[0]+" "+i[5]+" svelte-1tmsqjt"),Mt(t,"c-split-button--has-dropdown",i[6])},m(m,p){x(m,t,p),O(t,n),l&&l.m(n,null),O(t,e),u&&u.m(t,null),O(t,o),f&&f.m(t,null),s=!0},p(m,p){a?a.p&&(!s||32799&p[0]|64&p[1])&&Kt(a,c,m,m[37],s?Jt(c,m[37],p,Lv):Xt(m[37]),Pc):l&&l.p&&(!s||1081439&p[0]|64&p[1])&&l.p(m,s?p:[-1,-1]),m[6]?u?64&p[0]&&d(u,1):(u=Fc(),u.c(),d(u,1),u.m(t,o)):u&&(j(),$(u,1,1,()=>{u=null}),q()),m[6]?f?(f.p(m,p),64&p[0]&&d(f,1)):(f=Oc(m),f.c(),d(f,1),f.m(t,null)):f&&(j(),$(f,1,1,()=>{f=null}),q()),(!s||33&p[0]&&r!==(r="c-split-button c-split-button--size-"+m[0]+" "+m[5]+" svelte-1tmsqjt"))&&A(t,"class",r),(!s||97&p[0])&&Mt(t,"c-split-button--has-dropdown",m[6])},i(m){s||(d(l,m),d(u),d(f),s=!0)},o(m){$(l,m),$(u),$(f),s=!1},d(m){m&&b(t),l&&l.d(m),u&&u.d(),f&&f.d()}}}const Hv="data-split-button-main",jv="data-split-button-dropdown";function qv(i,t,n){let e,o,r;const s=["size","variant","color","radius","disabled","highContrast","class","showDropdown","dropdownSide","dropdownAlign","onDropdownOpenChange","onDropdownClickOutside","onDropdownEscapeKeyDown","dropdownIcon","dropdownIconSize","requestCloseDropdown","requestOpenDropdown"];let c,a=mr(t,s),{$$slots:l={},$$scope:u}=t,{size:f=2}=t,{variant:m="solid"}=t,{color:p="neutral"}=t,{radius:_="medium"}=t,{disabled:M={primaryDisabled:!1,dropdownDisabled:!1}}=t,{highContrast:C=!1}=t,{class:T=""}=t,{showDropdown:E=!0}=t,{dropdownSide:R="bottom"}=t,{dropdownAlign:N="end"}=t,{onDropdownOpenChange:Z}=t,{onDropdownClickOutside:Q}=t,{onDropdownEscapeKeyDown:X}=t,{dropdownIcon:K="chevron"}=t,{dropdownIconSize:H=f}=t;const Y=()=>c==null?void 0:c.requestClose();return i.$$set=V=>{t=kt(kt({},t),le(V)),n(20,a=mr(t,s)),"size"in V&&n(0,f=V.size),"variant"in V&&n(1,m=V.variant),"color"in V&&n(2,p=V.color),"radius"in V&&n(3,_=V.radius),"disabled"in V&&n(21,M=V.disabled),"highContrast"in V&&n(4,C=V.highContrast),"class"in V&&n(5,T=V.class),"showDropdown"in V&&n(6,E=V.showDropdown),"dropdownSide"in V&&n(7,R=V.dropdownSide),"dropdownAlign"in V&&n(8,N=V.dropdownAlign),"onDropdownOpenChange"in V&&n(22,Z=V.onDropdownOpenChange),"onDropdownClickOutside"in V&&n(23,Q=V.onDropdownClickOutside),"onDropdownEscapeKeyDown"in V&&n(24,X=V.onDropdownEscapeKeyDown),"dropdownIcon"in V&&n(9,K=V.dropdownIcon),"dropdownIconSize"in V&&n(10,H=V.dropdownIconSize),"$$scope"in V&&n(37,u=V.$$scope)},i.$$.update=()=>{2097152&i.$$.dirty[0]&&n(15,e=typeof M=="boolean"?M:M.primaryDisabled),2097152&i.$$.dirty[0]&&n(14,o=typeof M=="boolean"?M:M.dropdownDisabled),1024&i.$$.dirty[0]&&n(13,r=H>2?2:H)},[f,m,p,_,C,T,E,R,N,K,H,Y,c,r,o,e,function(V){Z&&Z(V)},function(){Q&&Q()},function(){X&&X()},function(){Y()},a,M,Z,Q,X,()=>c==null?void 0:c.requestOpen(),l,function(V){vn.call(this,i,V)},function(V){vn.call(this,i,V)},function(V){vn.call(this,i,V)},function(V){vn.call(this,i,V)},function(V){vn.call(this,i,V)},function(V){vn.call(this,i,V)},function(V){vn.call(this,i,V)},function(V){vn.call(this,i,V)},function(V){vn.call(this,i,V)},function(V){te[V?"unshift":"push"](()=>{c=V,n(12,c)})},u]}const Yf={Root:class extends ut{constructor(i){super(),dt(this,i,qv,Uv,ct,{size:0,variant:1,color:2,radius:3,disabled:21,highContrast:4,class:5,showDropdown:6,dropdownSide:7,dropdownAlign:8,onDropdownOpenChange:22,onDropdownClickOutside:23,onDropdownEscapeKeyDown:24,dropdownIcon:9,dropdownIconSize:10,requestCloseDropdown:11,requestOpenDropdown:25},null,[-1,-1])}get requestCloseDropdown(){return this.$$.ctx[11]}get requestOpenDropdown(){return this.$$.ctx[25]}}};function zc(i,t,n){const e=i.slice();e[21]=t[n];const o=e[2][e[21]];e[22]=o;const r=e[21]===e[11].currentConversationModel.selectedModelId;return e[23]=r,e}function Bc(i,t,n){const e=i.slice();e[26]=t[n];const o=e[26].id===e[5];return e[23]=o,e}function Wv(i){let t;const n=i[16].default,e=Yt(n,i,i[19],null);return{c(){e&&e.c()},m(o,r){e&&e.m(o,r),t=!0},p(o,r){e&&e.p&&(!t||524288&r)&&Kt(e,n,o,o[19],t?Jt(n,o[19],r,null):Xt(o[19]),null)},i(o){t||(d(e,o),t=!0)},o(o){$(e,o),t=!1},d(o){e&&e.d(o)}}}function Uc(i){let t,n,e,o=se(i[4]),r=[];for(let a=0;a<o.length;a+=1)r[a]=Hc(Bc(i,o,a));const s=a=>$(r[a],1,1,()=>{r[a]=null});let c=i[8]&&jc();return{c(){for(let a=0;a<r.length;a+=1)r[a].c();t=U(),c&&c.c(),n=mt()},m(a,l){for(let u=0;u<r.length;u+=1)r[u]&&r[u].m(a,l);x(a,t,l),c&&c.m(a,l),x(a,n,l),e=!0},p(a,l){if(112&l){let u;for(o=se(a[4]),u=0;u<o.length;u+=1){const f=Bc(a,o,u);r[u]?(r[u].p(f,l),d(r[u],1)):(r[u]=Hc(f),r[u].c(),d(r[u],1),r[u].m(t.parentNode,t))}for(j(),u=o.length;u<r.length;u+=1)s(u);q()}a[8]?c?256&l&&d(c,1):(c=jc(),c.c(),d(c,1),c.m(n.parentNode,n)):c&&(j(),$(c,1,1,()=>{c=null}),q())},i(a){if(!e){for(let l=0;l<o.length;l+=1)d(r[l]);d(c),e=!0}},o(a){r=r.filter(Boolean);for(let l=0;l<r.length;l+=1)$(r[l]);$(c),e=!1},d(a){a&&(b(t),b(n)),pn(r,a),c&&c.d(a)}}}function Vv(i){let t,n,e=i[26].label+"";return{c(){t=G(e),n=U()},m(o,r){x(o,t,r),x(o,n,r)},p(o,r){16&r&&e!==(e=o[26].label+"")&&_t(t,e)},d(o){o&&(b(t),b(n))}}}function Hc(i){let t,n;function e(){return i[17](i[26])}return t=new wt.Item({props:{highlight:i[23],onSelect:e,$$slots:{default:[Vv]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(o,r){w(t,o,r),n=!0},p(o,r){i=o;const s={};48&r&&(s.highlight=i[23]),80&r&&(s.onSelect=e),524304&r&&(s.$$scope={dirty:r,ctx:i}),t.$set(s)},i(o){n||(d(t.$$.fragment,o),n=!0)},o(o){$(t.$$.fragment,o),n=!1},d(o){y(t,o)}}}function jc(i){let t,n;return t=new wt.Separator({}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function qc(i){let t,n,e,o;t=new wt.Label({props:{$$slots:{default:[Gv]},$$scope:{ctx:i}}});let r=se(Object.keys(i[2])),s=[];for(let a=0;a<r.length;a+=1)s[a]=Wc(zc(i,r,a));const c=a=>$(s[a],1,1,()=>{s[a]=null});return{c(){v(t.$$.fragment),n=U();for(let a=0;a<s.length;a+=1)s[a].c();e=mt()},m(a,l){w(t,a,l),x(a,n,l);for(let u=0;u<s.length;u+=1)s[u]&&s[u].m(a,l);x(a,e,l),o=!0},p(a,l){const u={};if(524288&l&&(u.$$scope={dirty:l,ctx:a}),t.$set(u),2054&l){let f;for(r=se(Object.keys(a[2])),f=0;f<r.length;f+=1){const m=zc(a,r,f);s[f]?(s[f].p(m,l),d(s[f],1)):(s[f]=Wc(m),s[f].c(),d(s[f],1),s[f].m(e.parentNode,e))}for(j(),f=r.length;f<s.length;f+=1)c(f);q()}},i(a){if(!o){d(t.$$.fragment,a);for(let l=0;l<r.length;l+=1)d(s[l]);o=!0}},o(a){$(t.$$.fragment,a),s=s.filter(Boolean);for(let l=0;l<s.length;l+=1)$(s[l]);o=!1},d(a){a&&(b(n),b(e)),y(t,a),pn(s,a)}}}function Gv(i){let t;return{c(){t=G("Models")},m(n,e){x(n,t,e)},d(n){n&&b(t)}}}function Yv(i){let t,n,e=i[22]+"";return{c(){t=G(e),n=U()},m(o,r){x(o,t,r),x(o,n,r)},p(o,r){4&r&&e!==(e=o[22]+"")&&_t(t,e)},d(o){o&&(b(t),b(n))}}}function Wc(i){let t,n;function e(){return i[18](i[21])}return t=new wt.Item({props:{highlight:i[23],onSelect:e,$$slots:{default:[Yv]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(o,r){w(t,o,r),n=!0},p(o,r){i=o;const s={};4&r&&(s.highlight=i[23]),6&r&&(s.onSelect=e),524292&r&&(s.$$scope={dirty:r,ctx:i}),t.$set(s)},i(o){n||(d(t.$$.fragment,o),n=!0)},o(o){$(t.$$.fragment,o),n=!1},d(o){y(t,o)}}}function Kv(i){let t,n,e,o=i[7]&&Uc(i),r=i[8]&&qc(i);return{c(){o&&o.c(),t=U(),r&&r.c(),n=mt()},m(s,c){o&&o.m(s,c),x(s,t,c),r&&r.m(s,c),x(s,n,c),e=!0},p(s,c){s[7]?o?(o.p(s,c),128&c&&d(o,1)):(o=Uc(s),o.c(),d(o,1),o.m(t.parentNode,t)):o&&(j(),$(o,1,1,()=>{o=null}),q()),s[8]?r?(r.p(s,c),256&c&&d(r,1)):(r=qc(s),r.c(),d(r,1),r.m(n.parentNode,n)):r&&(j(),$(r,1,1,()=>{r=null}),q())},i(s){e||(d(o),d(r),e=!0)},o(s){$(o),$(r),e=!1},d(s){s&&(b(t),b(n)),o&&o.d(s),r&&r.d(s)}}}function Xv(i){let t,n;return t=new Yf.Root({props:{size:1,variant:"solid",color:i[9]?"neutral":"accent",disabled:i[0],showDropdown:i[10],dropdownSide:"top",dropdownAlign:"end",$$slots:{"dropdown-content":[Kv],default:[Wv]},$$scope:{ctx:i}}}),t.$on("click",function(){Ne(i[3])&&i[3].apply(this,arguments)}),t.$on("keyup",function(){Ne(ko("Enter",i[3]))&&ko("Enter",i[3]).apply(this,arguments)}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,[o]){i=e;const r={};512&o&&(r.color=i[9]?"neutral":"accent"),1&o&&(r.disabled=i[0]),1024&o&&(r.showDropdown=i[10]),524790&o&&(r.$$scope={dirty:o,ctx:i}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function Jv(i,t,n){let e,o,r,s,c,a,{$$slots:l={},$$scope:u}=t,{disabled:f=!1}=t,{onSelectModel:m}=t,{modelIdToDisplayName:p}=t,{onSend:_}=t,{modeOptions:M=[]}=t,{currentMode:C}=t,{onSelectMode:T}=t;const E=St("chatModel");if(!E)throw new Error("ChatModel not found in context");const R=St(Tn.key);Et(i,R,Q=>n(14,c=Q));const N=St(mo.key),{canShowTaskList:Z}=N;return Et(i,Z,Q=>n(15,a=Q)),i.$$set=Q=>{"disabled"in Q&&n(0,f=Q.disabled),"onSelectModel"in Q&&n(1,m=Q.onSelectModel),"modelIdToDisplayName"in Q&&n(2,p=Q.modelIdToDisplayName),"onSend"in Q&&n(3,_=Q.onSend),"modeOptions"in Q&&n(4,M=Q.modeOptions),"currentMode"in Q&&n(5,C=Q.currentMode),"onSelectMode"in Q&&n(6,T=Q.onSelectMode),"$$scope"in Q&&n(19,u=Q.$$scope)},i.$$.update=()=>{4&i.$$.dirty&&n(8,e=Object.keys(p).length>1),16&i.$$.dirty&&n(7,o=M.length>1),49536&i.$$.dirty&&n(10,r=e||a&&o&&!(c!=null&&c.isActive)),1&i.$$.dirty&&n(9,s=typeof f=="boolean"?f:f.primaryDisabled)},[f,m,p,_,M,C,T,o,e,s,r,E,R,Z,c,a,l,Q=>{T(Q.id)},Q=>{m(Q)},u]}class Zv extends ut{constructor(t){super(),dt(this,t,Jv,Xv,ct,{disabled:0,onSelectModel:1,modelIdToDisplayName:2,onSend:3,modeOptions:4,currentMode:5,onSelectMode:6})}}function Qv(i){let t,n,e;var o=i[7];return o&&(t=on(o,{})),{c(){t&&v(t.$$.fragment),n=mt()},m(r,s){t&&w(t,r,s),x(r,n,s),e=!0},p(r,s){if(128&s&&o!==(o=r[7])){if(t){j();const c=t;$(c.$$.fragment,1,0,()=>{y(c,1)}),q()}o?(t=on(o,{}),v(t.$$.fragment),d(t.$$.fragment,1),w(t,n.parentNode,n)):t=null}},i(r){e||(t&&d(t.$$.fragment,r),e=!0)},o(r){t&&$(t.$$.fragment,r),e=!1},d(r){r&&b(n),t&&y(t,r)}}}function tw(i){let t,n;return t=new Pt({props:{content:i[6],triggerOn:[Zt.Hover],side:"top",delayDurationMs:500,offset:[0,nw],$$slots:{default:[Qv]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};64&o&&(r.content=e[6]),1048704&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function ew(i){let t,n;return t=new Zv({props:{disabled:{primaryDisabled:i[1],dropdownDisabled:!1},onSelectModel:i[18],onSend:i[0],modelIdToDisplayName:i[3],modeOptions:i[4],currentMode:i[2],onSelectMode:i[12],$$slots:{default:[tw]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,[o]){const r={};2&o&&(r.disabled={primaryDisabled:e[1],dropdownDisabled:!1}),1024&o&&(r.onSelectModel=e[18]),1&o&&(r.onSend=e[0]),8&o&&(r.modelIdToDisplayName=e[3]),16&o&&(r.modeOptions=e[4]),4&o&&(r.currentMode=e[2]),1048768&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}const nw=10;function ow(i,t,n){let e,o,r,s,c,a,l,u,f,m,p,_,M=P,C=P,T=P;i.$$.on_destroy.push(()=>M()),i.$$.on_destroy.push(()=>C()),i.$$.on_destroy.push(()=>T());const E=St("chatModel");Et(i,E,K=>n(15,f=K));const R=St("agentConversationModel");if(!E)throw new Error("ChatModel not found in context");if(!R)throw new Error("AgentConversationModel not found in context");let{primaryAction:N}=t,{isDisabled:Z=!1}=t,{disabledReason:Q=""}=t,X={};return i.$$set=K=>{"primaryAction"in K&&n(0,N=K.primaryAction),"isDisabled"in K&&n(1,Z=K.isDisabled),"disabledReason"in K&&n(13,Q=K.disabledReason)},i.$$.update=()=>{32768&i.$$.dirty&&n(10,e=f.currentConversationModel),32768&i.$$.dirty&&(n(9,o=f.flags),C(),C=ce(o,K=>n(16,p=K))),32768&i.$$.dirty&&(n(8,r=f.sendModeModel.mode),M(),M=ce(r,K=>n(2,m=K))),4&i.$$.dirty&&n(14,s=Na.find(K=>K.id===m)),212992&i.$$.dirty&&n(7,c=_&&p.enableTaskList&&(s==null?void 0:s.icon)||r1),221186&i.$$.dirty&&n(6,a=Z?Q:_&&p.enableTaskList?(s==null?void 0:s.label)||"Send to Agent":"Send message"),196608&i.$$.dirty&&n(4,u=_&&p.enableTaskList?Na:[]),229380&i.$$.dirty&&(_&&p.enableTaskList||m!==Ti.addTask||(f.sendModeModel.setMode(Ti.send),f.saveImmediate())),32768&i.$$.dirty&&n(3,X=Object.fromEntries(Object.entries(f.flags.modelDisplayNameToId).map(([K,H])=>[H,K])))},n(5,l=R.isCurrConversationAgentic),T(),T=ce(l,K=>n(17,_=K)),[N,Z,m,X,u,l,a,c,r,o,e,E,function(K){f.sendModeModel.setMode(K),f.saveImmediate()},Q,s,f,p,_,K=>e.setSelectedModelId(K)]}const Po=class Po{constructor(t,n){$t(this,"_disposers",[]);$t(this,"_allMentionables",Le([]));$t(this,"_breadcrumbIds",Le([]));$t(this,"_userQuery",Le(""));$t(this,"_active",Le(!1));$t(this,"_allGroups",jn([this._active,this._allMentionables],([t,n])=>t?yp(n):[]));$t(this,"_currentGroup",jn([this._breadcrumbIds,this._allGroups],([t,n])=>{if(t.length===0)return;const e=t[t.length-1];return n.find(o=>zr(o)&&o.id===e)}));$t(this,"dispose",()=>{for(const t of this._disposers)t()});$t(this,"openDropdown",()=>{this._active.set(!0)});$t(this,"closeDropdown",()=>{this._active.set(!1),this._resetState()});$t(this,"toggleDropdown",()=>oe(this._active)?(this.closeDropdown(),!1):(this.openDropdown(),!0));$t(this,"pushBreadcrumb",t=>{oe(this._active)&&this._breadcrumbIds.update(n=>[...n,t.id])});$t(this,"popBreadcrumb",()=>{oe(this._active)&&this._breadcrumbIds.update(t=>t.slice(0,-1))});$t(this,"selectMentionable",t=>{var o;const n=this._chatModel.extensionClient,e=this._chatModel.specialContextInputModel;return zr(t)&&t.type==="breadcrumb"?(this.pushBreadcrumb(t),!0):t.type==="breadcrumb-back"?(this.popBreadcrumb(),!0):cf(t)?(e.markAllActive(),this.closeDropdown(),n.reportWebviewClientEvent(Qo.chatRestoreDefaultContext),!0):t.clearContext?(e.markAllInactive(),this.closeDropdown(),n.reportWebviewClientEvent(Qo.chatClearContext),!0):t.userGuidelines?(n.openSettingsPage("guidelines"),this.closeDropdown(),!0):((o=this._insertMentionNode)==null||o.call(this,t),this.closeDropdown(),!0)});$t(this,"_displayItems",jn([this._active,this._breadcrumbIds,this._userQuery,this._currentGroup,this.allGroups],([t,n,e,o,r])=>{if(!t)return[];if(n.length>0&&o)return[{...o,type:"breadcrumb-back"},...o.group.items.slice(0,Po.SINGLE_GROUP_MAX_ITEMS).map(s=>({...s,type:"item"}))];if(e.length>0){const s=rw(oe(this._userQuery)).map(c=>({...c,type:"item"}));return r.flatMap(c=>[{...c,type:"breadcrumb"},...c.group.items.slice(0,Po.MULTI_GROUP_MAX_ITEMS).map(a=>({...a,type:"item"}))]).concat(s)}return[{...lf,type:"item"},...r.map(s=>({...s,type:"breadcrumb"})),{...uf,type:"item"},{...df,type:"item"}]}));$t(this,"_refreshSeqNum",0);$t(this,"_refreshMentionables",s1(async()=>{if(!oe(this._active))return;this._refreshSeqNum++;const t=this._refreshSeqNum,n=this._chatModel.currentConversationModel&&mn(this._chatModel.currentConversationModel),e=oe(this._userQuery),o=await this._chatModel.extensionClient.getSuggestions(e,n);t===this._refreshSeqNum&&this._allMentionables.set(Kf({query:e,mentionables:o}))},Po.REFRESH_THROTTLE_MS,{leading:!0,trailing:!0}));this._chatModel=t,this._insertMentionNode=n,this._disposers.push(this._userQuery.subscribe(this._refreshMentionables)),this._disposers.push(this._active.subscribe(this._refreshMentionables))}get allGroups(){return this._allGroups}get currentGroup(){return this._currentGroup}get breadcrumbIds(){return this._breadcrumbIds}get displayItems(){return this._displayItems}get active(){return this._active}get userQuery(){return this._userQuery}_resetState(){this._breadcrumbIds.set([]),this._userQuery.set("")}};$t(Po,"REFRESH_THROTTLE_MS",600),$t(Po,"SINGLE_GROUP_MAX_ITEMS",12),$t(Po,"MULTI_GROUP_MAX_ITEMS",6);let Ri=Po;const Kf=({query:i,mentionables:t,returnAllIfNoResults:n=!0,threshold:e=1})=>{if(i.length<=1)return t;const o=new ur(t,{keys:["label"],threshold:e,minMatchCharLength:0,ignoreLocation:!0,includeScore:!0,useExtendedSearch:!1,shouldSort:!0,findAllMatches:!0}).search(i);return o.length===0&&n?t:o.map(r=>r.item)},rw=i=>Kf({query:i,mentionables:[lf,uf,df],returnAllIfNoResults:!1,threshold:.6});function iw(i){let t,n,e,o=i[0].label+"";return{c(){t=L("span"),n=L("span"),e=G(o),A(n,"class","c-mentionable-group-label__text right"),A(t,"class","c-mentionable-group-label")},m(r,s){x(r,t,s),O(t,n),O(n,e)},p(r,s){1&s&&o!==(o=r[0].label+"")&&_t(e,o)},i:P,o:P,d(r){r&&b(t)}}}function sw(i){let t,n;return t=new Zp({props:{$$slots:{text:[gw],leftIcon:[pw]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};17&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function aw(i){let t,n=i[0].label+"";return{c(){t=G(n)},m(e,o){x(e,t,o)},p(e,o){1&o&&n!==(n=e[0].label+"")&&_t(t,n)},i:P,o:P,d(e){e&&b(t)}}}function cw(i){let t,n;return t=new _n({props:{filepath:i[0].rule.path,$$slots:{leftIcon:[hw]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};1&o&&(r.filepath=e[0].rule.path),16&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function lw(i){let t,n;return t=new _n({props:{filepath:i[0].recentFile.pathName,$$slots:{leftIcon:[vw]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};1&o&&(r.filepath=e[0].recentFile.pathName),16&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function uw(i){let t,n;return t=new _n({props:{filepath:i[0].selection.pathName,$$slots:{leftIcon:[ww]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};1&o&&(r.filepath=e[0].selection.pathName),16&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function dw(i){let t,n;return t=new _n({props:{filepath:i[0].sourceFolder.folderRoot,$$slots:{leftIcon:[yw]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};1&o&&(r.filepath=e[0].sourceFolder.folderRoot),16&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function $w(i){let t,n;return t=new _n({props:{filepath:i[0].externalSource.name,$$slots:{leftIcon:[bw]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};1&o&&(r.filepath=e[0].externalSource.name),16&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function fw(i){let t,n;return t=new _n({props:{filepath:i[0].folder.pathName,$$slots:{leftIcon:[xw]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};1&o&&(r.filepath=e[0].folder.pathName),16&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function mw(i){let t,n;return t=new _n({props:{filepath:i[0].file.pathName,$$slots:{leftIcon:[_w]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};1&o&&(r.filepath=e[0].file.pathName),16&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function pw(i){let t,n,e;var o=Li(i[0].personality.type);return o&&(n=on(o,{})),{c(){t=L("span"),n&&v(n.$$.fragment),A(t,"slot","leftIcon"),A(t,"class","c-context-menu-item__icon svelte-1a2w9oo")},m(r,s){x(r,t,s),n&&w(n,t,null),e=!0},p(r,s){if(1&s&&o!==(o=Li(r[0].personality.type))){if(n){j();const c=n;$(c.$$.fragment,1,0,()=>{y(c,1)}),q()}o?(n=on(o,{}),v(n.$$.fragment),d(n.$$.fragment,1),w(n,t,null)):n=null}},i(r){e||(n&&d(n.$$.fragment,r),e=!0)},o(r){n&&$(n.$$.fragment,r),e=!1},d(r){r&&b(t),n&&y(n)}}}function gw(i){let t,n,e=i[0].label+"";return{c(){t=L("span"),n=G(e),A(t,"slot","text")},m(o,r){x(o,t,r),O(t,n)},p(o,r){1&r&&e!==(e=o[0].label+"")&&_t(n,e)},d(o){o&&b(t)}}}function hw(i){let t,n;return t=new Us({props:{slot:"leftIcon",iconName:"rule"}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p:P,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function vw(i){let t,n;return t=new zo({props:{slot:"leftIcon",iconName:"description"}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p:P,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function ww(i){let t,n;return t=new zo({props:{slot:"leftIcon",iconName:"text_select_start"}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p:P,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function yw(i){let t,n;return t=new zo({props:{slot:"leftIcon",iconName:"folder_managed"}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p:P,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function bw(i){let t,n;return t=new zo({props:{slot:"leftIcon",iconName:"import_contacts"}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p:P,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function xw(i){let t,n;return t=new zo({props:{slot:"leftIcon",iconName:"folder_open"}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p:P,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function _w(i){let t,n;return t=new zo({props:{slot:"leftIcon",iconName:"description"}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p:P,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function Cw(i){let t,n,e,o,r,s,c,a,l,u,f,m,p,_;const M=[mw,fw,$w,dw,uw,lw,cw,aw,sw,iw],C=[];function T(E,R){return 1&R&&(t=null),1&R&&(n=null),1&R&&(e=null),1&R&&(o=null),1&R&&(r=null),1&R&&(s=null),1&R&&(c=null),1&R&&(a=null),1&R&&(l=null),1&R&&(u=null),t==null&&(t=!!Is(E[0])),t?0:(n==null&&(n=!!Rs(E[0])),n?1:(e==null&&(e=!!Ds(E[0])),e?2:(o==null&&(o=!!Wi(E[0])),o?3:(r==null&&(r=!!Ps(E[0])),r?4:(s==null&&(s=!!Ls(E[0])),s?5:(c==null&&(c=!!Fs(E[0])),c?6:(a==null&&(a=!!zr(E[0])),a?7:(l==null&&(l=!!rf(E[0])),l?8:(u==null&&(u=!!(cf(E[0])||bp(E[0])||Ns(E[0]))),u?9:-1)))))))))}return~(f=T(i,-1))&&(m=C[f]=M[f](i)),{c(){m&&m.c(),p=mt()},m(E,R){~f&&C[f].m(E,R),x(E,p,R),_=!0},p(E,R){let N=f;f=T(E,R),f===N?~f&&C[f].p(E,R):(m&&(j(),$(C[N],1,1,()=>{C[N]=null}),q()),~f?(m=C[f],m?m.p(E,R):(m=C[f]=M[f](E),m.c()),d(m,1),m.m(p.parentNode,p)):m=null)},i(E){_||(d(m),_=!0)},o(E){$(m),_=!1},d(E){E&&b(p),~f&&C[f].d(E)}}}function Aw(i){let t,n,e;var o=i[3];function r(s,c){return{props:{highlight:s[2],onSelect:s[1],$$slots:{default:[Cw]},$$scope:{ctx:s}}}}return o&&(t=on(o,r(i))),{c(){t&&v(t.$$.fragment),n=mt()},m(s,c){t&&w(t,s,c),x(s,n,c),e=!0},p(s,[c]){if(8&c&&o!==(o=s[3])){if(t){j();const a=t;$(a.$$.fragment,1,0,()=>{y(a,1)}),q()}o?(t=on(o,r(s)),v(t.$$.fragment),d(t.$$.fragment,1),w(t,n.parentNode,n)):t=null}else if(o){const a={};4&c&&(a.highlight=s[2]),2&c&&(a.onSelect=s[1]),17&c&&(a.$$scope={dirty:c,ctx:s}),t.$set(a)}},i(s){e||(t&&d(t.$$.fragment,s),e=!0)},o(s){t&&$(t.$$.fragment,s),e=!1},d(s){s&&b(n),t&&y(t,s)}}}function Mw(i,t,n){let e,{item:o}=t,{onSelect:r}=t,{highlight:s}=t;return i.$$set=c=>{"item"in c&&n(0,o=c.item),"onSelect"in c&&n(1,r=c.onSelect),"highlight"in c&&n(2,s=c.highlight)},i.$$.update=()=>{1&i.$$.dirty&&(o.type==="breadcrumb-back"?n(3,e=wt.BreadcrumbBackItem):o.type==="breadcrumb"&&zr(o)?n(3,e=wt.BreadcrumbItem):o.type!=="item"||zr(o)||n(3,e=wt.Item))},[o,r,s,e]}class Xf extends ut{constructor(t){super(),dt(this,t,Mw,Aw,ct,{item:0,onSelect:1,highlight:2})}}function kw(i){let t,n,e=[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 512 512"},i[0]],o={};for(let r=0;r<e.length;r+=1)o=kt(o,e[r]);return{c(){t=ie("svg"),n=new rn(!0),this.h()},l(r){t=sn(r,"svg",{xmlns:!0,"data-ds-icon":!0,viewBox:!0});var s=an(t);n=cn(s,!0),s.forEach(b),this.h()},h(){n.a=null,$e(t,o)},m(r,s){ln(r,t,s),n.m('<!--! Font Awesome Pro 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2024 Fonticons, Inc.--><path d="M256 48C141.1 48 48 141.1 48 256s93.1 208 208 208c13.3 0 24 10.7 24 24s-10.7 24-24 24C114.6 512 0 397.4 0 256S114.6 0 256 0s256 114.6 256 256v28c0 50.8-41.2 92-92 92-31.1 0-58.7-15.5-75.3-39.2-22 24.1-53.6 39.2-88.7 39.2-66.3 0-120-53.7-120-120s53.7-120 120-120c28.8 0 55.2 10.1 75.8 27 4.3-6.6 11.7-11 20.2-11 13.3 0 24 10.7 24 24v108c0 24.3 19.7 44 44 44s44-19.7 44-44v-28c0-114.9-93.1-208-208-208m72 208a72 72 0 1 0-144 0 72 72 0 1 0 144 0"/>',t)},p(r,[s]){$e(t,o=Se(e,[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 512 512"},1&s&&r[0]]))},i:P,o:P,d(r){r&&b(t)}}}function Sw(i,t,n){return i.$$set=e=>{n(0,t=kt(kt({},t),le(e)))},[t=le(t)]}class Tw extends ut{constructor(t){super(),dt(this,t,Sw,kw,ct,{})}}function Ew(i){let t,n;const e=i[1].default,o=Yt(e,i,i[0],null);return{c(){t=L("span"),o&&o.c(),A(t,"class","c-input-action-bar-command svelte-7hv65t")},m(r,s){x(r,t,s),o&&o.m(t,null),n=!0},p(r,[s]){o&&o.p&&(!n||1&s)&&Kt(o,e,r,r[0],n?Jt(e,r[0],s,null):Xt(r[0]),null)},i(r){n||(d(o,r),n=!0)},o(r){$(o,r),n=!1},d(r){r&&b(t),o&&o.d(r)}}}function Iw(i,t,n){let{$$slots:e={},$$scope:o}=t;return i.$$set=r=>{"$$scope"in r&&n(0,o=r.$$scope)},[o,e]}class Yi extends ut{constructor(t){super(),dt(this,t,Iw,Ew,ct,{})}}function Vc(i,t,n){const e=i.slice();return e[21]=t[n],e}function Lw(i){let t,n;return t=new Tw({}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function Rw(i){let t,n;return t=new fe({props:{size:1,variant:"ghost-block",color:"neutral",$$slots:{default:[Lw]},$$scope:{ctx:i}}}),t.$on("click",i[2]),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};16777216&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function Dw(i){let t,n;return t=new Yi({props:{$$slots:{default:[Rw]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};16777216&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function Gc(i){let t,n;function e(){return i[15](i[21])}return t=new Xf({props:{item:i[21],onSelect:e}}),{c(){v(t.$$.fragment)},m(o,r){w(t,o,r),n=!0},p(o,r){i=o;const s={};32&r&&(s.item=i[21]),32&r&&(s.onSelect=e),t.$set(s)},i(o){n||(d(t.$$.fragment,o),n=!0)},o(o){$(t.$$.fragment,o),n=!1},d(o){y(t,o)}}}function Yc(i){let t,n;return t=new wt.Label({props:{$$slots:{default:[Nw]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function Nw(i){let t;return{c(){t=G("No results found")},m(n,e){x(n,t,e)},d(n){n&&b(t)}}}function Pw(i){let t,n,e,o,r,s,c,a,l=se(i[5]),u=[];for(let M=0;M<l.length;M+=1)u[M]=Gc(Vc(i,l,M));const f=M=>$(u[M],1,1,()=>{u[M]=null});let m=i[6].length>0&&i[5].length===0&&Yc(i);function p(M){i[16](M)}o=new wt.Separator({});let _={placeholder:"Focus context"};return i[6]!==void 0&&(_.value=i[6]),s=new wt.TextFieldItem({props:_}),te.push(()=>Te(s,"value",p)),{c(){t=L("div");for(let M=0;M<u.length;M+=1)u[M].c();n=U(),m&&m.c(),e=U(),v(o.$$.fragment),r=U(),v(s.$$.fragment),A(t,"class","c-context-menu__items svelte-j63we7")},m(M,C){x(M,t,C);for(let T=0;T<u.length;T+=1)u[T]&&u[T].m(t,null);x(M,n,C),m&&m.m(M,C),x(M,e,C),w(o,M,C),x(M,r,C),w(s,M,C),a=!0},p(M,C){if(800&C){let E;for(l=se(M[5]),E=0;E<l.length;E+=1){const R=Vc(M,l,E);u[E]?(u[E].p(R,C),d(u[E],1)):(u[E]=Gc(R),u[E].c(),d(u[E],1),u[E].m(t,null))}for(j(),E=l.length;E<u.length;E+=1)f(E);q()}M[6].length>0&&M[5].length===0?m?96&C&&d(m,1):(m=Yc(M),m.c(),d(m,1),m.m(e.parentNode,e)):m&&(j(),$(m,1,1,()=>{m=null}),q());const T={};!c&&64&C&&(c=!0,T.value=M[6],Re(()=>c=!1)),s.$set(T)},i(M){if(!a){for(let C=0;C<l.length;C+=1)d(u[C]);d(m),d(o.$$.fragment,M),d(s.$$.fragment,M),a=!0}},o(M){u=u.filter(Boolean);for(let C=0;C<u.length;C+=1)$(u[C]);$(m),$(o.$$.fragment,M),$(s.$$.fragment,M),a=!1},d(M){M&&(b(t),b(n),b(e),b(r)),pn(u,M),m&&m.d(M),y(o,M),y(s,M)}}}function Fw(i){let t,n,e,o;return t=new wt.Trigger({props:{$$slots:{default:[Dw]},$$scope:{ctx:i}}}),e=new wt.Content({props:{size:1,side:"top",align:"start",onClickOutside:i[1],onEscapeKeyDown:i[1],onRequestClose:i[1],$$slots:{default:[Pw]},$$scope:{ctx:i}}}),e.$on("keydown",i[7]),{c(){v(t.$$.fragment),n=U(),v(e.$$.fragment)},m(r,s){w(t,r,s),x(r,n,s),w(e,r,s),o=!0},p(r,s){const c={};16777216&s&&(c.$$scope={dirty:s,ctx:r}),t.$set(c);const a={};16777312&s&&(a.$$scope={dirty:s,ctx:r}),e.$set(a)},i(r){o||(d(t.$$.fragment,r),d(e.$$.fragment,r),o=!0)},o(r){$(t.$$.fragment,r),$(e.$$.fragment,r),o=!1},d(r){r&&b(n),y(t,r),y(e,r)}}}function Ow(i){let t,n,e={open:i[4],onOpenChange:i[17],nested:!1,$$slots:{default:[Fw]},$$scope:{ctx:i}};return t=new wt.Root({props:e}),i[18](t),{c(){v(t.$$.fragment)},m(o,r){w(t,o,r),n=!0},p(o,[r]){const s={};16&r&&(s.open=o[4]),1&r&&(s.onOpenChange=o[17]),16777312&r&&(s.$$scope={dirty:r,ctx:o}),t.$set(s)},i(o){n||(d(t.$$.fragment,o),n=!0)},o(o){$(t.$$.fragment,o),n=!1},d(o){i[18](null),y(t,o)}}}function zw(i,t,n){let e,o,r,s,{onCloseDropdown:c=()=>{}}=t,{onInsertMentionable:a}=t;const l=St("chatModel");if(!l)throw new Error("ChatModel not found in context");const u=()=>{s==null||s.focusIdx(-1)},f=()=>{s==null||s.focusIdx(0)},m=new Ri(l,C=>!!a&&a(C)),{displayItems:p,active:_,userQuery:M}=m;return Et(i,p,C=>n(5,o=C)),Et(i,_,C=>n(4,e=C)),Et(i,M,C=>n(6,r=C)),jr(m.dispose),i.$$set=C=>{"onCloseDropdown"in C&&n(0,c=C.onCloseDropdown),"onInsertMentionable"in C&&n(13,a=C.onInsertMentionable)},[c,async()=>{m.closeDropdown()},async()=>{m.toggleDropdown()&&(await Fo(),u())},s,e,o,r,async C=>{switch(C.key){case"ArrowLeft":C.preventDefault(),m.popBreadcrumb(),await Fo(),s==null||s.focusIdx(0);break;case"ArrowRight":case"ArrowDown":case"ArrowUp":case"Enter":break;default:C.defaultPrevented||u()}},f,m,p,_,M,a,async()=>{m.openDropdown(),await Fo(),u()},async C=>{m.selectMentionable(C),await Fo(),f()},function(C){r=C,M.set(r)},C=>{C||c()},function(C){te[C?"unshift":"push"](()=>{s=C,n(3,s)})}]}function Bw(i){let t,n,e=[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 320 512"},i[0]],o={};for(let r=0;r<e.length;r+=1)o=kt(o,e[r]);return{c(){t=ie("svg"),n=new rn(!0),this.h()},l(r){t=sn(r,"svg",{xmlns:!0,"data-ds-icon":!0,viewBox:!0});var s=an(t);n=cn(s,!0),s.forEach(b),this.h()},h(){n.a=null,$e(t,o)},m(r,s){ln(r,t,s),n.m('<!--! Font Awesome Pro 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2024 Fonticons, Inc.--><path d="M308.1 3.3c11.4 6.7 15.3 21.4 8.6 32.8l-272 464c-6.7 11.4-21.4 15.3-32.8 8.6s-15.3-21.4-8.6-32.8l272-464C282 .4 296.7-3.4 308.1 3.3"/>',t)},p(r,[s]){$e(t,o=Se(e,[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 320 512"},1&s&&r[0]]))},i:P,o:P,d(r){r&&b(t)}}}function Uw(i,t,n){return i.$$set=e=>{n(0,t=kt(kt({},t),le(e)))},[t=le(t)]}class Hw extends ut{constructor(t){super(),dt(this,t,Uw,Bw,ct,{})}}function Kc(i,t,n){const e=i.slice();return e[17]=t[n],e}function jw(i){let t,n;return t=new Hw({}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function qw(i){let t,n;return t=new fe({props:{size:1,variant:"ghost-block",color:"neutral",$$slots:{default:[jw]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};1048576&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function Ww(i){let t,n;return t=new Yi({props:{$$slots:{default:[qw]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};1048576&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function Vw(i){let t,n,e,o=i[17].label+"";return{c(){t=G("/"),n=G(o),e=U()},m(r,s){x(r,t,s),x(r,n,s),x(r,e,s)},p(r,s){4&s&&o!==(o=r[17].label+"")&&_t(n,o)},d(r){r&&(b(t),b(n),b(e))}}}function Xc(i){let t,n;function e(){return i[10](i[17])}return t=new wt.Item({props:{onSelect:e,$$slots:{default:[Vw]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(o,r){w(t,o,r),n=!0},p(o,r){i=o;const s={};4&r&&(s.onSelect=e),1048580&r&&(s.$$scope={dirty:r,ctx:i}),t.$set(s)},i(o){n||(d(t.$$.fragment,o),n=!0)},o(o){$(t.$$.fragment,o),n=!1},d(o){y(t,o)}}}function Gw(i){let t,n,e,o,r,s,c,a=se(i[2]),l=[];for(let p=0;p<a.length;p+=1)l[p]=Xc(Kc(i,a,p));const u=p=>$(l[p],1,1,()=>{l[p]=null});function f(p){i[11](p)}e=new wt.Separator({});let m={placeholder:"Run an action"};return i[0]!==void 0&&(m.value=i[0]),r=new wt.TextFieldItem({props:m}),te.push(()=>Te(r,"value",f)),{c(){t=L("div");for(let p=0;p<l.length;p+=1)l[p].c();n=U(),v(e.$$.fragment),o=U(),v(r.$$.fragment),A(t,"class","c-actions-menu__items svelte-1n1budr")},m(p,_){x(p,t,_);for(let M=0;M<l.length;M+=1)l[M]&&l[M].m(t,null);x(p,n,_),w(e,p,_),x(p,o,_),w(r,p,_),c=!0},p(p,_){if(132&_){let C;for(a=se(p[2]),C=0;C<a.length;C+=1){const T=Kc(p,a,C);l[C]?(l[C].p(T,_),d(l[C],1)):(l[C]=Xc(T),l[C].c(),d(l[C],1),l[C].m(t,null))}for(j(),C=a.length;C<l.length;C+=1)u(C);q()}const M={};!s&&1&_&&(s=!0,M.value=p[0],Re(()=>s=!1)),r.$set(M)},i(p){if(!c){for(let _=0;_<a.length;_+=1)d(l[_]);d(e.$$.fragment,p),d(r.$$.fragment,p),c=!0}},o(p){l=l.filter(Boolean);for(let _=0;_<l.length;_+=1)$(l[_]);$(e.$$.fragment,p),$(r.$$.fragment,p),c=!1},d(p){p&&(b(t),b(n),b(o)),pn(l,p),y(e,p),y(r,p)}}}function Yw(i){let t,n,e,o;return t=new wt.Trigger({props:{$$slots:{default:[Ww]},$$scope:{ctx:i}}}),e=new wt.Content({props:{size:1,side:"top",align:"start",$$slots:{default:[Gw]},$$scope:{ctx:i}}}),e.$on("keydown",i[6]),{c(){v(t.$$.fragment),n=U(),v(e.$$.fragment)},m(r,s){w(t,r,s),x(r,n,s),w(e,r,s),o=!0},p(r,s){const c={};1048576&s&&(c.$$scope={dirty:s,ctx:r}),t.$set(c);const a={};1048581&s&&(a.$$scope={dirty:s,ctx:r}),e.$set(a)},i(r){o||(d(t.$$.fragment,r),d(e.$$.fragment,r),o=!0)},o(r){$(t.$$.fragment,r),$(e.$$.fragment,r),o=!1},d(r){r&&b(n),y(t,r),y(e,r)}}}function Kw(i){let t,n,e={onOpenChange:i[5],nested:!1,$$slots:{default:[Yw]},$$scope:{ctx:i}};return t=new wt.Root({props:e}),i[12](t),{c(){v(t.$$.fragment)},m(o,r){w(t,o,r),n=!0},p(o,[r]){const s={};1048581&r&&(s.$$scope={dirty:r,ctx:o}),t.$set(s)},i(o){n||(d(t.$$.fragment,o),n=!0)},o(o){$(t.$$.fragment,o),n=!1},d(o){i[12](null),y(t,o)}}}function Xw(i,t,n){let e,o,r,s,{onCloseDropdown:c=()=>{}}=t;const a=St("chatModel");if(Et(i,a,_=>n(13,r=_)),!a)throw new Error("ChatModel not found in context");const l=St("slashCommandModel"),u=r.flags;Et(i,u,_=>n(9,o=_));function f(){s==null||s.focusIdx(-1)}let m="";function p(_){l.setActiveCommand(_.id),s==null||s.requestClose()}return i.$$set=_=>{"onCloseDropdown"in _&&n(8,c=_.onCloseDropdown)},i.$$.update=()=>{513&i.$$.dirty&&n(2,e=function(_,M){let C=Uf();return M||(C=C.filter(T=>T.id!=="generate-commit-message")),_===void 0?C:C.filter(T=>T.label.toLowerCase().includes(_.toLowerCase()))}(m,o.enableGenerateCommitMessage))},[m,s,e,a,u,async function(_){_?(await Fo(),f()):(c(),n(0,m=""))},async _=>{switch(_.key){case"ArrowLeft":case"ArrowRight":case"ArrowDown":case"ArrowUp":case"Enter":break;default:_.defaultPrevented||f()}},p,c,o,_=>p(_),function(_){m=_,n(0,m)},function(_){te[_?"unshift":"push"](()=>{s=_,n(1,s)})}]}function Jw(i){let t,n,e=[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 448 512"},i[0]],o={};for(let r=0;r<e.length;r+=1)o=kt(o,e[r]);return{c(){t=ie("svg"),n=new rn(!0),this.h()},l(r){t=sn(r,"svg",{xmlns:!0,"data-ds-icon":!0,viewBox:!0});var s=an(t);n=cn(s,!0),s.forEach(b),this.h()},h(){n.a=null,$e(t,o)},m(r,s){ln(r,t,s),n.m('<!--! Font Awesome Pro 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2024 Fonticons, Inc.--><path d="M375 73c-26-26-68.1-26-94.1 0L89 265c-43.7 43.6-43.7 114.4 0 158s114.4 43.6 158.1 0L399 271c9.4-9.4 24.6-9.4 33.9 0s9.4 24.6 0 33.9L281 457c-62.4 62.4-163.5 62.4-225.9 0S-7.4 293.4 55 231L247 39c44.7-44.7 117.3-44.7 162 0s44.7 117.2 0 161.9L225.2 384.7c-31.6 31.6-83.6 28.7-111.5-6.2-23.8-29.8-21.5-72.8 5.5-99.8L271 127c9.4-9.4 24.6-9.4 33.9 0s9.4 24.6 0 33.9L153.2 312.7c-9.7 9.7-10.6 25.1-2 35.8 10 12.5 28.7 13.6 40 2.2L375 167c26-26 26-68.1 0-94.1z"/>',t)},p(r,[s]){$e(t,o=Se(e,[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 448 512"},1&s&&r[0]]))},i:P,o:P,d(r){r&&b(t)}}}function Zw(i,t,n){return i.$$set=e=>{n(0,t=kt(kt({},t),le(e)))},[t=le(t)]}class Qw extends ut{constructor(t){super(),dt(this,t,Zw,Jw,ct,{})}}function t3(i){let t,n,e,o,r,s,c;return n=new Qw({}),{c(){t=L("label"),v(n.$$.fragment),e=U(),o=L("input"),A(t,"for",i[3]),A(t,"class","c-input-action-bar__label svelte-6rrv9"),A(o,"type","file"),o.hidden=!0,A(o,"id",i[3]),A(o,"accept",i[0])},m(a,l){x(a,t,l),w(n,t,null),x(a,e,l),x(a,o,l),r=!0,s||(c=[Lt(o,"click",i3),Lt(o,"input",i[4])],s=!0)},p(a,l){(!r||1&l)&&A(o,"accept",a[0])},i(a){r||(d(n.$$.fragment,a),r=!0)},o(a){$(n.$$.fragment,a),r=!1},d(a){a&&(b(t),b(e),b(o)),y(n),s=!1,Qe(c)}}}function e3(i){let t,n;return t=new fe({props:{size:1,variant:"ghost-block",color:"neutral",disabled:i[1],class:"c-input-action-bar__add-file-btn",$$slots:{default:[t3]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};2&o&&(r.disabled=e[1]),133&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function n3(i){let t,n,e,o,r;return e=new Ur({props:{icons:["shift"]}}),{c(){t=L("div"),n=G("Hold "),v(e.$$.fragment),o=G(" while dragging to attach"),A(t,"slot","content"),A(t,"class","c-add-file-button-tooltip svelte-6rrv9")},m(s,c){x(s,t,c),O(t,n),w(e,t,null),O(t,o),r=!0},p:P,i(s){r||(d(e.$$.fragment,s),r=!0)},o(s){$(e.$$.fragment,s),r=!1},d(s){s&&b(t),y(e)}}}function o3(i){let t,n;return t=new Pt({props:{triggerOn:[Zt.Hover],delayDurationMs:300,$$slots:{content:[n3],default:[e3]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};135&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function r3(i){let t,n;return t=new Yi({props:{$$slots:{default:[o3]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,[o]){const r={};135&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}const i3=function(){this.value=null};function s3(i,t,n){let{accept:e="*"}=t,{disabled:o=!1}=t,{onAddFiles:r=a}=t;const s=`file-${Date.now()}-${Math.floor(1e4*Math.random())}`,c=Qp();function a(l){var u,f,m;(m=(f=(u=c.commandManager)==null?void 0:u.chain())==null?void 0:f.insertFilesIntoEditor)==null||m.call(f,l)}return i.$$set=l=>{"accept"in l&&n(0,e=l.accept),"disabled"in l&&n(1,o=l.disabled),"onAddFiles"in l&&n(2,r=l.onAddFiles)},[e,o,r,s,function(l){var u;r([...((u=l.currentTarget)==null?void 0:u.files)??[]])}]}function a3(i){let t,n;return{c(){t=ie("svg"),n=ie("path"),A(n,"d","M2 3C2 2.44772 2.44772 2 3 2H12C12.5523 2 13 2.44772 13 3V12C13 12.5523 12.5523 13 12 13H3C2.44772 13 2 12.5523 2 12V3Z"),A(n,"fill","currentColor"),A(n,"fill-rule","evenodd"),A(n,"clip-rule","evenodd"),A(t,"width","15"),A(t,"height","15"),A(t,"viewBox","0 0 15 15"),A(t,"fill","none"),A(t,"xmlns","http://www.w3.org/2000/svg")},m(e,o){x(e,t,o),O(t,n)},p:P,i:P,o:P,d(e){e&&b(t)}}}class c3 extends ut{constructor(t){super(),dt(this,t,null,a3,ct,{})}}function l3(i){let t,n;return t=new c3({}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function u3(i){let t,n,e;return n=new he({props:{size:1,variant:"soft",color:"neutral",$$slots:{default:[l3]},$$scope:{ctx:i}}}),n.$on("click",i[0]),{c(){t=L("div"),v(n.$$.fragment),A(t,"class","c-cancel-button svelte-1b7ib22")},m(o,r){x(o,t,r),w(n,t,null),e=!0},p(o,[r]){const s={};4&r&&(s.$$scope={dirty:r,ctx:o}),n.$set(s)},i(o){e||(d(n.$$.fragment,o),e=!0)},o(o){$(n.$$.fragment,o),e=!1},d(o){o&&b(t),y(n)}}}function d3(i,t,n){let{cancelAction:e}=t;return i.$$set=o=>{"cancelAction"in o&&n(1,e=o.cancelAction)},[function(o){o.stopPropagation(),e()},e]}function $3(i){let t,n,e=[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 512 512"},i[0]],o={};for(let r=0;r<e.length;r+=1)o=kt(o,e[r]);return{c(){t=ie("svg"),n=new rn(!0),this.h()},l(r){t=sn(r,"svg",{xmlns:!0,"data-ds-icon":!0,viewBox:!0});var s=an(t);n=cn(s,!0),s.forEach(b),this.h()},h(){n.a=null,$e(t,o)},m(r,s){ln(r,t,s),n.m('<!--! Font Awesome Pro 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2024 Fonticons, Inc.--><path d="M371.2 122.9C340.3 96.2 300 80 256 80c-97.2 0-176 78.8-176 176s78.8 176 176 176c39.7 0 76.2-13.1 105.6-35.2 10.6-8 25.6-5.8 33.6 4.8s5.8 25.6-4.8 33.6C353 463.3 306.4 480 256 480 132.3 480 32 379.7 32 256S132.3 32 256 32c57.3 0 109.6 21.5 149.2 56.9l30.5-30.5c6.6-6.6 15.6-10.3 25-10.3C480.2 48 496 63.8 496 83.3V200c0 13.3-10.7 24-24 24H355.3c-19.5 0-35.3-15.8-35.3-35.3 0-9.4 3.7-18.3 10.3-25l40.8-40.8zm76.8-9L385.9 176H448z"/>',t)},p(r,[s]){$e(t,o=Se(e,[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 512 512"},1&s&&r[0]]))},i:P,o:P,d(r){r&&b(t)}}}function f3(i,t,n){return i.$$set=e=>{n(0,t=kt(kt({},t),le(e)))},[t=le(t)]}class m3 extends ut{constructor(t){super(),dt(this,t,f3,$3,ct,{})}}function p3(i){let t;return{c(){t=G("Resend")},m(n,e){x(n,t,e)},d(n){n&&b(t)}}}function g3(i){let t,n;return t=new Gt({props:{size:1,$$slots:{default:[p3]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};2&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function h3(i){let t,n;return t=new m3({props:{slot:"iconLeft"}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p:P,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function v3(i){let t,n,e;return n=new he({props:{size:1,variant:"soft",color:"neutral",$$slots:{iconLeft:[h3],default:[g3]},$$scope:{ctx:i}}}),n.$on("click",function(){Ne(i[0])&&i[0].apply(this,arguments)}),n.$on("keyup",function(){Ne(i[0])&&i[0].apply(this,arguments)}),{c(){t=L("div"),v(n.$$.fragment),A(t,"class","c-resend-button svelte-1a3z7my")},m(o,r){x(o,t,r),w(n,t,null),e=!0},p(o,[r]){i=o;const s={};2&r&&(s.$$scope={dirty:r,ctx:i}),n.$set(s)},i(o){e||(d(n.$$.fragment,o),e=!0)},o(o){$(n.$$.fragment,o),e=!1},d(o){o&&b(t),y(n)}}}function w3(i,t,n){let{resendAction:e}=t;return i.$$set=o=>{"resendAction"in o&&n(0,e=o.resendAction)},[e]}function y3(i){let t,n,e=[{width:"15"},{height:"15"},{viewBox:"0 0 512 512"},{fill:"none"},{xmlns:"http://www.w3.org/2000/svg"},i[0]],o={};for(let r=0;r<e.length;r+=1)o=kt(o,e[r]);return{c(){t=ie("svg"),n=ie("path"),A(n,"d","M327.5 85.2c-4.5 1.7-7.5 6-7.5 10.8s3 9.1 7.5 10.8L384 128l21.2 56.5c1.7 4.5 6 7.5 10.8 7.5s9.1-3 10.8-7.5L448 128l56.5-21.2c4.5-1.7 7.5-6 7.5-10.8s-3-9.1-7.5-10.8L448 64 426.8 7.5C425.1 3 420.8 0 416 0s-9.1 3-10.8 7.5L384 64 327.5 85.2zM9.3 240C3.6 242.6 0 248.3 0 254.6s3.6 11.9 9.3 14.5L26.3 277l8.1 3.7 .6 .3 88.3 40.8L164.1 410l.3 .6 3.7 8.1 7.9 17.1c2.6 5.7 8.3 9.3 14.5 9.3s11.9-3.6 14.5-9.3l7.9-17.1 3.7-8.1 .3-.6 40.8-88.3L346 281l.6-.3 8.1-3.7 17.1-7.9c5.7-2.6 9.3-8.3 9.3-14.5s-3.6-11.9-9.3-14.5l-17.1-7.9-8.1-3.7-.6-.3-88.3-40.8L217 99.1l-.3-.6L213 90.3l-7.9-17.1c-2.6-5.7-8.3-9.3-14.5-9.3s-11.9 3.6-14.5 9.3l-7.9 17.1-3.7 8.1-.3 .6-40.8 88.3L35.1 228.1l-.6 .3-8.1 3.7L9.3 240zm83 14.5l51.2-23.6c10.4-4.8 18.7-13.1 23.5-23.5l23.6-51.2 23.6 51.2c4.8 10.4 13.1 18.7 23.5 23.5l51.2 23.6-51.2 23.6c-10.4 4.8-18.7 13.1-23.5 23.5l-23.6 51.2-23.6-51.2c-4.8-10.4-13.1-18.7-23.5-23.5L92.3 254.6zM384 384l-56.5 21.2c-4.5 1.7-7.5 6-7.5 10.8s3 9.1 7.5 10.8L384 448l21.2 56.5c1.7 4.5 6 7.5 10.8 7.5s9.1-3 10.8-7.5L448 448l56.5-21.2c4.5-1.7 7.5-6 7.5-10.8s-3-9.1-7.5-10.8L448 384l-21.2-56.5c-1.7-4.5-6-7.5-10.8-7.5s-9.1 3-10.8 7.5L384 384z"),A(n,"fill","currentColor"),$e(t,o)},m(r,s){x(r,t,s),O(t,n)},p(r,[s]){$e(t,o=Se(e,[{width:"15"},{height:"15"},{viewBox:"0 0 512 512"},{fill:"none"},{xmlns:"http://www.w3.org/2000/svg"},1&s&&r[0]]))},i:P,o:P,d(r){r&&b(t)}}}function b3(i,t,n){return i.$$set=e=>{n(0,t=kt(kt({},t),le(e)))},[t=le(t)]}class x3 extends ut{constructor(t){super(),dt(this,t,b3,y3,ct,{})}}function Jc(i){let t,n,e;return n=new Pt({props:{content:i[0]&&i[1]?i[1]:"Rewrite prompt",$$slots:{default:[M3]},$$scope:{ctx:i}}}),{c(){t=L("div"),v(n.$$.fragment),A(t,"class","c-rewrite-prompt-button svelte-1k3jvo8")},m(o,r){x(o,t,r),w(n,t,null),e=!0},p(o,r){const s={};3&r&&(s.content=o[0]&&o[1]?o[1]:"Rewrite prompt"),261&r&&(s.$$scope={dirty:r,ctx:o}),n.$set(s)},i(o){e||(d(n.$$.fragment,o),e=!0)},o(o){$(n.$$.fragment,o),e=!1},d(o){o&&b(t),y(n)}}}function _3(i){let t,n;return t=new x3({}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function C3(i){let t,n;return t=new go({props:{size:1,useCurrentColor:!0}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function A3(i){let t,n,e,o;const r=[C3,_3],s=[];function c(a,l){return a[2]?0:1}return t=c(i),n=s[t]=r[t](i),{c(){n.c(),e=mt()},m(a,l){s[t].m(a,l),x(a,e,l),o=!0},p(a,l){let u=t;t=c(a),t!==u&&(j(),$(s[u],1,1,()=>{s[u]=null}),q(),n=s[t],n||(n=s[t]=r[t](a),n.c()),d(n,1),n.m(e.parentNode,e))},i(a){o||(d(n),o=!0)},o(a){$(n),o=!1},d(a){a&&b(e),s[t].d(a)}}}function M3(i){let t,n;return t=new fe({props:{disabled:i[0],size:1,variant:"ghost-block",color:"neutral",$$slots:{default:[A3]},$$scope:{ctx:i}}}),t.$on("click",i[6]),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};1&o&&(r.disabled=e[0]),260&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function k3(i){let t,n,e=i[3].flags.enablePromptEnhancer&&Jc(i);return{c(){e&&e.c(),t=mt()},m(o,r){e&&e.m(o,r),x(o,t,r),n=!0},p(o,[r]){o[3].flags.enablePromptEnhancer?e?(e.p(o,r),8&r&&d(e,1)):(e=Jc(o),e.c(),d(e,1),e.m(t.parentNode,t)):e&&(j(),$(e,1,1,()=>{e=null}),q())},i(o){n||(d(e),n=!0)},o(o){$(e),n=!1},d(o){o&&b(t),e&&e.d(o)}}}function S3(i,t,n){let e,o,{onRewrite:r}=t,{isDisabled:s=!1}=t,{disabledReason:c}=t;const a=St("chatModel");if(Et(i,a,u=>n(3,o=u)),!a)throw new Error("ChatModel not found in context");const l=Le(!1);return Et(i,l,u=>n(2,e=u)),i.$$set=u=>{"onRewrite"in u&&n(7,r=u.onRewrite),"isDisabled"in u&&n(0,s=u.isDisabled),"disabledReason"in u&&n(1,c=u.disabledReason)},[s,c,e,o,a,l,function(){xi(l,e=!0,e);try{Promise.resolve(r()).finally(()=>{xi(l,e=!1,e)})}catch{xi(l,e=!1,e)}},r]}function T3(i){let t,n,e=[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 448 512"},i[0]],o={};for(let r=0;r<e.length;r+=1)o=kt(o,e[r]);return{c(){t=ie("svg"),n=new rn(!0),this.h()},l(r){t=sn(r,"svg",{xmlns:!0,"data-ds-icon":!0,viewBox:!0});var s=an(t);n=cn(s,!0),s.forEach(b),this.h()},h(){n.a=null,$e(t,o)},m(r,s){ln(r,t,s),n.m('<!--!Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2025 Fonticons, Inc.--><path d="M224 0c-17.7 0-32 14.3-32 32v19.2C119 66 64 130.6 64 208v18.8c0 47-17.3 92.4-48.5 127.6l-7.4 8.3c-8.4 9.4-10.4 22.9-5.3 34.4S19.4 416 32 416h384c12.6 0 24-7.4 29.2-18.9s3.1-25-5.3-34.4l-7.4-8.3c-31.2-35.2-48.5-80.5-48.5-127.6V208c0-77.4-55-142-128-156.8V32c0-17.7-14.3-32-32-32m45.3 493.3c12-12 18.7-28.3 18.7-45.3H160c0 17 6.7 33.3 18.7 45.3S207 512 224 512s33.3-6.7 45.3-18.7"/>',t)},p(r,[s]){$e(t,o=Se(e,[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 448 512"},1&s&&r[0]]))},i:P,o:P,d(r){r&&b(t)}}}function E3(i,t,n){return i.$$set=e=>{n(0,t=kt(kt({},t),le(e)))},[t=le(t)]}class I3 extends ut{constructor(t){super(),dt(this,t,E3,T3,ct,{})}}function L3(i){let t,n,e=[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 640 512"},i[0]],o={};for(let r=0;r<e.length;r+=1)o=kt(o,e[r]);return{c(){t=ie("svg"),n=new rn(!0),this.h()},l(r){t=sn(r,"svg",{xmlns:!0,"data-ds-icon":!0,viewBox:!0});var s=an(t);n=cn(s,!0),s.forEach(b),this.h()},h(){n.a=null,$e(t,o)},m(r,s){ln(r,t,s),n.m('<!--!Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2025 Fonticons, Inc.--><path d="M38.8 5.1C28.4-3.1 13.3-1.2 5.1 9.2s-6.3 25.5 4.1 33.7l592 464c10.4 8.2 25.5 6.3 33.7-4.1s6.3-25.5-4.1-33.7l-90.2-70.7c.2-.4.4-.9.6-1.3 5.2-11.5 3.1-25-5.3-34.4l-7.4-8.3c-31.2-35.2-48.5-80.5-48.5-127.6V208c0-77.4-55-142-128-156.8V32c0-17.7-14.3-32-32-32s-32 14.3-32 32v19.2c-42.6 8.6-79 34.2-102 69.3zM406.2 416 160 222.1v4.8c0 47-17.3 92.4-48.5 127.6l-7.4 8.3c-8.4 9.4-10.4 22.9-5.3 34.4S115.4 416 128 416zm-40.9 77.3c12-12 18.7-28.3 18.7-45.3H256c0 17 6.7 33.3 18.7 45.3S303 512 320 512s33.3-6.7 45.3-18.7"/>',t)},p(r,[s]){$e(t,o=Se(e,[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 640 512"},1&s&&r[0]]))},i:P,o:P,d(r){r&&b(t)}}}function R3(i,t,n){return i.$$set=e=>{n(0,t=kt(kt({},t),le(e)))},[t=le(t)]}class D3 extends ut{constructor(t){super(),dt(this,t,R3,L3,ct,{})}}function N3(i){let t,n;return t=new D3({}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function P3(i){let t,n;return t=new I3({}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function Zc(i){let t;return{c(){t=G(i[2])},m(n,e){x(n,t,e)},p(n,e){4&e&&_t(t,n[2])},d(n){n&&b(t)}}}function F3(i){let t,n,e,o,r;const s=[P3,N3],c=[];function a(u,f){return u[0]?0:1}t=a(i),n=c[t]=s[t](i);let l=i[1]&&i[2]&&Zc(i);return{c(){n.c(),e=U(),l&&l.c(),o=mt()},m(u,f){c[t].m(u,f),x(u,e,f),l&&l.m(u,f),x(u,o,f),r=!0},p(u,f){let m=t;t=a(u),t!==m&&(j(),$(c[m],1,1,()=>{c[m]=null}),q(),n=c[t],n||(n=c[t]=s[t](u),n.c()),d(n,1),n.m(e.parentNode,e)),u[1]&&u[2]?l?l.p(u,f):(l=Zc(u),l.c(),l.m(o.parentNode,o)):l&&(l.d(1),l=null)},i(u){r||(d(n),r=!0)},o(u){$(n),r=!1},d(u){u&&(b(e),b(o)),c[t].d(u),l&&l.d(u)}}}function O3(i){let t,n;return t=new fe({props:{color:i[1]?i[3]:"neutral",size:1,variant:i[1]?"soft":"ghost-block",radius:"full",$$slots:{default:[F3]},$$scope:{ctx:i}}}),t.$on("click",i[5]),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};10&o&&(r.color=e[1]?e[3]:"neutral"),2&o&&(r.variant=e[1]?"soft":"ghost-block"),135&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function z3(i){let t,n,e,o;return n=new Pt({props:{content:i[4],hasPointerEvents:!1,triggerOn:[Zt.Hover],$$slots:{default:[O3]},$$scope:{ctx:i}}}),{c(){t=L("div"),v(n.$$.fragment),A(t,"class",e="c-notify-button "+(i[0]?"c-notify-button--enabled":"")+" svelte-1yqfwnl")},m(r,s){x(r,t,s),w(n,t,null),o=!0},p(r,[s]){const c={};16&s&&(c.content=r[4]),143&s&&(c.$$scope={dirty:s,ctx:r}),n.$set(c),(!o||1&s&&e!==(e="c-notify-button "+(r[0]?"c-notify-button--enabled":"")+" svelte-1yqfwnl"))&&A(t,"class",e)},i(r){o||(d(n.$$.fragment,r),o=!0)},o(r){$(n.$$.fragment,r),o=!1},d(r){r&&b(t),y(n)}}}function B3(i,t,n){let{enabled:e=!1}=t,{isUnread:o=!1}=t,{unreadCount:r=1}=t,{statusColor:s="neutral"}=t,{tooltipText:c=""}=t;const a=q$();return i.$$set=l=>{"enabled"in l&&n(0,e=l.enabled),"isUnread"in l&&n(1,o=l.isUnread),"unreadCount"in l&&n(2,r=l.unreadCount),"statusColor"in l&&n(3,s=l.statusColor),"tooltipText"in l&&n(4,c=l.tooltipText)},[e,o,r,s,c,function(){a("toggle")}]}class U3 extends ut{constructor(t){super(),dt(this,t,B3,z3,ct,{enabled:0,isUnread:1,unreadCount:2,statusColor:3,tooltipText:4})}}function H3(i){let t,n;return t=new U3({props:{enabled:i[0],isUnread:i[3],statusColor:i[1],tooltipText:i[2]}}),t.$on("toggle",i[5]),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,[o]){const r={};1&o&&(r.enabled=e[0]),8&o&&(r.isUnread=e[3]),2&o&&(r.statusColor=e[1]),4&o&&(r.tooltipText=e[2]),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function j3(i,t,n){let e,o,r,s,c,{agentId:a}=t,{status:l}=t,{workspaceStatus:u}=t,{hasUpdates:f=!1}=t;const m=St("remoteAgentsModel");let p;Et(i,m,M=>n(12,c=M));let _=!1;return i.$$set=M=>{"agentId"in M&&n(6,a=M.agentId),"status"in M&&n(7,l=M.status),"workspaceStatus"in M&&n(8,u=M.workspaceStatus),"hasUpdates"in M&&n(9,f=M.hasUpdates)},i.$$.update=()=>{384&i.$$.dirty&&(u===ff.workspaceRunning?n(1,p=a1(l)):n(1,p=c1(u))),640&i.$$.dirty&&n(3,e=(l===Ze.agentIdle||l===Ze.agentFailed)&&f),4160&i.$$.dirty&&n(10,o=a??c.currentAgentId),4096&i.$$.dirty&&n(11,r=c.newAgentDraft),7168&i.$$.dirty&&(o?n(0,_=c.notificationSettings[o]??!0):r&&n(0,_=r.enableNotification)),4161&i.$$.dirty&&n(2,s=_?"You'll be notified when the agent is ready for review. Click to turn off.":"Click to turn on notifications when the agent is ready for review. "+(a===c.currentAgentId?"You will not be notified while you're actively viewing this agent.":""))},[_,p,s,e,m,async function(){if(o)m.setNotificationEnabled(o,!_);else{const M=m.newAgentDraft;if(M){m.setNewAgentDraft({...M,enableNotification:!_});try{const C=_?gs.disableNotifications:gs.enableNotifications;await m.reportRemoteAgentSetupWindowEvent(C)}catch(C){console.error("Failed to report notification toggle event:",C)}}}},a,l,u,f,o,r,c]}class Jf extends ut{constructor(t){super(),dt(this,t,j3,H3,ct,{agentId:6,status:7,workspaceStatus:8,hasUpdates:9})}}const ho={Root:class extends ut{constructor(i){super(),dt(this,i,Mv,Av,ct,{})}},SendButton:class extends ut{constructor(i){super(),dt(this,i,ow,ew,ct,{primaryAction:0,isDisabled:1,disabledReason:13})}},ContextMenu:class extends ut{constructor(i){super(),dt(this,i,zw,Ow,ct,{onCloseDropdown:0,onInsertMentionable:13,closeDropdown:1,openDropdown:14,toggleDropdown:2})}get closeDropdown(){return this.$$.ctx[1]}get openDropdown(){return this.$$.ctx[14]}get toggleDropdown(){return this.$$.ctx[2]}},ActionsMenu:class extends ut{constructor(i){super(),dt(this,i,Xw,Kw,ct,{onCloseDropdown:8})}},AddFileButton:class extends ut{constructor(i){super(),dt(this,i,s3,r3,ct,{accept:0,disabled:1,onAddFiles:2})}},ResendButton:class extends ut{constructor(i){super(),dt(this,i,w3,v3,ct,{resendAction:0})}},CancelButton:class extends ut{constructor(i){super(),dt(this,i,d3,u3,ct,{cancelAction:1})}},RewritePromptButton:class extends ut{constructor(i){super(),dt(this,i,S3,k3,ct,{onRewrite:7,isDisabled:0,disabledReason:1})}},NotifyButton:Jf};function q3(i){let t,n,e=[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 512 512"},i[0]],o={};for(let r=0;r<e.length;r+=1)o=kt(o,e[r]);return{c(){t=ie("svg"),n=new rn(!0),this.h()},l(r){t=sn(r,"svg",{xmlns:!0,"data-ds-icon":!0,viewBox:!0});var s=an(t);n=cn(s,!0),s.forEach(b),this.h()},h(){n.a=null,$e(t,o)},m(r,s){ln(r,t,s),n.m('<!--! Font Awesome Pro 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2024 Fonticons, Inc.--><path d="M192 48c22.1 0 40 17.9 40 40v40h-19.3c-6.2-14.1-20.3-24-36.7-24-22.1 0-40 17.9-40 40s17.9 40 40 40c16.4 0 30.5-9.9 36.7-24H232v96h-40c-26.5 0-48 21.5-48 48v11.3c-14.1 6.2-24 20.3-24 36.7 0 22.1 17.9 40 40 40s40-17.9 40-40c0-16.4-9.9-30.5-24-36.7V304c0-8.8 7.2-16 16-16h40v132c0 24.3-19.7 44-44 44-17.8 0-33.2-10.6-40.1-25.9-3.8-8.4-12-13.9-21.2-14.1-25.9-.7-46.7-21.9-46.7-48 0-2.6.2-5.2.6-7.6 1.4-8.5-2-17.1-8.7-22.5C57.3 334.1 48 316.2 48 296c0-19.3 8.5-36.6 22.1-48.3 8-6.9 10.5-18.3 6.1-28-2.7-6-4.2-12.6-4.2-19.7 0-18.8 10.8-35.1 26.7-43 8.1-4 13.3-12.3 13.3-21.3.1-19.3 11.7-36 28.3-43.5 6.4-2.9 11.3-8.5 13.2-15.3C158.3 60.2 173.8 48 192 48m-4 464c26.9 0 51.2-11.6 68-30 16.8 18.5 41.1 30 68 30 32.2 0 60.5-16.5 76.9-41.5 45-8 79.1-47.3 79.1-94.5v-1.6c19.8-20.2 32-47.9 32-78.4 0-27.8-10.1-53.2-26.8-72.7 1.8-7.5 2.8-15.3 2.8-23.3 0-32.6-16.3-61.5-41.1-78.8-4.5-28.9-21.8-53.5-45.9-67.8C387.5 22 356.3 0 320 0c-25.2 0-48 10.6-64 27.6C240 10.6 217.2 0 192 0c-36.3 0-67.5 22-80.9 53.4-24.2 14.3-41.5 38.9-46 67.8C40.3 138.5 24 167.4 24 200c0 8 1 15.8 2.8 23.3C10.1 242.8 0 268.2 0 296c0 30.5 12.2 58.2 32 78.4v1.6c0 47.3 34.1 86.5 79.1 94.5 16.4 25 44.7 41.5 76.9 41.5m136-48c-24.3 0-44-19.7-44-44v-68h51.3c6.2 14.1 20.3 24 36.7 24 22.1 0 40-17.9 40-40s-17.9-40-40-40c-16.4 0-30.5 9.9-36.7 24H280V160h40c8.8 0 16 7.2 16 16v11.3c-14.1 6.2-24 20.3-24 36.7 0 22.1 17.9 40 40 40s40-17.9 40-40c0-16.4-9.9-30.5-24-36.7V176c0-26.5-21.5-48-48-48h-40V88c0-22.1 17.9-40 40-40 18.2 0 33.7 12.2 38.5 28.9 1.9 6.8 6.8 12.4 13.2 15.3 16.6 7.5 28.2 24.1 28.3 43.5.1 9.1 5.2 17.3 13.3 21.3 15.9 7.9 26.7 24.2 26.7 43 0 7.1-1.5 13.7-4.2 19.7-4.4 9.7-1.9 21 6.1 28 13.5 11.8 22.1 29 22.1 48.3 0 20.2-9.3 38.1-23.9 49.9-6.7 5.4-10 14-8.7 22.5.4 2.5.6 5 .6 7.6 0 26.1-20.8 47.3-46.7 48-9.2.3-17.4 5.7-21.2 14.1-6.9 15.3-22.3 25.9-40.1 25.9M176 128a16 16 0 1 1 0 32 16 16 0 1 1 0-32m-16 208a16 16 0 1 1 0 32 16 16 0 1 1 0-32m176-112a16 16 0 1 1 32 0 16 16 0 1 1-32 0m32 96a16 16 0 1 1 0 32 16 16 0 1 1 0-32"/>',t)},p(r,[s]){$e(t,o=Se(e,[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 512 512"},1&s&&r[0]]))},i:P,o:P,d(r){r&&b(t)}}}function W3(i,t,n){return i.$$set=e=>{n(0,t=kt(kt({},t),le(e)))},[t=le(t)]}class V3 extends ut{constructor(t){super(),dt(this,t,W3,q3,ct,{})}}function Qc(i,t,n){const e=i.slice();return e[10]=t[n],e}function G3(i){let t,n=i[1].name+"";return{c(){t=G(n)},m(e,o){x(e,t,o)},p(e,o){2&o&&n!==(n=e[1].name+"")&&_t(t,n)},d(e){e&&b(t)}}}function Y3(i){let t,n,e;return n=new Gt({props:{size:1,$$slots:{default:[G3]},$$scope:{ctx:i}}}),{c(){t=L("span"),v(n.$$.fragment),A(t,"class","c-model-picker__text-wrapper")},m(o,r){x(o,t,r),w(n,t,null),e=!0},p(o,r){const s={};8194&r&&(s.$$scope={dirty:r,ctx:o}),n.$set(s)},i(o){e||(d(n.$$.fragment,o),e=!0)},o(o){$(n.$$.fragment,o),e=!1},d(o){o&&b(t),y(n)}}}function K3(i){let t,n;return t=new V3({props:{slot:"iconLeft"}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p:P,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function X3(i){let t,n;return t=new he({props:{size:1,variant:"ghost-block",color:"neutral",$$slots:{iconLeft:[K3],default:[Y3]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};8194&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function J3(i){let t,n;return t=new Yi({props:{$$slots:{default:[X3]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};8194&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function Z3(i){let t,n;return t=new Pt({props:{content:`Model: ${i[1].name}`,triggerOn:[Zt.Hover],offset:[0,i4],$$slots:{default:[J3]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};2&o&&(r.content=`Model: ${e[1].name}`),8194&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function Q3(i){let t;return{c(){t=G("Internal Testing Only")},m(n,e){x(n,t,e)},d(n){n&&b(t)}}}function t4(i){let t,n=_i.name+"";return{c(){t=G(n)},m(e,o){x(e,t,o)},p:P,d(e){e&&b(t)}}}function tl(i){let t,n,e;return n=new To({}),{c(){t=L("span"),v(n.$$.fragment),A(t,"class","c-model-picker__check-icon svelte-hq3rg5")},m(o,r){x(o,t,r),w(n,t,null),e=!0},i(o){e||(d(n.$$.fragment,o),e=!0)},o(o){$(n.$$.fragment,o),e=!1},d(o){o&&b(t),y(n)}}}function e4(i){let t,n,e,o,r=i[10].id===i[1].id&&tl();return{c(){t=L("span"),t.textContent=`${i[10].name}`,n=U(),r&&r.c(),e=U(),A(t,"class","c-model-picker__item-text svelte-hq3rg5")},m(s,c){x(s,t,c),x(s,n,c),r&&r.m(s,c),x(s,e,c),o=!0},p(s,c){s[10].id===s[1].id?r?2&c&&d(r,1):(r=tl(),r.c(),d(r,1),r.m(e.parentNode,e)):r&&(j(),$(r,1,1,()=>{r=null}),q())},i(s){o||(d(r),o=!0)},o(s){$(r),o=!1},d(s){s&&(b(t),b(n),b(e)),r&&r.d(s)}}}function el(i){let t,n;return t=new wt.Item({props:{highlight:i[10].id===i[1].id,onSelect:function(){return i[8](i[10])},$$slots:{default:[e4]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){i=e;const r={};2&o&&(r.highlight=i[10].id===i[1].id),8194&o&&(r.$$scope={dirty:o,ctx:i}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function n4(i){let t,n,e,o,r,s,c,a;t=new wt.Label({props:{$$slots:{default:[Q3]},$$scope:{ctx:i}}}),e=new wt.Item({props:{onSelect:i[7],$$slots:{default:[t4]},$$scope:{ctx:i}}}),r=new wt.Separator({});let l=se(i[2].getModels().filter(nl)),u=[];for(let m=0;m<l.length;m+=1)u[m]=el(Qc(i,l,m));const f=m=>$(u[m],1,1,()=>{u[m]=null});return{c(){v(t.$$.fragment),n=U(),v(e.$$.fragment),o=U(),v(r.$$.fragment),s=U();for(let m=0;m<u.length;m+=1)u[m].c();c=mt()},m(m,p){w(t,m,p),x(m,n,p),w(e,m,p),x(m,o,p),w(r,m,p),x(m,s,p);for(let _=0;_<u.length;_+=1)u[_]&&u[_].m(m,p);x(m,c,p),a=!0},p(m,p){const _={};8192&p&&(_.$$scope={dirty:p,ctx:m}),t.$set(_);const M={};if(8192&p&&(M.$$scope={dirty:p,ctx:m}),e.$set(M),22&p){let C;for(l=se(m[2].getModels().filter(nl)),C=0;C<l.length;C+=1){const T=Qc(m,l,C);u[C]?(u[C].p(T,p),d(u[C],1)):(u[C]=el(T),u[C].c(),d(u[C],1),u[C].m(c.parentNode,c))}for(j(),C=l.length;C<u.length;C+=1)f(C);q()}},i(m){if(!a){d(t.$$.fragment,m),d(e.$$.fragment,m),d(r.$$.fragment,m);for(let p=0;p<l.length;p+=1)d(u[p]);a=!0}},o(m){$(t.$$.fragment,m),$(e.$$.fragment,m),$(r.$$.fragment,m),u=u.filter(Boolean);for(let p=0;p<u.length;p+=1)$(u[p]);a=!1},d(m){m&&(b(n),b(o),b(s),b(c)),y(t,m),y(e,m),y(r,m),pn(u,m)}}}function o4(i){let t,n,e,o;return t=new wt.Trigger({props:{$$slots:{default:[Z3]},$$scope:{ctx:i}}}),e=new wt.Content({props:{side:"top",align:"start",$$slots:{default:[n4]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment),n=U(),v(e.$$.fragment)},m(r,s){w(t,r,s),x(r,n,s),w(e,r,s),o=!0},p(r,s){const c={};8194&s&&(c.$$scope={dirty:s,ctx:r}),t.$set(c);const a={};8194&s&&(a.$$scope={dirty:s,ctx:r}),e.$set(a)},i(r){o||(d(t.$$.fragment,r),d(e.$$.fragment,r),o=!0)},o(r){$(t.$$.fragment,r),$(e.$$.fragment,r),o=!1},d(r){r&&b(n),y(t,r),y(e,r)}}}function r4(i){let t,n,e,o={nested:!1,$$slots:{default:[o4]},$$scope:{ctx:i}};return n=new wt.Root({props:o}),i[9](n),{c(){t=L("div"),v(n.$$.fragment),A(t,"class","c-model-picker svelte-hq3rg5")},m(r,s){x(r,t,s),w(n,t,null),e=!0},p(r,[s]){const c={};8194&s&&(c.$$scope={dirty:s,ctx:r}),n.$set(c)},i(r){e||(d(n.$$.fragment,r),e=!0)},o(r){$(n.$$.fragment,r),e=!1},d(r){r&&b(t),i[9](null),y(n)}}}const i4=5,nl=i=>i.id!==null;function s4(i,t,n){let e,o,r;const s=St("modelRegistry"),c=St("chatModel");let a;function l(u){e&&e.setSelectedModelId(u),a==null||a.requestClose()}return Et(i,c,u=>n(6,r=u)),i.$$.update=()=>{64&i.$$.dirty&&n(5,e=r.currentConversationModel),32&i.$$.dirty&&n(1,o=s.getModel((e==null?void 0:e.selectedModelId)??null))},[a,o,s,c,l,e,r,()=>l(null),u=>{l(u.id)},function(u){te[u?"unshift":"push"](()=>{a=u,n(0,a)})}]}class a4 extends ut{constructor(t){super(),dt(this,t,s4,r4,ct,{})}}function ol(i){let t;function n(r,s){return r[0]===r[1]?l4:c4}let e=n(i),o=e(i);return{c(){o.c(),t=mt()},m(r,s){o.m(r,s),x(r,t,s)},p(r,s){e===(e=n(r))&&o?o.p(r,s):(o.d(1),o=e(r),o&&(o.c(),o.m(t.parentNode,t)))},d(r){r&&b(t),o.d(r)}}}function c4(i){let t,n,e,o,r=i[0]+1+"",s=i[1]+1+"";return{c(){t=G("L"),n=G(r),e=G("-"),o=G(s)},m(c,a){x(c,t,a),x(c,n,a),x(c,e,a),x(c,o,a)},p(c,a){1&a&&r!==(r=c[0]+1+"")&&_t(n,r),2&a&&s!==(s=c[1]+1+"")&&_t(o,s)},d(c){c&&(b(t),b(n),b(e),b(o))}}}function l4(i){let t,n,e=i[0]+1+"";return{c(){t=G("L"),n=G(e)},m(o,r){x(o,t,r),x(o,n,r)},p(o,r){1&r&&e!==(e=o[0]+1+"")&&_t(n,e)},d(o){o&&(b(t),b(n))}}}function u4(i){let t,n,e,o=i[0]!==void 0&&i[1]!==void 0&&ol(i);return{c(){t=L("span"),n=G(i[2]),e=U(),o&&o.c(),A(t,"class","c-selection-item svelte-xiswvu")},m(r,s){x(r,t,s),O(t,n),O(t,e),o&&o.m(t,null)},p(r,[s]){4&s&&_t(n,r[2]),r[0]!==void 0&&r[1]!==void 0?o?o.p(r,s):(o=ol(r),o.c(),o.m(t,null)):o&&(o.d(1),o=null)},i:P,o:P,d(r){r&&b(t),o&&o.d()}}}function d4(i,t,n){let e,o,r,s,c,{fileSelection:a}=t;return i.$$set=l=>{"fileSelection"in l&&n(3,a=l.fileSelection)},i.$$.update=()=>{8&i.$$.dirty&&n(5,e=a.pathName||""),8&i.$$.dirty&&(a.fullRange?(n(0,s=a.fullRange.startLineNumber),n(1,c=a.fullRange.endLineNumber)):a.range&&(n(0,s=a.range.start),n(1,c=a.range.stop))),32&i.$$.dirty&&n(4,o=e.split("/").filter(l=>l.length>0)),16&i.$$.dirty&&n(2,r=o[o.length-1])},[s,c,r,a,o,e]}class $4 extends ut{constructor(t){super(),dt(this,t,d4,u4,ct,{fileSelection:3})}}function rl(i,t,n){const e=i.slice();return e[18]=t[n],e}function f4(i){let t,n,e,o,r,s,c,a,l,u,f,m;const p=[g4,p4],_=[];function M(C,T){var E;return C[1]!==void 0&&((E=C[1])==null?void 0:E.length)>0?0:1}return s=M(i),c=_[s]=p[s](i),{c(){t=L("p"),n=G("/"),e=G(i[2]),o=U(),r=L("div"),c.c(),a=U(),l=L("input"),A(t,"class","c-action-label svelte-34wttr"),A(l,"type","text"),A(l,"class","c-tiny-input-inline svelte-34wttr"),A(r,"class","c-max-element-inline svelte-34wttr")},m(C,T){x(C,t,T),O(t,n),O(t,e),x(C,o,T),x(C,r,T),_[s].m(r,null),O(r,a),O(r,l),u=!0,f||(m=[Lt(l,"keydown",i[9]),Lt(l,"keyup",i[10])],f=!0)},p(C,T){(!u||4&T)&&_t(e,C[2]);let E=s;s=M(C),s===E?_[s].p(C,T):(j(),$(_[E],1,1,()=>{_[E]=null}),q(),c=_[s],c?c.p(C,T):(c=_[s]=p[s](C),c.c()),d(c,1),c.m(r,a))},i(C){u||(d(c),u=!0)},o(C){$(c),u=!1},d(C){C&&(b(t),b(o),b(r)),_[s].d(),f=!1,Qe(m)}}}function m4(i){let t,n,e,o,r,s,c,a;return{c(){var l;t=L("p"),n=G("/"),e=G(i[2]),o=U(),r=L("input"),A(t,"class","c-action-label svelte-34wttr"),A(r,"type","text"),A(r,"class","c-max-element-inline svelte-34wttr"),A(r,"placeholder",s=(l=i[4])==null?void 0:l.placeholderText)},m(l,u){x(l,t,u),O(t,n),O(t,e),x(l,o,u),x(l,r,u),pr(r,i[0]),c||(a=[Lt(r,"input",i[12]),Lt(r,"keydown",i[8]),Lt(r,"keyup",i[10])],c=!0)},p(l,u){var f;4&u&&_t(e,l[2]),16&u&&s!==(s=(f=l[4])==null?void 0:f.placeholderText)&&A(r,"placeholder",s),1&u&&r.value!==l[0]&&pr(r,l[0])},i:P,o:P,d(l){l&&(b(t),b(o),b(r)),c=!1,Qe(a)}}}function p4(i){var o;let t,n,e=((o=i[4])==null?void 0:o.selectionReminderMessage)+"";return{c(){t=L("span"),n=G(e),A(t,"class","c-select-code-msg")},m(r,s){x(r,t,s),O(t,n)},p(r,s){var c;16&s&&e!==(e=((c=r[4])==null?void 0:c.selectionReminderMessage)+"")&&_t(n,e)},i:P,o:P,d(r){r&&b(t)}}}function g4(i){let t,n,e=se(i[1]),o=[];for(let s=0;s<e.length;s+=1)o[s]=il(rl(i,e,s));const r=s=>$(o[s],1,1,()=>{o[s]=null});return{c(){for(let s=0;s<o.length;s+=1)o[s].c();t=mt()},m(s,c){for(let a=0;a<o.length;a+=1)o[a]&&o[a].m(s,c);x(s,t,c),n=!0},p(s,c){if(2&c){let a;for(e=se(s[1]),a=0;a<e.length;a+=1){const l=rl(s,e,a);o[a]?(o[a].p(l,c),d(o[a],1)):(o[a]=il(l),o[a].c(),d(o[a],1),o[a].m(t.parentNode,t))}for(j(),a=e.length;a<o.length;a+=1)r(a);q()}},i(s){if(!n){for(let c=0;c<e.length;c+=1)d(o[c]);n=!0}},o(s){o=o.filter(Boolean);for(let c=0;c<o.length;c+=1)$(o[c]);n=!1},d(s){s&&b(t),pn(o,s)}}}function il(i){let t,n;return t=new $4({props:{fileSelection:i[18].selection}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};2&o&&(r.fileSelection=e[18].selection),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function h4(i){let t,n,e,o,r,s,c;const a=[m4,f4],l=[];function u(f,m){return f[2]==="find"?0:1}return e=u(i),o=l[e]=a[e](i),{c(){t=L("div"),n=L("div"),o.c(),A(n,"class","c-action-row svelte-34wttr"),A(t,"class","c-action svelte-34wttr"),A(t,"role","button"),A(t,"tabindex","-1")},m(f,m){x(f,t,m),O(t,n),l[e].m(n,null),r=!0,s||(c=[Lt(t,"click",i[7]),Lt(t,"keydown",v4)],s=!0)},p(f,[m]){let p=e;e=u(f),e===p?l[e].p(f,m):(j(),$(l[p],1,1,()=>{l[p]=null}),q(),o=l[e],o?o.p(f,m):(o=l[e]=a[e](f),o.c()),d(o,1),o.m(n,null))},i(f){r||(d(o),r=!0)},o(f){$(o),r=!1},d(f){f&&b(t),l[e].d(),s=!1,Qe(c)}}}const v4=i=>{};function w4(i,t,n){let e,o,r,s,c,a,l,u,f=P,m=P,p=P;i.$$.on_destroy.push(()=>f()),i.$$.on_destroy.push(()=>m()),i.$$.on_destroy.push(()=>p());let _=St("chatModel");if(!_)throw new Error("ChatModel not found in context");let M=St("slashCommandModel");const C=()=>{const N=document.querySelector("input");N&&(N.focus(),N.select())};let T="",E=!1;function R(){M.cancelActiveCommand()}return ro(C),i.$$.update=()=>{2048&i.$$.dirty&&n(1,o=Object.values(u.selections).sort((N,Z)=>N.selection.pathName.localeCompare(Z.selection.pathName))),2&i.$$.dirty&&M.setSelections(o),4&i.$$.dirty&&n(4,s=Si(l)),1&i.$$.dirty&&M.setInputText(T)},n(6,e=_.specialContextInputModel),p(),p=ce(e,N=>n(11,u=N)),n(5,r=M.activeCommand),m(),m=ce(r,N=>n(2,l=N)),n(3,c=M.isActiveCommandRunnable),f(),f=ce(c,N=>n(14,a=N)),[T,o,l,c,s,r,e,C,function(N){return!(N.shiftKey||N.ctrlKey||N.metaKey)&&(N.stopPropagation(),N.key==="Enter"?(E=!0,!0):N.key==="Escape"?(R(),!0):N.key==="Backspace"&&(T===""&&R(),!0))},function(N){if(N.ctrlKey||N.metaKey||N.key==="Tab")return!1;if(N.stopPropagation(),!N.shiftKey){if(N.key==="Escape"||N.key==="Backspace")return R(),!0;if(N.key==="Enter"&&a)return M.runActiveCommand(),!0}return N.preventDefault(),!0},function(N){return!N.shiftKey&&!(N.key!=="Enter"||!E||!a)&&(E=!1,M.runActiveCommand(),!0)},u,function(){T=this.value,n(0,T)}]}class y4 extends ut{constructor(t){super(),dt(this,t,w4,h4,ct,{})}}function sl(i,t,n){const e=i.slice();return e[15]=t[n],e}function al(i){let t,n;function e(){return i[8](i[15])}return t=new Xf({props:{item:i[15],highlight:i[15]===i[14],onSelect:e}}),{c(){v(t.$$.fragment)},m(o,r){w(t,o,r),n=!0},p(o,r){i=o;const s={};4&r&&(s.item=i[15]),16388&r&&(s.highlight=i[15]===i[14]),4&r&&(s.onSelect=e),t.$set(s)},i(o){n||(d(t.$$.fragment,o),n=!0)},o(o){$(t.$$.fragment,o),n=!1},d(o){y(t,o)}}}function b4(i){let t,n,e=se(i[2]),o=[];for(let s=0;s<e.length;s+=1)o[s]=al(sl(i,e,s));const r=s=>$(o[s],1,1,()=>{o[s]=null});return{c(){for(let s=0;s<o.length;s+=1)o[s].c();t=mt()},m(s,c){for(let a=0;a<o.length;a+=1)o[a]&&o[a].m(s,c);x(s,t,c),n=!0},p(s,c){if(16420&c){let a;for(e=se(s[2]),a=0;a<e.length;a+=1){const l=sl(s,e,a);o[a]?(o[a].p(l,c),d(o[a],1)):(o[a]=al(l),o[a].c(),d(o[a],1),o[a].m(t.parentNode,t))}for(j(),a=e.length;a<o.length;a+=1)r(a);q()}},i(s){if(!n){for(let c=0;c<e.length;c+=1)d(o[c]);n=!0}},o(s){o=o.filter(Boolean);for(let c=0;c<o.length;c+=1)$(o[c]);n=!1},d(s){s&&b(t),pn(o,s)}}}function x4(i){let t,n;return t=new Kr({props:{slot:"mentionable",option:i[13]}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};8192&o&&(r.option=e[13]),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function _4(i){let t,n,e,o;return t=new er.Menu.Root({props:{mentionables:i[2],onQueryUpdate:i[4],onSelectMentionable:i[5],$$slots:{default:[b4,({activeItem:r})=>({14:r}),({activeItem:r})=>r?16384:0]},$$scope:{ctx:i}}}),e=new er.ChipTooltip({props:{$$slots:{mentionable:[x4,({mentionable:r})=>({13:r}),({mentionable:r})=>r?8192:0]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment),n=U(),v(e.$$.fragment)},m(r,s){w(t,r,s),x(r,n,s),w(e,r,s),o=!0},p(r,s){const c={};4&s&&(c.mentionables=r[2]),278532&s&&(c.$$scope={dirty:s,ctx:r}),t.$set(c);const a={};270336&s&&(a.$$scope={dirty:s,ctx:r}),e.$set(a)},i(r){o||(d(t.$$.fragment,r),d(e.$$.fragment,r),o=!0)},o(r){$(t.$$.fragment,r),$(e.$$.fragment,r),o=!1},d(r){r&&b(n),y(t,r),y(e,r)}}}function C4(i){let t,n,e={triggerCharacter:"@",onMentionItemsUpdated:i[0],$$slots:{default:[_4]},$$scope:{ctx:i}};return t=new er.Root({props:e}),i[9](t),{c(){v(t.$$.fragment)},m(o,r){w(t,o,r),n=!0},p(o,[r]){const s={};1&r&&(s.onMentionItemsUpdated=o[0]),262148&r&&(s.$$scope={dirty:r,ctx:o}),t.$set(s)},i(o){n||(d(t.$$.fragment,o),n=!0)},o(o){$(t.$$.fragment,o),n=!1},d(o){i[9](null),y(t,o)}}}function A4(i,t,n){let e,{requestEditorFocus:o}=t,{onMentionItemsUpdated:r}=t;const s=St("chatModel");if(!s)throw new Error("ChatModel not found in context");const c=new Ri(s,u),a=c.displayItems;let l;function u(m){return!!l&&(l.insertMention(m),c.closeDropdown(),!0)}function f(m){const p=c.selectMentionable(m);return o(),p}return Et(i,a,m=>n(2,e=m)),jr(()=>{c.dispose()}),i.$$set=m=>{"requestEditorFocus"in m&&n(6,o=m.requestEditorFocus),"onMentionItemsUpdated"in m&&n(0,r=m.onMentionItemsUpdated)},[r,l,e,a,function(m){m===void 0?c.closeDropdown():(c.openDropdown(),c.userQuery.set(m))},f,o,m=>u(m),m=>f(m),function(m){te[m?"unshift":"push"](()=>{l=m,n(1,l)})}]}class M4 extends ut{constructor(t){super(),dt(this,t,A4,C4,ct,{requestEditorFocus:6,onMentionItemsUpdated:0,insertMentionNode:7})}get insertMentionNode(){return this.$$.ctx[7]}}function cl(i,t,n){const e=i.slice();return e[14]=t[n],e}function k4(i){let t,n,e,o=i[14].label+"";return{c(){t=G("/"),n=G(o),e=U()},m(r,s){x(r,t,s),x(r,n,s),x(r,e,s)},p(r,s){1&s&&o!==(o=r[14].label+"")&&_t(n,o)},d(r){r&&(b(t),b(n),b(e))}}}function ll(i){let t,n;return t=new er.Menu.Item({props:{mentionable:i[14],$$slots:{default:[k4]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};1&o&&(r.mentionable=e[14]),131073&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function S4(i){let t,n,e=se(i[0]),o=[];for(let s=0;s<e.length;s+=1)o[s]=ll(cl(i,e,s));const r=s=>$(o[s],1,1,()=>{o[s]=null});return{c(){for(let s=0;s<o.length;s+=1)o[s].c();t=mt()},m(s,c){for(let a=0;a<o.length;a+=1)o[a]&&o[a].m(s,c);x(s,t,c),n=!0},p(s,c){if(1&c){let a;for(e=se(s[0]),a=0;a<e.length;a+=1){const l=cl(s,e,a);o[a]?(o[a].p(l,c),d(o[a],1)):(o[a]=ll(l),o[a].c(),d(o[a],1),o[a].m(t.parentNode,t))}for(j(),a=e.length;a<o.length;a+=1)r(a);q()}},i(s){if(!n){for(let c=0;c<e.length;c+=1)d(o[c]);n=!0}},o(s){o=o.filter(Boolean);for(let c=0;c<o.length;c+=1)$(o[c]);n=!1},d(s){s&&b(t),pn(o,s)}}}function T4(i){let t,n,e=i[13].label+"";return{c(){t=L("span"),n=G(e),A(t,"slot","mentionable")},m(o,r){x(o,t,r),O(t,n)},p(o,r){8192&r&&e!==(e=o[13].label+"")&&_t(n,e)},d(o){o&&b(t)}}}function E4(i){let t,n,e,o;return t=new er.Menu.Root({props:{mentionables:i[0],onQueryUpdate:i[5],onSelectMentionable:i[9],$$slots:{default:[S4]},$$scope:{ctx:i}}}),e=new er.ChipTooltip({props:{$$slots:{mentionable:[T4,({mentionable:r})=>({13:r}),({mentionable:r})=>r?8192:0]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment),n=U(),v(e.$$.fragment)},m(r,s){w(t,r,s),x(r,n,s),w(e,r,s),o=!0},p(r,s){const c={};1&s&&(c.mentionables=r[0]),131073&s&&(c.$$scope={dirty:s,ctx:r}),t.$set(c);const a={};139264&s&&(a.$$scope={dirty:s,ctx:r}),e.$set(a)},i(r){o||(d(t.$$.fragment,r),d(e.$$.fragment,r),o=!0)},o(r){$(t.$$.fragment,r),$(e.$$.fragment,r),o=!1},d(r){r&&b(n),y(t,r),y(e,r)}}}function I4(i){let t,n;return t=new er.Root({props:{pluginId:"augment-slash-actions",triggerCharacter:"/",allowedPrefixes:[],renderText:L4,$$slots:{default:[E4]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,[o]){const r={};131073&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}const L4=()=>"";function R4(i,t,n){let e,o,r,s;const c=St("chatModel");Et(i,c,p=>n(10,s=p));const a=St("slashCommandModel"),{activeCommand:l}=a;Et(i,l,p=>n(7,o=p));const u=St(Bs.CONTEXT_KEY),f=s.flags;let m;return Et(i,f,p=>n(8,r=p)),i.$$.update=()=>{320&i.$$.dirty&&n(0,e=function(p,_){let M=Uf();return _||(M=M.filter(C=>C.id!=="generate-commit-message")),p===void 0?M:M.filter(C=>C.label.toLowerCase().includes(p.toLowerCase()))}(m,r.enableGenerateCommitMessage)),128&i.$$.dirty&&(o?(u.commandManager.hide(),u.commandManager.clearContent()):(u.commandManager.show(),u.commandManager.clearContent(),u.commandManager.requestFocus()))},[e,c,a,l,f,function(p){n(6,m=p)},m,o,r,p=>(a.setActiveCommand(p.id),!0)]}class D4 extends ut{constructor(t){super(),dt(this,t,R4,I4,ct,{})}}const{window:ls}=Op,N4=i=>({}),ul=i=>({slot:"banner"});function dl(i){let t,n,e={requestEditorFocus:i[39],onMentionItemsUpdated:i[38]};return t=new M4({props:e}),i[57](t),{c(){v(t.$$.fragment)},m(o,r){w(t,o,r),n=!0},p(o,r){t.$set({})},i(o){n||(d(t.$$.fragment,o),n=!0)},o(o){$(t.$$.fragment,o),n=!1},d(o){i[57](null),y(t,o)}}}function $l(i){let t,n;return t=new D4({}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function fl(i){let t,n,e,o;return t=new o0({props:{saveImage:i[9].saveImage,saveAttachment:i[9].saveAttachment,deleteImage:i[9].deleteImage,renderImage:i[9].renderImage,maxImages:Ai,supportedFileTypes:i[10].enableDebugFeatures?["image","text"]:["image"]}}),e=new Pg({props:{flags:i[9].flags}}),{c(){v(t.$$.fragment),n=U(),v(e.$$.fragment)},m(r,s){w(t,r,s),x(r,n,s),w(e,r,s),o=!0},p(r,s){const c={};512&s[0]&&(c.saveImage=r[9].saveImage),512&s[0]&&(c.saveAttachment=r[9].saveAttachment),512&s[0]&&(c.deleteImage=r[9].deleteImage),512&s[0]&&(c.renderImage=r[9].renderImage),1024&s[0]&&(c.supportedFileTypes=r[10].enableDebugFeatures?["image","text"]:["image"]),t.$set(c);const a={};512&s[0]&&(a.flags=r[9].flags),e.$set(a)},i(r){o||(d(t.$$.fragment,r),d(e.$$.fragment,r),o=!0)},o(r){$(t.$$.fragment,r),$(e.$$.fragment,r),o=!1},d(r){r&&b(n),y(t,r),y(e,r)}}}function ml(i){let t,n;return t=new y4({}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function P4(i){let t,n,e,o,r,s,c,a,l,u,f;t=new t1({props:{shortcuts:i[16]}});let m=!i[28].doHideAtMentions&&dl(i),p=!i[7]&&!i[28].doHideSlashActions&&$l();r=new e1({props:{placeholder:i[13]}}),c=new hf.Content({props:{content:i[27],onContentChanged:i[37]}});let _=i[9].flags.enableChatMultimodal&&!i[28].doHideMultimodalActions&&fl(i),M=i[30]&&!i[28].doHideSlashActions&&ml();return{c(){v(t.$$.fragment),n=U(),m&&m.c(),e=U(),p&&p.c(),o=U(),v(r.$$.fragment),s=U(),v(c.$$.fragment),a=U(),_&&_.c(),l=U(),M&&M.c(),u=mt()},m(C,T){w(t,C,T),x(C,n,T),m&&m.m(C,T),x(C,e,T),p&&p.m(C,T),x(C,o,T),w(r,C,T),x(C,s,T),w(c,C,T),x(C,a,T),_&&_.m(C,T),x(C,l,T),M&&M.m(C,T),x(C,u,T),f=!0},p(C,T){const E={};65536&T[0]&&(E.shortcuts=C[16]),t.$set(E),C[28].doHideAtMentions?m&&(j(),$(m,1,1,()=>{m=null}),q()):m?(m.p(C,T),268435456&T[0]&&d(m,1)):(m=dl(C),m.c(),d(m,1),m.m(e.parentNode,e)),C[7]||C[28].doHideSlashActions?p&&(j(),$(p,1,1,()=>{p=null}),q()):p?268435584&T[0]&&d(p,1):(p=$l(),p.c(),d(p,1),p.m(o.parentNode,o));const R={};8192&T[0]&&(R.placeholder=C[13]),r.$set(R);const N={};134217728&T[0]&&(N.content=C[27]),c.$set(N),C[9].flags.enableChatMultimodal&&!C[28].doHideMultimodalActions?_?(_.p(C,T),268435968&T[0]&&d(_,1)):(_=fl(C),_.c(),d(_,1),_.m(l.parentNode,l)):_&&(j(),$(_,1,1,()=>{_=null}),q()),C[30]&&!C[28].doHideSlashActions?M?1342177280&T[0]&&d(M,1):(M=ml(),M.c(),d(M,1),M.m(u.parentNode,u)):M&&(j(),$(M,1,1,()=>{M=null}),q())},i(C){f||(d(t.$$.fragment,C),d(m),d(p),d(r.$$.fragment,C),d(c.$$.fragment,C),d(_),d(M),f=!0)},o(C){$(t.$$.fragment,C),$(m),$(p),$(r.$$.fragment,C),$(c.$$.fragment,C),$(_),$(M),f=!1},d(C){C&&(b(n),b(e),b(o),b(s),b(a),b(l),b(u)),y(t,C),m&&m.d(C),p&&p.d(C),y(r,C),y(c,C),_&&_.d(C),M&&M.d(C)}}}function F4(i){let t;const n=i[55].banner,e=Yt(n,i,i[59],ul);return{c(){e&&e.c()},m(o,r){e&&e.m(o,r),t=!0},p(o,r){e&&e.p&&(!t||268435456&r[1])&&Kt(e,n,o,o[59],t?Jt(n,o[59],r,N4):Xt(o[59]),ul)},i(o){t||(d(e,o),t=!0)},o(o){$(e,o),t=!1},d(o){e&&e.d(o)}}}function pl(i){let t,n;return t=new xv({props:{chatModel:i[31]}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p:P,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function O4(i){let t,n,e=!i[28].doHideContextBar&&pl(i);return{c(){e&&e.c(),t=mt()},m(o,r){e&&e.m(o,r),x(o,t,r),n=!0},p(o,r){o[28].doHideContextBar?e&&(j(),$(e,1,1,()=>{e=null}),q()):e?(e.p(o,r),268435456&r[0]&&d(e,1)):(e=pl(o),e.c(),d(e,1),e.m(t.parentNode,t))},i(o){n||(d(e),n=!0)},o(o){$(e),n=!1},d(o){o&&b(t),e&&e.d(o)}}}function gl(i){let t,n;return t=new V0({props:{chatModel:i[31],agentConversationModel:i[32]}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p:P,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function hl(i){let t,n;return t=new ho.AddFileButton({props:{accept:i[10].enableDebugFeatures?"*":".png,.jpg,.jpeg"}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};1024&o[0]&&(r.accept=e[10].enableDebugFeatures?"*":".png,.jpg,.jpeg"),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function vl(i){let t,n;return t=new ho.ActionsMenu({props:{onCloseDropdown:i[39]}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p:P,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function wl(i){var e;let t,n;return t=new ho.ContextMenu({props:{onCloseDropdown:i[39],onInsertMentionable:(e=i[11])==null?void 0:e.insertMentionNode}}),{c(){v(t.$$.fragment)},m(o,r){w(t,o,r),n=!0},p(o,r){var c;const s={};2048&r[0]&&(s.onInsertMentionable=(c=o[11])==null?void 0:c.insertMentionNode),t.$set(s)},i(o){n||(d(t.$$.fragment,o),n=!0)},o(o){$(t.$$.fragment,o),n=!1},d(o){y(t,o)}}}function yl(i){let t,n,e,o;return{c(){t=L("span"),n=G(i[22]),e=G("/"),o=G(Br),A(t,"class","character-counter svelte-pwtee")},m(r,s){x(r,t,s),O(t,n),O(t,e),O(t,o)},p(r,s){4194304&s[0]&&_t(n,r[22])},d(r){r&&b(t)}}}function z4(i){let t;return{c(){t=G("Beta")},m(n,e){x(n,t,e)},d(n){n&&b(t)}}}function bl(i){let t,n;return t=new a4({}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function B4(i){var C;let t,n,e,o,r,s,c,a,l=i[10].enableAgentMode&&i[2]&&gl(i),u=i[9].flags.enableChatMultimodal&&!i[28].doHideMultimodalActions&&hl(i),f=!i[7]&&!i[28].doHideSlashActions&&vl(i),m=!i[28].doHideAtMentions&&wl(i),p=i[22]>Br&&yl(i),_=((C=i[33])==null?void 0:C.isActive)&&function(T){let E,R;return E=new jm({props:{color:"premium",size:1,variant:"soft",$$slots:{default:[z4]},$$scope:{ctx:T}}}),{c(){v(E.$$.fragment)},m(N,Z){w(E,N,Z),R=!0},i(N){R||(d(E.$$.fragment,N),R=!0)},o(N){$(E.$$.fragment,N),R=!1},d(N){y(E,N)}}}(i),M=i[24]&&bl();return{c(){l&&l.c(),t=U(),u&&u.c(),n=U(),f&&f.c(),e=U(),m&&m.c(),o=U(),p&&p.c(),r=U(),_&&_.c(),s=U(),M&&M.c(),c=mt()},m(T,E){l&&l.m(T,E),x(T,t,E),u&&u.m(T,E),x(T,n,E),f&&f.m(T,E),x(T,e,E),m&&m.m(T,E),x(T,o,E),p&&p.m(T,E),x(T,r,E),_&&_.m(T,E),x(T,s,E),M&&M.m(T,E),x(T,c,E),a=!0},p(T,E){T[10].enableAgentMode&&T[2]?l?(l.p(T,E),1028&E[0]&&d(l,1)):(l=gl(T),l.c(),d(l,1),l.m(t.parentNode,t)):l&&(j(),$(l,1,1,()=>{l=null}),q()),T[9].flags.enableChatMultimodal&&!T[28].doHideMultimodalActions?u?(u.p(T,E),268435968&E[0]&&d(u,1)):(u=hl(T),u.c(),d(u,1),u.m(n.parentNode,n)):u&&(j(),$(u,1,1,()=>{u=null}),q()),T[7]||T[28].doHideSlashActions?f&&(j(),$(f,1,1,()=>{f=null}),q()):f?(f.p(T,E),268435584&E[0]&&d(f,1)):(f=vl(T),f.c(),d(f,1),f.m(e.parentNode,e)),T[28].doHideAtMentions?m&&(j(),$(m,1,1,()=>{m=null}),q()):m?(m.p(T,E),268435456&E[0]&&d(m,1)):(m=wl(T),m.c(),d(m,1),m.m(o.parentNode,o)),T[22]>Br?p?p.p(T,E):(p=yl(T),p.c(),p.m(r.parentNode,r)):p&&(p.d(1),p=null),T[24]?M?16777216&E[0]&&d(M,1):(M=bl(),M.c(),d(M,1),M.m(c.parentNode,c)):M&&(j(),$(M,1,1,()=>{M=null}),q())},i(T){a||(d(l),d(u),d(f),d(m),d(_),d(M),a=!0)},o(T){$(l),$(u),$(f),$(m),$(_),$(M),a=!1},d(T){T&&(b(t),b(n),b(e),b(o),b(r),b(s),b(c)),l&&l.d(T),u&&u.d(T),f&&f.d(T),m&&m.d(T),p&&p.d(T),_&&_.d(T),M&&M.d(T)}}}function xl(i){var e;let t,n;return t=new ho.NotifyButton({props:{agentId:(e=i[6])==null?void 0:e.currentAgentId}}),{c(){v(t.$$.fragment)},m(o,r){w(t,o,r),n=!0},p(o,r){var c;const s={};64&r[0]&&(s.agentId=(c=o[6])==null?void 0:c.currentAgentId),t.$set(s)},i(o){n||(d(t.$$.fragment,o),n=!0)},o(o){$(t.$$.fragment,o),n=!1},d(o){y(t,o)}}}function U4(i){let t,n,e,o;t=new ho.RewritePromptButton({props:{onRewrite:i[41],isDisabled:i[12].isDisabled,disabledReason:i[12].disabledReason}});let r=i[3]&&_l(i);return{c(){v(t.$$.fragment),n=U(),r&&r.c(),e=mt()},m(s,c){w(t,s,c),x(s,n,c),r&&r.m(s,c),x(s,e,c),o=!0},p(s,c){const a={};4096&c[0]&&(a.isDisabled=s[12].isDisabled),4096&c[0]&&(a.disabledReason=s[12].disabledReason),t.$set(a),s[3]?r?(r.p(s,c),8&c[0]&&d(r,1)):(r=_l(s),r.c(),d(r,1),r.m(e.parentNode,e)):r&&(j(),$(r,1,1,()=>{r=null}),q())},i(s){o||(d(t.$$.fragment,s),d(r),o=!0)},o(s){$(t.$$.fragment,s),$(r),o=!1},d(s){s&&(b(n),b(e)),y(t,s),r&&r.d(s)}}}function H4(i){var e;let t,n;return t=new ho.ResendButton({props:{resendAction:(e=i[8])==null?void 0:e.resendLastExchange}}),{c(){v(t.$$.fragment)},m(o,r){w(t,o,r),n=!0},p(o,r){var c;const s={};256&r[0]&&(s.resendAction=(c=o[8])==null?void 0:c.resendLastExchange),t.$set(s)},i(o){n||(d(t.$$.fragment,o),n=!0)},o(o){$(t.$$.fragment,o),n=!1},d(o){y(t,o)}}}function j4(i){let t,n;return t=new ho.CancelButton({props:{cancelAction:i[32].interruptAgent}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p:P,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function q4(i){let t,n;return t=new ho.CancelButton({props:{cancelAction:i[17]}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};131072&o[0]&&(r.cancelAction=e[17]),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function _l(i){let t,n;return t=new ho.SendButton({props:{isDisabled:i[4],disabledReason:i[21],primaryAction:i[19]}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};16&o[0]&&(r.isDisabled=e[4]),2097152&o[0]&&(r.disabledReason=e[21]),524288&o[0]&&(r.primaryAction=e[19]),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function W4(i){let t,n,e,o,r,s=i[29]&&xl(i);const c=[q4,j4,H4,U4],a=[];function l(u,f){return u[18]?0:u[14]?1:u[5]?2:3}return n=l(i),e=a[n]=c[n](i),{c(){s&&s.c(),t=U(),e.c(),o=mt()},m(u,f){s&&s.m(u,f),x(u,t,f),a[n].m(u,f),x(u,o,f),r=!0},p(u,f){u[29]?s?(s.p(u,f),536870912&f[0]&&d(s,1)):(s=xl(u),s.c(),d(s,1),s.m(t.parentNode,t)):s&&(j(),$(s,1,1,()=>{s=null}),q());let m=n;n=l(u),n===m?a[n].p(u,f):(j(),$(a[m],1,1,()=>{a[m]=null}),q(),e=a[n],e?e.p(u,f):(e=a[n]=c[n](u),e.c()),d(e,1),e.m(o.parentNode,o))},i(u){r||(d(s),d(e),r=!0)},o(u){$(s),$(e),r=!1},d(u){u&&(b(t),b(o)),s&&s.d(u),a[n].d(u)}}}function V4(i){let t,n;return t=new ho.Root({props:{slot:"footer",$$slots:{rightAlign:[W4],leftAlign:[B4]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};829317116&o[0]|268435456&o[1]&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function Cl(i){let t,n,e={editable:i[1],$$slots:{footer:[V4],header:[O4],banner:[F4],default:[P4]},$$scope:{ctx:i}};return t=new hf.Root({props:e}),i[58](t),{c(){v(t.$$.fragment)},m(o,r){w(t,o,r),n=!0},p(o,r){const s={};2&r[0]&&(s.editable=o[1]),2037350396&r[0]|268435456&r[1]&&(s.$$scope={dirty:r,ctx:o}),t.$set(s)},i(o){n||(d(t.$$.fragment,o),n=!0)},o(o){$(t.$$.fragment,o),n=!1},d(o){i[58](null),y(t,o)}}}function G4(i){let t,n,e,o,r=i[20],s=Cl(i);return{c(){t=L("div"),s.c(),A(t,"class","c-chat-input svelte-pwtee"),A(t,"data-testid","design-system-chat-input")},m(c,a){x(c,t,a),s.m(t,null),n=!0,e||(o=[Lt(ls,"focus",i[56]),Lt(ls,"blur",function(){Ne(i[9].saveImmediate)&&i[9].saveImmediate.apply(this,arguments)}),Lt(ls,"beforeunload",function(){Ne(i[9].saveImmediate)&&i[9].saveImmediate.apply(this,arguments)})],e=!0)},p(c,a){i=c,1048576&a[0]&&ct(r,r=i[20])?(j(),$(s,1,1,P),q(),s=Cl(i),s.c(),d(s,1),s.m(t,null)):s.p(i,a)},i(c){n||(d(s),n=!0)},o(c){$(s),n=!1},d(c){c&&b(t),s.d(c),e=!1,Qe(o)}}}function Y4(i,t,n){let e,o,r,s,c,a,l,u,f,m,p,_,M,C,T,E,R,N,Z,Q,X,K,H,Y,V,J,rt,lt,ot,ht,it,xt,ee,At,Ht=P,De=P,Ee=P,un=P;i.$$.on_destroy.push(()=>Ht()),i.$$.on_destroy.push(()=>De()),i.$$.on_destroy.push(()=>Ee()),i.$$.on_destroy.push(()=>un());let{$$slots:z={},$$scope:S}=t;const F=St("chatModel");Et(i,F,Wt=>n(9,it=Wt));const tt=St("toolsWebviewModel"),st=St("agentConversationModel"),vt=St(Tn.key);Et(i,vt,Wt=>n(6,J=Wt));const Ct=St(hr.key),Ft=St("slashCommandModel"),qt=St(mo.key),re=F.flags;Et(i,re,Wt=>n(10,ee=Wt));const{currentConversationModel:Vt}=F;Et(i,Vt,Wt=>n(51,V=Wt));const{activeCommand:ze}=Ft;Et(i,ze,Wt=>n(30,At=Wt));let Qt,Ie,{editable:Oe=!0}=t,{placeholder:Pe="Ask or instruct Augment"}=t,{hasToggleModeButton:Cn=!0}=t,{hasSendButton:An=!0}=t,{richTextEditorRoot:Be}=t;const $n=Vt.onNewConversation(()=>tn());let Ge;jr($n);let gn;const Pn=()=>Be==null?void 0:Be.requestFocus(),tn=()=>{var Wt;return(Wt=Be==null?void 0:Be.forceFocus)==null?void 0:Wt.call(Be)},Ye=()=>(Be==null||Be.blur(),!0);let Xe=!1;const Qn=Ct==null?void 0:Ct.currentRepositoryUrl;return Et(i,Qn,Wt=>n(52,rt=Wt)),i.$$set=Wt=>{"editable"in Wt&&n(1,Oe=Wt.editable),"placeholder"in Wt&&n(42,Pe=Wt.placeholder),"hasToggleModeButton"in Wt&&n(2,Cn=Wt.hasToggleModeButton),"hasSendButton"in Wt&&n(3,An=Wt.hasSendButton),"richTextEditorRoot"in Wt&&n(0,Be=Wt.richTextEditorRoot),"$$scope"in Wt&&n(59,S=Wt.$$scope)},i.$$.update=()=>{var Wt,Fn,On,zn,Vn,yn;if(64&i.$$.dirty[0]&&n(29,e=!!(J!=null&&J.isActive)),64&i.$$.dirty[0]&&n(28,o=X$(J)),1048576&i.$$.dirty[1]&&n(50,r=V.draftExchange||{rich_text_json_repr:void 0}),524288&i.$$.dirty[1]&&n(27,s=r.rich_text_json_repr||{type:"doc",content:[{type:"paragraph"}]}),64&i.$$.dirty[0]|1048576&i.$$.dirty[1]&&n(49,c=J!=null&&J.isActive?"remoteAgent":(Wt=V.extraData)!=null&&Wt.isAgentConversation?"localAgent":"chat"),512&i.$$.dirty[0]|1314816&i.$$.dirty[1]&&it.conversations[V.id]&&Sn.isNew(it.conversations[V.id])&&Qt!==c&&(n(43,Qt=c),c!=="remoteAgent"&&Fo().then(()=>tn())),1318912&i.$$.dirty[1]&&Ie!==V.id&&(n(44,Ie=V.id),c!=="remoteAgent"&&Fo().then(()=>tn())),64&i.$$.dirty[0]|16384&i.$$.dirty[1]){const qe=(Fn=J==null?void 0:J.currentAgent)==null?void 0:Fn.status;Ge!==Ze.agentStarting||qe!==Ze.agentRunning&&qe!==Ze.agentIdle||Fo().then(()=>tn()),n(45,Ge=qe)}if(192&i.$$.dirty[0]&&n(48,u=ot||(J==null?void 0:J.isActive)),1024&i.$$.dirty[0]|131072&i.$$.dirty[1]&&n(24,f=u&&ee.enableModelRegistry),512&i.$$.dirty[0]&&(n(23,m=it.sendModeModel.mode),un(),un=ce(m,qe=>n(54,xt=qe))),577&i.$$.dirty[0]|8388608&i.$$.dirty[1]&&n(47,p=d0(it,st,tt,Ft,xt,qt,J,Ct,Be)),65536&i.$$.dirty[1]&&n(18,_=p.showCancelButton),1048576&i.$$.dirty[1]&&n(22,M=((zn=(On=V.draftExchange)==null?void 0:On.request_message)==null?void 0:zn.length)||0),65536&i.$$.dirty[1]&&n(4,C=p.isDisabled),65536&i.$$.dirty[1]&&n(21,T=p.disabledReason),65536&i.$$.dirty[1]&&n(19,E=p.action),65536&i.$$.dirty[1]&&n(17,R=p.cancelAction),192&i.$$.dirty[0]|2048&i.$$.dirty[1]&&n(20,N=`${ot}-${J==null?void 0:J.isActive}-${Pe}`),512&i.$$.dirty[0]&&(n(15,Q=it.currentConversationModel),Ee(),Ee=ce(Q,qe=>n(8,ht=qe))),256&i.$$.dirty[0]){const qe=(Vn=ht==null?void 0:ht.lastExchange)==null?void 0:Vn.status,En=qe===nn.cancelled,ve=ht==null?void 0:ht.getLastToolUseState().phase,fn=ve===xe.cancelled;n(46,Xe=En||fn)}192&i.$$.dirty[0]|4194304&i.$$.dirty[1]&&n(14,X=!(J!=null&&J.isActive)&&ot&&lt!==Dr.notRunning),64&i.$$.dirty[0]|1081344&i.$$.dirty[1]&&n(5,K=!(J!=null&&J.isActive)&&Xe&&((yn=V.draftExchange)==null?void 0:yn.request_message)===""),32&i.$$.dirty[0]|2048&i.$$.dirty[1]&&n(13,H=K?"Resend to continue":Pe),80&i.$$.dirty[0]|2097152&i.$$.dirty[1]&&n(12,Y=function(qe,En,ve){var Ve,Ue,gt;if(ve)return{isDisabled:!0,disabledReason:void 0};if(!(qe!=null&&qe.isActive))return{isDisabled:!1,disabledReason:void 0};const fn=(gt=(Ue=(Ve=qe.newAgentDraft)==null?void 0:Ve.commitRef)==null?void 0:Ue.github_commit_ref)==null?void 0:gt.repository_url;if(!fn)return{isDisabled:!1,disabledReason:void 0};const Bn=En||"";return Bn&&fn!==Bn?{isDisabled:!0,disabledReason:"Prompt enhancer is only available when the current repository is selected"}:{isDisabled:!1,disabledReason:void 0}}(J,rt,C))},n(26,{isCurrConversationAgentic:a,agentExchangeStatus:l}=st,a,(n(25,l),Ht(),Ht=ce(l,Wt=>n(53,lt=Wt)),l)),De(),De=ce(a,Wt=>n(7,ot=Wt)),n(16,Z={Enter:()=>!C&&E(),Escape:()=>_?R():X?(st.interruptAgent().catch(Wt=>{console.error("Failed to interrupt agent:",Wt)}),!0):Ye()}),[Be,Oe,Cn,An,C,K,J,ot,ht,it,ee,gn,Y,H,X,Q,Z,R,_,E,N,T,M,m,f,l,a,s,o,e,At,F,st,vt,re,Vt,ze,function(Wt){V.saveDraftExchange(Wt.rawText,Wt.richTextJsonRepr)},function(Wt){V.saveDraftMentions(Wt.current)},Pn,Qn,async function(){var Wt,Fn,On,zn,Vn;try{const yn=((Wt=V.draftExchange)==null?void 0:Wt.request_message)||"";if(!yn||yn.trim()==="")return;const qe=`Here is an instruction that I'd like to give you, but it needs to be improved. Rewrite and enhance this instruction to make it clearer, more specific, less ambiguous, and correct any mistakes. Do not use any tools: reply immediately with your answer, even if you're not sure. Consider the context of our conversation history when enhancing the prompt. Reply with the following format:

### BEGIN RESPONSE ###
Here is an enhanced version of the original instruction that is more specific and clear:
<augment-enhanced-prompt>enhanced prompt goes here</augment-enhanced-prompt>

### END RESPONSE ###

Here is my original instruction:`,En=(Fn=V.draftExchange)==null?void 0:Fn.rich_text_json_repr;try{let ve;J!=null&&J.isActive&&(ve=J.getCurrentChatHistory().map(zt=>({request_id:zt.request_id||"",request_message:zt.request_message,response_text:zt.response_text||""})));let{responseText:fn,requestId:Bn}=await V.sendSilentExchange({request_message:`${qe}

${yn}`,disableRetrieval:!1,chatHistory:ve});V.extensionClient.reportAgentRequestEvent({eventName:Km.enhancedPrompt,conversationId:V.id,requestId:Bn,chatHistoryLength:V.chatHistory.length}),V.extensionClient.reportAgentSessionEvent({eventName:Mo.enhancedPrompt,conversationId:V.id});let Ve="";const Ue=/<augment-enhanced-prompt>([\s\S]*?)<\/augment-enhanced-prompt>/,gt=fn.match(Ue);if(gt&&gt[1])Ve=gt[1].trim();else{Ve=yn,console.warn("Enhanced prompt tags not found in response, using original prompt");const zt=document.createElement("div");zt.className="enhance-prompt-error-tooltip",zt.textContent="Failed to enhance prompt, sorry about that",document.body.appendChild(zt);const _e=Fp(zt,{content:zt,trigger:"manual",placement:"top",theme:"error",duration:[300,2e3],onHidden:()=>{zt.remove()}}),ue=document.querySelector(".c-rewrite-prompt-button");ue?(_e.setProps({getReferenceClientRect:()=>ue.getBoundingClientRect()}),_e.show(),setTimeout(()=>{_e.hide()},3e3)):zt.remove()}if(Ve&&Ve.trim()!==""){const zt=(On=V.draftExchange)==null?void 0:On.rich_text_json_repr;let _e;if(zt&&typeof zt=="object"){if(_e={...zt},_e.content&&Array.isArray(_e.content)){const ue=[];let ne=!1;for(const ae of _e.content)if(ae.type!=="paragraph"||ne)ae.type!=="paragraph"&&ue.push(ae);else{const dn=Ve.split(`
`),Tt={type:"paragraph",content:[]};dn.forEach((Gn,In)=>{var Eo,Io;Gn.length>0&&((Eo=Tt.content)==null||Eo.push({type:"text",text:Gn})),In<dn.length-1&&((Io=Tt.content)==null||Io.push({type:"hardBreak"}))}),ue.push(Tt),ne=!0}_e.content=ue}}else _e={type:"doc",content:[{type:"paragraph",content:[{type:"text",text:Ve}]}]};V.saveDraftExchange(Ve,_e),setTimeout(()=>{tn();try{const ue=document.querySelector(".ProseMirror");if(ue){const ne=ue.querySelector("p");if(ne){const ae=document.createRange(),dn=window.getSelection();ae.setStart(ne,0),ae.collapse(!0),dn&&(dn.removeAllRanges(),dn.addRange(ae))}}}catch{}},200)}else V.saveDraftExchange(En&&((zn=V.draftExchange)==null?void 0:zn.request_message)||"",En||{type:"doc",content:[]})}catch{V.saveDraftExchange(En&&((Vn=V.draftExchange)==null?void 0:Vn.request_message)||"",En||{type:"doc",content:[]})}tn()}catch{}},Pe,Qt,Ie,Ge,Xe,p,u,c,r,V,rt,lt,xt,z,()=>{e||Pn()},function(Wt){te[Wt?"unshift":"push"](()=>{gn=Wt,n(11,gn)})},function(Wt){te[Wt?"unshift":"push"](()=>{Be=Wt,n(0,Be)})},S]}class Zf extends ut{constructor(t){super(),dt(this,t,Y4,G4,ct,{editable:1,placeholder:42,hasToggleModeButton:2,hasSendButton:3,richTextEditorRoot:0},null,[-1,-1,-1])}}const K4=i=>({}),Al=i=>({}),X4=i=>({}),Ml=i=>({}),J4=i=>({}),kl=i=>({}),Z4=i=>({}),Sl=i=>({}),Q4=i=>({}),Tl=i=>({}),ty=i=>({}),El=i=>({}),ey=i=>({}),Il=i=>({});function ny(i){let t,n,e,o,r,s,c,a,l,u,f,m,p,_,M;const C=i[1]["header-area"],T=Yt(C,i,i[0],Il),E=i[1]["floating-area"],R=Yt(E,i,i[0],El),N=i[1]["message-area"],Z=Yt(N,i,i[0],Tl),Q=i[1]["divider-area"],X=Yt(Q,i,i[0],Sl),K=i[1]["actions-area"],H=Yt(K,i,i[0],kl),Y=i[1]["input-area"],V=Yt(Y,i,i[0],Ml),J=i[1]["footer-area"],rt=Yt(J,i,i[0],Al);return{c(){t=L("div"),n=L("div"),e=L("div"),T&&T.c(),o=U(),r=L("div"),R&&R.c(),s=U(),c=L("div"),a=L("div"),Z&&Z.c(),l=U(),u=L("div"),X&&X.c(),f=U(),m=L("div"),H&&H.c(),p=U(),V&&V.c(),_=U(),rt&&rt.c(),A(e,"class","l-chat__header svelte-84kn6v"),A(r,"class","l-chat__floating svelte-84kn6v"),A(a,"class","l-chat__msg_area_body svelte-84kn6v"),A(c,"class","l-chat__msg_area svelte-84kn6v"),A(n,"class","l-chat svelte-84kn6v"),A(n,"data-testid","main-chat"),A(n,"data-vscode-context",JSON.stringify({preventDefaultContextMenuItems:!0})),A(u,"class","l-chat__divider_area svelte-84kn6v"),A(m,"class","l-chat__input_area svelte-84kn6v"),A(t,"class","l-chat-wrapper svelte-84kn6v")},m(lt,ot){x(lt,t,ot),O(t,n),O(n,e),T&&T.m(e,null),O(n,o),O(n,r),R&&R.m(r,null),O(n,s),O(n,c),O(c,a),Z&&Z.m(a,null),O(t,l),O(t,u),X&&X.m(u,null),O(t,f),O(t,m),H&&H.m(m,null),O(m,p),V&&V.m(m,null),O(m,_),rt&&rt.m(m,null),M=!0},p(lt,[ot]){T&&T.p&&(!M||1&ot)&&Kt(T,C,lt,lt[0],M?Jt(C,lt[0],ot,ey):Xt(lt[0]),Il),R&&R.p&&(!M||1&ot)&&Kt(R,E,lt,lt[0],M?Jt(E,lt[0],ot,ty):Xt(lt[0]),El),Z&&Z.p&&(!M||1&ot)&&Kt(Z,N,lt,lt[0],M?Jt(N,lt[0],ot,Q4):Xt(lt[0]),Tl),X&&X.p&&(!M||1&ot)&&Kt(X,Q,lt,lt[0],M?Jt(Q,lt[0],ot,Z4):Xt(lt[0]),Sl),H&&H.p&&(!M||1&ot)&&Kt(H,K,lt,lt[0],M?Jt(K,lt[0],ot,J4):Xt(lt[0]),kl),V&&V.p&&(!M||1&ot)&&Kt(V,Y,lt,lt[0],M?Jt(Y,lt[0],ot,X4):Xt(lt[0]),Ml),rt&&rt.p&&(!M||1&ot)&&Kt(rt,J,lt,lt[0],M?Jt(J,lt[0],ot,K4):Xt(lt[0]),Al)},i(lt){M||(d(T,lt),d(R,lt),d(Z,lt),d(X,lt),d(H,lt),d(V,lt),d(rt,lt),M=!0)},o(lt){$(T,lt),$(R,lt),$(Z,lt),$(X,lt),$(H,lt),$(V,lt),$(rt,lt),M=!1},d(lt){lt&&b(t),T&&T.d(lt),R&&R.d(lt),Z&&Z.d(lt),X&&X.d(lt),H&&H.d(lt),V&&V.d(lt),rt&&rt.d(lt)}}}function oy(i,t,n){let{$$slots:e={},$$scope:o}=t;return i.$$set=r=>{"$$scope"in r&&n(0,o=r.$$scope)},[o,e]}class ry extends ut{constructor(t){super(),dt(this,t,oy,ny,ct,{})}}class iy{constructor(t,n){$t(this,"subscribers",new Set);$t(this,"isAutofixConversation",()=>sp(this._conversationModel));$t(this,"subscribe",t=>(this.subscribers.add(t),t(this),()=>{this.subscribers.delete(t)}));$t(this,"notifySubscribers",()=>{this.subscribers.forEach(t=>t(this))});$t(this,"update",t=>{this._conversationModel.extraData={...this.extraData,...t},this.notifySubscribers(),this.sendAutofixStateUpdate()});$t(this,"shouldShowAutofixCommandInput",()=>{var t;return!((t=this.extraData.autofixIterations)!=null&&t.length)});$t(this,"launchAutofixPanel",async(t,n)=>{await this._extensionClient.launchAutofixPanel(this.conversationId,t,n)});this._conversationModel=t,this._extensionClient=n,this._conversationModel.subscribe(e=>this.notifySubscribers())}get conversationId(){return this._conversationModel.id}async sendAutofixStateUpdate(){await this._extensionClient.sendAutofixStateUpdate(this._conversationModel.extraData)}setCommand(t){this.update({autofixCommand:t})}get extraData(){return this._conversationModel.extraData}addChatItem(t){this._conversationModel.addChatItem(t)}getAutofixIteration(t){var n;return(n=this.extraData.autofixIterations)==null?void 0:n.find(e=>e.id===t)}insertNewAutofixIteration(t){this.update({autofixIterations:[...this.extraData.autofixIterations||[],t]})}updateAutofixIteration(t){const n=this.extraData.autofixIterations||[],e=n.findIndex(o=>o.id===t.id);if(e===-1)throw new Error(`No autofix iteration found with id ${t.id}`);this.update({autofixIterations:n.map((o,r)=>r===e?{...o,...t}:o)})}async handleFixWasApplied(t){var e,o;const n=(o=(e=this.extraData.autofixIterations)==null?void 0:e.at(-1))==null?void 0:o.id;if(!n)throw new Error("No latest iteration found");this.updateAutofixIteration({id:n,selectedSolutions:t}),await this.startNewAutofixIteration()}async handleUserSteering(t){var o,r;const n=(o=this.extraData.autofixIterations)==null?void 0:o.at(-1);if(!n)throw new Error("No latest iteration found");const e=(r=n.suggestedSolutions)==null?void 0:r.at(-1);if(!e)throw new Error("No latest suggested solution found");this.addChatItem({chatItemType:uo.autofixSteeringMessage,request_id:crypto.randomUUID(),status:nn.sent,response_text:t}),this.update({autofixSteeringHistory:[...this.extraData.autofixSteeringHistory||[],{requestId:crypto.randomUUID(),requestMessage:t,summary:e.summary,replacements:e.originalReplacements}]}),await this.planSolution(n.id)}async startNewAutofixIteration(){var r;const t=this.extraData.autofixCommand;if(!t)throw new Error("No command set");const n=this.extraData,e=crypto.randomUUID(),o=!((r=n.autofixIterations)!=null&&r.length);this.insertNewAutofixIteration({id:e,currentStage:lr.runTest,commandOutput:"",isFirstIteration:o}),this.addChatItem({chatItemType:uo.autofixStage,request_id:crypto.randomUUID(),iterationId:e,status:nn.sent,stage:lr.runTest}),await this.launchAutofixPanel(e,lr.runTest);try{const s=t.split(" "),c=s[0],a=s.slice(1),l=await this._extensionClient.executeCommand(e,c,a),u=l.returnCode!==0;if(this.updateAutofixIteration({id:e,commandOutput:l.output,commandFailed:u}),!u)return e}catch(s){return console.error("[ConversationModel] Error executing command:",s),this.updateAutofixIteration({id:e,commandOutput:String(s),commandFailed:!0}),e}return await this.planSolution(e),e}async planSolution(t){var r,s;const n=this.extraData.autofixCommand;if(!n)throw new Error("No command set");const e=this.getAutofixIteration(t);if(!e)throw new Error(`No iteration found with id ${t}`);this.updateAutofixIteration({id:t,currentStage:lr.applyFix}),this.addChatItem({chatItemType:uo.autofixStage,request_id:crypto.randomUUID(),iterationId:t,status:nn.sent,stage:lr.applyFix,stageCount:((r=e.suggestedSolutions)==null?void 0:r.length)||0});const o=await this._extensionClient.autofixPlan({input:n,output:((s=this.getAutofixIteration(t))==null?void 0:s.commandOutput)||""},this.extraData.autofixSteeringHistory);this.addChatItem({chatItemType:uo.autofixMessage,request_id:crypto.randomUUID(),status:nn.sent,response_text:o.summary}),this.updateAutofixIteration({id:t,suggestedSolutions:[...e.suggestedSolutions||[],o]}),await this.launchAutofixPanel(t,lr.applyFix)}handleMessageFromExtension(t){const n=t.data;switch(n.type){case je.chatAutofixStateUpdateRequest:return this.sendAutofixStateUpdate(),!0;case je.chatAutofixSuggestionsApplied:return this.handleFixWasApplied(n.data.selectedSolutions),!0;default:return!1}}initializeAutofixConversation(){this.update({isAutofix:!0,autofixIterations:[]});const t={chatItemType:uo.autofixMessage,request_id:crypto.randomUUID(),status:nn.success,response_text:"Autofix enables you to run your tests and suggests fixes for you. Start by typing a command to run your test such as `pytest path/to/test`"};this._conversationModel.chatHistory.push(t)}}function sy(i){let t,n;return t=new zo({props:{iconName:"play_arrow"}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p:P,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function ay(i){let t,n,e,o,r,s;function c(l){i[2](l)}let a={placeholder:"Enter test command (e.g. pytest path/to/test.py)",variant:"surface",size:2};return i[0]!==void 0&&(a.value=i[0]),n=new nr({props:a}),te.push(()=>Te(n,"value",c)),n.$on("keydown",i[1]),r=new he({props:{disabled:!i[0],size:2,variant:"solid",color:"accent",$$slots:{default:[sy]},$$scope:{ctx:i}}}),r.$on("click",i[3]),{c(){t=L("div"),v(n.$$.fragment),o=U(),v(r.$$.fragment),A(t,"class","command-input-container svelte-3c7cic")},m(l,u){x(l,t,u),w(n,t,null),O(t,o),w(r,t,null),s=!0},p(l,[u]){const f={};!e&&1&u&&(e=!0,f.value=l[0],Re(()=>e=!1)),n.$set(f);const m={};1&u&&(m.disabled=!l[0]),64&u&&(m.$$scope={dirty:u,ctx:l}),r.$set(m)},i(l){s||(d(n.$$.fragment,l),d(r.$$.fragment,l),s=!0)},o(l){$(n.$$.fragment,l),$(r.$$.fragment,l),s=!1},d(l){l&&b(t),y(n),y(r)}}}function cy(i,t,n){const e=St("autofixConversationModel");if(!e)throw new Error("AutofixConversationModel not found in context");let o="";async function r(s){return!(s.shiftKey||s.ctrlKey||s.metaKey)&&(s.stopPropagation(),s.key==="Enter"&&o.length>0?(e.setCommand(o),await e.startNewAutofixIteration(),n(0,o=""),!0):s.key==="Escape")}return ro(()=>{const s=document.querySelector("input");s&&(s.focus(),s.select())}),[o,r,function(s){o=s,n(0,o)},()=>r(new KeyboardEvent("keydown",{key:"Enter"}))]}class ly extends ut{constructor(t){super(),dt(this,t,cy,ay,ct,{})}}function uy(i){let t,n,e,o,r,s;return n=new Gt({props:{size:1,color:"error",$$slots:{default:[dy]},$$scope:{ctx:i}}}),r=new Gt({props:{size:1,color:"error",$$slots:{default:[$y]},$$scope:{ctx:i}}}),{c(){t=L("div"),v(n.$$.fragment),e=U(),o=L("div"),v(r.$$.fragment),A(t,"class","c-lazy-loading-error"),A(o,"class","c-lazy-loading-error")},m(c,a){x(c,t,a),w(n,t,null),x(c,e,a),x(c,o,a),w(r,o,null),s=!0},i(c){s||(d(n.$$.fragment,c),d(r.$$.fragment,c),s=!0)},o(c){$(n.$$.fragment,c),$(r.$$.fragment,c),s=!1},d(c){c&&(b(t),b(e),b(o)),y(n),y(r)}}}function dy(i){let t;return{c(){t=G("Failed to load agent setup. Please try closing and re-opening the panel.")},m(n,e){x(n,t,e)},d(n){n&&b(t)}}}function $y(i){let t;return{c(){t=G(i[2])},m(n,e){x(n,t,e)},p:P,d(n){n&&b(t)}}}function fy(i){let t,n;return function(e){e[0]=e[1].default}(i),t=new i[0]({}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function my(i){let t,n,e,o,r;return n=new go({props:{size:1}}),o=new Gt({props:{size:1,color:"secondary",$$slots:{default:[py]},$$scope:{ctx:i}}}),{c(){t=L("div"),v(n.$$.fragment),e=U(),v(o.$$.fragment),A(t,"class","c-lazy-loading-container")},m(s,c){x(s,t,c),w(n,t,null),O(t,e),w(o,t,null),r=!0},i(s){r||(d(n.$$.fragment,s),d(o.$$.fragment,s),r=!0)},o(s){$(n.$$.fragment,s),$(o.$$.fragment,s),r=!1},d(s){s&&b(t),y(n),y(o)}}}function py(i){let t;return{c(){t=G("Loading agent setup...")},m(n,e){x(n,t,e)},d(n){n&&b(t)}}}function gy(i){let t,n,e={ctx:i,current:null,token:null,hasCatch:!0,pending:my,then:fy,catch:uy,value:1,error:2,blocks:[,,,]};return vr(Gi(()=>import("./RemoteAgentSetup-D4Tft-uG.js"),__vite__mapDeps([5,1,2,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,3,31,32,33,34,35,36,37,38,39,40,41,42,43,0,4,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73]),import.meta.url),e),{c(){t=mt(),e.block.c()},m(o,r){x(o,t,r),e.block.m(o,e.anchor=r),e.mount=()=>t.parentNode,e.anchor=t,n=!0},p(o,[r]){i=o},i(o){n||(d(e.block),n=!0)},o(o){for(let r=0;r<3;r+=1){const s=e.blocks[r];$(s)}n=!1},d(o){o&&b(t),e.block.d(o),e.token=null,e=null}}}class hy extends ut{constructor(t){super(),dt(this,t,null,gy,ct,{})}}function vy(i){let t,n,e,o,r;return{c(){t=G("Error loading message list: "),n=G(i[0]),e=U(),o=L("br"),r=G(`
    Please consider restarting your extension.`)},m(s,c){x(s,t,c),x(s,n,c),x(s,e,c),x(s,o,c),x(s,r,c)},p(s,c){1&c&&_t(n,s[0])},d(s){s&&(b(t),b(n),b(e),b(o),b(r))}}}function wy(i){let t,n;return t=new Wn({props:{slot:"icon"}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p:P,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function yy(i){let t,n,e;return n=new Zn({props:{variant:"soft",color:"error",$$slots:{icon:[wy],default:[vy]},$$scope:{ctx:i}}}),{c(){t=L("div"),v(n.$$.fragment),A(t,"class","l-error-message svelte-1w3i40p")},m(o,r){x(o,t,r),w(n,t,null),e=!0},p(o,[r]){const s={};3&r&&(s.$$scope={dirty:r,ctx:o}),n.$set(s)},i(o){e||(d(n.$$.fragment,o),e=!0)},o(o){$(n.$$.fragment,o),e=!1},d(o){o&&b(t),y(n)}}}function by(i,t,n){let{errorMessage:e}=t;return i.$$set=o=>{"errorMessage"in o&&n(0,e=o.errorMessage)},[e]}class Qf extends ut{constructor(t){super(),dt(this,t,by,yy,ct,{errorMessage:0})}}function xy(i){let t,n,e={ctx:i,current:null,token:null,hasCatch:!0,pending:Sy,then:Ay,catch:Cy,value:17,error:18,blocks:[,,,]};return vr(Gi(()=>import("./MessageList-BR5DdrAJ.js"),__vite__mapDeps([74,1,2,10,11,75,29,30,9,12,13,14,15,16,17,8,3,24,25,31,32,27,67,68,66,71,76,6,7,23,21,26,28,33,34,35,36,37,38,39,40,41,42,43,0,4,44,45,60,63,64,19,20,46,22,47,65,77,78,79,80,81,61,62,82,83,48,49,52,84,50,51,53,85,56,57,18,86,58,59,54,55,69,70,72,87]),import.meta.url),e),{c(){t=mt(),e.block.c()},m(o,r){x(o,t,r),e.block.m(o,e.anchor=r),e.mount=()=>t.parentNode,e.anchor=t,n=!0},p(o,r){Vi(e,i=o,r)},i(o){n||(d(e.block),n=!0)},o(o){for(let r=0;r<3;r+=1){const s=e.blocks[r];$(s)}n=!1},d(o){o&&b(t),e.block.d(o),e.token=null,e=null}}}function _y(i){let t,n,e={ctx:i,current:null,token:null,hasCatch:!0,pending:Ny,then:Ly,catch:Iy,value:17,error:18,blocks:[,,,]};return vr(Gi(()=>import("./VirtualizedMessageList-rgJZuMFQ.js"),__vite__mapDeps([88,1,2,10,11,75,29,30,9,12,13,14,15,16,17,8,3,24,25,31,32,27,67,68,66,71,76,6,7,23,21,26,28,33,34,35,36,37,38,39,40,41,42,43,0,4,44,45,60,63,64,19,20,46,22,47,65,77,78,79,80,81,61,62,82,83,48,49,52,84,50,51,53,85,56,57,18,86,58,59,54,55,69,70,72,89]),import.meta.url),e),{c(){t=mt(),e.block.c()},m(o,r){x(o,t,r),e.block.m(o,e.anchor=r),e.mount=()=>t.parentNode,e.anchor=t,n=!0},p(o,r){Vi(e,i=o,r)},i(o){n||(d(e.block),n=!0)},o(o){for(let r=0;r<3;r+=1){const s=e.blocks[r];$(s)}n=!1},d(o){o&&b(t),e.block.d(o),e.token=null,e=null}}}function Cy(i){let t,n,e;return n=new Qf({props:{errorMessage:i[18].message}}),{c(){t=L("div"),v(n.$$.fragment),A(t,"class","l-center-contents svelte-mlzu3y"),A(t,"data-testid","l-lazy-message-list-loading-error")},m(o,r){x(o,t,r),w(n,t,null),e=!0},p:P,i(o){e||(d(n.$$.fragment,o),e=!0)},o(o){$(n.$$.fragment,o),e=!1},d(o){o&&b(t),y(n)}}}function Ay(i){let t,n,e=i[3],o=Ll(i);return{c(){o.c(),t=mt()},m(r,s){o.m(r,s),x(r,t,s),n=!0},p(r,s){8&s&&ct(e,e=r[3])?(j(),$(o,1,1,P),q(),o=Ll(r),o.c(),d(o,1),o.m(t.parentNode,t)):o.p(r,s)},i(r){n||(d(o),n=!0)},o(r){$(o),n=!1},d(r){r&&b(t),o.d(r)}}}function My(i){let t,n,e;const o=[{chatModel:i[0]},{onboardingWorkspaceModel:i[1]},i[8]];var r=i[17].default;function s(c,a){let l={};for(let u=0;u<o.length;u+=1)l=kt(l,o[u]);return a!==void 0&&259&a&&(l=kt(l,Se(o,[1&a&&{chatModel:c[0]},2&a&&{onboardingWorkspaceModel:c[1]},256&a&&fo(c[8])]))),{props:l}}return r&&(t=on(r,s(i))),{c(){t&&v(t.$$.fragment),n=mt()},m(c,a){t&&w(t,c,a),x(c,n,a),e=!0},p(c,a){if(r!==(r=c[17].default)){if(t){j();const l=t;$(l.$$.fragment,1,0,()=>{y(l,1)}),q()}r?(t=on(r,s(c,a)),v(t.$$.fragment),d(t.$$.fragment,1),w(t,n.parentNode,n)):t=null}else if(r){const l=259&a?Se(o,[1&a&&{chatModel:c[0]},2&a&&{onboardingWorkspaceModel:c[1]},256&a&&fo(c[8])]):{};t.$set(l)}},i(c){e||(t&&d(t.$$.fragment,c),e=!0)},o(c){t&&$(t.$$.fragment,c),e=!1},d(c){c&&b(n),t&&y(t,c)}}}function ky(i){let t;return{c(){t=L("div"),A(t,"class","l-center-contents svelte-mlzu3y"),A(t,"data-testid","l-lazy-message-list-center-contents")},m(n,e){x(n,t,e)},p:P,i:P,o:P,d(n){n&&b(t)}}}function Ll(i){let t,n,e,o;const r=[ky,My],s=[];function c(a,l){return a[5]?0:1}return t=c(i),n=s[t]=r[t](i),{c(){n.c(),e=mt()},m(a,l){s[t].m(a,l),x(a,e,l),o=!0},p(a,l){let u=t;t=c(a),t===u?s[t].p(a,l):(j(),$(s[u],1,1,()=>{s[u]=null}),q(),n=s[t],n?n.p(a,l):(n=s[t]=r[t](a),n.c()),d(n,1),n.m(e.parentNode,e))},i(a){o||(d(n),o=!0)},o(a){$(n),o=!1},d(a){a&&b(e),s[t].d(a)}}}function Sy(i){let t,n=i[3],e=Rl(i);return{c(){e.c(),t=mt()},m(o,r){e.m(o,r),x(o,t,r)},p(o,r){8&r&&ct(n,n=o[3])?(e.d(1),e=Rl(o),e.c(),e.m(t.parentNode,t)):e.p(o,r)},i:P,o:P,d(o){o&&b(t),e.d(o)}}}function Ty(i){let t;return{c(){t=L("div"),t.textContent="Loading...",A(t,"class","l-center-contents svelte-mlzu3y")},m(n,e){x(n,t,e)},d(n){n&&b(t)}}}function Ey(i){let t;return{c(){t=L("div"),A(t,"class","l-center-contents svelte-mlzu3y")},m(n,e){x(n,t,e)},d(n){n&&b(t)}}}function Rl(i){let t;function n(r,s){return r[5]?Ey:Ty}let e=n(i),o=e(i);return{c(){o.c(),t=mt()},m(r,s){o.m(r,s),x(r,t,s)},p(r,s){e!==(e=n(r))&&(o.d(1),o=e(r),o&&(o.c(),o.m(t.parentNode,t)))},d(r){r&&b(t),o.d(r)}}}function Iy(i){let t,n,e;return n=new Qf({props:{errorMessage:i[18].message}}),{c(){t=L("div"),v(n.$$.fragment),A(t,"class","l-center-contents svelte-mlzu3y"),A(t,"data-testid","l-lazy-message-list-loading-error")},m(o,r){x(o,t,r),w(n,t,null),e=!0},p:P,i(o){e||(d(n.$$.fragment,o),e=!0)},o(o){$(n.$$.fragment,o),e=!1},d(o){o&&b(t),y(n)}}}function Ly(i){let t,n,e=i[3],o=Dl(i);return{c(){o.c(),t=mt()},m(r,s){o.m(r,s),x(r,t,s),n=!0},p(r,s){8&s&&ct(e,e=r[3])?(j(),$(o,1,1,P),q(),o=Dl(r),o.c(),d(o,1),o.m(t.parentNode,t)):o.p(r,s)},i(r){n||(d(o),n=!0)},o(r){$(o),n=!1},d(r){r&&b(t),o.d(r)}}}function Ry(i){let t,n,e;const o=[{chatModel:i[0]},{onboardingWorkspaceModel:i[1]},i[8]];var r=i[17].default;function s(c,a){let l={};for(let u=0;u<o.length;u+=1)l=kt(l,o[u]);return a!==void 0&&259&a&&(l=kt(l,Se(o,[1&a&&{chatModel:c[0]},2&a&&{onboardingWorkspaceModel:c[1]},256&a&&fo(c[8])]))),{props:l}}return r&&(t=on(r,s(i))),{c(){t&&v(t.$$.fragment),n=mt()},m(c,a){t&&w(t,c,a),x(c,n,a),e=!0},p(c,a){if(r!==(r=c[17].default)){if(t){j();const l=t;$(l.$$.fragment,1,0,()=>{y(l,1)}),q()}r?(t=on(r,s(c,a)),v(t.$$.fragment),d(t.$$.fragment,1),w(t,n.parentNode,n)):t=null}else if(r){const l=259&a?Se(o,[1&a&&{chatModel:c[0]},2&a&&{onboardingWorkspaceModel:c[1]},256&a&&fo(c[8])]):{};t.$set(l)}},i(c){e||(t&&d(t.$$.fragment,c),e=!0)},o(c){t&&$(t.$$.fragment,c),e=!1},d(c){c&&b(n),t&&y(t,c)}}}function Dy(i){let t;return{c(){t=L("div"),A(t,"class","l-center-contents svelte-mlzu3y"),A(t,"data-testid","l-lazy-message-list-center-contents")},m(n,e){x(n,t,e)},p:P,i:P,o:P,d(n){n&&b(t)}}}function Dl(i){let t,n,e,o;const r=[Dy,Ry],s=[];function c(a,l){return a[5]?0:1}return t=c(i),n=s[t]=r[t](i),{c(){n.c(),e=mt()},m(a,l){s[t].m(a,l),x(a,e,l),o=!0},p(a,l){let u=t;t=c(a),t===u?s[t].p(a,l):(j(),$(s[u],1,1,()=>{s[u]=null}),q(),n=s[t],n?n.p(a,l):(n=s[t]=r[t](a),n.c()),d(n,1),n.m(e.parentNode,e))},i(a){o||(d(n),o=!0)},o(a){$(n),o=!1},d(a){a&&b(e),s[t].d(a)}}}function Ny(i){let t,n=i[3],e=Nl(i);return{c(){e.c(),t=mt()},m(o,r){e.m(o,r),x(o,t,r)},p(o,r){8&r&&ct(n,n=o[3])?(e.d(1),e=Nl(o),e.c(),e.m(t.parentNode,t)):e.p(o,r)},i:P,o:P,d(o){o&&b(t),e.d(o)}}}function Py(i){let t;return{c(){t=L("div"),t.textContent="Loading...",A(t,"class","l-center-contents svelte-mlzu3y")},m(n,e){x(n,t,e)},d(n){n&&b(t)}}}function Fy(i){let t;return{c(){t=L("div"),A(t,"class","l-center-contents svelte-mlzu3y")},m(n,e){x(n,t,e)},d(n){n&&b(t)}}}function Nl(i){let t;function n(r,s){return r[5]?Fy:Py}let e=n(i),o=e(i);return{c(){o.c(),t=mt()},m(r,s){o.m(r,s),x(r,t,s)},p(r,s){e!==(e=n(r))&&(o.d(1),o=e(r),o&&(o.c(),o.m(t.parentNode,t)))},d(r){r&&b(t),o.d(r)}}}function Oy(i){let t,n,e,o;const r=[_y,xy],s=[];function c(a,l){return a[4]?0:1}return t=c(i),n=s[t]=r[t](i),{c(){n.c(),e=mt()},m(a,l){s[t].m(a,l),x(a,e,l),o=!0},p(a,[l]){let u=t;t=c(a),t===u?s[t].p(a,l):(j(),$(s[u],1,1,()=>{s[u]=null}),q(),n=s[t],n?n.p(a,l):(n=s[t]=r[t](a),n.c()),d(n,1),n.m(e.parentNode,e))},i(a){o||(d(n),o=!0)},o(a){$(n),o=!1},d(a){a&&b(e),s[t].d(a)}}}function zy(i,t,n){let e,o,r,s,c,a,l,u,f;const m=["chatModel","onboardingWorkspaceModel","remoteAgentsModel"];let p,_,M,C,T=mr(t,m),E=P,R=P,N=P,Z=()=>(N(),N=ce(Y,V=>n(15,M=V)),Y),Q=P,X=()=>(Q(),Q=ce(K,V=>n(16,C=V)),K);i.$$.on_destroy.push(()=>E()),i.$$.on_destroy.push(()=>R()),i.$$.on_destroy.push(()=>N()),i.$$.on_destroy.push(()=>Q());let{chatModel:K}=t;X();let{onboardingWorkspaceModel:H}=t,{remoteAgentsModel:Y}=t;return Z(),i.$$set=V=>{t=kt(kt({},t),le(V)),n(8,T=mr(t,m)),"chatModel"in V&&X(n(0,K=V.chatModel)),"onboardingWorkspaceModel"in V&&n(1,H=V.onboardingWorkspaceModel),"remoteAgentsModel"in V&&Z(n(2,Y=V.remoteAgentsModel))},i.$$.update=()=>{var V,J;65536&i.$$.dirty&&(n(7,e=C.currentConversationModel),E(),E=ce(e,rt=>n(13,p=rt))),65536&i.$$.dirty&&(n(6,o=C.flags),R(),R=ce(o,rt=>n(14,_=rt))),32768&i.$$.dirty&&n(9,r=M.currentAgentId),32768&i.$$.dirty&&n(10,s=M.isActive),33792&i.$$.dirty&&n(12,c=s&&((V=M.getCurrentChatHistory())==null?void 0:V.length)),33792&i.$$.dirty&&n(11,a=s&&((J=M.agentSetupLogs)==null?void 0:J.steps.length)!==0),15360&i.$$.dirty&&n(5,l=s?!c&&!a:p.chatHistory.length===0),17408&i.$$.dirty&&n(4,u=_.enableVirtualizedMessageList&&!s),9728&i.$$.dirty&&n(3,f=`${p.id}-${s?r:""}`)},[K,H,Y,f,u,l,o,e,T,r,s,a,c,p,_,M,C]}class By extends ut{constructor(t){super(),dt(this,t,zy,Oy,ct,{chatModel:0,onboardingWorkspaceModel:1,remoteAgentsModel:2})}}function Uy(i){let t,n,e;return n=new hy({}),{c(){t=L("div"),v(n.$$.fragment),A(t,"class","l-center-contents")},m(o,r){x(o,t,r),w(n,t,null),e=!0},p:P,i(o){e||(d(n.$$.fragment,o),e=!0)},o(o){$(n.$$.fragment,o),e=!1},d(o){o&&b(t),y(n)}}}function Hy(i){let t,n;return t=new By({props:{chatModel:i[0],onboardingWorkspaceModel:i[1],remoteAgentsModel:i[2]}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};1&o&&(r.chatModel=e[0]),2&o&&(r.onboardingWorkspaceModel=e[1]),4&o&&(r.remoteAgentsModel=e[2]),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function jy(i){let t,n,e,o;const r=[Hy,Uy],s=[];function c(a,l){return a[4]?0:a[3]?1:-1}return~(t=c(i))&&(n=s[t]=r[t](i)),{c(){n&&n.c(),e=mt()},m(a,l){~t&&s[t].m(a,l),x(a,e,l),o=!0},p(a,[l]){let u=t;t=c(a),t===u?~t&&s[t].p(a,l):(n&&(j(),$(s[u],1,1,()=>{s[u]=null}),q()),~t?(n=s[t],n?n.p(a,l):(n=s[t]=r[t](a),n.c()),d(n,1),n.m(e.parentNode,e)):n=null)},i(a){o||(d(n),o=!0)},o(a){$(n),o=!1},d(a){a&&b(e),~t&&s[t].d(a)}}}function qy(i,t,n){let e,o,r,s=P,c=()=>(s(),s=ce(u,f=>n(5,r=f)),u);i.$$.on_destroy.push(()=>s());let{chatModel:a}=t,{onboardingWorkspaceModel:l}=t,{remoteAgentsModel:u}=t;return c(),i.$$set=f=>{"chatModel"in f&&n(0,a=f.chatModel),"onboardingWorkspaceModel"in f&&n(1,l=f.onboardingWorkspaceModel),"remoteAgentsModel"in f&&c(n(2,u=f.remoteAgentsModel))},i.$$.update=()=>{32&i.$$.dirty&&n(3,e=r.isActive&&!r.currentAgentId),8&i.$$.dirty&&n(4,o=!e)},[a,l,u,e,o,r]}class Wy extends ut{constructor(t){super(),dt(this,t,qy,jy,ct,{chatModel:0,onboardingWorkspaceModel:1,remoteAgentsModel:2})}}function Vy(i){let t,n,e,o;return{c(){t=U(),n=L("div"),n.innerHTML='<div class="c-chat-input-dialog-hr svelte-p70shz"></div>',A(n,"class","c-chat-input-dialog-hr-handle svelte-p70shz"),A(n,"role","separator")},m(r,s){x(r,t,s),x(r,n,s),e||(o=[Lt(document,"mousemove",i[1]),Lt(document,"mouseup",i[2]),Lt(n,"mousedown",i[0])],e=!0)},p:P,i:P,o:P,d(r){r&&(b(t),b(n)),e=!1,Qe(o)}}}function Gy(i,t,n){let{inputArea:e}=t;const o=q$();let r;return i.$$set=s=>{"inputArea"in s&&n(3,e=s.inputArea)},[s=>{r={startY:s.clientY,initialHeight:e.offsetHeight},e==null||e.classList.add("is-dragging")},s=>{if(!r)return;const c=s.clientY-r.startY;n(3,e.style.height=`${Math.max(80,r.initialHeight-c)}px`,e)},()=>{r&&(o("dragEnd"),r=void 0,e==null||e.classList.remove("is-dragging"))},e]}class Yy extends ut{constructor(t){super(),dt(this,t,Gy,Vy,ct,{inputArea:3})}}function Ky(i){let t,n,e=[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 512 512"},i[0]],o={};for(let r=0;r<e.length;r+=1)o=kt(o,e[r]);return{c(){t=ie("svg"),n=new rn(!0),this.h()},l(r){t=sn(r,"svg",{xmlns:!0,"data-ds-icon":!0,viewBox:!0});var s=an(t);n=cn(s,!0),s.forEach(b),this.h()},h(){n.a=null,$e(t,o)},m(r,s){ln(r,t,s),n.m('<!--! Font Awesome Pro 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2024 Fonticons, Inc.--><path d="M224 80v352h224c8.8 0 16-7.2 16-16V96c0-8.8-7.2-16-16-16zM0 96c0-35.3 28.7-64 64-64h384c35.3 0 64 28.7 64 64v320c0 35.3-28.7 64-64 64H64c-35.3 0-64-28.7-64-64zm64 24c0 13.3 10.7 24 24 24h48c13.3 0 24-10.7 24-24s-10.7-24-24-24H88c-13.3 0-24 10.7-24 24m24 72c-13.3 0-24 10.7-24 24s10.7 24 24 24h48c13.3 0 24-10.7 24-24s-10.7-24-24-24zM64 312c0 13.3 10.7 24 24 24h48c13.3 0 24-10.7 24-24s-10.7-24-24-24H88c-13.3 0-24 10.7-24 24"/>',t)},p(r,[s]){$e(t,o=Se(e,[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 512 512"},1&s&&r[0]]))},i:P,o:P,d(r){r&&b(t)}}}function Xy(i,t,n){return i.$$set=e=>{n(0,t=kt(kt({},t),le(e)))},[t=le(t)]}class Jy extends ut{constructor(t){super(),dt(this,t,Xy,Ky,ct,{})}}function Pl(i,t,n=200){return e=>function(o,r){const{onClose:s,isActive:c,threshold:a=200,resetTimeout:l=150}=r;let u,f=0,m=!1,p=!1,_={isTracking:!1,startedAtTop:!1,initialScrollTop:0,overscrollAmount:0};const M=E=>{if(!c())return;const{scrollTop:R}=o;return m||(m=!0,p=R===0,f=0,_={isTracking:p,startedAtTop:p,initialScrollTop:R,overscrollAmount:0}),p&&R===0&&E.deltaY<0&&(f+=Math.abs(E.deltaY),_.overscrollAmount=f,f>=a)?(s(),void C()):p&&R>0?(clearTimeout(u),void(u=setTimeout(()=>{C()},l))):void(p&&E.deltaY>0?C():Math.abs(E.deltaY)<7||(clearTimeout(u),u=setTimeout(()=>{C()},l)))},C=()=>{m=!1,p=!1,f=0,clearTimeout(u),_={isTracking:!1,startedAtTop:!1,initialScrollTop:0,overscrollAmount:0}},T=()=>{m&&p&&o.scrollTop>10&&C()};return o.addEventListener("wheel",M,{passive:!0}),o.addEventListener("scroll",T,{passive:!0}),{destroy(){o.removeEventListener("wheel",M),o.removeEventListener("scroll",T),clearTimeout(u)},update(E){Object.assign(r,E)}}}(e,{onClose:i,isActive:t,threshold:n})}const Zy=i=>({}),Fl=i=>({}),Qy=i=>({}),Ol=i=>({}),t6=i=>({}),zl=i=>({});function e6(i){let t;return{c(){t=G(i[2])},m(n,e){x(n,t,e)},p(n,e){4&e&&_t(t,n[2])},d(n){n&&b(t)}}}function Bl(i){let t,n;const e=i[4]["sort-options"],o=Yt(e,i,i[8],Ol);return{c(){t=L("div"),o&&o.c(),A(t,"class","l-threads-menu__sort-options svelte-k6qn47")},m(r,s){x(r,t,s),o&&o.m(t,null),n=!0},p(r,s){o&&o.p&&(!n||256&s)&&Kt(o,e,r,r[8],n?Jt(e,r[8],s,Qy):Xt(r[8]),Ol)},i(r){n||(d(o,r),n=!0)},o(r){$(o,r),n=!1},d(r){r&&b(t),o&&o.d(r)}}}function Ul(i){let t,n;const e=i[4].body,o=Yt(e,i,i[8],Fl);return{c(){t=L("div"),o&&o.c(),A(t,"class","l-threads-menu__body svelte-k6qn47")},m(r,s){x(r,t,s),o&&o.m(t,null),n=!0},p(r,s){o&&o.p&&(!n||256&s)&&Kt(o,e,r,r[8],n?Jt(e,r[8],s,Zy):Xt(r[8]),Fl)},i(r){n||(d(o,r),n=!0)},o(r){$(o,r),n=!1},d(r){r&&b(t),o&&o.d(r)}}}function n6(i){let t,n,e,o,r,s,c,a,l,u,f,m,p,_;s=new Gt({props:{size:1,weight:"regular",$$slots:{default:[e6]},$$scope:{ctx:i}}});const M=i[4].buttons,C=Yt(M,i,i[8],zl);let T=i[1]&&Bl(i),E=i[1]&&Ul(i);return{c(){t=L("div"),n=L("div"),e=L("div"),o=L("div"),r=L("div"),v(s.$$.fragment),c=U(),a=L("div"),C&&C.c(),l=U(),T&&T.c(),u=U(),E&&E.c(),A(r,"class","l-threads-menu__title svelte-k6qn47"),A(r,"data-testid","threads-menu-header-title"),A(o,"class","l-threads-menu__header svelte-k6qn47"),A(o,"role","button"),A(o,"tabindex","0"),A(o,"data-testid","threads-menu-header"),A(e,"class","l-threads-menu__content svelte-k6qn47"),A(n,"class","l-threads-menu__wrapper svelte-k6qn47"),A(t,"data-testid","threads-menu"),A(t,"class",f=fr(`l-threads-menu ${i[3]}`)+" svelte-k6qn47"),Mt(t,"l-threads-menu--active",i[1])},m(R,N){x(R,t,N),O(t,n),O(n,e),O(e,o),O(o,r),w(s,r,null),O(o,c),O(o,a),C&&C.m(a,null),O(e,l),T&&T.m(e,null),O(e,u),E&&E.m(e,null),i[7](t),m=!0,p||(_=[Lt(o,"click",$r(bi(i[5]))),Lt(o,"keydown",i[6])],p=!0)},p(R,[N]){const Z={};260&N&&(Z.$$scope={dirty:N,ctx:R}),s.$set(Z),C&&C.p&&(!m||256&N)&&Kt(C,M,R,R[8],m?Jt(M,R[8],N,t6):Xt(R[8]),zl),R[1]?T?(T.p(R,N),2&N&&d(T,1)):(T=Bl(R),T.c(),d(T,1),T.m(e,u)):T&&(j(),$(T,1,1,()=>{T=null}),q()),R[1]?E?(E.p(R,N),2&N&&d(E,1)):(E=Ul(R),E.c(),d(E,1),E.m(e,null)):E&&(j(),$(E,1,1,()=>{E=null}),q()),(!m||8&N&&f!==(f=fr(`l-threads-menu ${R[3]}`)+" svelte-k6qn47"))&&A(t,"class",f),(!m||10&N)&&Mt(t,"l-threads-menu--active",R[1])},i(R){m||(d(s.$$.fragment,R),d(C,R),d(T),d(E),m=!0)},o(R){$(s.$$.fragment,R),$(C,R),$(T),$(E),m=!1},d(R){R&&b(t),y(s),C&&C.d(R),T&&T.d(),E&&E.d(),i[7](null),p=!1,Qe(_)}}}function o6(i,t,n){let{$$slots:e={},$$scope:o}=t,{active:r=!1}=t,{element:s}=t,{title:c=""}=t,{class:a=""}=t;return i.$$set=l=>{"active"in l&&n(1,r=l.active),"element"in l&&n(0,s=l.element),"title"in l&&n(2,c=l.title),"class"in l&&n(3,a=l.class),"$$scope"in l&&n(8,o=l.$$scope)},[s,r,c,a,e,function(l){vn.call(this,i,l)},function(l){vn.call(this,i,l)},function(l){te[l?"unshift":"push"](()=>{s=l,n(0,s)})},o]}class r6 extends ut{constructor(t){super(),dt(this,t,o6,n6,ct,{active:1,element:0,title:2,class:3})}}const i6=i=>({}),Hl=i=>({}),s6=i=>({}),jl=i=>({});function a6(i){let t,n;const e=i[2].title,o=Yt(e,i,i[6],jl);return{c(){t=L("div"),o&&o.c(),A(t,"class","l-thread-menu-item__title svelte-1iwlval")},m(r,s){x(r,t,s),o&&o.m(t,null),n=!0},p(r,s){o&&o.p&&(!n||64&s)&&Kt(o,e,r,r[6],n?Jt(e,r[6],s,s6):Xt(r[6]),jl)},i(r){n||(d(o,r),n=!0)},o(r){$(o,r),n=!1},d(r){r&&b(t),o&&o.d(r)}}}function c6(i){let t,n,e,o,r,s,c;n=new Gt({props:{size:1,weight:"regular",$$slots:{default:[a6]},$$scope:{ctx:i}}});const a=i[2].right,l=Yt(a,i,i[6],Hl);return{c(){t=L("div"),v(n.$$.fragment),e=U(),o=L("div"),l&&l.c(),A(o,"class","l-thread-menu-item__right svelte-1iwlval"),A(t,"class","l-thread-menu-item svelte-1iwlval"),A(t,"data-testid","thread-menu-item"),A(t,"role","button"),A(t,"tabindex","0"),Mt(t,"l-thread-menu-item--selected",i[0]&&i[1]),Mt(t,"l-thread-menu-item--selectable",i[1])},m(u,f){x(u,t,f),w(n,t,null),O(t,e),O(t,o),l&&l.m(o,null),r=!0,s||(c=[Lt(t,"click",i[3]),Lt(t,"mousedown",i[4]),Lt(t,"keydown",i[5])],s=!0)},p(u,[f]){const m={};64&f&&(m.$$scope={dirty:f,ctx:u}),n.$set(m),l&&l.p&&(!r||64&f)&&Kt(l,a,u,u[6],r?Jt(a,u[6],f,i6):Xt(u[6]),Hl),(!r||3&f)&&Mt(t,"l-thread-menu-item--selected",u[0]&&u[1]),(!r||2&f)&&Mt(t,"l-thread-menu-item--selectable",u[1])},i(u){r||(d(n.$$.fragment,u),d(l,u),r=!0)},o(u){$(n.$$.fragment,u),$(l,u),r=!1},d(u){u&&b(t),y(n),l&&l.d(u),s=!1,Qe(c)}}}function l6(i,t,n){let{$$slots:e={},$$scope:o}=t,{selected:r=!1}=t,{isSelectable:s=!1}=t;return i.$$set=c=>{"selected"in c&&n(0,r=c.selected),"isSelectable"in c&&n(1,s=c.isSelectable),"$$scope"in c&&n(6,o=c.$$scope)},[r,s,e,function(c){vn.call(this,i,c)},function(c){vn.call(this,i,c)},function(c){vn.call(this,i,c)},o]}class tm extends ut{constructor(t){super(),dt(this,t,l6,c6,ct,{selected:0,isSelectable:1})}}function u6(i){let t,n,e,o;return{c(){t=L("div"),n=G(i[1]),A(t,"class","c-editable-text__text svelte-1kpc8s8"),A(t,"role","button"),A(t,"tabindex","0"),Mt(t,"c-editable-text--disabled",i[3])},m(r,s){x(r,t,s),O(t,n),e||(o=Lt(t,"dblclick",i[4]),e=!0)},p(r,s){2&s&&_t(n,r[1]),8&s&&Mt(t,"c-editable-text--disabled",r[3])},i:P,o:P,d(r){r&&b(t),e=!1,o()}}}function d6(i){let t,n,e,o;function r(a){i[15](a)}function s(a){i[16](a)}let c={size:1,variant:"surface",placeholder:i[2]};return i[5]!==void 0&&(c.textInput=i[5]),i[6]!==void 0&&(c.value=i[6]),t=new nr({props:c}),te.push(()=>Te(t,"textInput",r)),te.push(()=>Te(t,"value",s)),t.$on("click",f6),t.$on("keydown",i[7]),{c(){v(t.$$.fragment)},m(a,l){w(t,a,l),o=!0},p(a,l){const u={};4&l&&(u.placeholder=a[2]),!n&&32&l&&(n=!0,u.textInput=a[5],Re(()=>n=!1)),!e&&64&l&&(e=!0,u.value=a[6],Re(()=>e=!1)),t.$set(u)},i(a){o||(d(t.$$.fragment,a),o=!0)},o(a){$(t.$$.fragment,a),o=!1},d(a){y(t,a)}}}function $6(i){let t,n,e,o,r,s,c;const a=[d6,u6],l=[];function u(f,m){return!f[3]&&f[0]?0:1}return n=u(i),e=l[n]=a[n](i),{c(){t=U(),e.c(),o=mt()},m(f,m){x(f,t,m),l[n].m(f,m),x(f,o,m),r=!0,s||(c=Lt(document.body,"click",i[8]),s=!0)},p(f,[m]){let p=n;n=u(f),n===p?l[n].p(f,m):(j(),$(l[p],1,1,()=>{l[p]=null}),q(),e=l[n],e?e.p(f,m):(e=l[n]=a[n](f),e.c()),d(e,1),e.m(o.parentNode,o))},i(f){r||(d(e),r=!0)},o(f){$(e),r=!1},d(f){f&&(b(t),b(o)),l[n].d(f),s=!1,c()}}}const f6=i=>i.stopPropagation();function m6(i,t,n){let e,{isEditing:o=!1}=t,{value:r}=t,{cancelOnClickOutside:s=!0}=t,{placeholder:c=""}=t,{disabled:a=!1}=t,{onStartEdit:l}=t,{onAcceptEdit:u}=t,{onCancelEdit:f}=t,m=r;function p(M){o&&(u(m),n(0,o=!1),n(6,m=""),M==null||M.stopPropagation())}function _(M){o&&s&&(f(),n(0,o=!1),n(6,m=""),M==null||M.stopPropagation())}return i.$$set=M=>{"isEditing"in M&&n(0,o=M.isEditing),"value"in M&&n(1,r=M.value),"cancelOnClickOutside"in M&&n(9,s=M.cancelOnClickOutside),"placeholder"in M&&n(2,c=M.placeholder),"disabled"in M&&n(3,a=M.disabled),"onStartEdit"in M&&n(10,l=M.onStartEdit),"onAcceptEdit"in M&&n(11,u=M.onAcceptEdit),"onCancelEdit"in M&&n(12,f=M.onCancelEdit)},i.$$.update=()=>{32&i.$$.dirty&&(e==null||e.focus())},[o,r,c,a,function(M){o||a||(n(6,m=r),n(0,o=!0),l(),M==null||M.stopPropagation())},e,m,function(M){o&&(M.key==="Enter"?p(M):M.key==="Escape"&&_(M))},function(M){const C=M.target;C&&C.closest(`.${em}`)||_(M)},s,l,u,f,p,_,function(M){e=M,n(5,e)},function(M){m=M,n(6,m)}]}class p6 extends ut{constructor(t){super(),dt(this,t,m6,$6,ct,{isEditing:0,value:1,cancelOnClickOutside:9,placeholder:2,disabled:3,onStartEdit:10,onAcceptEdit:11,onCancelEdit:12,startEdit:4,acceptEdit:13,cancelEdit:14})}get startEdit(){return this.$$.ctx[4]}get acceptEdit(){return this.$$.ctx[13]}get cancelEdit(){return this.$$.ctx[14]}}function g6(i){let t,n;return{c(){t=ie("svg"),n=ie("path"),A(n,"fill-rule","evenodd"),A(n,"clip-rule","evenodd"),A(n,"d","M6 3.5C6 2.67157 6.67157 2 7.5 2C8.32843 2 9 2.67157 9 3.5C9 4.32843 8.32843 5 7.5 5C6.67157 5 6 4.32843 6 3.5ZM8 5.94999C9.14112 5.71836 10 4.70948 10 3.5C10 2.11929 8.88071 1 7.5 1C6.11929 1 5 2.11929 5 3.5C5 4.70948 5.85888 5.71836 7 5.94999V13.5C7 13.7761 7.22386 14 7.5 14C7.77614 14 8 13.7761 8 13.5V5.94999Z"),A(n,"fill","currentColor"),A(t,"width","15"),A(t,"height","15"),A(t,"viewBox","0 0 15 15"),A(t,"fill","none"),A(t,"xmlns","http://www.w3.org/2000/svg")},m(e,o){x(e,t,o),O(t,n)},p:P,i:P,o:P,d(e){e&&b(t)}}}class h6 extends ut{constructor(t){super(),dt(this,t,null,g6,ct,{})}}function v6(i){let t,n;return{c(){t=ie("svg"),n=ie("path"),A(n,"fill-rule","evenodd"),A(n,"clip-rule","evenodd"),A(n,"d","M10 3.5C10 4.70948 9.14112 5.71836 8 5.94999V13.5C8 13.7761 7.77614 14 7.5 14C7.22386 14 7 13.7761 7 13.5V5.94999C5.85888 5.71836 5 4.70948 5 3.5C5 2.11929 6.11929 1 7.5 1C8.88071 1 10 2.11929 10 3.5Z"),A(n,"fill","currentColor"),A(t,"width","15"),A(t,"height","15"),A(t,"viewBox","0 0 15 15"),A(t,"fill","none"),A(t,"xmlns","http://www.w3.org/2000/svg")},m(e,o){x(e,t,o),O(t,n)},p:P,i:P,o:P,d(e){e&&b(t)}}}class w6 extends ut{constructor(t){super(),dt(this,t,null,v6,ct,{})}}function y6(i){let t,n,e=[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 512 512"},i[0]],o={};for(let r=0;r<e.length;r+=1)o=kt(o,e[r]);return{c(){t=ie("svg"),n=new rn(!0),this.h()},l(r){t=sn(r,"svg",{xmlns:!0,"data-ds-icon":!0,viewBox:!0});var s=an(t);n=cn(s,!0),s.forEach(b),this.h()},h(){n.a=null,$e(t,o)},m(r,s){ln(r,t,s),n.m('<!--! Font Awesome Pro 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2024 Fonticons, Inc.--><path d="M280 360c0 13.3-10.7 24-24 24s-24-10.7-24-24V81.9l-95 95c-9.4 9.4-24.6 9.4-33.9 0s-9.4-24.6 0-33.9L239 7c9.4-9.4 24.6-9.4 33.9 0L409 143c9.4 9.4 9.4 24.6 0 33.9s-24.6 9.4-33.9 0l-95-95zm32-8v-48h136c35.3 0 64 28.7 64 64v80c0 35.3-28.7 64-64 64H64c-35.3 0-64-28.7-64-64v-80c0-35.3 28.7-64 64-64h136v48H64c-8.8 0-16 7.2-16 16v80c0 8.8 7.2 16 16 16h384c8.8 0 16-7.2 16-16v-80c0-8.8-7.2-16-16-16zm72 56a24 24 0 1 1 48 0 24 24 0 1 1-48 0"/>',t)},p(r,[s]){$e(t,o=Se(e,[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 512 512"},1&s&&r[0]]))},i:P,o:P,d(r){r&&b(t)}}}function b6(i,t,n){return i.$$set=e=>{n(0,t=kt(kt({},t),le(e)))},[t=le(t)]}class x6 extends ut{constructor(t){super(),dt(this,t,b6,y6,ct,{})}}async function _6(i,t){try{const n=await async function(a,l){const u={id:a.id,name:a.name,createdAtIso:a.createdAtIso,lastInteractedAtIso:a.lastInteractedAtIso,chatHistory:a.chatHistory,feedbackStates:a.feedbackStates,toolUseStates:a.toolUseStates,draftExchange:a.draftExchange,draftActiveContextIds:a.draftActiveContextIds,requestIds:a.requestIds,isPinned:a.isPinned,lastUrl:a.lastUrl,isShareable:a.isShareable,extraData:a.extraData,personaType:a.personaType,rootTaskUuid:a.rootTaskUuid},f={version:"1.0.0",exportedAt:new Date().toISOString(),conversation:u};f.metadata={exportedBy:"Augment Debug Utils",notes:l.notes};const m=l!=null&&l.prettyPrint?2:void 0;return JSON.stringify(f,null,m)}(i,{includeMetadata:(t==null?void 0:t.includeMetadata)??!0,notes:t==null?void 0:t.notes,prettyPrint:(t==null?void 0:t.prettyPrint)??!0}),e=new Blob([n],{type:"application/json"}),o=URL.createObjectURL(e),r=document.createElement("a");r.href=o;const s=(t==null?void 0:t.filename)||i.name||"conversation",c=new Date().toISOString().slice(0,19).replace(/:/g,"-");r.download=`${s}_${c}.json`,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(o)}catch(n){throw console.error("Error downloading conversation as JSON:",n),n}}async function C6(i,t){try{const n=document.createElement("input");n.type="file",n.accept=".json,application/json",n.style.display="none";const e=new Promise(c=>{n.onchange=()=>{c(n.files?n.files[0]:null)},n.oncancel=()=>{c(null)}});document.body.appendChild(n),n.click();const o=await e;if(document.body.removeChild(n),!o)return null;const r=await o.text(),s=JSON.parse(r);if(!function(c){if(!c||typeof c!="object")return!1;const a=c;if(typeof a.version!="string"||typeof a.exportedAt!="string"||!a.conversation||typeof a.conversation!="object")return!1;const l=a.conversation;return typeof l.id=="string"&&typeof l.createdAtIso=="string"&&typeof l.lastInteractedAtIso=="string"&&!!Array.isArray(l.chatHistory)&&!(!l.feedbackStates||typeof l.feedbackStates!="object")&&!!Array.isArray(l.requestIds)}(s))throw new Error("Invalid conversation export file format");return await async function(c,a,l){const{conversation:u}=c,f={...u,id:(l==null?void 0:l.generateNewId)!==!1?crypto.randomUUID():u.id,name:l!=null&&l.namePrefix?`${l.namePrefix}${u.name||"Imported Conversation"}`:u.name,lastInteractedAtIso:new Date().toISOString()};l!=null&&l.markAsImported&&(f.extraData={...f.extraData,isImported:!0,importedAt:new Date().toISOString(),originalExportVersion:c.version});try{return a.saveConversation(f),f.id}catch(m){throw console.error("Error creating imported conversation:",m),new Error(`Failed to import conversation: ${m}`)}}(s,i,{generateNewId:(t==null?void 0:t.generateNewId)??!0,namePrefix:(t==null?void 0:t.namePrefix)??"[Imported] ",markAsImported:(t==null?void 0:t.markAsImported)??!0})}catch(n){throw console.error("Error importing conversation from file:",n),n}}const A6=i=>({}),ql=i=>({});function Wl(i){let t,n,e,o;const r=[k6,M6],s=[];function c(a,l){return a[8]?0:1}return t=c(i),n=s[t]=r[t](i),{c(){n.c(),e=mt()},m(a,l){s[t].m(a,l),x(a,e,l),o=!0},p(a,l){let u=t;t=c(a),t!==u&&(j(),$(s[u],1,1,()=>{s[u]=null}),q(),n=s[t],n||(n=s[t]=r[t](a),n.c()),d(n,1),n.m(e.parentNode,e))},i(a){o||(d(n),o=!0)},o(a){$(n),o=!1},d(a){a&&b(e),s[t].d(a)}}}function M6(i){let t,n;return t=new Ao.Root({props:{color:"accent",size:1,variant:"soft",$$slots:{default:[S6]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function k6(i){let t,n;return t=new Ao.Root({props:{color:"accent",size:1,variant:"solid",highContrast:!0,$$slots:{default:[T6]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function S6(i){let t;return{c(){t=G("Agent")},m(n,e){x(n,t,e)},d(n){n&&b(t)}}}function T6(i){let t;return{c(){t=G("Agent")},m(n,e){x(n,t,e)},d(n){n&&b(t)}}}function E6(i){let t,n,e,o,r,s=mn(i[2]);function c(u){i[29](u)}let a={value:Sn.getDisplayName(i[2]),placeholder:"Conversation name",onAcceptEdit:i[27],onStartEdit:fb,onCancelEdit:mb};i[0]!==void 0&&(a.isEditing=i[0]),n=new p6({props:a}),i[28](n),te.push(()=>Te(n,"isEditing",c));let l=s&&Wl(i);return{c(){t=L("span"),v(n.$$.fragment),o=U(),l&&l.c(),A(t,"class","l-thread-menu-item__title svelte-nvsyjc"),A(t,"data-testid","thread-menu-item-title"),A(t,"slot","title")},m(u,f){x(u,t,f),w(n,t,null),O(t,o),l&&l.m(t,null),r=!0},p(u,f){const m={};4&f[0]&&(m.value=Sn.getDisplayName(u[2])),12&f[0]&&(m.onAcceptEdit=u[27]),!e&&1&f[0]&&(e=!0,m.isEditing=u[0],Re(()=>e=!1)),n.$set(m),4&f[0]&&(s=mn(u[2])),s?l?(l.p(u,f),4&f[0]&&d(l,1)):(l=Wl(u),l.c(),d(l,1),l.m(t,null)):l&&(j(),$(l,1,1,()=>{l=null}),q())},i(u){r||(d(n.$$.fragment,u),d(l),r=!0)},o(u){$(n.$$.fragment,u),$(l),r=!1},d(u){u&&b(t),i[28](null),y(n),l&&l.d()}}}function I6(i){let t,n;return t=new wt.Root({props:{open:i[6],$$slots:{default:[ib]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};64&o[0]&&(r.open=e[6]),5862&o[0]|2&o[1]&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function L6(i){let t,n,e,o;return t=new fe({props:{size:1,variant:"soft",color:"success",title:"Save",$$slots:{default:[sb]},$$scope:{ctx:i}}}),t.$on("click",function(){Ne(i[1].acceptEdit)&&i[1].acceptEdit.apply(this,arguments)}),e=new fe({props:{size:1,variant:"soft",color:"neutral",title:"Cancel",$$slots:{default:[ab]},$$scope:{ctx:i}}}),e.$on("click",function(){Ne(i[1].cancelEdit)&&i[1].cancelEdit.apply(this,arguments)}),{c(){v(t.$$.fragment),n=U(),v(e.$$.fragment)},m(r,s){w(t,r,s),x(r,n,s),w(e,r,s),o=!0},p(r,s){i=r;const c={};2&s[1]&&(c.$$scope={dirty:s,ctx:i}),t.$set(c);const a={};2&s[1]&&(a.$$scope={dirty:s,ctx:i}),e.$set(a)},i(r){o||(d(t.$$.fragment,r),d(e.$$.fragment,r),o=!0)},o(r){$(t.$$.fragment,r),$(e.$$.fragment,r),o=!1},d(r){r&&b(n),y(t,r),y(e,r)}}}function R6(i){let t,n;return t=new or({}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function D6(i){let t,n,e;return n=new fe({props:{variant:"ghost-block",color:"neutral",size:1,title:ub,$$slots:{default:[R6]},$$scope:{ctx:i}}}),n.$on("click",i[18]),{c(){t=L("div"),v(n.$$.fragment),A(t,"class","l-thread-menu-item__options svelte-nvsyjc")},m(o,r){x(o,t,r),w(n,t,null),e=!0},p(o,r){const s={};2&r[1]&&(s.$$scope={dirty:r,ctx:o}),n.$set(s)},i(o){e||(d(n.$$.fragment,o),e=!0)},o(o){$(n.$$.fragment,o),e=!1},d(o){o&&b(t),y(n)}}}function N6(i){let t;return{c(){t=G("Options")},m(n,e){x(n,t,e)},d(n){n&&b(t)}}}function Vl(i){let t,n;return t=new wt.Item({props:{class:"c-thread-menu__share-link",onSelect:i[19],$$slots:{iconLeft:[W6],default:[B6]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};4&o[0]&&(r.onSelect=e[19]),128&o[0]|2&o[1]&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function P6(i){let t;return{c(){t=G("Share link to session")},m(n,e){x(n,t,e)},d(n){n&&b(t)}}}function F6(i){let t;return{c(){t=G("Unable to create link")},m(n,e){x(n,t,e)},d(n){n&&b(t)}}}function O6(i){let t;return{c(){t=G("Link copied")},m(n,e){x(n,t,e)},d(n){n&&b(t)}}}function z6(i){let t;return{c(){t=G("Creating link")},m(n,e){x(n,t,e)},d(n){n&&b(t)}}}function B6(i){let t;function n(r,s){return r[7]==="retrieving"?z6:r[7]==="copied"?O6:r[7]==="failure"?F6:P6}let e=n(i),o=e(i);return{c(){o.c(),t=mt()},m(r,s){o.m(r,s),x(r,t,s)},p(r,s){e!==(e=n(r))&&(o.d(1),o=e(r),o&&(o.c(),o.m(t.parentNode,t)))},d(r){r&&b(t),o.d(r)}}}function U6(i){let t,n;return t=new ji({}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function H6(i){let t,n;return t=new xr({}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function j6(i){let t,n;return t=new To({}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function q6(i){let t,n;return t=new go({props:{size:1}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function W6(i){let t,n,e,o;const r=[q6,j6,H6,U6],s=[];function c(a,l){return a[7]==="retrieving"?0:a[7]==="copied"?1:a[7]==="failure"?2:3}return t=c(i),n=s[t]=r[t](i),{c(){n.c(),e=mt()},m(a,l){s[t].m(a,l),x(a,e,l),o=!0},p(a,l){let u=t;t=c(a),t!==u&&(j(),$(s[u],1,1,()=>{s[u]=null}),q(),n=s[t],n||(n=s[t]=r[t](a),n.c()),d(n,1),n.m(e.parentNode,e))},i(a){o||(d(n),o=!0)},o(a){$(n),o=!1},d(a){a&&b(e),s[t].d(a)}}}function V6(i){let t;return{c(){t=G("Rename")},m(n,e){x(n,t,e)},d(n){n&&b(t)}}}function G6(i){let t,n;return t=new Vr({props:{slot:"iconLeft"}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p:P,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function Y6(i){let t,n=i[2].isPinned?"Unpin":"Pin";return{c(){t=G(n)},m(e,o){x(e,t,o)},p(e,o){4&o[0]&&n!==(n=e[2].isPinned?"Unpin":"Pin")&&_t(t,n)},d(e){e&&b(t)}}}function K6(i){let t,n;return t=new w6({}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function X6(i){let t,n;return t=new h6({}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function J6(i){let t,n,e,o;const r=[X6,K6],s=[];function c(a,l){return a[2].isPinned?0:1}return t=c(i),n=s[t]=r[t](i),{c(){n.c(),e=mt()},m(a,l){s[t].m(a,l),x(a,e,l),o=!0},p(a,l){let u=t;t=c(a),t!==u&&(j(),$(s[u],1,1,()=>{s[u]=null}),q(),n=s[t],n||(n=s[t]=r[t](a),n.c()),d(n,1),n.m(e.parentNode,e))},i(a){o||(d(n),o=!0)},o(a){$(n),o=!1},d(a){a&&b(e),s[t].d(a)}}}function Gl(i){let t,n,e,o;return t=new wt.Item({props:{onSelect:i[22],$$slots:{iconLeft:[Q6],default:[Z6]},$$scope:{ctx:i}}}),e=new wt.Item({props:{onSelect:i[23],$$slots:{iconLeft:[eb],default:[tb]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment),n=U(),v(e.$$.fragment)},m(r,s){w(t,r,s),x(r,n,s),w(e,r,s),o=!0},p(r,s){const c={};64&s[0]&&(c.onSelect=r[22]),2&s[1]&&(c.$$scope={dirty:s,ctx:r}),t.$set(c);const a={};64&s[0]&&(a.onSelect=r[23]),2&s[1]&&(a.$$scope={dirty:s,ctx:r}),e.$set(a)},i(r){o||(d(t.$$.fragment,r),d(e.$$.fragment,r),o=!0)},o(r){$(t.$$.fragment,r),$(e.$$.fragment,r),o=!1},d(r){r&&b(n),y(t,r),y(e,r)}}}function Z6(i){let t;return{c(){t=G("Export conversation")},m(n,e){x(n,t,e)},d(n){n&&b(t)}}}function Q6(i){let t,n;return t=new qm({props:{slot:"iconLeft"}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p:P,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function tb(i){let t;return{c(){t=G("Import conversation")},m(n,e){x(n,t,e)},d(n){n&&b(t)}}}function eb(i){let t,n;return t=new x6({props:{slot:"iconLeft"}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p:P,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function nb(i){let t;return{c(){t=G("Delete")},m(n,e){x(n,t,e)},d(n){n&&b(t)}}}function ob(i){let t,n;return t=new Wr({props:{slot:"iconLeft"}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p:P,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function rb(i){let t,n,e,o,r,s,c,a,l,u;t=new wt.Label({props:{$$slots:{default:[N6]},$$scope:{ctx:i}}});let f=i[10]&&i[2].isShareable&&Vl(i);o=new wt.Item({props:{onSelect:i[20],$$slots:{iconLeft:[G6],default:[V6]},$$scope:{ctx:i}}}),s=new wt.Item({props:{title:db,onSelect:i[21],$$slots:{iconLeft:[J6],default:[Y6]},$$scope:{ctx:i}}});let m=i[9]&&Gl(i);return l=new wt.Item({props:{title:$b,color:"error",onSelect:i[24],$$slots:{iconLeft:[ob],default:[nb]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment),n=U(),f&&f.c(),e=U(),v(o.$$.fragment),r=U(),v(s.$$.fragment),c=U(),m&&m.c(),a=U(),v(l.$$.fragment)},m(p,_){w(t,p,_),x(p,n,_),f&&f.m(p,_),x(p,e,_),w(o,p,_),x(p,r,_),w(s,p,_),x(p,c,_),m&&m.m(p,_),x(p,a,_),w(l,p,_),u=!0},p(p,_){const M={};2&_[1]&&(M.$$scope={dirty:_,ctx:p}),t.$set(M),p[10]&&p[2].isShareable?f?(f.p(p,_),1028&_[0]&&d(f,1)):(f=Vl(p),f.c(),d(f,1),f.m(e.parentNode,e)):f&&(j(),$(f,1,1,()=>{f=null}),q());const C={};66&_[0]&&(C.onSelect=p[20]),2&_[1]&&(C.$$scope={dirty:_,ctx:p}),o.$set(C);const T={};4164&_[0]&&(T.onSelect=p[21]),4&_[0]|2&_[1]&&(T.$$scope={dirty:_,ctx:p}),s.$set(T),p[9]?m?(m.p(p,_),512&_[0]&&d(m,1)):(m=Gl(p),m.c(),d(m,1),m.m(a.parentNode,a)):m&&(j(),$(m,1,1,()=>{m=null}),q());const E={};100&_[0]&&(E.onSelect=p[24]),2&_[1]&&(E.$$scope={dirty:_,ctx:p}),l.$set(E)},i(p){u||(d(t.$$.fragment,p),d(f),d(o.$$.fragment,p),d(s.$$.fragment,p),d(m),d(l.$$.fragment,p),u=!0)},o(p){$(t.$$.fragment,p),$(f),$(o.$$.fragment,p),$(s.$$.fragment,p),$(m),$(l.$$.fragment,p),u=!1},d(p){p&&(b(n),b(e),b(r),b(c),b(a)),y(t,p),f&&f.d(p),y(o,p),y(s,p),m&&m.d(p),y(l,p)}}}function ib(i){let t,n,e,o;return t=new wt.Trigger({props:{$$slots:{default:[D6]},$$scope:{ctx:i}}}),e=new wt.Content({props:{size:1,side:"bottom",align:"end",onClickOutside:i[25],onEscapeKeyDown:i[26],$$slots:{default:[rb]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment),n=U(),v(e.$$.fragment)},m(r,s){w(t,r,s),x(r,n,s),w(e,r,s),o=!0},p(r,s){const c={};64&s[0]|2&s[1]&&(c.$$scope={dirty:s,ctx:r}),t.$set(c);const a={};64&s[0]&&(a.onClickOutside=r[25]),64&s[0]&&(a.onEscapeKeyDown=r[26]),5862&s[0]|2&s[1]&&(a.$$scope={dirty:s,ctx:r}),e.$set(a)},i(r){o||(d(t.$$.fragment,r),d(e.$$.fragment,r),o=!0)},o(r){$(t.$$.fragment,r),$(e.$$.fragment,r),o=!1},d(r){r&&b(n),y(t,r),y(e,r)}}}function sb(i){let t,n;return t=new To({}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function ab(i){let t,n;return t=new xr({}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function cb(i){let t,n,e,o,r;const s=[L6,I6],c=[];function a(f,m){return f[0]?0:1}n=a(i),e=c[n]=s[n](i);const l=i[17].right,u=Yt(l,i,i[32],ql);return{c(){t=L("div"),e.c(),o=U(),u&&u.c(),A(t,"slot","right"),A(t,"class","l-thread-menu-item__right svelte-nvsyjc")},m(f,m){x(f,t,m),c[n].m(t,null),O(t,o),u&&u.m(t,null),r=!0},p(f,m){let p=n;n=a(f),n===p?c[n].p(f,m):(j(),$(c[p],1,1,()=>{c[p]=null}),q(),e=c[n],e?e.p(f,m):(e=c[n]=s[n](f),e.c()),d(e,1),e.m(t,o)),u&&u.p&&(!r||2&m[1])&&Kt(u,l,f,f[32],r?Jt(l,f[32],m,A6):Xt(f[32]),ql)},i(f){r||(d(e),d(u,f),r=!0)},o(f){$(e),$(u,f),r=!1},d(f){f&&b(t),c[n].d(),u&&u.d(f)}}}function lb(i){let t,n;return t=new tm({props:{selected:i[8],isSelectable:!0,$$slots:{right:[cb],title:[E6]},$$scope:{ctx:i}}}),t.$on("click",i[30]),t.$on("keydown",function(){Ne(ko("Enter",i[31]))&&ko("Enter",i[31]).apply(this,arguments)}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){i=e;const r={};256&o[0]&&(r.selected=i[8]),6127&o[0]|2&o[1]&&(r.$$scope={dirty:o,ctx:i}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}const ub="Conversation Options",db="Pin session",$b="Delete session",fb=()=>{},mb=()=>{};function pb(i,t,n){let e,o,r,s,c,a,l=P,u=()=>(l(),l=ce(M,H=>n(12,c=H)),M),f=P;i.$$.on_destroy.push(()=>l()),i.$$.on_destroy.push(()=>f());let{$$slots:m={},$$scope:p}=t,{conversation:_}=t,{chatModel:M}=t;u();let C,{onConversationClicked:T}=t,{deleteConversation:E}=t,{editableTitle:R}=t,{isEditingTitle:N=!1}=t,Z=!1;async function Q(H){if(H!==void 0&&C===void 0){n(7,C=_.lastUrl?"copied":"retrieving");try{const Y=await M.getConversationUrl(H);navigator.clipboard.writeText(Y),n(7,C="copied")}catch(Y){console.error("Failed to get conversation URL: ",Y),n(7,C="failure")}finally{setTimeout(()=>{n(6,Z=!1),n(7,C=void 0)},1200)}}}async function X(){try{await _6(_,{includeMetadata:!0,notes:`Exported from thread menu on ${new Date().toISOString()}`})}catch(H){console.error("Failed to export conversation:",H)}}async function K(){try{const H=await C6(c,{generateNewId:!0,namePrefix:"[Imported] ",markAsImported:!0});H&&c.setCurrentConversation(H)}catch(H){console.error("Failed to import conversation:",H)}}return i.$$set=H=>{"conversation"in H&&n(2,_=H.conversation),"chatModel"in H&&u(n(3,M=H.chatModel)),"onConversationClicked"in H&&n(4,T=H.onConversationClicked),"deleteConversation"in H&&n(5,E=H.deleteConversation),"editableTitle"in H&&n(1,R=H.editableTitle),"isEditingTitle"in H&&n(0,N=H.isEditingTitle),"$$scope"in H&&n(32,p=H.$$scope)},i.$$.update=()=>{8&i.$$.dirty[0]&&(n(11,e=M.flags),f(),f=ce(e,H=>n(16,a=H))),65536&i.$$.dirty[0]&&n(10,o=a.enableShareService),65536&i.$$.dirty[0]&&n(9,r=a.enableConversationDebugUtils),13&i.$$.dirty[0]&&n(8,s=_.id===M.currentConversationId&&!N)},[N,R,_,M,T,E,Z,C,s,r,o,e,c,Q,X,K,a,m,()=>{n(6,Z=!Z)},()=>Q(_.id),H=>{n(6,Z=!1),R==null||R.startEdit(H)},()=>{c.toggleConversationPinned(_.id),n(6,Z=!1)},async()=>{X(),n(6,Z=!1)},async()=>{K(),n(6,Z=!1)},async()=>{E(_.id),n(6,Z=!1)},()=>n(6,Z=!1),()=>n(6,Z=!1),H=>{M.renameConversation(_.id,H)},function(H){te[H?"unshift":"push"](()=>{R=H,n(1,R)})},function(H){N=H,n(0,N)},()=>T(_.id),()=>T(_.id),p]}class gb extends ut{constructor(t){super(),dt(this,t,pb,lb,ct,{conversation:2,chatModel:3,onConversationClicked:4,deleteConversation:5,editableTitle:1,isEditingTitle:0},null,[-1,-1])}}function Yl(i,t,n){const e=i.slice();return e[10]=t[n],e}function Kl(i){let t,n,e,o,r,s;e=new tm({props:{$$slots:{right:[Cb],title:[hb]},$$scope:{ctx:i}}});let c=se(i[1]),a=[];for(let u=0;u<c.length;u+=1)a[u]=Xl(Yl(i,c,u));const l=u=>$(a[u],1,1,()=>{a[u]=null});return{c(){t=L("div"),n=L("div"),v(e.$$.fragment),o=U(),r=L("div");for(let u=0;u<a.length;u+=1)a[u].c();A(n,"class","l-thread-group__header svelte-1c3ly67"),A(t,"class","l-thread-group")},m(u,f){x(u,t,f),O(t,n),w(e,n,null),O(t,o),O(t,r);for(let m=0;m<a.length;m+=1)a[m]&&a[m].m(r,null);s=!0},p(u,f){const m={};if(8227&f&&(m.$$scope={dirty:f,ctx:u}),e.$set(m),30&f){let p;for(c=se(u[1]),p=0;p<c.length;p+=1){const _=Yl(u,c,p);a[p]?(a[p].p(_,f),d(a[p],1)):(a[p]=Xl(_),a[p].c(),d(a[p],1),a[p].m(r,null))}for(j(),p=c.length;p<a.length;p+=1)l(p);q()}},i(u){if(!s){d(e.$$.fragment,u);for(let f=0;f<c.length;f+=1)d(a[f]);s=!0}},o(u){$(e.$$.fragment,u),a=a.filter(Boolean);for(let f=0;f<a.length;f+=1)$(a[f]);s=!1},d(u){u&&b(t),y(e),pn(a,u)}}}function hb(i){let t,n;return{c(){t=L("span"),n=G(i[0]),A(t,"slot","title")},m(e,o){x(e,t,o),O(t,n)},p(e,o){1&o&&_t(n,e[0])},d(e){e&&b(t)}}}function vb(i){let t,n;return t=new or({}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function wb(i){let t,n;return t=new fe({props:{variant:"ghost-block",color:"neutral",size:1,title:"Group options",$$slots:{default:[vb]},$$scope:{ctx:i}}}),t.$on("click",i[7]),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};8192&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function yb(i){let t,n,e,o,r=i[1].length+"",s=i[1].length>1?"s":"";return{c(){t=G("Delete "),n=G(r),e=G(" thread"),o=G(s)},m(c,a){x(c,t,a),x(c,n,a),x(c,e,a),x(c,o,a)},p(c,a){2&a&&r!==(r=c[1].length+"")&&_t(n,r),2&a&&s!==(s=c[1].length>1?"s":"")&&_t(o,s)},d(c){c&&(b(t),b(n),b(e),b(o))}}}function bb(i){let t,n;return t=new Wr({props:{slot:"iconLeft"}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p:P,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function xb(i){let t,n;return t=new wt.Item({props:{color:"error",onSelect:i[6],$$slots:{iconLeft:[bb],default:[yb]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};8194&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function _b(i){let t,n,e,o;return t=new wt.Trigger({props:{$$slots:{default:[wb]},$$scope:{ctx:i}}}),e=new wt.Content({props:{size:1,side:"bottom",align:"end",$$slots:{default:[xb]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment),n=U(),v(e.$$.fragment)},m(r,s){w(t,r,s),x(r,n,s),w(e,r,s),o=!0},p(r,s){const c={};8224&s&&(c.$$scope={dirty:s,ctx:r}),t.$set(c);const a={};8194&s&&(a.$$scope={dirty:s,ctx:r}),e.$set(a)},i(r){o||(d(t.$$.fragment,r),d(e.$$.fragment,r),o=!0)},o(r){$(t.$$.fragment,r),$(e.$$.fragment,r),o=!1},d(r){r&&b(n),y(t,r),y(e,r)}}}function Cb(i){let t,n,e;return n=new wt.Root({props:{open:i[5],triggerOn:[Zt.Hover,Zt.Click],onHoverStart:Mb,onHoverEnd:i[8],onOpenChange:i[9],$$slots:{default:[_b]},$$scope:{ctx:i}}}),{c(){t=L("div"),v(n.$$.fragment),A(t,"slot","right"),A(t,"class","l-thread-group__options")},m(o,r){x(o,t,r),w(n,t,null),e=!0},p(o,r){const s={};32&r&&(s.open=o[5]),32&r&&(s.onHoverEnd=o[8]),8226&r&&(s.$$scope={dirty:r,ctx:o}),n.$set(s)},i(o){e||(d(n.$$.fragment,o),e=!0)},o(o){$(n.$$.fragment,o),e=!1},d(o){o&&b(t),y(n)}}}function Xl(i){let t,n;return t=new gb({props:{conversation:i[10],chatModel:i[4],onConversationClicked:i[2],deleteConversation:i[3]}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};2&o&&(r.conversation=e[10]),16&o&&(r.chatModel=e[4]),4&o&&(r.onConversationClicked=e[2]),8&o&&(r.deleteConversation=e[3]),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function Ab(i){let t,n,e=i[1].length>0&&Kl(i);return{c(){e&&e.c(),t=mt()},m(o,r){e&&e.m(o,r),x(o,t,r),n=!0},p(o,[r]){o[1].length>0?e?(e.p(o,r),2&r&&d(e,1)):(e=Kl(o),e.c(),d(e,1),e.m(t.parentNode,t)):e&&(j(),$(e,1,1,()=>{e=null}),q())},i(o){n||(d(e),n=!0)},o(o){$(e),n=!1},d(o){o&&b(t),e&&e.d(o)}}}const Mb=()=>{};function kb(i,t,n){let{groupTitle:e}=t,{conversations:o}=t,{onConversationClicked:r}=t,{deleteConversation:s}=t,{chatModel:c}=t,a=!1;return i.$$set=l=>{"groupTitle"in l&&n(0,e=l.groupTitle),"conversations"in l&&n(1,o=l.conversations),"onConversationClicked"in l&&n(2,r=l.onConversationClicked),"deleteConversation"in l&&n(3,s=l.deleteConversation),"chatModel"in l&&n(4,c=l.chatModel)},[e,o,r,s,c,a,async function(){await c.deleteConversations(o.map(l=>l.id))},()=>n(5,a=!a),()=>n(5,a=!1),l=>{var u;l||(u=document.activeElement)!=null&&u.closest(".l-thread-group__options")&&document.activeElement instanceof HTMLElement&&document.activeElement.blur()}]}class Sb extends ut{constructor(t){super(),dt(this,t,kb,Ab,ct,{groupTitle:0,conversations:1,onConversationClicked:2,deleteConversation:3,chatModel:4})}}function Jl(i,t,n){const e=i.slice();return e[39]=t[n].label,e[40]=t[n].value,e}function Zl(i,t,n){const e=i.slice();return e[36]=t[n],e[38]=n,e}function Ql(i){let t,n,e={triggerOn:[Zt.Click],$$slots:{content:[Nb],default:[Eb]},$$scope:{ctx:i}};return t=new Pt({props:e}),i[28](t),{c(){v(t.$$.fragment)},m(o,r){w(t,o,r),n=!0},p(o,r){const s={};2144&r[0]|4096&r[1]&&(s.$$scope={dirty:r,ctx:o}),t.$set(s)},i(o){n||(d(t.$$.fragment,o),n=!0)},o(o){$(t.$$.fragment,o),n=!1},d(o){i[28](null),y(t,o)}}}function Tb(i){let t,n;return t=new ji({}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function Eb(i){let t,n;return t=new fe({props:{variant:"ghost-block",color:"neutral",size:1,title:"Share session",$$slots:{default:[Tb]},$$scope:{ctx:i}}}),t.$on("click",i[27]),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};4096&o[1]&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function Ib(i){let t;return{c(){t=G("Copy link to thread")},m(n,e){x(n,t,e)},p:P,i:P,o:P,d(n){n&&b(t)}}}function Lb(i){let t;return{c(){t=G(i[6])},m(n,e){x(n,t,e)},p(n,e){64&e[0]&&_t(t,n[6])},i:P,o:P,d(n){n&&b(t)}}}function Rb(i){let t;return{c(){t=G("Copied link to clipboard!")},m(n,e){x(n,t,e)},p:P,i:P,o:P,d(n){n&&b(t)}}}function Db(i){let t,n,e,o;return n=new go({props:{size:1,useCurrentColor:!0}}),{c(){t=L("div"),v(n.$$.fragment),e=G(" Copying link...")},m(r,s){x(r,t,s),w(n,t,null),O(t,e),o=!0},p:P,i(r){o||(d(n.$$.fragment,r),o=!0)},o(r){$(n.$$.fragment,r),o=!1},d(r){r&&b(t),y(n)}}}function Nb(i){let t,n,e,o;const r=[Db,Rb,Lb,Ib],s=[];function c(a,l){return a[5]==="retrieving"?0:a[5]==="copied"?1:a[5]==="failure"?2:3}return n=c(i),e=s[n]=r[n](i),{c(){t=L("div"),e.c(),A(t,"slot","content")},m(a,l){x(a,t,l),s[n].m(t,null),o=!0},p(a,l){let u=n;n=c(a),n===u?s[n].p(a,l):(j(),$(s[u],1,1,()=>{s[u]=null}),q(),e=s[n],e?e.p(a,l):(e=s[n]=r[n](a),e.c()),d(e,1),e.m(t,null))},i(a){o||(d(e),o=!0)},o(a){$(e),o=!1},d(a){a&&b(t),s[n].d()}}}function Pb(i){let t,n;return t=new Oo({}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function Fb(i){let t,n;return t=new Ts({}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function Ob(i){let t,n;return t=new fe({props:{variant:"solid",color:"neutral",size:1,"data-testid":Xb,$$slots:{default:[Fb]},$$scope:{ctx:i}}}),t.$on("click",i[29]),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};4096&o[1]&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function zb(i){let t,n,e;return n=new Ur({props:{icons:[`${Ii.cmdOrCtrl}`,"L"]}}),{c(){t=L("div"),v(n.$$.fragment),A(t,"slot","content"),A(t,"class","c-threads-menu__new-thread-tooltip-content svelte-113v40n")},m(o,r){x(o,t,r),w(n,t,null),e=!0},p:P,i(o){e||(d(n.$$.fragment,o),e=!0)},o(o){$(n.$$.fragment,o),e=!1},d(o){o&&b(t),y(n)}}}function Bb(i){let t,n,e,o,r,s,c=i[1].flags.enableShareService&&i[10]&&Ql(i);return e=new fe({props:{variant:"ghost-block",color:"neutral",size:1,title:i[3]?ru:ou,$$slots:{default:[Pb]},$$scope:{ctx:i}}}),e.$on("click",i[14]),e.$on("keydown",ko("Enter",i[14])),r=new Pt({props:{$$slots:{content:[zb],default:[Ob]},$$scope:{ctx:i}}}),{c(){t=L("div"),c&&c.c(),n=U(),v(e.$$.fragment),o=U(),v(r.$$.fragment),A(t,"class","c-threads-menu__right-btns svelte-113v40n"),A(t,"slot","buttons")},m(a,l){x(a,t,l),c&&c.m(t,null),O(t,n),w(e,t,null),O(t,o),w(r,t,null),s=!0},p(a,l){a[1].flags.enableShareService&&a[10]?c?(c.p(a,l),1026&l[0]&&d(c,1)):(c=Ql(a),c.c(),d(c,1),c.m(t,n)):c&&(j(),$(c,1,1,()=>{c=null}),q());const u={};8&l[0]&&(u.title=a[3]?ru:ou),4096&l[1]&&(u.$$scope={dirty:l,ctx:a}),e.$set(u);const f={};4096&l[1]&&(f.$$scope={dirty:l,ctx:a}),r.$set(f)},i(a){s||(d(c),d(e.$$.fragment,a),d(r.$$.fragment,a),s=!0)},o(a){$(c),$(e.$$.fragment,a),$(r.$$.fragment,a),s=!1},d(a){a&&b(t),c&&c.d(),y(e),y(r)}}}function Ub(i){let t;return{c(){t=G("Sort by:")},m(n,e){x(n,t,e)},d(n){n&&b(t)}}}function Hb(i){let t,n=i[2]==="lastMessageTimestamp"?"Last Message":"Created Date";return{c(){t=G(n)},m(e,o){x(e,t,o)},p(e,o){4&o[0]&&n!==(n=e[2]==="lastMessageTimestamp"?"Last Message":"Created Date")&&_t(t,n)},d(e){e&&b(t)}}}function jb(i){let t,n,e,o,r;return n=new Gt({props:{size:1,$$slots:{default:[Hb]},$$scope:{ctx:i}}}),o=new Oo({}),{c(){t=L("div"),v(n.$$.fragment),e=U(),v(o.$$.fragment),A(t,"class","c-threads-menu__sort-trigger svelte-113v40n")},m(s,c){x(s,t,c),w(n,t,null),O(t,e),w(o,t,null),r=!0},p(s,c){const a={};4&c[0]|4096&c[1]&&(a.$$scope={dirty:c,ctx:s}),n.$set(a)},i(s){r||(d(n.$$.fragment,s),d(o.$$.fragment,s),r=!0)},o(s){$(n.$$.fragment,s),$(o.$$.fragment,s),r=!1},d(s){s&&b(t),y(n),y(o)}}}function qb(i){let t,n,e=i[39]+"";return{c(){t=G(e),n=U()},m(o,r){x(o,t,r),x(o,n,r)},p:P,d(o){o&&(b(t),b(n))}}}function tu(i){let t,n;function e(){return i[25](i[40])}return t=new wt.Item({props:{onSelect:e,highlight:i[2]===i[40],$$slots:{default:[qb]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(o,r){w(t,o,r),n=!0},p(o,r){i=o;const s={};513&r[0]&&(s.onSelect=e),4&r[0]&&(s.highlight=i[2]===i[40]),4096&r[1]&&(s.$$scope={dirty:r,ctx:i}),t.$set(s)},i(o){n||(d(t.$$.fragment,o),n=!0)},o(o){$(t.$$.fragment,o),n=!1},d(o){y(t,o)}}}function Wb(i){let t,n,e=se(i[13]),o=[];for(let s=0;s<e.length;s+=1)o[s]=tu(Jl(i,e,s));const r=s=>$(o[s],1,1,()=>{o[s]=null});return{c(){for(let s=0;s<o.length;s+=1)o[s].c();t=mt()},m(s,c){for(let a=0;a<o.length;a+=1)o[a]&&o[a].m(s,c);x(s,t,c),n=!0},p(s,c){if(8709&c[0]){let a;for(e=se(s[13]),a=0;a<e.length;a+=1){const l=Jl(s,e,a);o[a]?(o[a].p(l,c),d(o[a],1)):(o[a]=tu(l),o[a].c(),d(o[a],1),o[a].m(t.parentNode,t))}for(j(),a=e.length;a<o.length;a+=1)r(a);q()}},i(s){if(!n){for(let c=0;c<e.length;c+=1)d(o[c]);n=!0}},o(s){o=o.filter(Boolean);for(let c=0;c<o.length;c+=1)$(o[c]);n=!1},d(s){s&&b(t),pn(o,s)}}}function Vb(i){let t,n,e,o;return t=new wt.Trigger({props:{$$slots:{default:[jb]},$$scope:{ctx:i}}}),e=new wt.Content({props:{size:1,side:"bottom",align:"start",$$slots:{default:[Wb]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment),n=U(),v(e.$$.fragment)},m(r,s){w(t,r,s),x(r,n,s),w(e,r,s),o=!0},p(r,s){const c={};4&s[0]|4096&s[1]&&(c.$$scope={dirty:s,ctx:r}),t.$set(c);const a={};517&s[0]|4096&s[1]&&(a.$$scope={dirty:s,ctx:r}),e.$set(a)},i(r){o||(d(t.$$.fragment,r),d(e.$$.fragment,r),o=!0)},o(r){$(t.$$.fragment,r),$(e.$$.fragment,r),o=!1},d(r){r&&b(n),y(t,r),y(e,r)}}}function Gb(i){let t,n,e,o,r,s;e=new Gt({props:{size:1,weight:"medium",$$slots:{default:[Ub]},$$scope:{ctx:i}}});let c={$$slots:{default:[Vb]},$$scope:{ctx:i}};return r=new wt.Root({props:c}),i[26](r),{c(){t=L("div"),n=L("div"),v(e.$$.fragment),o=U(),v(r.$$.fragment),A(n,"class","c-threads-menu__sort-label svelte-113v40n"),A(t,"slot","sort-options"),A(t,"class","c-threads-menu__sort-options svelte-113v40n")},m(a,l){x(a,t,l),O(t,n),w(e,n,null),O(t,o),w(r,t,null),s=!0},p(a,l){const u={};4096&l[1]&&(u.$$scope={dirty:l,ctx:a}),e.$set(u);const f={};517&l[0]|4096&l[1]&&(f.$$scope={dirty:l,ctx:a}),r.$set(f)},i(a){s||(d(e.$$.fragment,a),d(r.$$.fragment,a),s=!0)},o(a){$(e.$$.fragment,a),$(r.$$.fragment,a),s=!1},d(a){a&&b(t),y(e),i[26](null),y(r)}}}function eu(i){let t,n,e,o;return n=new vf({props:{size:4}}),{c(){t=L("div"),v(n.$$.fragment),e=U(),A(t,"class","c-threads-menu__separator svelte-113v40n")},m(r,s){x(r,t,s),w(n,t,null),O(t,e),o=!0},i(r){o||(d(n.$$.fragment,r),o=!0)},o(r){$(n.$$.fragment,r),o=!1},d(r){r&&b(t),y(n)}}}function nu(i){let t,n,e,o;t=new Sb({props:{groupTitle:i[36].groupTitle,conversations:i[36].conversations,onConversationClicked:i[17],deleteConversation:i[18],chatModel:i[1]}});let r=i[38]<i[4].length-1&&eu();return{c(){v(t.$$.fragment),n=U(),r&&r.c(),e=mt()},m(s,c){w(t,s,c),x(s,n,c),r&&r.m(s,c),x(s,e,c),o=!0},p(s,c){const a={};16&c[0]&&(a.groupTitle=s[36].groupTitle),16&c[0]&&(a.conversations=s[36].conversations),2&c[0]&&(a.chatModel=s[1]),t.$set(a),s[38]<s[4].length-1?r?16&c[0]&&d(r,1):(r=eu(),r.c(),d(r,1),r.m(e.parentNode,e)):r&&(j(),$(r,1,1,()=>{r=null}),q())},i(s){o||(d(t.$$.fragment,s),d(r),o=!0)},o(s){$(t.$$.fragment,s),$(r),o=!1},d(s){s&&(b(n),b(e)),y(t,s),r&&r.d(s)}}}function Yb(i){let t,n,e=se(i[4]),o=[];for(let s=0;s<e.length;s+=1)o[s]=nu(Zl(i,e,s));const r=s=>$(o[s],1,1,()=>{o[s]=null});return{c(){t=L("div");for(let s=0;s<o.length;s+=1)o[s].c();A(t,"slot","body"),A(t,"data-testid","threads-menu-body")},m(s,c){x(s,t,c);for(let a=0;a<o.length;a+=1)o[a]&&o[a].m(t,null);n=!0},p(s,c){if(393234&c[0]){let a;for(e=se(s[4]),a=0;a<e.length;a+=1){const l=Zl(s,e,a);o[a]?(o[a].p(l,c),d(o[a],1)):(o[a]=nu(l),o[a].c(),d(o[a],1),o[a].m(t,null))}for(j(),a=e.length;a<o.length;a+=1)r(a);q()}},i(s){if(!n){for(let c=0;c<e.length;c+=1)d(o[c]);n=!0}},o(s){o=o.filter(Boolean);for(let c=0;c<o.length;c+=1)$(o[c]);n=!1},d(s){s&&b(t),pn(o,s)}}}function Kb(i){let t,n,e,o,r;function s(a){i[30](a)}let c={active:i[3],class:em,title:Sn.getDisplayName(i[11]),$$slots:{body:[Yb],"sort-options":[Gb],buttons:[Bb]},$$scope:{ctx:i}};return i[8]!==void 0&&(c.element=i[8]),t=new r6({props:c}),te.push(()=>Te(t,"element",s)),t.$on("click",i[14]),t.$on("keydown",ko("Enter",i[14])),{c(){v(t.$$.fragment)},m(a,l){w(t,a,l),e=!0,o||(r=[Lt(window,"blur",i[19]),Lt(window,"keydown",ko("Escape",i[15])),Lt(window,"click",i[24],!0)],o=!0)},p(a,l){const u={};8&l[0]&&(u.active=a[3]),2048&l[0]&&(u.title=Sn.getDisplayName(a[11])),3839&l[0]|4096&l[1]&&(u.$$scope={dirty:l,ctx:a}),!n&&256&l[0]&&(n=!0,u.element=a[8],Re(()=>n=!1)),t.$set(u)},i(a){e||(d(t.$$.fragment,a),e=!0)},o(a){$(t.$$.fragment,a),e=!1},d(a){y(t,a),o=!1,Qe(r)}}}const em="js-threads-menu",Xb="new-thread-button",ou="Show Sessions",ru="Collapse Sessions";var We=(i=>(i.Pinned="Pinned",i.Active="Active remote agents",i.Today="Today",i.New="New",i.ThisWeek="Last 7 days",i.ThisMonth="Last 30 days",i.Older="Older",i))(We||{});function Jb(i,t,n){let e,o,r,s,c,a,l=P,u=()=>(l(),l=ce(p,rt=>n(1,s=rt)),p),f=P,m=P;i.$$.on_destroy.push(()=>l()),i.$$.on_destroy.push(()=>f()),i.$$.on_destroy.push(()=>m());let{chatModel:p}=t;u();let{onActiveChanged:_=()=>{}}=t,{active:M}=t,C=M||!1;const T=[We.Pinned,We.Active,We.Today,We.ThisWeek,We.ThisMonth,We.Older];let E=[];function R(rt){M===void 0&&C!==rt&&(n(3,C=rt),_(rt))}function N(){R(!1)}function Z(){p.setCurrentConversation(),N()}let Q,X=!1,K,H,Y,V="";async function J(rt){if(rt!==void 0){K&&(clearTimeout(void 0),K.requestOpen()),n(5,Q="retrieving"),n(6,V="");try{const lt=await p.getConversationUrl(rt);navigator.clipboard.writeText(lt),n(5,Q="copied")}catch(lt){const ot=lt;n(5,Q="failure"),n(6,V=ot.message)}finally{setTimeout(()=>{K==null||K.requestClose()},1200)}}}return i.$$set=rt=>{"chatModel"in rt&&u(n(0,p=rt.chatModel)),"onActiveChanged"in rt&&n(21,_=rt.onActiveChanged),"active"in rt&&n(22,M=rt.active)},i.$$.update=()=>{2&i.$$.dirty[0]&&(n(12,e=s.sortConversationsBy),f(),f=ce(e,rt=>n(2,c=rt))),2&i.$$.dirty[0]&&(n(11,o=s.currentConversationModel),m(),m=ce(o,rt=>n(23,a=rt))),8388609&i.$$.dirty[0]&&n(10,r=!!a.id&&p.isConversationShareable(a.id)),7&i.$$.dirty[0]&&(rt=>{var it;const lt=new Map,ot=new Date(new Date().setHours(0,0,0,0)),ht=[{age:We.Today,date:ot},{age:We.ThisWeek,date:new Date(ot.getTime()-6048e5)},{age:We.ThisMonth,date:new Date(ot.getTime()-2592e6)}];for(const xt of rt){const ee=Sn.getTime(xt,c);let At=((it=ht.find(Ht=>ee>=Ht.date))==null?void 0:it.age)||We.Older;xt.isPinned&&(At=We.Pinned),lt.set(At,[...lt.get(At)||[],xt])}n(4,E=T.map(xt=>({groupTitle:xt,conversations:lt.get(xt)||[]})).filter(xt=>xt.conversations.length>0))})(s.orderedConversations(c).filter(rt=>!!p.flags.enableAgentMode||!mn(rt)))},[p,s,c,C,E,Q,V,K,H,Y,r,o,e,[{label:"Last Message",value:"lastMessageTimestamp"},{label:"Created Date",value:"createdAt"}],function(rt){R(!C),rt.stopPropagation(),rt.preventDefault()},N,Z,function(rt){p.setCurrentConversation(rt),N()},async function(rt){try{X=!0,await s.deleteConversation(rt)}finally{X=!1}},function(){X||N()},J,_,M,a,rt=>{H&&rt.composedPath().includes(H)||N()},rt=>{p.setSortConversationsBy(rt),Y==null||Y.requestClose()},function(rt){te[rt?"unshift":"push"](()=>{Y=rt,n(9,Y)})},rt=>{J(o.id),rt.stopPropagation()},function(rt){te[rt?"unshift":"push"](()=>{K=rt,n(7,K)})},rt=>{Z(),rt.stopPropagation()},function(rt){H=rt,n(8,H)}]}class Zb extends ut{constructor(t){super(),dt(this,t,Jb,Kb,ct,{chatModel:0,onActiveChanged:21,active:22},null,[-1,-1])}}const Qb=1e3,t5=[We.New,We.Pinned,We.Active,We.Today,We.ThisWeek,We.ThisMonth,We.Older];function e5(i){return i.sort((t,n)=>n.sortTimestamp.getTime()-t.sortTimestamp.getTime())}function n5(i,t,n){if(i.type==="remoteAgent"){const e=t===i.id?n:void 0;if(e)return e.exchanges.slice(0,20).map(r=>r.exchange.request_message||"").join(" ");const o=i.agent;return o?[o.session_summary||"",...o.turn_summaries||[]].join(" "):""}return i.conversation&&i.conversation.chatHistory?i.conversation.chatHistory.slice(0,20).filter(e=>of(e)).map(e=>e.request_message||"").join(" "):""}function o5(i){var n,e;if(!i.agent||!((e=(n=i.agent.workspace_setup)==null?void 0:n.starting_files)!=null&&e.github_commit_ref))return"";const t=i.agent.workspace_setup.starting_files.github_commit_ref.repository_url;return[t,J$(t),Es(t)].filter(Boolean).join(" ")}function r5(i){let t,n;return t=new he({props:{size:1,variant:"soft",color:"neutral","data-testid":nm,$$slots:{iconLeft:[a5],default:[s5]},$$scope:{ctx:i}}}),t.$on("click",i[17]),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};524288&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function i5(i){let t,n,e;return n=new Yf.Root({props:{variant:"soft",color:"neutral",radius:"medium",size:1,dropdownSide:"bottom",dropdownAlign:"end",class:"c-agent-type-dropdown__button",$$slots:{"dropdown-content":[f5],button:[$5]},$$scope:{ctx:i}}}),{c(){t=L("div"),v(n.$$.fragment),A(t,"class","new-thread-dropdown svelte-a7mgt")},m(o,r){x(o,t,r),w(n,t,null),e=!0},p(o,r){const s={};524409&r&&(s.$$scope={dirty:r,ctx:o}),n.$set(s)},i(o){e||(d(n.$$.fragment,o),e=!0)},o(o){$(n.$$.fragment,o),e=!1},d(o){o&&b(t),y(n)}}}function s5(i){let t;return{c(){t=G("New")},m(n,e){x(n,t,e)},d(n){n&&b(t)}}}function a5(i){let t,n;return t=new Z$({props:{slot:"iconLeft"}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p:P,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function c5(i){let t;return{c(){t=G("New")},m(n,e){x(n,t,e)},d(n){n&&b(t)}}}function l5(i){let t,n,e;var o=i[0].icon;return o&&(t=on(o,{props:{slot:"iconLeft"}})),{c(){t&&v(t.$$.fragment),n=mt()},m(r,s){t&&w(t,r,s),x(r,n,s),e=!0},p(r,s){if(1&s&&o!==(o=r[0].icon)){if(t){j();const c=t;$(c.$$.fragment,1,0,()=>{y(c,1)}),q()}o?(t=on(o,{props:{slot:"iconLeft"}}),v(t.$$.fragment),d(t.$$.fragment,1),w(t,n.parentNode,n)):t=null}},i(r){e||(t&&d(t.$$.fragment,r),e=!0)},o(r){t&&$(t.$$.fragment,r),e=!1},d(r){r&&b(n),t&&y(t,r)}}}function u5(i){let t,n;return t=new he({props:{size:1,variant:"soft",color:"neutral","data-testid":nm,"data-split-button-main":!0,$$slots:{iconLeft:[l5],default:[c5]},$$scope:{ctx:i}}}),t.$on("click",i[16]),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};524289&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function d5(i){let t,n,e,o,r,s;return r=new Ur({props:{icons:[`${Ii.cmdOrCtrl}`,"L"]}}),{c(){t=L("div"),n=L("span"),e=G(i[4]),o=U(),v(r.$$.fragment),A(t,"slot","content"),A(t,"class","c-new-thread-dropdown__tooltip-content svelte-a7mgt")},m(c,a){x(c,t,a),O(t,n),O(n,e),O(t,o),w(r,t,null),s=!0},p(c,a){(!s||16&a)&&_t(e,c[4])},i(c){s||(d(r.$$.fragment,c),s=!0)},o(c){$(r.$$.fragment,c),s=!1},d(c){c&&b(t),y(r)}}}function $5(i){let t,n;return t=new Pt({props:{slot:"button",$$slots:{content:[d5],default:[u5]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};524305&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function iu(i){let t,n;return t=new wr({props:{onSelect:i[14],isConversationAgentic:!0,tooltipSide:"right",tooltipContent:"Require approval for some tools","data-testid":g5}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};8&o&&(r.onSelect=e[14]),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function su(i){let t,n;return t=new wr({props:{onSelect:i[15],isBackgroundAgent:!0,tooltipSide:"right",tooltipContent:"Run background agents in the cloud","data-testid":h5}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p:P,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function f5(i){let t,n,e,o,r;t=new wr({props:{onSelect:i[13],isConversationAgentic:!1,tooltipSide:"right",tooltipContent:"Ask Augment","data-testid":p5}});let s=i[5]&&iu(i),c=i[6]&&su(i);return{c(){v(t.$$.fragment),n=U(),s&&s.c(),e=U(),c&&c.c(),o=mt()},m(a,l){w(t,a,l),x(a,n,l),s&&s.m(a,l),x(a,e,l),c&&c.m(a,l),x(a,o,l),r=!0},p(a,l){a[5]?s?(s.p(a,l),32&l&&d(s,1)):(s=iu(a),s.c(),d(s,1),s.m(e.parentNode,e)):s&&(j(),$(s,1,1,()=>{s=null}),q()),a[6]?c?(c.p(a,l),64&l&&d(c,1)):(c=su(a),c.c(),d(c,1),c.m(o.parentNode,o)):c&&(j(),$(c,1,1,()=>{c=null}),q())},i(a){r||(d(t.$$.fragment,a),d(s),d(c),r=!0)},o(a){$(t.$$.fragment,a),$(s),$(c),r=!1},d(a){a&&(b(n),b(e),b(o)),y(t,a),s&&s.d(a),c&&c.d(a)}}}function m5(i){let t,n,e,o;const r=[i5,r5],s=[];function c(a,l){return a[5]||a[6]?0:1}return t=c(i),n=s[t]=r[t](i),{c(){n.c(),e=mt()},m(a,l){s[t].m(a,l),x(a,e,l),o=!0},p(a,[l]){let u=t;t=c(a),t===u?s[t].p(a,l):(j(),$(s[u],1,1,()=>{s[u]=null}),q(),n=s[t],n?n.p(a,l):(n=s[t]=r[t](a),n.c()),d(n,1),n.m(e.parentNode,e))},i(a){o||(d(n),o=!0)},o(a){$(n),o=!1},d(a){a&&b(e),s[t].d(a)}}}const nm="new-thread-button",p5="new-chat-thread-button",g5="new-local-agent-manual-thread-button",h5="new-remote-agent-thread-button";function v5(i,t,n){let e,o,r,s,c,a,l,u,f,m,p=P,_=P;i.$$.on_destroy.push(()=>p()),i.$$.on_destroy.push(()=>_());const M=St(Tn.key);Et(i,M,R=>n(10,l=R));const C=St(gr.key),T=St("chatModel");Et(i,T,R=>n(12,m=R));const E=St("agentConversationModel");return i.$$.update=()=>{4096&i.$$.dirty&&n(6,e=!!T&&m.flags.enableBackgroundAgents),4096&i.$$.dirty&&n(5,o=!!T&&m.flags.enableAgentMode),3086&i.$$.dirty&&n(0,c=Hi({isConversationAgentic:!!r&&f,agentExecutionMode:s?u:void 0,isBackgroundAgent:!!M&&l.isActive})),1&i.$$.dirty&&n(4,a=c.type==="remoteAgent"?"New Remote Agent":c.type==="localAgent"?"New Agent":"New Chat")},n(2,r=E==null?void 0:E.isCurrConversationAgentic),_(),_=ce(r,R=>n(11,f=R)),n(1,s=T==null?void 0:T.agentExecutionMode),p(),p=ce(s,R=>n(3,u=R)),[c,s,r,u,a,o,e,M,C,T,l,f,m,()=>C.createNewChatThread(),()=>C.createNewLocalAgentThread(u),()=>C.createNewRemoteAgentThread(),()=>C.createThreadOfCurrentType(),()=>C.createNewChatThread()]}class w5 extends ut{constructor(t){super(),dt(this,t,v5,m5,ct,{})}}function au(i){let t;return{c(){t=L("div"),A(t,"class","update-indicator svelte-ef9b48")},m(n,e){x(n,t,e)},d(n){n&&b(t)}}}function y5(i){let t,n,e,o;n=new qi({});let r=i[0]&&au();return{c(){t=L("div"),v(n.$$.fragment),e=U(),r&&r.c(),A(t,"class","remote-agent-icon svelte-ef9b48")},m(s,c){x(s,t,c),w(n,t,null),O(t,e),r&&r.m(t,null),o=!0},p(s,[c]){s[0]?r||(r=au(),r.c(),r.m(t,null)):r&&(r.d(1),r=null)},i(s){o||(d(n.$$.fragment,s),o=!0)},o(s){$(n.$$.fragment,s),o=!1},d(s){s&&b(t),y(n),r&&r.d()}}}function b5(i,t,n){let{hasUpdates:e=!1}=t;return i.$$set=o=>{"hasUpdates"in o&&n(0,e=o.hasUpdates)},[e]}class x5 extends ut{constructor(t){super(),dt(this,t,b5,y5,ct,{hasUpdates:0})}}function _5(i){let t,n;return{c(){t=ie("svg"),n=ie("path"),A(n,"d","M11.45 7.25C11.9167 7.68333 12.15 8.21667 12.15 8.85C12.15 9.45 11.95 9.98333 11.55 10.45C11.15 10.8833 10.65 11.1333 10.05 11.2C9.45 11.2333 8.9 11.0833 8.4 10.75C7.93333 10.3833 7.63333 9.9 7.5 9.3C6.83333 9.26667 6.18333 9.08333 5.55 8.75C4.81667 8.38333 4.2 7.85 3.7 7.15V9.4C4.06667 9.46667 4.4 9.63333 4.7 9.9C5 10.1333 5.21667 10.4167 5.35 10.75C5.51667 11.0833 5.58333 11.4 5.55 11.7C5.55 12.2 5.41667 12.65 5.15 13.05C4.91667 13.4167 4.56667 13.7 4.1 13.9C3.66667 14.0667 3.21667 14.1 2.75 14C2.28333 13.9 1.88333 13.6833 1.55 13.35C1.21667 13.0167 1 12.6333 0.9 12.2C0.833333 11.7333 0.883333 11.2833 1.05 10.85C1.25 10.3833 1.53333 10.0167 1.9 9.75C2.16667 9.58333 2.45 9.46667 2.75 9.4V4.65C2.28333 4.55 1.88333 4.33333 1.55 4C1.21667 3.66667 1 3.26667 0.9 2.8C0.833333 2.33333 0.883333 1.88333 1.05 1.45C1.25 1.01667 1.53333 0.666666 1.9 0.4C2.3 0.133333 2.73333 0 3.2 0C3.53333 0 3.85 0.0666666 4.15 0.2C4.75 0.433333 5.16667 0.849999 5.4 1.45C5.53333 1.75 5.6 2.06667 5.6 2.4C5.6 2.86667 5.46667 3.3 5.2 3.7C4.93333 4.06667 4.58333 4.35 4.15 4.55C4.01667 4.61667 3.88333 4.65 3.75 4.65C3.85 5.65 4.25 6.5 4.95 7.2C5.65 7.9 6.5 8.3 7.5 8.4C7.53333 8.26667 7.56667 8.13333 7.6 8C7.8 7.56667 8.1 7.21667 8.5 6.95C8.96667 6.65 9.46667 6.53333 10 6.6C10.5667 6.63333 11.05 6.85 11.45 7.25ZM3.75 10.4C3.48333 10.3 3.21667 10.2833 2.95 10.35C2.68333 10.3833 2.43333 10.5167 2.2 10.75C2 10.95 1.86667 11.1833 1.8 11.45C1.76667 11.7167 1.8 11.9833 1.9 12.25C2.03333 12.5167 2.21667 12.7333 2.45 12.9C2.71667 13.0667 3.01667 13.1333 3.35 13.1C3.68333 13.0667 3.96667 12.9333 4.2 12.7C4.43333 12.4667 4.56667 12.1833 4.6 11.85C4.63333 11.5167 4.56667 11.2333 4.4 11C4.23333 10.7333 4.01667 10.5333 3.75 10.4ZM3.2 3.75C3.56667 3.75 3.86667 3.65 4.1 3.45C4.36667 3.21667 4.53333 2.93333 4.6 2.6C4.66667 2.26667 4.61667 1.96667 4.45 1.7C4.28333 1.4 4.05 1.2 3.75 1.1C3.48333 0.966667 3.21667 0.933333 2.95 1C2.68333 1.03333 2.43333 1.15 2.2 1.35C2 1.55 1.86667 1.8 1.8 2.1C1.76667 2.36667 1.8 2.63333 1.9 2.9C2.03333 3.13333 2.21667 3.33333 2.45 3.5C2.68333 3.66667 2.93333 3.75 3.2 3.75ZM10.8 9.9C10.9667 9.73333 11.0833 9.53333 11.15 9.3C11.2167 9.06667 11.2167 8.85 11.15 8.65C11.1167 8.41667 11.0167 8.21667 10.85 8.05C10.7167 7.85 10.5333 7.7 10.3 7.6C10.0667 7.5 9.8 7.48333 9.5 7.55C9.23333 7.58333 9 7.7 8.8 7.9C8.6 8.1 8.46667 8.35 8.4 8.65C8.33333 8.91667 8.35 9.16667 8.45 9.4C8.55 9.63333 8.68333 9.83333 8.85 10C9.05 10.1333 9.26667 10.2333 9.5 10.3C9.73333 10.3333 9.96667 10.3167 10.2 10.25C10.4333 10.1833 10.6333 10.0667 10.8 9.9Z"),A(t,"width","15"),A(t,"height","15"),A(t,"viewBox","-1 0 15 15"),A(t,"fill","currentColor"),A(t,"xmlns","http://www.w3.org/2000/svg")},m(e,o){x(e,t,o),O(t,n)},p:P,i:P,o:P,d(e){e&&b(t)}}}class om extends ut{constructor(t){super(),dt(this,t,null,_5,ct,{})}}function C5(i){let t,n;return t=new or({}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function A5(i){let t,n;return t=new fe({props:{variant:"ghost-block",color:"neutral",size:1,class:"c-agent-header__options-btn",$$slots:{default:[C5]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};2097152&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function cu(i){var s;let t,n,e,o=i[3]&&lu(i),r=i[2]&&((s=i[0].conversation)==null?void 0:s.isShareable)&&uu(i);return{c(){o&&o.c(),t=U(),r&&r.c(),n=mt()},m(c,a){o&&o.m(c,a),x(c,t,a),r&&r.m(c,a),x(c,n,a),e=!0},p(c,a){var l;c[3]?o?(o.p(c,a),8&a&&d(o,1)):(o=lu(c),o.c(),d(o,1),o.m(t.parentNode,t)):o&&(j(),$(o,1,1,()=>{o=null}),q()),c[2]&&((l=c[0].conversation)!=null&&l.isShareable)?r?(r.p(c,a),5&a&&d(r,1)):(r=uu(c),r.c(),d(r,1),r.m(n.parentNode,n)):r&&(j(),$(r,1,1,()=>{r=null}),q())},i(c){e||(d(o),d(r),e=!0)},o(c){$(o),$(r),e=!1},d(c){c&&(b(t),b(n)),o&&o.d(c),r&&r.d(c)}}}function lu(i){let t,n;return t=new wt.Item({props:{onSelect:i[13],$$slots:{iconLeft:[k5],default:[M5]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};2097152&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function M5(i){let t;return{c(){t=G("Rename")},m(n,e){x(n,t,e)},d(n){n&&b(t)}}}function k5(i){let t,n;return t=new Vr({props:{slot:"iconLeft"}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p:P,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function uu(i){let t,n;return t=new wt.Item({props:{class:"c-thread-menu__share-link",onSelect:i[15],$$slots:{iconLeft:[O5],default:[R5]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};2097248&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function S5(i){let t;return{c(){t=G("Share link to session")},m(n,e){x(n,t,e)},p:P,d(n){n&&b(t)}}}function T5(i){let t;return{c(){t=G("Unable to create link")},m(n,e){x(n,t,e)},p:P,d(n){n&&b(t)}}}function E5(i){let t;return{c(){t=G("Link copied")},m(n,e){x(n,t,e)},p:P,d(n){n&&b(t)}}}function I5(i){let t;return{c(){t=G("Creating link")},m(n,e){x(n,t,e)},p:P,d(n){n&&b(t)}}}function L5(i){let t;return{c(){t=G(i[6])},m(n,e){x(n,t,e)},p(n,e){64&e&&_t(t,n[6])},d(n){n&&b(t)}}}function R5(i){let t;function n(r,s){return r[6]?L5:r[5]==="retrieving"?I5:r[5]==="copied"?E5:r[5]==="failure"?T5:S5}let e=n(i),o=e(i);return{c(){o.c(),t=mt()},m(r,s){o.m(r,s),x(r,t,s)},p(r,s){e===(e=n(r))&&o?o.p(r,s):(o.d(1),o=e(r),o&&(o.c(),o.m(t.parentNode,t)))},d(r){r&&b(t),o.d(r)}}}function D5(i){let t,n;return t=new ji({}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function N5(i){let t,n;return t=new xr({}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function P5(i){let t,n;return t=new To({}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function F5(i){let t,n;return t=new go({props:{size:1}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function O5(i){let t,n,e,o;const r=[F5,P5,N5,D5],s=[];function c(a,l){return a[5]==="retrieving"?0:a[5]==="copied"?1:a[5]==="failure"?2:3}return t=c(i),n=s[t]=r[t](i),{c(){n.c(),e=mt()},m(a,l){s[t].m(a,l),x(a,e,l),o=!0},p(a,l){let u=t;t=c(a),t!==u&&(j(),$(s[u],1,1,()=>{s[u]=null}),q(),n=s[t],n||(n=s[t]=r[t](a),n.c()),d(n,1),n.m(e.parentNode,e))},i(a){o||(d(n),o=!0)},o(a){$(n),o=!1},d(a){a&&b(e),s[t].d(a)}}}function z5(i){let t,n=i[0].isPinned?"Unpin":"Pin";return{c(){t=G(n)},m(e,o){x(e,t,o)},p(e,o){1&o&&n!==(n=e[0].isPinned?"Unpin":"Pin")&&_t(t,n)},d(e){e&&b(t)}}}function B5(i){let t,n,e;return n=new Os({}),{c(){t=L("div"),v(n.$$.fragment),A(t,"class","pin-icon")},m(o,r){x(o,t,r),w(n,t,null),e=!0},p:P,i(o){e||(d(n.$$.fragment,o),e=!0)},o(o){$(n.$$.fragment,o),e=!1},d(o){o&&b(t),y(n)}}}function du(i){let t,n,e,o;return t=new wt.Item({props:{onSelect:i[14],$$slots:{iconLeft:[q5],default:[j5]},$$scope:{ctx:i}}}),e=new wt.Item({props:{onSelect:i[13],$$slots:{iconLeft:[V5],default:[W5]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment),n=U(),v(e.$$.fragment)},m(r,s){w(t,r,s),x(r,n,s),w(e,r,s),o=!0},p(r,s){const c={};2097409&s&&(c.$$scope={dirty:s,ctx:r}),t.$set(c);const a={};2097152&s&&(a.$$scope={dirty:s,ctx:r}),e.$set(a)},i(r){o||(d(t.$$.fragment,r),d(e.$$.fragment,r),o=!0)},o(r){$(t.$$.fragment,r),$(e.$$.fragment,r),o=!1},d(r){r&&b(n),y(t,r),y(e,r)}}}function U5(i){let t;return{c(){t=G("Copy ID")},m(n,e){x(n,t,e)},p:P,d(n){n&&b(t)}}}function H5(i){let t,n=i[8].get(i[0].id)+"";return{c(){t=G(n)},m(e,o){x(e,t,o)},p(e,o){257&o&&n!==(n=e[8].get(e[0].id)+"")&&_t(t,n)},d(e){e&&b(t)}}}function j5(i){let t,n;function e(s,c){return 257&c&&(t=null),t==null&&(t=!!s[8].get(s[0].id)),t?H5:U5}let o=e(i,-1),r=o(i);return{c(){r.c(),n=mt()},m(s,c){r.m(s,c),x(s,n,c)},p(s,c){o===(o=e(s,c))&&r?r.p(s,c):(r.d(1),r=o(s),r&&(r.c(),r.m(n.parentNode,n)))},d(s){s&&b(n),r.d(s)}}}function q5(i){let t,n;return t=new bf({props:{slot:"iconLeft"}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p:P,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function W5(i){let t;return{c(){t=G("Rename")},m(n,e){x(n,t,e)},d(n){n&&b(t)}}}function V5(i){let t,n;return t=new Vr({props:{slot:"iconLeft"}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p:P,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function G5(i){let t;return{c(){t=G("Delete")},m(n,e){x(n,t,e)},d(n){n&&b(t)}}}function Y5(i){let t,n,e;return n=new Wr({}),{c(){t=L("div"),v(n.$$.fragment),A(t,"class","trash-icon svelte-1l3udf2")},m(o,r){x(o,t,r),w(n,t,null),e=!0},p:P,i(o){e||(d(n.$$.fragment,o),e=!0)},o(o){$(n.$$.fragment,o),e=!1},d(o){o&&b(t),y(n)}}}function $u(i){let t,n,e,o,r,s,c,a;return t=new wt.Separator({}),e=new wt.Label({props:{$$slots:{default:[K5]},$$scope:{ctx:i}}}),r=new wt.Item({props:{onSelect:i[17],$$slots:{default:[X5]},$$scope:{ctx:i}}}),c=new wt.Item({props:{onSelect:i[18],$$slots:{default:[J5]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment),n=U(),v(e.$$.fragment),o=U(),v(r.$$.fragment),s=U(),v(c.$$.fragment)},m(l,u){w(t,l,u),x(l,n,u),w(e,l,u),x(l,o,u),w(r,l,u),x(l,s,u),w(c,l,u),a=!0},p(l,u){const f={};2097152&u&&(f.$$scope={dirty:u,ctx:l}),e.$set(f);const m={};1&u&&(m.onSelect=l[17]),2097152&u&&(m.$$scope={dirty:u,ctx:l}),r.$set(m);const p={};1&u&&(p.onSelect=l[18]),2097152&u&&(p.$$scope={dirty:u,ctx:l}),c.$set(p)},i(l){a||(d(t.$$.fragment,l),d(e.$$.fragment,l),d(r.$$.fragment,l),d(c.$$.fragment,l),a=!0)},o(l){$(t.$$.fragment,l),$(e.$$.fragment,l),$(r.$$.fragment,l),$(c.$$.fragment,l),a=!1},d(l){l&&(b(n),b(o),b(s)),y(t,l),y(e,l),y(r,l),y(c,l)}}}function K5(i){let t;return{c(){t=G("INTERNAL Debug Features")},m(n,e){x(n,t,e)},d(n){n&&b(t)}}}function X5(i){let t;return{c(){t=G("Pause")},m(n,e){x(n,t,e)},d(n){n&&b(t)}}}function J5(i){let t;return{c(){t=G("Resume")},m(n,e){x(n,t,e)},d(n){n&&b(t)}}}function Z5(i){let t,n,e,o,r,s,c,a,l=i[1]!=="remoteAgent"&&cu(i);e=new wt.Item({props:{onSelect:i[11],$$slots:{iconLeft:[B5],default:[z5]},$$scope:{ctx:i}}});let u=i[1]==="remoteAgent"&&du(i);s=new wt.Item({props:{color:"error",onSelect:i[12],$$slots:{iconLeft:[Y5],default:[G5]},$$scope:{ctx:i}}});let f=i[1]==="remoteAgent"&&i[7]&&$u(i);return{c(){t=L("div"),l&&l.c(),n=U(),v(e.$$.fragment),o=U(),u&&u.c(),r=U(),v(s.$$.fragment),c=U(),f&&f.c(),A(t,"class","c-thread-menu svelte-1l3udf2")},m(m,p){x(m,t,p),l&&l.m(t,null),O(t,n),w(e,t,null),O(t,o),u&&u.m(t,null),O(t,r),w(s,t,null),O(t,c),f&&f.m(t,null),a=!0},p(m,p){m[1]!=="remoteAgent"?l?(l.p(m,p),2&p&&d(l,1)):(l=cu(m),l.c(),d(l,1),l.m(t,n)):l&&(j(),$(l,1,1,()=>{l=null}),q());const _={};2097153&p&&(_.$$scope={dirty:p,ctx:m}),e.$set(_),m[1]==="remoteAgent"?u?(u.p(m,p),2&p&&d(u,1)):(u=du(m),u.c(),d(u,1),u.m(t,r)):u&&(j(),$(u,1,1,()=>{u=null}),q());const M={};2097152&p&&(M.$$scope={dirty:p,ctx:m}),s.$set(M),m[1]==="remoteAgent"&&m[7]?f?(f.p(m,p),130&p&&d(f,1)):(f=$u(m),f.c(),d(f,1),f.m(t,null)):f&&(j(),$(f,1,1,()=>{f=null}),q())},i(m){a||(d(l),d(e.$$.fragment,m),d(u),d(s.$$.fragment,m),d(f),a=!0)},o(m){$(l),$(e.$$.fragment,m),$(u),$(s.$$.fragment,m),$(f),a=!1},d(m){m&&b(t),l&&l.d(),y(e),u&&u.d(),y(s),f&&f.d()}}}function Q5(i){let t,n,e,o;return t=new wt.Trigger({props:{$$slots:{default:[A5]},$$scope:{ctx:i}}}),e=new wt.Content({props:{size:1,side:"bottom",align:"end",$$slots:{default:[Z5]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment),n=U(),v(e.$$.fragment)},m(r,s){w(t,r,s),x(r,n,s),w(e,r,s),o=!0},p(r,s){const c={};2097152&s&&(c.$$scope={dirty:s,ctx:r}),t.$set(c);const a={};2097647&s&&(a.$$scope={dirty:s,ctx:r}),e.$set(a)},i(r){o||(d(t.$$.fragment,r),d(e.$$.fragment,r),o=!0)},o(r){$(t.$$.fragment,r),$(e.$$.fragment,r),o=!1},d(r){r&&b(n),y(t,r),y(e,r)}}}function tx(i){let t,n,e;function o(s){i[19](s)}let r={nested:!1,$$slots:{default:[Q5]},$$scope:{ctx:i}};return i[4]!==void 0&&(r.requestClose=i[4]),t=new wt.Root({props:r}),te.push(()=>Te(t,"requestClose",o)),{c(){v(t.$$.fragment)},m(s,c){w(t,s,c),e=!0},p(s,[c]){const a={};2097647&c&&(a.$$scope={dirty:c,ctx:s}),!n&&16&c&&(n=!0,a.requestClose=s[4],Re(()=>n=!1)),t.$set(a)},i(s){e||(d(t.$$.fragment,s),e=!0)},o(s){$(t.$$.fragment,s),e=!1},d(s){y(t,s)}}}function ex(i,t,n){let e,o,r=St("chatModel");const s=St(Tn.key);let c,a,{thread:l}=t,{type:u="chat"}=t,{afterDelete:f}=t,{enableShareService:m=!1}=t,{onRename:p}=t,_="";const M=Le(new Map);return Et(i,M,C=>n(8,o=C)),i.$$set=C=>{"thread"in C&&n(0,l=C.thread),"type"in C&&n(1,u=C.type),"afterDelete"in C&&n(16,f=C.afterDelete),"enableShareService"in C&&n(2,m=C.enableShareService),"onRename"in C&&n(3,p=C.onRename)},n(7,e=r.flags.enableDebugFeatures),[l,u,m,p,c,a,_,e,o,s,M,function(){u==="remoteAgent"?s==null||s.toggleAgentPinned(l.id,l.isPinned||!1):r&&r.toggleConversationPinned(l.id)},async function(){if(u==="remoteAgent"){if(!await(s==null?void 0:s.deleteAgent(l.id)))return}else await r.deleteConversation(l.id);f==null||f()},function(){p==null||p(l.id,l.title),c()},function(){navigator.clipboard.writeText(l.id),M.update(C=>(C.set(l.id,"Copied!"),C)),setTimeout(()=>{M.update(C=>(C.delete(l.id),C))},1e3)},async function(){var T;if(!((T=l.conversation)!=null&&T.id)||a!==void 0)return;const C=r==null?void 0:r.conversations[l.conversation.id];n(5,a=C!=null&&C.lastUrl?"copied":"retrieving");try{if(r){const E=await r.getConversationUrl(l.conversation.id);navigator.clipboard.writeText(E),n(5,a="copied")}}catch(E){console.error("Failed to get conversation URL: ",E),n(6,_=E instanceof Error?E.message:"Unknown error"),n(5,a="failure")}finally{setTimeout(()=>{n(5,a=void 0)},1200)}},f,()=>s.pauseRemoteAgentWorkspace(l.id),()=>s.resumeRemoteAgentWorkspace(l.id),function(C){c=C,n(4,c)}]}class rm extends ut{constructor(t){super(),dt(this,t,ex,tx,ct,{thread:0,type:1,afterDelete:16,enableShareService:2,onRename:3})}}function fu(i,{delay:t=0,duration:n=400,easing:e=u1,axis:o="y",scale:r=0}={}){const s=getComputedStyle(i),c=+s.opacity,a=o==="y"?"height":"width",l=parseFloat(s[a]),u=o==="y"?"scaleY":"scaleX",f=o==="y"?["top","bottom"]:["left","right"],m=f.map(R=>`${R[0].toUpperCase()}${R.slice(1)}`),p=parseFloat(s[`padding${m[0]}`]||"0"),_=parseFloat(s[`padding${m[1]}`]||"0"),M=parseFloat(s[`margin${m[0]}`]||"0"),C=parseFloat(s[`margin${m[1]}`]||"0"),T=parseFloat(s[`border${m[0]}Width`]||"0"),E=parseFloat(s[`border${m[1]}Width`]||"0");return{delay:t,duration:n,easing:e,css:R=>{const N=r+(1-r)*R;return`overflow: hidden;opacity: ${R*c};${a}: ${R*l}px;padding-${f[0]}: ${R*p}px;padding-${f[1]}: ${R*_}px;margin-${f[0]}: ${R*M}px;margin-${f[1]}: ${R*C}px;border-${f[0]}-width: ${R*T}px;border-${f[1]}-width: ${R*E}px;transform: ${u}(${N});transform-origin: center;`}}}function mu(i,t,n){const e=i.slice();return e[35]=t[n],e[37]=n,e}function us(i){const t=i.slice(),n=t[8]?t[8](t[0].agent):{name:"Unknown",fullPath:"Unknown"};return t[38]=n,t}function nx(i){let t,n,e,o;var r=i[16].icon;return r&&(n=on(r,{})),{c(){t=L("div"),n&&v(n.$$.fragment),A(t,"class",e="thread-type-icon thread-type-icon--"+i[16].type+" svelte-tvrz8f")},m(s,c){x(s,t,c),n&&w(n,t,null),o=!0},p(s,c){if(65536&c[0]&&r!==(r=s[16].icon)){if(n){j();const a=n;$(a.$$.fragment,1,0,()=>{y(a,1)}),q()}r?(n=on(r,{}),v(n.$$.fragment),d(n.$$.fragment,1),w(n,t,null)):n=null}(!o||65536&c[0]&&e!==(e="thread-type-icon thread-type-icon--"+s[16].type+" svelte-tvrz8f"))&&A(t,"class",e)},i(s){o||(n&&d(n.$$.fragment,s),o=!0)},o(s){n&&$(n.$$.fragment,s),o=!1},d(s){s&&b(t),n&&y(n)}}}function ox(i){let t,n;return t=new x5({props:{hasUpdates:i[0].type==="remoteAgent"&&i[0].has_updates}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};1&o[0]&&(r.hasUpdates=e[0].type==="remoteAgent"&&e[0].has_updates),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function pu(i){let t,n,e;return n=new Pt({props:{nested:!1,hasPointerEvents:!1,content:i[0].isPinned?"Unpin thread":"Pin thread",triggerOn:[Zt.Hover],$$slots:{default:[rx]},$$scope:{ctx:i}}}),{c(){t=L("div"),v(n.$$.fragment),A(t,"class","pin-icon svelte-tvrz8f"),Mt(t,"is-pinned",i[0].isPinned)},m(o,r){x(o,t,r),w(n,t,null),e=!0},p(o,r){const s={};1&r[0]&&(s.content=o[0].isPinned?"Unpin thread":"Pin thread"),65&r[0]|256&r[1]&&(s.$$scope={dirty:r,ctx:o}),n.$set(s),(!e||1&r[0])&&Mt(t,"is-pinned",o[0].isPinned)},i(o){e||(d(n.$$.fragment,o),e=!0)},o(o){$(n.$$.fragment,o),e=!1},d(o){o&&b(t),y(n)}}}function rx(i){let t,n,e,o,r,s;return n=new Wf({}),{c(){t=L("button"),v(n.$$.fragment),A(t,"class","pin-icon__button svelte-tvrz8f"),A(t,"type","button"),A(t,"aria-label",e=i[0].isPinned?"Unpin thread":"Pin thread")},m(c,a){x(c,t,a),w(n,t,null),o=!0,r||(s=[Lt(t,"click",i[26]),Lt(t,"keydown",i[27])],r=!0)},p(c,a){(!o||1&a[0]&&e!==(e=c[0].isPinned?"Unpin thread":"Pin thread"))&&A(t,"aria-label",e)},i(c){o||(d(n.$$.fragment,c),o=!0)},o(c){$(n.$$.fragment,c),o=!1},d(c){c&&b(t),y(n),r=!1,Qe(s)}}}function gu(i){let t,n;return t=new Pt({props:{nested:!1,hasPointerEvents:!1,content:`Repository: ${i[38].fullPath}`,triggerOn:[Zt.Hover],$$slots:{default:[ix]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};257&o[0]&&(r.content=`Repository: ${e[38].fullPath}`),257&o[0]|256&o[1]&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function ix(i){let t,n,e,o,r,s,c,a=i[38].name+"";return e=new om({}),{c(){t=L("div"),n=L("div"),v(e.$$.fragment),o=U(),r=L("div"),s=G(a),A(n,"class","repo-pill-icon svelte-tvrz8f"),A(r,"class","repo-pill-text svelte-tvrz8f"),A(t,"class","repo-pill svelte-tvrz8f")},m(l,u){x(l,t,u),O(t,n),w(e,n,null),O(t,o),O(t,r),O(r,s),c=!0},p(l,u){(!c||257&u[0])&&a!==(a=l[38].name+"")&&_t(s,a)},i(l){c||(d(e.$$.fragment,l),c=!0)},o(l){$(e.$$.fragment,l),c=!1},d(l){l&&b(t),y(e)}}}function hu(i){let t,n;return t=new Pt({props:{nested:!1,hasPointerEvents:!1,triggerOn:[Zt.Hover],content:"Setup Script Agent",$$slots:{default:[sx]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function sx(i){let t,n,e;return n=new _f({}),{c(){t=L("div"),v(n.$$.fragment),A(t,"class","setup-script-badge svelte-tvrz8f")},m(o,r){x(o,t,r),w(n,t,null),e=!0},p:P,i(o){e||(d(n.$$.fragment,o),e=!0)},o(o){$(n.$$.fragment,o),e=!1},d(o){o&&b(t),y(n)}}}function vu(i){let t,n;return t=new Pt({props:{nested:!1,hasPointerEvents:!1,triggerOn:[Zt.Hover],content:yr(i[0],"conversation.hasDraft")?"Draft message":"New thread",$$slots:{default:[cx]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};1&o[0]&&(r.content=yr(e[0],"conversation.hasDraft")?"Draft message":"New thread"),1&o[0]|256&o[1]&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function ax(i){let t,n=yr(i[0],"conversation.hasDraft")?"Draft":"New";return{c(){t=G(n)},m(e,o){x(e,t,o)},p(e,o){1&o[0]&&n!==(n=yr(e[0],"conversation.hasDraft")?"Draft":"New")&&_t(t,n)},d(e){e&&b(t)}}}function cx(i){let t,n,e;return n=new Gt({props:{size:1,$$slots:{default:[ax]},$$scope:{ctx:i}}}),{c(){t=L("div"),v(n.$$.fragment),A(t,"class","draft-badge svelte-tvrz8f")},m(o,r){x(o,t,r),w(n,t,null),e=!0},p(o,r){const s={};1&r[0]|256&r[1]&&(s.$$scope={dirty:r,ctx:o}),n.$set(s)},i(o){e||(d(n.$$.fragment,o),e=!0)},o(o){$(n.$$.fragment,o),e=!1},d(o){o&&b(t),y(n)}}}function lx(i){let t,n;return t=new Gt({props:{size:1,truncate:!0,weight:i[0].type==="remoteAgent"&&i[0].has_updates?"medium":"regular",$$slots:{default:[fx]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};1&o[0]&&(r.weight=e[0].type==="remoteAgent"&&e[0].has_updates?"medium":"regular"),1&o[0]|256&o[1]&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function ux(i){let t,n,e,o,r;function s(l){i[28](l)}function c(l){i[29](l)}let a={size:1,variant:"surface",class:"edit-title-input"};return i[14]!==void 0&&(a.textInput=i[14]),i[13]!==void 0&&(a.value=i[13]),n=new nr({props:a}),te.push(()=>Te(n,"textInput",s)),te.push(()=>Te(n,"value",c)),n.$on("keydown",i[19]),n.$on("blur",i[30]),{c(){t=L("div"),v(n.$$.fragment),A(t,"class","edit-title-container svelte-tvrz8f")},m(l,u){x(l,t,u),w(n,t,null),r=!0},p(l,u){const f={};!e&&16384&u[0]&&(e=!0,f.textInput=l[14],Re(()=>e=!1)),!o&&8192&u[0]&&(o=!0,f.value=l[13],Re(()=>o=!1)),n.$set(f)},i(l){r||(d(n.$$.fragment,l),r=!0)},o(l){$(n.$$.fragment,l),r=!1},d(l){l&&b(t),y(n)}}}function dx(i){let t,n;return t=new Gt({props:{size:1,truncate:!0,class:"draft-title",$$slots:{default:[mx]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};1&o[0]|256&o[1]&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function $x(i){let t,n;return t=new Gt({props:{size:1,truncate:!0,class:"setup-script-title",$$slots:{default:[px]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};256&o[1]&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function fx(i){let t,n=(i[0].title||i[22](i[0])||`New ${i[21][i[0].type]}`)+"";return{c(){t=G(n)},m(e,o){x(e,t,o)},p(e,o){1&o[0]&&n!==(n=(e[0].title||e[22](e[0])||`New ${e[21][e[0].type]}`)+"")&&_t(t,n)},d(e){e&&b(t)}}}function mx(i){var e,o;let t,n=(i[0].title||((o=(e=i[0].conversation)==null?void 0:e.draftExchange)==null?void 0:o.request_message)||"New Thread")+"";return{c(){t=G(n)},m(r,s){x(r,t,s)},p(r,s){var c,a;1&s[0]&&n!==(n=(r[0].title||((a=(c=r[0].conversation)==null?void 0:c.draftExchange)==null?void 0:a.request_message)||"New Thread")+"")&&_t(t,n)},d(r){r&&b(t)}}}function px(i){let t;return{c(){t=G("Generate a setup script")},m(n,e){x(n,t,e)},d(n){n&&b(t)}}}function gx(i){let t,n,e,o,r,s,c=i[0].type==="remoteAgent"&&i[0].is_setup_script_agent&&hu(i),a=i[10]&&vu(i);const l=[$x,dx,ux,lx],u=[];function f(m,p){return m[0].type==="remoteAgent"&&m[0].is_setup_script_agent?0:m[10]?1:m[12]?2:3}return o=f(i),r=u[o]=l[o](i),{c(){t=L("div"),c&&c.c(),n=U(),a&&a.c(),e=U(),r.c(),A(t,"class","agent-title-content svelte-tvrz8f")},m(m,p){x(m,t,p),c&&c.m(t,null),O(t,n),a&&a.m(t,null),O(t,e),u[o].m(t,null),s=!0},p(m,p){m[0].type==="remoteAgent"&&m[0].is_setup_script_agent?c?1&p[0]&&d(c,1):(c=hu(m),c.c(),d(c,1),c.m(t,n)):c&&(j(),$(c,1,1,()=>{c=null}),q()),m[10]?a?(a.p(m,p),1024&p[0]&&d(a,1)):(a=vu(m),a.c(),d(a,1),a.m(t,e)):a&&(j(),$(a,1,1,()=>{a=null}),q());let _=o;o=f(m),o===_?u[o].p(m,p):(j(),$(u[_],1,1,()=>{u[_]=null}),q(),r=u[o],r?r.p(m,p):(r=u[o]=l[o](m),r.c()),d(r,1),r.m(t,null))},i(m){s||(d(c),d(a),d(r),s=!0)},o(m){$(c),$(a),$(r),s=!1},d(m){m&&b(t),c&&c.d(),a&&a.d(),u[o].d()}}}function wu(i){let t,n,e,o,r;return n=new xp({props:{workspaceStatus:i[0].workspace_status,status:i[0].status,isExpanded:i[2]>330,hasUpdates:i[0].has_updates}}),o=new Jf({props:{agentId:i[0].agent.remote_agent_id,status:i[0].status,workspaceStatus:i[0].workspace_status}}),{c(){t=L("div"),v(n.$$.fragment),e=U(),v(o.$$.fragment),A(t,"class","agent-status svelte-tvrz8f")},m(s,c){x(s,t,c),w(n,t,null),x(s,e,c),w(o,s,c),r=!0},p(s,c){const a={};1&c[0]&&(a.workspaceStatus=s[0].workspace_status),1&c[0]&&(a.status=s[0].status),4&c[0]&&(a.isExpanded=s[2]>330),1&c[0]&&(a.hasUpdates=s[0].has_updates),n.$set(a);const l={};1&c[0]&&(l.agentId=s[0].agent.remote_agent_id),1&c[0]&&(l.status=s[0].status),1&c[0]&&(l.workspaceStatus=s[0].workspace_status),o.$set(l)},i(s){r||(d(n.$$.fragment,s),d(o.$$.fragment,s),r=!0)},o(s){$(n.$$.fragment,s),$(o.$$.fragment,s),r=!1},d(s){s&&(b(t),b(e)),y(n),y(o,s)}}}function yu(i){let t,n,e=JSON.stringify(i[17].slice(-9)),o=xu(i);return{c(){o.c(),t=mt()},m(r,s){o.m(r,s),x(r,t,s),n=!0},p(r,s){131072&s[0]&&ct(e,e=JSON.stringify(r[17].slice(-9)))?(j(),$(o,1,1,P),q(),o=xu(r),o.c(),d(o,1),o.m(t.parentNode,t)):o.p(r,s)},i(r){n||(d(o),n=!0)},o(r){$(o),n=!1},d(r){r&&b(t),o.d(r)}}}function hx(i){let t,n;return{c(){t=L("div"),t.textContent="|",n=U(),A(t,"class","agent-chat-history__item svelte-tvrz8f")},m(e,o){x(e,t,o),x(e,n,o)},p:P,d(e){e&&(b(t),b(n))}}}function bu(i,t){let n,e,o;return e=new Pt({props:{delayDurationMs:0,content:Di(t[35]||"",170),side:"bottom",nested:!1,hasPointerEvents:!1,triggerOn:[Zt.Hover],$$slots:{default:[hx]},$$scope:{ctx:t}}}),{key:i,first:null,c(){n=mt(),v(e.$$.fragment),this.first=n},m(r,s){x(r,n,s),w(e,r,s),o=!0},p(r,s){t=r;const c={};131072&s[0]&&(c.content=Di(t[35]||"",170)),256&s[1]&&(c.$$scope={dirty:s,ctx:t}),e.$set(c)},i(r){o||(d(e.$$.fragment,r),o=!0)},o(r){$(e.$$.fragment,r),o=!1},d(r){r&&b(n),y(e,r)}}}function xu(i){let t,n,e=[],o=new Map,r=se(i[17].slice(-9));const s=c=>c[35]+"-"+c[37];for(let c=0;c<r.length;c+=1){let a=mu(i,r,c),l=s(a);o.set(l,e[c]=bu(l,a))}return{c(){t=L("div");for(let c=0;c<e.length;c+=1)e[c].c();A(t,"class","agent-chat-history svelte-tvrz8f")},m(c,a){x(c,t,a);for(let l=0;l<e.length;l+=1)e[l]&&e[l].m(t,null);n=!0},p(c,a){131072&a[0]&&(r=se(c[17].slice(-9)),j(),e=qr(e,a,s,1,c,r,o,t,Bi,bu,null,mu),q())},i(c){if(!n){for(let a=0;a<r.length;a+=1)d(e[a]);n=!0}},o(c){for(let a=0;a<e.length;a+=1)$(e[a]);n=!1},d(c){c&&b(t);for(let a=0;a<e.length;a+=1)e[a].d()}}}function _u(i){let t,n,e;return n=new rm({props:{thread:i[0],type:i[15],afterDelete:i[4],enableShareService:i[9],onRename:i[20]}}),{c(){t=L("div"),v(n.$$.fragment),A(t,"class","agent-actions svelte-tvrz8f")},m(o,r){x(o,t,r),w(n,t,null),e=!0},p(o,r){const s={};1&r[0]&&(s.thread=o[0]),32768&r[0]&&(s.type=o[15]),16&r[0]&&(s.afterDelete=o[4]),512&r[0]&&(s.enableShareService=o[9]),n.$set(s)},i(o){e||(d(n.$$.fragment,o),e=!0)},o(o){$(n.$$.fragment,o),e=!1},d(o){o&&b(t),y(n)}}}function Cu(i){let t,n,e,o,r,s,c,a,l,u,f,m,p,_,M,C=i[0].type==="remoteAgent"&&i[0].agent&&i[7]&&i[7](i[0].agent);const T=[ox,nx],E=[];function R(H,Y){return H[15]==="remoteAgent"?0:1}r=R(i),s=E[r]=T[r](i);let N=!i[10]&&i[3]&&i[0].isPinned&&pu(i),Z=C&&gu(us(i));f=new Pt({props:{nested:!1,hasPointerEvents:!1,content:Di(i[0].title,200),triggerOn:[Zt.Hover],delayDurationMs:1e3,$$slots:{default:[gx]},$$scope:{ctx:i}}});let Q=i[0].type==="remoteAgent"&&i[0].status&&wu(i),X=i[17].length>0&&yu(i),K=i[0].id!==tr&&_u(i);return{c(){t=L("div"),n=L("div"),e=L("div"),o=L("div"),s.c(),c=U(),N&&N.c(),a=U(),Z&&Z.c(),l=U(),u=L("div"),v(f.$$.fragment),m=U(),Q&&Q.c(),p=U(),X&&X.c(),_=U(),K&&K.c(),A(o,"class","agent-icon svelte-tvrz8f"),A(u,"class","agent-title svelte-tvrz8f"),A(e,"class","agent-details--left svelte-tvrz8f"),A(n,"class","agent-details svelte-tvrz8f"),A(t,"class","agent-content svelte-tvrz8f")},m(H,Y){x(H,t,Y),O(t,n),O(n,e),O(e,o),E[r].m(o,null),O(e,c),N&&N.m(e,null),O(e,a),Z&&Z.m(e,null),O(e,l),O(e,u),w(f,u,null),O(n,m),Q&&Q.m(n,null),O(t,p),X&&X.m(t,null),O(t,_),K&&K.m(t,null),M=!0},p(H,Y){let V=r;r=R(H),r===V?E[r].p(H,Y):(j(),$(E[V],1,1,()=>{E[V]=null}),q(),s=E[r],s?s.p(H,Y):(s=E[r]=T[r](H),s.c()),d(s,1),s.m(o,null)),!H[10]&&H[3]&&H[0].isPinned?N?(N.p(H,Y),1033&Y[0]&&d(N,1)):(N=pu(H),N.c(),d(N,1),N.m(e,a)):N&&(j(),$(N,1,1,()=>{N=null}),q()),129&Y[0]&&(C=H[0].type==="remoteAgent"&&H[0].agent&&H[7]&&H[7](H[0].agent)),C?Z?(Z.p(us(H),Y),129&Y[0]&&d(Z,1)):(Z=gu(us(H)),Z.c(),d(Z,1),Z.m(e,l)):Z&&(j(),$(Z,1,1,()=>{Z=null}),q());const J={};1&Y[0]&&(J.content=Di(H[0].title,200)),29697&Y[0]|256&Y[1]&&(J.$$scope={dirty:Y,ctx:H}),f.$set(J),H[0].type==="remoteAgent"&&H[0].status?Q?(Q.p(H,Y),1&Y[0]&&d(Q,1)):(Q=wu(H),Q.c(),d(Q,1),Q.m(n,null)):Q&&(j(),$(Q,1,1,()=>{Q=null}),q()),H[17].length>0?X?(X.p(H,Y),131072&Y[0]&&d(X,1)):(X=yu(H),X.c(),d(X,1),X.m(t,_)):X&&(j(),$(X,1,1,()=>{X=null}),q()),H[0].id!==tr?K?(K.p(H,Y),1&Y[0]&&d(K,1)):(K=_u(H),K.c(),d(K,1),K.m(t,null)):K&&(j(),$(K,1,1,()=>{K=null}),q())},i(H){M||(d(s),d(N),d(Z),d(f.$$.fragment,H),d(Q),d(X),d(K),M=!0)},o(H){$(s),$(N),$(Z),$(f.$$.fragment,H),$(Q),$(X),$(K),M=!1},d(H){H&&b(t),E[r].d(),N&&N.d(),Z&&Z.d(),y(f),Q&&Q.d(),X&&X.d(),K&&K.d()}}}function vx(i){let t,n,e,o,r,s,c=`${i[0].title}--${i[0].isPinned}`,a=Cu(i);return{c(){t=L("div"),a.c(),A(t,"class",n="agent-row agent-row--"+i[0].type+" svelte-tvrz8f"),A(t,"role","button"),A(t,"tabindex","0"),A(t,"data-testid",wx),Mt(t,"agent-row--active",i[1]),Mt(t,"agent-row--new",i[10]),Mt(t,"agent-row--setup-script",i[0].type==="remoteAgent"&&i[0].is_setup_script_agent)},m(l,u){x(l,t,u),a.m(t,null),o=!0,r||(s=[Lt(t,"click",function(){Ne(i[5])&&i[5].apply(this,arguments)}),Lt(t,"keydown",i[31])],r=!0)},p(l,u){i=l,1&u[0]&&ct(c,c=`${i[0].title}--${i[0].isPinned}`)?(j(),$(a,1,1,P),q(),a=Cu(i),a.c(),d(a,1),a.m(t,null)):a.p(i,u),(!o||1&u[0]&&n!==(n="agent-row agent-row--"+i[0].type+" svelte-tvrz8f"))&&A(t,"class",n),(!o||3&u[0])&&Mt(t,"agent-row--active",i[1]),(!o||1025&u[0])&&Mt(t,"agent-row--new",i[10]),(!o||1&u[0])&&Mt(t,"agent-row--setup-script",i[0].type==="remoteAgent"&&i[0].is_setup_script_agent)},i(l){o||(d(a),Nn(()=>{o&&(e||(e=xn(t,fu,{duration:150},!0)),e.run(1))}),o=!0)},o(l){$(a),e||(e=xn(t,fu,{duration:150},!1)),e.run(0),o=!1},d(l){l&&b(t),a.d(l),l&&e&&e.end(),r=!1,Qe(s)}}}const wx="thread-list-item";function yr(i,t){return t.split(".").reduce((n,e)=>n&&n[e]!==void 0?n[e]:void 0,i)}function Di(i="",t){return i.length<=t?i:i.slice(0,t-3)+"..."}function yx(i,t,n){let e,o,r,s,c,a,l,u,f=P;i.$$.on_destroy.push(()=>f());let m,{thread:p}=t,{isSelected:_=!1}=t,{containerWidth:M=0}=t,{isExpanded:C=!1}=t,{afterDelete:T}=t,{onSelect:E}=t,{onTogglePinned:R}=t,{isFromDifferentRepo:N=()=>!1}=t,{getRepoInfo:Z=()=>({name:"Unknown",fullPath:"Unknown"})}=t,{enableShareService:Q=!1}=t,X=St("chatModel"),K=St(Tn.key),H=!1,Y=p.title;async function V(J){if(J.trim()&&J!==p.title)if(p.type==="remoteAgent")try{K&&await K.updateRemoteAgentTitle(p.id,J)}catch(rt){console.error("Failed to update remote agent title:",rt)}else["chat","localAgent"].includes(p.type)&&X&&(X.renameConversation(p.id,J),n(0,p.title=J,p));n(12,H=!1)}return ro(()=>{const J=rt=>{H&&m&&!m.contains(rt.target)&&V(Y)};return document.addEventListener("click",J),()=>{document.removeEventListener("click",J)}}),i.$$set=J=>{"thread"in J&&n(0,p=J.thread),"isSelected"in J&&n(1,_=J.isSelected),"containerWidth"in J&&n(2,M=J.containerWidth),"isExpanded"in J&&n(3,C=J.isExpanded),"afterDelete"in J&&n(4,T=J.afterDelete),"onSelect"in J&&n(5,E=J.onSelect),"onTogglePinned"in J&&n(6,R=J.onTogglePinned),"isFromDifferentRepo"in J&&n(7,N=J.isFromDifferentRepo),"getRepoInfo"in J&&n(8,Z=J.getRepoInfo),"enableShareService"in J&&n(9,Q=J.enableShareService)},i.$$.update=()=>{1&i.$$.dirty[0]&&n(17,e=(yr(p,"conversation.chatHistory")||[]).map(J=>J.request_message).filter(Boolean)),1&i.$$.dirty[0]&&n(10,o=p.isNew),1&i.$$.dirty[0]&&n(24,r=p.type==="localAgent"),1&i.$$.dirty[0]&&n(23,s=p.type==="remoteAgent"),58722304&i.$$.dirty[0]&&n(16,a=Hi({isConversationAgentic:r,agentExecutionMode:c?u:void 0,isBackgroundAgent:s})),1025&i.$$.dirty[0]&&n(15,l=p.type||(o&&yr(p,"conversation.extraData.isRemoteAgentConversation")?"remoteAgent":"chat"))},n(11,c=X==null?void 0:X.agentExecutionMode),f(),f=ce(c,J=>n(25,u=J)),[p,_,M,C,T,E,R,N,Z,Q,o,c,H,Y,m,l,a,e,V,function(J){J.key==="Enter"?(J.preventDefault(),V(Y)):J.key==="Escape"&&(J.preventDefault(),n(13,Y=p.title),n(12,H=!1))},function(){n(12,H=!0),n(13,Y=p.title),setTimeout(()=>m==null?void 0:m.focus(),0)},{chat:"Chat",localAgent:"Local Agent",remoteAgent:"Remote Agent"},J=>{var lt;const rt=(((lt=J==null?void 0:J.conversation)==null?void 0:lt.chatHistory)||[]).find(ot=>ot.request_message);return rt&&rt.request_message||""},s,r,u,J=>{J.stopPropagation(),R(J)},J=>{J.key!=="Enter"&&J.key!==" "||(J.stopPropagation(),R(J))},function(J){m=J,n(14,m)},function(J){Y=J,n(13,Y)},()=>V(Y),J=>{J.key==="Enter"&&E()}]}class im extends ut{constructor(t){super(),dt(this,t,yx,vx,ct,{thread:0,isSelected:1,containerWidth:2,isExpanded:3,afterDelete:4,onSelect:5,onTogglePinned:6,isFromDifferentRepo:7,getRepoInfo:8,enableShareService:9},null,[-1,-1])}}function Au(i,t,n){const e=i.slice();return e[7]=t[n],e}function bx(i){var e;let t,n=i[3]!=="all"?`${((e=i[0].find(i[4]))==null?void 0:e.label)||""}`:"All";return{c(){t=G(n)},m(o,r){x(o,t,r)},p(o,r){var s;9&r&&n!==(n=o[3]!=="all"?`${((s=o[0].find(o[4]))==null?void 0:s.label)||""}`:"All")&&_t(t,n)},d(o){o&&b(t)}}}function xx(i){let t,n,e,o,r,s;return n=new Gt({props:{size:1,$$slots:{default:[bx]},$$scope:{ctx:i}}}),r=new Oo({}),{c(){t=L("div"),v(n.$$.fragment),e=U(),o=L("div"),v(r.$$.fragment),A(o,"class","dropdown-indicator svelte-errogv"),A(t,"class","c-thread-type-filter-dropdown__trigger svelte-errogv")},m(c,a){x(c,t,a),w(n,t,null),O(t,e),O(t,o),w(r,o,null),s=!0},p(c,a){const l={};1033&a&&(l.$$scope={dirty:a,ctx:c}),n.$set(l)},i(c){s||(d(n.$$.fragment,c),d(r.$$.fragment,c),s=!0)},o(c){$(n.$$.fragment,c),$(r.$$.fragment,c),s=!1},d(c){c&&b(t),y(n),y(r)}}}function _x(i){let t,n=i[7].label+"";return{c(){t=G(n)},m(e,o){x(e,t,o)},p(e,o){1&o&&n!==(n=e[7].label+"")&&_t(t,n)},d(e){e&&b(t)}}}function Cx(i){let t,n,e,o,r,s,c,a,l=i[7].count+"";return e=new Gt({props:{size:2,$$slots:{default:[_x]},$$scope:{ctx:i}}}),{c(){t=L("div"),n=L("span"),v(e.$$.fragment),o=U(),r=L("span"),s=G(l),c=U(),A(n,"class","filter-label svelte-errogv"),A(r,"class","filter-count svelte-errogv"),A(t,"class","filter-item svelte-errogv")},m(u,f){x(u,t,f),O(t,n),w(e,n,null),O(t,o),O(t,r),O(r,s),x(u,c,f),a=!0},p(u,f){const m={};1025&f&&(m.$$scope={dirty:f,ctx:u}),e.$set(m),(!a||1&f)&&l!==(l=u[7].count+"")&&_t(s,l)},i(u){a||(d(e.$$.fragment,u),a=!0)},o(u){$(e.$$.fragment,u),a=!1},d(u){u&&(b(t),b(c)),y(e)}}}function Mu(i){let t,n;function e(){return i[5](i[7])}return t=new wt.Item({props:{highlight:i[3]===i[7].value,onSelect:e,$$slots:{default:[Cx]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(o,r){w(t,o,r),n=!0},p(o,r){i=o;const s={};9&r&&(s.highlight=i[3]===i[7].value),7&r&&(s.onSelect=e),1025&r&&(s.$$scope={dirty:r,ctx:i}),t.$set(s)},i(o){n||(d(t.$$.fragment,o),n=!0)},o(o){$(t.$$.fragment,o),n=!1},d(o){y(t,o)}}}function Ax(i){let t,n,e=se(i[0]),o=[];for(let s=0;s<e.length;s+=1)o[s]=Mu(Au(i,e,s));const r=s=>$(o[s],1,1,()=>{o[s]=null});return{c(){t=L("div");for(let s=0;s<o.length;s+=1)o[s].c();A(t,"class","filters-list svelte-errogv")},m(s,c){x(s,t,c);for(let a=0;a<o.length;a+=1)o[a]&&o[a].m(t,null);n=!0},p(s,c){if(15&c){let a;for(e=se(s[0]),a=0;a<e.length;a+=1){const l=Au(s,e,a);o[a]?(o[a].p(l,c),d(o[a],1)):(o[a]=Mu(l),o[a].c(),d(o[a],1),o[a].m(t,null))}for(j(),a=e.length;a<o.length;a+=1)r(a);q()}},i(s){if(!n){for(let c=0;c<e.length;c+=1)d(o[c]);n=!0}},o(s){o=o.filter(Boolean);for(let c=0;c<o.length;c+=1)$(o[c]);n=!1},d(s){s&&b(t),pn(o,s)}}}function Mx(i){let t,n,e,o;return t=new wt.Trigger({props:{$$slots:{default:[xx]},$$scope:{ctx:i}}}),e=new wt.Content({props:{side:"bottom",align:"start",size:1,$$slots:{default:[Ax]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment),n=U(),v(e.$$.fragment)},m(r,s){w(t,r,s),x(r,n,s),w(e,r,s),o=!0},p(r,s){const c={};1033&s&&(c.$$scope={dirty:s,ctx:r}),t.$set(c);const a={};1039&s&&(a.$$scope={dirty:s,ctx:r}),e.$set(a)},i(r){o||(d(t.$$.fragment,r),d(e.$$.fragment,r),o=!0)},o(r){$(t.$$.fragment,r),$(e.$$.fragment,r),o=!1},d(r){r&&b(n),y(t,r),y(e,r)}}}function kx(i){let t,n,e,o;function r(c){i[6](c)}let s={$$slots:{default:[Mx]},$$scope:{ctx:i}};return i[2]!==void 0&&(s.requestClose=i[2]),n=new wt.Root({props:s}),te.push(()=>Te(n,"requestClose",r)),{c(){t=L("div"),v(n.$$.fragment),A(t,"class","c-thread-type-filter-dropdown")},m(c,a){x(c,t,a),w(n,t,null),o=!0},p(c,[a]){const l={};1039&a&&(l.$$scope={dirty:a,ctx:c}),!e&&4&a&&(e=!0,l.requestClose=c[2],Re(()=>e=!1)),n.$set(l)},i(c){o||(d(n.$$.fragment,c),o=!0)},o(c){$(n.$$.fragment,c),o=!1},d(c){c&&b(t),y(n)}}}function Sx(i,t,n){let e,o=P,r=()=>(o(),o=ce(a,l=>n(3,e=l)),a);i.$$.on_destroy.push(()=>o());let s,{threadTypeFilters:c=[]}=t,{activeThreadTypeFilter:a=Le("all")}=t;return r(),i.$$set=l=>{"threadTypeFilters"in l&&n(0,c=l.threadTypeFilters),"activeThreadTypeFilter"in l&&r(n(1,a=l.activeThreadTypeFilter))},[c,a,s,e,l=>l.value===e,l=>{a.set(l.value),s()},function(l){s=l,n(2,s)}]}class Tx extends ut{constructor(t){super(),dt(this,t,Sx,kx,ct,{threadTypeFilters:0,activeThreadTypeFilter:1})}}function ku(i){return{isDragging:!1,startY:0,startHeight:0,currentHeight:i,hasUserResized:!1,hasDraggedThisClick:!1}}function Ni(i,t){const n=Math.floor(i-300);return Math.max(Math.min(t,n),0)}function Su(i,t,n){return n?(i.preventDefault(),{...t,isDragging:!0,hasDraggedThisClick:!1,startY:i.clientY,startHeight:t.currentHeight}):t}function Tu(i,t,n,e){if(!e||!t.isDragging)return t;const o=i.clientY-t.startY,r=t.startHeight+o,s=Ni(n.windowHeight,n.maxContentHeight),c=Math.max(n.minHeight,Math.min(s,r));return{...t,hasDraggedThisClick:!0,currentHeight:c}}function Eu(i){const t=i.isDragging;return{...i,isDragging:!1,hasUserResized:i.hasUserResized||t}}function Iu(i){return{...i,hasDraggedThisClick:!1}}function Lu(i,t){const n=Ni(t.windowHeight,t.maxContentHeight);if(i.currentHeight>n){const e=Math.max(t.minHeight,Math.min(n,i.currentHeight));return{...i,currentHeight:e}}return i}function Ru(i,t,n){const e=i.slice();return e[122]=t[n],e[124]=n,e}function Du(i,t,n){const e=i.slice();return e[125]=t[n],e[127]=n,e}function Nu(i,t,n){const e=i.slice();return e[128]=t[n],e}function Pu(i,t,n){const e=i.slice();return e[125]=t[n],e[127]=n,e}function Ex(i){let t;return{c(){t=G("Threads")},m(n,e){x(n,t,e)},d(n){n&&b(t)}}}function Fu(i){let t,n,e,o;return n=new Tx({props:{threadTypeFilters:i[29],activeThreadTypeFilter:i[43]}}),{c(){t=L("div"),v(n.$$.fragment),A(t,"class","svelte-1lid8lb")},m(r,s){x(r,t,s),w(n,t,null),o=!0},p(r,s){const c={};536870912&s[0]&&(c.threadTypeFilters=r[29]),n.$set(c)},i(r){o||(d(n.$$.fragment,r),r&&Nn(()=>{o&&(e||(e=xn(t,po,{axis:"x",duration:150},!0)),e.run(1))}),o=!0)},o(r){$(n.$$.fragment,r),r&&(e||(e=xn(t,po,{axis:"x",duration:150},!1)),e.run(0)),o=!1},d(r){r&&b(t),y(n),r&&e&&e.end()}}}function Ou(i){let t,n,e,o,r,s,c=i[11]&&zu(i);return o=new Pt({props:{content:"Search threads",nested:!1,hasPointerEvents:!1,$$slots:{default:[Nx]},$$scope:{ctx:i}}}),{c(){t=L("div"),c&&c.c(),n=U(),e=L("div"),v(o.$$.fragment),A(e,"class","search-icon svelte-1lid8lb"),Mt(e,"is-active",i[11]),A(t,"class","search-container action-button svelte-1lid8lb"),Mt(t,"is-active",i[11])},m(a,l){x(a,t,l),c&&c.m(t,null),O(t,n),O(t,e),w(o,e,null),s=!0},p(a,l){a[11]?c?(c.p(a,l),2048&l[0]&&d(c,1)):(c=zu(a),c.c(),d(c,1),c.m(t,n)):c&&(j(),$(c,1,1,()=>{c=null}),q());const u={};1&l[0]|256&l[4]&&(u.$$scope={dirty:l,ctx:a}),o.$set(u),(!s||2048&l[0])&&Mt(e,"is-active",a[11]),(!s||2048&l[0])&&Mt(t,"is-active",a[11])},i(a){s||(d(c),d(o.$$.fragment,a),a&&Nn(()=>{s&&(r||(r=xn(t,dr,{y:-2,duration:150},!0)),r.run(1))}),s=!0)},o(a){$(c),$(o.$$.fragment,a),a&&(r||(r=xn(t,dr,{y:-2,duration:150},!1)),r.run(0)),s=!1},d(a){a&&b(t),c&&c.d(),y(o),a&&r&&r.end()}}}function zu(i){var m,p;let t,n,e,o,r,s,c;function a(_){i[92](_)}function l(_){i[93](_)}let u={placeholder:`Search ${i[9]==="all"?"threads":(p=(m=i[29].find(i[91]))==null?void 0:m.label)==null?void 0:p.toLowerCase()}`,size:1,variant:"surface",class:"search-input",$$slots:{iconLeft:[Ix]},$$scope:{ctx:i}};i[0]!==void 0&&(u.value=i[0]),i[10]!==void 0&&(u.textInput=i[10]),n=new nr({props:u}),te.push(()=>Te(n,"value",a)),te.push(()=>Te(n,"textInput",l)),n.$on("keydown",i[94]),n.$on("focus",i[95]),n.$on("blur",i[96]);let f=i[0]&&Bu(i);return{c(){t=L("div"),v(n.$$.fragment),r=U(),f&&f.c(),A(t,"class","search-field-container svelte-1lid8lb")},m(_,M){x(_,t,M),w(n,t,null),O(t,r),f&&f.m(t,null),c=!0},p(_,M){var T,E;const C={};536871424&M[0]&&(C.placeholder=`Search ${_[9]==="all"?"threads":(E=(T=_[29].find(_[91]))==null?void 0:T.label)==null?void 0:E.toLowerCase()}`),256&M[4]&&(C.$$scope={dirty:M,ctx:_}),!e&&1&M[0]&&(e=!0,C.value=_[0],Re(()=>e=!1)),!o&&1024&M[0]&&(o=!0,C.textInput=_[10],Re(()=>o=!1)),n.$set(C),_[0]?f?(f.p(_,M),1&M[0]&&d(f,1)):(f=Bu(_),f.c(),d(f,1),f.m(t,null)):f&&(j(),$(f,1,1,()=>{f=null}),q())},i(_){c||(d(n.$$.fragment,_),d(f),_&&Nn(()=>{c&&(s||(s=xn(t,po,{axis:"x",duration:150},!0)),s.run(1))}),c=!0)},o(_){$(n.$$.fragment,_),$(f),_&&(s||(s=xn(t,po,{axis:"x",duration:150},!1)),s.run(0)),c=!1},d(_){_&&b(t),y(n),f&&f.d(),_&&s&&s.end()}}}function Ix(i){let t,n,e;return n=new pf({}),{c(){t=L("div"),v(n.$$.fragment),A(t,"class","search-field-container__icon svelte-1lid8lb"),A(t,"slot","iconLeft")},m(o,r){x(o,t,r),w(n,t,null),e=!0},p:P,i(o){e||(d(n.$$.fragment,o),e=!0)},o(o){$(n.$$.fragment,o),e=!1},d(o){o&&b(t),y(n)}}}function Bu(i){let t,n,e;return n=new Pt({props:{content:"Clear search",nested:!1,$$slots:{default:[Rx]},$$scope:{ctx:i}}}),{c(){t=L("div"),v(n.$$.fragment),A(t,"class","clear-search-button svelte-1lid8lb")},m(o,r){x(o,t,r),w(n,t,null),e=!0},p(o,r){const s={};256&r[4]&&(s.$$scope={dirty:r,ctx:o}),n.$set(s)},i(o){e||(d(n.$$.fragment,o),e=!0)},o(o){$(n.$$.fragment,o),e=!1},d(o){o&&b(t),y(n)}}}function Lx(i){let t,n;return t=new rr({}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function Rx(i){let t,n;return t=new fe({props:{variant:"ghost",color:"neutral",size:1,$$slots:{default:[Lx]},$$scope:{ctx:i}}}),t.$on("click",i[39]),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};256&o[4]&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function Dx(i){let t,n;return t=new pf({}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function Nx(i){let t,n;return t=new fe({props:{variant:"ghost",color:i[0].trim()!==""?"accent":"neutral",size:1,$$slots:{default:[Dx]},$$scope:{ctx:i}}}),t.$on("click",i[38]),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};1&o[0]&&(r.color=e[0].trim()!==""?"accent":"neutral"),256&o[4]&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function Uu(i){let t,n,e;return n=new Pt({props:{content:"Failed to reload remote agents. Click to retry. "+i[6],nested:!1,triggerOn:[Zt.Hover],hasPointerEvents:!1,$$slots:{default:[Fx]},$$scope:{ctx:i}}}),{c(){t=L("div"),v(n.$$.fragment),A(t,"class","reload-button svelte-1lid8lb")},m(o,r){x(o,t,r),w(n,t,null),e=!0},p(o,r){const s={};64&r[0]&&(s.content="Failed to reload remote agents. Click to retry. "+o[6]),256&r[4]&&(s.$$scope={dirty:r,ctx:o}),n.$set(s)},i(o){e||(d(n.$$.fragment,o),e=!0)},o(o){$(n.$$.fragment,o),e=!1},d(o){o&&b(t),y(n)}}}function Px(i){let t,n;return t=new Lp({}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function Fx(i){let t,n;return t=new fe({props:{variant:"ghost-block",color:"neutral",size:1,$$slots:{default:[Px]},$$scope:{ctx:i}}}),t.$on("click",i[98]),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};256&o[4]&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function Hu(i){let t,n,e,o,r,s,c,a=[],l=new Map,u=se(i[24]);const f=m=>`${m[128].groupTitle}`;for(let m=0;m<u.length;m+=1){let p=Nu(i,u,m),_=f(p);l.set(_,a[m]=Wu(_,p))}return{c(){t=L("div"),n=L("div");for(let m=0;m<a.length;m+=1)a[m].c();A(n,"class","agents-list-container__inner svelte-1lid8lb"),Nn(()=>i[103].call(n)),A(t,"class","agents-list svelte-1lid8lb"),qn(t,"height",i[23]),qn(t,"max-height",i[22]),Nn(()=>i[105].call(t))},m(m,p){x(m,t,p),O(t,n);for(let _=0;_<a.length;_+=1)a[_]&&a[_].m(n,null);e=$s(n,i[103].bind(n)),i[104](t),o=$s(t,i[105].bind(t)),r=!0,s||(c=Ss(i[40].call(null,t)),s=!0)},p(m,p){16793730&p[0]|1476462596&p[1]&&(u=se(m[24]),j(),a=qr(a,p,f,1,m,u,l,n,Bi,Wu,null,Nu),q()),(!r||8388608&p[0])&&qn(t,"height",m[23]),(!r||4194304&p[0])&&qn(t,"max-height",m[22])},i(m){if(!r){for(let p=0;p<u.length;p+=1)d(a[p]);r=!0}},o(m){for(let p=0;p<a.length;p+=1)$(a[p]);r=!1},d(m){m&&b(t);for(let p=0;p<a.length;p+=1)a[p].d();e(),i[104](null),o(),s=!1,c()}}}function ju(i){let t,n,e,o,r,s,c,a;return e=new Gt({props:{size:1,weight:"medium",color:"secondary",$$slots:{default:[Ox]},$$scope:{ctx:i}}}),s=new wt.Root({props:{$$slots:{default:[qx]},$$scope:{ctx:i}}}),{c(){t=L("div"),n=L("div"),v(e.$$.fragment),o=U(),r=L("div"),v(s.$$.fragment),A(r,"class","thread-group-options svelte-1lid8lb"),A(n,"class","thread-group-header-content svelte-1lid8lb"),A(t,"class","thread-group-header svelte-1lid8lb")},m(l,u){x(l,t,u),O(t,n),w(e,n,null),O(n,o),O(n,r),w(s,r,null),a=!0},p(l,u){const f={};16777216&u[0]|256&u[4]&&(f.$$scope={dirty:u,ctx:l}),e.$set(f);const m={};16777216&u[0]|256&u[4]&&(m.$$scope={dirty:u,ctx:l}),s.$set(m)},i(l){a||(d(e.$$.fragment,l),d(s.$$.fragment,l),Nn(()=>{a&&(c||(c=xn(t,po,{duration:150},!0)),c.run(1))}),a=!0)},o(l){$(e.$$.fragment,l),$(s.$$.fragment,l),c||(c=xn(t,po,{duration:150},!1)),c.run(0),a=!1},d(l){l&&b(t),y(e),y(s),l&&c&&c.end()}}}function Ox(i){let t,n=i[128].groupTitle+"";return{c(){t=G(n)},m(e,o){x(e,t,o)},p(e,o){16777216&o[0]&&n!==(n=e[128].groupTitle+"")&&_t(t,n)},d(e){e&&b(t)}}}function zx(i){let t,n;return t=new or({}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function Bx(i){let t,n;return t=new fe({props:{variant:"ghost-block",color:"neutral",size:1,title:"Group options",$$slots:{default:[zx]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};256&o[4]&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function Ux(i){let t,n,e,o,r=i[128].threads.length+"",s=i[128].threads.length>1?"s":"";return{c(){t=G("Delete "),n=G(r),e=G(" thread"),o=G(s)},m(c,a){x(c,t,a),x(c,n,a),x(c,e,a),x(c,o,a)},p(c,a){16777216&a[0]&&r!==(r=c[128].threads.length+"")&&_t(n,r),16777216&a[0]&&s!==(s=c[128].threads.length>1?"s":"")&&_t(o,s)},d(c){c&&(b(t),b(n),b(e),b(o))}}}function Hx(i){let t,n;return t=new Wr({props:{slot:"iconLeft"}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p:P,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function jx(i){let t,n;function e(){return i[99](i[128])}return t=new wt.Item({props:{color:"error",onSelect:e,$$slots:{iconLeft:[Hx],default:[Ux]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(o,r){w(t,o,r),n=!0},p(o,r){i=o;const s={};16777216&r[0]&&(s.onSelect=e),16777216&r[0]|256&r[4]&&(s.$$scope={dirty:r,ctx:i}),t.$set(s)},i(o){n||(d(t.$$.fragment,o),n=!0)},o(o){$(t.$$.fragment,o),n=!1},d(o){y(t,o)}}}function qx(i){let t,n,e,o;return t=new wt.Trigger({props:{$$slots:{default:[Bx]},$$scope:{ctx:i}}}),e=new wt.Content({props:{size:1,side:"bottom",align:"end",$$slots:{default:[jx]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment),n=U(),v(e.$$.fragment)},m(r,s){w(t,r,s),x(r,n,s),w(e,r,s),o=!0},p(r,s){const c={};256&s[4]&&(c.$$scope={dirty:s,ctx:r}),t.$set(c);const a={};16777216&s[0]|256&s[4]&&(a.$$scope={dirty:s,ctx:r}),e.$set(a)},i(r){o||(d(t.$$.fragment,r),d(e.$$.fragment,r),o=!0)},o(r){$(t.$$.fragment,r),$(e.$$.fragment,r),o=!1},d(r){r&&b(n),y(t,r),y(e,r)}}}function qu(i,t){let n,e,o;function r(){return t[100](t[125],t[128],t[127])}function s(){return t[101](t[125])}function c(...a){return t[102](t[125],...a)}return e=new im({props:{thread:t[125],containerWidth:t[14],isSelected:t[7]===t[125].id,afterDelete:r,onSelect:s,onTogglePinned:c,isFromDifferentRepo:t[58],getRepoInfo:t[59],enableShareService:t[33],isExpanded:t[1]}}),{key:i,first:null,c(){n=mt(),v(e.$$.fragment),this.first=n},m(a,l){x(a,n,l),w(e,a,l),o=!0},p(a,l){t=a;const u={};16777216&l[0]&&(u.thread=t[125]),16384&l[0]&&(u.containerWidth=t[14]),16777344&l[0]&&(u.isSelected=t[7]===t[125].id),16777344&l[0]&&(u.afterDelete=r),16777216&l[0]&&(u.onSelect=s),16777216&l[0]&&(u.onTogglePinned=c),4&l[1]&&(u.enableShareService=t[33]),2&l[0]&&(u.isExpanded=t[1]),e.$set(u)},i(a){o||(d(e.$$.fragment,a),o=!0)},o(a){$(e.$$.fragment,a),o=!1},d(a){a&&b(n),y(e,a)}}}function Wu(i,t){let n,e,o,r,s=[],c=new Map,a=t[128].groupTitle!==We.New&&ju(t),l=se(t[128].threads);const u=f=>`${f[125].id}-${f[125].isPinned}-${f[127]}`;for(let f=0;f<l.length;f+=1){let m=Pu(t,l,f),p=u(m);c.set(p,s[f]=qu(p,m))}return{key:i,first:null,c(){n=mt(),a&&a.c(),e=U();for(let f=0;f<s.length;f+=1)s[f].c();o=mt(),this.first=n},m(f,m){x(f,n,m),a&&a.m(f,m),x(f,e,m);for(let p=0;p<s.length;p+=1)s[p]&&s[p].m(f,m);x(f,o,m),r=!0},p(f,m){(t=f)[128].groupTitle!==We.New?a?(a.p(t,m),16777216&m[0]&&d(a,1)):(a=ju(t),a.c(),d(a,1),a.m(e.parentNode,e)):a&&(j(),$(a,1,1,()=>{a=null}),q()),16793730&m[0]|402720772&m[1]&&(l=se(t[128].threads),j(),s=qr(s,m,u,1,t,l,c,o.parentNode,Bi,qu,o,Pu),q())},i(f){if(!r){d(a);for(let m=0;m<l.length;m+=1)d(s[m]);r=!0}},o(f){$(a);for(let m=0;m<s.length;m+=1)$(s[m]);r=!1},d(f){f&&(b(n),b(e),b(o)),a&&a.d(f);for(let m=0;m<s.length;m+=1)s[m].d(f)}}}function Vu(i){let t,n,e,o,r,s,c,a,l,u,f,m,p,_,M,C,T,E,R,N,Z,Q,X,K,H,Y=[],V=new Map;r=new Oo({}),a=new qi({props:{class:"remote-agent-icon"}}),u=new Gt({props:{size:1,$$slots:{default:[Wx]},$$scope:{ctx:i}}});let J=(i[18]>0||i[17]>0)&&Gu(i);M=new Pt({props:{content:"Expand remote agents dashboard",nested:!1,triggerOn:[Zt.Hover],hasPointerEvents:!1,$$slots:{default:[Gx]},$$scope:{ctx:i}}});let rt=se(i[5]);const lt=ot=>ot[125].id;for(let ot=0;ot<rt.length;ot+=1){let ht=Du(i,rt,ot),it=lt(ht);V.set(it,Y[ot]=Ju(it,ht))}return{c(){t=L("div"),n=L("div"),e=L("button"),o=L("div"),v(r.$$.fragment),c=U(),v(a.$$.fragment),l=U(),v(u.$$.fragment),f=U(),J&&J.c(),m=U(),p=L("div"),_=L("div"),v(M.$$.fragment),R=U(),N=L("div");for(let ot=0;ot<Y.length;ot+=1)Y[ot].c();A(o,"class",s="expand-toggle-button "+(i[8]?"expand-toggle-button--active":"")+" svelte-1lid8lb"),A(_,"class","home-panel-button svelte-1lid8lb"),A(p,"class","right-buttons svelte-1lid8lb"),A(e,"class",T="expand-toggle-button-container "+(i[8]?"expand-toggle-button-container--active":"")+" svelte-1lid8lb"),A(e,"aria-label",E=i[8]?"Hide recent remote agents":"Show recent remote agents"),A(e,"aria-expanded",i[8]),A(e,"type","button"),A(n,"class","active-remote-agents-header svelte-1lid8lb"),A(N,"class","active-remote-agents-list svelte-1lid8lb"),qn(N,"height",i[21]),qn(N,"max-height",i[20]),A(t,"class","active-remote-agents-section svelte-1lid8lb")},m(ot,ht){x(ot,t,ht),O(t,n),O(n,e),O(e,o),w(r,o,null),O(e,c),w(a,e,null),O(e,l),w(u,e,null),O(e,f),J&&J.m(e,null),O(e,m),O(e,p),O(p,_),w(M,_,null),O(t,R),O(t,N);for(let it=0;it<Y.length;it+=1)Y[it]&&Y[it].m(N,null);i[110](N),X=!0,K||(H=[Lt(e,"click",i[46]),Ss(i[41].call(null,N))],K=!0)},p(ot,ht){(!X||256&ht[0]&&s!==(s="expand-toggle-button "+(ot[8]?"expand-toggle-button--active":"")+" svelte-1lid8lb"))&&A(o,"class",s);const it={};524288&ht[0]|256&ht[4]&&(it.$$scope={dirty:ht,ctx:ot}),u.$set(it),ot[18]>0||ot[17]>0?J?J.p(ot,ht):(J=Gu(ot),J.c(),J.m(e,m)):J&&(J.d(1),J=null);const xt={};2&ht[1]|256&ht[4]&&(xt.$$scope={dirty:ht,ctx:ot}),M.$set(xt),(!X||256&ht[0]&&T!==(T="expand-toggle-button-container "+(ot[8]?"expand-toggle-button-container--active":"")+" svelte-1lid8lb"))&&A(e,"class",T),(!X||256&ht[0]&&E!==(E=ot[8]?"Hide recent remote agents":"Show recent remote agents"))&&A(e,"aria-label",E),(!X||256&ht[0])&&A(e,"aria-expanded",ot[8]),16800&ht[0]|402720772&ht[1]&&(rt=se(ot[5]),j(),Y=qr(Y,ht,lt,1,ot,rt,V,N,Bi,Ju,null,Du),q()),(!X||2097152&ht[0])&&qn(N,"height",ot[21]),(!X||1048576&ht[0])&&qn(N,"max-height",ot[20])},i(ot){if(!X){d(r.$$.fragment,ot),d(a.$$.fragment,ot),d(u.$$.fragment,ot),d(M.$$.fragment,ot),ot&&Nn(()=>{X&&(C||(C=xn(_,dr,{y:-2,duration:150},!0)),C.run(1))});for(let ht=0;ht<rt.length;ht+=1)d(Y[ht]);ot&&Nn(()=>{X&&(Z||(Z=xn(N,po,{duration:150},!0)),Z.run(1))}),ot&&Nn(()=>{X&&(Q||(Q=xn(t,dr,{y:5,duration:150},!0)),Q.run(1))}),X=!0}},o(ot){$(r.$$.fragment,ot),$(a.$$.fragment,ot),$(u.$$.fragment,ot),$(M.$$.fragment,ot),ot&&(C||(C=xn(_,dr,{y:-2,duration:150},!1)),C.run(0));for(let ht=0;ht<Y.length;ht+=1)$(Y[ht]);ot&&(Z||(Z=xn(N,po,{duration:150},!1)),Z.run(0)),ot&&(Q||(Q=xn(t,dr,{y:5,duration:150},!1)),Q.run(0)),X=!1},d(ot){ot&&b(t),y(r),y(a),y(u),J&&J.d(),y(M),ot&&C&&C.end();for(let ht=0;ht<Y.length;ht+=1)Y[ht].d();i[110](null),ot&&Z&&Z.end(),ot&&Q&&Q.end(),K=!1,Qe(H)}}}function Wx(i){let t,n,e,o=i[19]===1?"":"s";return{c(){t=G(i[19]),n=G(" recent remote agent"),e=G(o)},m(r,s){x(r,t,s),x(r,n,s),x(r,e,s)},p(r,s){524288&s[0]&&_t(t,r[19]),524288&s[0]&&o!==(o=r[19]===1?"":"s")&&_t(e,o)},d(r){r&&(b(t),b(n),b(e))}}}function Gu(i){let t,n,e=i[18]>0&&Yu(i),o=i[17]>0&&Ku(i);return{c(){t=L("div"),e&&e.c(),n=U(),o&&o.c(),A(t,"class","remote-agent-indicators svelte-1lid8lb")},m(r,s){x(r,t,s),e&&e.m(t,null),O(t,n),o&&o.m(t,null)},p(r,s){r[18]>0?e?e.p(r,s):(e=Yu(r),e.c(),e.m(t,n)):e&&(e.d(1),e=null),r[17]>0?o?o.p(r,s):(o=Ku(r),o.c(),o.m(t,null)):o&&(o.d(1),o=null)},d(r){r&&b(t),e&&e.d(),o&&o.d()}}}function Yu(i){let t,n,e,o,r,s;return{c(){t=L("div"),n=L("div"),e=U(),o=L("span"),r=G(i[18]),A(n,"class","indicator-dot running-dot svelte-1lid8lb"),A(o,"class","indicator-count svelte-1lid8lb"),A(t,"class","indicator running-indicator svelte-1lid8lb"),A(t,"title",s=i[18]+" running agent"+(i[18]===1?"":"s"))},m(c,a){x(c,t,a),O(t,n),O(t,e),O(t,o),O(o,r)},p(c,a){262144&a[0]&&_t(r,c[18]),262144&a[0]&&s!==(s=c[18]+" running agent"+(c[18]===1?"":"s"))&&A(t,"title",s)},d(c){c&&b(t)}}}function Ku(i){let t,n,e,o,r,s;return{c(){t=L("div"),n=L("div"),e=U(),o=L("span"),r=G(i[17]),A(n,"class","indicator-dot changes-dot svelte-1lid8lb"),A(o,"class","indicator-count svelte-1lid8lb"),A(t,"class","indicator changes-indicator svelte-1lid8lb"),A(t,"title",s=i[17]+" agent"+(i[17]===1?"":"s")+" with changes")},m(c,a){x(c,t,a),O(t,n),O(t,e),O(t,o),O(o,r)},p(c,a){131072&a[0]&&_t(r,c[17]),131072&a[0]&&s!==(s=c[17]+" agent"+(c[17]===1?"":"s")+" with changes")&&A(t,"title",s)},d(c){c&&b(t)}}}function Vx(i){let t,n;return t=new Jy({}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function Gx(i){let t,n;return t=new fe({props:{variant:"ghost",color:i[32]?"accent":"neutral",size:1,$$slots:{default:[Vx]},$$scope:{ctx:i}}}),t.$on("click",i[106]),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};2&o[1]&&(r.color=e[32]?"accent":"neutral"),256&o[4]&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function Xu(i){let t,n;function e(){return i[107](i[125],i[127])}function o(){return i[108](i[125])}function r(...s){return i[109](i[125],...s)}return t=new im({props:{thread:i[125],containerWidth:i[14],isSelected:i[7]===i[125].id,afterDelete:e,onSelect:o,onTogglePinned:r,isFromDifferentRepo:i[58],getRepoInfo:i[59],enableShareService:i[33],isExpanded:!1}}),{c(){v(t.$$.fragment)},m(s,c){w(t,s,c),n=!0},p(s,c){i=s;const a={};32&c[0]&&(a.thread=i[125]),16384&c[0]&&(a.containerWidth=i[14]),160&c[0]&&(a.isSelected=i[7]===i[125].id),160&c[0]&&(a.afterDelete=e),32&c[0]&&(a.onSelect=o),32&c[0]&&(a.onTogglePinned=r),4&c[1]&&(a.enableShareService=i[33]),t.$set(a)},i(s){n||(d(t.$$.fragment,s),n=!0)},o(s){$(t.$$.fragment,s),n=!1},d(s){y(t,s)}}}function Ju(i,t){let n,e,o,r=t[8]&&Xu(t);return{key:i,first:null,c(){n=mt(),r&&r.c(),e=mt(),this.first=n},m(s,c){x(s,n,c),r&&r.m(s,c),x(s,e,c),o=!0},p(s,c){(t=s)[8]?r?(r.p(t,c),256&c[0]&&d(r,1)):(r=Xu(t),r.c(),d(r,1),r.m(e.parentNode,e)):r&&(j(),$(r,1,1,()=>{r=null}),q())},i(s){o||(d(r),o=!0)},o(s){$(r),o=!1},d(s){s&&(b(n),b(e)),r&&r.d(s)}}}function Yx(i){let t,n,e,o,r;const s=[Jx,Xx],c=[];function a(l,u){return 1&u[0]&&(n=null),n==null&&(n=l[0].trim()!==""),n?0:1}return e=a(i,[-1,-1,-1,-1,-1]),o=c[e]=s[e](i),{c(){t=L("div"),o.c(),A(t,"class","empty-message svelte-1lid8lb")},m(l,u){x(l,t,u),c[e].m(t,null),r=!0},p(l,u){let f=e;e=a(l,u),e===f?c[e].p(l,u):(j(),$(c[f],1,1,()=>{c[f]=null}),q(),o=c[e],o?o.p(l,u):(o=c[e]=s[e](l),o.c()),d(o,1),o.m(t,null))},i(l){r||(d(o),r=!0)},o(l){$(o),r=!1},d(l){l&&b(t),c[e].d()}}}function Kx(i){let t,n=[],e=new Map,o=se(i[28]);const r=s=>s[124];for(let s=0;s<o.length;s+=1){let c=Ru(i,o,s),a=r(c);e.set(a,n[s]=Zu(a))}return{c(){t=L("div");for(let s=0;s<n.length;s+=1)n[s].c();A(t,"class","loading-state svelte-1lid8lb")},m(s,c){x(s,t,c);for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(t,null)},p(s,c){268435456&c[0]&&(o=se(s[28]),n=qr(n,c,r,1,s,o,e,t,Vm,Zu,null,Ru))},i:P,o:P,d(s){s&&b(t);for(let c=0;c<n.length;c+=1)n[c].d()}}}function Xx(i){let t,n;return t=new Gt({props:{size:1,color:"secondary",$$slots:{default:[Zx]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};256&o[4]&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function Jx(i){let t,n;return t=new Gt({props:{size:1,color:"secondary",$$slots:{default:[Qx]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};1&o[0]|256&o[4]&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function Zx(i){let t;return{c(){t=G("Create a new thread to get started.")},m(n,e){x(n,t,e)},d(n){n&&b(t)}}}function Qx(i){let t,n,e;return{c(){t=G('No threads with "'),n=G(i[0]),e=G('" in the title.')},m(o,r){x(o,t,r),x(o,n,r),x(o,e,r)},p(o,r){1&r[0]&&_t(n,o[0])},d(o){o&&(b(t),b(n),b(e))}}}function Zu(i,t){let n;return{key:i,first:null,c(){n=L("div"),n.innerHTML='<div class="agent-content svelte-1lid8lb"><div class="agent-details svelte-1lid8lb"><div class="agent-details--left svelte-1lid8lb"><div class="agent-icon"><div class="skeleton-dot svelte-1lid8lb"></div></div> <div class="skeleton-text svelte-1lid8lb"></div></div></div></div> ',A(n,"class","agent-row skeleton-row svelte-1lid8lb"),this.first=n},m(e,o){x(e,n,o)},p(e,o){},d(e){e&&b(n)}}}function Qu(i){let t,n,e;return n=new Pt({props:{content:(i[1]?i[3].isDragging:i[4].isDragging)?void 0:"Drag to resize. Click or Esc to collapse",side:"bottom",hasPointerEvents:!1,offset:[0,8],$$slots:{default:[t8]},$$scope:{ctx:i}}}),{c(){t=L("div"),v(n.$$.fragment),A(t,"class","resize-handle-container svelte-1lid8lb")},m(o,r){x(o,t,r),w(n,t,null),e=!0},p(o,r){const s={};26&r[0]&&(s.content=(o[1]?o[3].isDragging:o[4].isDragging)?void 0:"Drag to resize. Click or Esc to collapse"),26&r[0]|256&r[4]&&(s.$$scope={dirty:r,ctx:o}),n.$set(s)},i(o){e||(d(n.$$.fragment,o),e=!0)},o(o){$(n.$$.fragment,o),e=!1},d(o){o&&b(t),y(n)}}}function t8(i){let t,n,e;return{c(){t=L("button"),t.innerHTML='<div class="resize-handle-line svelte-1lid8lb"><div class="resize-handle-dash svelte-1lid8lb"></div></div>',A(t,"class","resize-handle svelte-1lid8lb"),Mt(t,"resize-handle--dragging",i[1]?i[3].isDragging:i[4].isDragging),Mt(t,"resize-handle--expanded",i[1])},m(o,r){x(o,t,r),n||(e=[Lt(t,"mousedown",function(){Ne(i[1]?i[51]:i[54])&&(i[1]?i[51]:i[54]).apply(this,arguments)}),Lt(t,"click",i[111])],n=!0)},p(o,r){i=o,26&r[0]&&Mt(t,"resize-handle--dragging",i[1]?i[3].isDragging:i[4].isDragging),2&r[0]&&Mt(t,"resize-handle--expanded",i[1])},d(o){o&&b(t),n=!1,Qe(e)}}}function e8(i){let t,n,e,o,r,s,c,a,l,u,f,m,p,_,M,C,T,E,R,N,Z,Q,X,K,H,Y,V,J,rt,lt,ot,ht;Nn(i[90]),a=new Oo({}),m=new Gt({props:{size:1,class:"header-text-main",$$slots:{default:[Ex]},$$scope:{ctx:i}}});let it=!i[11]&&i[1]&&Fu(i),xt=i[1]&&Ou(i),ee=i[26]&&Uu(i);Q=new w5({});let At=i[1]&&!i[27]&&!i[25]&&Hu(i),Ht=i[19]>0&&Vu(i);const De=[Kx,Yx],Ee=[];function un(S,F){return S[27]?0:S[25]?1:-1}~(Y=un(i))&&(V=Ee[Y]=De[Y](i));let z=(!i[0]&&i[1]||!i[1]&&i[8])&&Qu(i);return{c(){t=L("div"),n=L("div"),e=L("div"),o=L("div"),r=L("div"),s=L("button"),c=L("div"),v(a.$$.fragment),u=U(),f=L("div"),v(m.$$.fragment),p=U(),_=L("div"),it&&it.c(),M=U(),xt&&xt.c(),E=U(),R=L("div"),ee&&ee.c(),N=U(),Z=L("div"),v(Q.$$.fragment),X=U(),At&&At.c(),K=U(),Ht&&Ht.c(),H=U(),V&&V.c(),J=U(),z&&z.c(),A(c,"class",l="expand-toggle-button "+(i[1]?"expand-toggle-button--active":"")+" svelte-1lid8lb"),A(f,"class","header-text svelte-1lid8lb"),A(_,"class","thread-type-filter svelte-1lid8lb"),A(s,"class",C="expand-toggle-button-container "+(i[1]?"expand-toggle-button-container--active":"")+" svelte-1lid8lb"),A(s,"aria-label",T=i[1]?"Collapse threads":"Expand threads"),A(s,"aria-expanded",i[1]),A(s,"type","button"),A(s,"data-testid",n8),A(r,"class","header-left svelte-1lid8lb"),A(Z,"class","new-thread-dropdown svelte-1lid8lb"),A(R,"class","header-right svelte-1lid8lb"),A(o,"class","header svelte-1lid8lb"),A(e,"class","agents-list-container svelte-1lid8lb"),A(e,"role","region"),A(e,"aria-label","Remote agents list"),Mt(e,"is-dragging",i[3].isDragging||i[4].isDragging),Mt(e,"is-expanded",i[1]),A(n,"class","remote-agent-threads svelte-1lid8lb"),Nn(()=>i[112].call(n)),A(t,"class","remote-agent-threads-container svelte-1lid8lb")},m(S,F){x(S,t,F),O(t,n),O(n,e),O(e,o),O(o,r),O(r,s),O(s,c),w(a,c,null),O(s,u),O(s,f),w(m,f,null),O(s,p),O(s,_),it&&it.m(_,null),O(s,M),xt&&xt.m(s,null),O(o,E),O(o,R),ee&&ee.m(R,null),O(R,N),O(R,Z),w(Q,Z,null),O(e,X),At&&At.m(e,null),O(e,K),Ht&&Ht.m(e,null),O(n,H),~Y&&Ee[Y].m(n,null),O(n,J),z&&z.m(n,null),rt=$s(n,i[112].bind(n)),lt=!0,ot||(ht=[Lt(window,"mousemove",i[88]),Lt(window,"mouseup",i[89]),Lt(window,"focus",i[48]),Lt(window,"blur",i[49]),Lt(window,"keydown",i[50]),Lt(window,"resize",i[90]),Lt(s,"click",i[45]),Lt(s,"keydown",i[97])],ot=!0)},p(S,F){(!lt||2&F[0]&&l!==(l="expand-toggle-button "+(S[1]?"expand-toggle-button--active":"")+" svelte-1lid8lb"))&&A(c,"class",l);const tt={};256&F[4]&&(tt.$$scope={dirty:F,ctx:S}),m.$set(tt),!S[11]&&S[1]?it?(it.p(S,F),2050&F[0]&&d(it,1)):(it=Fu(S),it.c(),d(it,1),it.m(_,null)):it&&(j(),$(it,1,1,()=>{it=null}),q()),S[1]?xt?(xt.p(S,F),2&F[0]&&d(xt,1)):(xt=Ou(S),xt.c(),d(xt,1),xt.m(s,null)):xt&&(j(),$(xt,1,1,()=>{xt=null}),q()),(!lt||2&F[0]&&C!==(C="expand-toggle-button-container "+(S[1]?"expand-toggle-button-container--active":"")+" svelte-1lid8lb"))&&A(s,"class",C),(!lt||2&F[0]&&T!==(T=S[1]?"Collapse threads":"Expand threads"))&&A(s,"aria-label",T),(!lt||2&F[0])&&A(s,"aria-expanded",S[1]),S[26]?ee?(ee.p(S,F),67108864&F[0]&&d(ee,1)):(ee=Uu(S),ee.c(),d(ee,1),ee.m(R,N)):ee&&(j(),$(ee,1,1,()=>{ee=null}),q()),!S[1]||S[27]||S[25]?At&&(j(),$(At,1,1,()=>{At=null}),q()):At?(At.p(S,F),167772162&F[0]&&d(At,1)):(At=Hu(S),At.c(),d(At,1),At.m(e,K)),S[19]>0?Ht?(Ht.p(S,F),524288&F[0]&&d(Ht,1)):(Ht=Vu(S),Ht.c(),d(Ht,1),Ht.m(e,null)):Ht&&(j(),$(Ht,1,1,()=>{Ht=null}),q()),(!lt||24&F[0])&&Mt(e,"is-dragging",S[3].isDragging||S[4].isDragging),(!lt||2&F[0])&&Mt(e,"is-expanded",S[1]);let st=Y;Y=un(S),Y===st?~Y&&Ee[Y].p(S,F):(V&&(j(),$(Ee[st],1,1,()=>{Ee[st]=null}),q()),~Y?(V=Ee[Y],V?V.p(S,F):(V=Ee[Y]=De[Y](S),V.c()),d(V,1),V.m(n,J)):V=null),!S[0]&&S[1]||!S[1]&&S[8]?z?(z.p(S,F),259&F[0]&&d(z,1)):(z=Qu(S),z.c(),d(z,1),z.m(n,null)):z&&(j(),$(z,1,1,()=>{z=null}),q())},i(S){lt||(d(a.$$.fragment,S),d(m.$$.fragment,S),d(it),d(xt),d(ee),d(Q.$$.fragment,S),d(At),d(Ht),d(V),d(z),lt=!0)},o(S){$(a.$$.fragment,S),$(m.$$.fragment,S),$(it),$(xt),$(ee),$(Q.$$.fragment,S),$(At),$(Ht),$(V),$(z),lt=!1},d(S){S&&b(t),y(a),y(m),it&&it.d(),xt&&xt.d(),ee&&ee.d(),y(Q),At&&At.d(),Ht&&Ht.d(),~Y&&Ee[Y].d(),z&&z.d(),rt(),ot=!1,Qe(ht)}}}const n8="threads-expand-button";function o8(i){if(i.id===tr||i.type!=="remoteAgent")return!1;const t=new Date(i.updated_at),n=new Date().getTime()-t.getTime();return Math.floor(n/1e3/60/60)<168}const yi=25;function td(i){var t,n,e;return((e=(n=(t=i.workspace_setup)==null?void 0:t.starting_files)==null?void 0:n.github_commit_ref)==null?void 0:e.repository_url)||""}function r8(i,t,n){let e,o,r,s,c,a,l,u,f,m,p,_,M,C,T,E,R,N,Z,Q,X,K,H,Y,V,J,rt,lt,ot,ht,it,xt,ee,At,Ht,De,Ee,un,z,S,F,tt,st,vt,Ct,Ft,qt,re,Vt,ze,Qt=P,Ie=P;i.$$.on_destroy.push(()=>Qt()),i.$$.on_destroy.push(()=>Ie());const Oe=tr,Pe=St(Tn.key);Et(i,Pe,pt=>n(84,tt=pt));const Cn=St(mf);Et(i,Cn,pt=>n(85,qt=pt));const An=St(hr.key),Be=St(gr.key);let{chatModelProp:$n}=t,Ge=$n||St("chatModel");Et(i,Ge,pt=>n(86,re=pt));const gn=Le(!1);let Pn;function tn(pt){if(!pt)return new Date(0);const we=_;return Sn.getTime(pt,we)}Et(i,gn,pt=>n(33,ze=pt)),ro(async()=>{try{An.getRemoteUrl(),Ge&&Ge.flags&&gn.update(()=>Ge.flags.enableShareService||!1)}catch(pt){console.error("Failed to get current repository URL:",pt)}});let Ye="",Xe=!1;function Qn(){n(0,Ye=""),n(11,Xe=!1)}let Wt,Fn=0,On=0,zn=0;const Vn=Pl(()=>{n(1,ve=!1)},()=>ve),yn=Pl(()=>{fn.set(!1)},()=>vt);async function qe(pt,we){if(we&&we.stopPropagation(),!pt.isNew)if(pt.type==="remoteAgent"){const Dt=await Pe.toggleAgentPinned(pt.id,pt.isPinned||!1);Cn.update(He=>{if(He)return{...He,pinnedAgents:Dt}})}else["chat","localAgent"].includes(pt.type)&&Ge&&Ge.toggleConversationPinned(pt.id)}const En=Le("all");Et(i,En,pt=>n(9,Ft=pt));let ve=!1;const fn=Le(!1);function Bn(){if(n(1,ve=!ve),ve){fn.set(!1);const pt=ne.currentHeight||zt.defaultHeight,we=Ni(ht.windowHeight,ht.maxContentHeight),Dt=Math.max(ht.minHeight,Math.min(we,pt));n(3,ne={...ne,currentHeight:Dt})}}function Ve(){if(fn.update(pt=>!pt),n(1,ve=!1),vt){const pt=Ni(it.windowHeight,it.maxContentHeight),we=Math.max(it.minHeight,Math.min(pt,it.defaultHeight));n(4,ae={...ae,currentHeight:we})}}function Ue(pt){if(!pt)return!1;pt.type==="remoteAgent"&&pt.has_updates&&Pe.optimisticallyClearAgentUpdates(pt.id),Pe.setIsActive(pt.type==="remoteAgent");const we=Be.switchToThread(pt.type,pt.id,Ct);return we&&(n(1,ve=!1),fn.set(!1)),we}Et(i,fn,pt=>n(8,vt=pt));let gt=0;const zt={threadItemHeight:yi,minHeight:75,defaultHeight:375},_e={threadItemHeight:yi,minHeight:25,defaultHeight:100};let ue,ne=ku(zt.defaultHeight),ae=ku(_e.defaultHeight);function dn(pt){n(3,ne=Tu(pt,ne,ht,ve))}function Tt(){n(3,ne=Eu(ne)),setTimeout(()=>{n(3,ne=Iu(ne))},0)}function Gn(pt){n(4,ae=Tu(pt,ae,it,!ve&&vt))}function In(){n(4,ae=Eu(ae)),setTimeout(()=>{n(4,ae=Iu(ae))},0)}const Eo=An.currentRepositoryUrl;function Io(){tt.refreshAgentThreads()}async function Ho(pt){const we=[],Dt=[];for(const He of pt)He.type==="remoteAgent"?Dt.push(He.id):we.push(He.id);await Ge.deleteConversations(we,void 0,Dt,Pe)}return Et(i,Eo,pt=>n(114,st=pt)),i.$$set=pt=>{"chatModelProp"in pt&&n(62,$n=pt.chatModelProp)},i.$$.update=()=>{var pt,we;4194304&i.$$.dirty[2]&&n(82,e=tt.currentAgentId),4194304&i.$$.dirty[2]&&n(78,o=tt.agentOverviews||[]),16777216&i.$$.dirty[2]&&n(83,r=Ge?Object.values(re.orderedConversations()):[]),2097152&i.$$.dirty[2]&&n(81,s=r.find(Sn.isNew)),2621440&i.$$.dirty[2]&&n(80,c=Ge?r.filter(Dt=>{var He;return!((He=Dt.extraData)!=null&&He.isAgentConversation)&&Dt!==s}):[]),2621440&i.$$.dirty[2]&&n(79,a=Ge?r.filter(Dt=>{var He;return((He=Dt.extraData)==null?void 0:He.isAgentConversation)===!0&&Dt!==s}):[]),4194304&i.$$.dirty[2]&&n(71,l=tt.agentThreadsError),4194304&i.$$.dirty[2]&&n(70,u=tt.isLoading),4194304&i.$$.dirty[2]&&n(69,f=tt.hasFetchedOnce),8388608&i.$$.dirty[2]&&n(32,m=(pt=qt.state)==null?void 0:pt.activeWebviews.includes("home")),33554432&i.$$.dirty[2]&&(_=Vt||"lastMessageTimestamp"),16777216&i.$$.dirty[2]&&(n(30,M=re.agentExecutionMode),Qt(),Qt=ce(M,Dt=>n(115,Ct=Dt))),22020096&i.$$.dirty[2]&&n(7,C=tt.isActive?e??Oe:re.currentConversationId),21495808&i.$$.dirty[2]&&n(75,T=(()=>{var Dt,He;if(tt.isActive){if(tt.isCreatingAgent)return;const Mn=(Dt=re.currentConversationModel.draftExchange)==null?void 0:Dt.request_message;return{id:Oe,isNew:!0,type:"remoteAgent",title:Mn,updated_at:new Date().toISOString(),started_at:new Date().toISOString(),isPinned:!1,conversation:void 0,sortTimestamp:new Date}}if(s)return{id:s.id,isNew:!0,type:(He=s.extraData)!=null&&He.isAgentConversation?"localAgent":"chat",title:"",updated_at:s.lastInteractedAtIso,started_at:s.createdAtIso,isPinned:!1,conversation:s,sortTimestamp:tn(s)}})()),262144&i.$$.dirty[2]&&n(74,E=c.map(Dt=>({id:Dt.id,isNew:!1,type:"chat",title:Dt.name||"",updated_at:Dt.lastInteractedAtIso,started_at:Dt.createdAtIso,isPinned:Dt.isPinned,conversation:Dt,sortTimestamp:tn(Dt)}))),131072&i.$$.dirty[2]&&n(73,R=a.map(Dt=>({id:Dt.id,isNew:!1,type:"localAgent",title:Dt.name||"",updated_at:Dt.lastInteractedAtIso,started_at:Dt.createdAtIso,isPinned:Dt.isPinned,conversation:Dt,sortTimestamp:tn(Dt)}))),8388608&i.$$.dirty[2]&&n(77,N=((we=qt.state)==null?void 0:we.pinnedAgents)||{}),128&i.$$.dirty[0]|98304&i.$$.dirty[2]&&n(64,Z=o.map(Dt=>({id:Dt.remote_agent_id,isNew:!1,type:"remoteAgent",title:Dt.title||Dt.session_summary,updated_at:Dt.updated_at,started_at:Dt.started_at,status:Dt.status,workspace_status:Dt.workspace_status,is_setup_script_agent:Dt.is_setup_script_agent,workspace_setup:Dt.workspace_setup||{},agent:Dt,sortTimestamp:new Date(Dt.updated_at||Dt.started_at),isPinned:N[Dt.remote_agent_id]||!1,has_updates:Dt.has_updates&&Dt.remote_agent_id!==C}))),128&i.$$.dirty[0]|8192&i.$$.dirty[2]&&n(76,Q=T&&C===T.id),30724&i.$$.dirty[2]&&n(72,X=[Q&&T,...E,...R,...Z].filter(Boolean)),7172&i.$$.dirty[2]&&n(29,K=[{value:"all",label:"All threads",count:X.length},{value:"chat",label:"Chats",count:E.length},{value:"localAgent",label:"Local agents",count:R.length},{value:"remoteAgent",label:"Remote agents",count:Z.length}].filter(Dt=>Dt.count>0)),513&i.$$.dirty[0]|4195328&i.$$.dirty[2]&&n(66,H=X.filter(Dt=>(Ft==="all"||Dt.type===Ft)&&function(He,Mn,Lo,_r){if(!Mn.trim())return!0;const jo=Mn.toLowerCase().split(/\s+/).filter(bn=>bn.length>0),qo=[He.title,He.type==="remoteAgent"?o5(He):"",n5(He,Lo,_r)].filter(Boolean).join(" ").toLowerCase();return jo.every(bn=>qo.includes(bn))}(Dt,Ye,tt.currentAgentId,tt.currentConversation))),512&i.$$.dirty[2]&&n(6,V=l==null?void 0:l.errorMessage),384&i.$$.dirty[2]&&n(27,J=u&&!f),64&i.$$.dirty[0]|128&i.$$.dirty[2]&&n(26,rt=!!V&&f),144&i.$$.dirty[2]&&n(25,lt=f&&H.length===0),2&i.$$.dirty[0]|16&i.$$.dirty[2]&&n(24,ot=ve?function(Dt,He=Qb){var Wo;const Mn=new Map,Lo=new Date(new Date().setHours(0,0,0,0)),_r=[{age:We.Today,date:Lo},{age:We.ThisWeek,date:new Date(Lo.getTime()-6048e5)},{age:We.ThisMonth,date:new Date(Lo.getTime()-2592e6)}];for(const Ln of Dt){const ir=Ln.sortTimestamp;let no=((Wo=_r.find(Jr=>ir>=Jr.date))==null?void 0:Wo.age)||We.Older;Ln.isPinned&&(no=We.Pinned),Ln.isNew&&(no=We.New),Mn.set(no,[...Mn.get(no)||[],Ln])}const jo=t5.map(Ln=>({groupTitle:Ln,threads:e5(Mn.get(Ln)||[])})).filter(Ln=>Ln.threads.length>0);let qo=0;const bn=[];for(const Ln of jo){const ir=[];for(const no of Ln.threads){if(qo>=He)break;ir.push(no),qo++}bn.push({groupTitle:Ln.groupTitle,threads:ir})}return bn}(H):[]),4&i.$$.dirty[0]|16&i.$$.dirty[2]&&n(68,ht={...zt,windowHeight:gt,maxContentHeight:H.length*yi}),16&i.$$.dirty[2]&&n(5,De=H.filter(o8)),36&i.$$.dirty[0]&&n(67,it={..._e,windowHeight:gt,maxContentHeight:De.length*yi}),10&i.$$.dirty[0]|64&i.$$.dirty[2]&&ve&&n(3,ne=Lu(ne,ht)),274&i.$$.dirty[0]|32&i.$$.dirty[2]&&!ve&&vt&&n(4,ae=Lu(ae,it)),10&i.$$.dirty[0]&&n(23,xt=ve?`${ne.currentHeight}px`:""),10&i.$$.dirty[0]&&n(22,ee=ve?`${ne.currentHeight}px`:""),274&i.$$.dirty[0]&&n(21,At=!ve&&vt?`${ae.currentHeight}px`:""),274&i.$$.dirty[0]&&n(20,Ht=!ve&&vt?`${ae.currentHeight}px`:""),32&i.$$.dirty[0]&&n(19,Ee=De.length),4&i.$$.dirty[2]&&n(65,un=Z.filter(Dt=>Dt.status===Ze.agentRunning||Dt.status===Ze.agentStarting)),8&i.$$.dirty[2]&&n(18,z=un.length),4&i.$$.dirty[2]&&n(63,S=Z.filter(Dt=>!!Dt.has_updates&&Dt.status===Ze.agentIdle)),2&i.$$.dirty[2]&&n(17,F=S.length)},n(31,p=Ge?Ge.sortConversationsBy:Le("lastMessageTimestamp")),Ie(),Ie=ce(p,pt=>n(87,Vt=pt)),n(28,Y=Array(3).fill(null)),[Ye,ve,gt,ne,ae,De,V,C,vt,Ft,Pn,Xe,Fn,On,zn,Wt,ue,F,z,Ee,Ht,At,ee,xt,ot,lt,rt,J,Y,K,M,p,m,ze,Pe,Cn,Ge,gn,function(){n(11,Xe=!Xe),n(1,ve=Xe),Xe?setTimeout(()=>{Pn==null||Pn.focus()},30):n(0,Ye="")},Qn,Vn,yn,qe,En,fn,Bn,Ve,Ue,function(){Pe.setIsPanelFocused(!0)},function(){Pe.setIsPanelFocused(!1)},function(pt){pt.key==="Escape"&&(ve?(n(1,ve=!1),pt.preventDefault(),pt.stopPropagation()):vt&&(fn.set(!1),pt.preventDefault(),pt.stopPropagation()))},function(pt){n(3,ne=Su(pt,ne,ve))},dn,Tt,function(pt){n(4,ae=Su(pt,ae,!ve&&vt))},Gn,In,Eo,function(pt){if(!pt||typeof pt!="object"||!("workspace_setup"in pt))return!1;const we=td(pt);return!!we&&!!st&&we!==st},function(pt){if(!pt||typeof pt!="object"||!("workspace_setup"in pt))return{name:"Unknown",fullPath:"Unknown"};const we=td(pt);return{name:J$(we),fullPath:Es(we)}},Io,Ho,$n,S,Z,un,H,it,ht,f,u,l,X,R,E,T,Q,N,o,a,c,s,e,r,tt,qt,re,Vt,pt=>{dn(pt),Gn(pt)},()=>{Tt(),In()},function(){n(2,gt=window.innerHeight)},pt=>pt.value===Ft,function(pt){Ye=pt,n(0,Ye)},function(pt){Pn=pt,n(10,Pn)},pt=>{pt.key==="Escape"&&Qn()},()=>{n(11,Xe=!0)},()=>{Ye.trim()||n(11,Xe=!1)},pt=>{pt.key!=="Enter"&&pt.key!==" "||(Bn(),pt.stopPropagation(),pt.preventDefault())},pt=>{pt.stopPropagation(),Io()},pt=>Ho(pt.threads),(pt,we,Dt)=>{if(C!==pt.id)return;const He=we.threads[Dt+1]||we.threads[Dt-1];He&&Ue(He)},pt=>Ue(pt),(pt,we)=>qe(pt,we),function(){On=this.clientHeight,n(13,On)},function(pt){te[pt?"unshift":"push"](()=>{Wt=pt,n(15,Wt)})},function(){Fn=this.clientHeight,n(12,Fn)},pt=>{pt.stopPropagation(),m?Pe.closeRemoteAgentHomePanel():Pe.showRemoteAgentHomePanel()},(pt,we)=>{if(C!==pt.id)return;const Dt=De[we+1]||De[we-1];Dt&&Ue(Dt)},pt=>Ue(pt),(pt,we)=>qe(pt,we),function(pt){te[pt?"unshift":"push"](()=>{ue=pt,n(16,ue)})},()=>{if(ve){if(ne.hasDraggedThisClick)return;Bn()}else{if(ae.hasDraggedThisClick)return;Ve()}},function(){zn=this.clientWidth,n(14,zn)}]}class i8 extends ut{constructor(t){super(),dt(this,t,r8,e8,ct,{chatModelProp:62},null,[-1,-1,-1,-1,-1])}}function s8(i){let t,n;return{c(){t=ie("svg"),n=ie("path"),A(n,"d","M6.85357 3.85355L7.65355 3.05353C8.2981 2.40901 9.42858 1.96172 10.552 1.80125C11.1056 1.72217 11.6291 1.71725 12.0564 1.78124C12.4987 1.84748 12.7698 1.97696 12.8965 2.10357C13.0231 2.23018 13.1526 2.50125 13.2188 2.94357C13.2828 3.37086 13.2779 3.89439 13.1988 4.44801C13.0383 5.57139 12.591 6.70188 11.9464 7.34645L7.49999 11.7929L6.35354 10.6465C6.15827 10.4512 5.84169 10.4512 5.64643 10.6465C5.45117 10.8417 5.45117 11.1583 5.64643 11.3536L7.14644 12.8536C7.34171 13.0488 7.65829 13.0488 7.85355 12.8536L8.40073 12.3064L9.57124 14.2572C9.65046 14.3893 9.78608 14.4774 9.9389 14.4963C10.0917 14.5151 10.2447 14.4624 10.3535 14.3536L12.3535 12.3536C12.4648 12.2423 12.5172 12.0851 12.495 11.9293L12.0303 8.67679L12.6536 8.05355C13.509 7.19808 14.0117 5.82855 14.1887 4.58943C14.2784 3.9618 14.2891 3.33847 14.2078 2.79546C14.1287 2.26748 13.9519 1.74482 13.6035 1.39645C13.2552 1.04809 12.7325 0.871332 12.2045 0.792264C11.6615 0.710945 11.0382 0.721644 10.4105 0.8113C9.17143 0.988306 7.80189 1.491 6.94644 2.34642L6.32322 2.96968L3.07071 2.50504C2.91492 2.48278 2.75773 2.53517 2.64645 2.64646L0.646451 4.64645C0.537579 4.75533 0.484938 4.90829 0.50375 5.0611C0.522563 5.21391 0.61073 5.34954 0.742757 5.42876L2.69364 6.59928L2.14646 7.14645C2.0527 7.24022 2.00002 7.3674 2.00002 7.50001C2.00002 7.63261 2.0527 7.75979 2.14646 7.85356L3.64647 9.35356C3.84173 9.54883 4.15831 9.54883 4.35357 9.35356C4.54884 9.1583 4.54884 8.84172 4.35357 8.64646L3.20712 7.50001L3.85357 6.85356L6.85357 3.85355ZM10.0993 13.1936L9.12959 11.5775L11.1464 9.56067L11.4697 11.8232L10.0993 13.1936ZM3.42251 5.87041L5.43935 3.85356L3.17678 3.53034L1.80638 4.90074L3.42251 5.87041ZM2.35356 10.3535C2.54882 10.1583 2.54882 9.8417 2.35356 9.64644C2.1583 9.45118 1.84171 9.45118 1.64645 9.64644L0.646451 10.6464C0.451188 10.8417 0.451188 11.1583 0.646451 11.3535C0.841713 11.5488 1.1583 11.5488 1.35356 11.3535L2.35356 10.3535ZM3.85358 11.8536C4.04884 11.6583 4.04885 11.3417 3.85359 11.1465C3.65833 10.9512 3.34175 10.9512 3.14648 11.1465L1.14645 13.1464C0.95119 13.3417 0.951187 13.6583 1.14645 13.8535C1.34171 14.0488 1.65829 14.0488 1.85355 13.8536L3.85358 11.8536ZM5.35356 13.3535C5.54882 13.1583 5.54882 12.8417 5.35356 12.6464C5.1583 12.4512 4.84171 12.4512 4.64645 12.6464L3.64645 13.6464C3.45119 13.8417 3.45119 14.1583 3.64645 14.3535C3.84171 14.5488 4.1583 14.5488 4.35356 14.3535L5.35356 13.3535ZM9.49997 6.74881C10.1897 6.74881 10.7488 6.1897 10.7488 5.5C10.7488 4.8103 10.1897 4.25118 9.49997 4.25118C8.81026 4.25118 8.25115 4.8103 8.25115 5.5C8.25115 6.1897 8.81026 6.74881 9.49997 6.74881Z"),A(n,"fill","currentColor"),A(n,"fill-rule","evenodd"),A(n,"clip-rule","evenodd"),A(t,"width","15"),A(t,"height","15"),A(t,"viewBox","0 0 15 15"),A(t,"fill","none"),A(t,"xmlns","http://www.w3.org/2000/svg")},m(e,o){x(e,t,o),O(t,n)},p:P,i:P,o:P,d(e){e&&b(t)}}}class a8 extends ut{constructor(t){super(),dt(this,t,null,s8,ct,{})}}const c8=i=>({}),ed=i=>({});function l8(i){let t,n;return t=new tf({props:{slot:"rightIcon"}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p:P,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function u8(i){let t,n;return t=new _n({props:{class:"edit-item__filespan",size:1,filepath:i[0].relPath,$$slots:{rightIcon:[l8]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};1&o&&(r.filepath=e[0].relPath),1024&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function d8(i){let t,n;return t=new Pt({props:{delayDurationMs:1500,triggerOn:[Zt.Hover],content:i[0].relPath,$$slots:{default:[u8]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};1&o&&(r.content=e[0].relPath),1025&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function nd(i){let t,n;return t=new he({props:{size:1,variant:"ghost",color:"neutral",$$slots:{default:[f8]},$$scope:{ctx:i}}}),t.$on("click",function(){Ne(i[5])&&i[5].apply(this,arguments)}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){i=e;const r={};1026&o&&(r.$$scope={dirty:o,ctx:i}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function $8(i){let t,n;return t=new Q$({props:{totalAddedLines:i[1].totalAddedLines,totalRemovedLines:i[1].totalRemovedLines}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};2&o&&(r.totalAddedLines=e[1].totalAddedLines),2&o&&(r.totalRemovedLines=e[1].totalRemovedLines),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function f8(i){let t,n;return t=new Pt({props:{triggerOn:[Zt.Hover],content:"View Diff",$$slots:{default:[$8]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};1026&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function od(i){let t,n,e,o,r=i[8]&&rd(i),s=i[6]&&id(i),c=i[7]&&sd(i);return{c(){t=L("div"),r&&r.c(),n=U(),s&&s.c(),e=U(),c&&c.c(),A(t,"class","edit-item__controls-container")},m(a,l){x(a,t,l),r&&r.m(t,null),O(t,n),s&&s.m(t,null),O(t,e),c&&c.m(t,null),o=!0},p(a,l){a[8]?r?(r.p(a,l),256&l&&d(r,1)):(r=rd(a),r.c(),d(r,1),r.m(t,n)):r&&(j(),$(r,1,1,()=>{r=null}),q()),a[6]?s?(s.p(a,l),64&l&&d(s,1)):(s=id(a),s.c(),d(s,1),s.m(t,e)):s&&(j(),$(s,1,1,()=>{s=null}),q()),a[7]?c?(c.p(a,l),128&l&&d(c,1)):(c=sd(a),c.c(),d(c,1),c.m(t,null)):c&&(j(),$(c,1,1,()=>{c=null}),q())},i(a){o||(d(r),d(s),d(c),o=!0)},o(a){$(r),$(s),$(c),o=!1},d(a){a&&b(t),r&&r.d(),s&&s.d(),c&&c.d()}}}function rd(i){let t,n,e,o;const r=[p8,m8],s=[];function c(a,l){return a[3]?0:1}return t=c(i),n=s[t]=r[t](i),{c(){n.c(),e=mt()},m(a,l){s[t].m(a,l),x(a,e,l),o=!0},p(a,l){let u=t;t=c(a),t===u?s[t].p(a,l):(j(),$(s[u],1,1,()=>{s[u]=null}),q(),n=s[t],n?n.p(a,l):(n=s[t]=r[t](a),n.c()),d(n,1),n.m(e.parentNode,e))},i(a){o||(d(n),o=!0)},o(a){$(n),o=!1},d(a){a&&b(e),s[t].d(a)}}}function m8(i){let t,n;return t=new fe({props:{size:1,variant:"ghost",color:"neutral",$$slots:{default:[w8]},$$scope:{ctx:i}}}),t.$on("click",function(){Ne(i[8])&&i[8].apply(this,arguments)}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){i=e;const r={};1028&o&&(r.$$scope={dirty:o,ctx:i}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function p8(i){let t,n;return t=new Pt({props:{triggerOn:[Zt.Hover],content:"Changes applied",class:"edit-item__controls-container__applied",$$slots:{default:[b8]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};1024&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function g8(i){let t,n;return t=new a8({}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function h8(i){let t,n;return t=new or({}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function v8(i){let t,n,e,o;const r=[h8,g8],s=[];function c(a,l){return a[2]?0:1}return t=c(i),n=s[t]=r[t](i),{c(){n.c(),e=mt()},m(a,l){s[t].m(a,l),x(a,e,l),o=!0},p(a,l){let u=t;t=c(a),t!==u&&(j(),$(s[u],1,1,()=>{s[u]=null}),q(),n=s[t],n||(n=s[t]=r[t](a),n.c()),d(n,1),n.m(e.parentNode,e))},i(a){o||(d(n),o=!0)},o(a){$(n),o=!1},d(a){a&&b(e),s[t].d(a)}}}function w8(i){let t,n;return t=new Pt({props:{triggerOn:[Zt.Hover],content:i[2]?"Applying changes...":"Apply changes",$$slots:{default:[v8]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};4&o&&(r.content=e[2]?"Applying changes...":"Apply changes"),1028&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function y8(i){let t,n,e;return n=new To({}),{c(){t=G(`Applied
              `),v(n.$$.fragment)},m(o,r){x(o,t,r),w(n,o,r),e=!0},i(o){e||(d(n.$$.fragment,o),e=!0)},o(o){$(n.$$.fragment,o),e=!1},d(o){o&&b(t),y(n,o)}}}function b8(i){let t,n;return t=new Gt({props:{size:1,$$slots:{default:[y8]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};1024&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function id(i){let t,n;return t=new fe({props:{size:1,variant:"ghost",color:"neutral",$$slots:{default:[_8]},$$scope:{ctx:i}}}),t.$on("click",function(){Ne(i[6])&&i[6].apply(this,arguments)}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){i=e;const r={};1024&o&&(r.$$scope={dirty:o,ctx:i}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function x8(i){let t,n;return t=new kp({}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function _8(i){let t,n;return t=new Pt({props:{triggerOn:[Zt.Hover],content:"Open File",$$slots:{default:[x8]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};1024&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function sd(i){let t,n;return t=new fe({props:{size:1,variant:"ghost",color:"neutral",$$slots:{default:[A8]},$$scope:{ctx:i}}}),t.$on("click",function(){Ne(i[7])&&i[7].apply(this,arguments)}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){i=e;const r={};1024&o&&(r.$$scope={dirty:o,ctx:i}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function C8(i){let t,n;return t=new Wr({}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function A8(i){let t,n;return t=new Pt({props:{triggerOn:[Zt.Hover],content:"Undo Changes",$$slots:{default:[C8]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};1024&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function M8(i){let t,n,e,o,r,s,c;e=new he({props:{class:"edit-item__file-button",size:1,variant:i[4]?"soft":"ghost",color:i[4]?"accent":"neutral",$$slots:{default:[d8]},$$scope:{ctx:i}}}),e.$on("click",function(){Ne(i[5])&&i[5].apply(this,arguments)});const a=i[9].actions,l=Yt(a,i,i[10],ed);let u=i[1]&&nd(i),f=(i[8]||i[6]||i[7])&&od(i);return{c(){t=L("div"),n=L("div"),v(e.$$.fragment),o=U(),l&&l.c(),r=U(),u&&u.c(),s=U(),f&&f.c(),A(n,"class","edit-item__info-container"),A(t,"class","edit-item__container svelte-11cbs0v"),Mt(t,"edit-item__container--focused",i[4])},m(m,p){x(m,t,p),O(t,n),w(e,n,null),O(t,o),l&&l.m(t,null),O(t,r),u&&u.m(t,null),O(t,s),f&&f.m(t,null),c=!0},p(m,[p]){i=m;const _={};16&p&&(_.variant=i[4]?"soft":"ghost"),16&p&&(_.color=i[4]?"accent":"neutral"),1025&p&&(_.$$scope={dirty:p,ctx:i}),e.$set(_),l&&l.p&&(!c||1024&p)&&Kt(l,a,i,i[10],c?Jt(a,i[10],p,c8):Xt(i[10]),ed),i[1]?u?(u.p(i,p),2&p&&d(u,1)):(u=nd(i),u.c(),d(u,1),u.m(t,s)):u&&(j(),$(u,1,1,()=>{u=null}),q()),i[8]||i[6]||i[7]?f?(f.p(i,p),448&p&&d(f,1)):(f=od(i),f.c(),d(f,1),f.m(t,null)):f&&(j(),$(f,1,1,()=>{f=null}),q()),(!c||16&p)&&Mt(t,"edit-item__container--focused",i[4])},i(m){c||(d(e.$$.fragment,m),d(l,m),d(u),d(f),c=!0)},o(m){$(e.$$.fragment,m),$(l,m),$(u),$(f),c=!1},d(m){m&&b(t),y(e),l&&l.d(m),u&&u.d(),f&&f.d()}}}function k8(i,t,n){let{$$slots:e={},$$scope:o}=t,{qualifiedPathName:r}=t,{lineChanges:s}=t,{isApplyPending:c=!1}=t,{hasApplied:a=!1}=t,{isFocused:l=!1}=t,{onClickReview:u}=t,{onClickFile:f}=t,{onClickRevert:m}=t,{onApplyChanges:p}=t;return i.$$set=_=>{"qualifiedPathName"in _&&n(0,r=_.qualifiedPathName),"lineChanges"in _&&n(1,s=_.lineChanges),"isApplyPending"in _&&n(2,c=_.isApplyPending),"hasApplied"in _&&n(3,a=_.hasApplied),"isFocused"in _&&n(4,l=_.isFocused),"onClickReview"in _&&n(5,u=_.onClickReview),"onClickFile"in _&&n(6,f=_.onClickFile),"onClickRevert"in _&&n(7,m=_.onClickRevert),"onApplyChanges"in _&&n(8,p=_.onApplyChanges),"$$scope"in _&&n(10,o=_.$$scope)},[r,s,c,a,l,u,f,m,p,e,o]}class sm extends ut{constructor(t){super(),dt(this,t,k8,M8,ct,{qualifiedPathName:0,lineChanges:1,isApplyPending:2,hasApplied:3,isFocused:4,onClickReview:5,onClickFile:6,onClickRevert:7,onApplyChanges:8})}}function S8(i){let t,n,e=[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 448 512"},i[0]],o={};for(let r=0;r<e.length;r+=1)o=kt(o,e[r]);return{c(){t=ie("svg"),n=new rn(!0),this.h()},l(r){t=sn(r,"svg",{xmlns:!0,"data-ds-icon":!0,viewBox:!0});var s=an(t);n=cn(s,!0),s.forEach(b),this.h()},h(){n.a=null,$e(t,o)},m(r,s){ln(r,t,s),n.m('<!--! Font Awesome Pro 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2024 Fonticons, Inc.--><path d="M337 81c9.4-9.4 9.4-24.6 0-33.9s-24.6-9.4-33.9 0l-143 143L97 127c-9.4-9.4-24.6-9.4-33.9 0s-9.4 24.6 0 33.9l80 80c9.4 9.4 24.6 9.4 33.9 0zm104 120c9.4-9.4 9.4-24.6 0-33.9s-24.6-9.4-33.9 0l-247 247L41 295c-9.4-9.4-24.6-9.4-33.9 0s-9.4 24.6 0 33.9L143 465c9.4 9.4 24.6 9.4 33.9 0z"/>',t)},p(r,[s]){$e(t,o=Se(e,[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 448 512"},1&s&&r[0]]))},i:P,o:P,d(r){r&&b(t)}}}function T8(i,t,n){return i.$$set=e=>{n(0,t=kt(kt({},t),le(e)))},[t=le(t)]}class am extends ut{constructor(t){super(),dt(this,t,T8,S8,ct,{})}}function E8(i){let t,n,e=[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 512 512"},i[0]],o={};for(let r=0;r<e.length;r+=1)o=kt(o,e[r]);return{c(){t=ie("svg"),n=new rn(!0),this.h()},l(r){t=sn(r,"svg",{xmlns:!0,"data-ds-icon":!0,viewBox:!0});var s=an(t);n=cn(s,!0),s.forEach(b),this.h()},h(){n.a=null,$e(t,o)},m(r,s){ln(r,t,s),n.m('<!--! Font Awesome Pro 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2024 Fonticons, Inc.--><path d="M135 369c9.4 9.4 24.6 9.4 33.9 0s9.4-24.6 0-33.9l-87-87L424 248c22.1 0 40 17.9 40 40v168c0 13.3 10.7 24 24 24s24-10.7 24-24V288c0-48.6-39.4-88-88-88H81.9l87-87c9.4-9.4 9.4-24.6 0-33.9s-24.6-9.4-33.9 0L7 207c-9.4 9.4-9.4 24.6 0 33.9z"/>',t)},p(r,[s]){$e(t,o=Se(e,[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 512 512"},1&s&&r[0]]))},i:P,o:P,d(r){r&&b(t)}}}function I8(i,t,n){return i.$$set=e=>{n(0,t=kt(kt({},t),le(e)))},[t=le(t)]}class cm extends ut{constructor(t){super(),dt(this,t,I8,E8,ct,{})}}function L8(i){let t,n,e;return t=new cm({}),{c(){v(t.$$.fragment),n=G(`
      Discard All`)},m(o,r){w(t,o,r),x(o,n,r),e=!0},i(o){e||(d(t.$$.fragment,o),e=!0)},o(o){$(t.$$.fragment,o),e=!1},d(o){o&&b(n),y(t,o)}}}function R8(i){let t,n;return t=new Pt({props:{triggerOn:[Zt.Hover],content:i[0]?"Discard all changes":"No changes to undo",$$slots:{default:[L8]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};1&o&&(r.content=e[0]?"Discard all changes":"No changes to undo"),32&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function D8(i){let t,n,e;return t=new am({}),{c(){v(t.$$.fragment),n=G(`
      Keep All`)},m(o,r){w(t,o,r),x(o,n,r),e=!0},i(o){e||(d(t.$$.fragment,o),e=!0)},o(o){$(t.$$.fragment,o),e=!1},d(o){o&&b(n),y(t,o)}}}function N8(i){let t,n;return t=new Pt({props:{triggerOn:[Zt.Hover],content:i[0]?"Keep all changes and clear checkpoints":"No changes to keep",$$slots:{default:[D8]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};1&o&&(r.content=e[0]?"Keep all changes and clear checkpoints":"No changes to keep"),32&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function P8(i){let t,n,e,o,r;return n=new he({props:{class:"c-bottom-controls__revert-btn",variant:"soft",color:"neutral",size:1,disabled:!i[0],$$slots:{default:[R8]},$$scope:{ctx:i}}}),n.$on("click",i[2]),o=new he({props:{class:"c-bottom-controls__accept-btn",variant:"soft",color:"success",size:1,disabled:!i[0],$$slots:{default:[N8]},$$scope:{ctx:i}}}),o.$on("click",i[3]),{c(){t=L("div"),v(n.$$.fragment),e=U(),v(o.$$.fragment),A(t,"class","c-bottom-controls svelte-1pc5clx")},m(s,c){x(s,t,c),w(n,t,null),O(t,e),w(o,t,null),r=!0},p(s,[c]){const a={};1&c&&(a.disabled=!s[0]),33&c&&(a.$$scope={dirty:c,ctx:s}),n.$set(a);const l={};1&c&&(l.disabled=!s[0]),33&c&&(l.$$scope={dirty:c,ctx:s}),o.$set(l)},i(s){r||(d(n.$$.fragment,s),d(o.$$.fragment,s),r=!0)},o(s){$(n.$$.fragment,s),$(o.$$.fragment,s),r=!1},d(s){s&&b(t),y(n),y(o)}}}function F8(i,t,n){let e;const o=St("checkpointStore"),{targetCheckpointHasChanges:r}=o;return Et(i,r,s=>n(0,e=s)),[e,r,async function(){await o.rejectAll()},async function(){await o.acceptAll()}]}class O8 extends ut{constructor(t){super(),dt(this,t,F8,P8,ct,{})}}function ad(i,t,n){const e=i.slice();return e[30]=t[n],e}function cd(i){let t,n,e,o;function r(c){i[25](c)}let s={class:"c-agent-edits-container__block-container",$$slots:{footer:[q8],header:[j8],default:[H8]},$$scope:{ctx:i}};return i[6]!==void 0&&(s.collapsed=i[6]),n=new js({props:s}),te.push(()=>Te(n,"collapsed",r)),{c(){t=L("div"),v(n.$$.fragment),A(t,"class","c-agent-edits-container svelte-fdz1jv")},m(c,a){x(c,t,a),w(n,t,null),o=!0},p(c,a){const l={};197&a[0]|4&a[1]&&(l.$$scope={dirty:a,ctx:c}),!e&&64&a[0]&&(e=!0,l.collapsed=c[6],Re(()=>e=!1)),n.$set(l)},i(c){o||(d(n.$$.fragment,c),o=!0)},o(c){$(n.$$.fragment,c),o=!1},d(c){c&&b(t),y(n)}}}function z8(i){let t,n,e;return n=new Gt({props:{size:1,color:"neutral",$$slots:{default:[U8]},$$scope:{ctx:i}}}),{c(){t=L("div"),v(n.$$.fragment),A(t,"class","c-edits-list c-edits-list--empty svelte-fdz1jv")},m(o,r){x(o,t,r),w(n,t,null),e=!0},p(o,r){const s={};4&r[1]&&(s.$$scope={dirty:r,ctx:o}),n.$set(s)},i(o){e||(d(n.$$.fragment,o),e=!0)},o(o){$(n.$$.fragment,o),e=!1},d(o){o&&b(t),y(n)}}}function B8(i){let t,n,e,o=se(i[0]),r=[];for(let c=0;c<o.length;c+=1)r[c]=ld(ad(i,o,c));const s=c=>$(r[c],1,1,()=>{r[c]=null});return{c(){t=L("div"),n=L("div");for(let c=0;c<r.length;c+=1)r[c].c();A(n,"class","c-edits-section svelte-fdz1jv"),A(t,"class","c-edits-list svelte-fdz1jv")},m(c,a){x(c,t,a),O(t,n);for(let l=0;l<r.length;l+=1)r[l]&&r[l].m(n,null);e=!0},p(c,a){if(229377&a[0]){let l;for(o=se(c[0]),l=0;l<o.length;l+=1){const u=ad(c,o,l);r[l]?(r[l].p(u,a),d(r[l],1)):(r[l]=ld(u),r[l].c(),d(r[l],1),r[l].m(n,null))}for(j(),l=o.length;l<r.length;l+=1)s(l);q()}},i(c){if(!e){for(let a=0;a<o.length;a+=1)d(r[a]);e=!0}},o(c){r=r.filter(Boolean);for(let a=0;a<r.length;a+=1)$(r[a]);e=!1},d(c){c&&b(t),pn(r,c)}}}function U8(i){let t;return{c(){t=G("No changes to show")},m(n,e){x(n,t,e)},d(n){n&&b(t)}}}function ld(i){let t,n;function e(){return i[22](i[30])}function o(){return i[23](i[30])}function r(){return i[24](i[30])}return t=new sm({props:{qualifiedPathName:i[30].qualifiedPathName,lineChanges:i[30].changesSummary,onClickFile:e,onClickReview:o,onClickRevert:r}}),{c(){v(t.$$.fragment)},m(s,c){w(t,s,c),n=!0},p(s,c){i=s;const a={};1&c[0]&&(a.qualifiedPathName=i[30].qualifiedPathName),1&c[0]&&(a.lineChanges=i[30].changesSummary),1&c[0]&&(a.onClickFile=e),1&c[0]&&(a.onClickReview=o),1&c[0]&&(a.onClickRevert=r),t.$set(a)},i(s){n||(d(t.$$.fragment,s),n=!0)},o(s){$(t.$$.fragment,s),n=!1},d(s){y(t,s)}}}function H8(i){let t,n,e,o;const r=[B8,z8],s=[];function c(a,l){return a[0].length>0?0:1}return t=c(i),n=s[t]=r[t](i),{c(){n.c(),e=mt()},m(a,l){s[t].m(a,l),x(a,e,l),o=!0},p(a,l){let u=t;t=c(a),t===u?s[t].p(a,l):(j(),$(s[u],1,1,()=>{s[u]=null}),q(),n=s[t],n?n.p(a,l):(n=s[t]=r[t](a),n.c()),d(n,1),n.m(e.parentNode,e))},i(a){o||(d(n),o=!0)},o(a){$(n),o=!1},d(a){a&&b(e),s[t].d(a)}}}function j8(i){let t,n;return t=new $m({props:{filesCount:i[0].length,diffSummary:i[2],collapsed:i[6],hasChanges:i[7],onRevert:i[18],onKeep:i[19],slot:"header"}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};1&o[0]&&(r.filesCount=e[0].length),4&o[0]&&(r.diffSummary=e[2]),64&o[0]&&(r.collapsed=e[6]),128&o[0]&&(r.hasChanges=e[7]),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function q8(i){let t,n;return t=new O8({props:{slot:"footer"}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p:P,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function W8(i){let t,n,e=(i[3]&&i[4]>0&&i[0].length>0||i[5])&&cd(i);return{c(){e&&e.c(),t=mt()},m(o,r){e&&e.m(o,r),x(o,t,r),n=!0},p(o,r){o[3]&&o[4]>0&&o[0].length>0||o[5]?e?(e.p(o,r),57&r[0]&&d(e,1)):(e=cd(o),e.c(),d(e,1),e.m(t.parentNode,t)):e&&(j(),$(e,1,1,()=>{e=null}),q())},i(o){n||(d(e),n=!0)},o(o){$(e),n=!1},d(o){o&&b(t),e&&e.d(o)}}}function WT(i){if(!i)return"";if(i===Number.MAX_SAFE_INTEGER)return"Now";const t=new Date(i),n=new Date,e=t.getHours(),o=`${e%12||12}:${t.getMinutes().toString().padStart(2,"0")}${e>=12?"PM":"AM"}`,r=Math.floor((n.getTime()-t.getTime())/864e5);return r===0?o:r===1?`Yesterday at ${o}`:`${r} days ago at ${o}`}function V8(i,t,n){let e,o,r,s,c,a,l,u,f,m,p,_=P;i.$$.on_destroy.push(()=>_());const M=St("chatModel");Et(i,M,J=>n(20,c=J));const C=St("agentConversationModel"),T=St("checkpointStore"),E=St(mo.key),{targetCheckpointSummary:R,totalCheckpointCount:N,targetCheckpoint:Z,targetCheckpointHasChanges:Q}=T;Et(i,R,J=>n(21,a=J)),Et(i,N,J=>n(4,u=J)),Et(i,Z,J=>n(26,s=J)),Et(i,Q,J=>n(7,p=J));const{isCurrConversationAgentic:X}=C;Et(i,X,J=>n(3,l=J));const{canShowTaskList:K}=E;function H(J){M.extensionClient.openFile({repoRoot:J.rootPath,pathName:J.relPath,allowOutOfWorkspace:!0})}function Y(J){const rt=C.getBaselineTimestamp();M.extensionClient.showAgentReview(J,rt,s==null?void 0:s.toTimestamp,!1,!0)}function V(J){const rt=C.getBaselineTimestamp();T.revertDocumentToTimestamp(J,rt)}return Et(i,K,J=>n(5,f=J)),i.$$.update=()=>{2097152&i.$$.dirty[0]&&n(0,e=a.filter(J=>J.changesSummary&&(J.changesSummary.totalAddedLines>0||J.changesSummary.totalRemovedLines>0))),1&i.$$.dirty[0]&&n(2,o=e.reduce((J,rt)=>{var lt,ot;return J.totalAddedLines+=((lt=rt.changesSummary)==null?void 0:lt.totalAddedLines)??0,J.totalRemovedLines+=((ot=rt.changesSummary)==null?void 0:ot.totalRemovedLines)??0,J},{totalAddedLines:0,totalRemovedLines:0})),1048576&i.$$.dirty[0]&&(n(1,r=c.isPanelCollapsed),_(),_=ce(r,J=>n(6,m=J)))},[e,r,o,l,u,f,m,p,M,R,N,Z,Q,X,K,H,Y,V,async function(){await T.rejectAll()},async function(){await T.acceptAll()},c,a,J=>H(J.qualifiedPathName),J=>Y(J.qualifiedPathName),J=>V(J.qualifiedPathName),function(J){m=J,r.set(m)}]}class G8 extends ut{constructor(t){super(),dt(this,t,V8,W8,ct,{},null,[-1,-1])}}function Y8(i){let t,n,e=[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 128 512"},i[0]],o={};for(let r=0;r<e.length;r+=1)o=kt(o,e[r]);return{c(){t=ie("svg"),n=new rn(!0),this.h()},l(r){t=sn(r,"svg",{xmlns:!0,"data-ds-icon":!0,viewBox:!0});var s=an(t);n=cn(s,!0),s.forEach(b),this.h()},h(){n.a=null,$e(t,o)},m(r,s){ln(r,t,s),n.m('<!--! Font Awesome Pro 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2024 Fonticons, Inc.--><path d="M64 368a48 48 0 1 0 0 96 48 48 0 1 0 0-96m0-160a48 48 0 1 0 0 96 48 48 0 1 0 0-96m48-112a48 48 0 1 0-96 0 48 48 0 1 0 96 0"/>',t)},p(r,[s]){$e(t,o=Se(e,[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 128 512"},1&s&&r[0]]))},i:P,o:P,d(r){r&&b(t)}}}function K8(i,t,n){return i.$$set=e=>{n(0,t=kt(kt({},t),le(e)))},[t=le(t)]}class X8 extends ut{constructor(t){super(),dt(this,t,K8,Y8,ct,{})}}function J8(i){let t,n,e=[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 512 512"},i[0]],o={};for(let r=0;r<e.length;r+=1)o=kt(o,e[r]);return{c(){t=ie("svg"),n=new rn(!0),this.h()},l(r){t=sn(r,"svg",{xmlns:!0,"data-ds-icon":!0,viewBox:!0});var s=an(t);n=cn(s,!0),s.forEach(b),this.h()},h(){n.a=null,$e(t,o)},m(r,s){ln(r,t,s),n.m('<!--! Font Awesome Pro 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2024 Fonticons, Inc.--><path d="M448 464H192c-8.8 0-16-7.2-16-16v-80h-48v80c0 35.3 28.7 64 64 64h256c35.3 0 64-28.7 64-64V154.5c0-17-6.7-33.3-18.7-45.3l-90.6-90.5C390.7 6.7 374.5 0 357.5 0H192c-35.3 0-64 28.7-64 64v192h48V64c0-8.8 7.2-16 16-16h160v80c0 17.7 14.3 32 32 32h80v288c0 8.8-7.2 16-16 16M297 215c-9.4-9.4-24.6-9.4-33.9 0s-9.4 24.6 0 33.9l39 39L24 288c-13.3 0-24 10.7-24 24s10.7 24 24 24h278.1l-39 39c-9.4 9.4-9.4 24.6 0 33.9s24.6 9.4 33.9 0l80-80c9.4-9.4 9.4-24.6 0-33.9z"/>',t)},p(r,[s]){$e(t,o=Se(e,[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 512 512"},1&s&&r[0]]))},i:P,o:P,d(r){r&&b(t)}}}function Z8(i,t,n){return i.$$set=e=>{n(0,t=kt(kt({},t),le(e)))},[t=le(t)]}class Q8 extends ut{constructor(t){super(),dt(this,t,Z8,J8,ct,{})}}function t_(i){let t,n,e=[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 576 512"},i[0]],o={};for(let r=0;r<e.length;r+=1)o=kt(o,e[r]);return{c(){t=ie("svg"),n=new rn(!0),this.h()},l(r){t=sn(r,"svg",{xmlns:!0,"data-ds-icon":!0,viewBox:!0});var s=an(t);n=cn(s,!0),s.forEach(b),this.h()},h(){n.a=null,$e(t,o)},m(r,s){ln(r,t,s),n.m('<!--! Font Awesome Pro 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2024 Fonticons, Inc.--><path d="M336 448c0 8.8-7.2 16-16 16H64c-8.8 0-16-7.2-16-16V64c0-8.8 7.2-16 16-16h160v80c0 17.7 14.3 32 32 32h80v96h48V154.5c0-17-6.7-33.3-18.7-45.3l-90.6-90.5C262.7 6.7 246.5 0 229.5 0H64C28.7 0 0 28.7 0 64v384c0 35.3 28.7 64 64 64h256c35.3 0 64-28.7 64-64v-80h-48zm153-233c-9.4-9.4-24.6-9.4-33.9 0s-9.4 24.6 0 33.9l39 39-278.1.1c-13.3 0-24 10.7-24 24s10.7 24 24 24h278.1l-39 39c-9.4 9.4-9.4 24.6 0 33.9s24.6 9.4 33.9 0l80-80c9.4-9.4 9.4-24.6 0-33.9z"/>',t)},p(r,[s]){$e(t,o=Se(e,[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 576 512"},1&s&&r[0]]))},i:P,o:P,d(r){r&&b(t)}}}function e_(i,t,n){return i.$$set=e=>{n(0,t=kt(kt({},t),le(e)))},[t=le(t)]}class n_ extends ut{constructor(t){super(),dt(this,t,e_,t_,ct,{})}}function o_(i){let t,n,e=[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 512 512"},i[0]],o={};for(let r=0;r<e.length;r+=1)o=kt(o,e[r]);return{c(){t=ie("svg"),n=new rn(!0),this.h()},l(r){t=sn(r,"svg",{xmlns:!0,"data-ds-icon":!0,viewBox:!0});var s=an(t);n=cn(s,!0),s.forEach(b),this.h()},h(){n.a=null,$e(t,o)},m(r,s){ln(r,t,s),n.m('<!--! Font Awesome Pro 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2024 Fonticons, Inc.--><path d="M208 416c0-26.5-21.5-48-48-48H64c-8.8 0-16-7.2-16-16V64c0-8.8 7.2-16 16-16h384c8.8 0 16 7.2 16 16v288c0 8.8-7.2 16-16 16H309.3c-10.4 0-20.5 3.4-28.8 9.6L208 432zm-.2 76.2.2-.2 101.3-76H448c35.3 0 64-28.7 64-64V64c0-35.3-28.7-64-64-64H64C28.7 0 0 28.7 0 64v288c0 35.3 28.7 64 64 64h96v80c0 6.1 3.4 11.6 8.8 14.3s11.9 2.1 16.8-1.5l17.1-12.8zM232 296c0 13.3 10.7 24 24 24s24-10.7 24-24v-64h64c13.3 0 24-10.7 24-24s-10.7-24-24-24h-64v-64c0-13.3-10.7-24-24-24s-24 10.7-24 24v64h-64c-13.3 0-24 10.7-24 24s10.7 24 24 24h64z"/>',t)},p(r,[s]){$e(t,o=Se(e,[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 512 512"},1&s&&r[0]]))},i:P,o:P,d(r){r&&b(t)}}}function r_(i,t,n){return i.$$set=e=>{n(0,t=kt(kt({},t),le(e)))},[t=le(t)]}class lm extends ut{constructor(t){super(),dt(this,t,r_,o_,ct,{})}}function i_(i){let t,n;return t=new X8({}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function s_(i){let t,n;return t=new go({props:{size:1}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function a_(i){let t,n,e,o;const r=[s_,i_],s=[];function c(a,l){return a[1]?0:1}return t=c(i),n=s[t]=r[t](i),{c(){n.c(),e=mt()},m(a,l){s[t].m(a,l),x(a,e,l),o=!0},p(a,l){let u=t;t=c(a),t!==u&&(j(),$(s[u],1,1,()=>{s[u]=null}),q(),n=s[t],n||(n=s[t]=r[t](a),n.c()),d(n,1),n.m(e.parentNode,e))},i(a){o||(d(n),o=!0)},o(a){$(n),o=!1},d(a){a&&b(e),s[t].d(a)}}}function c_(i){let t,n;return t=new fe({props:{size:1,variant:"ghost-block",color:"neutral",disabled:i[1],$$slots:{default:[a_]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};2&o&&(r.disabled=e[1]),1026&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function l_(i){let t,n;return t=new Pt({props:{content:"More Actions",triggerOn:[Zt.Hover],$$slots:{default:[c_]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};1026&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function u_(i){let t;return{c(){t=G("Import/Export")},m(n,e){x(n,t,e)},d(n){n&&b(t)}}}function d_(i){let t;return{c(){t=G("Export to Markdown")},m(n,e){x(n,t,e)},d(n){n&&b(t)}}}function $_(i){let t,n;return t=new n_({props:{slot:"iconLeft"}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p:P,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function f_(i){let t;return{c(){t=G("Import from Markdown")},m(n,e){x(n,t,e)},d(n){n&&b(t)}}}function m_(i){let t,n;return t=new Q8({props:{slot:"iconLeft"}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p:P,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function p_(i){let t;return{c(){t=G("Continue in New Chat")},m(n,e){x(n,t,e)},d(n){n&&b(t)}}}function g_(i){let t,n;return t=new lm({props:{slot:"iconLeft"}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p:P,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function h_(i){let t,n,e,o,r,s,c,a;return t=new wt.Label({props:{$$slots:{default:[u_]},$$scope:{ctx:i}}}),e=new wt.Item({props:{onSelect:i[3],disabled:i[1],$$slots:{iconLeft:[$_],default:[d_]},$$scope:{ctx:i}}}),r=new wt.Item({props:{onSelect:i[4],disabled:i[1],$$slots:{iconLeft:[m_],default:[f_]},$$scope:{ctx:i}}}),c=new wt.Item({props:{onSelect:i[5],$$slots:{iconLeft:[g_],default:[p_]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment),n=U(),v(e.$$.fragment),o=U(),v(r.$$.fragment),s=U(),v(c.$$.fragment)},m(l,u){w(t,l,u),x(l,n,u),w(e,l,u),x(l,o,u),w(r,l,u),x(l,s,u),w(c,l,u),a=!0},p(l,u){const f={};1024&u&&(f.$$scope={dirty:u,ctx:l}),t.$set(f);const m={};2&u&&(m.disabled=l[1]),1024&u&&(m.$$scope={dirty:u,ctx:l}),e.$set(m);const p={};2&u&&(p.disabled=l[1]),1024&u&&(p.$$scope={dirty:u,ctx:l}),r.$set(p);const _={};1024&u&&(_.$$scope={dirty:u,ctx:l}),c.$set(_)},i(l){a||(d(t.$$.fragment,l),d(e.$$.fragment,l),d(r.$$.fragment,l),d(c.$$.fragment,l),a=!0)},o(l){$(t.$$.fragment,l),$(e.$$.fragment,l),$(r.$$.fragment,l),$(c.$$.fragment,l),a=!1},d(l){l&&(b(n),b(o),b(s)),y(t,l),y(e,l),y(r,l),y(c,l)}}}function v_(i){let t,n,e,o;return t=new wt.Trigger({props:{$$slots:{default:[l_]},$$scope:{ctx:i}}}),e=new wt.Content({props:{size:1,side:"bottom",align:"end",$$slots:{default:[h_]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment),n=U(),v(e.$$.fragment)},m(r,s){w(t,r,s),x(r,n,s),w(e,r,s),o=!0},p(r,s){const c={};1026&s&&(c.$$scope={dirty:s,ctx:r}),t.$set(c);const a={};1026&s&&(a.$$scope={dirty:s,ctx:r}),e.$set(a)},i(r){o||(d(t.$$.fragment,r),d(e.$$.fragment,r),o=!0)},o(r){$(t.$$.fragment,r),$(e.$$.fragment,r),o=!1},d(r){r&&b(n),y(t,r),y(e,r)}}}function w_(i){let t,n,e;function o(s){i[6](s)}let r={$$slots:{default:[v_]},$$scope:{ctx:i}};return i[0]!==void 0&&(r.requestClose=i[0]),t=new wt.Root({props:r}),te.push(()=>Te(t,"requestClose",o)),{c(){v(t.$$.fragment)},m(s,c){w(t,s,c),e=!0},p(s,[c]){const a={};1026&c&&(a.$$scope={dirty:c,ctx:s}),!n&&1&c&&(n=!0,a.requestClose=s[0],Re(()=>n=!1)),t.$set(a)},i(s){e||(d(t.$$.fragment,s),e=!0)},o(s){$(t.$$.fragment,s),e=!1},d(s){y(t,s)}}}function y_(i,t,n){let e;const o=St(mo.key),{isImportingExporting:r,rootTask:s}=o;Et(i,r,l=>n(1,e=l));const c=St("chatModel");let a;return[a,e,r,async function(){if(e)return;const l=oe(s),u=Or(l),f={action:Pr.exportTaskList,totalTasksCount:u.total,triggeredBy:Fr.user},m=c.currentConversationModel.chatHistory,p=m.length>0&&m[m.length-1].request_id||c.currentConversationModel.id;c.currentConversationModel.extensionClient.reportAgentSessionEvent({eventName:Mo.taskListUsage,conversationId:p,eventData:{taskListUsageData:f}}),await o.exportTasksToMarkdown(),a==null||a()},async function(){if(e)return;const l=oe(s),u=Or(l),f={action:Pr.importTaskList,totalTasksCount:u.total,triggeredBy:Fr.user},m=c.currentConversationModel.chatHistory,p=m.length>0&&m[m.length-1].request_id||c.currentConversationModel.id;c.currentConversationModel.extensionClient.reportAgentSessionEvent({eventName:Mo.taskListUsage,conversationId:p,eventData:{taskListUsageData:f}}),await o.importTasksFromMarkdown(),a==null||a()},async function(){const l=oe(s);if(!l)return;const u=c.currentConversationId,f=await o.cloneHydratedTask(l);u===c.currentConversationId&&f&&await c.setCurrentConversation(void 0,!0,{newTaskUuid:f.uuid}),a==null||a()},function(l){a=l,n(0,a)}]}class b_ extends ut{constructor(t){super(),dt(this,t,y_,w_,ct,{})}}function x_(i){let t,n,e=[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 512 512"},i[0]],o={};for(let r=0;r<e.length;r+=1)o=kt(o,e[r]);return{c(){t=ie("svg"),n=new rn(!0),this.h()},l(r){t=sn(r,"svg",{xmlns:!0,"data-ds-icon":!0,viewBox:!0});var s=an(t);n=cn(s,!0),s.forEach(b),this.h()},h(){n.a=null,$e(t,o)},m(r,s){ln(r,t,s),n.m('<!--! Font Awesome Pro 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2024 Fonticons, Inc.--><path d="M41.2 64C18.5 64 0 82.5 0 105.2c0 10.4 3.9 20.4 11 28.1l93 100.1v126c0 13.4 6.7 26 18 33.4l75.5 49.8c5.3 3.5 11.6 5.4 18 5.4 18 0 32.6-14.6 32.6-32.6v-182l93-100.1c7.1-7.6 11-17.6 11-28.1C352 82.5 333.5 64 310.8 64zm104.4 143.7L56.8 112h238.5l-88.8 95.7c-4.1 4.4-6.4 10.3-6.4 16.3v162.8l-48-31.7L152 224c0-6.1-2.3-11.9-6.4-16.3M344 392c-13.3 0-24 10.7-24 24s10.7 24 24 24h144c13.3 0 24-10.7 24-24s-10.7-24-24-24zm-24-136c0 13.3 10.7 24 24 24h144c13.3 0 24-10.7 24-24s-10.7-24-24-24H344c-13.3 0-24 10.7-24 24m88-184c-13.3 0-24 10.7-24 24s10.7 24 24 24h80c13.3 0 24-10.7 24-24s-10.7-24-24-24z"/>',t)},p(r,[s]){$e(t,o=Se(e,[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 512 512"},1&s&&r[0]]))},i:P,o:P,d(r){r&&b(t)}}}function __(i,t,n){return i.$$set=e=>{n(0,t=kt(kt({},t),le(e)))},[t=le(t)]}class C_ extends ut{constructor(t){super(),dt(this,t,__,x_,ct,{})}}function A_(i){let t,n,e;return n=new zs({}),{c(){t=L("span"),v(n.$$.fragment),A(t,"class","c-task-check-icon svelte-9rlaen")},m(o,r){x(o,t,r),w(n,t,null),e=!0},p:P,i(o){e||(d(n.$$.fragment,o),e=!0)},o(o){$(n.$$.fragment,o),e=!1},d(o){o&&b(t),y(n)}}}class M_ extends ut{constructor(t){super(),dt(this,t,null,A_,ct,{})}}function ud(i,t,n){const e=i.slice();e[11]=t[n];const o=e[0].has(e[11].value);return e[12]=o,e}function k_(i){let t,n;return t=new C_({}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function S_(i){let t,n;return t=new fe({props:{size:1,variant:i[3]?"soft":"ghost-block",color:i[3]?"accent":"neutral",$$slots:{default:[k_]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};8&o&&(r.variant=e[3]?"soft":"ghost-block"),8&o&&(r.color=e[3]?"accent":"neutral"),32768&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function T_(i){let t,n;return t=new Pt({props:{content:"Filter Tasks",triggerOn:[Zt.Hover],$$slots:{default:[S_]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};32776&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function E_(i){let t;return{c(){t=G("Select All")},m(n,e){x(n,t,e)},d(n){n&&b(t)}}}function I_(i){let t;return{c(){t=G("Clear All")},m(n,e){x(n,t,e)},d(n){n&&b(t)}}}function L_(i){let t,n,e,o,r=i[11].label+"",s=i[11].count+"";return{c(){t=G(r),n=G(" ("),e=G(s),o=G(")")},m(c,a){x(c,t,a),x(c,n,a),x(c,e,a),x(c,o,a)},p(c,a){2&a&&r!==(r=c[11].label+"")&&_t(t,r),2&a&&s!==(s=c[11].count+"")&&_t(e,s)},d(c){c&&(b(t),b(n),b(e),b(o))}}}function R_(i){let t,n,e;return t=new Gt({props:{size:1,color:i[12]?"neutral":"secondary",$$slots:{default:[L_]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment),n=U()},m(o,r){w(t,o,r),x(o,n,r),e=!0},p(o,r){const s={};3&r&&(s.color=o[12]?"neutral":"secondary"),32770&r&&(s.$$scope={dirty:r,ctx:o}),t.$set(s)},i(o){e||(d(t.$$.fragment,o),e=!0)},o(o){$(t.$$.fragment,o),e=!1},d(o){o&&b(n),y(t,o)}}}function D_(i){let t,n;return t=new ap({props:{taskState:i[11].value,size:1}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};2&o&&(r.taskState=e[11].value),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function N_(i){let t,n;return t=new M_({}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p:P,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function P_(i){let t,n,e,o;const r=[N_,D_],s=[];function c(a,l){return a[12]?0:1}return t=c(i),n=s[t]=r[t](i),{c(){n.c(),e=U()},m(a,l){s[t].m(a,l),x(a,e,l),o=!0},p(a,l){let u=t;t=c(a),t===u?s[t].p(a,l):(j(),$(s[u],1,1,()=>{s[u]=null}),q(),n=s[t],n?n.p(a,l):(n=s[t]=r[t](a),n.c()),d(n,1),n.m(e.parentNode,e))},i(a){o||(d(n),o=!0)},o(a){$(n),o=!1},d(a){a&&b(e),s[t].d(a)}}}function dd(i){let t,n;function e(){return i[9](i[11])}return t=new wt.Item({props:{onSelect:e,$$slots:{iconLeft:[P_],default:[R_]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(o,r){w(t,o,r),n=!0},p(o,r){i=o;const s={};2&r&&(s.onSelect=e),32771&r&&(s.$$scope={dirty:r,ctx:i}),t.$set(s)},i(o){n||(d(t.$$.fragment,o),n=!0)},o(o){$(t.$$.fragment,o),n=!1},d(o){y(t,o)}}}function F_(i){let t,n,e,o,r,s,c,a;t=new wt.Item({props:{onSelect:i[7],$$slots:{default:[E_]},$$scope:{ctx:i}}}),e=new wt.Item({props:{onSelect:i[8],$$slots:{default:[I_]},$$scope:{ctx:i}}}),r=new wt.Separator({});let l=se(i[1]),u=[];for(let m=0;m<l.length;m+=1)u[m]=dd(ud(i,l,m));const f=m=>$(u[m],1,1,()=>{u[m]=null});return{c(){v(t.$$.fragment),n=U(),v(e.$$.fragment),o=U(),v(r.$$.fragment),s=U();for(let m=0;m<u.length;m+=1)u[m].c();c=mt()},m(m,p){w(t,m,p),x(m,n,p),w(e,m,p),x(m,o,p),w(r,m,p),x(m,s,p);for(let _=0;_<u.length;_+=1)u[_]&&u[_].m(m,p);x(m,c,p),a=!0},p(m,p){const _={};32768&p&&(_.$$scope={dirty:p,ctx:m}),t.$set(_);const M={};if(32768&p&&(M.$$scope={dirty:p,ctx:m}),e.$set(M),19&p){let C;for(l=se(m[1]),C=0;C<l.length;C+=1){const T=ud(m,l,C);u[C]?(u[C].p(T,p),d(u[C],1)):(u[C]=dd(T),u[C].c(),d(u[C],1),u[C].m(c.parentNode,c))}for(j(),C=l.length;C<u.length;C+=1)f(C);q()}},i(m){if(!a){d(t.$$.fragment,m),d(e.$$.fragment,m),d(r.$$.fragment,m);for(let p=0;p<l.length;p+=1)d(u[p]);a=!0}},o(m){$(t.$$.fragment,m),$(e.$$.fragment,m),$(r.$$.fragment,m),u=u.filter(Boolean);for(let p=0;p<u.length;p+=1)$(u[p]);a=!1},d(m){m&&(b(n),b(o),b(s),b(c)),y(t,m),y(e,m),y(r,m),pn(u,m)}}}function O_(i){let t,n,e,o;return t=new wt.Trigger({props:{$$slots:{default:[T_]},$$scope:{ctx:i}}}),e=new wt.Content({props:{side:"bottom",align:"start",size:1,$$slots:{default:[F_]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment),n=U(),v(e.$$.fragment)},m(r,s){w(t,r,s),x(r,n,s),w(e,r,s),o=!0},p(r,s){const c={};32776&s&&(c.$$scope={dirty:s,ctx:r}),t.$set(c);const a={};32771&s&&(a.$$scope={dirty:s,ctx:r}),e.$set(a)},i(r){o||(d(t.$$.fragment,r),d(e.$$.fragment,r),o=!0)},o(r){$(t.$$.fragment,r),$(e.$$.fragment,r),o=!1},d(r){r&&b(n),y(t,r),y(e,r)}}}function z_(i){let t,n,e;function o(s){i[10](s)}let r={$$slots:{default:[O_]},$$scope:{ctx:i}};return i[2]!==void 0&&(r.requestClose=i[2]),t=new wt.Root({props:r}),te.push(()=>Te(t,"requestClose",o)),{c(){v(t.$$.fragment)},m(s,c){w(t,s,c),e=!0},p(s,[c]){const a={};32779&c&&(a.$$scope={dirty:c,ctx:s}),!n&&4&c&&(n=!0,a.requestClose=s[2],Re(()=>n=!1)),t.$set(a)},i(s){e||(d(t.$$.fragment,s),e=!0)},o(s){$(t.$$.fragment,s),e=!1},d(s){y(t,s)}}}function B_(i,t,n){let e,o,{taskFilters:r=[]}=t,{activeTaskFilter:s=new Set}=t;function c(u){const f=new Set(s);f.has(u)?f.delete(u):f.add(u),n(0,s=f)}function a(){const u=r.map(f=>f.value);n(0,s=new Set(u))}function l(){n(0,s=new Set)}return i.$$set=u=>{"taskFilters"in u&&n(1,r=u.taskFilters),"activeTaskFilter"in u&&n(0,s=u.activeTaskFilter)},i.$$.update=()=>{3&i.$$.dirty&&n(3,e=s.size===0||s.size<r.length)},[s,r,o,e,c,a,l,()=>a(),()=>l(),u=>{c(u.value)},function(u){o=u,n(2,o)}]}class U_ extends ut{constructor(t){super(),dt(this,t,B_,z_,ct,{taskFilters:1,activeTaskFilter:0})}}function $d(i){let t,n,e,o,r,s=i[5]&&i[5].total>0&&fd(i);const c=[V_,W_,q_],a=[];function l(u,f){return u[6]?0:u[5]&&u[5].completed===u[5].total&&u[5].total>0?1:u[2]&&u[2].name?2:-1}return~(e=l(i))&&(o=a[e]=c[e](i)),{c(){t=L("div"),s&&s.c(),n=U(),o&&o.c(),A(t,"class","c-task-list-header__status svelte-qt9z9m")},m(u,f){x(u,t,f),s&&s.m(t,null),O(t,n),~e&&a[e].m(t,null),r=!0},p(u,f){u[5]&&u[5].total>0?s?(s.p(u,f),32&f&&d(s,1)):(s=fd(u),s.c(),d(s,1),s.m(t,n)):s&&(j(),$(s,1,1,()=>{s=null}),q());let m=e;e=l(u),e===m?~e&&a[e].p(u,f):(o&&(j(),$(a[m],1,1,()=>{a[m]=null}),q()),~e?(o=a[e],o?o.p(u,f):(o=a[e]=c[e](u),o.c()),d(o,1),o.m(t,null)):o=null)},i(u){r||(d(s),d(o),r=!0)},o(u){$(s),$(o),r=!1},d(u){u&&b(t),s&&s.d(),~e&&a[e].d()}}}function fd(i){let t,n;return t=new Pt({props:{triggerOn:[Zt.Hover],content:"Completed "+i[5].completed+" of "+i[5].total+" tasks",$$slots:{default:[j_]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};32&o&&(r.content="Completed "+e[5].completed+" of "+e[5].total+" tasks"),524320&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function H_(i){let t,n,e,o=i[5].completed+"",r=i[5].total+"";return{c(){t=G(o),n=G("/"),e=G(r)},m(s,c){x(s,t,c),x(s,n,c),x(s,e,c)},p(s,c){32&c&&o!==(o=s[5].completed+"")&&_t(t,o),32&c&&r!==(r=s[5].total+"")&&_t(e,r)},d(s){s&&(b(t),b(n),b(e))}}}function j_(i){let t,n;return t=new cp({props:{color:i[5].completed===i[5].total?"success":"info",size:1,$$slots:{default:[H_]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};32&o&&(r.color=e[5].completed===e[5].total?"success":"info"),524320&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function q_(i){let t,n;return t=new Gt({props:{size:1,color:"neutral",class:"c-task-list-header__task-name",$$slots:{default:[G_]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};524292&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function W_(i){let t,n;return t=new Gt({props:{size:1,color:"primary",class:"c-task-list-header__task-name",$$slots:{default:[Y_]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};524288&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function V_(i){let t,n;return t=new Gt({props:{size:1,color:"primary",class:"c-task-list-header__task-name",$$slots:{default:[K_]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};524352&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function G_(i){let t,n=i[2].name+"";return{c(){t=G(n)},m(e,o){x(e,t,o)},p(e,o){4&o&&n!==(n=e[2].name+"")&&_t(t,n)},d(e){e&&b(t)}}}function Y_(i){let t;return{c(){t=G("All tasks complete")},m(n,e){x(n,t,e)},d(n){n&&b(t)}}}function K_(i){let t,n=(i[6].name||"Untitled Task")+"";return{c(){t=G(n)},m(e,o){x(e,t,o)},p(e,o){64&o&&n!==(n=(e[6].name||"Untitled Task")+"")&&_t(t,n)},d(e){e&&b(t)}}}function md(i){let t,n;return t=new Pt({props:{content:"Run All Tasks",triggerOn:[Zt.Hover],$$slots:{default:[J_]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};524292&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function X_(i){let t,n;return t=new Sp({}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function J_(i){let t,n;return t=new fe({props:{size:1,variant:"ghost-block",color:"neutral",disabled:!1,$$slots:{default:[X_]},$$scope:{ctx:i}}}),t.$on("click",i[17]),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};524288&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function Z_(i){let t,n;return t=new Ts({}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function Q_(i){let t,n;return t=new fe({props:{size:1,variant:"ghost-block",color:"neutral",disabled:!i[2],$$slots:{default:[Z_]},$$scope:{ctx:i}}}),t.$on("click",i[12]),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};4&o&&(r.disabled=!e[2]),524288&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function tC(i){let t,n,e,o,r,s,c,a,l,u,f,m,p,_,M,C,T,E;o=new xf({}),c=new dm({});let R=i[1]&&$d(i),N=i[4]&&md(i);function Z(X){i[18](X)}m=new Pt({props:{content:"Add New Task",triggerOn:[Zt.Hover],$$slots:{default:[Q_]},$$scope:{ctx:i}}});let Q={taskFilters:i[3]};return i[0]!==void 0&&(Q.activeTaskFilter=i[0]),_=new U_({props:Q}),te.push(()=>Te(_,"activeTaskFilter",Z)),T=new b_({}),{c(){t=L("div"),n=L("div"),e=L("div"),v(o.$$.fragment),r=U(),s=L("div"),v(c.$$.fragment),a=U(),R&&R.c(),l=U(),u=L("div"),N&&N.c(),f=U(),v(m.$$.fragment),p=U(),v(_.$$.fragment),C=U(),v(T.$$.fragment),A(e,"class","c-task-list-header__collapse-btn svelte-qt9z9m"),A(s,"class","c-task-list-header__switch-btn svelte-qt9z9m"),A(n,"class","c-task-list-header__content svelte-qt9z9m"),A(u,"class","c-task-list-header__actions svelte-qt9z9m"),A(t,"class","c-task-list-header svelte-qt9z9m")},m(X,K){x(X,t,K),O(t,n),O(n,e),w(o,e,null),O(n,r),O(n,s),w(c,s,null),O(n,a),R&&R.m(n,null),O(t,l),O(t,u),N&&N.m(u,null),O(u,f),w(m,u,null),O(u,p),w(_,u,null),O(u,C),w(T,u,null),E=!0},p(X,[K]){X[1]?R?(R.p(X,K),2&K&&d(R,1)):(R=$d(X),R.c(),d(R,1),R.m(n,null)):R&&(j(),$(R,1,1,()=>{R=null}),q()),X[4]?N?(N.p(X,K),16&K&&d(N,1)):(N=md(X),N.c(),d(N,1),N.m(u,f)):N&&(j(),$(N,1,1,()=>{N=null}),q());const H={};524292&K&&(H.$$scope={dirty:K,ctx:X}),m.$set(H);const Y={};8&K&&(Y.taskFilters=X[3]),!M&&1&K&&(M=!0,Y.activeTaskFilter=X[0],Re(()=>M=!1)),_.$set(Y)},i(X){E||(d(o.$$.fragment,X),d(c.$$.fragment,X),d(R),d(N),d(m.$$.fragment,X),d(_.$$.fragment,X),d(T.$$.fragment,X),E=!0)},o(X){$(o.$$.fragment,X),$(c.$$.fragment,X),$(R),$(N),$(m.$$.fragment,X),$(_.$$.fragment,X),$(T.$$.fragment,X),E=!1},d(X){X&&b(t),y(o),y(c),R&&R.d(),N&&N.d(),y(m),y(_),y(T)}}}function eC(i,t,n){let e,o,r,s,c,{notStartedTasksCount:a=0}=t,{inProgressTasksCount:l=0}=t,{completedTasksCount:u=0}=t,{cancelledTasksCount:f=0}=t,{collapsed:m=!1}=t;const p=St(mo.key),_=St("chatModel"),{rootTask:M,activeTask:C,taskProgress:T}=p;Et(i,M,R=>n(2,r=R)),Et(i,C,R=>n(6,c=R)),Et(i,T,R=>n(5,s=R));let{activeTaskFilter:E=new Set}=t;return i.$$set=R=>{"notStartedTasksCount"in R&&n(13,a=R.notStartedTasksCount),"inProgressTasksCount"in R&&n(14,l=R.inProgressTasksCount),"completedTasksCount"in R&&n(15,u=R.completedTasksCount),"cancelledTasksCount"in R&&n(16,f=R.cancelledTasksCount),"collapsed"in R&&n(1,m=R.collapsed),"activeTaskFilter"in R&&n(0,E=R.activeTaskFilter)},i.$$.update=()=>{4&i.$$.dirty&&n(4,e=(r==null?void 0:r.subTasksData)&&r.subTasksData.length>0),122880&i.$$.dirty&&n(3,o=[{value:Xn.NOT_STARTED,label:hi(Xn.NOT_STARTED),count:a},{value:Xn.IN_PROGRESS,label:hi(Xn.IN_PROGRESS),count:l},{value:Xn.COMPLETE,label:hi(Xn.COMPLETE),count:u},{value:Xn.CANCELLED,label:hi(Xn.CANCELLED),count:f}])},[E,m,r,o,e,s,c,p,_,M,C,T,async function(){if(r){const R=Or(r),N={action:Pr.addSubtask,totalTasksCount:R.total,triggeredBy:Fr.user};_.currentConversationModel.extensionClient.reportAgentSessionEvent({eventName:Mo.taskListUsage,conversationId:_.currentConversationModel.id,eventData:{taskListUsageData:N}});const Z=await p.createTask("","",r.uuid);setTimeout(()=>{const Q=document.getElementById(`task-${Z}`),X=Q==null?void 0:Q.querySelector(".c-task-tree-item__name-editable"),K=X==null?void 0:X.querySelector("input");K==null||K.focus()},100)}},a,l,u,f,()=>{const R=Or(r),N={action:Pr.runAllTasks,totalTasksCount:R.total,triggeredBy:Fr.user};_.currentConversationModel.extensionClient.reportAgentSessionEvent({eventName:Mo.taskListUsage,conversationId:_.currentConversationModel.id,eventData:{taskListUsageData:N}}),p.runAllTasks()},function(R){E=R,n(0,E)}]}class nC extends ut{constructor(t){super(),dt(this,t,eC,tC,ct,{notStartedTasksCount:13,inProgressTasksCount:14,completedTasksCount:15,cancelledTasksCount:16,collapsed:1,activeTaskFilter:0})}}function pd(i){let t,n,e,o;function r(c){i[17](c)}let s={class:"c-task-list-container__block-container",$$slots:{header:[aC],default:[sC]},$$scope:{ctx:i}};return i[9]!==void 0&&(s.collapsed=i[9]),n=new js({props:s}),te.push(()=>Te(n,"collapsed",r)),{c(){t=L("div"),v(n.$$.fragment),A(t,"class","c-task-list-container svelte-yamkbz")},m(c,a){x(c,t,a),w(n,t,null),o=!0},p(c,a){const l={};2097789&a&&(l.$$scope={dirty:a,ctx:c}),!e&&512&a&&(e=!0,l.collapsed=c[9],Re(()=>e=!1)),n.$set(l)},i(c){o||(d(n.$$.fragment,c),o=!0)},o(c){$(n.$$.fragment,c),o=!1},d(c){c&&b(t),y(n)}}}function oC(i){let t,n,e;return n=new Gt({props:{size:1,color:"neutral",$$slots:{default:[iC]},$$scope:{ctx:i}}}),{c(){t=L("div"),v(n.$$.fragment),A(t,"class","c-tasks-list c-tasks-list--empty svelte-yamkbz")},m(o,r){x(o,t,r),w(n,t,null),e=!0},p(o,r){const s={};2097152&r&&(s.$$scope={dirty:r,ctx:o}),n.$set(s)},i(o){e||(d(n.$$.fragment,o),e=!0)},o(o){$(n.$$.fragment,o),e=!1},d(o){o&&b(t),y(n)}}}function rC(i){let t,n,e;return n=new up({props:{task:i[6],taskStore:i[11],editable:!0}}),{c(){t=L("div"),v(n.$$.fragment),A(t,"class","c-tasks-list svelte-yamkbz")},m(o,r){x(o,t,r),w(n,t,null),e=!0},p(o,r){const s={};64&r&&(s.task=o[6]),n.$set(s)},i(o){e||(d(n.$$.fragment,o),e=!0)},o(o){$(n.$$.fragment,o),e=!1},d(o){o&&b(t),y(n)}}}function iC(i){let t;return{c(){t=G("No tasks to show")},m(n,e){x(n,t,e)},d(n){n&&b(t)}}}function sC(i){let t,n,e,o;const r=[rC,oC],s=[];function c(a,l){var u,f;return(u=a[6])!=null&&u.isVisible&&((f=a[6].subTasksData)!=null&&f.length)?0:1}return t=c(i),n=s[t]=r[t](i),{c(){n.c(),e=mt()},m(a,l){s[t].m(a,l),x(a,e,l),o=!0},p(a,l){let u=t;t=c(a),t===u?s[t].p(a,l):(j(),$(s[u],1,1,()=>{s[u]=null}),q(),n=s[t],n?n.p(a,l):(n=s[t]=r[t](a),n.c()),d(n,1),n.m(e.parentNode,e))},i(a){o||(d(n),o=!0)},o(a){$(n),o=!1},d(a){a&&b(e),s[t].d(a)}}}function aC(i){let t,n,e;function o(s){i[16](s)}let r={notStartedTasksCount:i[5],inProgressTasksCount:i[4],completedTasksCount:i[3],cancelledTasksCount:i[2],collapsed:i[9],slot:"header"};return i[0]!==void 0&&(r.activeTaskFilter=i[0]),t=new nC({props:r}),te.push(()=>Te(t,"activeTaskFilter",o)),{c(){v(t.$$.fragment)},m(s,c){w(t,s,c),e=!0},p(s,c){const a={};32&c&&(a.notStartedTasksCount=s[5]),16&c&&(a.inProgressTasksCount=s[4]),8&c&&(a.completedTasksCount=s[3]),4&c&&(a.cancelledTasksCount=s[2]),512&c&&(a.collapsed=s[9]),!n&&1&c&&(n=!0,a.activeTaskFilter=s[0],Re(()=>n=!1)),t.$set(a)},i(s){e||(d(t.$$.fragment,s),e=!0)},o(s){$(t.$$.fragment,s),e=!1},d(s){y(t,s)}}}function cC(i){let t,n,e=i[8]&&i[1]&&pd(i);return{c(){e&&e.c(),t=mt()},m(o,r){e&&e.m(o,r),x(o,t,r),n=!0},p(o,[r]){o[8]&&o[1]?e?(e.p(o,r),258&r&&d(e,1)):(e=pd(o),e.c(),d(e,1),e.m(t.parentNode,t)):e&&(j(),$(e,1,1,()=>{e=null}),q())},i(o){n||(d(e),n=!0)},o(o){$(e),n=!1},d(o){o&&b(t),e&&e.d(o)}}}function lC(i,t,n){let e,o,r,s,c,a,l,u,f,m,p,_=P;i.$$.on_destroy.push(()=>_());const M=St("chatModel");Et(i,M,X=>n(15,f=X));const C=St("agentConversationModel"),T=St(mo.key),{isCurrConversationAgentic:E}=C;Et(i,E,X=>n(8,m=X));const{rootTask:R}=T;Et(i,R,X=>n(1,u=X));let N=new Set(Object.values(Xn)),Z=!1;function Q(X,K=0){let H={notStarted:0,inProgress:0,completed:0,cancelled:0};if(!X)return H;if(K!==0&&(X.state===Xn.NOT_STARTED?H.notStarted++:X.state===Xn.IN_PROGRESS?H.inProgress++:X.state===Xn.COMPLETE?H.completed++:X.state===Xn.CANCELLED&&H.cancelled++),X.subTasksData&&X.subTasksData.length>0)for(const Y of X.subTasksData){const V=Q(Y,K+1);H.notStarted+=V.notStarted,H.inProgress+=V.inProgress,H.completed+=V.completed,H.cancelled+=V.cancelled}return H}return ro(()=>{const X=oe(R);if(X&&!Z){Z=!0;const K=Or(X),H={action:Pr.viewTaskList,totalTasksCount:K.total,triggeredBy:Fr.user},Y=M.currentConversationModel.chatHistory,V=Y.length>0&&Y[Y.length-1].request_id||M.currentConversationModel.id;M.currentConversationModel.extensionClient.reportAgentSessionEvent({eventName:Mo.taskListUsage,conversationId:V,eventData:{taskListUsageData:H}})}}),i.$$.update=()=>{32768&i.$$.dirty&&(n(7,e=f.isPanelCollapsed),_(),_=ce(e,X=>n(9,p=X))),3&i.$$.dirty&&n(6,o=u?lp(u,N):void 0),2&i.$$.dirty&&n(14,r=Q(u)),16384&i.$$.dirty&&n(5,s=r.notStarted),16384&i.$$.dirty&&n(4,c=r.inProgress),16384&i.$$.dirty&&n(3,a=r.completed),16384&i.$$.dirty&&n(2,l=r.cancelled)},[N,u,l,a,c,s,o,e,m,p,M,T,E,R,r,f,function(X){N=X,n(0,N)},function(X){p=X,e.set(p)}]}class uC extends ut{constructor(t){super(),dt(this,t,lC,cC,ct,{})}}function dC(i){let t,n;return t=new uC({}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function $C(i){let t,n;return t=new G8({}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function fC(i){let t,n,e,o,r;const s=[$C,dC],c=[];function a(l,u){return l[0]===Dn.agentEdits||!l[1]||l[2].isActive?0:l[0]===Dn.tasks?1:-1}return~(e=a(i))&&(o=c[e]=s[e](i)),{c(){t=L("div"),n=L("div"),o&&o.c(),A(n,"class","c-swappable-panel__content svelte-fjwpdg"),A(t,"class","c-swappable-panel svelte-fjwpdg")},m(l,u){x(l,t,u),O(t,n),~e&&c[e].m(n,null),r=!0},p(l,[u]){let f=e;e=a(l),e!==f&&(o&&(j(),$(c[f],1,1,()=>{c[f]=null}),q()),~e?(o=c[e],o||(o=c[e]=s[e](l),o.c()),d(o,1),o.m(n,null)):o=null)},i(l){r||(d(o),r=!0)},o(l){$(o),r=!1},d(l){l&&b(t),~e&&c[e].d()}}}var Dn=(i=>(i.agentEdits="agent_edits",i.tasks="tasks",i))(Dn||{});const um=Symbol("swappable-panel-context");function mC(i,t,n){let e,o,r;const s=St(mo.key),{canShowTaskList:c}=s;Et(i,c,u=>n(1,o=u)),St("chatModel");const a=St(Tn.key);Et(i,a,u=>n(2,r=u));const l=Le(Dn.agentEdits);return Et(i,l,u=>n(0,e=u)),Un(um,{activePanel:l,togglePanel:()=>{xi(l,e=e===Dn.agentEdits?Dn.tasks:Dn.agentEdits,e)}}),[e,o,r,c,a,l]}class pC extends ut{constructor(t){super(),dt(this,t,mC,fC,ct,{})}}function gC(i){let t,n,e;return n=new dp({}),{c(){t=L("div"),v(n.$$.fragment),A(t,"class","c-switch-mode-button__content svelte-1t2edyt")},m(o,r){x(o,t,r),w(n,t,null),e=!0},p:P,i(o){e||(d(n.$$.fragment,o),e=!0)},o(o){$(n.$$.fragment,o),e=!1},d(o){o&&b(t),y(n)}}}function hC(i){let t,n,e;return n=new tf({}),{c(){t=L("div"),v(n.$$.fragment),A(t,"class","c-switch-mode-button__content svelte-1t2edyt")},m(o,r){x(o,t,r),w(n,t,null),e=!0},p:P,i(o){e||(d(n.$$.fragment,o),e=!0)},o(o){$(n.$$.fragment,o),e=!1},d(o){o&&b(t),y(n)}}}function vC(i){let t,n,e,o,r,s;return e=new he({props:{variant:i[0]===Dn.tasks?"soft":"ghost",color:i[0]===Dn.tasks?"accent":"neutral",size:1,class:"c-switch-mode-button__tasks-btn",$$slots:{default:[gC]},$$scope:{ctx:i}}}),e.$on("click",i[5]),r=new he({props:{variant:i[0]===Dn.agentEdits?"soft":"ghost",color:i[0]===Dn.agentEdits?"accent":"neutral",size:1,class:"c-switch-mode-button__changes-btn",$$slots:{default:[hC]},$$scope:{ctx:i}}}),r.$on("click",i[5]),{c(){t=L("div"),n=L("div"),v(e.$$.fragment),o=U(),v(r.$$.fragment),A(n,"class","c-switch-mode-button__group svelte-1t2edyt"),A(t,"class","c-switch-mode-button svelte-1t2edyt")},m(c,a){x(c,t,a),O(t,n),w(e,n,null),O(n,o),w(r,n,null),s=!0},p(c,a){const l={};1&a&&(l.variant=c[0]===Dn.tasks?"soft":"ghost"),1&a&&(l.color=c[0]===Dn.tasks?"accent":"neutral"),64&a&&(l.$$scope={dirty:a,ctx:c}),e.$set(l);const u={};1&a&&(u.variant=c[0]===Dn.agentEdits?"soft":"ghost"),1&a&&(u.color=c[0]===Dn.agentEdits?"accent":"neutral"),64&a&&(u.$$scope={dirty:a,ctx:c}),r.$set(u)},i(c){s||(d(e.$$.fragment,c),d(r.$$.fragment,c),s=!0)},o(c){$(e.$$.fragment,c),$(r.$$.fragment,c),s=!1},d(c){c&&b(t),y(e),y(r)}}}function wC(i){let t,n,e=i[2]&&i[3]&&function(o){let r,s;return r=new Pt({props:{content:o[1],triggerOn:[Zt.Hover],side:"top",$$slots:{default:[vC]},$$scope:{ctx:o}}}),{c(){v(r.$$.fragment)},m(c,a){w(r,c,a),s=!0},p(c,a){const l={};2&a&&(l.content=c[1]),65&a&&(l.$$scope={dirty:a,ctx:c}),r.$set(l)},i(c){s||(d(r.$$.fragment,c),s=!0)},o(c){$(r.$$.fragment,c),s=!1},d(c){y(r,c)}}}(i);return{c(){e&&e.c(),t=mt()},m(o,r){e&&e.m(o,r),x(o,t,r),n=!0},p(o,[r]){o[2]&&o[3]&&e.p(o,r)},i(o){n||(d(e),n=!0)},o(o){$(e),n=!1},d(o){o&&b(t),e&&e.d(o)}}}function yC(i,t,n){let e,o;const r=St(um),s=St(mo.key),c=r==null?void 0:r.activePanel;return Et(i,c,a=>n(0,o=a)),i.$$.update=()=>{1&i.$$.dirty&&n(1,e=o===Dn.agentEdits?"Switch to Tasks view":"Switch to Changes view")},[o,e,r,s,c,async function(){r==null||r.togglePanel()}]}class dm extends ut{constructor(t){super(),dt(this,t,yC,wC,ct,{})}}const bC=i=>({}),gd=i=>({}),xC=i=>({}),hd=i=>({});function vd(i){let t,n,e;return n=new dm({}),{c(){t=L("div"),v(n.$$.fragment),A(t,"class","c-agent-edits-header__switch-btn")},m(o,r){x(o,t,r),w(n,t,null),e=!0},i(o){e||(d(n.$$.fragment,o),e=!0)},o(o){$(n.$$.fragment,o),e=!1},d(o){o&&b(t),y(n)}}}function _C(i){let t,n,e,o,r=i[0]===1?"":"s";return{c(){t=G(i[0]),n=G(" file"),e=G(r),o=G(" changed")},m(s,c){x(s,t,c),x(s,n,c),x(s,e,c),x(s,o,c)},p(s,c){1&c&&_t(t,s[0]),1&c&&r!==(r=s[0]===1?"":"s")&&_t(e,r)},d(s){s&&(b(t),b(n),b(e),b(o))}}}function wd(i){let t,n,e;return n=new Q$({props:{totalAddedLines:i[1].totalAddedLines,totalRemovedLines:i[1].totalRemovedLines}}),{c(){t=L("div"),v(n.$$.fragment),A(t,"class","c-agent-edits-header__summary")},m(o,r){x(o,t,r),w(n,t,null),e=!0},p(o,r){const s={};2&r&&(s.totalAddedLines=o[1].totalAddedLines),2&r&&(s.totalRemovedLines=o[1].totalRemovedLines),n.$set(s)},i(o){e||(d(n.$$.fragment,o),e=!0)},o(o){$(n.$$.fragment,o),e=!1},d(o){o&&b(t),y(n)}}}function yd(i){let t,n,e,o,r=i[4]&&bd(i),s=i[5]&&xd(i);const c=i[9].actions,a=Yt(c,i,i[10],gd);return{c(){t=L("div"),r&&r.c(),n=U(),s&&s.c(),e=U(),a&&a.c(),A(t,"class","c-agent-edits-header__actions")},m(l,u){x(l,t,u),r&&r.m(t,null),O(t,n),s&&s.m(t,null),O(t,e),a&&a.m(t,null),o=!0},p(l,u){l[4]?r?(r.p(l,u),16&u&&d(r,1)):(r=bd(l),r.c(),d(r,1),r.m(t,n)):r&&(j(),$(r,1,1,()=>{r=null}),q()),l[5]?s?(s.p(l,u),32&u&&d(s,1)):(s=xd(l),s.c(),d(s,1),s.m(t,e)):s&&(j(),$(s,1,1,()=>{s=null}),q()),a&&a.p&&(!o||1024&u)&&Kt(a,c,l,l[10],o?Jt(c,l[10],u,bC):Xt(l[10]),gd)},i(l){o||(d(r),d(s),d(a,l),o=!0)},o(l){$(r),$(s),$(a,l),o=!1},d(l){l&&b(t),r&&r.d(),s&&s.d(),a&&a.d(l)}}}function bd(i){let t,n;return t=new he({props:{class:"c-agent-edits-header__revert-btn",variant:"soft",color:"neutral",size:1,$$slots:{default:[AC]},$$scope:{ctx:i}}}),t.$on("click",function(){Ne(i[4])&&i[4].apply(this,arguments)}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){i=e;const r={};1024&o&&(r.$$scope={dirty:o,ctx:i}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function CC(i){let t,n,e,o;return t=new cm({}),{c(){v(t.$$.fragment),n=U(),e=L("span"),e.textContent="Discard All",A(e,"class","c-agent-edits-header__revert-btn__text")},m(r,s){w(t,r,s),x(r,n,s),x(r,e,s),o=!0},p:P,i(r){o||(d(t.$$.fragment,r),o=!0)},o(r){$(t.$$.fragment,r),o=!1},d(r){r&&(b(n),b(e)),y(t,r)}}}function AC(i){let t,n;return t=new Pt({props:{triggerOn:[Zt.Hover],content:"Discard all changes",$$slots:{default:[CC]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};1024&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function xd(i){let t,n;return t=new he({props:{class:"c-agent-edits-header__accept-btn",variant:"soft",color:"success",size:1,$$slots:{default:[kC]},$$scope:{ctx:i}}}),t.$on("click",function(){Ne(i[5])&&i[5].apply(this,arguments)}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){i=e;const r={};1024&o&&(r.$$scope={dirty:o,ctx:i}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function MC(i){let t,n,e,o;return t=new am({}),{c(){v(t.$$.fragment),n=U(),e=L("span"),e.textContent="Keep All",A(e,"class","c-agent-edits-header__accept-btn__text")},m(r,s){w(t,r,s),x(r,n,s),x(r,e,s),o=!0},p:P,i(r){o||(d(t.$$.fragment,r),o=!0)},o(r){$(t.$$.fragment,r),o=!1},d(r){r&&(b(n),b(e)),y(t,r)}}}function kC(i){let t,n;return t=new Pt({props:{triggerOn:[Zt.Hover],content:"Keep all changes and clear checkpoints",$$slots:{default:[MC]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};1024&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function SC(i){let t,n,e,o,r,s,c,a,l,u;o=new xf({});let f=i[6].enableTaskList&&vd();const m=i[9].text,p=Yt(m,i,i[10],hd),_=p||function(T){let E,R;return E=new Gt({props:{size:1,color:"neutral",$$slots:{default:[_C]},$$scope:{ctx:T}}}),{c(){v(E.$$.fragment)},m(N,Z){w(E,N,Z),R=!0},p(N,Z){const Q={};1025&Z&&(Q.$$scope={dirty:Z,ctx:N}),E.$set(Q)},i(N){R||(d(E.$$.fragment,N),R=!0)},o(N){$(E.$$.fragment,N),R=!1},d(N){y(E,N)}}}(i);let M=i[3]&&wd(i),C=(i[2]&&i[3]&&(i[4]||i[5])||i[8].actions)&&yd(i);return{c(){t=L("div"),n=L("div"),e=L("div"),v(o.$$.fragment),r=U(),f&&f.c(),s=U(),c=L("div"),_&&_.c(),a=U(),M&&M.c(),l=U(),C&&C.c(),A(e,"class","c-agent-edits-header__collapse-btn"),A(c,"class","c-agent-edits-header__info-container"),A(n,"class","c-agent-edits-header__content"),A(t,"class","c-agent-edits-header svelte-1lfr6nx")},m(T,E){x(T,t,E),O(t,n),O(n,e),w(o,e,null),O(n,r),f&&f.m(n,null),O(n,s),O(n,c),_&&_.m(c,null),O(n,a),M&&M.m(n,null),O(t,l),C&&C.m(t,null),u=!0},p(T,[E]){T[6].enableTaskList?f?64&E&&d(f,1):(f=vd(),f.c(),d(f,1),f.m(n,s)):f&&(j(),$(f,1,1,()=>{f=null}),q()),p?p.p&&(!u||1024&E)&&Kt(p,m,T,T[10],u?Jt(m,T[10],E,xC):Xt(T[10]),hd):_&&_.p&&(!u||1&E)&&_.p(T,u?E:-1),T[3]?M?(M.p(T,E),8&E&&d(M,1)):(M=wd(T),M.c(),d(M,1),M.m(n,null)):M&&(j(),$(M,1,1,()=>{M=null}),q()),T[2]&&T[3]&&(T[4]||T[5])||T[8].actions?C?(C.p(T,E),316&E&&d(C,1)):(C=yd(T),C.c(),d(C,1),C.m(t,null)):C&&(j(),$(C,1,1,()=>{C=null}),q())},i(T){u||(d(o.$$.fragment,T),d(f),d(_,T),d(M),d(C),u=!0)},o(T){$(o.$$.fragment,T),$(f),$(_,T),$(M),$(C),u=!1},d(T){T&&b(t),y(o),f&&f.d(),_&&_.d(T),M&&M.d(),C&&C.d()}}}function TC(i,t,n){let e,{$$slots:o={},$$scope:r}=t;const s=W$(o);let{filesCount:c}=t,{diffSummary:a}=t,{collapsed:l}=t,{hasChanges:u}=t,{onRevert:f}=t,{onKeep:m}=t;const p=St("chatModel").flags;return Et(i,p,_=>n(6,e=_)),i.$$set=_=>{"filesCount"in _&&n(0,c=_.filesCount),"diffSummary"in _&&n(1,a=_.diffSummary),"collapsed"in _&&n(2,l=_.collapsed),"hasChanges"in _&&n(3,u=_.hasChanges),"onRevert"in _&&n(4,f=_.onRevert),"onKeep"in _&&n(5,m=_.onKeep),"$$scope"in _&&n(10,r=_.$$scope)},[c,a,l,u,f,m,e,p,s,o,r]}class $m extends ut{constructor(t){super(),dt(this,t,TC,SC,ct,{filesCount:0,diffSummary:1,collapsed:2,hasChanges:3,onRevert:4,onKeep:5})}}function _d(i,t,n){const e=i.slice();e[21]=t[n];const o=e[1]===e[21].file.new_path||e[1]===e[21].file.old_path;return e[22]=o,e}function EC(i){let t,n,e;return n=new Gt({props:{size:1,color:"neutral",$$slots:{default:[LC]},$$scope:{ctx:i}}}),{c(){t=L("div"),v(n.$$.fragment),A(t,"class","c-edits-list c-edits-list--empty svelte-ut8b0v")},m(o,r){x(o,t,r),w(n,t,null),e=!0},p(o,r){const s={};33554436&r&&(s.$$scope={dirty:r,ctx:o}),n.$set(s)},i(o){e||(d(n.$$.fragment,o),e=!0)},o(o){$(n.$$.fragment,o),e=!1},d(o){o&&b(t),y(n)}}}function IC(i){let t,n,e,o;function r(c){i[19](c)}let s={class:"c-agent-edits-container__block-container",$$slots:{header:[jC],default:[zC]},$$scope:{ctx:i}};return i[0]!==void 0&&(s.collapsed=i[0]),n=new js({props:s}),te.push(()=>Te(n,"collapsed",r)),{c(){t=L("div"),v(n.$$.fragment),A(t,"class","c-agent-edits-container svelte-ut8b0v")},m(c,a){x(c,t,a),w(n,t,null),o=!0},p(c,a){const l={};33558523&a&&(l.$$scope={dirty:a,ctx:c}),!e&&1&a&&(e=!0,l.collapsed=c[0],Re(()=>e=!1)),n.$set(l)},i(c){o||(d(n.$$.fragment,c),o=!0)},o(c){$(n.$$.fragment,c),o=!1},d(c){c&&b(t),y(n)}}}function LC(i){let t;return{c(){t=G(i[2])},m(n,e){x(n,t,e)},p(n,e){4&e&&_t(t,n[2])},d(n){n&&b(t)}}}function Cd(i){let t,n;return t=new Pt({props:{content:"Toggle collapse unchanged regions",triggerOn:[Zt.Hover],$$slots:{default:[DC]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};33554432&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function RC(i){let t,n;return t=new Cf({props:{icon:"map"}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p:P,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function DC(i){let t,n;return t=new fe({props:{color:"neutral",size:1,variant:"soft",$$slots:{default:[RC]},$$scope:{ctx:i}}}),t.$on("click",i[13]),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};33554432&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function NC(i){let t,n,e=i[22]&&Cd(i);return{c(){t=L("div"),e&&e.c(),A(t,"slot","actions")},m(o,r){x(o,t,r),e&&e.m(t,null),n=!0},p(o,r){o[22]?e?(e.p(o,r),386&r&&d(e,1)):(e=Cd(o),e.c(),d(e,1),e.m(t,null)):e&&(j(),$(e,1,1,()=>{e=null}),q())},i(o){n||(d(e),n=!0)},o(o){$(e),n=!1},d(o){o&&b(t),e&&e.d()}}}function Ad(i){let t,n,e,o;function r(){return i[16](i[21])}function s(){return i[17](i[21])}function c(){return i[18](i[21])}return n=new sm({props:{qualifiedPathName:i[21].qualifiedPathName,lineChanges:i[21].changesSummary,isFocused:i[22],onClickFile:i[3]?r:void 0,onClickReview:i[4]?s:void 0,onClickRevert:i[5]?c:void 0,$$slots:{actions:[NC]},$$scope:{ctx:i}}}),{c(){t=L("div"),v(n.$$.fragment),A(t,"class","c-edit")},m(a,l){x(a,t,l),w(n,t,null),o=!0},p(a,l){i=a;const u={};384&l&&(u.qualifiedPathName=i[21].qualifiedPathName),384&l&&(u.lineChanges=i[21].changesSummary),386&l&&(u.isFocused=i[22]),392&l&&(u.onClickFile=i[3]?r:void 0),400&l&&(u.onClickReview=i[4]?s:void 0),416&l&&(u.onClickRevert=i[5]?c:void 0),33554818&l&&(u.$$scope={dirty:l,ctx:i}),n.$set(u)},i(a){o||(d(n.$$.fragment,a),a&&Nn(()=>{o&&(e||(e=xn(t,po,{},!0)),e.run(1))}),o=!0)},o(a){$(n.$$.fragment,a),a&&(e||(e=xn(t,po,{},!1)),e.run(0)),o=!1},d(a){a&&b(t),y(n),a&&e&&e.end()}}}function Md(i){let t,n,e;return n=new he({props:{color:"neutral",size:1,variant:"soft",$$slots:{default:[OC]},$$scope:{ctx:i}}}),n.$on("click",i[12]),{c(){t=L("div"),v(n.$$.fragment),A(t,"class","c-show-more-container svelte-ut8b0v")},m(o,r){x(o,t,r),w(n,t,null),e=!0},p(o,r){const s={};33554816&r&&(s.$$scope={dirty:r,ctx:o}),n.$set(s)},i(o){e||(d(n.$$.fragment,o),e=!0)},o(o){$(n.$$.fragment,o),e=!1},d(o){o&&b(t),y(n)}}}function PC(i){let t,n,e,o,r,s,c,a=i[7].length-Hr+"";return s=new Oo({props:{slot:"iconRight"}}),{c(){t=L("span"),n=G("Show "),e=G(a),o=G(" more files"),r=U(),v(s.$$.fragment)},m(l,u){x(l,t,u),O(t,n),O(t,e),O(t,o),x(l,r,u),w(s,l,u),c=!0},p(l,u){(!c||128&u)&&a!==(a=l[7].length-Hr+"")&&_t(e,a)},i(l){c||(d(s.$$.fragment,l),c=!0)},o(l){$(s.$$.fragment,l),c=!1},d(l){l&&(b(t),b(r)),y(s,l)}}}function FC(i){let t,n,e,o;return e=new K$({props:{slot:"iconRight"}}),{c(){t=L("span"),t.textContent="Show less",n=U(),v(e.$$.fragment)},m(r,s){x(r,t,s),x(r,n,s),w(e,r,s),o=!0},p:P,i(r){o||(d(e.$$.fragment,r),o=!0)},o(r){$(e.$$.fragment,r),o=!1},d(r){r&&(b(t),b(n)),y(e,r)}}}function OC(i){let t,n,e,o;const r=[FC,PC],s=[];function c(a,l){return a[8]?0:1}return t=c(i),n=s[t]=r[t](i),{c(){n.c(),e=mt()},m(a,l){s[t].m(a,l),x(a,e,l),o=!0},p(a,l){let u=t;t=c(a),t===u?s[t].p(a,l):(j(),$(s[u],1,1,()=>{s[u]=null}),q(),n=s[t],n?n.p(a,l):(n=s[t]=r[t](a),n.c()),d(n,1),n.m(e.parentNode,e))},i(a){o||(d(n),o=!0)},o(a){$(n),o=!1},d(a){a&&b(e),s[t].d(a)}}}function zC(i){let t,n,e,o,r=se(i[8]?i[7]:i[7].slice(0,Hr)),s=[];for(let l=0;l<r.length;l+=1)s[l]=Ad(_d(i,r,l));const c=l=>$(s[l],1,1,()=>{s[l]=null});let a=i[11]&&Md(i);return{c(){t=L("div"),n=L("div");for(let l=0;l<s.length;l+=1)s[l].c();e=U(),a&&a.c(),A(n,"class","c-edits-section svelte-ut8b0v"),A(t,"class","c-edits-list svelte-ut8b0v")},m(l,u){x(l,t,u),O(t,n);for(let f=0;f<s.length;f+=1)s[f]&&s[f].m(n,null);O(n,e),a&&a.m(n,null),o=!0},p(l,u){if(8634&u){let f;for(r=se(l[8]?l[7]:l[7].slice(0,Hr)),f=0;f<r.length;f+=1){const m=_d(l,r,f);s[f]?(s[f].p(m,u),d(s[f],1)):(s[f]=Ad(m),s[f].c(),d(s[f],1),s[f].m(n,e))}for(j(),f=r.length;f<s.length;f+=1)c(f);q()}l[11]?a?(a.p(l,u),2048&u&&d(a,1)):(a=Md(l),a.c(),d(a,1),a.m(n,null)):a&&(j(),$(a,1,1,()=>{a=null}),q())},i(l){if(!o){for(let u=0;u<r.length;u+=1)d(s[u]);d(a),o=!0}},o(l){s=s.filter(Boolean);for(let u=0;u<s.length;u+=1)$(s[u]);$(a),o=!1},d(l){l&&b(t),pn(s,l),a&&a.d()}}}function BC(i){let t,n,e,o,r;return o=new Cf({props:{icon:"diff-multiple"}}),{c(){t=L("div"),t.textContent="See full diff",n=U(),e=L("div"),v(o.$$.fragment),A(t,"class","c-agent-edits-header__buttons__text--long svelte-ut8b0v"),A(e,"class","c-agent-edits-header__buttons__text--short svelte-ut8b0v")},m(s,c){x(s,t,c),x(s,n,c),x(s,e,c),w(o,e,null),r=!0},p:P,i(s){r||(d(o.$$.fragment,s),r=!0)},o(s){$(o.$$.fragment,s),r=!1},d(s){s&&(b(t),b(n),b(e)),y(o)}}}function UC(i){let t,n;return t=new he({props:{color:"neutral",size:1,variant:"soft",disabled:i[9],$$slots:{default:[BC]},$$scope:{ctx:i}}}),t.$on("click",function(){Ne(i[6])&&i[6].apply(this,arguments)}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){i=e;const r={};512&o&&(r.disabled=i[9]),33554432&o&&(r.$$scope={dirty:o,ctx:i}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function HC(i){let t,n,e,o,r,s,c,a,l,u,f=i[7].length+"",m=i[7].length===1?"":"s";return l=new Pt({props:{content:i[9]?za:void 0,$$slots:{default:[UC]},$$scope:{ctx:i}}}),{c(){t=L("div"),n=L("div"),e=G(f),o=G(" file"),r=G(m),s=G(" changed"),c=U(),a=L("div"),v(l.$$.fragment),A(n,"class","c-agent-edits-header__actions__count"),A(a,"class","c-agent-edits-header__buttons svelte-ut8b0v"),A(t,"class","c-agent-edits-header__actions svelte-ut8b0v"),A(t,"slot","text")},m(p,_){x(p,t,_),O(t,n),O(n,e),O(n,o),O(n,r),O(n,s),O(t,c),O(t,a),w(l,a,null),u=!0},p(p,_){(!u||128&_)&&f!==(f=p[7].length+"")&&_t(e,f),(!u||128&_)&&m!==(m=p[7].length===1?"":"s")&&_t(r,m);const M={};512&_&&(M.content=p[9]?za:void 0),33555008&_&&(M.$$scope={dirty:_,ctx:p}),l.$set(M)},i(p){u||(d(l.$$.fragment,p),u=!0)},o(p){$(l.$$.fragment,p),u=!1},d(p){p&&b(t),y(l)}}}function jC(i){let t,n;return t=new $m({props:{filesCount:i[7].length,diffSummary:i[10],collapsed:i[0],hasChanges:!0,slot:"header",$$slots:{text:[HC]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};128&o&&(r.filesCount=e[7].length),1024&o&&(r.diffSummary=e[10]),1&o&&(r.collapsed=e[0]),33555136&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function qC(i){let t,n,e,o;const r=[IC,EC],s=[];function c(a,l){return a[7].length>0?0:1}return t=c(i),n=s[t]=r[t](i),{c(){n.c(),e=mt()},m(a,l){s[t].m(a,l),x(a,e,l),o=!0},p(a,[l]){let u=t;t=c(a),t===u?s[t].p(a,l):(j(),$(s[u],1,1,()=>{s[u]=null}),q(),n=s[t],n?n.p(a,l):(n=s[t]=r[t](a),n.c()),d(n,1),n.m(e.parentNode,e))},i(a){o||(d(n),o=!0)},o(a){$(n),o=!1},d(a){a&&b(e),s[t].d(a)}}}const Hr=3;function WC(i,t,n){let e,o,r,s,c,{changedFiles:a=[]}=t,{collapsed:l=!1}=t,{focusedFilePath:u=null}=t,{emptyMessage:f="No changes to show"}=t,{onFileClick:m}=t,{onReviewClick:p}=t,{onRevertClick:_}=t,{onOpenDiffView:M}=t;const C=St("chatModel");let T=!1;return i.$$set=E=>{"changedFiles"in E&&n(14,a=E.changedFiles),"collapsed"in E&&n(0,l=E.collapsed),"focusedFilePath"in E&&n(1,u=E.focusedFilePath),"emptyMessage"in E&&n(2,f=E.emptyMessage),"onFileClick"in E&&n(3,m=E.onFileClick),"onReviewClick"in E&&n(4,p=E.onReviewClick),"onRevertClick"in E&&n(5,_=E.onRevertClick),"onOpenDiffView"in E&&n(6,M=E.onOpenDiffView)},i.$$.update=()=>{16384&i.$$.dirty&&n(15,o=a.map(E=>{const R=Pa.generateDiff(E.old_path,E.new_path,E.old_contents||"",E.new_contents||""),N=Pa.getDiffObjectStats(R),Z={totalAddedLines:N.additions,totalRemovedLines:N.deletions};return{file:E,qualifiedPathName:{rootPath:"",relPath:E.new_path||E.old_path},changesSummary:Z}})),32768&i.$$.dirty&&n(7,r=o.filter(E=>E.changesSummary.totalAddedLines>0||E.changesSummary.totalRemovedLines>0)),128&i.$$.dirty&&n(11,e=r.length>Hr),128&i.$$.dirty&&n(10,s=r.reduce((E,R)=>(E.totalAddedLines+=R.changesSummary.totalAddedLines,E.totalRemovedLines+=R.changesSummary.totalRemovedLines,E),{totalAddedLines:0,totalRemovedLines:0})),16384&i.$$.dirty&&n(9,c=a.length>Tp)},[l,u,f,m,p,_,M,r,T,c,s,e,function(){n(8,T=!T)},function(){C.extensionClient.toggleCollapseUnchangedRegions()},a,o,E=>m(E.file.new_path||E.file.old_path),E=>p(E.file),E=>_(E.file),function(E){l=E,n(0,l)}]}class VC extends ut{constructor(t){super(),dt(this,t,WC,qC,ct,{changedFiles:14,collapsed:0,focusedFilePath:1,emptyMessage:2,onFileClick:3,onReviewClick:4,onRevertClick:5,onOpenDiffView:6})}}function GC(i){let t,n,e=[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 512 512"},i[0]],o={};for(let r=0;r<e.length;r+=1)o=kt(o,e[r]);return{c(){t=ie("svg"),n=new rn(!0),this.h()},l(r){t=sn(r,"svg",{xmlns:!0,"data-ds-icon":!0,viewBox:!0});var s=an(t);n=cn(s,!0),s.forEach(b),this.h()},h(){n.a=null,$e(t,o)},m(r,s){ln(r,t,s),n.m('<!--! Font Awesome Pro 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2024 Fonticons, Inc.--><path d="M305.8 2.1C314.4 5.9 320 14.5 320 24v48h16c66.3 0 120 53.7 120 120v163.7c32.5 10.2 56 40.5 56 76.3 0 44.2-35.8 80-80 80s-80-35.8-80-80c0-35.8 23.5-66.1 56-76.3V192c0-39.8-32.2-72-72-72h-16v48c0 9.5-5.6 18.1-14.2 21.9s-18.8 2.3-25.8-4.1l-80-72c-5.1-4.6-7.9-11-7.9-17.8s2.9-13.3 7.9-17.8l80-72c7-6.3 17.2-7.9 25.8-4.1M112 80a32 32 0 1 0-64 0 32 32 0 1 0 64 0m-8 76.3v199.3c32.5 10.2 56 40.5 56 76.3 0 44.2-35.8 80-80 80s-80-35.8-80-80c0-35.8 23.5-66.1 56-76.3V156.3C23.5 146.1 0 115.8 0 80 0 35.8 35.8 0 80 0s80 35.8 80 80c0 35.8-23.5 66.1-56 76.3m8 275.7a32 32 0 1 0-64 0 32 32 0 1 0 64 0m320 32a32 32 0 1 0 0-64 32 32 0 1 0 0 64"/>',t)},p(r,[s]){$e(t,o=Se(e,[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 512 512"},1&s&&r[0]]))},i:P,o:P,d(r){r&&b(t)}}}function YC(i,t,n){return i.$$set=e=>{n(0,t=kt(kt({},t),le(e)))},[t=le(t)]}class KC extends ut{constructor(t){super(),dt(this,t,YC,GC,ct,{})}}function kd(i){let t,n,e,o,r=i[8].length>0&&Sd(i),s=i[10]&&!i[1]&&Td(i);return{c(){t=L("div"),n=L("div"),r&&r.c(),e=U(),s&&s.c(),A(n,"class","c-agent-footer__status svelte-1fkxsim"),A(t,"class","c-agent-footer svelte-1fkxsim")},m(c,a){x(c,t,a),O(t,n),r&&r.m(n,null),O(t,e),s&&s.m(t,null),o=!0},p(c,a){c[8].length>0?r?(r.p(c,a),256&a&&d(r,1)):(r=Sd(c),r.c(),d(r,1),r.m(n,null)):r&&(j(),$(r,1,1,()=>{r=null}),q()),c[10]&&!c[1]?s?(s.p(c,a),1026&a&&d(s,1)):(s=Td(c),s.c(),d(s,1),s.m(t,null)):s&&(j(),$(s,1,1,()=>{s=null}),q())},i(c){o||(d(r),d(s),o=!0)},o(c){$(r),$(s),o=!1},d(c){c&&b(t),r&&r.d(),s&&s.d()}}}function Sd(i){let t,n;return t=new VC({props:{changedFiles:i[8],collapsed:!i[11],focusedFilePath:i[7],emptyMessage:i[9]?"Loading...":"No changes to show",onReviewClick:i[18],onOpenDiffView:i[21],onFileClick:i[6]}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};256&o&&(r.changedFiles=e[8]),2048&o&&(r.collapsed=!e[11]),128&o&&(r.focusedFilePath=e[7]),512&o&&(r.emptyMessage=e[9]?"Loading...":"No changes to show"),4364&o&&(r.onOpenDiffView=e[21]),64&o&&(r.onFileClick=e[6]),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function Td(i){let t,n,e,o=i[8].length>0&&Ed(i),r=!i[1]&&Id(i);return{c(){t=L("div"),o&&o.c(),n=U(),r&&r.c(),A(t,"class","c-agent-footer__buttons svelte-1fkxsim")},m(s,c){x(s,t,c),o&&o.m(t,null),O(t,n),r&&r.m(t,null),e=!0},p(s,c){s[8].length>0?o?(o.p(s,c),256&c&&d(o,1)):(o=Ed(s),o.c(),d(o,1),o.m(t,n)):o&&(j(),$(o,1,1,()=>{o=null}),q()),s[1]?r&&(j(),$(r,1,1,()=>{r=null}),q()):r?(r.p(s,c),2&c&&d(r,1)):(r=Id(s),r.c(),d(r,1),r.m(t,null))},i(s){e||(d(o),d(r),e=!0)},o(s){$(o),$(r),e=!1},d(s){s&&b(t),o&&o.d(),r&&r.d()}}}function Ed(i){let t,n,e;return n=new Pt({props:{triggerOn:[Zt.Hover],content:"Create a GitHub pull request with the changes",$$slots:{default:[t7]},$$scope:{ctx:i}}}),{c(){t=L("div"),v(n.$$.fragment),A(t,"class","c-agent-footer__button svelte-1fkxsim")},m(o,r){x(o,t,r),w(n,t,null),e=!0},p(o,r){const s={};67108884&r&&(s.$$scope={dirty:r,ctx:o}),n.$set(s)},i(o){e||(d(n.$$.fragment,o),e=!0)},o(o){$(n.$$.fragment,o),e=!1},d(o){o&&b(t),y(n)}}}function XC(i){let t;return{c(){t=G("Create a PR")},m(n,e){x(n,t,e)},d(n){n&&b(t)}}}function JC(i){let t;return{c(){t=G("Creating a PR...")},m(n,e){x(n,t,e)},d(n){n&&b(t)}}}function ZC(i){let t;function n(r,s){return r[4]?JC:XC}let e=n(i),o=e(i);return{c(){o.c(),t=mt()},m(r,s){o.m(r,s),x(r,t,s)},p(r,s){e!==(e=n(r))&&(o.d(1),o=e(r),o&&(o.c(),o.m(t.parentNode,t)))},d(r){r&&b(t),o.d(r)}}}function QC(i){let t,n;return t=new KC({props:{slot:"iconRight"}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p:P,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function t7(i){var e;let t,n;return t=new he({props:{size:2,variant:"soft",color:"neutral",class:"c-agent-footer__open-btn",disabled:[Ze.agentUnspecified,Ze.agentPending,Ze.agentStarting].includes((e=i[2])==null?void 0:e.status),$$slots:{iconRight:[QC],default:[ZC]},$$scope:{ctx:i}}}),t.$on("click",i[19]),{c(){v(t.$$.fragment)},m(o,r){w(t,o,r),n=!0},p(o,r){var c;const s={};4&r&&(s.disabled=[Ze.agentUnspecified,Ze.agentPending,Ze.agentStarting].includes((c=o[2])==null?void 0:c.status)),67108880&r&&(s.$$scope={dirty:r,ctx:o}),t.$set(s)},i(o){n||(d(t.$$.fragment,o),n=!0)},o(o){$(t.$$.fragment,o),n=!1},d(o){y(t,o)}}}function Id(i){let t,n,e;return n=new Pt({props:{triggerOn:[Zt.Hover],content:"SSH into the remote agent's workspace in a new VSCode window",$$slots:{default:[a7]},$$scope:{ctx:i}}}),{c(){t=L("div"),v(n.$$.fragment),A(t,"class","c-agent-footer__button svelte-1fkxsim")},m(o,r){x(o,t,r),w(n,t,null),e=!0},p(o,r){const s={};67109924&r&&(s.$$scope={dirty:r,ctx:o}),n.$set(s)},i(o){e||(d(n.$$.fragment,o),e=!0)},o(o){$(n.$$.fragment,o),e=!1},d(o){o&&b(t),y(n)}}}function e7(i){let t;return{c(){t=G("Open remote workspace")},m(n,e){x(n,t,e)},d(n){n&&b(t)}}}function n7(i){let t;return{c(){t=G("Connecting...")},m(n,e){x(n,t,e)},d(n){n&&b(t)}}}function o7(i){let t;function n(r,s){return r[5]?n7:e7}let e=n(i),o=e(i);return{c(){o.c(),t=mt()},m(r,s){o.m(r,s),x(r,t,s)},p(r,s){e!==(e=n(r))&&(o.d(1),o=e(r),o&&(o.c(),o.m(t.parentNode,t)))},d(r){r&&b(t),o.d(r)}}}function r7(i){let t,n;return t=new $f({}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function i7(i){let t,n;return t=new go({props:{size:1,useCurrentColor:!0}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function s7(i){let t,n,e,o;const r=[i7,r7],s=[];function c(a,l){return a[5]?0:1}return t=c(i),n=s[t]=r[t](i),{c(){n.c(),e=mt()},m(a,l){s[t].m(a,l),x(a,e,l),o=!0},p(a,l){let u=t;t=c(a),t!==u&&(j(),$(s[u],1,1,()=>{s[u]=null}),q(),n=s[t],n||(n=s[t]=r[t](a),n.c()),d(n,1),n.m(e.parentNode,e))},i(a){o||(d(n),o=!0)},o(a){$(n),o=!1},d(a){a&&b(e),s[t].d(a)}}}function a7(i){var e;let t,n;return t=new he({props:{size:2,variant:"soft",color:"accent",class:"c-agent-footer__open-btn",disabled:[Ze.agentUnspecified,Ze.agentPending,Ze.agentStarting].includes((e=i[2])==null?void 0:e.status)||i[5],$$slots:{iconRight:[s7],default:[o7]},$$scope:{ctx:i}}}),t.$on("click",i[22]),{c(){v(t.$$.fragment)},m(o,r){w(t,o,r),n=!0},p(o,r){var c;const s={};36&r&&(s.disabled=[Ze.agentUnspecified,Ze.agentPending,Ze.agentStarting].includes((c=o[2])==null?void 0:c.status)||o[5]),67108896&r&&(s.$$scope={dirty:r,ctx:o}),t.$set(s)},i(o){n||(d(t.$$.fragment,o),n=!0)},o(o){$(t.$$.fragment,o),n=!1},d(o){y(t,o)}}}function c7(i){let t,n,e,o;Nn(i[20]);let r=i[2]&&kd(i);return{c(){r&&r.c(),t=mt()},m(s,c){r&&r.m(s,c),x(s,t,c),n=!0,e||(o=Lt(window,"resize",i[20]),e=!0)},p(s,[c]){s[2]?r?(r.p(s,c),4&c&&d(r,1)):(r=kd(s),r.c(),d(r,1),r.m(t.parentNode,t)):r&&(j(),$(r,1,1,()=>{r=null}),q())},i(s){n||(d(r),n=!0)},o(s){$(r),n=!1},d(s){s&&b(t),r&&r.d(s),e=!1,o()}}}function l7(i,t,n){let e,o,r,s,c,a,l,u,f,m,p;const _=St(Tn.key);Et(i,_,K=>n(3,f=K));const M=St("chatModel");Et(i,M,K=>n(23,m=K));const C=St(ef),T=St(hr.key),E=Le(""),R=$p(E);Et(i,R,K=>n(12,p=K)),ro(async()=>{try{const{remoteUrl:K,error:H}=await T.getRemoteUrl();if(H)throw new Error(H);E.set(K)}catch(K){console.error("Failed to get current repository URL:",K)}});let N=!1,Z=0;async function Q(K){if(!K)return;const H=_.agentOverviews.find(Y=>Y.remote_agent_id===K);H&&await _.sshToRemoteAgent(H)}let X=!1;return i.$$.update=()=>{var K;1&i.$$.dirty&&n(11,e=Z>660),8&i.$$.dirty&&n(2,o=f==null?void 0:f.currentAgent),4&i.$$.dirty&&n(10,r=o==null?void 0:o.remote_agent_id),8&i.$$.dirty&&n(9,s=f==null?void 0:f.isCurrentAgentDetailsLoading),8&i.$$.dirty&&n(8,c=l1(((K=f.currentConversation)==null?void 0:K.exchanges)??[])),8&i.$$.dirty&&n(7,a=f.focusedFilePath),8&i.$$.dirty&&n(1,l=f.isRemoteAgentSshWindow),2&i.$$.dirty&&n(6,u=l?H=>{M.extensionClient.openFile({repoRoot:"",pathName:H})}:void 0)},[Z,l,o,f,N,X,u,a,c,s,r,e,p,_,M,C,R,Q,async function(K){const H=K.new_path||K.old_path;f.openDiffInBuffer(K.old_contents||"",K.new_contents||"",H)},function(){var Y;if(!((Y=f.currentAgent)!=null&&Y.remote_agent_id))return void console.error("No current agent ID found");_.reportRemoteAgentEvent({eventName:Xm.createdPR,remoteAgentId:f.currentAgent.remote_agent_id,eventData:{createdPRData:{}}}),n(4,N=!0);const K=m.currentConversationModel,H=K==null?void 0:K.selectedModelId;f.sendMessage("Please create a pull request with the changes you've made.",H??void 0).then(()=>{n(4,N=!1)}).catch(V=>{console.error("Error sending PR creation request:",V),n(4,N=!1)})},function(){n(0,Z=window.innerHeight)},()=>{C.set(-1),f.showRemoteAgentDiffPanel({turnIdx:-1,changedFiles:c,userPrompt:"",sessionSummary:"",isShowingAggregateChanges:!0,isAgentFromDifferentRepo:p(o)})},()=>{n(5,X=!0),Q(r).then(()=>{n(5,X=!1)})}]}class u7 extends ut{constructor(t){super(),dt(this,t,l7,c7,ct,{})}}function Ld(i){var lt;let t,n,e,o,r,s,c,a,l,u,f,m,p,_,M,C,T,E,R,N,Z,Q;o=new Gt({props:{size:2,weight:"medium",$$slots:{default:[d7]},$$scope:{ctx:i}}}),s=new Pt({props:{content:"View full script in editor",side:"bottom",$$slots:{default:[m7]},$$scope:{ctx:i}}});const X=[g7,p7],K=[];function H(ot,ht){return ot[1].length>0?0:1}l=H(i),u=K[l]=X[l](i);let Y=((lt=i[5])==null?void 0:lt.status)&&Rd(i);function V(ot){i[15](ot)}let J={placeholder:"Script name",size:2,$$slots:{iconLeft:[_7]},$$scope:{ctx:i}};i[2]!==void 0&&(J.value=i[2]),_=new nr({props:J}),te.push(()=>Te(_,"value",V)),_.$on("blur",i[16]),E=new Pt({props:{content:"Save the setup script in your machine's home directory",triggerOn:[Zt.Hover],$$slots:{default:[A7]},$$scope:{ctx:i}}}),N=new Pt({props:{content:"Save the setup script in the Git repository, for your team to use when you push your changes",triggerOn:[Zt.Hover],$$slots:{default:[k7]},$$scope:{ctx:i}}});let rt=i[4]&&Dd(i);return{c(){t=L("div"),n=L("div"),e=L("div"),v(o.$$.fragment),r=U(),v(s.$$.fragment),c=U(),a=L("div"),u.c(),f=U(),Y&&Y.c(),m=U(),p=L("div"),v(_.$$.fragment),C=U(),T=L("div"),v(E.$$.fragment),R=U(),v(N.$$.fragment),Z=U(),rt&&rt.c(),A(e,"class","header-content__title svelte-bf326k"),A(a,"class","header-content__title svelte-bf326k"),A(n,"class","header-content svelte-bf326k"),A(T,"class","input-group location-buttons svelte-bf326k"),A(p,"class","save-bar-content svelte-bf326k"),A(t,"class","setup-script-save-bar svelte-bf326k")},m(ot,ht){x(ot,t,ht),O(t,n),O(n,e),w(o,e,null),O(e,r),w(s,e,null),O(n,c),O(n,a),K[l].m(a,null),O(a,f),Y&&Y.m(a,null),O(t,m),O(t,p),w(_,p,null),O(p,C),O(p,T),w(E,T,null),O(T,R),w(N,T,null),O(p,Z),rt&&rt.m(p,null),Q=!0},p(ot,ht){var Ee;const it={};4194304&ht&&(it.$$scope={dirty:ht,ctx:ot}),o.$set(it);const xt={};4194336&ht&&(xt.$$scope={dirty:ht,ctx:ot}),s.$set(xt);let ee=l;l=H(ot),l===ee?K[l].p(ot,ht):(j(),$(K[ee],1,1,()=>{K[ee]=null}),q(),u=K[l],u?u.p(ot,ht):(u=K[l]=X[l](ot),u.c()),d(u,1),u.m(a,f)),(Ee=ot[5])!=null&&Ee.status?Y?(Y.p(ot,ht),32&ht&&d(Y,1)):(Y=Rd(ot),Y.c(),d(Y,1),Y.m(a,null)):Y&&(j(),$(Y,1,1,()=>{Y=null}),q());const At={};4194304&ht&&(At.$$scope={dirty:ht,ctx:ot}),!M&&4&ht&&(M=!0,At.value=ot[2],Re(()=>M=!1)),_.$set(At);const Ht={};4194316&ht&&(Ht.$$scope={dirty:ht,ctx:ot}),E.$set(Ht);const De={};4194316&ht&&(De.$$scope={dirty:ht,ctx:ot}),N.$set(De),ot[4]?rt?(rt.p(ot,ht),16&ht&&d(rt,1)):(rt=Dd(ot),rt.c(),d(rt,1),rt.m(p,null)):rt&&(j(),$(rt,1,1,()=>{rt=null}),q())},i(ot){Q||(d(o.$$.fragment,ot),d(s.$$.fragment,ot),d(u),d(Y),d(_.$$.fragment,ot),d(E.$$.fragment,ot),d(N.$$.fragment,ot),d(rt),Q=!0)},o(ot){$(o.$$.fragment,ot),$(s.$$.fragment,ot),$(u),$(Y),$(_.$$.fragment,ot),$(E.$$.fragment,ot),$(N.$$.fragment,ot),$(rt),Q=!1},d(ot){ot&&b(t),y(o),y(s),K[l].d(),Y&&Y.d(),y(_),y(E),y(N),rt&&rt.d()}}}function d7(i){let t;return{c(){t=G("Setup script")},m(n,e){x(n,t,e)},d(n){n&&b(t)}}}function $7(i){let t;return{c(){t=G("View")},m(n,e){x(n,t,e)},d(n){n&&b(t)}}}function f7(i){let t,n;return t=new $f({props:{slot:"iconLeft"}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p:P,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function m7(i){let t,n;return t=new he({props:{variant:"ghost-block",color:"neutral",size:1,$$slots:{iconLeft:[f7],default:[$7]},$$scope:{ctx:i}}}),t.$on("click",i[12]),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};4194304&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function p7(i){let t,n;return t=new Gt({props:{size:1,color:"secondary",class:"header-content__version-count",$$slots:{default:[h7]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};4194304&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function g7(i){let t,n,e,o,r,s,c;return n=new Pt({props:{content:i[0]===0?"":"Switch to previous script",triggerOn:[Zt.Hover],$$slots:{default:[w7]},$$scope:{ctx:i}}}),o=new Gt({props:{size:1,color:"secondary",class:"header-content__version-count",$$slots:{default:[y7]},$$scope:{ctx:i}}}),s=new Pt({props:{content:i[0]===i[1].length-1?"":"Switch to next script",triggerOn:[Zt.Hover],$$slots:{default:[x7]},$$scope:{ctx:i}}}),{c(){t=L("div"),v(n.$$.fragment),e=U(),v(o.$$.fragment),r=U(),v(s.$$.fragment),A(t,"class","version-navigation svelte-bf326k")},m(a,l){x(a,t,l),w(n,t,null),O(t,e),w(o,t,null),O(t,r),w(s,t,null),c=!0},p(a,l){const u={};1&l&&(u.content=a[0]===0?"":"Switch to previous script"),4194305&l&&(u.$$scope={dirty:l,ctx:a}),n.$set(u);const f={};4194307&l&&(f.$$scope={dirty:l,ctx:a}),o.$set(f);const m={};3&l&&(m.content=a[0]===a[1].length-1?"":"Switch to next script"),4194307&l&&(m.$$scope={dirty:l,ctx:a}),s.$set(m)},i(a){c||(d(n.$$.fragment,a),d(o.$$.fragment,a),d(s.$$.fragment,a),c=!0)},o(a){$(n.$$.fragment,a),$(o.$$.fragment,a),$(s.$$.fragment,a),c=!1},d(a){a&&b(t),y(n),y(o),y(s)}}}function h7(i){let t;return{c(){t=G("No versions")},m(n,e){x(n,t,e)},d(n){n&&b(t)}}}function v7(i){let t,n;return t=new wf({}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function w7(i){let t,n;return t=new fe({props:{variant:"ghost-block",size:1,disabled:i[0]===0,title:"Previous version",$$slots:{default:[v7]},$$scope:{ctx:i}}}),t.$on("click",i[13]),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};1&o&&(r.disabled=e[0]===0),4194304&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function y7(i){let t,n,e,o=i[0]+1+"",r=i[1].length+"";return{c(){t=G(o),n=G(" of "),e=G(r)},m(s,c){x(s,t,c),x(s,n,c),x(s,e,c)},p(s,c){1&c&&o!==(o=s[0]+1+"")&&_t(t,o),2&c&&r!==(r=s[1].length+"")&&_t(e,r)},d(s){s&&(b(t),b(n),b(e))}}}function b7(i){let t,n;return t=new o1({}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function x7(i){let t,n;return t=new fe({props:{variant:"ghost-block",size:1,disabled:i[0]===i[1].length-1,title:"Next version",$$slots:{default:[b7]},$$scope:{ctx:i}}}),t.$on("click",i[14]),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};3&o&&(r.disabled=e[0]===e[1].length-1),4194304&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function Rd(i){let t,n,e;return n=new fp({props:{commandResult:i[5].status===xe.completed?"success":i[5].status===xe.error?"error":"loading"}}),{c(){t=L("div"),v(n.$$.fragment),A(t,"class","header-content__actions")},m(o,r){x(o,t,r),w(n,t,null),e=!0},p(o,r){const s={};32&r&&(s.commandResult=o[5].status===xe.completed?"success":o[5].status===xe.error?"error":"loading"),n.$set(s)},i(o){e||(d(n.$$.fragment,o),e=!0)},o(o){$(n.$$.fragment,o),e=!1},d(o){o&&b(t),y(n)}}}function _7(i){let t,n;return t=new Hs({props:{slot:"iconLeft"}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p:P,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function C7(i){let t;return{c(){t=G("Save locally")},m(n,e){x(n,t,e)},d(n){n&&b(t)}}}function A7(i){let t,n;return t=new he({props:{variant:"solid",color:"accent",disabled:i[3]||!i[2]||!Nd,$$slots:{default:[C7]},$$scope:{ctx:i}}}),t.$on("click",i[17]),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};12&o&&(r.disabled=e[3]||!e[2]||!Nd),4194304&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function M7(i){let t;return{c(){t=G("Save in repo")},m(n,e){x(n,t,e)},d(n){n&&b(t)}}}function k7(i){let t,n;return t=new he({props:{variant:"solid",color:"accent",disabled:i[3]||!i[2],$$slots:{default:[M7]},$$scope:{ctx:i}}}),t.$on("click",i[18]),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};12&o&&(r.disabled=e[3]||!e[2]),4194304&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function Dd(i){let t,n,e;return n=new Gt({props:{size:1,color:"error",$$slots:{default:[S7]},$$scope:{ctx:i}}}),{c(){t=L("div"),v(n.$$.fragment),A(t,"class","error-message svelte-bf326k")},m(o,r){x(o,t,r),w(n,t,null),e=!0},p(o,r){const s={};4194320&r&&(s.$$scope={dirty:r,ctx:o}),n.$set(s)},i(o){e||(d(n.$$.fragment,o),e=!0)},o(o){$(n.$$.fragment,o),e=!1},d(o){o&&b(t),y(n)}}}function S7(i){let t;return{c(){t=G(i[4])},m(n,e){x(n,t,e)},p(n,e){16&e&&_t(t,n[4])},d(n){n&&b(t)}}}function T7(i){let t,n,e=i[1].length>0&&Ld(i);return{c(){e&&e.c(),t=mt()},m(o,r){e&&e.m(o,r),x(o,t,r),n=!0},p(o,[r]){o[1].length>0?e?(e.p(o,r),2&r&&d(e,1)):(e=Ld(o),e.c(),d(e,1),e.m(t.parentNode,t)):e&&(j(),$(e,1,1,()=>{e=null}),q())},i(o){n||(d(e),n=!0)},o(o){$(e),n=!1},d(o){o&&b(t),e&&e.d(o)}}}let Nd="home";function E7(i,t,n){let e,o,r,s;const c=St(Tn.key);Et(i,c,C=>n(11,s=C));const a=St("chatModel");let l="setup.sh",u=!1,f="",m=0;const p=C=>{const T=document.querySelector(`[data-tool-id="${C}"]`);T&&T.scrollIntoView({behavior:"smooth",block:"start"})};function _(C=1){n(0,m=Math.max(0,Math.min(e.length-1,m+C)));const T=e[m];T!=null&&T.id&&(p(T.id),setTimeout(()=>{p(T.id)},500))}async function M(C){var T,E,R,N,Z,Q;if(l&&C)if(r!=null&&r.content)try{n(3,u=!0),n(4,f="");const X=l.endsWith(".sh")?l:`${l}.sh`,K=await c.saveSetupScript(X,r.content,C);let H;if(!K.success||!K.path)return void n(4,f=K.error||"Failed to save setup script");if(H=(await c.listSetupScripts()).find(rt=>rt.path===K.path),!H)return void n(4,f="Failed to save script");const Y=s==null?void 0:s.currentAgent,V=(R=(E=(T=Y==null?void 0:Y.workspace_setup)==null?void 0:T.starting_files)==null?void 0:E.github_commit_ref)==null?void 0:R.git_ref,J=(Q=(Z=(N=Y==null?void 0:Y.workspace_setup)==null?void 0:N.starting_files)==null?void 0:Z.github_commit_ref)==null?void 0:Q.repository_url;c.saveLastRemoteAgentSetup(J||null,V||null,K.path),c.setCurrentAgent(void 0)}catch(X){n(4,f=X instanceof Error?X.message:"Unknown error occurred")}finally{n(3,u=!1)}else n(4,f="No script content to save");else n(4,f="Please provide both script name and location")}return i.$$.update=()=>{var T;var C;2048&i.$$.dirty&&n(1,(C=((T=s.currentConversation)==null?void 0:T.exchanges)||[],e=C&&Array.isArray(C)?C.flatMap(E=>(E.exchange.response_nodes||[]).filter(R=>{var N,Z;return R.type===Rr.TOOL_USE&&((N=R.tool_use)==null?void 0:N.tool_name)==="setup-script"&&((Z=R.tool_use)==null?void 0:Z.input_json)}).map(R=>{var N;try{const Z=typeof R.tool_use.input_json=="string"?JSON.parse(R.tool_use.input_json):R.tool_use.input_json,Q=s.getToolUseState(R.tool_use.tool_use_id),X=((N=E.exchange)==null?void 0:N.request_id)||E.request_id||"";return X||console.warn("SetupScriptSaveBar: Missing request_id for an exchange",E),{content:Z.script_content||"",timestamp:R.timestamp,status:Q.phase,requestId:X,id:R.tool_use.tool_use_id}}catch(Z){return console.error("Failed to parse setup script JSON:",Z),null}})).filter(E=>E!==null&&E.content!==""):[])),2&i.$$.dirty&&n(10,o=e.length),1024&i.$$.dirty&&n(0,m=o-1),3&i.$$.dirty&&n(5,r=e[m])},[m,e,l,u,f,r,c,a,_,M,o,s,()=>{a.extensionClient.openScratchFile(r==null?void 0:r.content,"shellscript")},()=>_(-1),()=>_(1),function(C){l=C,n(2,l)},()=>{l?l.endsWith(".sh")||n(2,l+=".sh"):n(2,l="setup.sh")},()=>M("home"),()=>M("git")]}class I7 extends ut{constructor(t){super(),dt(this,t,E7,T7,ct,{})}}function Pd(i){let t,n;return t=new Zn({props:{color:i[3],size:1,$$slots:{icon:[P7],default:[L7]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};8&o&&(r.color=e[3]),2070&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function L7(i){let t,n,e=i[1]===Hn.inProgress?` ${i[2].progress}%`:"";return{c(){t=G(i[4]),n=G(e)},m(o,r){x(o,t,r),x(o,n,r)},p(o,r){16&r&&_t(t,o[4]),6&r&&e!==(e=o[1]===Hn.inProgress?` ${o[2].progress}%`:"")&&_t(n,e)},d(o){o&&(b(t),b(n))}}}function R7(i){let t,n,e;return n=new nf({}),{c(){t=L("div"),v(n.$$.fragment),A(t,"class","c-orientation-status--spin-icon svelte-1a8540p")},m(o,r){x(o,t,r),w(n,t,null),e=!0},i(o){e||(d(n.$$.fragment,o),e=!0)},o(o){$(n.$$.fragment,o),e=!1},d(o){o&&b(t),y(n)}}}function D7(i){let t,n;return t=new Wn({}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function N7(i){let t,n;return t=new To({}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function P7(i){let t,n,e,o;const r=[N7,D7,R7],s=[];function c(a,l){return a[1]===Hn.succeeded?0:a[1]===Hn.failed?1:2}return t=c(i),n=s[t]=r[t](i),{c(){n.c(),e=mt()},m(a,l){s[t].m(a,l),x(a,e,l),o=!0},p(a,l){let u=t;t=c(a),t!==u&&(j(),$(s[u],1,1,()=>{s[u]=null}),q(),n=s[t],n||(n=s[t]=r[t](a),n.c()),d(n,1),n.m(e.parentNode,e))},i(a){o||(d(n),o=!0)},o(a){$(n),o=!1},d(a){a&&b(e),s[t].d(a)}}}function F7(i){let t,n,e,o,r=i[0]&&Pd(i);return{c(){r&&r.c(),t=mt()},m(s,c){r&&r.m(s,c),x(s,t,c),n=!0,e||(o=Lt(window,"message",i[5].onMessageFromExtension),e=!0)},p(s,[c]){s[0]?r?(r.p(s,c),1&c&&d(r,1)):(r=Pd(s),r.c(),d(r,1),r.m(t.parentNode,t)):r&&(j(),$(r,1,1,()=>{r=null}),q())},i(s){n||(d(r),n=!0)},o(s){$(r),n=!1},d(s){s&&b(t),r&&r.d(s),e=!1,o()}}}function O7(i,t,n){let e,o;const r=new Ui(wn),s=Le({state:Hn.idle});Et(i,s,m=>n(2,o=m));const c=jn(s,m=>m.state);Et(i,c,m=>n(1,e=m));const a={handleMessageFromExtension:m=>!(!m.data||m.data.type!==je.orientationStatusUpdate)&&(s.set(m.data.data),!0)};let l,u;ro(()=>{r.registerConsumer(a),wn.postMessage({type:je.getOrientationStatus})});let f=!1;return i.$$.update=()=>{var m;2&i.$$.dirty&&n(3,l=(m=e)===Hn.succeeded?"success":m===Hn.failed||m===Hn.aborted?"error":"warning"),6&i.$$.dirty&&n(4,u=function(p,_){return p===Hn.succeeded?"Orientation complete! Check out `.augment/rules` folder.":p===Hn.failed?_.errorMessage?`Orientation failed: ${_.errorMessage}`:"Orientation failed":p===Hn.aborted?_.errorMessage?`Orientation aborted: ${_.errorMessage}`:"Orientation aborted":"Orienting to codebase and creating rules in `.augment/rules` folder... "}(e,o)),3&i.$$.dirty&&(f?e!==Hn.succeeded&&e!==Hn.failed&&e!==Hn.aborted||setTimeout(()=>{n(0,f=!1)},3e3):e===Hn.inProgress&&n(0,f=!0))},[f,e,o,l,u,r,s,c]}class z7 extends ut{constructor(t){super(),dt(this,t,O7,F7,ct,{})}}function Fd(i){let t,n;return t=new Zn({props:{color:"error",size:1,$$slots:{icon:[U7],default:[B7]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function B7(i){let t;return{c(){t=G("Syncing disabled")},m(n,e){x(n,t,e)},d(n){n&&b(t)}}}function U7(i){let t,n;return t=new mp({}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function H7(i){let t,n,e=i[1].syncEnabledState==="disabled"&&Fd(i);return{c(){e&&e.c(),t=mt()},m(o,r){e&&e.m(o,r),x(o,t,r),n=!0},p(o,[r]){o[1].syncEnabledState==="disabled"?e?2&r&&d(e,1):(e=Fd(o),e.c(),d(e,1),e.m(t.parentNode,t)):e&&(j(),$(e,1,1,()=>{e=null}),q())},i(o){n||(d(e),n=!0)},o(o){$(e),n=!1},d(o){o&&b(t),e&&e.d(o)}}}function j7(i,t,n){let e,o=P,r=()=>(o(),o=ce(s,c=>n(1,e=c)),s);i.$$.on_destroy.push(()=>o());let{contextModel:s}=t;return r(),i.$$set=c=>{"contextModel"in c&&r(n(0,s=c.contextModel))},[s,e]}class q7 extends ut{constructor(t){super(),dt(this,t,j7,H7,ct,{contextModel:0})}}function Od(i){let t,n;return t=new Zn({props:{color:i[2],size:1,$$slots:{icon:[Y7],default:[W7]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};4&o&&(r.color=e[2]),89&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function W7(i){var o;let t,n,e=((o=i[0])==null?void 0:o.status)===_o.done?"":` ${i[4]}%`;return{c(){t=G(i[3]),n=G(e)},m(r,s){x(r,t,s),x(r,n,s)},p(r,s){var c;8&s&&_t(t,r[3]),17&s&&e!==(e=((c=r[0])==null?void 0:c.status)===_o.done?"":` ${r[4]}%`)&&_t(n,e)},d(r){r&&(b(t),b(n))}}}function V7(i){let t,n,e;return n=new nf({}),{c(){t=L("div"),v(n.$$.fragment),A(t,"class","c-sync-status--spin-icon svelte-18a88kw")},m(o,r){x(o,t,r),w(n,t,null),e=!0},i(o){e||(d(n.$$.fragment,o),e=!0)},o(o){$(n.$$.fragment,o),e=!1},d(o){o&&b(t),y(n)}}}function G7(i){let t,n;return t=new To({}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function Y7(i){let t,n,e,o;const r=[G7,V7],s=[];function c(a,l){var u;return((u=a[0])==null?void 0:u.status)===_o.done?0:1}return t=c(i),n=s[t]=r[t](i),{c(){n.c(),e=mt()},m(a,l){s[t].m(a,l),x(a,e,l),o=!0},p(a,l){let u=t;t=c(a),t!==u&&(j(),$(s[u],1,1,()=>{s[u]=null}),q(),n=s[t],n||(n=s[t]=r[t](a),n.c()),d(n,1),n.m(e.parentNode,e))},i(a){o||(d(n),o=!0)},o(a){$(n),o=!1},d(a){a&&b(e),s[t].d(a)}}}function K7(i){let t,n,e=!isNaN(i[4])&&i[1],o=e&&Od(i);return{c(){o&&o.c(),t=mt()},m(r,s){o&&o.m(r,s),x(r,t,s),n=!0},p(r,[s]){18&s&&(e=!isNaN(r[4])&&r[1]),e?o?(o.p(r,s),18&s&&d(o,1)):(o=Od(r),o.c(),d(o,1),o.m(t.parentNode,t)):o&&(j(),$(o,1,1,()=>{o=null}),q())},i(r){n||(d(o),n=!0)},o(r){$(o),n=!1},d(r){r&&b(t),o&&o.d(r)}}}function X7(i,t,n){let e,o,r,s,{progress:c}=t;return i.$$set=a=>{"progress"in a&&n(0,c=a.progress)},i.$$.update=()=>{var a;1&i.$$.dirty&&n(4,e=!(a=c)||a.totalFiles<=0?NaN:a.status===_o.done?100:Math.floor(a.syncedCount/a.totalFiles*100)),1&i.$$.dirty&&n(2,s=(c==null?void 0:c.status)===_o.done?"success":"info"),1&i.$$.dirty&&n(3,o=(c==null?void 0:c.status)===_o.done?"Indexing complete.":"Indexing codebase..."),3&i.$$.dirty&&(r?(c==null?void 0:c.status)===_o.done&&setTimeout(()=>{n(1,r=!1)},3e3):c&&c.status!==_o.done&&(c.status===_o.longRunning||c.newlyTrackedFolders.length>0)&&n(1,r=!0))},n(1,r=!1),[c,r,s,o,e]}class J7 extends ut{constructor(t){super(),dt(this,t,X7,K7,ct,{progress:0})}}function Z7(i){let t,n,e,o,r,s;return t=new q7({props:{contextModel:i[0]}}),e=new J7({props:{progress:i[1].syncProgress}}),r=new z7({}),{c(){v(t.$$.fragment),n=U(),v(e.$$.fragment),o=U(),v(r.$$.fragment)},m(c,a){w(t,c,a),x(c,n,a),w(e,c,a),x(c,o,a),w(r,c,a),s=!0},p(c,[a]){const l={};1&a&&(l.contextModel=c[0]),t.$set(l);const u={};2&a&&(u.progress=c[1].syncProgress),e.$set(u)},i(c){s||(d(t.$$.fragment,c),d(e.$$.fragment,c),d(r.$$.fragment,c),s=!0)},o(c){$(t.$$.fragment,c),$(e.$$.fragment,c),$(r.$$.fragment,c),s=!1},d(c){c&&(b(n),b(o)),y(t,c),y(e,c),y(r,c)}}}function Q7(i,t,n){let e,o=P,r=()=>(o(),o=ce(s,c=>n(1,e=c)),s);i.$$.on_destroy.push(()=>o());let{contextModel:s}=t;return r(),i.$$set=c=>{"contextModel"in c&&r(n(0,s=c.contextModel))},[s,e]}class t9 extends ut{constructor(t){super(),dt(this,t,Q7,Z7,ct,{contextModel:0})}}function e9(i){let t,n;return t=new or({}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function n9(i){let t,n;return t=new fe({props:{variant:"ghost-block",color:"neutral",size:1,title:"Agent options",$$slots:{default:[e9]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};524288&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function zd(i){let t,n;return t=new wt.Item({props:{onSelect:i[13],$$slots:{iconLeft:[r9],default:[o9]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};1&o&&(r.onSelect=e[13]),524288&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function o9(i){let t;return{c(){t=G("Rename")},m(n,e){x(n,t,e)},d(n){n&&b(t)}}}function r9(i){let t,n;return t=new Vr({props:{slot:"iconLeft"}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p:P,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function Bd(i){let t,n;return t=new wt.Item({props:{title:"Pin or unpin agent",onSelect:i[14],$$slots:{iconLeft:[s9],default:[i9]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};16&o&&(r.onSelect=e[14]),524296&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function i9(i){let t,n=i[3]?"Unpin":"Pin";return{c(){t=G(n)},m(e,o){x(e,t,o)},p(e,o){8&o&&n!==(n=e[3]?"Unpin":"Pin")&&_t(t,n)},d(e){e&&b(t)}}}function s9(i){let t,n;return t=new Os({props:{class:"pin-icon"}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p:P,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function a9(i){let t;return{c(){t=G("Copy ID")},m(n,e){x(n,t,e)},p:P,d(n){n&&b(t)}}}function c9(i){let t,n=i[7].get(i[1])+"";return{c(){t=G(n)},m(e,o){x(e,t,o)},p(e,o){130&o&&n!==(n=e[7].get(e[1])+"")&&_t(t,n)},d(e){e&&b(t)}}}function l9(i){let t,n;function e(s,c){return 130&c&&(t=null),t==null&&(t=!!s[7].get(s[1])),t?c9:a9}let o=e(i,-1),r=o(i);return{c(){r.c(),n=mt()},m(s,c){r.m(s,c),x(s,n,c)},p(s,c){o===(o=e(s,c))&&r?r.p(s,c):(r.d(1),r=o(s),r&&(r.c(),r.m(n.parentNode,n)))},d(s){s&&b(n),r.d(s)}}}function u9(i){let t,n;return t=new bf({props:{slot:"iconLeft"}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p:P,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function d9(i){let t;return{c(){t=G("Share")},m(n,e){x(n,t,e)},p:P,d(n){n&&b(t)}}}function $9(i){let t,n=i[8].get(i[1])+"";return{c(){t=G(n)},m(e,o){x(e,t,o)},p(e,o){258&o&&n!==(n=e[8].get(e[1])+"")&&_t(t,n)},d(e){e&&b(t)}}}function f9(i){let t,n;function e(s,c){return 258&c&&(t=null),t==null&&(t=!!s[8].get(s[1])),t?$9:d9}let o=e(i,-1),r=o(i);return{c(){r.c(),n=mt()},m(s,c){r.m(s,c),x(s,n,c)},p(s,c){o===(o=e(s,c))&&r?r.p(s,c):(r.d(1),r=o(s),r&&(r.c(),r.m(n.parentNode,n)))},d(s){s&&b(n),r.d(s)}}}function m9(i){let t,n;return t=new ji({props:{slot:"iconLeft"}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p:P,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function Ud(i){let t,n,e,o,r,s;return t=new wt.Separator({}),e=new wt.Label({props:{$$slots:{default:[p9]},$$scope:{ctx:i}}}),r=new wt.Item({props:{disabled:!0,$$slots:{default:[g9]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment),n=U(),v(e.$$.fragment),o=U(),v(r.$$.fragment)},m(c,a){w(t,c,a),x(c,n,a),w(e,c,a),x(c,o,a),w(r,c,a),s=!0},p(c,a){const l={};524288&a&&(l.$$scope={dirty:a,ctx:c}),e.$set(l);const u={};524292&a&&(u.$$scope={dirty:a,ctx:c}),r.$set(u)},i(c){s||(d(t.$$.fragment,c),d(e.$$.fragment,c),d(r.$$.fragment,c),s=!0)},o(c){$(t.$$.fragment,c),$(e.$$.fragment,c),$(r.$$.fragment,c),s=!1},d(c){c&&(b(n),b(o)),y(t,c),y(e,c),y(r,c)}}}function p9(i){let t;return{c(){t=G("Branch")},m(n,e){x(n,t,e)},d(n){n&&b(t)}}}function g9(i){let t;return{c(){t=G(i[2])},m(n,e){x(n,t,e)},p(n,e){4&e&&_t(t,n[2])},d(n){n&&b(t)}}}function h9(i){let t,n,e,o,r,s,c,a,l=i[5]&&zd(i),u=i[4]&&Bd(i);e=new wt.Item({props:{onSelect:i[15],$$slots:{iconLeft:[u9],default:[l9]},$$scope:{ctx:i}}}),r=new wt.Item({props:{onSelect:i[16],$$slots:{iconLeft:[m9],default:[f9]},$$scope:{ctx:i}}});let f=i[2]&&Ud(i);return{c(){l&&l.c(),t=U(),u&&u.c(),n=U(),v(e.$$.fragment),o=U(),v(r.$$.fragment),s=U(),f&&f.c(),c=mt()},m(m,p){l&&l.m(m,p),x(m,t,p),u&&u.m(m,p),x(m,n,p),w(e,m,p),x(m,o,p),w(r,m,p),x(m,s,p),f&&f.m(m,p),x(m,c,p),a=!0},p(m,p){m[5]?l?(l.p(m,p),32&p&&d(l,1)):(l=zd(m),l.c(),d(l,1),l.m(t.parentNode,t)):l&&(j(),$(l,1,1,()=>{l=null}),q()),m[4]?u?(u.p(m,p),16&p&&d(u,1)):(u=Bd(m),u.c(),d(u,1),u.m(n.parentNode,n)):u&&(j(),$(u,1,1,()=>{u=null}),q());const _={};524418&p&&(_.$$scope={dirty:p,ctx:m}),e.$set(_);const M={};64&p&&(M.onSelect=m[16]),524546&p&&(M.$$scope={dirty:p,ctx:m}),r.$set(M),m[2]?f?(f.p(m,p),4&p&&d(f,1)):(f=Ud(m),f.c(),d(f,1),f.m(c.parentNode,c)):f&&(j(),$(f,1,1,()=>{f=null}),q())},i(m){a||(d(l),d(u),d(e.$$.fragment,m),d(r.$$.fragment,m),d(f),a=!0)},o(m){$(l),$(u),$(e.$$.fragment,m),$(r.$$.fragment,m),$(f),a=!1},d(m){m&&(b(t),b(n),b(o),b(s),b(c)),l&&l.d(m),u&&u.d(m),y(e,m),y(r,m),f&&f.d(m)}}}function v9(i){let t,n,e,o;return t=new wt.Trigger({props:{$$slots:{default:[n9]},$$scope:{ctx:i}}}),e=new wt.Content({props:{size:1,side:"bottom",align:"end",$$slots:{default:[h9]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment),n=U(),v(e.$$.fragment)},m(r,s){w(t,r,s),x(r,n,s),w(e,r,s),o=!0},p(r,s){const c={};524288&s&&(c.$$scope={dirty:s,ctx:r}),t.$set(c);const a={};524799&s&&(a.$$scope={dirty:s,ctx:r}),e.$set(a)},i(r){o||(d(t.$$.fragment,r),d(e.$$.fragment,r),o=!0)},o(r){$(t.$$.fragment,r),$(e.$$.fragment,r),o=!1},d(r){r&&b(n),y(t,r),y(e,r)}}}function w9(i){let t,n,e;function o(s){i[17](s)}let r={nested:!1,$$slots:{default:[v9]},$$scope:{ctx:i}};return i[6]!==void 0&&(r.requestClose=i[6]),t=new wt.Root({props:r}),te.push(()=>Te(t,"requestClose",o)),{c(){v(t.$$.fragment)},m(s,c){w(t,s,c),e=!0},p(s,[c]){const a={};524799&c&&(a.$$scope={dirty:c,ctx:s}),!n&&64&c&&(n=!0,a.requestClose=s[6],Re(()=>n=!1)),t.$set(a)},i(s){e||(d(t.$$.fragment,s),e=!0)},o(s){$(t.$$.fragment,s),e=!1},d(s){y(t,s)}}}function y9(i,t,n){let e,o,{agentId:r}=t,{selectedBranch:s}=t,{isPinned:c=!1}=t,{togglePinned:a}=t,{enableRename:l=!1}=t,{isEditing:u=!1}=t,f=()=>{};const m=Le(new Map);Et(i,m,T=>n(7,e=T));const p=Le(new Map);Et(i,p,T=>n(8,o=T));const _=St(Tn.key);function M(){navigator.clipboard.writeText(r),m.update(T=>(T.set(r,"Copied!"),T)),setTimeout(()=>{m.update(T=>(T.delete(r),T))},1e3)}async function C(){try{const T=await(_==null?void 0:_.getConversationUrl(r));T&&navigator.clipboard.writeText(T),p.update(E=>(E.set(r,"Link copied!"),E)),setTimeout(()=>{p.update(E=>(E.delete(r),E))},1e3)}catch(T){console.error("Failed to get conversation URL: ",T)}}return i.$$set=T=>{"agentId"in T&&n(1,r=T.agentId),"selectedBranch"in T&&n(2,s=T.selectedBranch),"isPinned"in T&&n(3,c=T.isPinned),"togglePinned"in T&&n(4,a=T.togglePinned),"enableRename"in T&&n(5,l=T.enableRename),"isEditing"in T&&n(0,u=T.isEditing)},[u,r,s,c,a,l,f,e,o,m,p,M,C,()=>{setTimeout(()=>{n(0,u=!0)},20)},()=>{a()},()=>{M()},()=>{C(),f()},function(T){f=T,n(6,f)}]}class fm extends ut{constructor(t){super(),dt(this,t,y9,w9,ct,{agentId:1,selectedBranch:2,isPinned:3,togglePinned:4,enableRename:5,isEditing:0})}}function Hd(i){let t,n,e,o;n=new Gt({props:{size:i[4],weight:i[9],color:i[10],$$slots:{default:[_9]},$$scope:{ctx:i}}});let r=i[8]&&jd(i);return{c(){t=L("div"),v(n.$$.fragment),e=U(),r&&r.c(),A(t,"class","c-inline-edit-text-augment__input svelte-jmpnji")},m(s,c){x(s,t,c),w(n,t,null),O(t,e),r&&r.m(t,null),o=!0},p(s,c){const a={};16&c[0]&&(a.size=s[4]),512&c[0]&&(a.weight=s[9]),1024&c[0]&&(a.color=s[10]),41100&c[0]|64&c[1]&&(a.$$scope={dirty:c,ctx:s}),n.$set(a),s[8]?r?(r.p(s,c),256&c[0]&&d(r,1)):(r=jd(s),r.c(),d(r,1),r.m(t,null)):r&&(j(),$(r,1,1,()=>{r=null}),q())},i(s){o||(d(n.$$.fragment,s),d(r),o=!0)},o(s){$(n.$$.fragment,s),$(r),o=!1},d(s){s&&b(t),y(n),r&&r.d()}}}function b9(i){let t,n,e;return{c(){t=L("input"),qn(t,"field-sizing","content"),A(t,"class","c-inline-edit-text-augment__input-field svelte-jmpnji"),A(t,"type","text"),A(t,"placeholder",i[2]),t.disabled=i[3]},m(o,r){x(o,t,r),i[33](t),pr(t,i[15]),n||(e=[Lt(t,"input",i[34]),Lt(t,"keydown",i[16]),Lt(t,"blur",i[19])],n=!0)},p(o,r){4&r[0]&&A(t,"placeholder",o[2]),8&r[0]&&(t.disabled=o[3]),32768&r[0]&&t.value!==o[15]&&pr(t,o[15])},d(o){o&&b(t),i[33](null),n=!1,Qe(e)}}}function x9(i){let t,n,e;return{c(){t=L("textarea"),qn(t,"field-sizing","content"),A(t,"class","c-inline-edit-text-augment__input-field svelte-jmpnji"),A(t,"placeholder",i[2]),t.disabled=i[3],A(t,"rows","1")},m(o,r){x(o,t,r),i[31](t),pr(t,i[15]),n||(e=[Lt(t,"input",i[32]),Lt(t,"keydown",i[16]),Lt(t,"blur",i[19])],n=!0)},p(o,r){4&r[0]&&A(t,"placeholder",o[2]),8&r[0]&&(t.disabled=o[3]),32768&r[0]&&pr(t,o[15])},d(o){o&&b(t),i[31](null),n=!1,Qe(e)}}}function _9(i){let t;function n(r,s){return r[7]?x9:b9}let e=n(i),o=e(i);return{c(){o.c(),t=mt()},m(r,s){o.m(r,s),x(r,t,s)},p(r,s){e===(e=n(r))&&o?o.p(r,s):(o.d(1),o=e(r),o&&(o.c(),o.m(t.parentNode,t)))},d(r){r&&b(t),o.d(r)}}}function jd(i){let t,n;return t=new fe({props:{size:1,variant:i[11],color:i[12],disabled:i[3],$$slots:{default:[C9]},$$scope:{ctx:i}}}),t.$on("click",i[18]),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};2048&o[0]&&(r.variant=e[11]),4096&o[0]&&(r.color=e[12]),8&o[0]&&(r.disabled=e[3]),64&o[1]&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function C9(i){let t,n;return t=new zs({}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function A9(i){let t,n=(i[0]||i[2])+"";return{c(){t=G(n)},m(e,o){x(e,t,o)},p(e,o){5&o[0]&&n!==(n=(e[0]||e[2])+"")&&_t(t,n)},d(e){e&&b(t)}}}function M9(i){let t,n,e,o,r,s,c,a,l,u=i[6]&&!i[3]&&i[1]&&Hd(i);const f=i[30].default,m=Yt(f,i,i[37],null),p=m||function(_){let M,C;return M=new Gt({props:{size:_[4],weight:_[9],color:_[10],value:_[0],placeholder:_[2],$$slots:{default:[A9]},$$scope:{ctx:_}}}),{c(){v(M.$$.fragment)},m(T,E){w(M,T,E),C=!0},p(T,E){const R={};16&E[0]&&(R.size=T[4]),512&E[0]&&(R.weight=T[9]),1024&E[0]&&(R.color=T[10]),1&E[0]&&(R.value=T[0]),4&E[0]&&(R.placeholder=T[2]),5&E[0]|64&E[1]&&(R.$$scope={dirty:E,ctx:T}),M.$set(R)},i(T){C||(d(M.$$.fragment,T),C=!0)},o(T){$(M.$$.fragment,T),C=!1},d(T){y(M,T)}}}(i);return{c(){t=L("div"),u&&u.c(),n=U(),e=L("div"),p&&p.c(),A(e,"class","c-inline-edit-text-augment__text svelte-jmpnji"),A(e,"role","button"),A(e,"tabindex",o=i[6]&&!i[3]?0:void 0),A(e,"aria-label",r=i[0]||i[2]),Mt(e,"c-inline-edit-text-augment__text--editable",i[6]&&!i[3]),A(t,"class",s="c-inline-edit-text-augment "+i[5]+" svelte-jmpnji"),Mt(t,"c-inline-edit-text-augment--is-editing",i[1]),Mt(t,"c-inline-edit-text-augment--disabled",i[3]),Mt(t,"c-inline-edit-text-augment--is-editable",i[6])},m(_,M){x(_,t,M),u&&u.m(t,null),O(t,n),O(t,e),p&&p.m(e,null),i[36](t),c=!0,a||(l=[Lt(e,"click",i[20]),Lt(e,"keydown",i[35])],a=!0)},p(_,M){_[6]&&!_[3]&&_[1]?u?(u.p(_,M),74&M[0]&&d(u,1)):(u=Hd(_),u.c(),d(u,1),u.m(t,n)):u&&(j(),$(u,1,1,()=>{u=null}),q()),m?m.p&&(!c||64&M[1])&&Kt(m,f,_,_[37],c?Jt(f,_[37],M,null):Xt(_[37]),null):p&&p.p&&(!c||1557&M[0])&&p.p(_,c?M:[-1,-1]),(!c||72&M[0]&&o!==(o=_[6]&&!_[3]?0:void 0))&&A(e,"tabindex",o),(!c||5&M[0]&&r!==(r=_[0]||_[2]))&&A(e,"aria-label",r),(!c||72&M[0])&&Mt(e,"c-inline-edit-text-augment__text--editable",_[6]&&!_[3]),(!c||32&M[0]&&s!==(s="c-inline-edit-text-augment "+_[5]+" svelte-jmpnji"))&&A(t,"class",s),(!c||34&M[0])&&Mt(t,"c-inline-edit-text-augment--is-editing",_[1]),(!c||40&M[0])&&Mt(t,"c-inline-edit-text-augment--disabled",_[3]),(!c||96&M[0])&&Mt(t,"c-inline-edit-text-augment--is-editable",_[6])},i(_){c||(d(u),d(p,_),c=!0)},o(_){$(u),$(p,_),c=!1},d(_){_&&b(t),u&&u.d(),p&&p.d(_),i[36](null),a=!1,Qe(l)}}}function k9(i,t,n){let e,o,{$$slots:r={},$$scope:s}=t,{value:c=""}=t,{placeholder:a=""}=t,{disabled:l=!1}=t,{size:u=2}=t,{class:f=""}=t,{isEditing:m=!1}=t,{isEditable:p=!0}=t,{multiline:_=!0}=t,{showCommitButton:M=!0}=t,{commitOnBlur:C=!0}=t,{commitOnEnter:T=!0}=t,{allowCtrlEnterForNewline:E=!0}=t,{doubleClickToEdit:R=!0}=t,{singleClickToEdit:N=!1}=t,{weight:Z}=t,{color:Q}=t,{onCancelEdit:X=it=>{}}=t,{onStartEdit:K=()=>{}}=t,{onChange:H=(it,xt)=>{}}=t,{outsideNode:Y}=t,{commitButtonVariant:V="classic"}=t,{commitButtonColor:J="accent"}=t,rt=c;function lt(){n(15,rt=c),n(1,m=!1),X(c)}function ot(){p&&!l&&(m||(K(),n(1,m=!0)),setTimeout(()=>{e==null||e.focus()},0))}function ht(){const it=rt.trim(),xt=c;it!==xt&&(n(0,c=it),H(it,xt)),setTimeout(()=>{e==null||e.blur()},0),n(1,m=!1)}return ro(()=>{const it=xt=>{var ee;m&&((ee=Y||o)==null?void 0:ee.contains(xt.target))===!1&&(C?ht():lt())};return document.addEventListener("click",it),()=>{document.removeEventListener("click",it)}}),i.$$set=it=>{"value"in it&&n(0,c=it.value),"placeholder"in it&&n(2,a=it.placeholder),"disabled"in it&&n(3,l=it.disabled),"size"in it&&n(4,u=it.size),"class"in it&&n(5,f=it.class),"isEditing"in it&&n(1,m=it.isEditing),"isEditable"in it&&n(6,p=it.isEditable),"multiline"in it&&n(7,_=it.multiline),"showCommitButton"in it&&n(8,M=it.showCommitButton),"commitOnBlur"in it&&n(21,C=it.commitOnBlur),"commitOnEnter"in it&&n(22,T=it.commitOnEnter),"allowCtrlEnterForNewline"in it&&n(23,E=it.allowCtrlEnterForNewline),"doubleClickToEdit"in it&&n(24,R=it.doubleClickToEdit),"singleClickToEdit"in it&&n(25,N=it.singleClickToEdit),"weight"in it&&n(9,Z=it.weight),"color"in it&&n(10,Q=it.color),"onCancelEdit"in it&&n(26,X=it.onCancelEdit),"onStartEdit"in it&&n(27,K=it.onStartEdit),"onChange"in it&&n(28,H=it.onChange),"outsideNode"in it&&n(29,Y=it.outsideNode),"commitButtonVariant"in it&&n(11,V=it.commitButtonVariant),"commitButtonColor"in it&&n(12,J=it.commitButtonColor),"$$scope"in it&&n(37,s=it.$$scope)},i.$$.update=()=>{3&i.$$.dirty[0]&&(m||n(15,rt=c)),2&i.$$.dirty[0]&&m&&ot()},[c,m,a,l,u,f,p,_,M,Z,Q,V,J,e,o,rt,function(it){T&&it.key==="Enter"?_&&E&&(it.ctrlKey||it.metaKey||it.altKey||it.shiftKey)||(it.preventDefault(),ht()):it.key==="Escape"&&(it.preventDefault(),lt())},ot,ht,function(){C&&m&&ht()},function(it){(N||R&&it.detail===2)&&ot()},C,T,E,R,N,X,K,H,Y,r,function(it){te[it?"unshift":"push"](()=>{e=it,n(13,e)})},function(){rt=this.value,n(15,rt),n(1,m),n(0,c)},function(it){te[it?"unshift":"push"](()=>{e=it,n(13,e)})},function(){rt=this.value,n(15,rt),n(1,m),n(0,c)},it=>{it.key==="Enter"&&ot()},function(it){te[it?"unshift":"push"](()=>{o=it,n(14,o)})},s]}class S9 extends ut{constructor(t){super(),dt(this,t,k9,M9,ct,{value:0,placeholder:2,disabled:3,size:4,class:5,isEditing:1,isEditable:6,multiline:7,showCommitButton:8,commitOnBlur:21,commitOnEnter:22,allowCtrlEnterForNewline:23,doubleClickToEdit:24,singleClickToEdit:25,weight:9,color:10,onCancelEdit:26,onStartEdit:27,onChange:28,outsideNode:29,commitButtonVariant:11,commitButtonColor:12},null,[-1,-1])}}const T9=i=>({}),qd=i=>({}),E9=i=>({}),Wd=i=>({}),I9=i=>({}),Vd=i=>({}),L9=i=>({}),Gd=i=>({}),R9=i=>({}),Yd=i=>({}),D9=i=>({}),Kd=i=>({}),N9=i=>({}),Xd=i=>({});function Jd(i){let t,n;return t=new fe({props:{size:0,class:"c-thread-header__title-icon",variant:"ghost-block",disabled:!i[2],color:"neutral",title:"Edit Thread Title",$$slots:{default:[P9]},$$scope:{ctx:i}}}),t.$on("click",i[9]),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};4&o&&(r.disabled=!e[2]),32768&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function P9(i){let t,n;const e=i[11].icon,o=Yt(e,i,i[15],Kd);return{c(){t=L("span"),o&&o.c(),A(t,"class","c-thread-header__title-icon-content")},m(r,s){x(r,t,s),o&&o.m(t,null),n=!0},p(r,s){o&&o.p&&(!n||32768&s)&&Kt(o,e,r,r[15],n?Jt(e,r[15],s,D9):Xt(r[15]),Kd)},i(r){n||(d(o,r),n=!0)},o(r){$(o,r),n=!1},d(r){r&&b(t),o&&o.d(r)}}}function Zd(i){let t;const n=i[11].title,e=Yt(n,i,i[15],Gd),o=e||function(r){let s,c;return s=new Pt({props:{content:"Rename",nested:!1,hasPointerEvents:!1,class:"c-thread-header__title-text",$$slots:{default:[F9]},$$scope:{ctx:r}}}),{c(){v(s.$$.fragment)},m(a,l){w(s,a,l),c=!0},p(a,l){const u={};32935&l&&(u.$$scope={dirty:l,ctx:a}),s.$set(u)},i(a){c||(d(s.$$.fragment,a),c=!0)},o(a){$(s.$$.fragment,a),c=!1},d(a){y(s,a)}}}(i);return{c(){o&&o.c()},m(r,s){o&&o.m(r,s),t=!0},p(r,s){e?e.p&&(!t||32768&s)&&Kt(e,n,r,r[15],t?Jt(n,r[15],s,L9):Xt(r[15]),Gd):o&&o.p&&(!t||167&s)&&o.p(r,t?s:-1)},i(r){t||(d(o,r),t=!0)},o(r){$(o,r),t=!1},d(r){o&&o.d(r)}}}function F9(i){let t,n,e;function o(s){i[13](s)}let r={outsideNode:i[7],size:1,weight:"bold",value:i[1]||"New Thread",color:"primary",isEditable:i[2],showCommitButton:!1,singleClickToEdit:!0,onChange:i[5]};return i[0]!==void 0&&(r.isEditing=i[0]),t=new S9({props:r}),te.push(()=>Te(t,"isEditing",o)),{c(){v(t.$$.fragment)},m(s,c){w(t,s,c),e=!0},p(s,c){const a={};128&c&&(a.outsideNode=s[7]),2&c&&(a.value=s[1]||"New Thread"),4&c&&(a.isEditable=s[2]),32&c&&(a.onChange=s[5]),!n&&1&c&&(n=!0,a.isEditing=s[0],Re(()=>n=!1)),t.$set(a)},i(s){e||(d(t.$$.fragment,s),e=!0)},o(s){$(t.$$.fragment,s),e=!1},d(s){y(t,s)}}}function Qd(i){let t;const n=i[11]["title-actions"],e=Yt(n,i,i[15],Vd);return{c(){e&&e.c()},m(o,r){e&&e.m(o,r),t=!0},p(o,r){e&&e.p&&(!t||32768&r)&&Kt(e,n,o,o[15],t?Jt(n,o[15],r,I9):Xt(o[15]),Vd)},i(o){t||(d(e,o),t=!0)},o(o){$(e,o),t=!1},d(o){e&&e.d(o)}}}function t$(i){let t,n;const e=i[11]["info-row"],o=Yt(e,i,i[15],Wd);return{c(){t=L("div"),o&&o.c(),A(t,"class","c-thread-header__info-row svelte-zuoqgp")},m(r,s){x(r,t,s),o&&o.m(t,null),n=!0},p(r,s){o&&o.p&&(!n||32768&s)&&Kt(o,e,r,r[15],n?Jt(e,r[15],s,E9):Xt(r[15]),Wd)},i(r){n||(d(o,r),n=!0)},o(r){$(o,r),n=!1},d(r){r&&b(t),o&&o.d(r)}}}function O9(i){let t,n,e,o,r,s,c,a,l,u,f,m,p,_;Nn(i[12]);const M=i[11].banner,C=Yt(M,i,i[15],Xd);let T=i[4]&&Jd(i);const E=i[11]["title-notice"],R=Yt(E,i,i[15],Yd);let N=!i[3]&&Zd(i),Z=!i[0]&&Qd(i),Q=!i[8]&&t$(i);const X=i[11].status,K=Yt(X,i,i[15],qd);return{c(){t=L("div"),n=L("div"),C&&C.c(),e=U(),o=L("div"),T&&T.c(),r=U(),s=L("div"),R&&R.c(),c=U(),N&&N.c(),a=U(),Z&&Z.c(),l=U(),Q&&Q.c(),u=U(),f=L("div"),K&&K.c(),A(n,"class","c-thread-header__banner svelte-zuoqgp"),A(s,"class","c-thread-header__title-main svelte-zuoqgp"),A(o,"class","c-thread-header__title svelte-zuoqgp"),A(f,"class","c-thread-header__status svelte-zuoqgp"),A(t,"class","c-thread-header svelte-zuoqgp"),Mt(t,"c-thread-header--is-editing",i[2]&&i[0]),Mt(t,"c-thread-header--is-editable",i[2])},m(H,Y){x(H,t,Y),O(t,n),C&&C.m(n,null),O(t,e),O(t,o),T&&T.m(o,null),O(o,r),O(o,s),R&&R.m(s,null),O(s,c),N&&N.m(s,null),O(o,a),Z&&Z.m(o,null),O(t,l),Q&&Q.m(t,null),O(t,u),O(t,f),K&&K.m(f,null),i[14](t),m=!0,p||(_=Lt(window,"resize",i[12]),p=!0)},p(H,[Y]){C&&C.p&&(!m||32768&Y)&&Kt(C,M,H,H[15],m?Jt(M,H[15],Y,N9):Xt(H[15]),Xd),H[4]?T?(T.p(H,Y),16&Y&&d(T,1)):(T=Jd(H),T.c(),d(T,1),T.m(o,r)):T&&(j(),$(T,1,1,()=>{T=null}),q()),R&&R.p&&(!m||32768&Y)&&Kt(R,E,H,H[15],m?Jt(E,H[15],Y,R9):Xt(H[15]),Yd),H[3]?N&&(j(),$(N,1,1,()=>{N=null}),q()):N?(N.p(H,Y),8&Y&&d(N,1)):(N=Zd(H),N.c(),d(N,1),N.m(s,null)),H[0]?Z&&(j(),$(Z,1,1,()=>{Z=null}),q()):Z?(Z.p(H,Y),1&Y&&d(Z,1)):(Z=Qd(H),Z.c(),d(Z,1),Z.m(o,null)),H[8]?Q&&(j(),$(Q,1,1,()=>{Q=null}),q()):Q?(Q.p(H,Y),256&Y&&d(Q,1)):(Q=t$(H),Q.c(),d(Q,1),Q.m(t,u)),K&&K.p&&(!m||32768&Y)&&Kt(K,X,H,H[15],m?Jt(X,H[15],Y,T9):Xt(H[15]),qd),(!m||5&Y)&&Mt(t,"c-thread-header--is-editing",H[2]&&H[0]),(!m||4&Y)&&Mt(t,"c-thread-header--is-editable",H[2])},i(H){m||(d(C,H),d(T),d(R,H),d(N),d(Z),d(Q),d(K,H),m=!0)},o(H){$(C,H),$(T),$(R,H),$(N),$(Z),$(Q),$(K,H),m=!1},d(H){H&&b(t),C&&C.d(H),T&&T.d(),R&&R.d(H),N&&N.d(),Z&&Z.d(),Q&&Q.d(),K&&K.d(H),i[14](null),p=!1,_()}}}function z9(i,t,n){let e,o,{$$slots:r={},$$scope:s}=t,{title:c=""}=t,{isSquished:a=!1}=t,{isEditing:l=!1}=t,{isEditable:u=!0}=t,{hideTitle:f=!1}=t,{showEditIcon:m=!0}=t,{onRename:p=M=>{}}=t,_=0;return i.$$set=M=>{"title"in M&&n(1,c=M.title),"isSquished"in M&&n(10,a=M.isSquished),"isEditing"in M&&n(0,l=M.isEditing),"isEditable"in M&&n(2,u=M.isEditable),"hideTitle"in M&&n(3,f=M.hideTitle),"showEditIcon"in M&&n(4,m=M.showEditIcon),"onRename"in M&&n(5,p=M.onRename),"$$scope"in M&&n(15,s=M.$$scope)},i.$$.update=()=>{1088&i.$$.dirty&&n(8,e=a||_<700)},[l,c,u,f,m,p,_,o,e,function(){n(0,l=u&&!0)},a,r,function(){n(6,_=window.innerHeight)},function(M){l=M,n(0,l)},function(M){te[M?"unshift":"push"](()=>{o=M,n(7,o)})},s]}class mm extends ut{constructor(t){super(),dt(this,t,z9,O9,ct,{title:1,isSquished:10,isEditing:0,isEditable:2,hideTitle:3,showEditIcon:4,onRename:5})}}function e$(i){let t,n,e,o;function r(c){i[17](c)}let s={title:i[9]?"Generate a setup script":i[6],hideTitle:i[9],isEditable:!i[9],showEditIcon:!1,onRename:i[13],$$slots:{"info-row":[Q9],"title-actions":[V9],"title-notice":[W9],banner:[j9],default:[B9]},$$scope:{ctx:i}};return i[4]!==void 0&&(s.isEditing=i[4]),n=new mm({props:s}),te.push(()=>Te(n,"isEditing",r)),{c(){t=L("div"),v(n.$$.fragment),A(t,"class","c-agent-header svelte-12lv7h"),Mt(t,"c-agent-header--setup-script",i[9]),Mt(t,"is-in-remote",i[8])},m(c,a){x(c,t,a),w(n,t,null),o=!0},p(c,a){const l={};576&a&&(l.title=c[9]?"Generate a setup script":c[6]),512&a&&(l.hideTitle=c[9]),512&a&&(l.isEditable=!c[9]),264119&a&&(l.$$scope={dirty:a,ctx:c}),!e&&16&a&&(e=!0,l.isEditing=c[4],Re(()=>e=!1)),n.$set(l),(!o||512&a)&&Mt(t,"c-agent-header--setup-script",c[9]),(!o||256&a)&&Mt(t,"is-in-remote",c[8])},i(c){o||(d(n.$$.fragment,c),o=!0)},o(c){$(n.$$.fragment,c),o=!1},d(c){c&&b(t),y(n)}}}function n$(i){let t,n;return t=new qi({props:{slot:"icon"}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function B9(i){let t,n,e=i[9]&&n$();return{c(){e&&e.c(),t=mt()},m(o,r){e&&e.m(o,r),x(o,t,r),n=!0},p(o,r){o[9]?e?512&r&&d(e,1):(e=n$(),e.c(),d(e,1),e.m(t.parentNode,t)):e&&(j(),$(e,1,1,()=>{e=null}),q())},i(o){n||(d(e),n=!0)},o(o){$(e),n=!1},d(o){o&&b(t),e&&e.d(o)}}}function U9(i){let t,n,e,o,r;return e=new _f({}),{c(){t=L("span"),n=L("div"),v(e.$$.fragment),o=G(`
            Generate a setup script`),A(n,"class","c-setup-script-badge svelte-12lv7h"),A(t,"class","c-agent-header-banner__text svelte-12lv7h")},m(s,c){x(s,t,c),O(t,n),w(e,n,null),O(t,o),r=!0},i(s){r||(d(e.$$.fragment,s),r=!0)},o(s){$(e.$$.fragment,s),r=!1},d(s){s&&b(t),y(e)}}}function H9(i){let t,n,e,o,r;return n=new qi({}),{c(){t=L("div"),v(n.$$.fragment),e=U(),o=L("div"),o.innerHTML='<div class="c-agent-header-banner__text svelte-12lv7h">Running in the cloud</div> <div class="c-agent-header-banner__text c-agent-header-banner__text--secondary svelte-12lv7h">Workspace opened via SSH in this VSCode window</div>',A(o,"class","c-agent-header-banner__stack svelte-12lv7h"),A(t,"class","c-agent-header-banner__with-icon svelte-12lv7h")},m(s,c){x(s,t,c),w(n,t,null),O(t,e),O(t,o),r=!0},i(s){r||(d(n.$$.fragment,s),r=!0)},o(s){$(n.$$.fragment,s),r=!1},d(s){s&&b(t),y(n)}}}function o$(i){let t,n;return t=new fm({props:{agentId:i[1],selectedBranch:i[5],isPinned:i[7],togglePinned:i[12]}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};2&o&&(r.agentId=e[1]),32&o&&(r.selectedBranch=e[5]),128&o&&(r.isPinned=e[7]),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function j9(i){var u;let t,n,e,o,r;const s=[H9,U9],c=[];function a(f,m){var p;return f[8]?0:(p=f[0])!=null&&p.is_setup_script_agent?1:-1}~(t=a(i))&&(n=c[t]=s[t](i));let l=i[1]&&(i[8]||((u=i[0])==null?void 0:u.is_setup_script_agent))&&o$(i);return{c(){n&&n.c(),e=U(),o=L("div"),l&&l.c(),A(o,"class","c-agent-header__actions svelte-12lv7h")},m(f,m){~t&&c[t].m(f,m),x(f,e,m),x(f,o,m),l&&l.m(o,null),r=!0},p(f,m){var _;let p=t;t=a(f),t!==p&&(n&&(j(),$(c[p],1,1,()=>{c[p]=null}),q()),~t?(n=c[t],n||(n=c[t]=s[t](f),n.c()),d(n,1),n.m(e.parentNode,e)):n=null),f[1]&&(f[8]||(_=f[0])!=null&&_.is_setup_script_agent)?l?(l.p(f,m),259&m&&d(l,1)):(l=o$(f),l.c(),d(l,1),l.m(o,null)):l&&(j(),$(l,1,1,()=>{l=null}),q())},i(f){r||(d(n),d(l),r=!0)},o(f){$(n),$(l),r=!1},d(f){f&&(b(e),b(o)),~t&&c[t].d(f),l&&l.d()}}}function r$(i){let t,n,e;return n=new Gt({props:{size:1,truncate:!0,weight:"medium",$$slots:{default:[q9]},$$scope:{ctx:i}}}),{c(){t=L("div"),v(n.$$.fragment),A(t,"class","c-agent-title-content svelte-12lv7h")},m(o,r){x(o,t,r),w(n,t,null),e=!0},i(o){e||(d(n.$$.fragment,o),e=!0)},o(o){$(n.$$.fragment,o),e=!1},d(o){o&&b(t),y(n)}}}function q9(i){let t,n,e,o;return{c(){t=G("We've tasked an agent to generate a setup script for your repository."),n=L("span"),n.textContent="..",e=U(),o=L("span"),o.textContent=`Once created, save it to use in a new remote agent, to install dependencies &
                configure the env before the agent starts.`,A(n,"class","c-agent-title-content__long-text-alternative svelte-12lv7h"),A(o,"class","c-agent-title-content__long-text svelte-12lv7h")},m(r,s){x(r,t,s),x(r,n,s),x(r,e,s),x(r,o,s)},p:P,d(r){r&&(b(t),b(n),b(e),b(o))}}}function W9(i){let t,n,e=i[9]&&r$(i);return{c(){t=L("div"),e&&e.c(),A(t,"slot","title-notice")},m(o,r){x(o,t,r),e&&e.m(t,null),n=!0},p(o,r){o[9]?e?512&r&&d(e,1):(e=r$(o),e.c(),d(e,1),e.m(t,null)):e&&(j(),$(e,1,1,()=>{e=null}),q())},i(o){n||(d(e),n=!0)},o(o){$(e),n=!1},d(o){o&&b(t),e&&e.d()}}}function i$(i){let t,n,e;function o(s){i[16](s)}let r={agentId:i[1],selectedBranch:i[5],isPinned:i[7],togglePinned:i[12],enableRename:!0};return i[4]!==void 0&&(r.isEditing=i[4]),t=new fm({props:r}),te.push(()=>Te(t,"isEditing",o)),{c(){v(t.$$.fragment)},m(s,c){w(t,s,c),e=!0},p(s,c){const a={};2&c&&(a.agentId=s[1]),32&c&&(a.selectedBranch=s[5]),128&c&&(a.isPinned=s[7]),!n&&16&c&&(n=!0,a.isEditing=s[4],Re(()=>n=!1)),t.$set(a)},i(s){e||(d(t.$$.fragment,s),e=!0)},o(s){$(t.$$.fragment,s),e=!1},d(s){y(t,s)}}}function V9(i){var o;let t,n,e=i[1]&&!(i[8]||(o=i[0])!=null&&o.is_setup_script_agent)&&i$(i);return{c(){t=L("div"),e&&e.c(),A(t,"slot","title-actions"),A(t,"class","c-agent-header__menu svelte-12lv7h")},m(r,s){x(r,t,s),e&&e.m(t,null),n=!0},p(r,s){var c;!r[1]||r[8]||(c=r[0])!=null&&c.is_setup_script_agent?e&&(j(),$(e,1,1,()=>{e=null}),q()):e?(e.p(r,s),259&s&&d(e,1)):(e=i$(r),e.c(),d(e,1),e.m(t,null))},i(r){n||(d(e),n=!0)},o(r){$(e),n=!1},d(r){r&&b(t),e&&e.d()}}}function G9(i){let t;return{c(){t=G(i[10])},m(n,e){x(n,t,e)},p(n,e){1024&e&&_t(t,n[10])},d(n){n&&b(t)}}}function Y9(i){let t,n,e;return n=new Gt({props:{size:1,$$slots:{default:[G9]},$$scope:{ctx:i}}}),{c(){t=L("div"),v(n.$$.fragment),A(t,"class","c-agent-info-value svelte-12lv7h")},m(o,r){x(o,t,r),w(n,t,null),e=!0},p(o,r){const s={};263168&r&&(s.$$scope={dirty:r,ctx:o}),n.$set(s)},i(o){e||(d(n.$$.fragment,o),e=!0)},o(o){$(n.$$.fragment,o),e=!1},d(o){o&&b(t),y(n)}}}function K9(i){let t,n,e,o,r;return n=new Rp({}),o=new Pt({props:{content:`Repository: ${i[2]}`,triggerOn:[Zt.Hover],$$slots:{default:[Y9]},$$scope:{ctx:i}}}),{c(){t=L("a"),v(n.$$.fragment),e=U(),v(o.$$.fragment),A(t,"href",i[2]),A(t,"class","c-agent-info-item svelte-12lv7h")},m(s,c){x(s,t,c),w(n,t,null),O(t,e),w(o,t,null),r=!0},p(s,c){const a={};4&c&&(a.content=`Repository: ${s[2]}`),263168&c&&(a.$$scope={dirty:c,ctx:s}),o.$set(a),(!r||4&c)&&A(t,"href",s[2])},i(s){r||(d(n.$$.fragment,s),d(o.$$.fragment,s),r=!0)},o(s){$(n.$$.fragment,s),$(o.$$.fragment,s),r=!1},d(s){s&&b(t),y(n),y(o)}}}function X9(i){let t;return{c(){t=G(i[5])},m(n,e){x(n,t,e)},p(n,e){32&e&&_t(t,n[5])},d(n){n&&b(t)}}}function J9(i){let t,n,e;return n=new Gt({props:{size:1,$$slots:{default:[X9]},$$scope:{ctx:i}}}),{c(){t=L("div"),v(n.$$.fragment),A(t,"class","c-agent-info-value svelte-12lv7h")},m(o,r){x(o,t,r),w(n,t,null),e=!0},p(o,r){const s={};262176&r&&(s.$$scope={dirty:r,ctx:o}),n.$set(s)},i(o){e||(d(n.$$.fragment,o),e=!0)},o(o){$(n.$$.fragment,o),e=!1},d(o){o&&b(t),y(n)}}}function Z9(i){let t,n,e,o,r,s;return n=new om({}),o=new Pt({props:{content:`Started on branch: ${i[5]}`,triggerOn:[Zt.Hover],$$slots:{default:[J9]},$$scope:{ctx:i}}}),{c(){t=L("a"),v(n.$$.fragment),e=U(),v(o.$$.fragment),A(t,"href",r=`${i[2]}/tree/${i[5]}`),A(t,"class","c-agent-info-item svelte-12lv7h")},m(c,a){x(c,t,a),w(n,t,null),O(t,e),w(o,t,null),s=!0},p(c,a){const l={};32&a&&(l.content=`Started on branch: ${c[5]}`),262176&a&&(l.$$scope={dirty:a,ctx:c}),o.$set(l),(!s||36&a&&r!==(r=`${c[2]}/tree/${c[5]}`))&&A(t,"href",r)},i(c){s||(d(n.$$.fragment,c),d(o.$$.fragment,c),s=!0)},o(c){$(n.$$.fragment,c),$(o.$$.fragment,c),s=!1},d(c){c&&b(t),y(n),y(o)}}}function Q9(i){let t,n,e,o,r;return n=new Ao.Root({props:{color:"neutral",radius:"full",$$slots:{default:[K9]},$$scope:{ctx:i}}}),o=new Ao.Root({props:{color:"neutral",radius:"full",$$slots:{default:[Z9]},$$scope:{ctx:i}}}),{c(){t=L("div"),v(n.$$.fragment),e=U(),v(o.$$.fragment),A(t,"slot","info-row"),A(t,"class","c-agent-info-row svelte-12lv7h")},m(s,c){x(s,t,c),w(n,t,null),O(t,e),w(o,t,null),r=!0},p(s,c){const a={};263172&c&&(a.$$scope={dirty:c,ctx:s}),n.$set(a);const l={};262180&c&&(l.$$scope={dirty:c,ctx:s}),o.$set(l)},i(s){r||(d(n.$$.fragment,s),d(o.$$.fragment,s),r=!0)},o(s){$(n.$$.fragment,s),$(o.$$.fragment,s),r=!1},d(s){s&&b(t),y(n),y(o)}}}function tA(i){let t,n,e,o;Nn(i[15]);let r=i[0]&&e$(i);return{c(){r&&r.c(),t=mt()},m(s,c){r&&r.m(s,c),x(s,t,c),n=!0,e||(o=Lt(window,"resize",i[15]),e=!0)},p(s,[c]){s[0]?r?(r.p(s,c),1&c&&d(r,1)):(r=e$(s),r.c(),d(r,1),r.m(t.parentNode,t)):r&&(j(),$(r,1,1,()=>{r=null}),q())},i(s){n||(d(r),n=!0)},o(s){$(r),n=!1},d(s){s&&b(t),r&&r.d(s),e=!1,o()}}}function eA(i,t,n){let e,o,r,s,c,a,l,u,f,m,p=0;const _=St(Tn.key);Et(i,_,C=>n(14,m=C));let M=!1;return i.$$.update=()=>{var C,T,E,R,N,Z;16384&i.$$.dirty&&n(0,e=m==null?void 0:m.currentAgent),1&i.$$.dirty&&n(1,o=e==null?void 0:e.remote_agent_id),1&i.$$.dirty&&n(2,r=((E=(T=(C=e==null?void 0:e.workspace_setup)==null?void 0:C.starting_files)==null?void 0:T.github_commit_ref)==null?void 0:E.repository_url)||""),4&i.$$.dirty&&n(10,s=Es(r)),1&i.$$.dirty&&n(6,c=(e==null?void 0:e.title)??(e==null?void 0:e.session_summary)??""),1&i.$$.dirty&&n(9,a=(e==null?void 0:e.is_setup_script_agent)||!1),16386&i.$$.dirty&&n(7,l=o&&(m==null?void 0:m.pinnedAgents[o])||!1),16384&i.$$.dirty&&n(8,u=m==null?void 0:m.isRemoteAgentSshWindow),1&i.$$.dirty&&n(5,f=(Z=(N=(R=e==null?void 0:e.workspace_setup)==null?void 0:R.starting_files)==null?void 0:N.github_commit_ref)==null?void 0:Z.git_ref)},[e,o,r,p,M,f,c,l,u,a,s,_,function(){o&&(_==null||_.toggleAgentPinned(o,l))},async function(C){if(C.trim()&&C!==c&&o)try{_&&await _.updateRemoteAgentTitle(o,C)}catch(T){console.error("Failed to update remote agent title:",T)}},m,function(){n(3,p=window.innerHeight)},function(C){M=C,n(4,M)},function(C){M=C,n(4,M)}]}class nA extends ut{constructor(t){super(),dt(this,t,eA,tA,ct,{})}}function oA(i){let t,n;return t=new Z$({}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function rA(i){let t,n;return t=new Dp({}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function iA(i){let t,n,e,o;const r=[rA,oA],s=[];function c(a,l){return a[1]?0:1}return t=c(i),n=s[t]=r[t](i),{c(){n.c(),e=mt()},m(a,l){s[t].m(a,l),x(a,e,l),o=!0},p(a,l){let u=t;t=c(a),t!==u&&(j(),$(s[u],1,1,()=>{s[u]=null}),q(),n=s[t],n||(n=s[t]=r[t](a),n.c()),d(n,1),n.m(e.parentNode,e))},i(a){o||(d(n),o=!0)},o(a){$(n),o=!1},d(a){a&&b(e),s[t].d(a)}}}function s$(i){var e;let t,n;return t=new rm({props:{thread:i[4],type:i[1]?"localAgent":"chat",enableShareService:(e=i[2].flags)==null?void 0:e.enableShareService,onRename:i[8]}}),{c(){v(t.$$.fragment)},m(o,r){w(t,o,r),n=!0},p(o,r){var c;const s={};16&r&&(s.thread=o[4]),2&r&&(s.type=o[1]?"localAgent":"chat"),4&r&&(s.enableShareService=(c=o[2].flags)==null?void 0:c.enableShareService),t.$set(s)},i(o){n||(d(t.$$.fragment,o),n=!0)},o(o){$(t.$$.fragment,o),n=!1},d(o){y(t,o)}}}function sA(i){let t,n,e=!i[5]&&s$(i);return{c(){t=L("div"),e&&e.c(),A(t,"slot","title-actions"),A(t,"class","c-thread-header__menu")},m(o,r){x(o,t,r),e&&e.m(t,null),n=!0},p(o,r){o[5]?e&&(j(),$(e,1,1,()=>{e=null}),q()):e?(e.p(o,r),32&r&&d(e,1)):(e=s$(o),e.c(),d(e,1),e.m(t,null))},i(o){n||(d(e),n=!0)},o(o){$(e),n=!1},d(o){o&&b(t),e&&e.d()}}}function aA(i){let t,n,e;function o(s){i[12](s)}let r={onRename:i[7],title:i[0],$$slots:{"title-actions":[sA],icon:[iA]},$$scope:{ctx:i}};return i[3]!==void 0&&(r.isEditing=i[3]),t=new mm({props:r}),te.push(()=>Te(t,"isEditing",o)),{c(){v(t.$$.fragment)},m(s,c){w(t,s,c),e=!0},p(s,[c]){const a={};1&c&&(a.title=s[0]),16438&c&&(a.$$scope={dirty:c,ctx:s}),!n&&8&c&&(n=!0,a.isEditing=s[3],Re(()=>n=!1)),t.$set(a)},i(s){e||(d(t.$$.fragment,s),e=!0)},o(s){$(t.$$.fragment,s),e=!1},d(s){y(t,s)}}}function cA(i,t,n){let e,o,r,s,c,a,l,u;const f=St("chatModel");Et(i,f,p=>n(2,u=p));let m=!1;return i.$$.update=()=>{var p,_;4&i.$$.dirty&&n(11,e=u.currentConversationModel),2048&i.$$.dirty&&n(5,o=Sn.isNew(e)),4&i.$$.dirty&&n(10,r=u.currentConversationId||""),2048&i.$$.dirty&&n(1,s=((p=e==null?void 0:e.extraData)==null?void 0:p.isAgentConversation)===!0),1028&i.$$.dirty&&n(9,c=u.conversations[r]),514&i.$$.dirty&&n(0,a=(c==null?void 0:c.name)||((_=((c==null?void 0:c.chatHistory)||[]).find(M=>M.request_message))==null?void 0:_.request_message)||""||"New "+(s?"Agent":"Chat")),1539&i.$$.dirty&&n(4,l={id:r,type:s?"localAgent":"chat",title:a,isPinned:(c==null?void 0:c.isPinned)||!1,conversation:{id:r,isShareable:(c==null?void 0:c.isShareable)||!1}})},[a,s,u,m,l,o,f,function(p){f.renameConversation(r,p)},function(){setTimeout(()=>{n(3,m=!0)},10)},c,r,e,function(p){m=p,n(3,m)}]}class lA extends ut{constructor(t){super(),dt(this,t,cA,aA,ct,{})}}function uA(i){let t,n;return t=new lA({}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function dA(i){let t,n;return t=new nA({}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function $A(i){let t,n,e,o;const r=[dA,uA],s=[];function c(a,l){var u;return(u=a[1])!=null&&u.isActive?0:a[0]?1:-1}return~(t=c(i))&&(n=s[t]=r[t](i)),{c(){n&&n.c(),e=mt()},m(a,l){~t&&s[t].m(a,l),x(a,e,l),o=!0},p(a,[l]){let u=t;t=c(a),t!==u&&(n&&(j(),$(s[u],1,1,()=>{s[u]=null}),q()),~t?(n=s[t],n||(n=s[t]=r[t](a),n.c()),d(n,1),n.m(e.parentNode,e)):n=null)},i(a){o||(d(n),o=!0)},o(a){$(n),o=!1},d(a){a&&b(e),~t&&s[t].d(a)}}}function fA(i,t,n){let e,o,r;const s=St(Tn.key);Et(i,s,a=>n(1,r=a));const c=St("chatModel");return Et(i,c,a=>n(4,o=a)),i.$$.update=()=>{16&i.$$.dirty&&n(0,e=o.currentConversationId)},[e,r,s,c,o]}class mA extends ut{constructor(t){super(),dt(this,t,fA,$A,ct,{})}}function pA(i){let t,n,e;return t=new zo({props:{iconName:"play_arrow"}}),{c(){v(t.$$.fragment),n=G(`
    Feedback`)},m(o,r){w(t,o,r),x(o,n,r),e=!0},p:P,i(o){e||(d(t.$$.fragment,o),e=!0)},o(o){$(t.$$.fragment,o),e=!1},d(o){o&&b(n),y(t,o)}}}function gA(i){let t,n,e,o,r,s;function c(l){i[3](l)}let a={disabled:i[1],variant:"surface",size:2};return i[0]!==void 0&&(a.value=i[0]),n=new nr({props:a}),te.push(()=>Te(n,"value",c)),n.$on("keydown",i[2]),r=new he({props:{disabled:!i[0]||i[1],size:2,variant:"solid",color:"accent",$$slots:{default:[pA]},$$scope:{ctx:i}}}),r.$on("click",i[4]),{c(){t=L("div"),v(n.$$.fragment),o=U(),v(r.$$.fragment),A(t,"class","simple-input-container svelte-16gfgo6")},m(l,u){x(l,t,u),w(n,t,null),O(t,o),w(r,t,null),s=!0},p(l,[u]){const f={};2&u&&(f.disabled=l[1]),!e&&1&u&&(e=!0,f.value=l[0],Re(()=>e=!1)),n.$set(f);const m={};3&u&&(m.disabled=!l[0]||l[1]),128&u&&(m.$$scope={dirty:u,ctx:l}),r.$set(m)},i(l){s||(d(n.$$.fragment,l),d(r.$$.fragment,l),s=!0)},o(l){$(n.$$.fragment,l),$(r.$$.fragment,l),s=!1},d(l){l&&b(t),y(n),y(r)}}}function hA(i,t,n){const e=St("autofixConversationModel");if(!e)throw new Error("AutofixConversationModel not found in context");let o="",r=!1;async function s(c){if(c.shiftKey||c.ctrlKey||c.metaKey)return!1;if(c.stopPropagation(),c.key==="Enter"&&o.length>0){n(1,r=!0);try{await e.handleUserSteering(o)}finally{n(1,r=!1)}return n(0,o=""),!0}return c.key==="Escape"}return ro(()=>{const c=document.querySelector("input");c&&(c.focus(),c.select())}),[o,r,s,function(c){o=c,n(0,o)},()=>s(new KeyboardEvent("keydown",{key:"Enter"}))]}class vA extends ut{constructor(t){super(),dt(this,t,hA,gA,ct,{})}}function a$(i){let t,n,e;return n=new Pt({props:{class:"full-width-button",content:i[0],triggerOn:[Zt.Hover],$$slots:{default:[yA]},$$scope:{ctx:i}}}),{c(){t=L("div"),v(n.$$.fragment),A(t,"class","create-agent-footer svelte-34my2")},m(o,r){x(o,t,r),w(n,t,null),e=!0},p(o,r){const s={};1&r&&(s.content=o[0]),131084&r&&(s.$$scope={dirty:r,ctx:o}),n.$set(s)},i(o){e||(d(n.$$.fragment,o),e=!0)},o(o){$(n.$$.fragment,o),e=!1},d(o){o&&b(t),y(n)}}}function wA(i){let t;return{c(){t=G("Create agent")},m(n,e){x(n,t,e)},d(n){n&&b(t)}}}function yA(i){let t,n;return t=new he({props:{variant:"solid",color:"accent",size:2,loading:i[3],disabled:i[2],$$slots:{default:[wA]},$$scope:{ctx:i}}}),t.$on("click",i[5]),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};8&o&&(r.loading=e[3]),4&o&&(r.disabled=e[2]),131072&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function bA(i){let t,n,e=i[1]&&a$(i);return{c(){e&&e.c(),t=mt()},m(o,r){e&&e.m(o,r),x(o,t,r),n=!0},p(o,[r]){o[1]?e?(e.p(o,r),2&r&&d(e,1)):(e=a$(o),e.c(),d(e,1),e.m(t.parentNode,t)):e&&(j(),$(e,1,1,()=>{e=null}),q())},i(o){n||(d(e),n=!0)},o(o){$(e),n=!1},d(o){o&&b(t),e&&e.d(o)}}}function xA(i,t,n){let e,o,r,s,c,a,l,u,f,m,p,_;const M=St(Tn.key);Et(i,M,R=>n(12,_=R));const C=St(hr.key),T=St("chatModel"),E=Hf(M,T.currentConversationModel,C);return i.$$.update=()=>{var R,N,Z;4096&i.$$.dirty&&n(8,e=((R=_.newAgentDraft)==null?void 0:R.commitRef)??null),4096&i.$$.dirty&&n(7,o=((N=_.newAgentDraft)==null?void 0:N.selectedBranch)??null),4096&i.$$.dirty&&(r=((Z=_.newAgentDraft)==null?void 0:Z.setupScript)??null),4096&i.$$.dirty&&n(3,s=_.isCreatingAgent),4096&i.$$.dirty&&n(11,c=!!_.maxRemoteAgents&&_.agentOverviews.length>=_.maxRemoteAgents),4096&i.$$.dirty&&n(10,a=!!_.maxActiveRemoteAgents&&_.agentOverviews.filter(Q=>Q.workspace_status===ff.workspaceRunning).length>=_.maxActiveRemoteAgents),7168&i.$$.dirty&&n(9,l=c?`You have reached the maximum number of ${_.maxRemoteAgents} remote agents.`:a?`You have reached the maximum number of ${_.maxActiveRemoteAgents} active remote agents.`:""),4992&i.$$.dirty&&n(0,u=(()=>{var H;const Q=(H=e==null?void 0:e.github_commit_ref)==null?void 0:H.repository_url,X=o==null?void 0:o.name,K=_.remoteAgentCreationError;return l||K||!Q&&"Please select a repository"||!X&&"Please select a branch"||(!(Q&&X)&&Q&&X?"Loading branch data...":"")||""})()),1&i.$$.dirty&&n(2,f=!!u),4096&i.$$.dirty&&n(6,m=_.isActive&&!_.currentAgentId),64&i.$$.dirty&&n(1,p=m)},[u,p,f,s,M,async function(){try{await M.reportRemoteAgentSetupWindowEvent(gs.clickCreateAgent)}catch(R){console.error("Failed to report click create agent event:",R)}try{M.setRemoteAgentCreationError(null),E(),M.saveLastRemoteAgentSetup((e==null?void 0:e.github_commit_ref.repository_url)||null,(o==null?void 0:o.name)||null,(r==null?void 0:r.path)||null)}catch(R){console.error("Failed to create agent:",R)}},m,o,e,l,a,c,_]}class _A extends ut{constructor(t){super(),dt(this,t,xA,bA,ct,{})}}function CA(i){let t;return{c(){t=G(`Agent Auto mode allows Augment to run commands automatically on your behalf without your
        explicit approval. Changes can be destructive -- proceed with caution.`)},m(n,e){x(n,t,e)},d(n){n&&b(t)}}}function AA(i){let t;return{c(){t=G("Accept")},m(n,e){x(n,t,e)},d(n){n&&b(t)}}}function MA(i){let t;return{c(){t=G("Back to Manual Mode")},m(n,e){x(n,t,e)},d(n){n&&b(t)}}}function kA(i){let t,n,e,o,r,s,c,a;return n=new Gt({props:{size:2,$$slots:{default:[CA]},$$scope:{ctx:i}}}),r=new he({props:{size:1,variant:"solid",color:"accent",class:"c-agent-auto-mode-warning__button",$$slots:{default:[AA]},$$scope:{ctx:i}}}),r.$on("click",i[1]),c=new he({props:{size:1,variant:"solid",color:"neutral",class:"c-agent-auto-mode-warning__button",$$slots:{default:[MA]},$$scope:{ctx:i}}}),c.$on("click",i[2]),{c(){t=L("div"),v(n.$$.fragment),e=U(),o=L("div"),v(r.$$.fragment),s=U(),v(c.$$.fragment),A(o,"class","c-agent-auto-mode-warning__buttons"),A(t,"class","c-agent-auto-mode-warning__content")},m(l,u){x(l,t,u),w(n,t,null),O(t,e),O(t,o),w(r,o,null),O(o,s),w(c,o,null),a=!0},p(l,u){const f={};8&u&&(f.$$scope={dirty:u,ctx:l}),n.$set(f);const m={};8&u&&(m.$$scope={dirty:u,ctx:l}),r.$set(m);const p={};8&u&&(p.$$scope={dirty:u,ctx:l}),c.$set(p)},i(l){a||(d(n.$$.fragment,l),d(r.$$.fragment,l),d(c.$$.fragment,l),a=!0)},o(l){$(n.$$.fragment,l),$(r.$$.fragment,l),$(c.$$.fragment,l),a=!1},d(l){l&&b(t),y(n),y(r),y(c)}}}function SA(i){let t,n;return t=new Wn({props:{slot:"icon"}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p:P,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function TA(i){let t,n,e;return n=new Zn({props:{color:"warning",variant:"soft",size:1,$$slots:{icon:[SA],default:[kA]},$$scope:{ctx:i}}}),{c(){t=L("div"),v(n.$$.fragment),A(t,"class","c-agent-auto-mode-warning svelte-ffctgo")},m(o,r){x(o,t,r),w(n,t,null),e=!0},p(o,[r]){const s={};8&r&&(s.$$scope={dirty:r,ctx:o}),n.$set(s)},i(o){e||(d(n.$$.fragment,o),e=!0)},o(o){$(n.$$.fragment,o),e=!1},d(o){o&&b(t),y(n)}}}function EA(i){const t=St("agentConversationModel");return[t,()=>t.acceptAutoMode(),()=>t.rejectAutoMode()]}class IA extends ut{constructor(t){super(),dt(this,t,EA,TA,ct,{})}}const LA=i=>({}),c$=i=>({}),RA=i=>({}),l$=i=>({});function DA(i){let t;return{c(){t=G(i[0])},m(n,e){x(n,t,e)},p(n,e){1&e&&_t(t,n[0])},d(n){n&&b(t)}}}function NA(i){let t,n,e,o;const r=i[2]["left-content"],s=Yt(r,i,i[3],l$),c=s||function(u){let f,m;return f=new Gt({props:{size:1,color:"neutral",$$slots:{default:[DA]},$$scope:{ctx:u}}}),{c(){v(f.$$.fragment)},m(p,_){w(f,p,_),m=!0},p(p,_){const M={};9&_&&(M.$$scope={dirty:_,ctx:p}),f.$set(M)},i(p){m||(d(f.$$.fragment,p),m=!0)},o(p){$(f.$$.fragment,p),m=!1},d(p){y(f,p)}}}(i),a=i[2]["right-content"],l=Yt(a,i,i[3],c$);return{c(){t=L("div"),c&&c.c(),n=U(),l&&l.c(),A(t,"class",e=fr(`c-chat-input-banner c-chat-input-banner--${i[1]}`)+" svelte-125x5mm")},m(u,f){x(u,t,f),c&&c.m(t,null),O(t,n),l&&l.m(t,null),o=!0},p(u,[f]){s?s.p&&(!o||8&f)&&Kt(s,r,u,u[3],o?Jt(r,u[3],f,RA):Xt(u[3]),l$):c&&c.p&&(!o||1&f)&&c.p(u,o?f:-1),l&&l.p&&(!o||8&f)&&Kt(l,a,u,u[3],o?Jt(a,u[3],f,LA):Xt(u[3]),c$),(!o||2&f&&e!==(e=fr(`c-chat-input-banner c-chat-input-banner--${u[1]}`)+" svelte-125x5mm"))&&A(t,"class",e)},i(u){o||(d(c,u),d(l,u),o=!0)},o(u){$(c,u),$(l,u),o=!1},d(u){u&&b(t),c&&c.d(u),l&&l.d(u)}}}function PA(i,t,n){let{$$slots:e={},$$scope:o}=t,{text:r}=t,{color:s="accent"}=t;return i.$$set=c=>{"text"in c&&n(0,r=c.text),"color"in c&&n(1,s=c.color),"$$scope"in c&&n(3,o=c.$$scope)},[r,s,e,o]}class Ys extends ut{constructor(t){super(),dt(this,t,PA,NA,ct,{text:0,color:1})}}function FA(i){let t;return{c(){t=G("Upgrade Now")},m(n,e){x(n,t,e)},d(n){n&&b(t)}}}function u$(i){let t,n;return t=new Pt({props:{content:"Dismiss",triggerOn:[Zt.Hover],$$slots:{default:[zA]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};132&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function OA(i){let t,n;return t=new rr({}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function zA(i){let t,n;return t=new fe({props:{size:1,variant:"ghost-block",color:"neutral","data-testid":"dismiss-subscription-warning-button",$$slots:{default:[OA]},$$scope:{ctx:i}}}),t.$on("click",function(){Ne(i[2])&&i[2].apply(this,arguments)}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){i=e;const r={};128&o&&(r.$$scope={dirty:o,ctx:i}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function BA(i){let t,n,e,o,r;e=new he({props:{size:1,variant:"solid",color:i[4]?"error":"warning","data-testid":"subscription-page-button",$$slots:{default:[FA]},$$scope:{ctx:i}}}),e.$on("click",i[5]);let s=!i[0]&&!i[1]&&u$(i);return{c(){t=L("div"),n=L("div"),v(e.$$.fragment),o=U(),s&&s.c(),A(n,"class","l-subscription-warning__upgrade-btn svelte-1m82ryz"),Mt(n,"is-error",i[4]),A(t,"class","l-subscription-warning__right svelte-1m82ryz"),A(t,"slot","right-content")},m(c,a){x(c,t,a),O(t,n),w(e,n,null),O(t,o),s&&s.m(t,null),r=!0},p(c,a){const l={};16&a&&(l.color=c[4]?"error":"warning"),128&a&&(l.$$scope={dirty:a,ctx:c}),e.$set(l),(!r||16&a)&&Mt(n,"is-error",c[4]),c[0]||c[1]?s&&(j(),$(s,1,1,()=>{s=null}),q()):s?(s.p(c,a),3&a&&d(s,1)):(s=u$(c),s.c(),d(s,1),s.m(t,null))},i(c){r||(d(e.$$.fragment,c),d(s),r=!0)},o(c){$(e.$$.fragment,c),$(s),r=!1},d(c){c&&b(t),y(e),s&&s.d()}}}function UA(i){let t,n;return t=new Ys({props:{text:i[3],color:i[4]?"error":"warning",$$slots:{"right-content":[BA]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,[o]){const r={};8&o&&(r.text=e[3]),16&o&&(r.color=e[4]?"error":"warning"),151&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function HA(i,t,n){let e,{daysRemaining:o=null}=t,{isInactive:r=!1}=t,{usageBalanceDepleted:s=!1}=t,{onDismiss:c}=t,a="";return i.$$set=l=>{"daysRemaining"in l&&n(6,o=l.daysRemaining),"isInactive"in l&&n(0,r=l.isInactive),"usageBalanceDepleted"in l&&n(1,s=l.usageBalanceDepleted),"onDismiss"in l&&n(2,c=l.onDismiss)},i.$$.update=()=>{67&i.$$.dirty&&n(3,a=r?"Your subscription is no longer active":s?"You are out of user messages":`Your subscription expires in ${o} days`),3&i.$$.dirty&&n(4,e=r||s)},[r,s,c,a,e,function(){wn.postMessage({type:je.augmentLink,data:"https://app.augmentcode.com/account"})},o]}class jA extends ut{constructor(t){super(),dt(this,t,HA,UA,ct,{daysRemaining:6,isInactive:0,usageBalanceDepleted:1,onDismiss:2})}}function qA(i){let t,n,e,o,r,s,c;return o=new Pt({props:{content:"Yes, never show again",triggerOn:[Zt.Hover],$$slots:{default:[GA]},$$scope:{ctx:i}}}),s=new Pt({props:{content:"No, dismiss once",triggerOn:[Zt.Hover],$$slots:{default:[KA]},$$scope:{ctx:i}}}),{c(){t=L("span"),t.textContent="Never show again?",n=U(),e=L("div"),v(o.$$.fragment),r=U(),v(s.$$.fragment),A(t,"class","l-thread-length-warning__confirmation-text svelte-et9fl8"),A(e,"class","l-thread-length-warning__confirmation-buttons svelte-et9fl8")},m(a,l){x(a,t,l),x(a,n,l),x(a,e,l),w(o,e,null),O(e,r),w(s,e,null),c=!0},p(a,l){const u={};128&l&&(u.$$scope={dirty:l,ctx:a}),o.$set(u);const f={};128&l&&(f.$$scope={dirty:l,ctx:a}),s.$set(f)},i(a){c||(d(o.$$.fragment,a),d(s.$$.fragment,a),c=!0)},o(a){$(o.$$.fragment,a),$(s.$$.fragment,a),c=!1},d(a){a&&(b(t),b(n),b(e)),y(o),y(s)}}}function WA(i){let t,n,e,o;return t=new Pt({props:{content:"New Thread",triggerOn:[Zt.Hover,Zt.Click],$$slots:{default:[JA]},$$scope:{ctx:i}}}),e=new Pt({props:{content:"Dismiss",triggerOn:[Zt.Hover],$$slots:{default:[QA]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment),n=U(),v(e.$$.fragment)},m(r,s){w(t,r,s),x(r,n,s),w(e,r,s),o=!0},p(r,s){const c={};129&s&&(c.$$scope={dirty:s,ctx:r}),t.$set(c);const a={};128&s&&(a.$$scope={dirty:s,ctx:r}),e.$set(a)},i(r){o||(d(t.$$.fragment,r),d(e.$$.fragment,r),o=!0)},o(r){$(t.$$.fragment,r),$(e.$$.fragment,r),o=!1},d(r){r&&b(n),y(t,r),y(e,r)}}}function VA(i){let t,n;return t=new To({}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function GA(i){let t,n;return t=new fe({props:{size:1,variant:"ghost-block",color:"neutral","data-testid":"never-show-again-button",$$slots:{default:[VA]},$$scope:{ctx:i}}}),t.$on("click",i[3]),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};128&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function YA(i){let t,n;return t=new rr({}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function KA(i){let t,n;return t=new fe({props:{size:1,variant:"ghost-block",color:"neutral","data-testid":"cancel-confirmation-button",$$slots:{default:[YA]},$$scope:{ctx:i}}}),t.$on("click",i[4]),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};128&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function XA(i){let t,n;return t=new lm({}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function JA(i){let t,n;return t=new fe({props:{size:1,variant:"ghost-block",color:"neutral","data-testid":"new-thread-warning-button",$$slots:{default:[XA]},$$scope:{ctx:i}}}),t.$on("click",function(){Ne(i[0])&&i[0].apply(this,arguments)}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){i=e;const r={};128&o&&(r.$$scope={dirty:o,ctx:i}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function ZA(i){let t,n;return t=new rr({}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function QA(i){let t,n;return t=new fe({props:{size:1,variant:"ghost-block",color:"neutral","data-testid":"dismiss-thread-warning-button",$$slots:{default:[ZA]},$$scope:{ctx:i}}}),t.$on("click",i[2]),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};128&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function tM(i){let t,n,e,o;const r=[WA,qA],s=[];function c(a,l){return a[1]?1:0}return n=c(i),e=s[n]=r[n](i),{c(){t=L("div"),e.c(),A(t,"class","l-thread-length-warning__buttons svelte-et9fl8"),A(t,"slot","right-content")},m(a,l){x(a,t,l),s[n].m(t,null),o=!0},p(a,l){let u=n;n=c(a),n===u?s[n].p(a,l):(j(),$(s[u],1,1,()=>{s[u]=null}),q(),e=s[n],e?e.p(a,l):(e=s[n]=r[n](a),e.c()),d(e,1),e.m(t,null))},i(a){o||(d(e),o=!0)},o(a){$(e),o=!1},d(a){a&&b(t),s[n].d()}}}function eM(i){let t,n;return t=new Ys({props:{text:"Long threads can lead to worse results.",$$slots:{"right-content":[tM]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,[o]){const r={};131&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function nM(i,t,n){let{onNewThreadClick:e}=t,{onDismiss:o}=t,{onNeverShowAgain:r}=t,s=!1;return i.$$set=c=>{"onNewThreadClick"in c&&n(0,e=c.onNewThreadClick),"onDismiss"in c&&n(5,o=c.onDismiss),"onNeverShowAgain"in c&&n(6,r=c.onNeverShowAgain)},[e,s,function(){n(1,s=!0)},function(){r()},function(){o()},o,r]}class oM extends ut{constructor(t){super(),dt(this,t,nM,eM,ct,{onNewThreadClick:0,onDismiss:5,onNeverShowAgain:6})}}function rM(i){let t,n,e,o,r,s,c;return o=new Pt({props:{content:"Yes, hide for this session",triggerOn:[Zt.Hover],$$slots:{default:[aM]},$$scope:{ctx:i}}}),s=new Pt({props:{content:"No, dismiss once",triggerOn:[Zt.Hover],$$slots:{default:[lM]},$$scope:{ctx:i}}}),{c(){t=L("span"),t.textContent="Hide for this session?",n=U(),e=L("div"),v(o.$$.fragment),r=U(),v(s.$$.fragment),A(t,"class","l-conversation-history-warning__confirmation-text svelte-1py4g0t"),A(e,"class","l-conversation-history-warning__confirmation-buttons svelte-1py4g0t")},m(a,l){x(a,t,l),x(a,n,l),x(a,e,l),w(o,e,null),O(e,r),w(s,e,null),c=!0},p(a,l){const u={};128&l&&(u.$$scope={dirty:l,ctx:a}),o.$set(u);const f={};128&l&&(f.$$scope={dirty:l,ctx:a}),s.$set(f)},i(a){c||(d(o.$$.fragment,a),d(s.$$.fragment,a),c=!0)},o(a){$(o.$$.fragment,a),$(s.$$.fragment,a),c=!1},d(a){a&&(b(t),b(n),b(e)),y(o),y(s)}}}function iM(i){let t,n,e,o;return t=new Pt({props:{content:"Delete all conversations",triggerOn:[Zt.Hover,Zt.Click],$$slots:{default:[dM]},$$scope:{ctx:i}}}),e=new Pt({props:{content:"Dismiss",triggerOn:[Zt.Hover],$$slots:{default:[fM]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment),n=U(),v(e.$$.fragment)},m(r,s){w(t,r,s),x(r,n,s),w(e,r,s),o=!0},p(r,s){const c={};129&s&&(c.$$scope={dirty:s,ctx:r}),t.$set(c);const a={};128&s&&(a.$$scope={dirty:s,ctx:r}),e.$set(a)},i(r){o||(d(t.$$.fragment,r),d(e.$$.fragment,r),o=!0)},o(r){$(t.$$.fragment,r),$(e.$$.fragment,r),o=!1},d(r){r&&b(n),y(t,r),y(e,r)}}}function sM(i){let t,n;return t=new To({}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function aM(i){let t,n;return t=new fe({props:{size:1,variant:"ghost-block",color:"neutral","data-testid":"hide-conversation-history-warning-for-session-button",$$slots:{default:[sM]},$$scope:{ctx:i}}}),t.$on("click",i[3]),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};128&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function cM(i){let t,n;return t=new rr({}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function lM(i){let t,n;return t=new fe({props:{size:1,variant:"ghost-block",color:"neutral","data-testid":"cancel-conversation-history-confirmation-button",$$slots:{default:[cM]},$$scope:{ctx:i}}}),t.$on("click",i[4]),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};128&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function uM(i){let t,n;return t=new Wm({}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function dM(i){let t,n;return t=new fe({props:{size:1,variant:"ghost-block",color:"neutral","data-testid":"delete-all-history-warning-button",$$slots:{default:[uM]},$$scope:{ctx:i}}}),t.$on("click",function(){Ne(i[0])&&i[0].apply(this,arguments)}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){i=e;const r={};128&o&&(r.$$scope={dirty:o,ctx:i}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function $M(i){let t,n;return t=new rr({}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function fM(i){let t,n;return t=new fe({props:{size:1,variant:"ghost-block",color:"neutral","data-testid":"dismiss-conversation-history-warning-button",$$slots:{default:[$M]},$$scope:{ctx:i}}}),t.$on("click",i[2]),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};128&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function mM(i){let t,n,e,o;const r=[iM,rM],s=[];function c(a,l){return a[1]?1:0}return n=c(i),e=s[n]=r[n](i),{c(){t=L("div"),e.c(),A(t,"class","l-conversation-history-warning__buttons svelte-1py4g0t"),A(t,"slot","right-content")},m(a,l){x(a,t,l),s[n].m(t,null),o=!0},p(a,l){let u=n;n=c(a),n===u?s[n].p(a,l):(j(),$(s[u],1,1,()=>{s[u]=null}),q(),e=s[n],e?e.p(a,l):(e=s[n]=r[n](a),e.c()),d(e,1),e.m(t,null))},i(a){o||(d(e),o=!0)},o(a){$(e),o=!1},d(a){a&&b(t),s[n].d()}}}function pM(i){let t,n;return t=new Ys({props:{text:"Large conversation histories can lead to worse performance.",color:"warning",$$slots:{"right-content":[mM]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,[o]){const r={};131&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function gM(i,t,n){let{onDeleteAllHistory:e}=t,{onDismiss:o}=t,{onHideForSession:r}=t,s=!1;return i.$$set=c=>{"onDeleteAllHistory"in c&&n(0,e=c.onDeleteAllHistory),"onDismiss"in c&&n(5,o=c.onDismiss),"onHideForSession"in c&&n(6,r=c.onHideForSession)},[e,s,function(){n(1,s=!0)},function(){r()},function(){o()},o,r]}class hM extends ut{constructor(t){super(),dt(this,t,gM,pM,ct,{onDeleteAllHistory:0,onDismiss:5,onHideForSession:6})}}class vM{constructor(t,n,e,o){$t(this,"_disposables",[]);$t(this,"_chatHistoryCheckpoints");$t(this,"_currentCheckpoint",Le({request_id:crypto.randomUUID(),uuid:crypto.randomUUID(),chatItemType:uo.agenticCheckpointDelimiter,status:nn.draft,fromTimestamp:0,toTimestamp:Number.MAX_SAFE_INTEGER}));$t(this,"checkpoints");$t(this,"uuidToIdx");$t(this,"_targetCheckpointIdx",Le(void 0));$t(this,"targetCheckpoint");$t(this,"isTargetCheckpointLatest");$t(this,"totalCheckpointCount");$t(this,"_targetCheckpointSummary",Le([]));$t(this,"targetCheckpointSummary",ds(this._targetCheckpointSummary));$t(this,"targetCheckpointHasChanges",jn(this.targetCheckpointSummary,t=>t.some(n=>{var e,o;return(((e=n.changesSummary)==null?void 0:e.totalAddedLines)??!1)||(((o=n.changesSummary)==null?void 0:o.totalRemovedLines)??!1)})));$t(this,"_doNothingOnAgentDisabled",t=>(...n)=>{this._flagsModel.enableAgentMode&&t(...n)});$t(this,"_doNothingOnNotAgentConversation",t=>(...n)=>{if(this._flagsModel.enableAgentMode&&mn(oe(this._conversationModel)))return t(...n)});$t(this,"_refreshAgentEditsImmediate",async()=>{const t=this._targetCheckpoint;if(!t)return;const n=this._agentConversationModel?this._agentConversationModel.getBaselineTimestamp():0,e=await this.getCheckpointSummary({...t,fromTimestamp:n,toTimestamp:Number.MAX_SAFE_INTEGER});this._targetCheckpointSummary.set(e)});$t(this,"_refreshAgentEdits",Y$(this._refreshAgentEditsImmediate,500,{leading:!0,trailing:!0}));$t(this,"_revertToTimestamp",this._doNothingOnNotAgentConversation(async t=>{await this._extensionClient.revertToTimestamp(t),this.createNewCheckpoint(),this._refreshAgentEdits()}));$t(this,"maybeCreateOriginalCheckpoint",this._doNothingOnNotAgentConversation(()=>{const t=oe(this._conversationModel);t.chatHistory.some(Fa)||(Sn.isEmpty(t)||Sn.isNew(t))&&oe(this.checkpoints).length===0&&this.createNewCheckpoint()}));$t(this,"dispose",()=>{this._disposables.forEach(t=>t.dispose())});this._flagsModel=t,this._conversationModel=n,this._extensionClient=e,this._agentConversationModel=o,this._chatHistoryCheckpoints=jn([this._conversationModel],([r],s)=>{var a,l,u,f;const c=r.chatHistory.filter(Fa);(c==null?void 0:c.length)===((a=oe(this._chatHistoryCheckpoints))==null?void 0:a.length)&&((l=c==null?void 0:c.at(-1))==null?void 0:l.uuid)===((f=(u=oe(this._chatHistoryCheckpoints))==null?void 0:u.at(-1))==null?void 0:f.uuid)||(this._currentCheckpoint.update(m=>{var p;return{...m,fromTimestamp:((p=c.at(-1))==null?void 0:p.toTimestamp)??0,toTimestamp:Number.MAX_SAFE_INTEGER}}),s(c))}),this.checkpoints=jn([this._chatHistoryCheckpoints,this._currentCheckpoint],([r,s])=>[...r,s].filter(c=>c.status!==nn.draft)),this.totalCheckpointCount=jn(this.checkpoints,r=>r.length),this.uuidToIdx=jn(this.checkpoints,r=>new Map(r.map((s,c)=>[s.uuid,c]))),this.targetCheckpoint=jn([this.targetCheckpointIdx,this.checkpoints],([r,s])=>s.at(r??-1)),this.isTargetCheckpointLatest=jn([this.targetCheckpointIdx,this.checkpoints],([r,s])=>r===s.length-1||r===void 0),[this._conversationModel.onSendExchange(this._doNothingOnNotAgentConversation(()=>{oe(this._currentCheckpoint).status===nn.draft&&this._currentCheckpoint.update(r=>({...r,status:nn.sent}))})),this.targetCheckpoint.subscribe(this._doNothingOnAgentDisabled(()=>{this._refreshAgentEdits()})),this.checkpoints.subscribe(this._doNothingOnAgentDisabled(()=>{oe(this.isTargetCheckpointLatest)&&this._refreshAgentEdits()})),this._conversationModel.onNewConversation(()=>{this.targetCheckpointIdx.set(void 0),this._targetCheckpointSummary.set([]),this._refreshAgentEdits()}),this._conversationModel.onSendExchange(this._doNothingOnAgentDisabled(()=>this.targetCheckpointIdx.set(void 0)))].forEach(r=>{this._disposables.push({dispose:r})})}registerAgentConversationModel(t){this._agentConversationModel=t}get targetCheckpointIdx(){return{subscribe:this._targetCheckpointIdx.subscribe,set:()=>this._targetCheckpointIdx.set(void 0),update:()=>this._targetCheckpointIdx.set(void 0)}}get currentCheckpoint(){return this._currentCheckpoint}get _checkpoints(){return oe(this.checkpoints)}get _targetCheckpoint(){return oe(this.targetCheckpoint)}getCheckpointIdxForTimestamp(t){return this._checkpoints.findIndex(n=>n.fromTimestamp<=t&&n.toTimestamp>=t)}getCheckpointAtIdx(t){return this._checkpoints.at(t)}createNewCheckpoint(t={}){const n=oe(this._currentCheckpoint),e=Date.now(),o={...n,status:nn.success,toTimestamp:e,...t};this._currentCheckpoint.set({request_id:crypto.randomUUID(),uuid:crypto.randomUUID(),chatItemType:uo.agenticCheckpointDelimiter,status:nn.draft,fromTimestamp:e,toTimestamp:Number.MAX_SAFE_INTEGER}),this._conversationModel.addChatItem(o)}async getCheckpointSummary(t){return(await this._extensionClient.getAgentEditList(t.fromTimestamp,t.toTimestamp)).edits}async getCheckpointIdxSummary(t){const n=this._checkpoints.at(t);return n?this.getCheckpointSummary(n):[]}async revertToCheckpoint(t){const n=oe(this.uuidToIdx).get(t);if(n===void 0)return!1;const e=this._checkpoints.at(n);if(!e)return!1;const o=oe(this._conversationModel).id,r=await this._extensionClient.revertToTimestamp(e.toTimestamp);return(r||oe(this._conversationModel).id===o)&&this.createNewCheckpoint({revertTarget:{uuid:t}}),r}async revertDocumentToTimestamp(t,n){const e=oe(this._conversationModel).id,o=await this._extensionClient.revertToTimestamp(n,[t]);return o&&oe(this._conversationModel).id===e&&this.createNewCheckpoint({revertTarget:{filePath:t}}),o}async acceptAll(){const t=this._checkpoints.at(-1);if(t){const n=t.toTimestamp;return mn(oe(this._conversationModel))&&this._agentConversationModel&&this._agentConversationModel.updateBaselineTimestamp(n),await this._extensionClient.acceptAllAgentEdits(),this._refreshAgentEdits(),!0}return!1}async rejectAll(){var n;const t=await this._extensionClient.openConfirmationModal({title:"Discard All Changes",message:"Are you sure you want to discard all changes? This will apply to all changes whether made by the agent or yourself.",confirmButtonText:"Discard",cancelButtonText:"Cancel"});if(t){const e=((n=this._agentConversationModel)==null?void 0:n.getBaselineTimestamp())??0;mn(oe(this._conversationModel))&&this._agentConversationModel&&this._agentConversationModel.updateBaselineTimestamp(e),await this._revertToTimestamp(e),this._refreshAgentEdits()}return t}handleMessageFromExtension(t){switch(t.data.type){case je.chatAgentEditListHasUpdates:this._refreshAgentEdits();break;case je.chatMemoryHasUpdates:Gf.notifyMemoryUpdated()}return!0}async updateBaselineTimestamp(t){mn(oe(this._conversationModel))&&this._agentConversationModel&&(this._agentConversationModel.updateBaselineTimestamp(t),this._refreshAgentEdits())}}function Pi(i){const t=Object.prototype.toString.call(i);return i instanceof Date||typeof i=="object"&&t==="[object Date]"?new i.constructor(+i):typeof i=="number"||t==="[object Number]"||typeof i=="string"||t==="[object String]"?new Date(i):new Date(NaN)}const wM=864e5;function d$(i){const t=Pi(i);return t.setHours(0,0,0,0),t}function $$(i){const t=Pi(i),n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return n.setUTCFullYear(t.getFullYear()),+i-+n}function yM(i,t){const n=Pi(i),e=Pi(t),o=f$(n,e),r=Math.abs(function(c,a){const l=d$(c),u=d$(a),f=+l-$$(l),m=+u-$$(u);return Math.round((f-m)/wM)}(n,e));n.setDate(n.getDate()-o*r);const s=o*(r-+(f$(n,e)===-o));return s===0?0:s}function f$(i,t){const n=i.getFullYear()-t.getFullYear()||i.getMonth()-t.getMonth()||i.getDate()-t.getDate()||i.getHours()-t.getHours()||i.getMinutes()-t.getMinutes()||i.getSeconds()-t.getSeconds()||i.getMilliseconds()-t.getMilliseconds();return n<0?-1:n>0?1:n}const lo=class lo{constructor(t,n,e){$t(this,"pollInterval",null);$t(this,"subscriptionInfo",Le(null));$t(this,"isDismissed",Le(!1));$t(this,"dispose",()=>{this.pollInterval&&(clearInterval(this.pollInterval),this.pollInterval=null)});if(this.extensionClient=t,e!==void 0)this.isDismissed.set(e);else try{const o=localStorage.getItem(lo.localStorageKey);if(o){const{dismissed:r,timestamp:s}=JSON.parse(o),c=new Date(s),a=new Date,l=c.toDateString()!==a.toDateString();r&&!l?this.isDismissed.set(!0):localStorage.removeItem(lo.localStorageKey)}}catch(o){console.error("Failed to read from localStorage:",o)}n!==void 0?this.subscriptionInfo.set(n):(this.fetchSubscriptionInfo(),this.startPolling())}get info(){return this.subscriptionInfo}get dismissed(){return this.isDismissed}dismiss(){this.isDismissed.set(!0);try{localStorage.setItem(lo.localStorageKey,JSON.stringify({dismissed:!0,timestamp:new Date().toISOString()}))}catch(t){console.error("Failed to write to localStorage:",t)}}shouldShowWarning(t){if(t==null)return!1;if(t.type==="inactive_subscription"||t.usageBalanceDepleted)return!0;if(t.type==="active_subscription"&&t.daysRemaining!==void 0){let n=!1;return this.isDismissed.subscribe(e=>n=e)(),!n&&t.daysRemaining<=lo.warningThresholdDays}return!1}async fetchSubscriptionInfo(){try{const t=await this.extensionClient.getSubscriptionInfo(),n=this.parseSubscriptionInfo(t);this.subscriptionInfo.set(n)}catch(t){console.error("Error fetching subscription info:",t)}}parseSubscriptionInfo(t){let n,e,o="unknown";if(t.data.enterprise)o="enterprise";else if(t.data.activeSubscription){if(o="active_subscription",t.data.activeSubscription.endDate){const r=new Date(t.data.activeSubscription.endDate);r.getFullYear()>2e3&&(n=Math.max(0,yM(r,new Date)))}e=t.data.activeSubscription.usageBalanceDepleted}else t.data.inactiveSubscription&&(o="inactive_subscription");return{type:o,daysRemaining:n,usageBalanceDepleted:e}}startPolling(){this.pollInterval=setInterval(()=>{this.fetchSubscriptionInfo()},lo.pollIntervalMs)}};$t(lo,"pollIntervalMs",3e4),$t(lo,"warningThresholdDays",14),$t(lo,"localStorageKey","subscription-warning-dismissed");let ks=lo;const m$="thread-length-warning-never-show",p$="conversation-history-warning-hide-for-session";function g$(i,t,n){const e=i.slice();return e[4]=t[n],e}function h$(i){let t,n,e;return n=new Zn({props:{variant:"soft",color:"warning",size:1,$$slots:{icon:[xM],default:[bM]},$$scope:{ctx:i}}}),{c(){t=L("div"),v(n.$$.fragment),A(t,"class","c-file-warning svelte-i3ko6e")},m(o,r){x(o,t,r),w(n,t,null),e=!0},p(o,r){const s={};129&r&&(s.$$scope={dirty:r,ctx:o}),n.$set(s)},i(o){e||(d(n.$$.fragment,o),e=!0)},o(o){$(n.$$.fragment,o),e=!1},d(o){o&&b(t),y(n)}}}function v$(i){let t,n,e=i[4]+"";return{c(){t=L("div"),n=G(e),A(t,"class","c-file-warning__line svelte-i3ko6e")},m(o,r){x(o,t,r),O(t,n)},p(o,r){1&r&&e!==(e=o[4]+"")&&_t(n,e)},d(o){o&&b(t)}}}function bM(i){let t,n=se(i[0]),e=[];for(let o=0;o<n.length;o+=1)e[o]=v$(g$(i,n,o));return{c(){t=L("div");for(let o=0;o<e.length;o+=1)e[o].c();A(t,"class","c-file-warning__message svelte-i3ko6e")},m(o,r){x(o,t,r);for(let s=0;s<e.length;s+=1)e[s]&&e[s].m(t,null)},p(o,r){if(1&r){let s;for(n=se(o[0]),s=0;s<n.length;s+=1){const c=g$(o,n,s);e[s]?e[s].p(c,r):(e[s]=v$(c),e[s].c(),e[s].m(t,null))}for(;s<e.length;s+=1)e[s].d(1);e.length=n.length}},d(o){o&&b(t),pn(e,o)}}}function xM(i){let t,n;return t=new Wn({props:{slot:"icon"}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p:P,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function _M(i){let t,n,e=i[1]&&h$(i);return{c(){e&&e.c(),t=mt()},m(o,r){e&&e.m(o,r),x(o,t,r),n=!0},p(o,[r]){o[1]?e?(e.p(o,r),2&r&&d(e,1)):(e=h$(o),e.c(),d(e,1),e.m(t.parentNode,t)):e&&(j(),$(e,1,1,()=>{e=null}),q())},i(o){n||(d(e),n=!0)},o(o){$(e),n=!1},d(o){o&&b(t),e&&e.d(o)}}}function CM(i,t,n){let e,o,r,{richTextContent:s}=t;return i.$$set=c=>{"richTextContent"in c&&n(2,s=c.richTextContent)},i.$$.update=()=>{4&i.$$.dirty&&n(3,e=zf(s)),8&i.$$.dirty&&n(1,{hasWarning:o,warningMessages:r}=e,o,(n(0,r),n(3,e),n(2,s)))},[r,o,s,e]}class AM extends ut{constructor(t){super(),dt(this,t,CM,_M,ct,{richTextContent:2})}}function w$(i){let t,n;return t=new i8({props:{chatModelProp:i[34]}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p:P,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function y$(i){let t,n;return t=new mA({}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function MM(i){let t,n,e,o=i[27]&&w$(i),r=i[26]&&y$();return{c(){t=L("div"),o&&o.c(),n=U(),r&&r.c(),A(t,"class","l-chat-header svelte-196qknj")},m(s,c){x(s,t,c),o&&o.m(t,null),O(t,n),r&&r.m(t,null),e=!0},p(s,c){s[27]?o?(o.p(s,c),134217728&c[0]&&d(o,1)):(o=w$(s),o.c(),d(o,1),o.m(t,n)):o&&(j(),$(o,1,1,()=>{o=null}),q()),s[26]?r?67108864&c[0]&&d(r,1):(r=y$(),r.c(),d(r,1),r.m(t,null)):r&&(j(),$(r,1,1,()=>{r=null}),q())},i(s){e||(d(o),d(r),e=!0)},o(s){$(o),$(r),e=!1},d(s){s&&b(t),o&&o.d(),r&&r.d()}}}function b$(i){let t,n;return t=new Zb({props:{chatModel:i[34]}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p:P,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function kM(i){let t,n,e=i[25]&&b$(i);return{c(){t=L("div"),e&&e.c(),A(t,"class","l-chat-top-bars")},m(o,r){x(o,t,r),e&&e.m(t,null),n=!0},p(o,r){o[25]?e?(e.p(o,r),33554432&r[0]&&d(e,1)):(e=b$(o),e.c(),d(e,1),e.m(t,null)):e&&(j(),$(e,1,1,()=>{e=null}),q())},i(o){n||(d(e),n=!0)},o(o){$(e),n=!1},d(o){o&&b(t),e&&e.d()}}}function SM(i){let t,n;return t=new Wy({props:{chatModel:i[34],onboardingWorkspaceModel:i[41],remoteAgentsModel:i[35],slot:"message-area"}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p:P,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function TM(i){let t,n,e,o,r,s,c,a;n=new t9({props:{contextModel:i[32]}}),o=new Tg({});let l=i[21]&&x$(),u=i[9].enableAgentMode&&i[8]&&_$(i),f=i[22]&&C$(i);return{c(){t=L("div"),v(n.$$.fragment),e=U(),v(o.$$.fragment),r=U(),l&&l.c(),s=U(),u&&u.c(),c=U(),f&&f.c(),A(t,"class","l-chat-actions-area svelte-196qknj")},m(m,p){x(m,t,p),w(n,t,null),O(t,e),w(o,t,null),O(t,r),l&&l.m(t,null),O(t,s),u&&u.m(t,null),O(t,c),f&&f.m(t,null),a=!0},p(m,p){m[21]?l?2097152&p[0]&&d(l,1):(l=x$(),l.c(),d(l,1),l.m(t,s)):l&&(j(),$(l,1,1,()=>{l=null}),q()),m[9].enableAgentMode&&m[8]?u?(u.p(m,p),768&p[0]&&d(u,1)):(u=_$(m),u.c(),d(u,1),u.m(t,c)):u&&(j(),$(u,1,1,()=>{u=null}),q()),m[22]?f?(f.p(m,p),4194304&p[0]&&d(f,1)):(f=C$(m),f.c(),d(f,1),f.m(t,null)):f&&(j(),$(f,1,1,()=>{f=null}),q())},i(m){a||(d(n.$$.fragment,m),d(o.$$.fragment,m),d(l),d(u),d(f),a=!0)},o(m){$(n.$$.fragment,m),$(o.$$.fragment,m),$(l),$(u),$(f),a=!1},d(m){m&&b(t),y(n),y(o),l&&l.d(),u&&u.d(),f&&f.d()}}}function EM(i){let t,n;return t=new I7({}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p:P,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function IM(i){let t,n;return t=new u7({}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p:P,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function x$(i){let t,n;return t=new Ag({}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function _$(i){let t,n,e,o;const r=[RM,LM],s=[];function c(a,l){return a[30]?0:1}return t=c(i),n=s[t]=r[t](i),{c(){n.c(),e=mt()},m(a,l){s[t].m(a,l),x(a,e,l),o=!0},p(a,l){let u=t;t=c(a),t!==u&&(j(),$(s[u],1,1,()=>{s[u]=null}),q(),n=s[t],n||(n=s[t]=r[t](a),n.c()),d(n,1),n.m(e.parentNode,e))},i(a){o||(d(n),o=!0)},o(a){$(n),o=!1},d(a){a&&b(e),s[t].d(a)}}}function LM(i){let t,n;return t=new pC({}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function RM(i){let t,n;return t=new IA({}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function C$(i){let t,n;return t=new vg({props:{card:i[7].currentCard,flagsModel:i[9]}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};128&o[0]&&(r.card=e[7].currentCard),512&o[0]&&(r.flagsModel=e[9]),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function DM(i){let t,n,e,o,r;const s=[IM,EM,TM],c=[];function a(l,u){var f;return l[18]?0:l[5].isActive&&((f=l[5].currentAgent)!=null&&f.is_setup_script_agent)&&l[5].currentConversation?1:l[24]?2:-1}return~(t=a(i))&&(n=c[t]=s[t](i)),o=new AM({props:{richTextContent:i[11]}}),{c(){n&&n.c(),e=U(),v(o.$$.fragment)},m(l,u){~t&&c[t].m(l,u),x(l,e,u),w(o,l,u),r=!0},p(l,u){let f=t;t=a(l),t===f?~t&&c[t].p(l,u):(n&&(j(),$(c[f],1,1,()=>{c[f]=null}),q()),~t?(n=c[t],n?n.p(l,u):(n=c[t]=s[t](l),n.c()),d(n,1),n.m(e.parentNode,e)):n=null);const m={};2048&u[0]&&(m.richTextContent=l[11]),o.$set(m)},i(l){r||(d(n),d(o.$$.fragment,l),r=!0)},o(l){$(n),$(o.$$.fragment,l),r=!1},d(l){l&&b(e),~t&&c[t].d(l),y(o,l)}}}function A$(i){let t,n,e;function o(s){i[74](s)}let r={};return i[10]!==void 0&&(r.inputArea=i[10]),t=new Yy({props:r}),te.push(()=>Te(t,"inputArea",o)),t.$on("dragEnd",i[75]),{c(){v(t.$$.fragment)},m(s,c){w(t,s,c),e=!0},p(s,c){const a={};!n&&1024&c[0]&&(n=!0,a.inputArea=s[10],Re(()=>n=!1)),t.$set(a)},i(s){e||(d(t.$$.fragment,s),e=!0)},o(s){$(t.$$.fragment,s),e=!1},d(s){y(t,s)}}}function NM(i){let t,n,e=i[13]&&A$(i);return{c(){e&&e.c(),t=mt()},m(o,r){e&&e.m(o,r),x(o,t,r),n=!0},p(o,r){o[13]?e?(e.p(o,r),8192&r[0]&&d(e,1)):(e=A$(o),e.c(),d(e,1),e.m(t.parentNode,t)):e&&(j(),$(e,1,1,()=>{e=null}),q())},i(o){n||(d(e),n=!0)},o(o){$(e),n=!1},d(o){o&&b(t),e&&e.d(o)}}}function PM(i){let t,n,e,o;function r(c){i[72](c)}let s={editable:!i[30],placeholder:i[23],$$slots:{banner:[jM]},$$scope:{ctx:i}};return i[0]!==void 0&&(s.richTextEditorRoot=i[0]),n=new Zf({props:s}),te.push(()=>Te(n,"richTextEditorRoot",r)),{c(){t=L("div"),v(n.$$.fragment),A(t,"class","l-input-area-design-system svelte-196qknj"),Mt(t,"l-input-area-design-system--tall",i[17]),Mt(t,"l-input-area-design-system--shrunk",i[16]),Mt(t,"l-input-area-design-system--editor-focused",i[29]),Mt(t,"l-input-area-design-system--has-banner",i[12])},m(c,a){x(c,t,a),w(n,t,null),i[73](t),o=!0},p(c,a){const l={};1073741824&a[0]&&(l.editable=!c[30]),8388608&a[0]&&(l.placeholder=c[23]),524358&a[0]|536870912&a[2]&&(l.$$scope={dirty:a,ctx:c}),!e&&1&a[0]&&(e=!0,l.richTextEditorRoot=c[0],Re(()=>e=!1)),n.$set(l),(!o||131072&a[0])&&Mt(t,"l-input-area-design-system--tall",c[17]),(!o||65536&a[0])&&Mt(t,"l-input-area-design-system--shrunk",c[16]),(!o||536870912&a[0])&&Mt(t,"l-input-area-design-system--editor-focused",c[29]),(!o||4096&a[0])&&Mt(t,"l-input-area-design-system--has-banner",c[12])},i(c){o||(d(n.$$.fragment,c),o=!0)},o(c){$(n.$$.fragment,c),o=!1},d(c){c&&b(t),y(n),i[73](null)}}}function FM(i){let t,n;return t=new Pf({props:{borders:["top"],style:"padding-top: 0;",overflowVisible:!0,$$slots:{default:[qM]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};536870912&o[2]&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function OM(i){let t,n,e;return n=new Zf({props:{editable:!0,hasSendButton:!1}}),{c(){t=L("div"),v(n.$$.fragment),A(t,"class","l-chat-setup-area l-input-area-design-system svelte-196qknj")},m(o,r){x(o,t,r),w(n,t,null),i[69](t),e=!0},p:P,i(o){e||(d(n.$$.fragment,o),e=!0)},o(o){$(n.$$.fragment,o),e=!1},d(o){o&&b(t),y(n),i[69](null)}}}function zM(i){let t,n;return t=new Pf({props:{borders:["top"],style:"padding-top: 0;",overflowVisible:!0,$$slots:{default:[WM]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};536870912&o[2]&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function BM(i){let t,n;return t=new oM({props:{onNewThreadClick:i[71],onDismiss:i[47],onNeverShowAgain:i[48]}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p:P,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function UM(i){let t,n;return t=new hM({props:{onDeleteAllHistory:i[46],onDismiss:i[44],onHideForSession:i[45]}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p:P,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function HM(i){let t,n;return t=new jA({props:{daysRemaining:i[6].daysRemaining??null,usageBalanceDepleted:i[6].usageBalanceDepleted||!1,isInactive:i[6].type==="inactive_subscription",onDismiss:i[70]}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};64&o[0]&&(r.daysRemaining=e[6].daysRemaining??null),64&o[0]&&(r.usageBalanceDepleted=e[6].usageBalanceDepleted||!1),64&o[0]&&(r.isInactive=e[6].type==="inactive_subscription"),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function jM(i){let t,n,e,o;const r=[HM,UM,BM],s=[];function c(a,l){return a[2]&&a[6]?0:a[19]?1:a[1]?2:-1}return~(t=c(i))&&(n=s[t]=r[t](i)),{c(){n&&n.c(),e=mt()},m(a,l){~t&&s[t].m(a,l),x(a,e,l),o=!0},p(a,l){let u=t;t=c(a),t===u?~t&&s[t].p(a,l):(n&&(j(),$(s[u],1,1,()=>{s[u]=null}),q()),~t?(n=s[t],n?n.p(a,l):(n=s[t]=r[t](a),n.c()),d(n,1),n.m(e.parentNode,e)):n=null)},i(a){o||(d(n),o=!0)},o(a){$(n),o=!1},d(a){a&&b(e),~t&&s[t].d(a)}}}function qM(i){let t,n;return t=new vA({}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function WM(i){let t,n;return t=new ly({}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function VM(i){let t,n,e,o;const r=[zM,OM,FM,PM],s=[];function c(a,l){return a[3]===Jo.autofixCommand?0:a[14]?1:a[3]===Jo.autofixPrompt?2:a[14]?-1:3}return~(t=c(i))&&(n=s[t]=r[t](i)),{c(){n&&n.c(),e=mt()},m(a,l){~t&&s[t].m(a,l),x(a,e,l),o=!0},p(a,l){let u=t;t=c(a),t===u?~t&&s[t].p(a,l):(n&&(j(),$(s[u],1,1,()=>{s[u]=null}),q()),~t?(n=s[t],n?n.p(a,l):(n=s[t]=r[t](a),n.c()),d(n,1),n.m(e.parentNode,e)):n=null)},i(a){o||(d(n),o=!0)},o(a){$(n),o=!1},d(a){a&&b(e),~t&&s[t].d(a)}}}function GM(i){let t,n;return t=new _A({}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function YM(i){let t,n,e,o,r;return n=new ry({props:{$$slots:{"footer-area":[GM],"input-area":[VM],"divider-area":[NM],"actions-area":[DM],"message-area":[SM],"floating-area":[kM],"header-area":[MM]},$$scope:{ctx:i}}}),{c(){t=L("div"),v(n.$$.fragment),A(t,"class","chat svelte-196qknj")},m(s,c){x(s,t,c),w(n,t,null),e=!0,o||(r=[Lt(window,"message",i[31].onMessageFromExtension),Lt(window,"beforeunload",i[67]),Lt(window,"keydown",i[68])],o=!0)},p(s,c){const a={};1877966831&c[0]|536870912&c[2]&&(a.$$scope={dirty:c,ctx:s}),n.$set(a)},i(s){e||(d(n.$$.fragment,s),e=!0)},o(s){$(n.$$.fragment,s),e=!1},d(s){s&&b(t),y(n),o=!1,Qe(r)}}}function KM(i,t,n){let e,o,r,s,c,a,l,u,f,m,p,_,M,C,T,E,R,N,Z,Q,X,K,H,Y,V,J,rt,lt,ot,ht,it,xt,ee,At,Ht,De,Ee,un,z,S=P,F=P,tt=P;i.$$.on_destroy.push(()=>S()),i.$$.on_destroy.push(()=>F()),i.$$.on_destroy.push(()=>tt());let{initialConversation:st}=t,{initialFlags:vt}=t,{initialSubscriptionInfo:Ct}=t,{initialSubscriptionDismissed:Ft}=t;const qt=new Ui(wn);let re,Vt=new pp,ze=new T1;Et(i,ze,gt=>n(7,xt=gt)),qt.registerConsumer(ze);let Qt=new gp(qt,wn,Vt,{initialConversation:st,initialFlags:vt,onLoaded:()=>{if(Qt.flags.enableAgentMode){const gt=rt.currentChatMode;gt?gt===fs.remoteAgent&&Qt.flags.enableBackgroundAgents?Ye.handleSetToBackgroundAgent():gt===fs.agent?Ye.handleSetToAgent(oe(rt.agentExecutionMode)):Ye.handleSetToChat():Ye.handleSetToAgent(oe(rt.agentExecutionMode))}else re.setToChat()}});Et(i,Qt,gt=>n(4,rt=gt));const Ie=new hr(qt),Oe=new Tn({msgBroker:qt,isActive:!1,flagsModel:Qt.flags,host:wn,gitRefModel:Ie});Et(i,Oe,gt=>n(5,lt=gt));let Pe=new As(Qt.currentConversationModel,Qt.extensionClient,Qt,Oe);const Cn=new vM(Qt.flags,Qt.currentConversationModel,Qt.extensionClient);qt.registerConsumer(Cn),qt.registerConsumer(Qt),qt.registerConsumer(Qt.specialContextInputModel);const An=new iy(Qt.currentConversationModel,Qt.extensionClient);Et(i,An,gt=>n(64,At=gt)),qt.registerConsumer(An),re=new wg(Qt,Pe,Cn);const Be=new mo(Qt,Qt.extensionClient,Qt.currentConversationModel,re);qt.registerConsumer(Be);const{showAutoModeWarning:$n}=re;Et(i,$n,gt=>n(30,z=gt));const Ge=new Oa(qt);qt.registerConsumer(Oe),Un(Tn.key,Oe),Un(hr.key,Ie),Un(Oa.key,Ge),Un(mo.key,Be);const gn=Le(-1);Un(ef,gn);const Pn={agentOverviews:[],selectedAgentId:void 0,activeWebviews:["chat"],pinnedAgents:{}},tn=new D1(qt,Pn,_p,Cp);Et(i,tn,gt=>n(66,Ee=gt)),qt.registerConsumer(tn),Un(mf,tn);const Ye=new gr(Qt,re,Oe);qt.registerConsumer(Ye),Un(gr.key,Ye),Qt.setChatModeModel(Ye);let Xe=tn.state;const Qn=new i0(Qt,re);qt.registerConsumer(Qn);const Wt=new ks(Qt.extensionClient,Ct,Ft),Fn=new E1(Qt,Qt.flags);qt.registerConsumer(Fn);const On=new R1;Mp(Qt),Un("autofixConversationModel",An),Un("agentConversationModel",re),Un("toolsWebviewModel",Pe),Un("checkpointStore",Cn),Un("slashCommandModel",Qn),Un("modelRegistry",On),Un("subscriptionModel",Wt);const zn=rt.flags;Et(i,zn,gt=>n(9,Ht=gt));const{isCurrConversationAgentic:Vn}=re;Et(i,Vn,gt=>n(8,ee=gt));let yn=0,qe=!1;const En=Wt.info;Et(i,En,gt=>n(6,ot=gt));const ve=Wt.dismissed;Et(i,ve,gt=>n(62,ht=gt)),qt.registerConsumer(new class{constructor(gt){this._agentConversationModel=gt}handleMessageFromExtension(gt){return gt.data.type===je.resetAgentOnboarding&&(this._agentConversationModel.resetOnboarding(),!0)}}(re));let fn,Bn=!1,Ve,Ue;return ro(()=>{lt.isRemoteAgentSshWindow&&lt.remoteAgentSshWindowId&&(Ye.setToRemoteAgent(lt.remoteAgentSshWindowId),Oe.setCurrentAgent(lt.remoteAgentSshWindowId),Oe.setIsActive(!0));const gt=[Pe.dispose,Oe.dispose,Wt.dispose];return()=>{gt.forEach(zt=>zt==null?void 0:zt())}}),i.$$set=gt=>{"initialConversation"in gt&&n(51,st=gt.initialConversation),"initialFlags"in gt&&n(52,vt=gt.initialFlags),"initialSubscriptionInfo"in gt&&n(53,Ct=gt.initialSubscriptionInfo),"initialSubscriptionDismissed"in gt&&n(54,Ft=gt.initialSubscriptionDismissed)},i.$$.update=()=>{var gt,zt,_e;32&i.$$.dirty[0]&&((ue,ne,ae)=>{ne&&ue.update(dn=>{if(!dn)return ae;const Tt=new Set(dn.activeWebviews);return ne.isActive?Tt.add("chat"):Tt.delete("chat"),{...dn,activeWebviews:Array.from(Tt),agentOverviews:ne.agentOverviews,selectedAgentId:ne.currentAgentId,pinnedAgents:ne.pinnedAgents}})})(tn,lt,Pn),32&i.$$.dirty[0]|16&i.$$.dirty[2]&&((ue,ne,ae,dn,Tt)=>{if(JSON.stringify(ue)!==JSON.stringify(ne.state)&&ne){const{selectedAgentId:Gn,pinnedAgents:In}=ne.state||{};Gn!==ae.currentAgentId&&(dn.extensionClient.showAugmentPanel(),ae.setIsActive(!0),Tt.setToRemoteAgent(Gn),ae.setCurrentAgent(Gn)),In&&JSON.stringify(In)!==JSON.stringify(ae.pinnedAgents)&&ae.setPinnedAgents(In)}})(Xe,Ee,lt,Qt,Ye),16&i.$$.dirty[0]&&On.registerModels(Object.entries(rt.flags.modelRegistry||{}).map(([ue,ne])=>({name:ue,id:ne}))),32&i.$$.dirty[0]&&n(60,e=!lt.isRemoteAgentSshWindow),16&i.$$.dirty[0]&&(n(28,o=rt.flagsLoaded),F(),F=ce(o,ue=>n(65,De=ue))),544&i.$$.dirty[0]&&n(61,r=Ht.doUseNewDraftFunctionality||lt.isActive),512&i.$$.dirty[0]|1610612736&i.$$.dirty[1]|8&i.$$.dirty[2]&&n(27,s=De&&Ht.fullFeatured&&e&&r),512&i.$$.dirty[0]|8&i.$$.dirty[2]&&n(26,c=De&&Ht.doUseNewDraftFunctionality&&Ht.fullFeatured),512&i.$$.dirty[0]|1610612736&i.$$.dirty[1]|8&i.$$.dirty[2]&&n(25,a=De&&!r&&Ht.fullFeatured&&e),32&i.$$.dirty[0]&&n(59,l=X$(lt)),268435456&i.$$.dirty[1]|4&i.$$.dirty[2]&&n(24,u=!At.isAutofixConversation()&&!l.doHideStatusBars),4&i.$$.dirty[2]&&n(3,f=At.isAutofixConversation()?At.shouldShowAutofixCommandInput()?Jo.autofixCommand:Jo.autofixPrompt:Jo.normal),32&i.$$.dirty[0]&&n(58,m=lt.isCreatingAgent||lt.isActive&&((gt=lt.currentAgent)==null?void 0:gt.status)===Ze.agentStarting),288&i.$$.dirty[0]|134217728&i.$$.dirty[1]&&n(23,p=m?"Remote Agent is starting":lt.isActive?lt.currentAgentId?"Ask Remote Agent to edit code, run tests, create a pull request":"Fix this bug, tackle this ticket, review comments in my pull request":ee?"Ask or instruct Augment Agent":"Ask or instruct Augment"),128&i.$$.dirty[0]&&n(22,_=xt.actions.length>0),128&i.$$.dirty[0]&&n(21,M=xt.actions.includes(Je.allActionsComplete)),16&i.$$.dirty[0]&&(n(20,C=rt.currentConversationModel.totalCharactersStore),S(),S=ce(C,ue=>n(63,it=ue))),32&i.$$.dirty[0]|16777216&i.$$.dirty[1]|2&i.$$.dirty[2]&&n(19,T=(()=>{if(function(){try{const ne=sessionStorage.getItem(p$);return!!ne&&JSON.parse(ne).hideForSession===!0}catch(ne){return console.error("Failed to read conversation history warning preference from sessionStorage:",ne),!1}}()||lt.isActive||yn>0&&Date.now()-yn<36e5)return!1;const ue=Qt.flags.conversationHistorySizeThresholdBytes/2;return it>ue})()),32&i.$$.dirty[0]|33554432&i.$$.dirty[1]|2&i.$$.dirty[2]&&n(1,E=!qe&&!function(){try{const ue=localStorage.getItem(m$);return!!ue&&JSON.parse(ue).neverShow===!0}catch(ue){return console.error("Failed to read thread length warning preference from localStorage:",ue),!1}}()&&it>6e5&&!lt.isActive),32&i.$$.dirty[0]&&n(18,R=lt.isActive&&lt.currentAgent&&!((zt=lt.currentAgent)!=null&&zt.is_setup_script_agent)),64&i.$$.dirty[0]|1&i.$$.dirty[2]&&n(2,N=!(!ot||ht)&&Wt.shouldShowWarning(ot)),32&i.$$.dirty[0]&&(ue=>{const ne=ue.isRemoteAgentSshWindow,ae=ue.remoteAgentSshWindowId;Bn===ne&&fn===ae||(Bn=ne,fn=ae,ne&&ae&&(Ye.setToRemoteAgent(ae),ue.setCurrentAgent(ae),ue.setIsActive(!0)))})(lt),32&i.$$.dirty[0]&&n(17,Z=lt.isActive),32&i.$$.dirty[0]&&n(16,Q=lt.isActive&&lt.currentAgentId),1&i.$$.dirty[0]&&(n(15,X=((_e=Ue==null?void 0:Ue.isFocused)==null?void 0:_e.call(Ue))||Le(!1)),tt(),tt=ce(X,ue=>n(29,un=ue))),32&i.$$.dirty[0]&&n(14,K=lt.isActive&&!lt.currentAgentId),8&i.$$.dirty[0]&&n(13,H=f!==Jo.autofixCommand&&f!==Jo.autofixPrompt),6&i.$$.dirty[0]&&n(12,Y=N||E),16&i.$$.dirty[0]&&n(57,V=rt.currentConversationModel.draftExchange),67108864&i.$$.dirty[1]&&n(11,J=V==null?void 0:V.rich_text_json_repr)},[Ue,E,N,f,rt,lt,ot,xt,ee,Ht,Ve,J,Y,H,K,X,Q,Z,R,T,C,M,_,p,u,a,c,s,o,un,z,qt,Vt,ze,Qt,Oe,An,$n,tn,Ye,Wt,Fn,zn,Vn,function(){n(55,yn=Date.now())},function(){(function(){try{const gt={hideForSession:!0,timestamp:new Date().toISOString()};sessionStorage.setItem(p$,JSON.stringify(gt))}catch(gt){console.error("Failed to save conversation history warning preference to sessionStorage:",gt)}})(),n(55,yn=Date.now())},async function(){const gt=Object.keys(Qt.conversations);gt.length>0&&await Qt.deleteConversations(gt)},function(){n(56,qe=!0)},function(){(function(){try{const gt={neverShow:!0,timestamp:new Date().toISOString()};localStorage.setItem(m$,JSON.stringify(gt))}catch(gt){console.error("Failed to save thread length warning preference to localStorage:",gt)}})(),n(56,qe=!0)},En,ve,st,vt,Ct,Ft,yn,qe,V,m,l,e,r,ht,it,At,De,Ee,()=>{rt.saveImmediate()},gt=>function(zt,_e,ue,ne,ae){var dn,Tt;zt.key==="Enter"&&!zt.shiftKey&&ae&&ae.isFocused&&!oe(ae.isFocused())&&ae.forceFocus(),!zt.ctrlKey&&!zt.metaKey||zt.key!=="l"||zt.shiftKey||(ne?ne.createThreadOfCurrentType():ue.isActive?ue.setCurrentAgent(void 0):(_e.setCurrentConversation(),_e.extensionClient.reportWebviewClientEvent(Qo.chatNewConversation)),zt.preventDefault()),_e.flags.enableDebugFeatures&&(zt.ctrlKey||zt.metaKey)&&zt.key==="."&&!zt.shiftKey&&ne&&(ne.toggleChatAgentMode(),zt.preventDefault()),_e.flags.enableDebugFeatures&&(zt.ctrlKey||zt.metaKey)&&zt.key==="."&&zt.shiftKey&&ne&&(ne.toggleChatAgentMode(!0),zt.preventDefault()),_e.flags.enableDebugFeatures&&!ue.isActive&&((zt.ctrlKey||zt.metaKey)&&zt.shiftKey&&zt.key==="l"&&(_e.popCurrentConversation(),zt.preventDefault()),zt.altKey&&zt.code==="BracketRight"&&(_e.setCurrentConversation((dn=_e.nextConversation)==null?void 0:dn.id,!1),zt.preventDefault()),zt.altKey&&zt.code==="BracketLeft"&&(_e.setCurrentConversation((Tt=_e.previousConversation)==null?void 0:Tt.id,!1),zt.preventDefault()),(zt.ctrlKey||zt.metaKey)&&zt.key==="]"&&(_e.currentConversationModel.focusModel.focusNext(),zt.preventDefault()),(zt.ctrlKey||zt.metaKey)&&zt.key==="["&&(_e.currentConversationModel.focusModel.focusPrev(),zt.preventDefault()),zt.key==="Escape"&&(_e.currentConversationModel.focusModel.setFocusIdx(void 0),zt.preventDefault()))}(gt,Qt,Oe,Ye,Ue),function(gt){te[gt?"unshift":"push"](()=>{Ve=gt,n(10,Ve)})},()=>Wt.dismiss(),()=>Qt.setCurrentConversation(),function(gt){Ue=gt,n(0,Ue)},function(gt){te[gt?"unshift":"push"](()=>{Ve=gt,n(10,Ve)})},function(gt){Ve=gt,n(10,Ve)},()=>{Q&&(Ue==null||Ue.requestFocus())}]}class XM extends ut{constructor(t){super(),dt(this,t,KM,YM,ct,{initialConversation:51,initialFlags:52,initialSubscriptionInfo:53,initialSubscriptionDismissed:54},null,[-1,-1,-1])}}function M$(i){let t,n,e,o,r,s,c,a;n=new Gt({props:{size:1,$$slots:{default:[JM]},$$scope:{ctx:i}}}),o=new Gt({props:{size:1,$$slots:{default:[ZM]},$$scope:{ctx:i}}}),s=new Gt({props:{size:1,$$slots:{default:[QM]},$$scope:{ctx:i}}});let l=i[0]!=="intellij"&&S$(i);return{c(){t=L("div"),v(n.$$.fragment),e=U(),v(o.$$.fragment),r=U(),v(s.$$.fragment),c=U(),l&&l.c(),A(t,"class","c-augment-features svelte-1jb2nyh")},m(u,f){x(u,t,f),w(n,t,null),O(t,e),w(o,t,null),O(t,r),w(s,t,null),O(t,c),l&&l.m(t,null),a=!0},p(u,f){const m={};2&f&&(m.$$scope={dirty:f,ctx:u}),n.$set(m);const p={};2&f&&(p.$$scope={dirty:f,ctx:u}),o.$set(p);const _={};3&f&&(_.$$scope={dirty:f,ctx:u}),s.$set(_),u[0]!=="intellij"?l?1&f&&d(l,1):(l=S$(u),l.c(),d(l,1),l.m(t,null)):l&&(j(),$(l,1,1,()=>{l=null}),q())},i(u){a||(d(n.$$.fragment,u),d(o.$$.fragment,u),d(s.$$.fragment,u),d(l),a=!0)},o(u){$(n.$$.fragment,u),$(o.$$.fragment,u),$(s.$$.fragment,u),$(l),a=!1},d(u){u&&b(t),y(n),y(o),y(s),l&&l.d()}}}function JM(i){let t;return{c(){t=G("Augment Features:")},m(n,e){x(n,t,e)},d(n){n&&b(t)}}}function ZM(i){let t,n,e;return{c(){t=L("a"),t.textContent="Chat",n=G(` &
      `),e=L("a"),e.textContent="Agent,",A(t,"href","https://docs.augmentcode.com/using-augment/chat"),A(t,"class","svelte-1jb2nyh"),A(e,"href","https://docs.augmentcode.com/using-augment/agent"),A(e,"class","svelte-1jb2nyh")},m(o,r){x(o,t,r),x(o,n,r),x(o,e,r)},p:P,d(o){o&&(b(t),b(n),b(e))}}}function k$(i){let t,n,e;return{c(){t=G(`,
        `),n=L("a"),n.textContent="Instructions",e=G(","),A(n,"href","https://docs.augmentcode.com/using-augment/instructions"),A(n,"class","svelte-1jb2nyh")},m(o,r){x(o,t,r),x(o,n,r),x(o,e,r)},d(o){o&&(b(t),b(n),b(e))}}}function QM(i){let t,n,e=i[0]!=="intellij"&&k$();return{c(){t=L("a"),t.textContent="Code Completions",e&&e.c(),n=mt(),A(t,"href","https://docs.augmentcode.com/using-augment/completions"),A(t,"class","svelte-1jb2nyh")},m(o,r){x(o,t,r),e&&e.m(o,r),x(o,n,r)},p(o,r){o[0]!=="intellij"?e||(e=k$(),e.c(),e.m(n.parentNode,n)):e&&(e.d(1),e=null)},d(o){o&&(b(t),b(n)),e&&e.d(o)}}}function S$(i){let t,n;return t=new Gt({props:{size:1,$$slots:{default:[tk]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function tk(i){let t;return{c(){t=L("a"),t.textContent="Next Edit",A(t,"href","https://docs.augmentcode.com/using-augment/next-edit"),A(t,"class","svelte-1jb2nyh")},m(n,e){x(n,t,e)},p:P,d(n){n&&b(t)}}}function ek(i){let t,n,e=i[0]!==void 0&&M$(i);return{c(){e&&e.c(),t=mt()},m(o,r){e&&e.m(o,r),x(o,t,r),n=!0},p(o,[r]){o[0]!==void 0?e?(e.p(o,r),1&r&&d(e,1)):(e=M$(o),e.c(),d(e,1),e.m(t.parentNode,t)):e&&(j(),$(e,1,1,()=>{e=null}),q())},i(o){n||(d(e),n=!0)},o(o){$(e),n=!1},d(o){o&&b(t),e&&e.d(o)}}}function nk(i,t,n){let{client:e}=t;return i.$$set=o=>{"client"in o&&n(0,e=o.client)},[e]}class pm extends ut{constructor(t){super(),dt(this,t,nk,ek,ct,{client:0})}}function ok(i){let t,n;return{c(){t=ie("svg"),n=ie("ellipse"),A(n,"cx","51"),A(n,"cy","4.5"),A(n,"rx","51"),A(n,"ry","4.5"),A(n,"fill","currentColor"),A(t,"width","102"),A(t,"height","9"),A(t,"viewBox","0 0 102 9"),A(t,"fill","none"),A(t,"xmlns","http://www.w3.org/2000/svg")},m(e,o){x(e,t,o),O(t,n)},p:P,i:P,o:P,d(e){e&&b(t)}}}class rk extends ut{constructor(t){super(),dt(this,t,null,ok,ct,{})}}function T$(i){let t,n,e;return n=new rk({}),{c(){t=L("div"),v(n.$$.fragment),A(t,"class","c-augment-logo-animated__shadow svelte-hwxi20")},m(o,r){x(o,t,r),w(n,t,null),e=!0},i(o){e||(d(n.$$.fragment,o),e=!0)},o(o){$(n.$$.fragment,o),e=!1},d(o){o&&b(t),y(n)}}}function ik(i){let t,n,e,o;const r=i[8].default,s=Yt(r,i,i[7],null),c=s||function(l){let u,f;return u=new d1({}),{c(){v(u.$$.fragment)},m(m,p){w(u,m,p),f=!0},i(m){f||(d(u.$$.fragment,m),f=!0)},o(m){$(u.$$.fragment,m),f=!1},d(m){y(u,m)}}}();let a=i[0]&&T$();return{c(){t=L("div"),n=L("div"),c&&c.c(),e=U(),a&&a.c(),A(n,"class","c-augment-logo-animated__icon svelte-hwxi20"),A(t,"class","c-augment-logo-animated svelte-hwxi20"),A(t,"style",i[2]),Mt(t,"c-augment-logo-animated--animated",i[1])},m(l,u){x(l,t,u),O(t,n),c&&c.m(n,null),O(t,e),a&&a.m(t,null),o=!0},p(l,[u]){s&&s.p&&(!o||128&u)&&Kt(s,r,l,l[7],o?Jt(r,l[7],u,null):Xt(l[7]),null),l[0]?a?1&u&&d(a,1):(a=T$(),a.c(),d(a,1),a.m(t,null)):a&&(j(),$(a,1,1,()=>{a=null}),q()),(!o||4&u)&&A(t,"style",l[2]),(!o||2&u)&&Mt(t,"c-augment-logo-animated--animated",l[1])},i(l){o||(d(c,l),d(a),o=!0)},o(l){$(c,l),$(a),o=!1},d(l){l&&b(t),c&&c.d(l),a&&a.d()}}}function sk(i,t,n){let e,o,{$$slots:r={},$$scope:s}=t,{heightPx:c=160}=t,{floatHeight:a=20}=t,{animationDuration:l=3}=t,{showShadow:u=!0}=t,{animated:f=!0}=t;return i.$$set=m=>{"heightPx"in m&&n(3,c=m.heightPx),"floatHeight"in m&&n(4,a=m.floatHeight),"animationDuration"in m&&n(5,l=m.animationDuration),"showShadow"in m&&n(0,u=m.showShadow),"animated"in m&&n(1,f=m.animated),"$$scope"in m&&n(7,s=m.$$scope)},i.$$.update=()=>{8&i.$$.dirty&&n(6,e=Math.round(.875*c)),120&i.$$.dirty&&n(2,o=`
    --augment-logo-height: ${c}px;
    --augment-logo-icon-size: ${e}px;
    --augment-logo-float-height: ${a}px;
    --animation-duration: ${l}s;
  `)},[u,f,o,c,a,l,e,s,r]}class gm extends ut{constructor(t){super(),dt(this,t,sk,ik,ct,{heightPx:3,floatHeight:4,animationDuration:5,showShadow:0,animated:1})}}const ak=i=>({}),E$=i=>({}),ck=i=>({}),I$=i=>({});function L$(i){let t,n;const e=i[2].logo,o=Yt(e,i,i[1],I$);return{c(){t=L("div"),o&&o.c(),A(t,"class","c-onboarding-layout__logo svelte-72kwkw")},m(r,s){x(r,t,s),o&&o.m(t,null),n=!0},p(r,s){o&&o.p&&(!n||2&s)&&Kt(o,e,r,r[1],n?Jt(e,r[1],s,ck):Xt(r[1]),I$)},i(r){n||(d(o,r),n=!0)},o(r){$(o,r),n=!1},d(r){r&&b(t),o&&o.d(r)}}}function R$(i){let t,n;const e=i[2].error,o=Yt(e,i,i[1],E$);return{c(){t=L("div"),o&&o.c(),A(t,"class","c-onboarding-layout__error svelte-72kwkw")},m(r,s){x(r,t,s),o&&o.m(t,null),n=!0},p(r,s){o&&o.p&&(!n||2&s)&&Kt(o,e,r,r[1],n?Jt(e,r[1],s,ak):Xt(r[1]),E$)},i(r){n||(d(o,r),n=!0)},o(r){$(o,r),n=!1},d(r){r&&b(t),o&&o.d(r)}}}function lk(i){let t,n,e,o,r,s=i[0].logo&&L$(i);const c=i[2].default,a=Yt(c,i,i[1],null);let l=i[0].error&&R$(i);return{c(){t=L("div"),s&&s.c(),n=U(),e=L("div"),a&&a.c(),o=U(),l&&l.c(),A(e,"class","c-onboarding-layout__content svelte-72kwkw"),A(t,"class","c-onboarding-layout svelte-72kwkw"),Mt(t,"c-onboarding-layout__has-logo",i[0].logo)},m(u,f){x(u,t,f),s&&s.m(t,null),O(t,n),O(t,e),a&&a.m(e,null),O(t,o),l&&l.m(t,null),r=!0},p(u,[f]){u[0].logo?s?(s.p(u,f),1&f&&d(s,1)):(s=L$(u),s.c(),d(s,1),s.m(t,n)):s&&(j(),$(s,1,1,()=>{s=null}),q()),a&&a.p&&(!r||2&f)&&Kt(a,c,u,u[1],r?Jt(c,u[1],f,null):Xt(u[1]),null),u[0].error?l?(l.p(u,f),1&f&&d(l,1)):(l=R$(u),l.c(),d(l,1),l.m(t,null)):l&&(j(),$(l,1,1,()=>{l=null}),q()),(!r||1&f)&&Mt(t,"c-onboarding-layout__has-logo",u[0].logo)},i(u){r||(d(s),d(a,u),d(l),r=!0)},o(u){$(s),$(a,u),$(l),r=!1},d(u){u&&b(t),s&&s.d(),a&&a.d(u),l&&l.d()}}}function uk(i,t,n){let{$$slots:e={},$$scope:o}=t;const r=W$(e);return i.$$set=s=>{"$$scope"in s&&n(1,o=s.$$scope)},[r,o,e]}class Ks extends ut{constructor(t){super(),dt(this,t,uk,lk,ct,{})}}function dk(i){let t;return{c(){t=G(i[0])},m(n,e){x(n,t,e)},p(n,e){1&e&&_t(t,n[0])},d(n){n&&b(t)}}}function $k(i){let t;return{c(){t=G(i[1])},m(n,e){x(n,t,e)},p(n,e){2&e&&_t(t,n[1])},d(n){n&&b(t)}}}function fk(i){let t,n,e,o,r;return n=new Gt({props:{size:2,weight:"bold",class:"c-sign-in__welcome",$$slots:{default:[dk]},$$scope:{ctx:i}}}),o=new Gt({props:{size:1,$$slots:{default:[$k]},$$scope:{ctx:i}}}),{c(){t=L("div"),v(n.$$.fragment),e=U(),v(o.$$.fragment),A(t,"class","c-sign-in__title svelte-yuxz62")},m(s,c){x(s,t,c),w(n,t,null),O(t,e),w(o,t,null),r=!0},p(s,[c]){const a={};5&c&&(a.$$scope={dirty:c,ctx:s}),n.$set(a);const l={};6&c&&(l.$$scope={dirty:c,ctx:s}),o.$set(l)},i(s){r||(d(n.$$.fragment,s),d(o.$$.fragment,s),r=!0)},o(s){$(n.$$.fragment,s),$(o.$$.fragment,s),r=!1},d(s){s&&b(t),y(n),y(o)}}}function mk(i,t,n){let{title:e}=t,{subtitle:o}=t;return i.$$set=r=>{"title"in r&&n(0,e=r.title),"subtitle"in r&&n(1,o=r.subtitle)},[e,o]}class hm extends ut{constructor(t){super(),dt(this,t,mk,fk,ct,{title:0,subtitle:1})}}function pk(i){let t,n,e,o,r,s;return{c(){t=ie("svg"),n=ie("g"),e=ie("path"),o=ie("defs"),r=ie("clipPath"),s=ie("rect"),A(e,"d","M16 7.99201C16 3.58042 12.416 0 8 0C3.584 0 0 3.58042 0 7.99201C0 10.4216 1.104 12.6114 2.832 14.0819C2.848 14.0979 2.864 14.0979 2.864 14.1139C3.008 14.2258 3.152 14.3377 3.312 14.4496C3.392 14.4975 3.456 14.5614 3.536 14.6254C4.816 15.4885 6.352 16 8.016 16C9.68 16 11.216 15.4885 12.496 14.6254C12.576 14.5774 12.64 14.5135 12.72 14.4655C12.864 14.3536 13.024 14.2418 13.168 14.1299C13.184 14.1139 13.2 14.1139 13.2 14.0979C14.896 12.6114 16 10.4216 16 7.99201ZM8 14.993C6.496 14.993 5.12 14.5135 3.984 13.7143C4 13.5864 4.032 13.4585 4.064 13.3307C4.16 12.979 4.304 12.6434 4.48 12.3397C4.656 12.036 4.864 11.7642 5.12 11.5245C5.36 11.2847 5.648 11.0609 5.936 10.8851C6.24 10.7093 6.56 10.5814 6.912 10.4855C7.264 10.3896 7.632 10.3417 8 10.3417C8.592 10.3417 9.136 10.4535 9.632 10.6613C10.128 10.8691 10.56 11.1568 10.928 11.5085C11.296 11.8761 11.584 12.3077 11.792 12.8032C11.904 13.0909 11.984 13.3946 12.032 13.7143C10.88 14.5135 9.504 14.993 8 14.993ZM5.552 7.59241C5.408 7.27273 5.344 6.92108 5.344 6.56943C5.344 6.21778 5.408 5.86613 5.552 5.54645C5.696 5.22677 5.888 4.93906 6.128 4.6993C6.368 4.45954 6.656 4.26773 6.976 4.12388C7.296 3.98002 7.648 3.91608 8 3.91608C8.368 3.91608 8.704 3.98002 9.024 4.12388C9.344 4.26773 9.632 4.45954 9.872 4.6993C10.112 4.93906 10.304 5.22677 10.448 5.54645C10.592 5.86613 10.656 6.21778 10.656 6.56943C10.656 6.93706 10.592 7.27273 10.448 7.59241C10.304 7.91209 10.112 8.1998 9.872 8.43956C9.632 8.67932 9.344 8.87113 9.024 9.01499C8.384 9.28671 7.6 9.28671 6.96 9.01499C6.64 8.87113 6.352 8.67932 6.112 8.43956C5.872 8.1998 5.68 7.91209 5.552 7.59241ZM12.976 12.8991C12.976 12.8671 12.96 12.8511 12.96 12.8192C12.8 12.3237 12.576 11.8442 12.272 11.4126C11.968 10.981 11.616 10.5974 11.184 10.2777C10.864 10.038 10.512 9.83017 10.144 9.67033C10.32 9.55844 10.48 9.41459 10.608 9.28671C10.848 9.04695 11.056 8.79121 11.232 8.5035C11.408 8.21579 11.536 7.91209 11.632 7.57642C11.728 7.24076 11.76 6.9051 11.76 6.56943C11.76 6.04196 11.664 5.54645 11.472 5.0989C11.28 4.65135 11.008 4.25175 10.656 3.9001C10.32 3.56444 9.904 3.29271 9.456 3.1009C9.008 2.90909 8.512 2.81319 7.984 2.81319C7.456 2.81319 6.96 2.90909 6.512 3.1009C6.064 3.29271 5.648 3.56444 5.312 3.91608C4.976 4.25175 4.704 4.66733 4.512 5.11489C4.32 5.56244 4.224 6.05794 4.224 6.58541C4.224 6.93706 4.272 7.27273 4.368 7.59241C4.464 7.92807 4.592 8.23177 4.768 8.51948C4.928 8.80719 5.152 9.06294 5.392 9.3027C5.536 9.44655 5.696 9.57443 5.872 9.68631C5.488 9.86214 5.136 10.0699 4.832 10.3097C4.416 10.6294 4.048 11.013 3.744 11.4286C3.44 11.8601 3.216 12.3237 3.056 12.8352C3.04 12.8671 3.04 12.8991 3.04 12.9151C1.776 11.6364 0.992 9.91009 0.992 7.99201C0.992 4.13986 4.144 0.991009 8 0.991009C11.856 0.991009 15.008 4.13986 15.008 7.99201C15.008 9.91009 14.224 11.6364 12.976 12.8991Z"),A(e,"fill","currentColor"),A(n,"clip-path","url(#clip0_9570_7560)"),A(s,"width","16"),A(s,"height","16"),A(s,"fill","currentColor"),A(r,"id","clip0_9570_7560"),A(t,"width","16"),A(t,"height","16"),A(t,"viewBox","0 0 16 16"),A(t,"fill","none"),A(t,"xmlns","http://www.w3.org/2000/svg")},m(c,a){x(c,t,a),O(t,n),O(n,e),O(t,o),O(o,r),O(r,s)},p:P,i:P,o:P,d(c){c&&b(t)}}}class gk extends ut{constructor(t){super(),dt(this,t,null,pk,ct,{})}}function hk(i){let t;return{c(){t=G("Sign In")},m(n,e){x(n,t,e)},d(n){n&&b(t)}}}function vk(i){let t,n;return t=new gk({props:{slot:"iconLeft"}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p:P,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function wk(i){let t,n,e,o,r,s,c;return n=new hm({props:{title:"Welcome!",subtitle:"Please sign in below."}}),o=new he({props:{variant:"solid",color:"accent","data-testid":"sign-in-button",$$slots:{iconLeft:[vk],default:[hk]},$$scope:{ctx:i}}}),o.$on("click",i[1]),s=new pm({props:{client:i[0]}}),{c(){t=L("div"),v(n.$$.fragment),e=U(),v(o.$$.fragment),r=U(),v(s.$$.fragment),A(t,"class","c-sign-in svelte-77uw5c")},m(a,l){x(a,t,l),w(n,t,null),O(t,e),w(o,t,null),O(t,r),w(s,t,null),c=!0},p(a,l){const u={};8&l&&(u.$$scope={dirty:l,ctx:a}),o.$set(u);const f={};1&l&&(f.client=a[0]),s.$set(f)},i(a){c||(d(n.$$.fragment,a),d(o.$$.fragment,a),d(s.$$.fragment,a),c=!0)},o(a){$(n.$$.fragment,a),$(o.$$.fragment,a),$(s.$$.fragment,a),c=!1},d(a){a&&b(t),y(n),y(o),y(s)}}}function yk(i){let t,n;return t=new gm({props:{slot:"logo"}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p:P,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function bk(i){let t,n,e,o;return t=new Ks({props:{$$slots:{logo:[yk],default:[wk]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(r,s){w(t,r,s),n=!0,e||(o=Lt(window,"message",i[2]),e=!0)},p(r,[s]){const c={};9&s&&(c.$$scope={dirty:s,ctx:r}),t.$set(c)},i(r){n||(d(t.$$.fragment,r),n=!0)},o(r){$(t.$$.fragment,r),n=!1},d(r){y(t,r),e=!1,o()}}}function xk(i,t,n){let e;return wn.postMessage({type:je.signInLoaded}),[e,function(){wn.postMessage({type:je.mainPanelPerformAction,data:"sign-in"})},o=>{const r=o.data;r.type===je.signInLoadedResponse&&n(0,e=r.data.client)}]}class _k extends ut{constructor(t){super(),dt(this,t,xk,bk,ct,{})}}const Ck=i=>({}),D$=i=>({slot:"icon"}),Ak=i=>({}),N$=i=>({slot:"icon"});function Mk(i){let t,n;return t=new Zn({props:{variant:"soft",size:1,color:i[0],$$slots:{icon:[Ek],default:[Tk]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};1&o&&(r.color=e[0]),74&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function kk(i){let t,n,e,o;return t=new Zn({props:{variant:"soft",size:1,color:i[0],$$slots:{default:[Ik]},$$scope:{ctx:i}}}),e=new Zn({props:{variant:"soft",size:1,color:"info",$$slots:{icon:[Rk],default:[Lk]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment),n=U(),v(e.$$.fragment)},m(r,s){w(t,r,s),x(r,n,s),w(e,r,s),o=!0},p(r,s){const c={};1&s&&(c.color=r[0]),66&s&&(c.$$scope={dirty:s,ctx:r}),t.$set(c);const a={};68&s&&(a.$$scope={dirty:s,ctx:r}),e.$set(a)},i(r){o||(d(t.$$.fragment,r),d(e.$$.fragment,r),o=!0)},o(r){$(t.$$.fragment,r),$(e.$$.fragment,r),o=!1},d(r){r&&b(n),y(t,r),y(e,r)}}}function P$(i){let t,n;return t=new fe({props:{variant:"ghost",color:"neutral",size:1,$$slots:{default:[Sk]},$$scope:{ctx:i}}}),t.$on("click",i[5]),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};64&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function Sk(i){let t,n;return t=new xr({}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function Tk(i){let t,n,e,o;n=new br({props:{markdown:i[1]}});let r=!!i[3]&&P$(i);return{c(){t=L("div"),v(n.$$.fragment),e=U(),r&&r.c(),A(t,"class","c-callout-wrapper svelte-fh6sa8")},m(s,c){x(s,t,c),w(n,t,null),O(t,e),r&&r.m(t,null),o=!0},p(s,c){const a={};2&c&&(a.markdown=s[1]),n.$set(a),s[3]?r?(r.p(s,c),8&c&&d(r,1)):(r=P$(s),r.c(),d(r,1),r.m(t,null)):r&&(j(),$(r,1,1,()=>{r=null}),q())},i(s){o||(d(n.$$.fragment,s),d(r),o=!0)},o(s){$(n.$$.fragment,s),$(r),o=!1},d(s){s&&b(t),y(n),r&&r.d()}}}function Ek(i){let t;const n=i[4].icon,e=Yt(n,i,i[6],D$);return{c(){e&&e.c()},m(o,r){e&&e.m(o,r),t=!0},p(o,r){e&&e.p&&(!t||64&r)&&Kt(e,n,o,o[6],t?Jt(n,o[6],r,Ck):Xt(o[6]),D$)},i(o){t||(d(e,o),t=!0)},o(o){$(e,o),t=!1},d(o){e&&e.d(o)}}}function Ik(i){let t,n;return t=new br({props:{markdown:i[1]}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};2&o&&(r.markdown=e[1]),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function Lk(i){let t,n;return t=new br({props:{markdown:i[2]}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};4&o&&(r.markdown=e[2]),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function Rk(i){let t;const n=i[4].icon,e=Yt(n,i,i[6],N$);return{c(){e&&e.c()},m(o,r){e&&e.m(o,r),t=!0},p(o,r){e&&e.p&&(!t||64&r)&&Kt(e,n,o,o[6],t?Jt(n,o[6],r,Ak):Xt(o[6]),N$)},i(o){t||(d(e,o),t=!0)},o(o){$(e,o),t=!1},d(o){e&&e.d(o)}}}function Dk(i){let t,n,e,o,r;const s=[kk,Mk],c=[];function a(f,m){return f[2]?0:1}n=a(i),e=c[n]=s[n](i);const l=i[4].default,u=Yt(l,i,i[6],null);return{c(){t=L("div"),e.c(),o=U(),u&&u.c(),A(t,"class","c-base-card svelte-fh6sa8")},m(f,m){x(f,t,m),c[n].m(t,null),O(t,o),u&&u.m(t,null),r=!0},p(f,[m]){let p=n;n=a(f),n===p?c[n].p(f,m):(j(),$(c[p],1,1,()=>{c[p]=null}),q(),e=c[n],e?e.p(f,m):(e=c[n]=s[n](f),e.c()),d(e,1),e.m(t,o)),u&&u.p&&(!r||64&m)&&Kt(u,l,f,f[6],r?Jt(l,f[6],m,null):Xt(f[6]),null)},i(f){r||(d(e),d(u,f),r=!0)},o(f){$(e),$(u,f),r=!1},d(f){f&&b(t),c[n].d(),u&&u.d(f)}}}function Nk(i,t,n){let{$$slots:e={},$$scope:o}=t,{color:r}=t,{description:s}=t,{callout:c}=t,{onClose:a}=t;return i.$$set=l=>{"color"in l&&n(0,r=l.color),"description"in l&&n(1,s=l.description),"callout"in l&&n(2,c=l.callout),"onClose"in l&&n(3,a=l.onClose),"$$scope"in l&&n(6,o=l.$$scope)},[r,s,c,a,e,()=>a(),o]}class Xs extends ut{constructor(t){super(),dt(this,t,Nk,Dk,ct,{color:0,description:1,callout:2,onClose:3})}}function F$(i,t,n){const e=i.slice();return e[9]=t[n].text,e[10]=t[n].action,e[11]=t[n].appearance,e}const Pk=i=>({}),O$=i=>({slot:"icon"});function Fk(i){let t,n,e=i[9]+"";return{c(){t=G(e),n=U()},m(o,r){x(o,t,r),x(o,n,r)},p(o,r){4&r&&e!==(e=o[9]+"")&&_t(t,e)},d(o){o&&(b(t),b(n))}}}function z$(i){let t,n;return t=new he({props:{size:2,variant:"solid",color:i[11]?i[11]:"accent",class:"c-btns-card__button",title:i[9],$$slots:{default:[Fk]},$$scope:{ctx:i}}}),t.$on("click",function(){return i[7](i[10])}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){i=e;const r={};4&o&&(r.color=i[11]?i[11]:"accent"),4&o&&(r.title=i[9]),260&o&&(r.$$scope={dirty:o,ctx:i}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function B$(i){let t,n;return t=new Ff({}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function Ok(i){let t,n,e,o,r=se(i[2]),s=[];for(let l=0;l<r.length;l+=1)s[l]=z$(F$(i,r,l));const c=l=>$(s[l],1,1,()=>{s[l]=null});let a=i[3]&&B$();return{c(){t=L("div");for(let l=0;l<s.length;l+=1)s[l].c();n=U(),a&&a.c(),e=mt(),A(t,"class","c-btns-card__buttons svelte-1701q2d")},m(l,u){x(l,t,u);for(let f=0;f<s.length;f+=1)s[f]&&s[f].m(t,null);x(l,n,u),a&&a.m(l,u),x(l,e,u),o=!0},p(l,u){if(36&u){let f;for(r=se(l[2]),f=0;f<r.length;f+=1){const m=F$(l,r,f);s[f]?(s[f].p(m,u),d(s[f],1)):(s[f]=z$(m),s[f].c(),d(s[f],1),s[f].m(t,null))}for(j(),f=r.length;f<s.length;f+=1)c(f);q()}l[3]?a?8&u&&d(a,1):(a=B$(),a.c(),d(a,1),a.m(e.parentNode,e)):a&&(j(),$(a,1,1,()=>{a=null}),q())},i(l){if(!o){for(let u=0;u<r.length;u+=1)d(s[u]);d(a),o=!0}},o(l){s=s.filter(Boolean);for(let u=0;u<s.length;u+=1)$(s[u]);$(a),o=!1},d(l){l&&(b(t),b(n),b(e)),pn(s,l),a&&a.d(l)}}}function zk(i){let t;const n=i[6].icon,e=Yt(n,i,i[8],O$);return{c(){e&&e.c()},m(o,r){e&&e.m(o,r),t=!0},p(o,r){e&&e.p&&(!t||256&r)&&Kt(e,n,o,o[8],t?Jt(n,o[8],r,Pk):Xt(o[8]),O$)},i(o){t||(d(e,o),t=!0)},o(o){$(e,o),t=!1},d(o){e&&e.d(o)}}}function Bk(i){let t,n;return t=new Xs({props:{color:i[1],description:i[0],callout:i[4],$$slots:{icon:[zk],default:[Ok]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,[o]){const r={};2&o&&(r.color=e[1]),1&o&&(r.description=e[0]),16&o&&(r.callout=e[4]),268&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function Uk(i,t,n){let{$$slots:e={},$$scope:o}=t,{description:r}=t,{color:s}=t,{buttons:c=[]}=t,{inProgress:a=!1}=t,{callout:l}=t;function u(f){wn.postMessage({type:je.mainPanelPerformAction,data:f})}return i.$$set=f=>{"description"in f&&n(0,r=f.description),"color"in f&&n(1,s=f.color),"buttons"in f&&n(2,c=f.buttons),"inProgress"in f&&n(3,a=f.inProgress),"callout"in f&&n(4,l=f.callout),"$$scope"in f&&n(8,o=f.$$scope)},[r,s,c,a,l,u,e,f=>u(f),o]}class Xr extends ut{constructor(t){super(),dt(this,t,Uk,Bk,ct,{description:0,color:1,buttons:2,inProgress:3,callout:4})}}function Hk(i){return{c:P,m:P,p:P,i:P,o:P,d:P}}function jk(i){let t,n;return t=new Xs({props:{color:"warning",description:"Current workspace contains your home directory. Augment cannot upload your home directory to the cloud. Please open a different workspace",$$slots:{icon:[Xk]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};8&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function qk(i){let t,n;return t=new Xs({props:{color:"warning",description:`The workspace you have opened exceeds Augment's ${i[2].maxTrackableFileCount} file upload limit. Please use a .augmentignore or .gitignore to exclude files from being uploaded, or open a smaller workspace.`,$$slots:{icon:[Jk]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};4&o&&(r.description=`The workspace you have opened exceeds Augment's ${e[2].maxTrackableFileCount} file upload limit. Please use a .augmentignore or .gitignore to exclude files from being uploaded, or open a smaller workspace.`),8&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function Wk(i){let t,n;return t=new Xr({props:{color:"neutral",description:"To provide the best quality responses, Augment will index your code in our secure cloud. Your data always stays secure and private. [Learn More](https://docs.augmentcode.com/setup-augment/workspace-indexing)",callout:i[2].userTier==="community"?"You are subscribed to the Community plan, we may use any code you share to train our AI models.":void 0,buttons:[{text:"Enable Indexing",action:"grant-sync-permission"}],$$slots:{icon:[Zk]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};4&o&&(r.callout=e[2].userTier==="community"?"You are subscribed to the Community plan, we may use any code you share to train our AI models.":void 0),8&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function Vk(i){let t,n;return t=new Xr({props:{color:"warning",description:"Codeium suggestions will collide with Augment's suggestions. Turn off Codeium to fix this.",buttons:[{text:"Disable Codeium",action:"disable-codeium"}],$$slots:{icon:[Qk]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};8&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function Gk(i){let t,n;return t=new Xr({props:{color:"warning",description:"GitHub Copilot suggestions will collide with Augment's suggestions. Turn off Copilot to fix this.",buttons:[{text:"Disable Github Copilot",action:"disable-github-copilot"}],$$slots:{icon:[tS]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};8&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function Yk(i){let t,n;return t=new Xr({props:{color:"neutral",description:"Please complete the sign-in process in your browser.",buttons:[{text:"Cancel",action:"cancel-sign-in",appearance:"neutral"}],inProgress:!0,$$slots:{icon:[eS]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};8&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function Kk(i){let t,n;return t=new Xr({props:{color:"neutral",description:"Welcome to Augment! Sign in to your existing account or create a new one to get started.",buttons:[{text:"Start using Augment",action:"sign-in"}],$$slots:{icon:[nS]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};8&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function Xk(i){let t,n;return t=new Wn({props:{slot:"icon"}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p:P,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function Jk(i){let t,n;return t=new Wn({props:{slot:"icon"}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p:P,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function Zk(i){let t,n;return t=new Bo({props:{slot:"icon"}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p:P,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function Qk(i){let t,n;return t=new Wn({props:{slot:"icon"}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p:P,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function tS(i){let t,n;return t=new Wn({props:{slot:"icon"}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p:P,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function eS(i){let t,n;return t=new Bo({props:{slot:"icon"}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p:P,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function nS(i){let t,n;return t=new Bo({props:{slot:"icon"}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p:P,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function oS(i){let t,n,e,o;const r=[Kk,Yk,Gk,Vk,Wk,qk,jk,Hk],s=[];function c(a,l){return a[0]===Je.signInRequired?0:a[0]===Vs.signInInProgress?1:a[0]===Je.disableCopilot?2:a[0]===Je.disableCodeium?3:a[0]===Je.syncingPermissionNeeded?4:a[0]===Je.workspaceTooLarge?5:a[0]===Je.uploadingHomeDir?6:a[0]===Je.allActionsComplete?7:-1}return~(t=c(i))&&(n=s[t]=r[t](i)),{c(){n&&n.c(),e=mt()},m(a,l){~t&&s[t].m(a,l),x(a,e,l),o=!0},p(a,[l]){let u=t;t=c(a),t===u?~t&&s[t].p(a,l):(n&&(j(),$(s[u],1,1,()=>{s[u]=null}),q()),~t?(n=s[t],n?n.p(a,l):(n=s[t]=r[t](a),n.c()),d(n,1),n.m(e.parentNode,e)):n=null)},i(a){o||(d(n),o=!0)},o(a){$(n),o=!1},d(a){a&&b(e),~t&&s[t].d(a)}}}function rS(i,t,n){let e,o=P,r=()=>(o(),o=ce(c,a=>n(2,e=a)),c);i.$$.on_destroy.push(()=>o());let{card:s}=t,{flagsModel:c}=t;return r(),i.$$set=a=>{"card"in a&&n(0,s=a.card),"flagsModel"in a&&r(n(1,c=a.flagsModel))},[s,c,e]}class iS extends ut{constructor(t){super(),dt(this,t,rS,oS,ct,{card:0,flagsModel:1})}}class sS{constructor(){$t(this,"subscribers",new Set);$t(this,"_actions",[]);$t(this,"_currentIndex",0);$t(this,"subscribe",t=>(this.subscribers.add(t),t(this),()=>{this.subscribers.delete(t)}))}get currentCard(){return this.actions[this._currentIndex]}notifySubscribers(){this.subscribers.forEach(t=>t(this))}get actions(){return this._actions}handleMessageFromExtension(t){const n=t.data;return n.type===je.mainPanelActions&&(this.onActionsUpdates(n.data),!0)}onActionsUpdates(t){this._actions=t,this._currentIndex=0,this.notifySubscribers()}nextAction(){this._currentIndex=(this._currentIndex+1)%this._actions.length,this.notifySubscribers()}prevAction(){this._currentIndex=(this._currentIndex-1+this._actions.length)%this._actions.length,this.notifySubscribers()}isCollapsible(t){return t===Je.allActionsComplete}}function aS(i){let t,n,e;return t=new wf({}),{c(){v(t.$$.fragment),n=G(`
        Back`)},m(o,r){w(t,o,r),x(o,n,r),e=!0},i(o){e||(d(t.$$.fragment,o),e=!0)},o(o){$(t.$$.fragment,o),e=!1},d(o){o&&b(n),y(t,o)}}}function cS(i){let t;return{c(){t=G("Index Codebase")},m(n,e){x(n,t,e)},d(n){n&&b(t)}}}function lS(i){let t;return{c(){t=G(`Indexing allows Augment to make tailored code suggestions and explain common practices or
        patterns.`)},m(n,e){x(n,t,e)},d(n){n&&b(t)}}}function uS(i){let t;return{c(){t=L("a"),t.textContent="Learn More",A(t,"href","https://docs.augmentcode.com/setup-augment/workspace-indexing"),A(t,"class","svelte-f8zg6u")},m(n,e){x(n,t,e)},p:P,d(n){n&&b(t)}}}function dS(i){let t,n,e;return n=new Gt({props:{size:1,$$slots:{default:[uS]},$$scope:{ctx:i}}}),{c(){t=G(`Your data always stays secure, private and anonymized.
        `),v(n.$$.fragment)},m(o,r){x(o,t,r),w(n,o,r),e=!0},p(o,r){const s={};4096&r&&(s.$$scope={dirty:r,ctx:o}),n.$set(s)},i(o){e||(d(n.$$.fragment,o),e=!0)},o(o){$(n.$$.fragment,o),e=!1},d(o){o&&b(t),y(n,o)}}}function $S(i){let t,n=(i[2]??U$)+"";return{c(){t=G(n)},m(e,o){x(e,t,o)},p(e,o){4&o&&n!==(n=(e[2]??U$)+"")&&_t(t,n)},d(e){e&&b(t)}}}function fS(i){let t,n;return t=new hp({props:{slot:"iconLeft"}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p:P,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function mS(i){let t,n;return t=new he({props:{variant:"outline",color:"neutral",size:2,$$slots:{iconLeft:[fS],default:[$S]},$$scope:{ctx:i}}}),t.$on("click",i[7]),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,o){const r={};4100&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function pS(i){let t;return{c(){t=G("Index Codebase")},m(n,e){x(n,t,e)},d(n){n&&b(t)}}}function gS(i){let t,n,e,o,r,s,c,a,l,u,f,m,p,_=G$(),M=_&&function(C){let T,E,R;return E=new he({props:{variant:"ghost",color:"neutral",size:1,$$slots:{default:[aS]},$$scope:{ctx:C}}}),E.$on("click",C[8]),{c(){T=L("div"),v(E.$$.fragment),A(T,"class","c-back-button-container svelte-f8zg6u")},m(N,Z){x(N,T,Z),w(E,T,null),R=!0},p(N,Z){const Q={};4096&Z&&(Q.$$scope={dirty:Z,ctx:N}),E.$set(Q)},i(N){R||(d(E.$$.fragment,N),R=!0)},o(N){$(E.$$.fragment,N),R=!1},d(N){N&&b(T),y(E)}}}(i);return e=new Gt({props:{size:2,weight:"bold",class:"c-awaiting-syncing-permission__title",$$slots:{default:[cS]},$$scope:{ctx:i}}}),s=new Gt({props:{size:1,$$slots:{default:[lS]},$$scope:{ctx:i}}}),a=new Gt({props:{size:1,$$slots:{default:[dS]},$$scope:{ctx:i}}}),u=new Pt({props:{content:"Open a new project",$$slots:{default:[mS]},$$scope:{ctx:i}}}),m=new he({props:{variant:"solid",color:"accent",size:2,disabled:!i[2]||i[3],loading:i[1],$$slots:{default:[pS]},$$scope:{ctx:i}}}),m.$on("click",i[6]),{c(){M&&M.c(),t=U(),n=L("div"),v(e.$$.fragment),o=U(),r=L("div"),v(s.$$.fragment),c=U(),v(a.$$.fragment),l=U(),v(u.$$.fragment),f=U(),v(m.$$.fragment),A(r,"class","c-awaiting-syncing-permission__text svelte-f8zg6u"),A(n,"class","c-awaiting-syncing-permission svelte-f8zg6u")},m(C,T){M&&M.m(C,T),x(C,t,T),x(C,n,T),w(e,n,null),O(n,o),O(n,r),w(s,r,null),O(r,c),w(a,r,null),O(n,l),w(u,n,null),O(n,f),w(m,n,null),p=!0},p(C,T){_&&M.p(C,T);const E={};4096&T&&(E.$$scope={dirty:T,ctx:C}),e.$set(E);const R={};4096&T&&(R.$$scope={dirty:T,ctx:C}),s.$set(R);const N={};4096&T&&(N.$$scope={dirty:T,ctx:C}),a.$set(N);const Z={};4100&T&&(Z.$$scope={dirty:T,ctx:C}),u.$set(Z);const Q={};12&T&&(Q.disabled=!C[2]||C[3]),2&T&&(Q.loading=C[1]),4096&T&&(Q.$$scope={dirty:T,ctx:C}),m.$set(Q)},i(C){p||(d(M),d(e.$$.fragment,C),d(s.$$.fragment,C),d(a.$$.fragment,C),d(u.$$.fragment,C),d(m.$$.fragment,C),p=!0)},o(C){$(M),$(e.$$.fragment,C),$(s.$$.fragment,C),$(a.$$.fragment,C),$(u.$$.fragment,C),$(m.$$.fragment,C),p=!1},d(C){C&&(b(t),b(n)),M&&M.d(C),y(e),y(s),y(a),y(u),y(m)}}}function hS(i){let t,n,e;return n=new iS({props:{card:i[0].currentCard,flagsModel:i[5]}}),{c(){t=L("div"),v(n.$$.fragment),A(t,"slot","error")},m(o,r){x(o,t,r),w(n,t,null),e=!0},p(o,r){const s={};1&r&&(s.card=o[0].currentCard),n.$set(s)},i(o){e||(d(n.$$.fragment,o),e=!0)},o(o){$(n.$$.fragment,o),e=!1},d(o){o&&b(t),y(n)}}}function vS(i){let t,n,e,o;return t=new Ks({props:{$$slots:{error:[hS],default:[gS]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(r,s){w(t,r,s),n=!0,e||(o=Lt(window,"message",i[9]),e=!0)},p(r,[s]){const c={};4111&s&&(c.$$scope={dirty:s,ctx:r}),t.$set(c)},i(r){n||(d(t.$$.fragment,r),n=!0)},o(r){$(t.$$.fragment,r),n=!1},d(r){y(t,r),e=!1,o()}}}const U$="Open a folder";function wS(i,t,n){let e;const o=new Ui(wn);let r=new sS;Et(i,r,f=>n(0,e=f)),o.registerConsumer(r);const s=new Af,c=new Mf(wn,o,s);let a,l=!1,u=!1;return wn.postMessage({type:je.awaitingSyncingPermissionLoaded}),i.$$.update=()=>{1&i.$$.dirty&&n(3,u=e.currentCard===Je.workspaceTooLarge||e.currentCard===Je.uploadingHomeDir)},[e,l,a,u,r,s,function(){n(1,l=!0),c.grantSyncPermission()},function(){c.openProjectFolder()},function(){c.closeProjectFolder()},function(f){const m=f.data;switch(m.type){case je.awaitingSyncingPermissionInitialize:{const{enableDebugFeatures:p,maxTrackableFileCount:_,userTier:M}=m.data;n(2,a=m.data.workspaceName),s.update({enableDebugFeatures:p,maxTrackableFileCount:_,userTier:M});break}case je.mainPanelActions:r.onActionsUpdates(function(p){const _=new Set([Je.workspaceNotSelected,Je.workspaceTooLarge,Je.uploadingHomeDir]);return p.filter(M=>_.has(M))}(m.data))}}]}class yS extends ut{constructor(t){super(),dt(this,t,wS,vS,ct,{})}}function bS(i){let t,n;return{c(){t=ie("svg"),n=ie("path"),A(n,"fill-rule","evenodd"),A(n,"clip-rule","evenodd"),A(n,"d","M8.14645 3.14645C8.34171 2.95118 8.65829 2.95118 8.85355 3.14645L12.8536 7.14645C13.0488 7.34171 13.0488 7.65829 12.8536 7.85355L8.85355 11.8536C8.65829 12.0488 8.34171 12.0488 8.14645 11.8536C7.95118 11.6583 7.95118 11.3417 8.14645 11.1464L11.2929 8H2.5C2.22386 8 2 7.77614 2 7.5C2 7.22386 2.22386 7 2.5 7H11.2929L8.14645 3.85355C7.95118 3.65829 7.95118 3.34171 8.14645 3.14645Z"),A(n,"fill","currentColor"),A(t,"width","15"),A(t,"height","15"),A(t,"viewBox","0 0 15 15"),A(t,"fill","none"),A(t,"xmlns","http://www.w3.org/2000/svg")},m(e,o){x(e,t,o),O(t,n)},p:P,i:P,o:P,d(e){e&&b(t)}}}class xS extends ut{constructor(t){super(),dt(this,t,null,bS,ct,{})}}function _S(i){let t,n;return{c(){t=ie("svg"),n=ie("path"),A(n,"fill-rule","evenodd"),A(n,"clip-rule","evenodd"),A(n,"d","M2 3.5C2 3.22386 2.22386 3 2.5 3H12.5C12.7761 3 13 3.22386 13 3.5V9.5C13 9.77614 12.7761 10 12.5 10H2.5C2.22386 10 2 9.77614 2 9.5V3.5ZM2 10.9146C1.4174 10.7087 1 10.1531 1 9.5V3.5C1 2.67157 1.67157 2 2.5 2H12.5C13.3284 2 14 2.67157 14 3.5V9.5C14 10.1531 13.5826 10.7087 13 10.9146V11.5C13 12.3284 12.3284 13 11.5 13H3.5C2.67157 13 2 12.3284 2 11.5V10.9146ZM12 11V11.5C12 11.7761 11.7761 12 11.5 12H3.5C3.22386 12 3 11.7761 3 11.5V11H12ZM5 6.5C5 6.22386 5.22386 6 5.5 6H7V4.5C7 4.22386 7.22386 4 7.5 4C7.77614 4 8 4.22386 8 4.5V6H9.5C9.77614 6 10 6.22386 10 6.5C10 6.77614 9.77614 7 9.5 7H8V8.5C8 8.77614 7.77614 9 7.5 9C7.22386 9 7 8.77614 7 8.5V7H5.5C5.22386 7 5 6.77614 5 6.5Z"),A(n,"fill","currentColor"),A(t,"width","15"),A(t,"height","15"),A(t,"viewBox","0 0 15 15"),A(t,"fill","none"),A(t,"xmlns","http://www.w3.org/2000/svg")},m(e,o){x(e,t,o),O(t,n)},p:P,i:P,o:P,d(e){e&&b(t)}}}class CS extends ut{constructor(t){super(),dt(this,t,null,_S,ct,{})}}function AS(i){let t;return{c(){t=G("Create a new project")},m(n,e){x(n,t,e)},d(n){n&&b(t)}}}function MS(i){let t,n;return t=new Vr({props:{slot:"iconLeft"}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p:P,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function H$(i){let t,n,e,o,r,s,c;function a(f){i[9](f)}function l(f){i[10](f)}let u={color:i[2]?"error":"neutral",placeholder:"Project Name"};return i[1]!==void 0&&(u.value=i[1]),i[3]!==void 0&&(u.textInput=i[3]),n=new nr({props:u}),te.push(()=>Te(n,"value",a)),te.push(()=>Te(n,"textInput",l)),n.$on("keydown",i[11]),s=new fe({props:{disabled:i[4],$$slots:{default:[kS]},$$scope:{ctx:i}}}),s.$on("click",i[12]),{c(){t=L("div"),v(n.$$.fragment),r=U(),v(s.$$.fragment),A(t,"class","c-folder-selection__project-name-input svelte-1hmau15")},m(f,m){x(f,t,m),w(n,t,null),O(t,r),w(s,t,null),c=!0},p(f,m){const p={};4&m&&(p.color=f[2]?"error":"neutral"),!e&&2&m&&(e=!0,p.value=f[1],Re(()=>e=!1)),!o&&8&m&&(o=!0,p.textInput=f[3],Re(()=>o=!1)),n.$set(p);const _={};16&m&&(_.disabled=f[4]),16384&m&&(_.$$scope={dirty:m,ctx:f}),s.$set(_)},i(f){c||(d(n.$$.fragment,f),d(s.$$.fragment,f),c=!0)},o(f){$(n.$$.fragment,f),$(s.$$.fragment,f),c=!1},d(f){f&&b(t),y(n),y(s)}}}function kS(i){let t,n;return t=new xS({}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function SS(i){let t;return{c(){t=G("Open a local folder")},m(n,e){x(n,t,e)},d(n){n&&b(t)}}}function TS(i){let t,n;return t=new yf({props:{slot:"iconLeft"}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p:P,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function ES(i){let t;return{c(){t=G("Clone a repository")},m(n,e){x(n,t,e)},d(n){n&&b(t)}}}function IS(i){let t,n;return t=new CS({props:{slot:"iconLeft"}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p:P,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function LS(i){let t,n,e,o,r,s,c,a,l,u,f,m,p;n=new hm({props:{title:"Welcome back!",subtitle:"Please open a project folder to begin."}}),r=new he({props:{variant:"outline",color:"neutral",size:2,alignment:"left",$$slots:{iconLeft:[MS],default:[AS]},$$scope:{ctx:i}}}),r.$on("click",i[8]);let _=i[0]&&H$(i);return a=new he({props:{variant:"outline",color:"neutral",size:2,alignment:"left",$$slots:{iconLeft:[TS],default:[SS]},$$scope:{ctx:i}}}),a.$on("click",i[6]),u=new he({props:{variant:"outline",color:"neutral",size:2,alignment:"left",$$slots:{iconLeft:[IS],default:[ES]},$$scope:{ctx:i}}}),u.$on("click",i[7]),m=new pm({}),{c(){t=L("div"),v(n.$$.fragment),e=U(),o=L("div"),v(r.$$.fragment),s=U(),_&&_.c(),c=U(),v(a.$$.fragment),l=U(),v(u.$$.fragment),f=U(),v(m.$$.fragment),A(o,"class","c-folder-selection__buttons svelte-1hmau15"),A(t,"class","c-folder-selection svelte-1hmau15")},m(M,C){x(M,t,C),w(n,t,null),O(t,e),O(t,o),w(r,o,null),O(o,s),_&&_.m(o,null),O(o,c),w(a,o,null),O(o,l),w(u,o,null),O(t,f),w(m,t,null),p=!0},p(M,C){const T={};16384&C&&(T.$$scope={dirty:C,ctx:M}),r.$set(T),M[0]?_?(_.p(M,C),1&C&&d(_,1)):(_=H$(M),_.c(),d(_,1),_.m(o,c)):_&&(j(),$(_,1,1,()=>{_=null}),q());const E={};16384&C&&(E.$$scope={dirty:C,ctx:M}),a.$set(E);const R={};16384&C&&(R.$$scope={dirty:C,ctx:M}),u.$set(R)},i(M){p||(d(n.$$.fragment,M),d(r.$$.fragment,M),d(_),d(a.$$.fragment,M),d(u.$$.fragment,M),d(m.$$.fragment,M),p=!0)},o(M){$(n.$$.fragment,M),$(r.$$.fragment,M),$(_),$(a.$$.fragment,M),$(u.$$.fragment,M),$(m.$$.fragment,M),p=!1},d(M){M&&b(t),y(n),y(r),_&&_.d(),y(a),y(u),y(m)}}}function RS(i){let t,n;return t=new gm({props:{slot:"logo"}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p:P,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function j$(i){let t,n;return t=new Zn({props:{variant:"soft",color:"error",size:1,$$slots:{icon:[NS],default:[DS]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function DS(i){let t;return{c(){t=G("Must contain only letters, numbers, hyphens, underscores, and spaces")},m(n,e){x(n,t,e)},d(n){n&&b(t)}}}function NS(i){let t,n;return t=new Wn({props:{slot:"icon"}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p:P,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function PS(i){let t,n,e=i[2]&&j$(i);return{c(){t=L("div"),e&&e.c(),A(t,"slot","error")},m(o,r){x(o,t,r),e&&e.m(t,null),n=!0},p(o,r){o[2]?e?4&r&&d(e,1):(e=j$(o),e.c(),d(e,1),e.m(t,null)):e&&(j(),$(e,1,1,()=>{e=null}),q())},i(o){n||(d(e),n=!0)},o(o){$(e),n=!1},d(o){o&&b(t),e&&e.d()}}}function FS(i){let t,n;return t=new Ks({props:{$$slots:{error:[PS],logo:[RS],default:[LS]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},p(e,[o]){const r={};16415&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function OS(i,t,n){const e=new Mf(wn,new Ui(wn),new Af);function o(u){e.createProject(u)}let r,s=!1,c="",a=!0,l=!1;return i.$$.update=()=>{7&i.$$.dirty&&(n(2,l=!/^[a-zA-Z0-9\-_ ]+$/.test(c)&&c.trim().length>0),n(4,a=!s||!c.trim().length||l))},[s,c,l,r,a,o,function(){e.openProjectFolder()},function(){e.cloneRepository()},function(){s?n(0,s=!1):(n(0,s=!0),setTimeout(()=>{r==null||r.focus()},0))},function(u){c=u,n(1,c)},function(u){r=u,n(3,r)},u=>{u.key!=="Enter"||a||(u.preventDefault(),o(c.trim()))},()=>o(c.trim())]}class zS extends ut{constructor(t){super(),dt(this,t,OS,FS,ct,{})}}function BS(i){let t,n;return t=new zS({}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function US(i){let t,n;return t=new yS({}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function HS(i){let t,n;return t=new XM({}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function jS(i){let t,n;return t=new _k({}),{c(){v(t.$$.fragment)},m(e,o){w(t,e,o),n=!0},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function qS(i){let t,n,e,o;const r=[jS,HS,US,BS],s=[];function c(a,l){return a[0]===pi.signIn?0:a[0]===pi.chat?1:a[0]===pi.awaitingSyncingPermission?2:a[0]===pi.folderSelection?3:-1}return~(n=c(i))&&(e=s[n]=r[n](i)),{c(){t=L("main"),e&&e.c()},m(a,l){x(a,t,l),~n&&s[n].m(t,null),o=!0},p(a,l){let u=n;n=c(a),n!==u&&(e&&(j(),$(s[u],1,1,()=>{s[u]=null}),q()),~n?(e=s[n],e||(e=s[n]=r[n](a),e.c()),d(e,1),e.m(t,null)):e=null)},i(a){o||(d(e),o=!0)},o(a){$(e),o=!1},d(a){a&&b(t),~n&&s[n].d()}}}function WS(i){let t,n,e,o;return t=new $1.Root({props:{$$slots:{default:[qS]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},m(r,s){w(t,r,s),n=!0,e||(o=Lt(window,"message",i[1]),e=!0)},p(r,[s]){const c={};5&s&&(c.$$scope={dirty:s,ctx:r}),t.$set(c)},i(r){n||(d(t.$$.fragment,r),n=!0)},o(r){$(t.$$.fragment,r),n=!1},d(r){y(t,r),e=!1,o()}}}function VS(i,t,n){let e;return wn.postMessage({type:je.mainPanelLoaded}),[e,o=>{const r=o.data;r.type===je.mainPanelDisplayApp&&n(0,e=r.data)}]}class GS extends ut{constructor(t){super(),dt(this,t,VS,WS,ct,{})}}(async function(){wn&&wn.initialize&&await wn.initialize(),new GS({target:document.getElementById("app")})})();export{xS as A,om as B,xv as C,Pg as D,Ei as F,ho as I,o0 as R,jT as S,l0 as a,qT as b,M4 as c,c3 as d,sm as e,WT as f};
