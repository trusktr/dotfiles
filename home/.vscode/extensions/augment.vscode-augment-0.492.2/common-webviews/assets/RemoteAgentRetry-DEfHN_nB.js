var lt=Object.defineProperty;var ut=(o,e,t)=>e in o?lt(o,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[e]=t;var ne=(o,e,t)=>ut(o,typeof e!="symbol"?e+"":e,t);import{S as Gn,T as Ue,R as qe}from"./check-56hMuF8e.js";import{R as Je,b as pe,a as Te}from"./types-DDm27S8B.js";import{g as Ye,a as dt,h as $t,b as mt,c as pt,d as gt,e as ft,f as ht,j as Ge,k as Xe,l as jn,n as Me,E as oe,o as Qe,S as vt,p as Le}from"./arrow-up-right-from-square-Yo0BPgM2.js";import{S as j,i as Z,s as W,a9 as Q,e as v,u as $,q as N,t as p,r as H,h,af as ce,ag as le,a as xe,F as en,G as M,I as C,Q as P,X as F,c as x,J as nn,K as V,L as _,f as R,a5 as te,g as je,a0 as wt,Z as K,M as k,a7 as ze,ax as xt,P as ye,R as Ce,V as _e,W as ke,n as U,ah as ge,am as Zn,a8 as yt,_ as re,a2 as Wn,$ as Pe,a1 as Be,aE as Ne,Y as tn,a6 as Kn,ab as be,a3 as fe,aj as he,T as ee,b as me,ap as Ct,ae as Yn,aA as sn,H as _t,w as kt,x as bt,y as It,d as on,z as Tt,j as rn,ac as cn,ad as Se}from"./SpinnerAugment-BEPEN2tu.js";import{M as St}from"./MaterialIcon-BGa1zPPN.js";import{o as Xn}from"./keypress-DD1aQVr0.js";import{A as an,a as Y}from"./autofix-state-d-ymFdyn.js";import{t as Rt}from"./index-CiMDylqQ.js";import{bc as Ke,bd as Et,aq as Mt,be as Lt,bf as Qn,bg as At,bh as Ft,bi as qt,bj as Ve,bk as zt}from"./AugmentMessage-DtUuYhLr.js";import{T as He}from"./Content-Bm7C6iJ1.js";import{E as Pt,a as et,b as Bt}from"./folder-DhY9vbAU.js";import{e as De,f as Nt,g as Ht,E as Dt,h as Ot,T as nt}from"./Keybindings-tA5aIx1O.js";import{c as tt,F as Ut,R as Vt,D as Jt,C as Gt,I as st,d as jt,f as Ae,e as Zt}from"./main-panel-DraraIy5.js";import{B as Oe}from"./ButtonAugment-xh-SOBaV.js";import{P as Wt,C as Kt}from"./folder-opened-BLAu3pyz.js";import{E as Yt}from"./expand-QHrAftyc.js";import{P as Xt}from"./pen-to-square-DEUxz3in.js";import{T as Ie}from"./TextTooltipAugment-DAVq7Vla.js";import{I as ve}from"./IconButtonAugment-DT9AU8SC.js";import{C as Qt,a as es,M as ns,O as ts}from"./diff-utils-CHDUdEQq.js";import{B as ot}from"./trash-can-C3k9v09A.js";import{e as Fe}from"./BaseButton-DBHsDlhs.js";import{C as ss}from"./CardAugment-RCmwRtRa.js";import{C as rt,a as ct}from"./CollapseButtonAugment-CEo2LYfW.js";import{M as os,S as rs}from"./index-oyQWDnzB.js";import{C as cs}from"./github-kew-evZ8.js";import{a as Re}from"./index-DqflzTEb.js";import{s as as}from"./utils-Rh_q5w_c.js";const is=(o,e,t,n)=>{const s={retryMessage:void 0,showGeneratingResponse:!1,showResumingRemoteAgent:!1,showAwaitingUserInput:!1,showRunningSpacer:!1,showStopped:!1,remoteAgentErrorConfig:void 0,showPaused:!1};if(e===Me.running){const r=o==null?void 0:o.lastExchange;if(r!=null&&r.isRetriable&&(r!=null&&r.display_error_message))s.retryMessage=r.display_error_message;else if(t||n.isActive){const c=n.isActive?n.getLastToolUseState():o.getLastToolUseState();if(n.isActive){const a=n.currentAgent;(a==null?void 0:a.workspace_status)===Je.workspaceResuming?s.showResumingRemoteAgent=!0:c.phase!==Ue.running?s.showGeneratingResponse=!0:s.showRunningSpacer=!0}else c.phase!==Ue.running?s.showGeneratingResponse=!0:s.showRunningSpacer=!0}else s.showGeneratingResponse=!0}else e===Me.awaitingUserAction?(s.showAwaitingUserInput=!0,s.showRunningSpacer=!0):((r,c)=>{var d;const a=(d=r==null?void 0:r.lastExchange)==null?void 0:d.status,i=a===oe.cancelled,l=r==null?void 0:r.getLastToolUseState().phase,u=l===Ue.cancelled;return!c.isActive&&(i||u)})(o,n)&&(s.showStopped=!0);if(n.isActive){const r=n.currentAgent;(r==null?void 0:r.workspace_status)===Je.workspacePaused&&(s.showPaused=!0)}return s},xc=(o,e,t,n)=>{const s=o.currentConversationModel,r=((d,m)=>m.isActive?m.getCurrentChatHistory():d.chatHistory.filter(g=>Ye(g)||dt(g)||$t(g)||mt(g)||pt(g)||gt(g)||ft(g)||ht(g)||Ge(g)||Xe(g)))(s,n),c=(d=>d.reduce((m,g,w)=>(Ye(g)&&jn(g)&&m.length>0||Xe(g)&&m.length>0?m[m.length-1].push({turn:g,idx:w}):m.push([{turn:g,idx:w}]),m),[]))(r),a=((d,m)=>{if(m.isActive){const g=m.currentAgent;return(g==null?void 0:g.workspace_status)===Je.workspaceResuming||m.isCurrentAgentRunning?Me.running:Me.notRunning}return d})(e,n),i=is(s,a,t,n),l=!n.isActive,u=!!n.isActive;if(n.isActive){if(n.sendMessageError&&n.currentAgentId){const d=n.currentAgentId,m=n.sendMessageError;i.remoteAgentErrorConfig={error:m,onRetry:m.canRetry&&m.failedExchangeId?()=>n.retryFailedMessage(d,m.failedExchangeId):void 0,onDelete:m.type===Gn.agentFailed?()=>n.deleteAgent(d):void 0}}else if(n.agentChatHistoryError&&n.currentAgentId){const d=n.currentAgentId;i.remoteAgentErrorConfig={error:n.agentChatHistoryError,onRetry:()=>n.refreshAgentChatHistory(d)}}}return{chatHistory:r,groupedChatHistory:c,lastGroupConfig:i,doShowFloatingButtons:l,doShowAgentSetupLogs:u}};function ln(o){let e,t,n,s,r,c,a,i;const l=[o[4][o[1]]];let u={};for(let g=0;g<l.length;g+=1)u=xe(u,l[g]);t=new St({props:u});let d=[{class:"stage-container"},o[1]?en(o[3][o[1]]):{},{role:"button"},{tabindex:"0"}],m={};for(let g=0;g<d.length;g+=1)m=xe(m,d[g]);return{c(){e=M("div"),C(t.$$.fragment),n=P(),s=M("div"),r=F(o[1]),x(s,"class","message svelte-1etsput"),nn(e,m),V(e,"active",o[0]),V(e,"svelte-1etsput",!0)},m(g,w){v(g,e,w),_(t,e,null),R(e,n),R(e,s),R(s,r),c=!0,a||(i=[te(e,"click",o[5]),te(e,"keydown",Xn("Enter",o[5]))],a=!0)},p(g,w){const L=18&w?je(l,[wt(g[4][g[1]])]):{};t.$set(L),(!c||2&w)&&K(r,g[1]),nn(e,m=je(d,[{class:"stage-container"},2&w&&(g[1]?en(g[3][g[1]]):{}),{role:"button"},{tabindex:"0"}])),V(e,"active",g[0]),V(e,"svelte-1etsput",!0)},i(g){c||($(t.$$.fragment,g),c=!0)},o(g){p(t.$$.fragment,g),c=!1},d(g){g&&h(e),k(t),a=!1,ze(i)}}}function ls(o){let e,t,n=o[1]&&ln(o);return{c(){n&&n.c(),e=Q()},m(s,r){n&&n.m(s,r),v(s,e,r),t=!0},p(s,[r]){s[1]?n?(n.p(s,r),2&r&&$(n,1)):(n=ln(s),n.c(),$(n,1),n.m(e.parentNode,e)):n&&(N(),p(n,1,1,()=>{n=null}),H())},i(s){t||($(n),t=!0)},o(s){p(n),t=!1},d(s){s&&h(e),n&&n.d(s)}}}function us(o,e,t){let n,s,r,c,{stage:a}=e,{iterationId:i}=e,{stageCount:l}=e;const u=ce("autofixConversationModel");le(o,u,g=>t(10,c=g));const d={[Y.retesting]:"info",[Y.testRunning]:"info",[Y.testFailed]:"error",[Y.testPassed]:"success",[Y.generatingSolutions]:"info",[Y.suggestedSolutions]:"warning",[Y.selectedSolutions]:"success"},m={[Y.retesting]:{iconName:"cached",color:"#FFFFFF"},[Y.testRunning]:{iconName:"cached",color:"#FFFFFF"},[Y.testFailed]:{iconName:"error",color:"#DB3B4B"},[Y.testPassed]:{iconName:"check_circle",color:"#388A34"},[Y.generatingSolutions]:{iconName:"cached",color:"#FFFFFF"},[Y.suggestedSolutions]:{iconName:"edit",color:"#FFFFFF"},[Y.selectedSolutions]:{iconName:"edit",color:"#FFFFFF"}};return o.$$set=g=>{"stage"in g&&t(6,a=g.stage),"iterationId"in g&&t(7,i=g.iterationId),"stageCount"in g&&t(8,l=g.stageCount)},o.$$.update=()=>{var g,w,L;1152&o.$$.dirty&&t(9,n=c==null?void 0:c.getAutofixIteration(i)),1600&o.$$.dirty&&t(0,s=n&&((L=(w=(g=c.extraData)==null?void 0:g.autofixIterations)==null?void 0:w.at(-1))==null?void 0:L.id)===n.id&&n.currentStage===a),833&o.$$.dirty&&t(1,r=function(f,I,A,B){var E;return f?I===an.runTest?f.commandFailed===void 0&&B?f.isFirstIteration?Y.testRunning:Y.retesting:f.commandFailed===!0?Y.testFailed:Y.testPassed:I===an.applyFix?A===(((E=f.suggestedSolutions)==null?void 0:E.length)||0)?f.selectedSolutions?Y.selectedSolutions:Y.generatingSolutions:Y.suggestedSolutions:null:null}(n,a,l,s))},[s,r,u,d,m,()=>{r!==Y.generatingSolutions&&u.launchAutofixPanel(i,a)},a,i,l,n,c]}class yc extends j{constructor(e){super(),Z(this,e,us,ls,W,{stage:6,iterationId:7,stageCount:8})}}function Cc(o,e){const t=Math.abs(o);let n=200,s=500;typeof e=="number"?n=e:e&&(n=e.baseThreshold??200,s=e.predictTime??500);const r=t*s/1e3;return Math.max(n,r)}function _c(o,e=10){const t=Math.abs(o);return t>1e3?2*e:t>500?1.5*e:t>200?e:.5*e}function un(o){const{scrollTop:e,clientHeight:t,scrollHeight:n}=o;return n-e-t}function kc(o,e={}){let t=e,n={scrollTop:0,scrollBottom:0,scrollHeight:0,scrolledIntoBottom:!0,scrolledAwayFromBottom:!0};const s=()=>{var f,I,A;const{scrollTop:r,scrollHeight:c,offsetHeight:a}=o,i=un(o),l=r>n.scrollTop+1,u=c-n.scrollHeight,d=!(u<0&&n.scrollBottom<-u)&&r<n.scrollTop-1&&i>n.scrollBottom+1,m=c>a,g=((B,E=40)=>un(B)<=E)(o),w=g&&m&&l,L=d||!m;w&&!n.scrolledIntoBottom?(f=t.onScrollIntoBottom)==null||f.call(t):L&&!n.scrolledAwayFromBottom&&((I=t.onScrollAwayFromBottom)==null||I.call(t)),n={scrollTop:r,scrollBottom:i,scrolledIntoBottom:w,scrolledAwayFromBottom:L,scrollHeight:c},(A=t.onScroll)==null||A.call(t,r)};return o.addEventListener("scroll",s),{update(r){t=r},destroy(){o.removeEventListener("scroll",s)}}}function bc(o,e){var r;let t=o.offsetHeight,n=e;const s=new ResizeObserver(c=>{var i;const a=c[0].contentRect.height;c.length===1?a!==t&&((i=n.onHeightChange)==null||i.call(n,a),t=a):console.warn("Unexpected number of resize entries: ",c)});return s.observe(o),(r=n==null?void 0:n.onHeightChange)==null||r.call(n,t),{update(c){n=c},destroy:()=>s.disconnect()}}function Ic(o,e){let t=e;const n=Rt(()=>{t.onSeen()},1e3,{leading:!0,trailing:!0}),s=new IntersectionObserver(c=>{c.length===1?c[0].isIntersecting&&n():console.warn("Unexpected number of intersection entries: ",c)},{threshold:.5}),r=()=>{s.disconnect(),t.track&&s.observe(o)};return r(),{update(c){const a=t;t=c,t.track!==a.track&&r()},destroy:()=>{s.disconnect(),t.onSeen()}}}function dn(o){let e,t,n,s=o[6]&&$n(o);return t=new Vt({props:{changeImageMode:o[32],saveImage:o[9].saveImage,saveAttachment:o[9].saveAttachment,deleteImage:o[9].deleteImage,renderImage:o[9].renderImage,isEditable:o[33],supportedFileTypes:o[9].flags.enableDebugFeatures?["image","text"]:["image"]}}),{c(){s&&s.c(),e=P(),C(t.$$.fragment)},m(r,c){s&&s.m(r,c),v(r,e,c),_(t,r,c),n=!0},p(r,c){r[6]?s?(s.p(r,c),64&c[0]&&$(s,1)):(s=$n(r),s.c(),$(s,1),s.m(e.parentNode,e)):s&&(N(),p(s,1,1,()=>{s=null}),H());const a={};258&c[0]&&(a.changeImageMode=r[32]),512&c[0]&&(a.saveImage=r[9].saveImage),512&c[0]&&(a.saveAttachment=r[9].saveAttachment),512&c[0]&&(a.deleteImage=r[9].deleteImage),512&c[0]&&(a.renderImage=r[9].renderImage),64&c[0]&&(a.isEditable=r[33]),512&c[0]&&(a.supportedFileTypes=r[9].flags.enableDebugFeatures?["image","text"]:["image"]),t.$set(a)},i(r){n||($(s),$(t.$$.fragment,r),n=!0)},o(r){p(s),p(t.$$.fragment,r),n=!1},d(r){r&&h(e),s&&s.d(r),k(t,r)}}}function $n(o){let e,t;return e=new Jt({props:{flags:o[9].flags}}),{c(){C(e.$$.fragment)},m(n,s){_(e,n,s),t=!0},p(n,s){const r={};512&s[0]&&(r.flags=n[9].flags),e.$set(r)},i(n){t||($(e.$$.fragment,n),t=!0)},o(n){p(e.$$.fragment,n),t=!1},d(n){k(e,n)}}}function ds(o){var L;let e,t,n,s,r,c,a,i,l,u,d=o[9].flags.enableChatMultimodal&&dn(o);t=new Nt({props:{shortcuts:o[13]}});let m={requestEditorFocus:o[22],onMentionItemsUpdated:o[21]};s=new tt({props:m}),o[34](s),c=new Ht({props:{placeholder:o[2]}}),i=new De.Content({props:{content:((L=o[7])==null?void 0:L.richTextJsonRepr)??o[3],onContentChanged:o[20]}});const g=o[29].default,w=ye(g,o,o[37],null);return{c(){d&&d.c(),e=P(),C(t.$$.fragment),n=P(),C(s.$$.fragment),r=P(),C(c.$$.fragment),a=P(),C(i.$$.fragment),l=P(),w&&w.c()},m(f,I){d&&d.m(f,I),v(f,e,I),_(t,f,I),v(f,n,I),_(s,f,I),v(f,r,I),_(c,f,I),v(f,a,I),_(i,f,I),v(f,l,I),w&&w.m(f,I),u=!0},p(f,I){var J;f[9].flags.enableChatMultimodal?d?(d.p(f,I),512&I[0]&&$(d,1)):(d=dn(f),d.c(),$(d,1),d.m(e.parentNode,e)):d&&(N(),p(d,1,1,()=>{d=null}),H());const A={};8192&I[0]&&(A.shortcuts=f[13]),t.$set(A),s.$set({});const B={};4&I[0]&&(B.placeholder=f[2]),c.$set(B);const E={};136&I[0]&&(E.content=((J=f[7])==null?void 0:J.richTextJsonRepr)??f[3]),i.$set(E),w&&w.p&&(!u||64&I[1])&&Ce(w,g,f,f[37],u?ke(g,f[37],I,null):_e(f[37]),null)},i(f){u||($(d),$(t.$$.fragment,f),$(s.$$.fragment,f),$(c.$$.fragment,f),$(i.$$.fragment,f),$(w,f),u=!0)},o(f){p(d),p(t.$$.fragment,f),p(s.$$.fragment,f),p(c.$$.fragment,f),p(i.$$.fragment,f),p(w,f),u=!1},d(f){f&&(h(e),h(n),h(r),h(a),h(l)),d&&d.d(f),k(t,f),o[34](null),k(s,f),k(c,f),k(i,f),w&&w.d(f)}}}function mn(o){let e,t;return e=new Gt({props:{chatModel:o[16]}}),{c(){C(e.$$.fragment)},m(n,s){_(e,n,s),t=!0},p:U,i(n){t||($(e.$$.fragment,n),t=!0)},o(n){p(e.$$.fragment,n),t=!1},d(n){k(e,n)}}}function $s(o){let e,t,n=o[6]&&mn(o);return{c(){n&&n.c(),e=Q()},m(s,r){n&&n.m(s,r),v(s,e,r),t=!0},p(s,r){s[6]?n?(n.p(s,r),64&r[0]&&$(n,1)):(n=mn(s),n.c(),$(n,1),n.m(e.parentNode,e)):n&&(N(),p(n,1,1,()=>{n=null}),H())},i(s){t||($(n),t=!0)},o(s){p(n),t=!1},d(s){s&&h(e),n&&n.d(s)}}}function pn(o){let e,t,n,s=o[6]&&gn(o),r=o[4]&&fn(o);return{c(){s&&s.c(),e=Q(),r&&r.c(),t=Q()},m(c,a){s&&s.m(c,a),v(c,e,a),r&&r.m(c,a),v(c,t,a),n=!0},p(c,a){c[6]?s?(s.p(c,a),64&a[0]&&$(s,1)):(s=gn(c),s.c(),$(s,1),s.m(e.parentNode,e)):s&&(N(),p(s,1,1,()=>{s=null}),H()),c[4]?r?(r.p(c,a),16&a[0]&&$(r,1)):(r=fn(c),r.c(),$(r,1),r.m(t.parentNode,t)):r&&(N(),p(r,1,1,()=>{r=null}),H())},i(c){n||($(s),$(r),n=!0)},o(c){p(s),p(r),n=!1},d(c){c&&(h(e),h(t)),s&&s.d(c),r&&r.d(c)}}}function gn(o){let e,t,n;return e=new st.Root({props:{$$slots:{rightAlign:[gs],leftAlign:[ms]},$$scope:{ctx:o}}}),{c(){C(e.$$.fragment),t=P()},m(s,r){_(e,s,r),v(s,t,r),n=!0},p(s,r){const c={};17408&r[0]|64&r[1]&&(c.$$scope={dirty:r,ctx:s}),e.$set(c)},i(s){n||($(e.$$.fragment,s),n=!0)},o(s){p(e.$$.fragment,s),n=!1},d(s){s&&h(t),k(e,s)}}}function ms(o){var n;let e,t;return e=new st.ContextMenu({props:{slot:"leftAlign",onCloseDropdown:o[22],onInsertMentionable:(n=o[10])==null?void 0:n.insertMentionNode}}),{c(){C(e.$$.fragment)},m(s,r){_(e,s,r),t=!0},p(s,r){var a;const c={};1024&r[0]&&(c.onInsertMentionable=(a=s[10])==null?void 0:a.insertMentionNode),e.$set(c)},i(s){t||($(e.$$.fragment,s),t=!0)},o(s){p(e.$$.fragment,s),t=!1},d(s){k(e,s)}}}function ps(o){let e,t;return e=new Wt({}),{c(){C(e.$$.fragment)},m(n,s){_(e,n,s),t=!0},i(n){t||($(e.$$.fragment,n),t=!0)},o(n){p(e.$$.fragment,n),t=!1},d(n){k(e,n)}}}function gs(o){let e,t;return e=new Oe({props:{size:1,variant:"solid",disabled:!o[14],color:"accent",$$slots:{default:[ps]},$$scope:{ctx:o}}}),e.$on("click",o[18]),{c(){C(e.$$.fragment)},m(n,s){_(e,n,s),t=!0},p(n,s){const r={};16384&s[0]&&(r.disabled=!n[14]),64&s[1]&&(r.$$scope={dirty:s,ctx:n}),e.$set(r)},i(n){t||($(e.$$.fragment,n),t=!0)},o(n){p(e.$$.fragment,n),t=!1},d(n){k(e,n)}}}function fn(o){let e,t,n;return t=new Oe({props:{variant:"solid",color:"neutral",size:1,$$slots:{iconLeft:[hs],default:[fs]},$$scope:{ctx:o}}}),t.$on("click",o[31]),{c(){e=M("div"),C(t.$$.fragment),x(e,"class","c-user-msg__collapse-button svelte-q0brxu")},m(s,r){v(s,e,r),_(t,e,null),n=!0},p(s,r){const c={};64&r[1]&&(c.$$scope={dirty:r,ctx:s}),t.$set(c)},i(s){n||($(t.$$.fragment,s),n=!0)},o(s){p(t.$$.fragment,s),n=!1},d(s){s&&h(e),k(t)}}}function fs(o){let e;return{c(){e=M("span"),e.textContent="Expand"},m(t,n){v(t,e,n)},p:U,d(t){t&&h(e)}}}function hs(o){let e,t;return e=new Yt({props:{slot:"iconLeft"}}),{c(){C(e.$$.fragment)},m(n,s){_(e,n,s),t=!0},p:U,i(n){t||($(e.$$.fragment,n),t=!0)},o(n){p(e.$$.fragment,n),t=!1},d(n){k(e,n)}}}function vs(o){let e,t,n=(o[6]||!o[4])&&pn(o);return{c(){n&&n.c(),e=Q()},m(s,r){n&&n.m(s,r),v(s,e,r),t=!0},p(s,r){s[6]||!s[4]?n?(n.p(s,r),80&r[0]&&$(n,1)):(n=pn(s),n.c(),$(n,1),n.m(e.parentNode,e)):n&&(N(),p(n,1,1,()=>{n=null}),H())},i(s){t||($(n),t=!0)},o(s){p(n),t=!1},d(s){s&&h(e),n&&n.d(s)}}}function ws(o){let e,t,n,s,r,c={editable:o[6],$$slots:{footer:[vs],header:[$s],default:[ds]},$$scope:{ctx:o}};return t=new De.Root({props:c}),o[35](t),t.$on("click",xs),t.$on("dblclick",o[17]),{c(){e=M("div"),C(t.$$.fragment),x(e,"class","c-chat-input svelte-q0brxu"),x(e,"role","button"),x(e,"tabindex","-1"),V(e,"is-collapsed",o[4]),V(e,"is-editing",o[6])},m(a,i){v(a,e,i),_(t,e,null),o[36](e),n=!0,s||(r=[te(window,"mousedown",o[19]),te(e,"mousedown",xt(o[30]))],s=!0)},p(a,i){const l={};64&i[0]&&(l.editable=a[6]),26623&i[0]|64&i[1]&&(l.$$scope={dirty:i,ctx:a}),t.$set(l),(!n||16&i[0])&&V(e,"is-collapsed",a[4]),(!n||64&i[0])&&V(e,"is-editing",a[6])},i(a){n||($(t.$$.fragment,a),n=!0)},o(a){p(t.$$.fragment,a),n=!1},d(a){a&&h(e),o[35](null),k(t),o[36](null),s=!1,ze(r)}}}const xs=o=>o.stopPropagation();function ys(o,e,t){let n,s,r,c,a,i,l,u=U;o.$$.on_destroy.push(()=>u());let{$$slots:d={},$$scope:m}=e;const g=ce("chatModel");le(o,g,b=>t(9,l=b));const w=ce(qe.key);let{requestId:L}=e,{placeholder:f="Edit your message..."}=e,{content:I}=e,{collapsed:A=!1}=e,{onSubmitEdit:B}=e,{onCancelEdit:E}=e,{setIsCollapsed:J}=e,{userExpanded:S}=e,T,D,q,y=!1,X=[];async function z(){r&&(t(0,S=!0),A&&J(!1),t(6,y=!0),await Zn(),$e())}function G(){return!(!c||!T)&&(B(T,X),!0)}function O(){return t(0,S=!1),t(6,y=!1),t(7,T=void 0),E(),!0}const $e=()=>q==null?void 0:q.forceFocus();let se;return o.$$set=b=>{"requestId"in b&&t(1,L=b.requestId),"placeholder"in b&&t(2,f=b.placeholder),"content"in b&&t(3,I=b.content),"collapsed"in b&&t(4,A=b.collapsed),"onSubmitEdit"in b&&t(23,B=b.onSubmitEdit),"onCancelEdit"in b&&t(24,E=b.onCancelEdit),"setIsCollapsed"in b&&t(5,J=b.setIsCollapsed),"userExpanded"in b&&t(0,S=b.userExpanded),"$$scope"in b&&t(37,m=b.$$scope)},o.$$.update=()=>{512&o.$$.dirty[0]&&(t(15,n=l.currentConversationModel),u(),u=ge(n,b=>t(8,i=b))),268435968&o.$$.dirty[0]&&t(27,r=l.flags.enableEditableHistory&&!s),134218184&o.$$.dirty[0]&&t(14,c=y&&r&&T!==void 0&&T.rawText.trim()!==""&&T.rawText!==I&&T.richTextJsonRepr!==I&&!i.awaitingReply&&!Ut.hasLoadingImages(T.richTextJsonRepr))},t(28,s=!!(w!=null&&w.isActive)),t(13,a={Enter:G,Escape:O}),[S,L,f,I,A,J,y,T,i,l,D,q,se,a,c,n,g,z,G,O,function(b){b!==T&&t(7,T=b)},function(b){X=b.current},()=>q==null?void 0:q.requestFocus(),B,E,()=>{z()},function(){return se},r,s,d,function(b){yt.call(this,o,b)},()=>{t(0,S=!0),J(!1)},b=>{L&&b&&i.updateChatItem(L,{rich_text_json_repr:b})},()=>y,function(b){re[b?"unshift":"push"](()=>{D=b,t(10,D)})},function(b){re[b?"unshift":"push"](()=>{q=b,t(11,q)})},function(b){re[b?"unshift":"push"](()=>{se=b,t(12,se)})},m]}class Cs extends j{constructor(e){super(),Z(this,e,ys,ws,W,{requestId:1,placeholder:2,content:3,collapsed:4,onSubmitEdit:23,onCancelEdit:24,setIsCollapsed:5,userExpanded:0,requestStartEdit:25,getEditorContainer:26},null,[-1,-1])}get requestStartEdit(){return this.$$.ctx[25]}get getEditorContainer(){return this.$$.ctx[26]}}const ie=class ie{constructor(e){ne(this,"_tipTapExtension");ne(this,"_resizeObserver");ne(this,"_checkHeight",e=>{var n,s;const t=e.getBoundingClientRect().height;(s=(n=this._options).onResize)==null||s.call(n,t)});ne(this,"_setResizeObserver",e=>{var n;const t=(n=e.view)==null?void 0:n.dom;t&&(this._resizeObserver=new ResizeObserver(s=>{for(const r of s)this._checkHeight(r.target)}),this._resizeObserver.observe(t),this._checkHeight(t))});ne(this,"_clearResizeObserver",()=>{var e;(e=this._resizeObserver)==null||e.disconnect(),this._resizeObserver=void 0});ne(this,"updateOptions",e=>{this._options={...this._options,...e}});this._options=e;const t=ie._getNextPluginId(),n=this._setResizeObserver,s=this._clearResizeObserver,r=this._checkHeight;this._tipTapExtension=Dt.create({name:t,onCreate:function(){var a;((a=this.editor.view)==null?void 0:a.dom)&&(n(this.editor),this.editor.on("destroy",s))},onUpdate:function(){var a;const c=(a=this.editor.view)==null?void 0:a.dom;c&&r(c)},onDestroy:()=>{var c;(c=this._resizeObserver)==null||c.disconnect(),this._resizeObserver=void 0}})}get tipTapExtension(){return this._tipTapExtension}};ne(ie,"_sequenceId",0),ne(ie,"RESIZE_OBSERVER_PLUGIN_KEY_BASE","augment-resize-observer-plugin-{}"),ne(ie,"_getSequenceId",()=>ie._sequenceId++),ne(ie,"_getNextPluginId",()=>{const e=ie._getSequenceId().toString();return ie.RESIZE_OBSERVER_PLUGIN_KEY_BASE.replace("{}",e)});let Ze=ie;function _s(o,e,t){let{height:n=0}=e;const s=i=>{t(0,n=i)},r=ce(Ot.CONTEXT_KEY),c=new Ze({onResize:s}),a=r.pluginManager.registerPlugin(c);return Wn(a),o.$$set=i=>{"height"in i&&t(0,n=i.height)},c.updateOptions({onResize:s}),[n]}let ks=class extends j{constructor(o){super(),Z(this,o,_s,null,W,{height:0})}};function bs(o){let e,t,n;function s(c){o[21](c)}let r={};return o[6]!==void 0&&(r.height=o[6]),e=new ks({props:r}),re.push(()=>Pe(e,"height",s)),{c(){C(e.$$.fragment)},m(c,a){_(e,c,a),n=!0},p(c,a){const i={};!t&&64&a&&(t=!0,i.height=c[6],Be(()=>t=!1)),e.$set(i)},i(c){n||($(e.$$.fragment,c),n=!0)},o(c){p(e.$$.fragment,c),n=!1},d(c){k(e,c)}}}function Is(o){let e,t,n;function s(c){o[23](c)}let r={collapsed:o[7],content:o[3]??o[1],requestId:o[2],onSubmitEdit:o[13],onCancelEdit:o[5],setIsCollapsed:o[11],$$slots:{default:[bs]},$$scope:{ctx:o}};return o[8]!==void 0&&(r.userExpanded=o[8]),e=new Cs({props:r}),o[22](e),re.push(()=>Pe(e,"userExpanded",s)),{c(){C(e.$$.fragment)},m(c,a){_(e,c,a),n=!0},p(c,a){const i={};128&a&&(i.collapsed=c[7]),10&a&&(i.content=c[3]??c[1]),4&a&&(i.requestId=c[2]),32&a&&(i.onCancelEdit=c[5]),134217792&a&&(i.$$scope={dirty:a,ctx:c}),!t&&256&a&&(t=!0,i.userExpanded=c[8],Be(()=>t=!1)),e.$set(i)},i(c){n||($(e.$$.fragment,c),n=!0)},o(c){p(e.$$.fragment,c),n=!1},d(c){o[22](null),k(e,c)}}}function Ts(o){let e,t,n;return t=new Et({props:{items:o[10]}}),{c(){e=M("div"),C(t.$$.fragment),x(e,"slot","edit"),x(e,"class","c-user-msg__actions svelte-1dv083n")},m(s,r){v(s,e,r),_(t,e,null),n=!0},p(s,r){const c={};1024&r&&(c.items=s[10]),t.$set(c)},i(s){n||($(t.$$.fragment,s),n=!0)},o(s){p(t.$$.fragment,s),n=!1},d(s){s&&h(e),k(t)}}}function Ss(o){let e,t,n,s;return e=new Ke({props:{timestamp:o[4],$$slots:{edit:[Ts],content:[Is]},$$scope:{ctx:o}}}),{c(){C(e.$$.fragment)},m(r,c){_(e,r,c),t=!0,n||(s=[te(window,"keydown",Xn("Escape",o[12])),te(window,"mousedown",o[12])],n=!0)},p(r,[c]){const a={};16&c&&(a.timestamp=r[4]),134219758&c&&(a.$$scope={dirty:c,ctx:r}),e.$set(a)},i(r){t||($(e.$$.fragment,r),t=!0)},o(r){p(e.$$.fragment,r),t=!1},d(r){k(e,r),n=!1,ze(s)}}}function Rs(o,e,t){let n,s,r,c,a,i,l,u=U,d=()=>(u(),u=ge(m,y=>t(20,l=y)),m);o.$$.on_destroy.push(()=>u());let{chatModel:m}=e;d();let{msg:g}=e,{requestId:w}=e,{richTextJsonRepr:L}=e,{timestamp:f}=e,{onStartEdit:I=()=>{}}=e,{onAcceptEdit:A=()=>{}}=e,{onCancelEdit:B=()=>{}}=e;const E=ce(qe.key);let J=!1,S=!1;async function T(y){await Zn(),t(7,J=y&&r&&!S)}const D=y=>{a&&w&&(T(!1),q==null||q.requestStartEdit(),I(),y.stopPropagation())};let q;return o.$$set=y=>{"chatModel"in y&&d(t(0,m=y.chatModel)),"msg"in y&&t(1,g=y.msg),"requestId"in y&&t(2,w=y.requestId),"richTextJsonRepr"in y&&t(3,L=y.richTextJsonRepr),"timestamp"in y&&t(4,f=y.timestamp),"onStartEdit"in y&&t(14,I=y.onStartEdit),"onAcceptEdit"in y&&t(15,A=y.onAcceptEdit),"onCancelEdit"in y&&t(5,B=y.onCancelEdit)},o.$$.update=()=>{var y,X;1048580&o.$$.dirty&&t(19,s=w===void 0||w===((X=(y=l==null?void 0:l.currentConversationModel)==null?void 0:y.lastExchange)==null?void 0:X.request_id)),524288&o.$$.dirty&&t(16,r=!s&&!0),1310724&o.$$.dirty&&t(17,a=w!==void 0&&l.flags.fullFeatured&&l.flags.enableEditableHistory&&!n),131072&o.$$.dirty&&t(10,i=[...a?[{label:"Edit message",action:D,id:"edit-message",disabled:!1,icon:Xt}]:[]]),65600&o.$$.dirty&&c&&r&&(q!=null&&q.getEditorContainer())&&c&&r&&T(!(J&&c<120)&&c>120)},t(18,n=!!(E!=null&&E.isActive)),t(6,c=0),[m,g,w,L,f,B,c,J,S,q,i,T,()=>{},function(y,X){if(!w)return;m.currentConversationModel.clearHistoryFrom(w);const z=l.flags.enableChatMultimodal&&y.richTextJsonRepr?m.currentConversationModel.createStructuredRequestNodes(y.richTextJsonRepr):void 0;m.currentConversationModel.sendExchange({request_message:y.rawText,rich_text_json_repr:y.richTextJsonRepr,status:oe.draft,mentioned_items:X,structured_request_nodes:z}),A()},I,A,r,a,n,s,l,function(y){c=y,t(6,c)},function(y){re[y?"unshift":"push"](()=>{q=y,t(9,q)})},function(y){S=y,t(8,S)}]}class Es extends j{constructor(e){super(),Z(this,e,Rs,Ss,W,{chatModel:0,msg:1,requestId:2,richTextJsonRepr:3,timestamp:4,onStartEdit:14,onAcceptEdit:15,onCancelEdit:5})}}function hn(o){let e,t;return e=new Es({props:{msg:o[1].request_message??"",richTextJsonRepr:o[11],chatModel:o[0],requestId:o[9],timestamp:o[1].timestamp}}),{c(){C(e.$$.fragment)},m(n,s){_(e,n,s),t=!0},p(n,s){const r={};2&s&&(r.msg=n[1].request_message??""),2048&s&&(r.richTextJsonRepr=n[11]),1&s&&(r.chatModel=n[0]),512&s&&(r.requestId=n[9]),2&s&&(r.timestamp=n[1].timestamp),e.$set(r)},i(n){t||($(e.$$.fragment,n),t=!0)},o(n){p(e.$$.fragment,n),t=!1},d(n){k(e,n)}}}function vn(o){let e,t,n;function s(i,l){return i[1].display_error_message?As:i[1].response_text&&i[1].response_text.length>0?Ls:Ms}let r=s(o),c=r(o),a=o[9]&&wn(o);return{c(){e=M("div"),c.c(),t=P(),a&&a.c(),x(e,"class","c-msg-list__turn-response-failure svelte-1d1manc")},m(i,l){v(i,e,l),c.m(e,null),R(e,t),a&&a.m(e,null),n=!0},p(i,l){r===(r=s(i))&&c?c.p(i,l):(c.d(1),c=r(i),c&&(c.c(),c.m(e,t))),i[9]?a?(a.p(i,l),512&l&&$(a,1)):(a=wn(i),a.c(),$(a,1),a.m(e,null)):a&&(N(),p(a,1,1,()=>{a=null}),H())},i(i){n||($(a),n=!0)},o(i){p(a),n=!1},d(i){i&&h(e),c.d(),a&&a.d()}}}function Ms(o){let e,t,n,s;return{c(){e=F(`We encountered an issue sending your message. Please
        `),t=M("button"),t.textContent="try again",x(t,"class","svelte-1d1manc")},m(r,c){v(r,e,c),v(r,t,c),n||(s=te(t,"click",Ne(o[15])),n=!0)},p:U,d(r){r&&(h(e),h(t)),n=!1,s()}}}function Ls(o){let e,t,n,s,r;return{c(){e=F(`Connection lost. Please
        `),t=M("button"),t.textContent="try again",n=F(`
        to restart the conversation!`),x(t,"class","svelte-1d1manc")},m(c,a){v(c,e,a),v(c,t,a),v(c,n,a),s||(r=te(t,"click",Ne(o[15])),s=!0)},p:U,d(c){c&&(h(e),h(t),h(n)),s=!1,r()}}}function As(o){let e,t=o[1].display_error_message+"";return{c(){e=F(t)},m(n,s){v(n,e,s)},p(n,s){2&s&&t!==(t=n[1].display_error_message+"")&&K(e,t)},d(n){n&&h(e)}}}function wn(o){let e,t,n,s,r,c,a,i;function l(d){o[21](d)}let u={onOpenChange:o[16],content:o[7],triggerOn:[He.Hover],$$slots:{default:[qs]},$$scope:{ctx:o}};return o[8]!==void 0&&(u.requestClose=o[8]),c=new Ie({props:u}),re.push(()=>Pe(c,"requestClose",l)),{c(){e=M("div"),t=M("span"),n=F("Request ID: "),s=F(o[9]),r=P(),C(c.$$.fragment),x(e,"class","c-msg-list__request-id svelte-1d1manc")},m(d,m){v(d,e,m),R(e,t),R(t,n),R(t,s),R(e,r),_(c,e,null),i=!0},p(d,m){(!i||512&m)&&K(s,d[9]);const g={};128&m&&(g.content=d[7]),16777216&m&&(g.$$scope={dirty:m,ctx:d}),!a&&256&m&&(a=!0,g.requestClose=d[8],Be(()=>a=!1)),c.$set(g)},i(d){i||($(c.$$.fragment,d),i=!0)},o(d){p(c.$$.fragment,d),i=!1},d(d){d&&h(e),k(c)}}}function Fs(o){let e,t;return e=new Kt({}),{c(){C(e.$$.fragment)},m(n,s){_(e,n,s),t=!0},i(n){t||($(e.$$.fragment,n),t=!0)},o(n){p(e.$$.fragment,n),t=!1},d(n){k(e,n)}}}function qs(o){let e,t;return e=new ve({props:{variant:"ghost",color:"neutral",size:1,$$slots:{default:[Fs]},$$scope:{ctx:o}}}),e.$on("click",o[17]),{c(){C(e.$$.fragment)},m(n,s){_(e,n,s),t=!0},p(n,s){const r={};16777216&s&&(r.$$scope={dirty:s,ctx:n}),e.$set(r)},i(n){t||($(e.$$.fragment,n),t=!0)},o(n){p(e.$$.fragment,n),t=!1},d(n){k(e,n)}}}function zs(o){let e,t,n,s,r,c=!o[10]&&!Ge(o[1])&&!o[12],a=c&&hn(o);n=new Mt({props:{chatModel:o[6],turn:o[1],turnIndex:o[3],requestId:o[9],isLastTurn:o[2],showName:!o[10],group:o[5],showFooter:!Qe(o[1])||o[1].status===oe.cancelled,markdown:o[1].response_text??"",timestamp:o[1].timestamp,messageListContainer:o[4]}});let i=o[1].status===oe.failed&&vn(o);return{c(){e=M("div"),a&&a.c(),t=P(),C(n.$$.fragment),s=P(),i&&i.c(),x(e,"class","c-msg-list__turn svelte-1d1manc")},m(l,u){v(l,e,u),a&&a.m(e,null),R(e,t),_(n,e,null),R(e,s),i&&i.m(e,null),r=!0},p(l,[u]){5122&u&&(c=!l[10]&&!Ge(l[1])&&!l[12]),c?a?(a.p(l,u),5122&u&&$(a,1)):(a=hn(l),a.c(),$(a,1),a.m(e,t)):a&&(N(),p(a,1,1,()=>{a=null}),H());const d={};64&u&&(d.chatModel=l[6]),2&u&&(d.turn=l[1]),8&u&&(d.turnIndex=l[3]),512&u&&(d.requestId=l[9]),4&u&&(d.isLastTurn=l[2]),1024&u&&(d.showName=!l[10]),32&u&&(d.group=l[5]),2&u&&(d.showFooter=!Qe(l[1])||l[1].status===oe.cancelled),2&u&&(d.markdown=l[1].response_text??""),2&u&&(d.timestamp=l[1].timestamp),16&u&&(d.messageListContainer=l[4]),n.$set(d),l[1].status===oe.failed?i?(i.p(l,u),2&u&&$(i,1)):(i=vn(l),i.c(),$(i,1),i.m(e,null)):i&&(N(),p(i,1,1,()=>{i=null}),H())},i(l){r||($(a),$(n.$$.fragment,l),$(i),r=!0)},o(l){p(a),p(n.$$.fragment,l),p(i),r=!1},d(l){l&&h(e),a&&a.d(),k(n),i&&i.d()}}}function Ps(o,e,t){let n,s,r,c,a,i,l,u,d,m,g=U,w=()=>(g(),g=ge(f,y=>t(6,u=y)),f),L=U;o.$$.on_destroy.push(()=>g()),o.$$.on_destroy.push(()=>L());let{chatModel:f}=e;w();let{turn:I}=e,{isLastTurn:A=!1}=e,{turnIndex:B=0}=e,{messageListContainer:E}=e,{group:J}=e;const S=ce(qe.key);le(o,S,y=>t(20,m=y));let T,D="Copy request ID",q=()=>{};return o.$$set=y=>{"chatModel"in y&&w(t(0,f=y.chatModel)),"turn"in y&&t(1,I=y.turn),"isLastTurn"in y&&t(2,A=y.isLastTurn),"turnIndex"in y&&t(3,B=y.turnIndex),"messageListContainer"in y&&t(4,E=y.messageListContainer),"group"in y&&t(5,J=y.group)},o.$$.update=()=>{var y;2&o.$$.dirty&&t(9,n=I.request_id),64&o.$$.dirty&&(t(13,s=u==null?void 0:u.currentConversationModel),L(),L=ge(s,X=>t(23,d=X))),1048576&o.$$.dirty&&t(19,r=(m==null?void 0:m.isActive)&&((y=m==null?void 0:m.currentAgent)==null?void 0:y.is_setup_script_agent)===!0),8&o.$$.dirty&&t(18,c=B===0),786432&o.$$.dirty&&t(12,a=r&&c),66&o.$$.dirty&&t(11,i=u.flags.enableRichTextHistory?I.rich_text_json_repr:void 0),2&o.$$.dirty&&t(10,l=jn(I))},[f,I,A,B,E,J,u,D,q,n,l,i,a,s,S,()=>{d.resendTurn(I)},function(y){y||(clearTimeout(T),T=void 0,t(7,D="Copy request ID"))},async function(){n&&(await navigator.clipboard.writeText(n),t(7,D="Copied!"),clearTimeout(T),T=setTimeout(q,1500))},c,r,m,function(y){q=y,t(8,q)}]}class Tc extends j{constructor(e){super(),Z(this,e,Ps,zs,W,{chatModel:0,turn:1,isLastTurn:2,turnIndex:3,messageListContainer:4,group:5})}}function Bs(o){let e,t,n,s,r,c,a;const i=o[15].default,l=ye(i,o,o[14],null);return{c(){e=M("div"),l&&l.c(),x(e,"class",t=tn(`c-msg-list__item ${o[5]}`)+" svelte-1s0uz2w"),x(e,"style",n=`min-height: calc(${o[4]}px - (var(--msg-list-item-spacing) * 2));`),x(e,"data-request-id",o[6])},m(u,d){v(u,e,d),l&&l.m(e,null),o[16](e),r=!0,c||(a=Kn(s=Lt.call(null,e,{follow:!o[2]&&o[1],scrollContainer:o[3],disableScrollUp:!0,smooth:!0,bottom:!0})),c=!0)},p(u,[d]){l&&l.p&&(!r||16384&d)&&Ce(l,i,u,u[14],r?ke(i,u[14],d,null):_e(u[14]),null),(!r||32&d&&t!==(t=tn(`c-msg-list__item ${u[5]}`)+" svelte-1s0uz2w"))&&x(e,"class",t),(!r||16&d&&n!==(n=`min-height: calc(${u[4]}px - (var(--msg-list-item-spacing) * 2));`))&&x(e,"style",n),(!r||64&d)&&x(e,"data-request-id",u[6]),s&&be(s.update)&&14&d&&s.update.call(null,{follow:!u[2]&&u[1],scrollContainer:u[3],disableScrollUp:!0,smooth:!0,bottom:!0})},i(u){r||($(l,u),r=!0)},o(u){p(l,u),r=!1},d(u){u&&h(e),l&&l.d(u),o[16](null),c=!1,a()}}}function Ns(o,e,t){let n,s,r,c,a=U,i=U,l=()=>(i(),i=ge(g,S=>t(13,c=S)),g);o.$$.on_destroy.push(()=>a()),o.$$.on_destroy.push(()=>i());let{$$slots:u={},$$scope:d}=e,{requestId:m}=e,{chatModel:g}=e;l();let w,{isLastItem:L=!1}=e,{userControlsScroll:f=!1}=e,{releaseScroll:I=()=>{}}=e,{messageListContainer:A}=e,{minHeight:B}=e,{class:E=""}=e,{dataRequestId:J}=e;return fe(()=>{A&&L&&Qn(A,{smooth:!0,onScrollFinish:I})}),o.$$set=S=>{"requestId"in S&&t(9,m=S.requestId),"chatModel"in S&&l(t(0,g=S.chatModel)),"isLastItem"in S&&t(1,L=S.isLastItem),"userControlsScroll"in S&&t(2,f=S.userControlsScroll),"releaseScroll"in S&&t(10,I=S.releaseScroll),"messageListContainer"in S&&t(3,A=S.messageListContainer),"minHeight"in S&&t(4,B=S.minHeight),"class"in S&&t(5,E=S.class),"dataRequestId"in S&&t(6,J=S.dataRequestId),"$$scope"in S&&t(14,d=S.$$scope)},o.$$.update=()=>{var S,T;8192&o.$$.dirty&&(t(8,n=(S=c==null?void 0:c.currentConversationModel)==null?void 0:S.focusModel),a(),a=ge(n,D=>t(12,r=D))),4608&o.$$.dirty&&t(11,s=((T=r.focusedItem)==null?void 0:T.request_id)===m),2048&o.$$.dirty&&s&&A&&w&&At(A,w,{topBuffer:0,smooth:!0,scrollDuration:100,onScrollFinish:I})},[g,L,f,A,B,E,J,w,n,m,I,s,r,c,d,u,function(S){re[S?"unshift":"push"](()=>{w=S,t(7,w)})}]}class Sc extends j{constructor(e){super(),Z(this,e,Ns,Bs,W,{requestId:9,chatModel:0,isLastItem:1,userControlsScroll:2,releaseScroll:10,messageListContainer:3,minHeight:4,class:5,dataRequestId:6})}}function Hs(o){let e;return{c(){e=F("Generating response...")},m(t,n){v(t,e,n)},d(t){t&&h(e)}}}function xn(o){let e,t;return e=new ot.Root({props:{color:"neutral",size:1,$$slots:{default:[Os]},$$scope:{ctx:o}}}),{c(){C(e.$$.fragment)},m(n,s){_(e,n,s),t=!0},p(n,s){const r={};1029&s&&(r.$$scope={dirty:s,ctx:n}),e.$set(r)},i(n){t||($(e.$$.fragment,n),t=!0)},o(n){p(e.$$.fragment,n),t=!1},d(n){k(e,n)}}}function Ds(o){let e,t;return{c(){e=M("span"),t=F(o[2]),x(e,"class","c-gen-response__timer svelte-148snxl"),V(e,"is_minutes",o[0]>=60)},m(n,s){v(n,e,s),R(e,t)},p(n,s){4&s&&K(t,n[2]),1&s&&V(e,"is_minutes",n[0]>=60)},d(n){n&&h(e)}}}function Os(o){let e,t;return e=new ee({props:{type:"monospace",size:1,weight:"light",color:"secondary",$$slots:{default:[Ds]},$$scope:{ctx:o}}}),{c(){C(e.$$.fragment)},m(n,s){_(e,n,s),t=!0},p(n,s){const r={};1029&s&&(r.$$scope={dirty:s,ctx:n}),e.$set(r)},i(n){t||($(e.$$.fragment,n),t=!0)},o(n){p(e.$$.fragment,n),t=!1},d(n){k(e,n)}}}function Us(o){let e,t,n,s,r,c,a;n=new he({props:{size:1}}),r=new ee({props:{size:1,weight:"light",color:"secondary",$$slots:{default:[Hs]},$$scope:{ctx:o}}});let i=o[1]&&xn(o);return{c(){e=M("div"),t=M("span"),C(n.$$.fragment),s=P(),C(r.$$.fragment),c=P(),i&&i.c(),x(t,"class","c-gen-response__text svelte-148snxl"),x(e,"class","c-gen-response svelte-148snxl")},m(l,u){v(l,e,u),R(e,t),_(n,t,null),R(t,s),_(r,t,null),R(e,c),i&&i.m(e,null),a=!0},p(l,[u]){const d={};1024&u&&(d.$$scope={dirty:u,ctx:l}),r.$set(d),l[1]?i?(i.p(l,u),2&u&&$(i,1)):(i=xn(l),i.c(),$(i,1),i.m(e,null)):i&&(N(),p(i,1,1,()=>{i=null}),H())},i(l){a||($(n.$$.fragment,l),$(r.$$.fragment,l),$(i),a=!0)},o(l){p(n.$$.fragment,l),p(r.$$.fragment,l),p(i),a=!1},d(l){l&&h(e),k(n),k(r),i&&i.d()}}}function Vs(o,e,t){let n,s,r,{timeToTimerMs:c=5e3}=e,a=0,i=Date.now(),l=!1;function u(){t(0,a=Math.floor((Date.now()-i)/1e3))}function d(){t(1,l=!0),u(),r=setInterval(u,1e3)}return fe(function(){return s=setTimeout(d,c),i=Date.now(),()=>{t(0,a=0),t(1,l=!1),clearTimeout(s),clearInterval(r)}}),o.$$set=m=>{"timeToTimerMs"in m&&t(3,c=m.timeToTimerMs)},o.$$.update=()=>{1&o.$$.dirty&&t(2,n=function(m){return m>=60?`${Math.floor(m/60)}:${String(m%60).padStart(2,"0")}`:`0:${String(m).padStart(2,"0")}`}(a))},[a,l,n,c]}class Js extends j{constructor(e){super(),Z(this,e,Vs,Us,W,{timeToTimerMs:3})}}class de{constructor(e){ne(this,"type","plainText");this.text=e}}class Ee{constructor(e){ne(this,"type","specialBlock");this.text=e}}function We(o){return o.map(e=>e.text).join("")}function Gs(o){let e,t,n,s,r=(!o[0].status||o[0].status===oe.success)&&o[4]===We(o[3]);e=new ns({props:{renderers:o[5],markdown:o[1]+o[4]}});let c=r&&yn(o);return{c(){C(e.$$.fragment),t=P(),c&&c.c(),n=Q()},m(a,i){_(e,a,i),v(a,t,i),c&&c.m(a,i),v(a,n,i),s=!0},p(a,i){const l={};18&i&&(l.markdown=a[1]+a[4]),e.$set(l),25&i&&(r=(!a[0].status||a[0].status===oe.success)&&a[4]===We(a[3])),r?c?(c.p(a,i),25&i&&$(c,1)):(c=yn(a),c.c(),$(c,1),c.m(n.parentNode,n)):c&&(N(),p(c,1,1,()=>{c=null}),H())},i(a){s||($(e.$$.fragment,a),$(c),s=!0)},o(a){p(e.$$.fragment,a),p(c),s=!1},d(a){a&&(h(t),h(n)),k(e,a),c&&c.d(a)}}}function js(o){let e;function t(r,c){return r[0].display_error_message?Ys:r[0].response_text&&r[0].response_text.length>0?Ks:Ws}let n=t(o),s=n(o);return{c(){e=M("div"),s.c(),x(e,"class","c-msg-failure svelte-9a9fi8")},m(r,c){v(r,e,c),s.m(e,null)},p(r,c){n===(n=t(r))&&s?s.p(r,c):(s.d(1),s=n(r),s&&(s.c(),s.m(e,null)))},i:U,o:U,d(r){r&&h(e),s.d()}}}function Zs(o){let e,t;return e=new Js({}),{c(){C(e.$$.fragment)},m(n,s){_(e,n,s),t=!0},p:U,i(n){t||($(e.$$.fragment,n),t=!0)},o(n){p(e.$$.fragment,n),t=!1},d(n){k(e,n)}}}function yn(o){let e;const t=o[7].default,n=ye(t,o,o[8],null);return{c(){n&&n.c()},m(s,r){n&&n.m(s,r),e=!0},p(s,r){n&&n.p&&(!e||256&r)&&Ce(n,t,s,s[8],e?ke(t,s[8],r,null):_e(s[8]),null)},i(s){e||($(n,s),e=!0)},o(s){p(n,s),e=!1},d(s){n&&n.d(s)}}}function Ws(o){let e,t,n=o[2]&&Cn(o);return{c(){e=F("We encountered an issue sending your message."),n&&n.c(),t=F(".")},m(s,r){v(s,e,r),n&&n.m(s,r),v(s,t,r)},p(s,r){s[2]?n?n.p(s,r):(n=Cn(s),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},d(s){s&&(h(e),h(t)),n&&n.d(s)}}}function Ks(o){let e,t,n=o[2]&&_n(o);return{c(){e=F("Connection lost."),n&&n.c(),t=Q()},m(s,r){v(s,e,r),n&&n.m(s,r),v(s,t,r)},p(s,r){s[2]?n?n.p(s,r):(n=_n(s),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},d(s){s&&(h(e),h(t)),n&&n.d(s)}}}function Ys(o){let e,t=o[0].display_error_message+"";return{c(){e=F(t)},m(n,s){v(n,e,s)},p(n,s){1&s&&t!==(t=n[0].display_error_message+"")&&K(e,t)},d(n){n&&h(e)}}}function Cn(o){let e,t,n,s;return{c(){e=F(`Please
            `),t=M("button"),t.textContent="try again",x(t,"class","svelte-9a9fi8")},m(r,c){v(r,e,c),v(r,t,c),n||(s=te(t,"click",Ne(function(){be(o[2])&&o[2].apply(this,arguments)})),n=!0)},p(r,c){o=r},d(r){r&&(h(e),h(t)),n=!1,s()}}}function _n(o){let e,t,n,s,r;return{c(){e=F(`Please
            `),t=M("button"),t.textContent="try again",n=F("."),x(t,"class","svelte-9a9fi8")},m(c,a){v(c,e,a),v(c,t,a),v(c,n,a),s||(r=te(t,"click",Ne(function(){be(o[2])&&o[2].apply(this,arguments)})),s=!0)},p(c,a){o=c},d(c){c&&(h(e),h(t),h(n)),s=!1,r()}}}function Xs(o){let e,t,n,s;const r=[Zs,js,Gs],c=[];function a(i,l){return(!i[0].status||i[0].status===oe.sent)&&i[4].length<=0?0:i[0].status===oe.failed?1:2}return e=a(o),t=c[e]=r[e](o),{c(){t.c(),n=Q()},m(i,l){c[e].m(i,l),v(i,n,l),s=!0},p(i,l){let u=e;e=a(i),e===u?c[e].p(i,l):(N(),p(c[u],1,1,()=>{c[u]=null}),H(),t=c[e],t?t.p(i,l):(t=c[e]=r[e](i),t.c()),$(t,1),t.m(n.parentNode,n))},i(i){s||($(t),s=!0)},o(i){p(t),s=!1},d(i){i&&h(n),c[e].d(i)}}}function Qs(o){let e,t;return e=new Ke({props:{isAugment:!0,$$slots:{content:[Xs]},$$scope:{ctx:o}}}),{c(){C(e.$$.fragment)},m(n,s){_(e,n,s),t=!0},p(n,[s]){const r={};287&s&&(r.$$scope={dirty:s,ctx:n}),e.$set(r)},i(n){t||($(e.$$.fragment,n),t=!0)},o(n){p(e.$$.fragment,n),t=!1},d(n){k(e,n)}}}function eo(o,e,t){let n,s,{$$slots:r={},$$scope:c}=e,{turn:a}=e,{preamble:i=""}=e,{resendTurn:l}=e,{markdownBlocks:u=[]}=e,d={code:Qt,codespan:es,link:Ft};return fe(()=>{if(a.seen_state===vt.seen)return void t(0,a.response_text=We(n),a);let m=Date.now();const g=function*(f){for(const I of f)if(I.type==="specialBlock")yield I.text;else for(const A of I.text)yield A}(n);let w=g.next();const L=()=>{let f=Date.now();const I=Math.round((f-m)/8);let A="";for(let B=0;B<I&&!w.done;B++)A+=w.value,w=g.next();t(0,a.response_text+=A,a),m=f,w.done||requestAnimationFrame(L)};L()}),o.$$set=m=>{"turn"in m&&t(0,a=m.turn),"preamble"in m&&t(1,i=m.preamble),"resendTurn"in m&&t(2,l=m.resendTurn),"markdownBlocks"in m&&t(6,u=m.markdownBlocks),"$$scope"in m&&t(8,c=m.$$scope)},o.$$.update=()=>{1&o.$$.dirty&&t(0,a.response_text=a.response_text??"",a),65&o.$$.dirty&&t(3,n=a.response_text?[new de(a.response_text)]:u),1&o.$$.dirty&&t(4,s=a.response_text??"")},[a,i,l,n,s,d,u,r,c]}class no extends j{constructor(e){super(),Z(this,e,eo,Qs,W,{turn:0,preamble:1,resendTurn:2,markdownBlocks:6})}}function to(o){let e,t,n,s;return e=new De.Content({props:{content:o[2]}}),n=new tt({props:{requestEditorFocus:o[4]}}),{c(){C(e.$$.fragment),t=P(),C(n.$$.fragment)},m(r,c){_(e,r,c),v(r,t,c),_(n,r,c),s=!0},p:U,i(r){s||($(e.$$.fragment,r),$(n.$$.fragment,r),s=!0)},o(r){p(e.$$.fragment,r),p(n.$$.fragment,r),s=!1},d(r){r&&h(t),k(e,r),k(n,r)}}}function so(o){let e,t,n={slot:"content",$$slots:{default:[to]},$$scope:{ctx:o}};return e=new De.Root({props:n}),o[7](e),{c(){C(e.$$.fragment)},m(s,r){_(e,s,r),t=!0},p(s,r){const c={};512&r&&(c.$$scope={dirty:r,ctx:s}),e.$set(c)},i(s){t||($(e.$$.fragment,s),t=!0)},o(s){p(e.$$.fragment,s),t=!1},d(s){o[7](null),k(e,s)}}}function oo(o){let e,t,n,s;return e=new Ke({props:{$$slots:{content:[so]},$$scope:{ctx:o}}}),n=new no({props:{turn:o[1],markdownBlocks:o[3]}}),{c(){C(e.$$.fragment),t=P(),C(n.$$.fragment)},m(r,c){_(e,r,c),v(r,t,c),_(n,r,c),s=!0},p(r,[c]){const a={};513&c&&(a.$$scope={dirty:c,ctx:r}),e.$set(a)},i(r){s||($(e.$$.fragment,r),$(n.$$.fragment,r),s=!0)},o(r){p(e.$$.fragment,r),p(n.$$.fragment,r),s=!1},d(r){r&&h(t),k(e,r),k(n,r)}}}function ro(o,e,t){let{flagsModel:n}=e,{turn:s}=e;const r={seen_state:s.seen_state,status:oe.success},c=[[new Ee("[**Chat**](https://docs.augmentcode.com/using-augment/chat)"),new de(": Explore your codebase, get up to speed on unfamiliar code, and work through technical problems using natural language.")],[new Ee("[**Code Completions**](https://docs.augmentcode.com/using-augment/completions)"),new de(": Receive intelligent code suggestions that take your entire codebase into account as you type.")],[new Ee("[**Instructions**](https://docs.augmentcode.com/using-augment/instructions)"),new de(": Use natural language prompts to write or modify code, applied as a diff for your review.")]];n.suggestedEditsAvailable&&c.push([new Ee("[**Suggested Edits**](https://docs.augmentcode.com/using-augment/suggested-edits)"),new de(": Take your completions beyond the cursor and across your workspace.")]);let a,i=[new de(`Welcome to Augment!

Augment can help you understand code, debug issues, and ship faster with its deep understanding of your codebase. Here is what Augment can do for you:

`),...c.flatMap((l,u)=>[new de(`${u+1}. `),...l,new de(`

`)]),new de("Ask questions to learn more! Just remember to tag **@Augment** when asking about Augment's capabilities.")];return o.$$set=l=>{"flagsModel"in l&&t(5,n=l.flagsModel),"turn"in l&&t(6,s=l.turn)},[a,r,{type:"doc",content:[{type:"paragraph",content:[{type:"text",text:"What can "},{type:"mention",attrs:{id:"Augment",label:"Augment",data:{id:"Augment",label:"Augment"}}},{type:"text",text:" do?"}]}]},i,function(){a==null||a.requestFocus()},n,s,function(l){re[l?"unshift":"push"](()=>{a=l,t(0,a)})}]}class Rc extends j{constructor(e){super(),Z(this,e,ro,oo,W,{flagsModel:5,turn:6})}}function co(o){let e,t;return{c(){e=me("svg"),t=me("path"),x(t,"d","M6.04995 2.74998C6.04995 2.44623 5.80371 2.19998 5.49995 2.19998C5.19619 2.19998 4.94995 2.44623 4.94995 2.74998V12.25C4.94995 12.5537 5.19619 12.8 5.49995 12.8C5.80371 12.8 6.04995 12.5537 6.04995 12.25V2.74998ZM10.05 2.74998C10.05 2.44623 9.80371 2.19998 9.49995 2.19998C9.19619 2.19998 8.94995 2.44623 8.94995 2.74998V12.25C8.94995 12.5537 9.19619 12.8 9.49995 12.8C9.80371 12.8 10.05 12.5537 10.05 12.25V2.74998Z"),x(t,"fill","currentColor"),x(t,"fill-rule","evenodd"),x(t,"clip-rule","evenodd"),x(e,"width","15"),x(e,"height","15"),x(e,"viewBox","0 0 15 15"),x(e,"fill","none"),x(e,"xmlns","http://www.w3.org/2000/svg")},m(n,s){v(n,e,s),R(e,t)},p:U,i:U,o:U,d(n){n&&h(e)}}}class ao extends j{constructor(e){super(),Z(this,e,null,co,W,{})}}function io(o){let e,t,n,s,r;return t=new ao({}),{c(){e=M("span"),C(t.$$.fragment),n=F(`
  Waiting for user input`),s=F(o[0]),x(e,"class","c-gen-response svelte-5is5us")},m(c,a){v(c,e,a),_(t,e,null),R(e,n),R(e,s),r=!0},p(c,[a]){(!r||1&a)&&K(s,c[0])},i(c){r||($(t.$$.fragment,c),r=!0)},o(c){p(t.$$.fragment,c),r=!1},d(c){c&&h(e),k(t)}}}function lo(o,e,t){let n=".";return fe(()=>{const s=setInterval(()=>{t(0,n=n.length>=3?".":n+".")},500);return()=>clearInterval(s)}),[n]}class Ec extends j{constructor(e){super(),Z(this,e,lo,io,W,{})}}function uo(o){let e;return{c(){e=F("Resuming remote agent...")},m(t,n){v(t,e,n)},d(t){t&&h(e)}}}function kn(o){let e,t;return e=new ot.Root({props:{color:"neutral",size:1,$$slots:{default:[mo]},$$scope:{ctx:o}}}),{c(){C(e.$$.fragment)},m(n,s){_(e,n,s),t=!0},p(n,s){const r={};1029&s&&(r.$$scope={dirty:s,ctx:n}),e.$set(r)},i(n){t||($(e.$$.fragment,n),t=!0)},o(n){p(e.$$.fragment,n),t=!1},d(n){k(e,n)}}}function $o(o){let e,t;return{c(){e=M("span"),t=F(o[2]),x(e,"class","c-resuming-agent__timer svelte-16pyinb"),V(e,"is_minutes",o[0]>=60)},m(n,s){v(n,e,s),R(e,t)},p(n,s){4&s&&K(t,n[2]),1&s&&V(e,"is_minutes",n[0]>=60)},d(n){n&&h(e)}}}function mo(o){let e,t;return e=new ee({props:{type:"monospace",size:1,weight:"light",color:"secondary",$$slots:{default:[$o]},$$scope:{ctx:o}}}),{c(){C(e.$$.fragment)},m(n,s){_(e,n,s),t=!0},p(n,s){const r={};1029&s&&(r.$$scope={dirty:s,ctx:n}),e.$set(r)},i(n){t||($(e.$$.fragment,n),t=!0)},o(n){p(e.$$.fragment,n),t=!1},d(n){k(e,n)}}}function po(o){let e,t,n,s,r,c,a;n=new he({props:{size:1}}),r=new ee({props:{size:1,weight:"light",color:"secondary",$$slots:{default:[uo]},$$scope:{ctx:o}}});let i=o[1]&&kn(o);return{c(){e=M("div"),t=M("span"),C(n.$$.fragment),s=P(),C(r.$$.fragment),c=P(),i&&i.c(),x(t,"class","c-resuming-agent__text svelte-16pyinb"),x(e,"class","c-resuming-agent svelte-16pyinb")},m(l,u){v(l,e,u),R(e,t),_(n,t,null),R(t,s),_(r,t,null),R(e,c),i&&i.m(e,null),a=!0},p(l,[u]){const d={};1024&u&&(d.$$scope={dirty:u,ctx:l}),r.$set(d),l[1]?i?(i.p(l,u),2&u&&$(i,1)):(i=kn(l),i.c(),$(i,1),i.m(e,null)):i&&(N(),p(i,1,1,()=>{i=null}),H())},i(l){a||($(n.$$.fragment,l),$(r.$$.fragment,l),$(i),a=!0)},o(l){p(n.$$.fragment,l),p(r.$$.fragment,l),p(i),a=!1},d(l){l&&h(e),k(n),k(r),i&&i.d()}}}function go(o,e,t){let n,s,r,{timeToTimerMs:c=5e3}=e,a=0,i=Date.now(),l=!1;function u(){t(0,a=Math.floor((Date.now()-i)/1e3))}function d(){t(1,l=!0),u(),r=setInterval(u,1e3)}return fe(function(){return s=setTimeout(d,c),i=Date.now(),()=>{t(0,a=0),t(1,l=!1),clearTimeout(s),clearInterval(r)}}),o.$$set=m=>{"timeToTimerMs"in m&&t(3,c=m.timeToTimerMs)},o.$$.update=()=>{1&o.$$.dirty&&t(2,n=function(m){return m>=60?`${Math.floor(m/60)}:${String(m%60).padStart(2,"0")}`:`0:${String(m).padStart(2,"0")}`}(a))},[a,l,n,c]}class Mc extends j{constructor(e){super(),Z(this,e,go,po,W,{timeToTimerMs:3})}}function fo(o){let e,t,n,s,r;return t=new he({props:{size:1}}),{c(){e=M("span"),C(t.$$.fragment),n=P(),s=F(o[0]),x(e,"class","c-retry-response svelte-1lxm8qk")},m(c,a){v(c,e,a),_(t,e,null),R(e,n),R(e,s),r=!0},p(c,[a]){(!r||1&a)&&K(s,c[0])},i(c){r||($(t.$$.fragment,c),r=!0)},o(c){p(t.$$.fragment,c),r=!1},d(c){c&&h(e),k(t)}}}function ho(o,e,t){let{message:n="Retrying..."}=e;return o.$$set=s=>{"message"in s&&t(0,n=s.message)},[n]}class Lc extends j{constructor(e){super(),Z(this,e,ho,fo,W,{message:0})}}function vo(o){let e,t,n;return e=new jt({}),{c(){C(e.$$.fragment),t=F(`
    Stopped`)},m(s,r){_(e,s,r),v(s,t,r),n=!0},i(s){n||($(e.$$.fragment,s),n=!0)},o(s){p(e.$$.fragment,s),n=!1},d(s){s&&h(t),k(e,s)}}}function wo(o){let e,t,n;return t=new ee({props:{size:1,$$slots:{default:[vo]},$$scope:{ctx:o}}}),{c(){e=M("span"),C(t.$$.fragment),x(e,"class","c-stopped svelte-lv19x6")},m(s,r){v(s,e,r),_(t,e,null),n=!0},p(s,[r]){const c={};1&r&&(c.$$scope={dirty:r,ctx:s}),t.$set(c)},i(s){n||($(t.$$.fragment,s),n=!0)},o(s){p(t.$$.fragment,s),n=!1},d(s){s&&h(e),k(t)}}}class Ac extends j{constructor(e){super(),Z(this,e,null,wo,W,{})}}function xo(o){let e,t;return{c(){e=me("svg"),t=me("path"),x(t,"fill-rule","evenodd"),x(t,"clip-rule","evenodd"),x(t,"d","M4.85355 2.14645C5.04882 2.34171 5.04882 2.65829 4.85355 2.85355L3.70711 4H9C11.4853 4 13.5 6.01472 13.5 8.5C13.5 10.9853 11.4853 13 9 13H5C4.72386 13 4.5 12.7761 4.5 12.5C4.5 12.2239 4.72386 12 5 12H9C10.933 12 12.5 10.433 12.5 8.5C12.5 6.567 10.933 5 9 5H3.70711L4.85355 6.14645C5.04882 6.34171 5.04882 6.65829 4.85355 6.85355C4.65829 7.04882 4.34171 7.04882 4.14645 6.85355L2.14645 4.85355C1.95118 4.65829 1.95118 4.34171 2.14645 4.14645L4.14645 2.14645C4.34171 1.95118 4.65829 1.95118 4.85355 2.14645Z"),x(t,"fill","currentColor"),x(e,"width","15"),x(e,"height","15"),x(e,"viewBox","0 0 15 15"),x(e,"fill","none"),x(e,"xmlns","http://www.w3.org/2000/svg")},m(n,s){v(n,e,s),R(e,t)},p:U,i:U,o:U,d(n){n&&h(e)}}}class at extends j{constructor(e){super(),Z(this,e,null,xo,W,{})}}function yo(o){let e,t,n;return{c(){e=me("svg"),t=me("path"),n=me("path"),x(t,"fill-rule","evenodd"),x(t,"clip-rule","evenodd"),x(t,"d","M3.1784 5.56111C3.17842 5.85569 3.41722 6.09449 3.71173 6.09444L9.92275 6.09447C10.0585 6.09447 10.1929 6.06857 10.3189 6.01818L13.9947 4.54786C14.1973 4.46681 14.33 4.27071 14.3301 4.05261C14.33 3.83458 14.1973 3.63846 13.9948 3.55744L10.3189 2.08711C10.1929 2.0367 10.0584 2.01083 9.92278 2.01079L3.71173 2.01079C3.41722 2.01084 3.17844 2.24962 3.1784 2.54412L3.1784 5.56111ZM9.92275 5.0278L4.2451 5.02781L4.24509 3.07749L9.92278 3.07745L11.5339 3.72196L12.2527 4.05263C12.2527 4.05263 11.8167 4.25864 11.534 4.38331C10.9139 4.65675 9.92275 5.0278 9.92275 5.0278Z"),x(t,"fill","currentColor"),x(n,"fill-rule","evenodd"),x(n,"clip-rule","evenodd"),x(n,"d","M8.53346 1.59998C8.53346 1.30543 8.29468 1.06665 8.00013 1.06665C7.70558 1.06665 7.4668 1.30543 7.4668 1.59998V3.07746L8.53346 3.07745V1.59998ZM8.53346 5.0278L7.4668 5.0278V14.4C7.4668 14.6945 7.70558 14.9333 8.00013 14.9333C8.29468 14.9333 8.53346 14.6945 8.53346 14.4V5.0278Z"),x(n,"fill","currentColor"),x(e,"width","15"),x(e,"height","15"),x(e,"viewBox","0 0 15 15"),x(e,"fill","none"),x(e,"xmlns","http://www.w3.org/2000/svg")},m(s,r){v(s,e,r),R(e,t),R(e,n)},p:U,i:U,o:U,d(s){s&&h(e)}}}class it extends j{constructor(e){super(),Z(this,e,null,yo,W,{})}}function bn(o){let e,t,n,s,r;return t=new ss({props:{size:1,insetContent:!0,variant:"ghost",class:"c-checkpoint-tag","data-testid":"checkpoint-version-tag",$$slots:{default:[To]},$$scope:{ctx:o}}}),t.$on("click",o[17]),s=new ve({props:{variant:o[6]?"soft":"ghost-block",color:"neutral",size:1,disabled:o[6]||o[4],class:"c-revert-button","data-testid":"revert-button",$$slots:{default:[Ro]},$$scope:{ctx:o}}}),s.$on("click",o[12]),{c(){e=M("div"),C(t.$$.fragment),n=P(),C(s.$$.fragment),x(e,"class","c-checkpoint-container svelte-q20gs5"),x(e,"data-checkpoint-number",o[0]),V(e,"c-checkpoint-container--target-checkpoint",o[6]),V(e,"c-checkpoint-container--dimmed-marker",o[5])},m(c,a){v(c,e,a),_(t,e,null),R(e,n),_(s,e,null),r=!0},p(c,a){const i={};1048778&a&&(i.$$scope={dirty:a,ctx:c}),t.$set(i);const l={};64&a&&(l.variant=c[6]?"soft":"ghost-block"),80&a&&(l.disabled=c[6]||c[4]),1048656&a&&(l.$$scope={dirty:a,ctx:c}),s.$set(l),(!r||1&a)&&x(e,"data-checkpoint-number",c[0]),(!r||64&a)&&V(e,"c-checkpoint-container--target-checkpoint",c[6]),(!r||32&a)&&V(e,"c-checkpoint-container--dimmed-marker",c[5])},i(c){r||($(t.$$.fragment,c),$(s.$$.fragment,c),r=!0)},o(c){p(t.$$.fragment,c),p(s.$$.fragment,c),r=!1},d(c){c&&h(e),k(t),k(s)}}}function Co(o){let e,t;return e=new it({props:{slot:"leftIcon"}}),{c(){C(e.$$.fragment)},m(n,s){_(e,n,s),t=!0},p:U,i(n){t||($(e.$$.fragment,n),t=!0)},o(n){p(e.$$.fragment,n),t=!1},d(n){k(e,n)}}}function _o(o){let e,t;return{c(){e=F("Checkpoint "),t=F(o[3])},m(n,s){v(n,e,s),v(n,t,s)},p(n,s){8&s&&K(t,n[3])},d(n){n&&(h(e),h(t))}}}function ko(o){let e,t=Ae(o[7])+"";return{c(){e=F(t)},m(n,s){v(n,e,s)},p(n,s){128&s&&t!==(t=Ae(n[7])+"")&&K(e,t)},d(n){n&&h(e)}}}function bo(o){let e;return{c(){e=F(o[1])},m(t,n){v(t,e,n)},p(t,n){2&n&&K(e,t[1])},d(t){t&&h(e)}}}function Io(o){let e;function t(r,c){return r[1]?bo:r[6]?ko:void 0}let n=t(o),s=n&&n(o);return{c(){s&&s.c(),e=Q()},m(r,c){s&&s.m(r,c),v(r,e,c)},p(r,c){n===(n=t(r))&&s?s.p(r,c):(s&&s.d(1),s=n&&n(r),s&&(s.c(),s.m(e.parentNode,e)))},d(r){r&&h(e),s&&s.d(r)}}}function To(o){let e,t;return e=new nt({props:{size:1,shrink:!0,align:"left",$$slots:{grayText:[Io],text:[_o],leftIcon:[Co]},$$scope:{ctx:o}}}),{c(){C(e.$$.fragment)},m(n,s){_(e,n,s),t=!0},p(n,s){const r={};1048778&s&&(r.$$scope={dirty:s,ctx:n}),e.$set(r)},i(n){t||($(e.$$.fragment,n),t=!0)},o(n){p(e.$$.fragment,n),t=!1},d(n){k(e,n)}}}function So(o){let e,t;return e=new at({}),{c(){C(e.$$.fragment)},m(n,s){_(e,n,s),t=!0},i(n){t||($(e.$$.fragment,n),t=!0)},o(n){p(e.$$.fragment,n),t=!1},d(n){k(e,n)}}}function Ro(o){let e,t;return e=new Ie({props:{triggerOn:[He.Hover],content:o[6]||o[4]?"Cannot revert to current version":"Revert to this version",$$slots:{default:[So]},$$scope:{ctx:o}}}),{c(){C(e.$$.fragment)},m(n,s){_(e,n,s),t=!0},p(n,s){const r={};80&s&&(r.content=n[6]||n[4]?"Cannot revert to current version":"Revert to this version"),1048576&s&&(r.$$scope={dirty:s,ctx:n}),e.$set(r)},i(n){t||($(e.$$.fragment,n),t=!0)},o(n){p(e.$$.fragment,n),t=!1},d(n){k(e,n)}}}function Eo(o){let e,t,n=(!o[4]||o[2])&&bn(o);return{c(){n&&n.c(),e=Q()},m(s,r){n&&n.m(s,r),v(s,e,r),t=!0},p(s,[r]){!s[4]||s[2]?n?(n.p(s,r),20&r&&$(n,1)):(n=bn(s),n.c(),$(n,1),n.m(e.parentNode,e)):n&&(N(),p(n,1,1,()=>{n=null}),H())},i(s){t||($(n),t=!0)},o(s){p(n),t=!1},d(s){s&&h(e),n&&n.d(s)}}}function Mo(o,e,t){let n,s,r,c,a,i,l,u,d,m,g,{turn:w}=e;const L=ce("checkpointStore"),{targetCheckpointIdx:f,totalCheckpointCount:I,uuidToIdx:A}=L;function B(E){Ct(f,m=E,m)}return le(o,f,E=>t(15,m=E)),le(o,I,E=>t(14,d=E)),le(o,A,E=>t(16,g=E)),o.$$set=E=>{"turn"in E&&t(13,w=E.turn)},o.$$.update=()=>{var E,J,S;73728&o.$$.dirty&&t(0,n=g.get(w.uuid)??-1),8192&o.$$.dirty&&t(7,s=w.toTimestamp),49153&o.$$.dirty&&t(6,(J=d,r=(E=n)===(S=m)||S===void 0&&E===J-1)),49153&o.$$.dirty&&t(5,c=function(T,D,q){return T===q&&q!==void 0&&q<D-1}(n,d,m)),16385&o.$$.dirty&&t(4,a=n===d-1),1&o.$$.dirty&&t(3,i=n+1),8192&o.$$.dirty&&t(2,l=Le(w)),8192&o.$$.dirty&&t(1,u=Le(w)?function(T){var D,q;if((D=T.revertTarget)!=null&&D.uuid){const y=g.get(T.revertTarget.uuid);return y===void 0?void 0:`Reverted to Checkpoint ${y+1}`}return(q=T.revertTarget)!=null&&q.filePath?`Undid changes to ${T.revertTarget.filePath.relPath}`:void 0}(w):void 0)},[n,u,l,i,a,c,r,s,f,I,A,B,async function(){await L.revertToCheckpoint(w.uuid)},w,d,m,g,()=>B(n)]}class Fc extends j{constructor(e){super(),Z(this,e,Mo,Eo,W,{turn:13})}}function Lo(o){let e,t;return e=new it({props:{slot:"leftIcon"}}),{c(){C(e.$$.fragment)},m(n,s){_(e,n,s),t=!0},p:U,i(n){t||($(e.$$.fragment,n),t=!0)},o(n){p(e.$$.fragment,n),t=!1},d(n){k(e,n)}}}function In(o){let e,t,n,s,r,c,a=o[1]===1?"":"s";return{c(){e=M("span"),t=F("("),n=F(o[1]),s=F(" file"),r=F(a),c=F(")"),x(e,"class","c-checkpoint-files-count")},m(i,l){v(i,e,l),R(e,t),R(e,n),R(e,s),R(e,r),R(e,c)},p(i,l){2&l&&K(n,i[1]),2&l&&a!==(a=i[1]===1?"":"s")&&K(r,a)},d(i){i&&h(e)}}}function Ao(o){let e,t,n,s,r=o[1]>0&&In(o);return{c(){e=F("Checkpoint "),t=F(o[0]),n=P(),r&&r.c(),s=Q()},m(c,a){v(c,e,a),v(c,t,a),v(c,n,a),r&&r.m(c,a),v(c,s,a)},p(c,a){1&a&&K(t,c[0]),c[1]>0?r?r.p(c,a):(r=In(c),r.c(),r.m(s.parentNode,s)):r&&(r.d(1),r=null)},d(c){c&&(h(e),h(t),h(n),h(s)),r&&r.d(c)}}}function Fo(o){let e;return{c(){e=F(o[2])},m(t,n){v(t,e,n)},p(t,n){4&n&&K(e,t[2])},d(t){t&&h(e)}}}function qo(o){let e;return{c(){e=F(o[3])},m(t,n){v(t,e,n)},p(t,n){8&n&&K(e,t[3])},d(t){t&&h(e)}}}function zo(o){let e;function t(r,c){return r[3]?qo:r[2]?Fo:void 0}let n=t(o),s=n&&n(o);return{c(){s&&s.c(),e=Q()},m(r,c){s&&s.m(r,c),v(r,e,c)},p(r,c){n===(n=t(r))&&s?s.p(r,c):(s&&s.d(1),s=n&&n(r),s&&(s.c(),s.m(e.parentNode,e)))},d(r){r&&h(e),s&&s.d(r)}}}function Tn(o){let e,t,n;return t=new Pt({props:{totalAddedLines:o[4].totalAddedLines,totalRemovedLines:o[4].totalRemovedLines}}),{c(){e=M("div"),C(t.$$.fragment),x(e,"class","c-checkpoint-summary")},m(s,r){v(s,e,r),_(t,e,null),n=!0},p(s,r){const c={};16&r&&(c.totalAddedLines=s[4].totalAddedLines),16&r&&(c.totalRemovedLines=s[4].totalRemovedLines),t.$set(c)},i(s){n||($(t.$$.fragment,s),n=!0)},o(s){p(t.$$.fragment,s),n=!1},d(s){s&&h(e),k(t)}}}function Sn(o){let e,t;return e=new ve({props:{variant:"ghost-block",color:"neutral",size:1,class:"c-revert-button","data-testid":"revert-button",$$slots:{default:[Bo]},$$scope:{ctx:o}}}),e.$on("click",function(){be(o[7])&&o[7].apply(this,arguments)}),{c(){C(e.$$.fragment)},m(n,s){_(e,n,s),t=!0},p(n,s){o=n;const r={};256&s&&(r.$$scope={dirty:s,ctx:o}),e.$set(r)},i(n){t||($(e.$$.fragment,n),t=!0)},o(n){p(e.$$.fragment,n),t=!1},d(n){k(e,n)}}}function Po(o){let e,t;return e=new at({}),{c(){C(e.$$.fragment)},m(n,s){_(e,n,s),t=!0},i(n){t||($(e.$$.fragment,n),t=!0)},o(n){p(e.$$.fragment,n),t=!1},d(n){k(e,n)}}}function Bo(o){let e,t;return e=new Ie({props:{triggerOn:[He.Hover],content:"Revert to this Checkpoint",$$slots:{default:[Po]},$$scope:{ctx:o}}}),{c(){C(e.$$.fragment)},m(n,s){_(e,n,s),t=!0},p(n,s){const r={};256&s&&(r.$$scope={dirty:s,ctx:n}),e.$set(r)},i(n){t||($(e.$$.fragment,n),t=!0)},o(n){p(e.$$.fragment,n),t=!1},d(n){k(e,n)}}}function No(o){let e,t,n,s,r,c,a,i;n=new rt({}),r=new nt({props:{size:1,shrink:!0,align:"left",$$slots:{grayText:[zo],text:[Ao],leftIcon:[Lo]},$$scope:{ctx:o}}});let l=o[5]&&Tn(o),u=!o[6]&&Sn(o);return{c(){e=M("div"),t=M("div"),C(n.$$.fragment),s=P(),C(r.$$.fragment),c=P(),l&&l.c(),a=P(),u&&u.c(),x(t,"class","c-checkpoint-tag"),x(e,"class","c-checkpoint-header svelte-htx8xt")},m(d,m){v(d,e,m),R(e,t),_(n,t,null),R(t,s),_(r,t,null),R(e,c),l&&l.m(e,null),R(e,a),u&&u.m(e,null),i=!0},p(d,[m]){const g={};271&m&&(g.$$scope={dirty:m,ctx:d}),r.$set(g),d[5]?l?(l.p(d,m),32&m&&$(l,1)):(l=Tn(d),l.c(),$(l,1),l.m(e,a)):l&&(N(),p(l,1,1,()=>{l=null}),H()),d[6]?u&&(N(),p(u,1,1,()=>{u=null}),H()):u?(u.p(d,m),64&m&&$(u,1)):(u=Sn(d),u.c(),$(u,1),u.m(e,null))},i(d){i||($(n.$$.fragment,d),$(r.$$.fragment,d),$(l),$(u),i=!0)},o(d){p(n.$$.fragment,d),p(r.$$.fragment,d),p(l),p(u),i=!1},d(d){d&&h(e),k(n),k(r),l&&l.d(),u&&u.d()}}}function Ho(o,e,t){let{displayCheckpointIdx:n}=e,{filesCount:s=0}=e,{timestamp:r=""}=e,{revertMessage:c}=e,{diffSummary:a={totalAddedLines:0,totalRemovedLines:0}}=e,{hasChanges:i=!1}=e,{isTarget:l=!1}=e,{onRevertClick:u}=e;return o.$$set=d=>{"displayCheckpointIdx"in d&&t(0,n=d.displayCheckpointIdx),"filesCount"in d&&t(1,s=d.filesCount),"timestamp"in d&&t(2,r=d.timestamp),"revertMessage"in d&&t(3,c=d.revertMessage),"diffSummary"in d&&t(4,a=d.diffSummary),"hasChanges"in d&&t(5,i=d.hasChanges),"isTarget"in d&&t(6,l=d.isTarget),"onRevertClick"in d&&t(7,u=d.onRevertClick)},[n,s,r,c,a,i,l,u]}class Do extends j{constructor(e){super(),Z(this,e,Ho,No,W,{displayCheckpointIdx:0,filesCount:1,timestamp:2,revertMessage:3,diffSummary:4,hasChanges:5,isTarget:6,onRevertClick:7})}}function Rn(o,e,t){const n=o.slice();return n[33]=e[t],n}function En(o){let e,t,n,s,r,c,a;function i(u){o[27](u)}let l={class:"c-checkpoint-collapsible",stickyHeader:!0,$$slots:{header:[Go],default:[Jo]},$$scope:{ctx:o}};return o[3]!==void 0&&(l.collapsed=o[3]),t=new ct({props:l}),re.push(()=>Pe(t,"collapsed",i)),{c(){e=M("div"),C(t.$$.fragment),x(e,"class","c-checkpoint-container svelte-1e7odgw"),x(e,"data-checkpoint-number",o[2]),V(e,"c-checkpoint-container--target-checkpoint",o[11]),V(e,"c-checkpoint-container--dimmed-marker",o[10])},m(u,d){v(u,e,d),_(t,e,null),r=!0,c||(a=Kn(s=qt.call(null,e,{onVisible:o[28],scrollTarget:document.body})),c=!0)},p(u,d){const m={};6522&d[0]|32&d[1]&&(m.$$scope={dirty:d,ctx:u}),!n&&8&d[0]&&(n=!0,m.collapsed=u[3],Be(()=>n=!1)),t.$set(m),(!r||4&d[0])&&x(e,"data-checkpoint-number",u[2]),s&&be(s.update)&&1&d[0]&&s.update.call(null,{onVisible:u[28],scrollTarget:document.body}),(!r||2048&d[0])&&V(e,"c-checkpoint-container--target-checkpoint",u[11]),(!r||1024&d[0])&&V(e,"c-checkpoint-container--dimmed-marker",u[10])},i(u){r||($(t.$$.fragment,u),r=!0)},o(u){p(t.$$.fragment,u),r=!1},d(u){u&&h(e),k(t),c=!1,a()}}}function Oo(o){let e,t,n;return t=new ee({props:{size:1,color:"neutral",$$slots:{default:[Vo]},$$scope:{ctx:o}}}),{c(){e=M("div"),C(t.$$.fragment),x(e,"class","c-edits-list c-edits-list--empty svelte-1e7odgw")},m(s,r){v(s,e,r),_(t,e,null),n=!0},p(s,r){const c={};32&r[1]&&(c.$$scope={dirty:r,ctx:s}),t.$set(c)},i(s){n||($(t.$$.fragment,s),n=!0)},o(s){p(t.$$.fragment,s),n=!1},d(s){s&&h(e),k(t)}}}function Uo(o){let e,t,n=Fe(o[1]),s=[];for(let c=0;c<n.length;c+=1)s[c]=Mn(Rn(o,n,c));const r=c=>p(s[c],1,1,()=>{s[c]=null});return{c(){e=M("div");for(let c=0;c<s.length;c+=1)s[c].c();x(e,"class","c-edits-list svelte-1e7odgw")},m(c,a){v(c,e,a);for(let i=0;i<s.length;i+=1)s[i]&&s[i].m(e,null);t=!0},p(c,a){if(196610&a[0]){let i;for(n=Fe(c[1]),i=0;i<n.length;i+=1){const l=Rn(c,n,i);s[i]?(s[i].p(l,a),$(s[i],1)):(s[i]=Mn(l),s[i].c(),$(s[i],1),s[i].m(e,null))}for(N(),i=n.length;i<s.length;i+=1)r(i);H()}},i(c){if(!t){for(let a=0;a<n.length;a+=1)$(s[a]);t=!0}},o(c){s=s.filter(Boolean);for(let a=0;a<s.length;a+=1)p(s[a]);t=!1},d(c){c&&h(e),Yn(s,c)}}}function Vo(o){let e;return{c(){e=F("No changes to show")},m(t,n){v(t,e,n)},d(t){t&&h(e)}}}function Mn(o){let e,t;function n(){return o[25](o[33])}function s(){return o[26](o[33])}return e=new Zt({props:{qualifiedPathName:o[33].qualifiedPathName,lineChanges:o[33].changesSummary,onClickFile:n,onClickReview:s}}),{c(){C(e.$$.fragment)},m(r,c){_(e,r,c),t=!0},p(r,c){o=r;const a={};2&c[0]&&(a.qualifiedPathName=o[33].qualifiedPathName),2&c[0]&&(a.lineChanges=o[33].changesSummary),2&c[0]&&(a.onClickFile=n),2&c[0]&&(a.onClickReview=s),e.$set(a)},i(r){t||($(e.$$.fragment,r),t=!0)},o(r){p(e.$$.fragment,r),t=!1},d(r){k(e,r)}}}function Jo(o){let e,t,n,s;const r=[Uo,Oo],c=[];function a(i,l){return i[4]?0:i[3]?-1:1}return~(e=a(o))&&(t=c[e]=r[e](o)),{c(){t&&t.c(),n=Q()},m(i,l){~e&&c[e].m(i,l),v(i,n,l),s=!0},p(i,l){let u=e;e=a(i),e===u?~e&&c[e].p(i,l):(t&&(N(),p(c[u],1,1,()=>{c[u]=null}),H()),~e?(t=c[e],t?t.p(i,l):(t=c[e]=r[e](i),t.c()),$(t,1),t.m(n.parentNode,n)):t=null)},i(i){s||($(t),s=!0)},o(i){p(t),s=!1},d(i){i&&h(n),~e&&c[e].d(i)}}}function Go(o){let e,t;return e=new Do({props:{slot:"header",displayCheckpointIdx:o[8],filesCount:o[1].length,timestamp:Ae(o[12]),revertMessage:o[6],diffSummary:o[5],hasChanges:o[4],isTarget:o[11],onRevertClick:o[18]}}),{c(){C(e.$$.fragment)},m(n,s){_(e,n,s),t=!0},p(n,s){const r={};256&s[0]&&(r.displayCheckpointIdx=n[8]),2&s[0]&&(r.filesCount=n[1].length),4096&s[0]&&(r.timestamp=Ae(n[12])),64&s[0]&&(r.revertMessage=n[6]),32&s[0]&&(r.diffSummary=n[5]),16&s[0]&&(r.hasChanges=n[4]),2048&s[0]&&(r.isTarget=n[11]),e.$set(r)},i(n){t||($(e.$$.fragment,n),t=!0)},o(n){p(e.$$.fragment,n),t=!1},d(n){k(e,n)}}}function jo(o){let e,t,n=(!o[9]||o[7])&&En(o);return{c(){n&&n.c(),e=Q()},m(s,r){n&&n.m(s,r),v(s,e,r),t=!0},p(s,r){!s[9]||s[7]?n?(n.p(s,r),640&r[0]&&$(n,1)):(n=En(s),n.c(),$(n,1),n.m(e.parentNode,e)):n&&(N(),p(n,1,1,()=>{n=null}),H())},i(s){t||($(n),t=!0)},o(s){p(n),t=!1},d(s){s&&h(e),n&&n.d(s)}}}function Zo(o,e,t){let n,s,r,c,a,i,l,u,d,m,g,w,L,f,I,{turn:A}=e;const B=ce("checkpointStore"),E=ce("chatModel"),{targetCheckpointIdx:J,totalCheckpointCount:S,uuidToIdx:T}=B;le(o,J,O=>t(23,f=O)),le(o,S,O=>t(22,L=O)),le(o,T,O=>t(24,I=O));let D=!0;function q(O){E==null||E.extensionClient.openFile({repoRoot:O.rootPath,pathName:O.relPath,allowOutOfWorkspace:!0})}function y(O){E==null||E.extensionClient.showAgentReview(O,r,s,!1)}let X=[],z=!1,G=!1;return o.$$set=O=>{"turn"in O&&t(19,A=O.turn)},o.$$.update=()=>{var O,$e,se;17301504&o.$$.dirty[0]&&t(2,n=I.get(A.uuid)??-1),524288&o.$$.dirty[0]&&t(12,s=A.toTimestamp),524288&o.$$.dirty[0]&&(r=A.fromTimestamp),12582916&o.$$.dirty[0]&&t(11,($e=L,c=(O=n)===(se=f)||se===void 0&&O===$e-1)),12582916&o.$$.dirty[0]&&t(10,a=function(b,ae,ue){return b===ue&&ue!==void 0&&ue<ae-1}(n,L,f)),4194308&o.$$.dirty[0]&&t(9,i=n===L-1),4&o.$$.dirty[0]&&t(8,l=n+1),524288&o.$$.dirty[0]&&t(7,u=Le(A)),524288&o.$$.dirty[0]&&t(6,d=Le(A)?function(b){var ae,ue;if((ae=b.revertTarget)!=null&&ae.uuid){const we=I.get(b.revertTarget.uuid);return we===void 0?void 0:`Reverted to Checkpoint ${we+1}`}return(ue=b.revertTarget)!=null&&ue.filePath?`Undid changes to ${b.revertTarget.filePath.relPath}`:void 0}(A):void 0),2621441&o.$$.dirty[0]&&z&&A&&!G&&B.getCheckpointSummary(A).then(b=>{t(20,X=b),t(21,G=!0)}),1048576&o.$$.dirty[0]&&t(1,m=X.filter(b=>b.changesSummary&&(b.changesSummary.totalAddedLines>0||b.changesSummary.totalRemovedLines>0))),2&o.$$.dirty[0]&&t(5,g=m.reduce((b,ae)=>{var ue,we;return b.totalAddedLines+=((ue=ae.changesSummary)==null?void 0:ue.totalAddedLines)??0,b.totalRemovedLines+=((we=ae.changesSummary)==null?void 0:we.totalRemovedLines)??0,b},{totalAddedLines:0,totalRemovedLines:0})),2&o.$$.dirty[0]&&t(4,w=m.length>0)},[z,m,n,D,w,g,d,u,l,i,a,c,s,J,S,T,q,y,function(){B.revertToCheckpoint(A.uuid)},A,X,G,L,f,I,O=>q(O.qualifiedPathName),O=>y(O.qualifiedPathName),function(O){D=O,t(3,D)},()=>t(0,z=!0)]}class qc extends j{constructor(e){super(),Z(this,e,Zo,jo,W,{turn:19},null,[-1,-1])}}const Ln={[Ve.SUCCESS]:"success",[Ve.FAILED]:"error",[Ve.SKIPPED]:"skipped"},An={[pe.success]:"success",[pe.failure]:"error",[pe.running]:null,[pe.unknown]:"unknown",[pe.skipped]:"skipped"};function Fn(o){return o in Ln?Ln[o]:o in An?An[o]:null}function qn(o){switch(o){case"success":return"Success";case"error":return"Failed";case"skipped":return"Skipped";case"unknown":return"Unknown";case null:return"Running"}}function zn(o){let e,t,n;return t=new ee({props:{size:1,type:"monospace",$$slots:{default:[Wo]},$$scope:{ctx:o}}}),{c(){e=M("div"),C(t.$$.fragment),x(e,"class","c-command-output__code-block svelte-1t0700a")},m(s,r){v(s,e,r),_(t,e,null),n=!0},p(s,r){const c={};16386&r&&(c.$$scope={dirty:r,ctx:s}),t.$set(c)},i(s){n||($(t.$$.fragment,s),n=!0)},o(s){p(t.$$.fragment,s),n=!1},d(s){s&&h(e),k(t)}}}function Wo(o){let e;return{c(){e=F(o[1])},m(t,n){v(t,e,n)},p(t,n){2&n&&K(e,t[1])},d(t){t&&h(e)}}}function Pn(o){let e,t,n,s;const r=[Yo,Ko],c=[];function a(i,l){return i[5]?0:1}return t=a(o),n=c[t]=r[t](o),{c(){e=M("div"),n.c(),x(e,"class","c-command-output__code-block c-command-output__code-block--output svelte-1t0700a")},m(i,l){v(i,e,l),c[t].m(e,null),s=!0},p(i,l){let u=t;t=a(i),t===u?c[t].p(i,l):(N(),p(c[u],1,1,()=>{c[u]=null}),H(),n=c[t],n?n.p(i,l):(n=c[t]=r[t](i),n.c()),$(n,1),n.m(e,null))},i(i){s||($(n),s=!0)},o(i){p(n),s=!1},d(i){i&&h(e),c[t].d()}}}function Ko(o){let e,t;return e=new ee({props:{size:1,type:"monospace",$$slots:{default:[Xo]},$$scope:{ctx:o}}}),{c(){C(e.$$.fragment)},m(n,s){_(e,n,s),t=!0},p(n,s){const r={};16388&s&&(r.$$scope={dirty:s,ctx:n}),e.$set(r)},i(n){t||($(e.$$.fragment,n),t=!0)},o(n){p(e.$$.fragment,n),t=!1},d(n){k(e,n)}}}function Yo(o){let e,t;return e=new os.Root({props:{$$slots:{default:[Qo]},$$scope:{ctx:o}}}),{c(){C(e.$$.fragment)},m(n,s){_(e,n,s),t=!0},p(n,s){const r={};16452&s&&(r.$$scope={dirty:s,ctx:n}),e.$set(r)},i(n){t||($(e.$$.fragment,n),t=!0)},o(n){p(e.$$.fragment,n),t=!1},d(n){k(e,n)}}}function Xo(o){let e;return{c(){e=F(o[2])},m(t,n){v(t,e,n)},p(t,n){4&n&&K(e,t[2])},d(t){t&&h(e)}}}function Qo(o){let e,t;return e=new rs({props:{text:o[2],lang:o[6]}}),{c(){C(e.$$.fragment)},m(n,s){_(e,n,s),t=!0},p(n,s){const r={};4&s&&(r.text=n[2]),64&s&&(r.lang=n[6]),e.$set(r)},i(n){t||($(e.$$.fragment,n),t=!0)},o(n){p(e.$$.fragment,n),t=!1},d(n){k(e,n)}}}function er(o){let e,t,n,s,r=o[1]&&!o[0]&&zn(o),c=o[2]&&(!o[3]||o[3]!=="skipped")&&Pn(o);const a=o[12].default,i=ye(a,o,o[14],null);return{c(){e=M("div"),r&&r.c(),t=P(),c&&c.c(),n=P(),i&&i.c(),x(e,"class","c-command-output__command-details")},m(l,u){v(l,e,u),r&&r.m(e,null),R(e,t),c&&c.m(e,null),R(e,n),i&&i.m(e,null),s=!0},p(l,u){l[1]&&!l[0]?r?(r.p(l,u),3&u&&$(r,1)):(r=zn(l),r.c(),$(r,1),r.m(e,t)):r&&(N(),p(r,1,1,()=>{r=null}),H()),!l[2]||l[3]&&l[3]==="skipped"?c&&(N(),p(c,1,1,()=>{c=null}),H()):c?(c.p(l,u),12&u&&$(c,1)):(c=Pn(l),c.c(),$(c,1),c.m(e,n)),i&&i.p&&(!s||16384&u)&&Ce(i,a,l,l[14],s?ke(a,l[14],u,null):_e(l[14]),null)},i(l){s||($(r),$(c),$(i,l),s=!0)},o(l){p(r),p(c),p(i,l),s=!1},d(l){l&&h(e),r&&r.d(),c&&c.d(),i&&i.d(l)}}}function nr(o){let e;return{c(){e=M("div"),x(e,"class","c-command-output__collapsible-header__spacer svelte-1t0700a")},m(t,n){v(t,e,n)},i:U,o:U,d(t){t&&h(e)}}}function tr(o){let e,t;return e=new rt({}),{c(){C(e.$$.fragment)},m(n,s){_(e,n,s),t=!0},i(n){t||($(e.$$.fragment,n),t=!0)},o(n){p(e.$$.fragment,n),t=!1},d(n){k(e,n)}}}function sr(o){let e,t;return e=new ee({props:{size:1,type:"monospace",$$slots:{default:[rr]},$$scope:{ctx:o}}}),{c(){C(e.$$.fragment)},m(n,s){_(e,n,s),t=!0},p(n,s){const r={};16386&s&&(r.$$scope={dirty:s,ctx:n}),e.$set(r)},i(n){t||($(e.$$.fragment,n),t=!0)},o(n){p(e.$$.fragment,n),t=!1},d(n){k(e,n)}}}function or(o){let e,t;return e=new ee({props:{size:1,weight:"medium",$$slots:{default:[cr]},$$scope:{ctx:o}}}),{c(){C(e.$$.fragment)},m(n,s){_(e,n,s),t=!0},p(n,s){const r={};16385&s&&(r.$$scope={dirty:s,ctx:n}),e.$set(r)},i(n){t||($(e.$$.fragment,n),t=!0)},o(n){p(e.$$.fragment,n),t=!1},d(n){k(e,n)}}}function rr(o){let e;return{c(){e=F(o[1])},m(t,n){v(t,e,n)},p(t,n){2&n&&K(e,t[1])},d(t){t&&h(e)}}}function cr(o){let e;return{c(){e=F(o[0])},m(t,n){v(t,e,n)},p(t,n){1&n&&K(e,t[0])},d(t){t&&h(e)}}}function ar(o){let e,t,n,s=o[3]==="skipped"&&Bn(o);return t=new Ie({props:{content:qn(o[3]),triggerOn:[He.Hover],$$slots:{default:[ur]},$$scope:{ctx:o}}}),{c(){s&&s.c(),e=P(),C(t.$$.fragment)},m(r,c){s&&s.m(r,c),v(r,e,c),_(t,r,c),n=!0},p(r,c){r[3]==="skipped"?s?8&c&&$(s,1):(s=Bn(r),s.c(),$(s,1),s.m(e.parentNode,e)):s&&(N(),p(s,1,1,()=>{s=null}),H());const a={};8&c&&(a.content=qn(r[3])),16392&c&&(a.$$scope={dirty:c,ctx:r}),t.$set(a)},i(r){n||($(s),$(t.$$.fragment,r),n=!0)},o(r){p(s),p(t.$$.fragment,r),n=!1},d(r){r&&h(e),s&&s.d(r),k(t,r)}}}function ir(o){let e,t,n;return t=new he({props:{size:1}}),{c(){e=M("div"),C(t.$$.fragment),x(e,"class","c-command-output__status-icon c-command-output__status-icon--loading svelte-1t0700a")},m(s,r){v(s,e,r),_(t,e,null),n=!0},p:U,i(s){n||($(t.$$.fragment,s),n=!0)},o(s){p(t.$$.fragment,s),n=!1},d(s){s&&h(e),k(t)}}}function Bn(o){let e,t;return e=new ee({props:{size:1,$$slots:{default:[lr]},$$scope:{ctx:o}}}),{c(){C(e.$$.fragment)},m(n,s){_(e,n,s),t=!0},i(n){t||($(e.$$.fragment,n),t=!0)},o(n){p(e.$$.fragment,n),t=!1},d(n){k(e,n)}}}function lr(o){let e;return{c(){e=F("Skipped")},m(t,n){v(t,e,n)},d(t){t&&h(e)}}}function ur(o){let e,t,n;var s=o[11](o[3]);return s&&(t=sn(s,{})),{c(){e=M("div"),t&&C(t.$$.fragment),x(e,"class","c-command-output__status-icon svelte-1t0700a"),V(e,"c-command-output__status-icon--success",o[3]==="success"),V(e,"c-command-output__status-icon--error",o[3]==="error"),V(e,"c-command-output__status-icon--warning",o[3]==="skipped")},m(r,c){v(r,e,c),t&&_(t,e,null),n=!0},p(r,c){if(8&c&&s!==(s=r[11](r[3]))){if(t){N();const a=t;p(a.$$.fragment,1,0,()=>{k(a,1)}),H()}s?(t=sn(s,{}),C(t.$$.fragment),$(t.$$.fragment,1),_(t,e,null)):t=null}(!n||8&c)&&V(e,"c-command-output__status-icon--success",r[3]==="success"),(!n||8&c)&&V(e,"c-command-output__status-icon--error",r[3]==="error"),(!n||8&c)&&V(e,"c-command-output__status-icon--warning",r[3]==="skipped")},i(r){n||(t&&$(t.$$.fragment,r),n=!0)},o(r){t&&p(t.$$.fragment,r),n=!1},d(r){r&&h(e),t&&k(t)}}}function Nn(o){let e,t;return e=new Ie({props:{content:o[7],align:"end",$$slots:{default:[$r]},$$scope:{ctx:o}}}),{c(){C(e.$$.fragment)},m(n,s){_(e,n,s),t=!0},p(n,s){const r={};128&s&&(r.content=n[7]),17412&s&&(r.$$scope={dirty:s,ctx:n}),e.$set(r)},i(n){t||($(e.$$.fragment,n),t=!0)},o(n){p(e.$$.fragment,n),t=!1},d(n){k(e,n)}}}function dr(o){let e,t;return e=new ts({}),{c(){C(e.$$.fragment)},m(n,s){_(e,n,s),t=!0},i(n){t||($(e.$$.fragment,n),t=!0)},o(n){p(e.$$.fragment,n),t=!1},d(n){k(e,n)}}}function $r(o){let e,t;return e=new ve({props:{variant:"ghost-block",color:"neutral",size:1,$$slots:{default:[dr]},$$scope:{ctx:o}}}),e.$on("click",o[13]),{c(){C(e.$$.fragment)},m(n,s){_(e,n,s),t=!0},p(n,s){const r={};16384&s&&(r.$$scope={dirty:s,ctx:n}),e.$set(r)},i(n){t||($(e.$$.fragment,n),t=!0)},o(n){p(e.$$.fragment,n),t=!1},d(n){k(e,n)}}}function mr(o){let e,t,n,s,r,c,a,i,l,u,d,m;const g=[tr,nr],w=[];function L(T,D){return T[8]&&T[3]!=="skipped"?0:1}t=L(o),n=w[t]=g[t](o);const f=[or,sr],I=[];function A(T,D){return T[0]?0:1}r=A(o),c=I[r]=f[r](o);const B=[ir,ar],E=[];function J(T,D){return T[9]?0:T[3]!==null?1:-1}~(l=J(o))&&(u=E[l]=B[l](o));let S=o[2]&&(!o[3]||o[3]!=="skipped")&&!o[9]&&Nn(o);return{c(){e=M("div"),n.c(),s=P(),c.c(),a=P(),i=M("div"),u&&u.c(),d=P(),S&&S.c(),x(i,"class","c-command-output__status-indicator svelte-1t0700a"),x(e,"slot","header"),x(e,"class","c-command-output__collapsible-header svelte-1t0700a")},m(T,D){v(T,e,D),w[t].m(e,null),R(e,s),I[r].m(e,null),R(e,a),R(e,i),~l&&E[l].m(i,null),R(i,d),S&&S.m(i,null),m=!0},p(T,D){let q=t;t=L(T),t!==q&&(N(),p(w[q],1,1,()=>{w[q]=null}),H(),n=w[t],n||(n=w[t]=g[t](T),n.c()),$(n,1),n.m(e,s));let y=r;r=A(T),r===y?I[r].p(T,D):(N(),p(I[y],1,1,()=>{I[y]=null}),H(),c=I[r],c?c.p(T,D):(c=I[r]=f[r](T),c.c()),$(c,1),c.m(e,a));let X=l;l=J(T),l===X?~l&&E[l].p(T,D):(u&&(N(),p(E[X],1,1,()=>{E[X]=null}),H()),~l?(u=E[l],u?u.p(T,D):(u=E[l]=B[l](T),u.c()),$(u,1),u.m(i,d)):u=null),!T[2]||T[3]&&T[3]==="skipped"||T[9]?S&&(N(),p(S,1,1,()=>{S=null}),H()):S?(S.p(T,D),524&D&&$(S,1)):(S=Nn(T),S.c(),$(S,1),S.m(i,null))},i(T){m||($(n),$(c),$(u),$(S),m=!0)},o(T){p(n),p(c),p(u),p(S),m=!1},d(T){T&&h(e),w[t].d(),I[r].d(),~l&&E[l].d(),S&&S.d()}}}function pr(o){let e,t,n;return t=new ct({props:{collapsed:o[4],$$slots:{header:[mr],default:[er]},$$scope:{ctx:o}}}),{c(){e=M("div"),C(t.$$.fragment),x(e,"class","c-command-output__container svelte-1t0700a")},m(s,r){v(s,e,r),_(t,e,null),n=!0},p(s,[r]){const c={};16&r&&(c.collapsed=s[4]),18415&r&&(c.$$scope={dirty:r,ctx:s}),t.$set(c)},i(s){n||($(t.$$.fragment,s),n=!0)},o(s){p(t.$$.fragment,s),n=!1},d(s){s&&h(e),k(t)}}}function gr(o,e,t){let{$$slots:n={},$$scope:s}=e,{title:r=""}=e,{command:c=""}=e,{output:a=null}=e,{status:i=null}=e,{collapsed:l=!1}=e,{useMonaco:u=!1}=e,{monacoLang:d="bash"}=e,{viewButtonTooltip:m="View full output in editor"}=e,{showCollapseButton:g=!0}=e,{isLoading:w=!1}=e,{onViewOutput:L}=e;return o.$$set=f=>{"title"in f&&t(0,r=f.title),"command"in f&&t(1,c=f.command),"output"in f&&t(2,a=f.output),"status"in f&&t(3,i=f.status),"collapsed"in f&&t(4,l=f.collapsed),"useMonaco"in f&&t(5,u=f.useMonaco),"monacoLang"in f&&t(6,d=f.monacoLang),"viewButtonTooltip"in f&&t(7,m=f.viewButtonTooltip),"showCollapseButton"in f&&t(8,g=f.showCollapseButton),"isLoading"in f&&t(9,w=f.isLoading),"onViewOutput"in f&&t(10,L=f.onViewOutput),"$$scope"in f&&t(14,s=f.$$scope)},[r,c,a,i,l,u,d,m,g,w,L,function(f){return f==="success"||f==="skipped"?et:Bt},n,f=>L(f,a),s]}class fr extends j{constructor(e){super(),Z(this,e,gr,pr,W,{title:0,command:1,output:2,status:3,collapsed:4,useMonaco:5,monacoLang:6,viewButtonTooltip:7,showCollapseButton:8,isLoading:9,onViewOutput:10})}}function Hn(o,e,t){const n=o.slice();return n[15]=e[t],n}function hr(o){let e,t,n,s,r;return t=new ee({props:{size:1,color:"secondary",$$slots:{default:[wr]},$$scope:{ctx:o}}}),s=new he({props:{size:1}}),{c(){e=M("div"),C(t.$$.fragment),n=P(),C(s.$$.fragment),x(e,"class","c-agent-no-setup-logs svelte-12293rd")},m(c,a){v(c,e,a),_(t,e,null),R(e,n),_(s,e,null),r=!0},p(c,a){const i={};262144&a&&(i.$$scope={dirty:a,ctx:c}),t.$set(i)},i(c){r||($(t.$$.fragment,c),$(s.$$.fragment,c),r=!0)},o(c){p(t.$$.fragment,c),p(s.$$.fragment,c),r=!1},d(c){c&&h(e),k(t),k(s)}}}function vr(o){let e,t,n,s,r,c,a,i,l,u,d,m,g,w,L,f,I,A;r=new ve({props:{variant:"ghost",color:"neutral",size:1,class:"c-agent-setup-logs-toggle-button "+(o[2]?"c-agent-setup-logs-toggle-button--expanded":""),$$slots:{default:[xr]},$$scope:{ctx:o}}}),r.$on("click",o[7]);const B=[Cr,yr],E=[];function J(z,G){return z[0]?0:1}a=J(o),i=E[a]=B[a](o);const S=[Ir,br],T=[];function D(z,G){return z[0]?0:1}d=D(o),m=T[d]=S[d](o);let q=Fe(o[3].steps),y=[];for(let z=0;z<q.length;z+=1)y[z]=Dn(Hn(o,q,z));const X=z=>p(y[z],1,1,()=>{y[z]=null});return{c(){e=M("div"),t=M("div"),n=M("div"),s=M("div"),C(r.$$.fragment),c=P(),i.c(),l=P(),u=M("div"),m.c(),g=P(),w=M("div"),L=M("div");for(let z=0;z<y.length;z+=1)y[z].c();x(s,"class","c-agent-setup-logs-summary-left svelte-12293rd"),x(u,"class","c-agent-setup-logs-summary-icon svelte-12293rd"),x(n,"class","c-agent-setup-logs-summary-content svelte-12293rd"),x(t,"class","c-agent-setup-logs-summary svelte-12293rd"),x(t,"role","button"),x(t,"tabindex","0"),x(t,"aria-expanded",o[2]),x(t,"aria-controls","agent-setup-logs-details"),x(L,"class","c-agent-setup-logs svelte-12293rd"),x(w,"class","c-agent-setup-logs-wrapper svelte-12293rd"),V(w,"is-hidden",!o[2]),x(e,"class","c-agent-setup-logs-container svelte-12293rd"),V(e,"c-agent-setup-logs-container--loading",!o[0])},m(z,G){v(z,e,G),R(e,t),R(t,n),R(n,s),_(r,s,null),R(s,c),E[a].m(s,null),R(n,l),R(n,u),T[d].m(u,null),R(e,g),R(e,w),R(w,L);for(let O=0;O<y.length;O+=1)y[O]&&y[O].m(L,null);o[13](e),f=!0,I||(A=[te(t,"click",o[6]),te(t,"keydown",o[8])],I=!0)},p(z,G){const O={};4&G&&(O.class="c-agent-setup-logs-toggle-button "+(z[2]?"c-agent-setup-logs-toggle-button--expanded":"")),262144&G&&(O.$$scope={dirty:G,ctx:z}),r.$set(O);let $e=a;a=J(z),a!==$e&&(N(),p(E[$e],1,1,()=>{E[$e]=null}),H(),i=E[a],i||(i=E[a]=B[a](z),i.c()),$(i,1),i.m(s,null));let se=d;if(d=D(z),d!==se&&(N(),p(T[se],1,1,()=>{T[se]=null}),H(),m=T[d],m||(m=T[d]=S[d](z),m.c()),$(m,1),m.m(u,null)),(!f||4&G)&&x(t,"aria-expanded",z[2]),552&G){let b;for(q=Fe(z[3].steps),b=0;b<q.length;b+=1){const ae=Hn(z,q,b);y[b]?(y[b].p(ae,G),$(y[b],1)):(y[b]=Dn(ae),y[b].c(),$(y[b],1),y[b].m(L,null))}for(N(),b=q.length;b<y.length;b+=1)X(b);H()}(!f||4&G)&&V(w,"is-hidden",!z[2]),(!f||1&G)&&V(e,"c-agent-setup-logs-container--loading",!z[0])},i(z){if(!f){$(r.$$.fragment,z),$(i),$(m);for(let G=0;G<q.length;G+=1)$(y[G]);f=!0}},o(z){p(r.$$.fragment,z),p(i),p(m),y=y.filter(Boolean);for(let G=0;G<y.length;G+=1)p(y[G]);f=!1},d(z){z&&h(e),k(r),E[a].d(),T[d].d(),Yn(y,z),o[13](null),I=!1,ze(A)}}}function wr(o){let e;return{c(){e=F("Waiting to start agent environment...")},m(t,n){v(t,e,n)},d(t){t&&h(e)}}}function xr(o){let e,t;return e=new cs({}),{c(){C(e.$$.fragment)},m(n,s){_(e,n,s),t=!0},i(n){t||($(e.$$.fragment,n),t=!0)},o(n){p(e.$$.fragment,n),t=!1},d(n){k(e,n)}}}function yr(o){let e,t;return e=new ee({props:{size:1,class:"c-agent-setup-logs-summary-text",$$slots:{default:[_r]},$$scope:{ctx:o}}}),{c(){C(e.$$.fragment)},m(n,s){_(e,n,s),t=!0},i(n){t||($(e.$$.fragment,n),t=!0)},o(n){p(e.$$.fragment,n),t=!1},d(n){k(e,n)}}}function Cr(o){let e,t;return e=new ee({props:{size:1,class:"c-agent-setup-logs-summary-text",$$slots:{default:[kr]},$$scope:{ctx:o}}}),{c(){C(e.$$.fragment)},m(n,s){_(e,n,s),t=!0},i(n){t||($(e.$$.fragment,n),t=!0)},o(n){p(e.$$.fragment,n),t=!1},d(n){k(e,n)}}}function _r(o){let e;return{c(){e=F("Environment is being created...")},m(t,n){v(t,e,n)},d(t){t&&h(e)}}}function kr(o){let e;return{c(){e=F("Environment created")},m(t,n){v(t,e,n)},d(t){t&&h(e)}}}function br(o){let e,t;return e=new he({props:{size:1}}),{c(){C(e.$$.fragment)},m(n,s){_(e,n,s),t=!0},i(n){t||($(e.$$.fragment,n),t=!0)},o(n){p(e.$$.fragment,n),t=!1},d(n){k(e,n)}}}function Ir(o){let e,t;return e=new et({}),{c(){C(e.$$.fragment)},m(n,s){_(e,n,s),t=!0},i(n){t||($(e.$$.fragment,n),t=!0)},o(n){p(e.$$.fragment,n),t=!1},d(n){k(e,n)}}}function Dn(o){let e,t;return e=new fr({props:{title:o[15].step_description,output:o[15].logs,status:Fn(o[15].status),isLoading:o[9](o[15].status),collapsed:!o[9](o[15].status),showCollapseButton:!!o[15].logs,viewButtonTooltip:"View full output in editor",onViewOutput:o[12]}}),{c(){C(e.$$.fragment)},m(n,s){_(e,n,s),t=!0},p(n,s){const r={};8&s&&(r.title=n[15].step_description),8&s&&(r.output=n[15].logs),8&s&&(r.status=Fn(n[15].status)),8&s&&(r.isLoading=n[9](n[15].status)),8&s&&(r.collapsed=!n[9](n[15].status)),8&s&&(r.showCollapseButton=!!n[15].logs),e.$set(r)},i(n){t||($(e.$$.fragment,n),t=!0)},o(n){p(e.$$.fragment,n),t=!1},d(n){k(e,n)}}}function Tr(o){let e,t,n,s;const r=[vr,hr],c=[];function a(i,l){return i[3]&&i[3].steps&&i[3].steps.length>0?0:1}return e=a(o),t=c[e]=r[e](o),{c(){t.c(),n=Q()},m(i,l){c[e].m(i,l),v(i,n,l),s=!0},p(i,[l]){let u=e;e=a(i),e===u?c[e].p(i,l):(N(),p(c[u],1,1,()=>{c[u]=null}),H(),t=c[e],t?t.p(i,l):(t=c[e]=r[e](i),t.c()),$(t,1),t.m(n.parentNode,n))},i(i){s||($(t),s=!0)},o(i){p(t),s=!1},d(i){i&&h(n),c[e].d(i)}}}function Sr(o,e,t){let n,s,r,c,a;const i=ce(qe.key);le(o,i,g=>t(11,c=g));const l=ce("chatModel");let u=!1;function d(g){g&&l&&l.extensionClient.openScratchFile(g,"plaintext")}function m(){t(2,u=!u)}return o.$$.update=()=>{var g;2048&o.$$.dirty&&t(10,n=((g=c==null?void 0:c.currentAgent)==null?void 0:g.status)||Te.agentUnspecified),1024&o.$$.dirty&&t(0,s=[Te.agentIdle,Te.agentRunning,Te.agentFailed].includes(n)),2048&o.$$.dirty&&t(3,r=c==null?void 0:c.agentSetupLogs),1&o.$$.dirty&&t(2,u=!s)},[s,a,u,r,i,d,m,function(g){g.stopPropagation(),m()},function(g){g.key!=="Enter"&&g.key!==" "||(g.preventDefault(),m())},function(g){return g===pe.running&&!s},n,c,(g,w)=>d(w),function(g){re[g?"unshift":"push"](()=>{a=g,t(1,a)})}]}class zc extends j{constructor(e){super(),Z(this,e,Sr,Tr,W,{})}}function Rr(o){let e;const t=o[3].default,n=ye(t,o,o[4],null);return{c(){n&&n.c()},m(s,r){n&&n.m(s,r),e=!0},p(s,r){n&&n.p&&(!e||16&r)&&Ce(n,t,s,s[4],e?ke(t,s[4],r,null):_e(s[4]),null)},i(s){e||($(n,s),e=!0)},o(s){p(n,s),e=!1},d(s){n&&n.d(s)}}}function Er(o){let e,t;return e=new zt({props:{class:"c-chat-floating-container c-chat-floating-container--"+o[0],xPos:o[1],yPos:o[2],$$slots:{default:[Rr]},$$scope:{ctx:o}}}),{c(){C(e.$$.fragment)},m(n,s){_(e,n,s),t=!0},p(n,[s]){const r={};1&s&&(r.class="c-chat-floating-container c-chat-floating-container--"+n[0]),2&s&&(r.xPos=n[1]),4&s&&(r.yPos=n[2]),16&s&&(r.$$scope={dirty:s,ctx:n}),e.$set(r)},i(n){t||($(e.$$.fragment,n),t=!0)},o(n){p(e.$$.fragment,n),t=!1},d(n){k(e,n)}}}function Mr(o,e,t){let{$$slots:n={},$$scope:s}=e,{position:r="bottom"}=e,{xPos:c="middle"}=e,{yPos:a=r==="top"?"top":"bottom"}=e;return o.$$set=i=>{"position"in i&&t(0,r=i.position),"xPos"in i&&t(1,c=i.xPos),"yPos"in i&&t(2,a=i.yPos),"$$scope"in i&&t(4,s=i.$$scope)},[r,c,a,n,s]}class Lr extends j{constructor(e){super(),Z(this,e,Mr,Er,W,{position:0,xPos:1,yPos:2})}}function Ar(o){let e,t,n=[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 384 512"},o[0]],s={};for(let r=0;r<n.length;r+=1)s=xe(s,n[r]);return{c(){e=me("svg"),t=new _t(!0),this.h()},l(r){e=kt(r,"svg",{xmlns:!0,"data-ds-icon":!0,viewBox:!0});var c=bt(e);t=It(c,!0),c.forEach(h),this.h()},h(){t.a=null,on(e,s)},m(r,c){Tt(r,e,c),t.m('<!--! Font Awesome Pro 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2024 Fonticons, Inc.--><path d="M174.6 472.6c4.5 4.7 10.8 7.4 17.4 7.4s12.8-2.7 17.4-7.4l168-176c9.2-9.6 8.8-24.8-.8-33.9s-24.8-8.8-33.9.8L216 396.1V56c0-13.3-10.7-24-24-24s-24 10.7-24 24v340.1L41.4 263.4c-9.2-9.6-24.3-9.9-33.9-.8s-9.9 24.3-.8 33.9l168 176z"/>',e)},p(r,[c]){on(e,s=je(n,[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 384 512"},1&c&&r[0]]))},i:U,o:U,d(r){r&&h(e)}}}function Fr(o,e,t){return o.$$set=n=>{t(0,e=xe(xe({},e),rn(n)))},[e=rn(e)]}class qr extends j{constructor(e){super(),Z(this,e,Fr,Ar,W,{})}}function On(o){let e,t,n,s,r,c;return n=new ve({props:{class:"c-chat-floating-button",variant:"outline",color:"neutral",size:1,radius:"full",$$slots:{default:[zr]},$$scope:{ctx:o}}}),n.$on("click",o[1]),{c(){e=M("div"),t=M("div"),C(n.$$.fragment),x(e,"class","c-msg-list-bottom-button svelte-1eg3it6")},m(a,i){v(a,e,i),R(e,t),_(n,t,null),c=!0},p(a,i){const l={};8&i&&(l.$$scope={dirty:i,ctx:a}),n.$set(l)},i(a){c||($(n.$$.fragment,a),a&&cn(()=>{c&&(s||(s=Se(t,Re,{duration:150},!0)),s.run(1))}),a&&cn(()=>{c&&(r||(r=Se(e,Re,{duration:150},!0)),r.run(1))}),c=!0)},o(a){p(n.$$.fragment,a),a&&(s||(s=Se(t,Re,{duration:150},!1)),s.run(0)),a&&(r||(r=Se(e,Re,{duration:150},!1)),r.run(0)),c=!1},d(a){a&&h(e),k(n),a&&s&&s.end(),a&&r&&r.end()}}}function zr(o){let e,t;return e=new qr({}),{c(){C(e.$$.fragment)},m(n,s){_(e,n,s),t=!0},i(n){t||($(e.$$.fragment,n),t=!0)},o(n){p(e.$$.fragment,n),t=!1},d(n){k(e,n)}}}function Pr(o){let e,t,n=o[0]&&On(o);return{c(){n&&n.c(),e=Q()},m(s,r){n&&n.m(s,r),v(s,e,r),t=!0},p(s,r){s[0]?n?(n.p(s,r),1&r&&$(n,1)):(n=On(s),n.c(),$(n,1),n.m(e.parentNode,e)):n&&(N(),p(n,1,1,()=>{n=null}),H())},i(s){t||($(n),t=!0)},o(s){p(n),t=!1},d(s){s&&h(e),n&&n.d(s)}}}function Br(o){let e,t;return e=new Lr({props:{position:"bottom",$$slots:{default:[Pr]},$$scope:{ctx:o}}}),{c(){C(e.$$.fragment)},m(n,s){_(e,n,s),t=!0},p(n,[s]){const r={};9&s&&(r.$$scope={dirty:s,ctx:n}),e.$set(r)},i(n){t||($(e.$$.fragment,n),t=!0)},o(n){p(e.$$.fragment,n),t=!1},d(n){k(e,n)}}}function Nr(o,e,t){let{showScrollDown:n=!1}=e,{messageListElement:s=null}=e;return o.$$set=r=>{"showScrollDown"in r&&t(0,n=r.showScrollDown),"messageListElement"in r&&t(2,s=r.messageListElement)},[n,()=>{s&&Qn(s,{smooth:!0})},s]}class Pc extends j{constructor(e){super(),Z(this,e,Nr,Br,W,{showScrollDown:0,messageListElement:2})}}function Hr(o){let e;return{c(){e=M("div"),e.innerHTML='<span class="c-paused-remote-agent__text svelte-av8nea">This agent is paused and will resume when you send a new message</span>',x(e,"class","c-paused-remote-agent svelte-av8nea")},m(t,n){v(t,e,n)},p:U,i:U,o:U,d(t){t&&h(e)}}}class Bc extends j{constructor(e){super(),Z(this,e,null,Hr,W,{})}}function Un(o){let e,t;return{c(){e=F("Retrying in "),t=F(o[3])},m(n,s){v(n,e,s),v(n,t,s)},p(n,s){8&s&&K(t,n[3])},d(n){n&&(h(e),h(t))}}}function Vn(o){let e,t;return e=new Oe({props:{class:"c-remote-agent-error__button c-remote-agent-error__button--retry",variant:"soft",color:"neutral",size:1,$$slots:{default:[Dr]},$$scope:{ctx:o}}}),e.$on("click",o[11]),{c(){C(e.$$.fragment)},m(n,s){_(e,n,s),t=!0},p(n,s){const r={};32832&s&&(r.$$scope={dirty:s,ctx:n}),e.$set(r)},i(n){t||($(e.$$.fragment,n),t=!0)},o(n){p(e.$$.fragment,n),t=!1},d(n){k(e,n)}}}function Dr(o){let e,t,n=o[6]?" now":"";return{c(){e=F("Retry"),t=F(n)},m(s,r){v(s,e,r),v(s,t,r)},p(s,r){64&r&&n!==(n=s[6]?" now":"")&&K(t,n)},d(s){s&&(h(e),h(t))}}}function Jn(o){let e,t;return e=new Oe({props:{class:"c-remote-agent-error__button c-remote-agent-error__button--delete",variant:"soft",color:"error",size:1,$$slots:{default:[Or]},$$scope:{ctx:o}}}),e.$on("click",o[12]),{c(){C(e.$$.fragment)},m(n,s){_(e,n,s),t=!0},p(n,s){const r={};32768&s&&(r.$$scope={dirty:s,ctx:n}),e.$set(r)},i(n){t||($(e.$$.fragment,n),t=!0)},o(n){p(e.$$.fragment,n),t=!1},d(n){k(e,n)}}}function Or(o){let e;return{c(){e=F("Delete Agent")},m(t,n){v(t,e,n)},d(t){t&&h(e)}}}function Ur(o){let e,t,n,s,r,c,a,i,l,u=o[6]&&o[3]&&Un(o),d=o[4]&&Vn(o),m=o[5]&&Jn(o);return{c(){e=M("div"),t=M("div"),n=M("span"),s=F(o[7]),r=P(),u&&u.c(),c=P(),a=M("div"),d&&d.c(),i=P(),m&&m.c(),x(n,"class","c-remote-agent-error__message svelte-14lhvr1"),x(a,"class","c-remote-agent-error__actions"),x(t,"class","c-remote-agent-error__content svelte-14lhvr1"),x(e,"class","c-remote-agent-error svelte-14lhvr1"),V(e,"c-remote-agent-error--unrecoverable",o[2])},m(g,w){v(g,e,w),R(e,t),R(t,n),R(n,s),R(n,r),u&&u.m(n,null),R(t,c),R(t,a),d&&d.m(a,null),R(a,i),m&&m.m(a,null),l=!0},p(g,[w]){(!l||128&w)&&K(s,g[7]),g[6]&&g[3]?u?u.p(g,w):(u=Un(g),u.c(),u.m(n,null)):u&&(u.d(1),u=null),g[4]?d?(d.p(g,w),16&w&&$(d,1)):(d=Vn(g),d.c(),$(d,1),d.m(a,i)):d&&(N(),p(d,1,1,()=>{d=null}),H()),g[5]?m?(m.p(g,w),32&w&&$(m,1)):(m=Jn(g),m.c(),$(m,1),m.m(a,null)):m&&(N(),p(m,1,1,()=>{m=null}),H()),(!l||4&w)&&V(e,"c-remote-agent-error--unrecoverable",g[2])},i(g){l||($(d),$(m),l=!0)},o(g){p(d),p(m),l=!1},d(g){g&&h(e),u&&u.d(),d&&d.d(),m&&m.d()}}}function Vr(o,e,t){let n,s,r,c,a,i,l,u,d,{error:m}=e,{onRetry:g}=e,{onDelete:w}=e;function L(){d&&(d(),d=void 0),c&&(d=as(c,f=>{t(3,u=f)}))}return fe(L),Wn(()=>{d==null||d()}),o.$$set=f=>{"error"in f&&t(8,m=f.error),"onRetry"in f&&t(0,g=f.onRetry),"onDelete"in f&&t(1,w=f.onDelete)},o.$$.update=()=>{256&o.$$.dirty&&t(10,n="type"in m),1280&o.$$.dirty&&t(2,s=n&&m.type===Gn.agentFailed),256&o.$$.dirty&&t(7,r=m.errorMessage),1280&o.$$.dirty&&t(9,c=n?void 0:m.retryAt),512&o.$$.dirty&&t(6,a=c!==void 0),6&o.$$.dirty&&t(5,i=s&&w),1&o.$$.dirty&&t(4,l=g),512&o.$$.dirty&&c&&L()},[g,w,s,u,l,i,a,r,m,c,n,f=>{f.preventDefault(),g==null||g()},f=>{f.preventDefault(),w==null||w()}]}class Nc extends j{constructor(e){super(),Z(this,e,Vr,Ur,W,{error:8,onRetry:0,onDelete:1})}}export{zc as A,Tc as C,Rc as E,Js as G,Sc as M,Bc as P,Nc as R,Ac as S,Es as U,bc as a,Pc as b,Ic as c,Ec as d,Mc as e,Lc as f,xc as g,yc as h,no as i,Fc as j,qc as k,un as l,_c as m,Cc as n,kc as t};
