export const __webpack_id__=39;export const __webpack_ids__=[39];export const __webpack_modules__={3039:(t,e,i)=>{i.d(e,{bb:()=>im,selection:()=>ip,spline:()=>ir,zoom:()=>iv});var n,a,r,o,s=i(6445),c=i(2650),l=i(6382),u=i(1423),d=i(4903),h=i(3806),g=i(8651),f=i(3630),p=i(1252),v=i(4195),x=i(906),m=i(5976),_=i(4201),y=i(1286),T=i(1920),b=i(3123),w=i(1176),A=i(3268),k=i(2180),S=i(1960),E=i(7768),C=i(1156),R=i(3428),L=i(8596),I=i(5600),O=i(4088),D=i(8883),z=i(9103),P=i(3181),X=i(1625),F=i(8322);i(2088),i(2282),i(5909);var $=i(366),B=i(7802),M=i(2402);i(2639),i(1404),i(264),i(2007),i(9477),i(4654),i(3049),i(8664),i(1073);var N=i(7423),V=function(){return(V=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var a in e=arguments[i])Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t}).apply(this,arguments)};function G(t,e,i){if(i||2==arguments.length)for(var n,a=0,r=e.length;a<r;a++)!n&&a in e||(n||(n=Array.prototype.slice.call(e,0,a)),n[a]=e[a]);return t.concat(n||Array.prototype.slice.call(e))}"function"==typeof SuppressedError&&SuppressedError;var Y={button:"bb-button",chart:"bb-chart",empty:"bb-empty",main:"bb-main",target:"bb-target",EXPANDED:"_expanded_"},j={arc:"bb-arc",arcLabelLine:"bb-arc-label-line",arcRange:"bb-arc-range",arcs:"bb-arcs",chartArc:"bb-chart-arc",chartArcs:"bb-chart-arcs",chartArcsBackground:"bb-chart-arcs-background",chartArcsTitle:"bb-chart-arcs-title",needle:"bb-needle"},H={area:"bb-area",areas:"bb-areas"},U={axis:"bb-axis",axisX:"bb-axis-x",axisXLabel:"bb-axis-x-label",axisY:"bb-axis-y",axisY2:"bb-axis-y2",axisY2Label:"bb-axis-y2-label",axisYLabel:"bb-axis-y-label",axisXTooltip:"bb-axis-x-tooltip",axisYTooltip:"bb-axis-y-tooltip",axisY2Tooltip:"bb-axis-y2-tooltip"},W={bar:"bb-bar",bars:"bb-bars",chartBar:"bb-chart-bar",chartBars:"bb-chart-bars"},Z={candlestick:"bb-candlestick",candlesticks:"bb-candlesticks",chartCandlestick:"bb-chart-candlestick",chartCandlesticks:"bb-chart-candlesticks",valueDown:"bb-value-down",valueUp:"bb-value-up"},q={chartCircles:"bb-chart-circles",circle:"bb-circle",circles:"bb-circles"},K={colorPattern:"bb-color-pattern",colorScale:"bb-colorscale"},J={dragarea:"bb-dragarea",INCLUDED:"_included_"},Q={chartArcsGaugeMax:"bb-chart-arcs-gauge-max",chartArcsGaugeMin:"bb-chart-arcs-gauge-min",chartArcsGaugeUnit:"bb-chart-arcs-gauge-unit",chartArcsGaugeTitle:"bb-chart-arcs-gauge-title",gaugeValue:"bb-gauge-value"},tt={legend:"bb-legend",legendBackground:"bb-legend-background",legendItem:"bb-legend-item",legendItemEvent:"bb-legend-item-event",legendItemHidden:"bb-legend-item-hidden",legendItemPoint:"bb-legend-item-point",legendItemTile:"bb-legend-item-tile"},te={chartLine:"bb-chart-line",chartLines:"bb-chart-lines",line:"bb-line",lines:"bb-lines"},ti={eventRect:"bb-event-rect",eventRects:"bb-event-rects",eventRectsMultiple:"bb-event-rects-multiple",eventRectsSingle:"bb-event-rects-single"},tn={focused:"bb-focused",defocused:"bb-defocused",legendItemFocused:"bb-legend-item-focused",xgridFocus:"bb-xgrid-focus",ygridFocus:"bb-ygrid-focus"},ta={grid:"bb-grid",gridLines:"bb-grid-lines",xgrid:"bb-xgrid",xgridLine:"bb-xgrid-line",xgridLines:"bb-xgrid-lines",xgrids:"bb-xgrids",ygrid:"bb-ygrid",ygridLine:"bb-ygrid-line",ygridLines:"bb-ygrid-lines",ygrids:"bb-ygrids"},tr={region:"bb-region",regions:"bb-regions"},to={selectedCircle:"bb-selected-circle",selectedCircles:"bb-selected-circles",SELECTED:"_selected_"},ts={shape:"bb-shape",shapes:"bb-shapes"},tc={brush:"bb-brush",subchart:"bb-subchart"},tl={chartText:"bb-chart-text",chartTexts:"bb-chart-texts",text:"bb-text",texts:"bb-texts",title:"bb-title",TextOverlapping:"text-overlapping"},tu={tooltip:"bb-tooltip",tooltipContainer:"bb-tooltip-container",tooltipName:"bb-tooltip-name"},td={buttonZoomReset:"bb-zoom-reset",zoomBrush:"bb-zoom-brush"},th=V(V(V(V(V(V(V(V(V(V(V(V(V(V(V(V(V(V(V(V(V(V(V(V(V({},Y),j),H),U),W),Z),q),K),J),Q),tt),te),ti),tn),{funnel:"bb-funnel",chartFunnel:"bb-chart-funnel",chartFunnels:"bb-chart-funnels",funnelBackground:"bb-funnel-background"}),ta),{chartRadar:"bb-chart-radar",chartRadars:"bb-chart-radars"}),tr),to),ts),tc),tl),tu),{treemap:"bb-treemap",chartTreemap:"bb-chart-treemap",chartTreemaps:"bb-chart-treemaps"}),td),tg={boost_useCssRule:!1,boost_useWorker:!1},tf={color_pattern:[],color_tiles:void 0,color_threshold:{},color_onover:void 0},tp={legend_contents_bindto:void 0,legend_contents_template:"<span style='color:#fff;padding:5px;background-color:{=COLOR}'>{=TITLE}</span>",legend_equally:!1,legend_hide:!1,legend_inset_anchor:"top-left",legend_inset_x:10,legend_inset_y:0,legend_inset_step:void 0,legend_item_interaction:!0,legend_item_dblclick:!1,legend_item_onclick:void 0,legend_item_onover:void 0,legend_item_onout:void 0,legend_item_tile_width:10,legend_item_tile_height:10,legend_item_tile_r:5,legend_item_tile_type:"rectangle",legend_format:void 0,legend_padding:0,legend_position:"bottom",legend_show:!0,legend_tooltip:!1,legend_usePoint:!1},tv={bindto:"#chart",background:{},clipPath:!0,svg_classname:void 0,size_width:void 0,size_height:void 0,padding:!0,padding_mode:void 0,padding_left:void 0,padding_right:void 0,padding_top:void 0,padding_bottom:void 0,resize_auto:!0,resize_timer:!0,onclick:void 0,onover:void 0,onout:void 0,onresize:void 0,onresized:void 0,onbeforeinit:void 0,oninit:void 0,onafterinit:void 0,onrendered:void 0,transition_duration:250,plugins:[],render:{},regions:[]},tx={title_text:void 0,title_padding:{top:0,right:0,bottom:0,left:0},title_position:"center"},tm={tooltip_show:!0,tooltip_doNotHide:!1,tooltip_grouped:!0,tooltip_format_title:void 0,tooltip_format_name:void 0,tooltip_format_value:void 0,tooltip_position:void 0,tooltip_contents:{},tooltip_init_show:!1,tooltip_init_x:0,tooltip_init_position:void 0,tooltip_linked:!1,tooltip_linked_name:"",tooltip_onshow:function(){},tooltip_onhide:function(){},tooltip_onshown:function(){},tooltip_onhidden:function(){},tooltip_order:null},t_={data_x:void 0,data_idConverter:function(t){return t},data_names:{},data_classes:{},data_type:void 0,data_types:{},data_order:"desc",data_groups:[],data_groupsZeroAs:"positive",data_color:void 0,data_colors:{},data_labels:{},data_labels_backgroundColors:void 0,data_labels_colors:void 0,data_labels_position:{},data_hide:!1,data_filter:void 0,data_onclick:function(){},data_onover:function(){},data_onout:function(){},data_onshown:void 0,data_onhidden:void 0,data_onmin:void 0,data_onmax:void 0,data_url:void 0,data_headers:void 0,data_json:void 0,data_rows:void 0,data_columns:void 0,data_mimeType:"csv",data_keys:void 0,data_empty_label_text:""},ty={interaction_enabled:!0,interaction_brighten:!0,interaction_inputType_mouse:!0,interaction_inputType_touch:{},interaction_onout:!0},tT="object"==typeof globalThis&&null!==globalThis&&globalThis.Object===Object&&globalThis||"object"==typeof global&&null!==global&&global.Object===Object&&global||"object"==typeof self&&null!==self&&self.Object===Object&&self||Function("return this")(),tb=null==tT?void 0:tT.document,tw=(n="function"==typeof(null==tT?void 0:tT.requestAnimationFrame)&&"function"==typeof(null==tT?void 0:tT.cancelAnimationFrame),a="function"==typeof(null==tT?void 0:tT.requestIdleCallback)&&"function"==typeof(null==tT?void 0:tT.cancelIdleCallback),r=function(t){return setTimeout(t,1)},o=function(t){return clearTimeout(t)},[n?tT.requestAnimationFrame:r,n?tT.cancelAnimationFrame:o,a?tT.requestIdleCallback:r,a?tT.cancelIdleCallback:o]),tA=tw[0],tk=tw[2],tS=function(t){return t||0===t},tE=function(t){return"function"==typeof t},tC=function(t){return"string"==typeof t},tR=function(t){return"number"==typeof t},tL=function(t){return void 0===t},tI=function(t){return void 0!==t},tO=function(t){return"boolean"==typeof t},tD=function(t){return Math.ceil(t)+.5},tz=function(t){return t[1]-t[0]},tP=function(t){return"object"==typeof t},tX=function(t){return tL(t)||null===t||tC(t)&&0===t.length||tP(t)&&!(t instanceof Date)&&0===Object.keys(t).length||tR(t)&&isNaN(t)},tF=function(t){return!tX(t)},t$=function(t){return Array.isArray(t)},tB=function(t){return t&&!(null==t?void 0:t.nodeType)&&tP(t)&&!t$(t)};function tM(t,e,i){return tI(t[e])?t[e]:i}function tN(t,e){for(var i=[],n=2;n<arguments.length;n++)i[n-2]=arguments[n];var a=tE(t);return a&&t.call.apply(t,G([e],i,!1)),a}function tV(t,e){var i=0,n=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];--i||e.apply.apply(e,G([this],t,!1))};"duration"in t?t.each(function(){return++i}).on("end",n):(++i,t.call(n))}function tG(t){return tC(t)?t.replace(/<(script|img)?/ig,"&lt;").replace(/(script)?>/ig,"&gt;"):t}function tY(t,e,i,n){if(void 0===i&&(i=[-1,1]),void 0===n&&(n=!1),t&&tC(e))if(-1===e.indexOf("\n"))t.text(e);else{var a=[t.text(),e].map(function(t){return t.replace(/[\s\n]/g,"")});if(a[0]!==a[1]){var r=e.split("\n"),o=n?r.length-1:1;t.html(""),r.forEach(function(e,n){t.append("tspan").attr("x",0).attr("dy","".concat(0===n?i[0]*o:i[1],"em")).text(e)})}}}function tj(t){var e=t.getBBox(),i=e.x,n=e.y,a=e.width,r=e.height;return[{x:i,y:n+r},{x:i,y:n},{x:i+a,y:n},{x:i+a,y:n+r}]}function tH(t,e){var i,n=t&&(null===(i=t.touches||t.sourceEvent&&t.sourceEvent.touches)||void 0===i?void 0:i[0]),a=[0,0];try{a=(0,s.A)(n||t,e)}catch{}return a.map(function(t){return isNaN(t)?0:t})}function tU(t){var e,i=t.event,n=t.$el,a=n.subchart.main||n.main;return i&&"brush"===i.type?e=i.selection:a&&(e=a.select(".bb-brush").node())&&(e=(0,h.ZR)(e)),e}function tW(t){return!("rect"in t)||"rect"in t&&t.hasAttribute("width")&&t.rect.width!==+t.getAttribute("width")?t.rect=t.getBoundingClientRect():t.rect}function tZ(t,e,i){void 0===t&&(t=!0),void 0===e&&(e=0),void 0===i&&(i=1e4);var n=tT.crypto||tT.msCrypto,a=n?e+n.getRandomValues(new Uint32Array(1))[0]%(i-e+1):Math.floor(Math.random()*(i-e)+e);return t?String(a):a}function tq(t,e){for(var i in void 0===t&&(t={}),t$(e)&&e.forEach(function(e){return tq(t,e)}),e)/^\d+$/.test(i)||i in t||(t[i]=e[i]);return t}var tK=function(t){return t.charAt(0).toUpperCase()+t.slice(1)},tJ=function(t){return[].slice.call(t)};function tQ(t){var e,i,n,a,r,o;return{x:(null!==(i=null!==(e=tT.pageXOffset)&&void 0!==e?e:tT.scrollX)&&void 0!==i?i:0)+(null!==(n=t.scrollLeft)&&void 0!==n?n:0),y:(null!==(r=null!==(a=tT.pageYOffset)&&void 0!==a?a:tT.scrollY)&&void 0!==r?r:0)+(null!==(o=t.scrollTop)&&void 0!==o?o:0)}}function t0(t,e,i,n){void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=!0);var a=new DOMPoint(e,i),r=t.getScreenCTM(),o=a.matrixTransform(n?null==r?void 0:r.inverse():r);if(!1===n){var s=t.getBoundingClientRect();o.x-=s.x,o.y-=s.y}return o}function t1(t){var e=t?t.transform:null,i=e&&e.baseVal;return i&&i.numberOfItems?i.getItem(0).matrix:{a:0,b:0,c:0,d:0,e:0,f:0}}function t2(t){var e=t[0]instanceof Date,i=(e?t.map(Number):t).filter(function(t,e,i){return i.indexOf(t)===e});return e?i.map(function(t){return new Date(t)}):i}function t5(t){return t&&t.length?t.reduce(function(t,e){return t.concat(e)}):[]}function t3(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];if(!e.length||1===e.length&&!e[0])return t;var n=e.shift();return tB(t)&&tB(n)&&Object.keys(n).forEach(function(e){var i=n[e];tB(i)?(t[e]||(t[e]={}),t[e]=t3(t[e],i)):t[e]=t$(i)?i.concat():i}),t3.apply(void 0,G([t],e,!1))}function t4(t,e){var i;return void 0===e&&(e=!0),t[0]instanceof Date?i=e?function(t,e){return t-e}:function(t,e){return e-t}:e&&!t.every(isNaN)?i=function(t,e){return t-e}:e||(i=function(t,e){return t>e&&-1||t<e&&1||t===e&&0}),t.concat().sort(i)}function t6(t,e){var i=e.filter(function(t){return tF(t)});return i.length?tR(i[0])?i=Math[t].apply(Math,i):i[0]instanceof Date&&(i=t4(i,"min"===t)[0]):i=void 0,i}var t8={mouse:function(){var t=function(){return{bubbles:!1,cancelable:!1,screenX:0,screenY:0,clientX:0,clientY:0}};try{return new MouseEvent("t"),function(e,i,n){void 0===n&&(n=t()),e.dispatchEvent(new MouseEvent(i,n))}}catch{return function(e,i,n){void 0===n&&(n=t());var a=tb.createEvent("MouseEvent");a.initMouseEvent(i,n.bubbles,n.cancelable,tT,0,n.screenX,n.screenY,n.clientX,n.clientY,!1,!1,!1,!1,0,null),e.dispatchEvent(a)}}}(),touch:function(t,e,i){var n=new Touch(t3({identifier:Date.now(),target:t,radiusX:2.5,radiusY:2.5,rotationAngle:10,force:.5},i));t.dispatchEvent(new TouchEvent(e,{cancelable:!0,bubbles:!0,shiftKey:!0,touches:[n],targetTouches:[],changedTouches:[n]}))}};function t7(t,e){var i=t;for(var n in e)i=i.replace(RegExp("{=".concat(n,"}"),"g"),e[n]);return i}function t9(t){if(t instanceof Date)i=t;else if(tC(t)){var e,i,n=this.config;i=null!==(e=this.format.dataTime(n.data_xFormat)(t))&&void 0!==e?e:new Date(t)}else tR(t)&&!isNaN(t)&&(i=new Date(+t));return i&&isNaN(+i),i}function et(t){var e=t.attr("viewBox");return!!e&&/(\d+(\.\d+)?){3}/.test(e)}function ee(){return(null==tb?void 0:tb.hidden)===!1||(null==tb?void 0:tb.visibilityState)==="visible"}var ei=function(){function t(){return function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=function(t){if(tB(t)&&t.constructor){var e=new t.constructor;for(var n in t)e[n]=i(t[n]);return e}return t};return t.map(function(t){return i(t)}).reduce(function(t,e){return V(V({},t),e)})}(tv,tg,t_,tf,ty,tp,tx,tm,t.data)}return t.setOptions=function(t){this.data=t.reduce(function(t,e){return V(V({},t),e)},this.data)},t.data={},t}(),en={element:function(){return{chart:null,main:null,svg:null,axis:{x:null,y:null,y2:null,subX:null},axisTooltip:{x:null,y:null,y2:null},defs:null,tooltip:null,legend:null,title:null,subchart:{main:null,bar:null,line:null,area:null},arcs:null,bar:null,candlestick:null,line:null,area:null,circle:null,radar:null,text:null,grid:{main:null,x:null,y:null},gridLines:{main:null,x:null,y:null},region:{main:null,list:null},eventRect:null,zoomResetBtn:null}},state:function(){return{width:0,width2:0,height:0,height2:0,margin:{top:0,bottom:0,left:0,right:0},margin2:{top:0,bottom:0,left:0,right:0},margin3:{top:0,bottom:0,left:0,right:0},arcWidth:0,arcHeight:0,xAxisHeight:0,hasAxis:!1,hasFunnel:!1,hasRadar:!1,hasTreemap:!1,cssRule:{},current:{domain:void 0,width:0,height:0,dataMax:0,maxTickSize:{x:{width:0,height:0,ticks:[],clipPath:0,domain:""},y:{width:0,height:0,domain:""},y2:{width:0,height:0,domain:""}},types:[],needle:void 0},isLegendRight:!1,isLegendInset:!1,isLegendTop:!1,isLegendLeft:!1,legendStep:0,legendItemWidth:0,legendItemHeight:0,legendHasRendered:!1,eventReceiver:{currentIdx:-1,rect:{},data:[],coords:[]},axis:{x:{padding:{left:0,right:0},tickCount:0}},rotatedPadding:{left:30,right:0,top:5},withoutFadeIn:{},inputType:"",datetimeId:"",clip:{id:"",idXAxis:"",idYAxis:"",idXAxisTickTexts:"",idGrid:"",idSubchart:"",path:"",pathXAxis:"",pathYAxis:"",pathXAxisTickTexts:"",pathGrid:""},event:null,dragStart:null,dragging:!1,flowing:!1,cancelClick:!1,mouseover:!1,rendered:!1,transiting:!1,redrawing:!1,resizing:!1,toggling:!1,zooming:!1,hasNegativeValue:!1,hasPositiveValue:!0,orgAreaOpacity:"0.2",orgConfig:{},hiddenTargetIds:[],hiddenLegendIds:[],focusedTargetIds:[],defocusedTargetIds:[],radius:0,innerRadius:0,outerRadius:void 0,innerRadiusRatio:0,gaugeArcWidth:0,radiusExpanded:0,xgridAttr:{x1:null,x2:null,y1:null,y2:null}}}},ea=function(){function t(){var t=this;Object.keys(en).forEach(function(e){t[e]=new en[e]})}return t.prototype.getStore=function(t){return this[t]},t}(),er={colorPattern:"__colorPattern__",dataMinMax:"$dataMinMax",dataTotalSum:"$dataTotalSum",dataTotalPerIndex:"$totalPerIndex",legendItemTextBox:"legendItemTextBox",radarPoints:"$radarPoints",radarTextWidth:"$radarTextWidth",setOverOut:"setOverOut",callOverOutForTouch:"callOverOutForTouch",textRect:"textRect"},eo=function(){function t(){this.cache={}}return t.prototype.add=function(t,e,i){return void 0===i&&(i=!1),this.cache[t]=i?this.cloneTarget(e):e,this.cache[t]},t.prototype.remove=function(t){var e=this;(tC(t)?[t]:t).forEach(function(t){return delete e.cache[t]})},t.prototype.get=function(t,e){if(void 0===e&&(e=!1),e&&Array.isArray(t)){for(var i=[],n=0,a=void 0;a=t[n];n++)a in this.cache&&i.push(this.cloneTarget(this.cache[a]));return i}var r=this.cache[t];return tS(r)?r:null},t.prototype.reset=function(t){for(var e in this.cache)(t||/^\$/.test(e))&&(this.cache[e]=null)},t.prototype.cloneTarget=function(t){return{id:t.id,id_org:t.id_org,values:t.values.map(function(t){return{x:t.x,value:t.value,id:t.id}})}},t}(),es={AREA:"area",AREA_LINE_RANGE:"area-line-range",AREA_SPLINE:"area-spline",AREA_SPLINE_RANGE:"area-spline-range",AREA_STEP:"area-step",AREA_STEP_RANGE:"area-step-range",BAR:"bar",BUBBLE:"bubble",CANDLESTICK:"candlestick",DONUT:"donut",FUNNEL:"funnel",GAUGE:"gauge",LINE:"line",PIE:"pie",POLAR:"polar",RADAR:"radar",SCATTER:"scatter",SPLINE:"spline",STEP:"step",TREEMAP:"treemap"},ec={AREA:"initArea",AREA_LINE_RANGE:"initArea",AREA_SPLINE:"initArea",AREA_SPLINE_RANGE:"initArea",AREA_STEP:"initArea",AREA_STEP_RANGE:"initArea",BAR:"initBar",BUBBLE:"initCircle",CANDLESTICK:"initCandlestick",DONUT:"initArc",FUNNEL:"initFunnel",GAUGE:"initArc",LINE:"initLine",PIE:"initArc",POLAR:"initPolar",RADAR:"initCircle",SCATTER:"initCircle",SPLINE:"initLine",STEP:"initLine",TREEMAP:"initTreemap"},el={Area:[es.AREA,es.AREA_SPLINE,es.AREA_SPLINE_RANGE,es.AREA_LINE_RANGE,es.AREA_STEP,es.AREA_STEP_RANGE],AreaRange:[es.AREA_SPLINE_RANGE,es.AREA_LINE_RANGE,es.AREA_STEP_RANGE],Arc:[es.PIE,es.DONUT,es.GAUGE,es.POLAR,es.RADAR],Line:[es.LINE,es.SPLINE,es.AREA,es.AREA_SPLINE,es.AREA_SPLINE_RANGE,es.AREA_LINE_RANGE,es.STEP,es.AREA_STEP,es.AREA_STEP_RANGE],Step:[es.STEP,es.AREA_STEP,es.AREA_STEP_RANGE],Spline:[es.SPLINE,es.AREA_SPLINE,es.AREA_SPLINE_RANGE]},eu=tT.setTimeout,ed=tT.clearTimeout;function eh(){var t=[],e=function(e,i){!function t(e,i){!1===i()?tA(function(){return t(e,i)}):e()}(function(){null==i||i()},function(){for(var e,i=0,n=0,a=void 0;a=t[n];n++){if(!0===a||(null===(e=a.empty)||void 0===e?void 0:e.call(a))){i++;continue}if(!1===ee()){i=t.length;break}try{a.transition()}catch(t){i++}}return i===t.length})};return e.add=function(e){t$(e)?t=t.concat(e):t.push(e)},e}var eg={};function ef(t,e,i,n){void 0===t&&(t=!0);var a=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];i(e.apply(void 0,t))};if(tT.Worker&&t){var r,o,s,c,l=((s=(o=e.toString()).replace(/(function|[\s\W\n])/g,"").substring(0,15))in eg||(eg[s]=new tT.Blob(["".concat(null!==(r=null==n?void 0:n.map(String).join(";"))&&void 0!==r?r:"","\n\n			self.onmessage=function({data}) {\n				const result = (").concat(o,").apply(null, data);\n				self.postMessage(result);\n			};")],{type:"text/javascript"})),tT.URL.createObjectURL(eg[s])),u=((c=new tT.Worker(l)).onerror=function(t){},c);a=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];u.postMessage(t),u.onmessage=function(t){return tT.URL.revokeObjectURL(l),i(t.data)}}}return a}function ep(t){var e=[];return t.forEach(function(t,i){var n=t[0];t.forEach(function(t,a){if(a>0){if(void 0===e[a-1]&&(e[a-1]={}),void 0===t)throw Error("Source data is missing a component at (".concat(i,", ").concat(a,")!"));e[a-1][n]=t}})}),e}function ev(t){var e=t[0],i=[];return t.forEach(function(t,n){if(n>0){var a={};t.forEach(function(t,i){if(void 0===t)throw Error("Source data is missing a component at (".concat(n,", ").concat(i,")!"));a[e[i]]=t}),i.push(a)}}),i}function ex(t,e){var i,n,a=[];if(Array.isArray(t)){var r=function(t,e){if(void 0!==t[e])return t[e];var i=e.replace(/\[(\w+)\]/g,".$1").replace(/^\./,"").split("."),n=t;return i.some(function(t){return!(n=n&&t in n?n[t]:void 0)}),n};i=e.x?e.value.concat(e.x):e.value,a.push(i),t.forEach(function(t){var e=i.map(function(e){var i=r(t,e);return void 0===i&&(i=null),i});a.push(e)}),n=ev(a)}else Object.keys(t).forEach(function(e){var i,n=t[e].concat();null===(i=n.unshift)||void 0===i||i.call(n,e),a.push(n)}),n=ep(a);return n}function em(t,e){var i,n=t.rows(e);return 1===n.length?(i=[{}],n[0].forEach(function(t){i[0][t]=null})):i=t.parse(e),i}function e_(t){return em({rows:g.fy,parse:g.sw},t)}function ey(t){return em({rows:f.cP,parse:f.Nu},t)}function eT(t,e){var i=t||(null==e?void 0:e.data_keys);return(null==i?void 0:i.x)&&(e.data_x=i.x),i}function eb(t,e){void 0===e&&(e=!1);var i=this.api;e&&this.api.flush(!0),null==t||t.call(i)}var ew=function(t,e,i){var n=(0,c.A)(t.cloneNode(!0));return n.attr("id",i).insert("rect",":first-child").attr("width",n.attr("width")).attr("height",n.attr("height")).style("fill",e),{id:i,node:n.node()}},eA=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"];function ek(t,e,i){var n=t.config,a="axis_".concat(e,"_tick_format");return(n[a]?n[a]:t.defaultValueFormat).call(t.api,i)}function eS(t){var e=this.getDataById(t);return this.levelColor?this.levelColor(e.values[0].value):this.color(e)}function eE(t,e){void 0===e&&(e=!0);var i,n=this.config,a=null!==(i=n.data_names[t])&&void 0!==i?i:t;return e&&tE(n.legend_format)&&(a=n.legend_format(a,t!==a?t:void 0)),a}function eC(t,e,i){void 0===t&&(t="linear");var n=({linear:x.A,log:m.A,_log:_.A,time:y.A,utc:T.A})[t]();return n.type=t,/_?log/.test(t)&&n.clamp(!0),n.range([null!=e?e:0,null!=i?i:1])}function eR(t,e,i,n,a){var r,o=t.value,s=this.isCandlestickType(t),c=tR(o)&&o<0||s&&!(null===(r=this.getCandlestickData(t))||void 0===r?void 0:r._isUp),l=e.x,u=e.y;return n?"start"===i?(l+=8*!c,u+=4):"middle"===i?(l+=8,u-=8):"end"===i&&(c&&(l-=8),u+=4):("start"===i?(l+=4,c&&(u+=16)):"middle"===i?u-=8:"end"===i&&(l-=4,c&&(u+=16)),a&&(u+=c?-17:s?13:7)),{x:l,y:u}}function eL(t,e){var i,n=this.config.data_labels_position,a=t.id,r=t.index,o=t.value;return null!==(i=tE(n)?n.bind(this.api)(e,o,a,r,this.$el.text):(a in n?n[a]:n)[e])&&void 0!==i?i:0}function eI(t,e){void 0===t&&(t="left");var i,n=tR(e);return t.indexOf("center")>-1?n?e/2:"middle":t.indexOf("right")>-1?n?e:"end":n?0:"start"}function eO(t){var e;return this.isLineType(t)?e=this.generateGetLinePoints(this.getShapeIndices(this.isLineType)):this.isBarType(t)&&(e=this.generateGetBarPoints(this.getShapeIndices(this.isBarType))),e}var eD=function(){function t(t){this.data={xs:{},targets:[]},this.scale={x:null,y:null,y2:null,subX:null,subY:null,subY2:null,zoom:null},this.org={xScale:null,xDomain:null},this.format={extraLineClasses:null,xAxisTick:null,dataTime:null,defaultAxisTime:null,axisTime:null},this.api=t,this.config=new ei,this.cache=new eo;var e=new ea;this.$el=e.getStore("element"),this.state=e.getStore("state"),this.$T=this.$T.bind(this)}return t.prototype.$T=function(t,e,i){var n=this.config,a=this.state,r=n.transition_duration,o=n.subchart_show,s=t;return s&&("tagName"in s&&(s=(0,c.A)(s)),s=(!1!==e&&r||e)&&(!a.zooming||a.dragging)&&!a.resizing&&a.rendered&&!o?s.transition(i).duration(r):s),s},t.prototype.beforeInit=function(){this.callPluginHook("$beforeInit"),tN(this.config.onbeforeinit,this.api)},t.prototype.afterInit=function(){this.callPluginHook("$afterInit"),tN(this.config.onafterinit,this.api)},t.prototype.init=function(){var t=this.config,e=this.state,i=this.$el,n=t.boost_useCssRule;if(!function(t){var e,i=t.config,n="";if(tX(i.data_type||i.data_types)&&!t[ec.LINE])n="line";else for(var a in ec){var r=es[a];if(t.hasType(r)&&!t[ec[a]]){n=r;break}}n&&function(t,e,i){var n;throw null===(n=tT.console)||void 0===n||n.error,Error("".concat("[billboard.js]"," ").concat(t.replace(/\%c([a-z-]+)/i,"'$1' ")," ").concat(e))}("Please, make sure if %c".concat((void 0===e&&(e="-"),n.split(e).map(function(t,e){return e?t.charAt(0).toUpperCase()+t.slice(1).toLowerCase():t.toLowerCase()}).join(""))),"module has been imported and specified correctly.",0)}(this),e.hasRadar=!e.hasAxis&&this.hasType("radar"),e.hasFunnel=!e.hasAxis&&this.hasType("funnel"),e.hasTreemap=!e.hasAxis&&this.hasType("treemap"),e.hasAxis=!this.hasArcType()&&!e.hasFunnel&&!e.hasTreemap,e.datetimeId="bb-".concat(+new Date*tZ()),n){var a=tb.createElement("style");a.type="text/css",tb.head.appendChild(a),e.style={rootSelctor:".".concat(e.datetimeId),sheet:a.sheet},i.style=a}var r={element:t.bindto,classname:"bb"};tB(t.bindto)&&(r.element=t.bindto.element||"#chart",r.classname=t.bindto.classname||r.classname),i.chart=tE(r.element.node)?t.bindto.element:(0,c.A)(r.element||[]),i.chart.empty()&&(i.chart=(0,c.A)(tb.body.appendChild(tb.createElement("div")))),i.chart.html("").classed(r.classname,!0).classed(e.datetimeId,n).style("position","relative"),this.initParams(),this.initToRender()},t.prototype.initToRender=function(t){var e=this,i=e.config,n=e.state,a=e.$el.chart,r=function(){return function(t,e,i){void 0===i&&(i=!1);for(var n=!!t.node,a=!1,r=0,o=Object.entries(e);r<o.length;r++){var s=o[r],c=s[0],l=s[1];if(a=n?t.style(c)===l:t.style[c]===l,!1===i&&a)break}return a}(a,{display:"none",visibility:"hidden"})},o=!1!==i.render.lazy&&(i.render.lazy||r()),s=tT.MutationObserver;o&&s&&!1!==i.render.observe&&!t&&new s(function(t,i){!r()&&(i.disconnect(),n.rendered||e.initToRender(!0))}).observe(a.node(),{attributes:!0,attributeFilter:["class","style"]}),(!o||t)&&e.convertData(i,function(t){e.initWithData(t),e.afterInit()})},t.prototype.initParams=function(){var t,e=this,i=e.config,n=e.format,a=e.state,r=i.axis_rotated;if(e.color=e.generateColor(),e.levelColor=e.generateLevelColor(),!1===i.padding&&(i.axis_x_show=!1,i.axis_y_show=!1,i.axis_y2_show=!1,i.subchart_show=!1),(e.hasPointType()||(null===(t=e.hasLegendDefsPoint)||void 0===t?void 0:t.call(e)))&&(e.point=e.generatePoint()),a.hasAxis){e.initClip(),n.extraLineClasses=e.generateExtraLineClass(),n.dataTime=i.data_xLocaltime?d.T6:d.GY,n.axisTime=i.axis_x_localtime?d.DC:d.aL;var o=e.config.zoom_enabled&&"drag"===e.config.zoom_type;n.defaultAxisTime=function(t){var i=e.scale,a=i.x,r=i.zoom,s=o?r:r&&a.orgDomain().toString()!==r.domain().toString(),c=t.getMilliseconds()&&".%L"||t.getSeconds()&&".:%S"||t.getMinutes()&&"%I:%M"||t.getHours()&&"%I %p"||1!==t.getDate()&&"%b %d"||s&&1===t.getDate()&&"%b'%y"||t.getMonth()&&"%-m/%-d"||"%Y";return n.axisTime(c)(t)}}a.isLegendRight="right"===i.legend_position,a.isLegendInset="inset"===i.legend_position,a.isLegendTop="top-left"===i.legend_inset_anchor||"top-right"===i.legend_inset_anchor,a.isLegendLeft="top-left"===i.legend_inset_anchor||"bottom-left"===i.legend_inset_anchor,a.rotatedPadding.top=e.getResettedPadding(a.rotatedPadding.top),a.rotatedPadding.right=r&&!i.axis_x_show?0:30,a.inputType=function(t,e){var i=tT.DocumentTouch,n=tT.matchMedia,a=tT.navigator,r=null==n?void 0:n("(pointer:coarse)").matches,o=!1;if(e)if(a&&"maxTouchPoints"in a)o=a.maxTouchPoints>0;else if("ontouchmove"in tT||i&&tb instanceof i)o=!0;else if(r)o=!0;else{var s=a.userAgent;o=/\b(BlackBerry|webOS|iPhone|IEMobile)\b/i.test(s)||/\b(Android|Windows Phone|iPad|iPod)\b/i.test(s)}return t&&!r&&(null==n?void 0:n("(pointer:fine)").matches)&&"mouse"||o&&"touch"||"mouse"}(i.interaction_inputType_mouse,i.interaction_inputType_touch)},t.prototype.initWithData=function(t){var e,i,n,a=this,r=a.config,o=a.scale,s=a.state,c=a.$el,l=a.org,u=s.hasAxis,d=s.hasFunnel,h=s.hasTreemap,g=r.interaction_enabled,f=a.hasType("polar"),p=r.data_labels_backgroundColors;if(u&&(a.axis=a.getAxisInstance(),r.zoom_enabled&&a.initZoom()),a.data.xs={},a.data.targets=a.convertDataToTargets(t),r.data_filter&&(a.data.targets=a.data.targets.filter(r.data_filter.bind(a.api))),r.data_hide&&a.addHiddenTargetIds(!0===r.data_hide?a.mapToIds(a.data.targets):r.data_hide),r.legend_hide&&a.addHiddenLegendIds(!0===r.legend_hide?a.mapToIds(a.data.targets):r.legend_hide),a.updateSizes(),a.updateScales(!0),u){var v=o.x,x=o.y,m=o.y2,_=o.subX,y=o.subY,T=o.subY2;v&&(v.domain(t4(a.getXDomain(a.data.targets),!r.axis_x_inverted)),_.domain(v.domain()),l.xDomain=v.domain()),x&&(x.domain(a.getYDomain(a.data.targets,"y")),y.domain(x.domain())),m&&(m.domain(a.getYDomain(a.data.targets,"y2")),T&&T.domain(m.domain()))}if(c.svg=c.chart.append("svg").style("overflow","hidden").style("display","block"),g&&s.inputType){var b="touch"===s.inputType,w=r.onclick,A=r.onover,k=r.onout;c.svg.on("click",(null==w?void 0:w.bind(a.api))||null).on(b?"touchstart":"mouseenter",(null==A?void 0:A.bind(a.api))||null).on(b?"touchend":"mouseleave",(null==k?void 0:k.bind(a.api))||null)}r.svg_classname&&c.svg.attr("class",r.svg_classname);var S=tE(r.color_tiles)&&a.patterns;(u||S||f||h||p||(null===(e=a.hasLegendDefsPoint)||void 0===e?void 0:e.call(a)))&&(c.defs=c.svg.append("defs"),u&&["id","idXAxis","idYAxis","idGrid"].forEach(function(t){a.appendClip(c.defs,s.clip[t])}),a.generateTextBGColorFilter(p),S&&a.patterns.forEach(function(t){return c.defs.append(function(){return t.node})})),a.updateSvgSize(),a.bindResize();var E=c.svg.append("g").classed(Y.main,!0).attr("transform",d||h?null:a.getTranslate("main"));if(c.main=E,r.subchart_show&&a.initSubchart(),r.tooltip_show&&a.initTooltip(),r.title_text&&a.initTitle(),!h&&r.legend_show&&a.initLegend(),r.data_empty_label_text&&E.append("text").attr("class","".concat(tl.text," ").concat(Y.empty)).attr("text-anchor","middle").attr("dominant-baseline","middle"),u&&(r.regions.length&&a.initRegion(),r.clipPath||a.axis.init()),E.append("g").classed(Y.chart,!0).attr("clip-path",u?s.clip.path:null),a.callPluginHook("$init"),a.initChartElements(),u&&(g&&(null===(i=a.initEventRect)||void 0===i||i.call(a)),a.initGrid(),r.clipPath&&(null===(n=a.axis)||void 0===n||n.init())),a.updateTargets(a.data.targets),a.updateDimension(),tN(r.oninit,a.api),a.setBackground(),a.redraw({withTransition:!1,withTransform:!0,withUpdateXDomain:!0,withUpdateOrgXDomain:!0,withTransitionForAxis:!1,initializing:!0}),r.data_onmin||r.data_onmax){var C=a.getMinMaxData();tN(r.data_onmin,a.api,C.min),tN(r.data_onmax,a.api,C.max)}r.tooltip_show&&a.initShowTooltip(),s.rendered=!0},t.prototype.initChartElements=function(){var t=this,e=t.state,i=e.hasAxis,n=e.hasRadar,a=e.hasTreemap,r=[];if(i){var o=["bar","bubble","candlestick","line"];t.config.bar_front&&o.push(o.shift()),o.forEach(function(e){var i=tK(e);("line"===e&&t.hasTypeOf(i)||t.hasType(e))&&r.push(i)})}else if(a)r.push("Treemap");else if(t.hasType("funnel"))r.push("Funnel");else{var s=t.hasType("polar");n||r.push("Arc","Pie"),t.hasType("gauge")?r.push("Gauge"):n?r.push("Radar"):s&&r.push("Polar")}r.forEach(function(e){t["init".concat(e)]()}),tF(t.config.data_labels)&&!t.hasArcType(null,["radar"])&&t.initText()},t.prototype.setChartElements=function(){var t=this.$el,e=t.chart,i=t.svg,n=t.defs,a=t.main,r=t.tooltip,o=t.legend,s=t.title,c=t.grid,l=t.needle,u=t.arcs,d=t.circle,h=t.bar,g=t.candlestick,f=t.line,p=t.area,v=t.text;this.api.$={chart:e,svg:i,defs:n,main:a,tooltip:r,legend:o,title:s,grid:c,arc:u,circles:d,bar:{bars:h},candlestick:g,line:{lines:f,areas:p},needle:l,text:{texts:v}}},t.prototype.setBackground=function(){var t=this.config.background,e=this.state,i=this.$el.svg;if(tF(t)){var n=i.select("g").insert(t.imgUrl?"image":"rect",":first-child");t.imgUrl?n.attr("href",t.imgUrl):t.color&&n.style("fill",t.color).attr("clip-path",e.clip.path),n.attr("class",t.class||null).attr("width","100%").attr("height","100%")}},t.prototype.updateTargets=function(t){var e,i=this,n=i.state,a=n.hasAxis,r=n.hasFunnel,o=n.hasRadar,s=n.hasTreemap,c=function(e){return i["updateTargetsFor".concat(e)](t.filter(i["is".concat(e,"Type")].bind(i)))};if(i.updateTargetsForText(t),a)["bar","candlestick","line"].forEach(function(t){var e=tK(t);("line"===t&&i.hasTypeOf(e)||i.hasType(t))&&c(e)}),i.updateTargetsForSubchart&&i.updateTargetsForSubchart(t);else if(i.hasArcType(t)){var l="Arc";o?l="Radar":i.hasType("polar")&&(l="Polar"),c(l)}else r?c("Funnel"):s&&c("Treemap");var u=i.hasType("bubble")||i.hasType("scatter");u&&(null===(e=i.updateTargetForCircle)||void 0===e||e.call(i)),i.filterTargetsToShowAtInit(u)},t.prototype.filterTargetsToShowAtInit=function(t){void 0===t&&(t=!1);var e=this,i=e.$el.svg,n=e.$T,a=".".concat(Y.target);t&&(a+=", .".concat(q.chartCircles," > .").concat(q.circles)),n(i.selectAll(a).filter(function(t){return e.isTargetToShow(t.id)})).style("opacity",null)},t.prototype.getWithOption=function(t){var e={Dimension:!0,EventRect:!0,Legend:!1,Subchart:!0,Transform:!1,Transition:!0,TrimXDomain:!0,UpdateXAxis:"UpdateXDomain",UpdateXDomain:!1,UpdateOrgXDomain:!1,TransitionForExit:"Transition",TransitionForAxis:"Transition",Y:!0};return Object.keys(e).forEach(function(i){var n=e[i];tC(n)&&(n=e[n]),e[i]=tM(t,"with".concat(i),n)}),e},t.prototype.initialOpacity=function(t){var e=this.state.withoutFadeIn;return null!==this.getBaseValue(t)&&e[t.id]?null:"0"},t.prototype.bindResize=function(){var t,e,i,n,a=this,r=a.$el,o=a.config,s=a.state,c=(t=o.resize_timer,i=[],(n=function(){n.clear(),!1===t?tk(function(){i.forEach(function(t){return t()})},{timeout:200}):e=eu(function(){i.forEach(function(t){return t()})},tR(t)?t:200)}).clear=function(){e&&(ed(e),e=null)},n.add=function(t){return i.push(t)},n.remove=function(t){return i.splice(i.indexOf(t),1)},n),l=[];l.push(function(){return tN(o.onresize,a.api)}),/^(true|parent)$/.test(o.resize_auto)&&l.push(function(){s.resizing=!0,o.legend_show&&(a.updateSizes(),a.updateLegend()),a.api.flush(!1)}),l.push(function(){tN(o.onresized,a.api),s.resizing=!1}),l.forEach(function(t){return c.add(t)}),a.resizeFunction=c,"parent"===o.resize_auto?(a.resizeFunction.resizeObserver=new ResizeObserver(a.resizeFunction.bind(a))).observe(r.chart.node().parentNode):tT.addEventListener("resize",a.resizeFunction)},t.prototype.callPluginHook=function(t){for(var e=this,i=[],n=1;n<arguments.length;n++)i[n-1]=arguments[n];this.config.plugins.forEach(function(n){"$beforeInit"===t&&(n.$$=e,e.api.plugins.push(n)),n[t].apply(n,i)})},t}();function ez(t){var e,i,n,a=this.config,r=function(){var t=i.shift();return t&&e&&tP(e)&&t in e?(e=e[t],r()):t?void 0:e};Object.keys(a).forEach(function(o){e=t,i=o.split("_"),tI(n=r())&&(a[o]=n)}),this.api&&(this.state.orgConfig=t)}tq(eD.prototype,[{convertData:function(t,e){var i,n,a,r,o,s,c=this.config,l=c.boost_useWorker,u=t;if(t.bindto&&(u={},["url","mimeType","headers","keys","json","keys","rows","columns"].forEach(function(e){var i="data_".concat(e);i in t&&(u[e]=t[i])})),u.url&&e)i=u.url,n=u.mimeType,a=u.headers,r=eT(u.keys,c),void 0===n&&(n="csv"),o=new XMLHttpRequest,s={csv:e_,tsv:ey,json:ex},o.open("GET",i),a&&Object.keys(a).forEach(function(t){o.setRequestHeader(t,a[t])}),o.onreadystatechange=function(){if(4===o.readyState)if(200===o.status){var t=o.responseText;t&&e.call(this,s[n]("json"===n?JSON.parse(t):t,r))}else throw Error("".concat(i,": Something went wrong loading!"))},o.send();else if(u.json)ef(l,ex,e,[ep,ev])(u.json,eT(u.keys,c));else if(u.rows)ef(l,ev,e)(u.rows);else if(u.columns)ef(l,ep,e)(u.columns);else if(t.bindto)throw Error("url or json or rows or columns is required.")},convertDataToTargets:function(t,e){var i,n=this,a=this,r=a.axis,o=a.config,s=a.state,c=o.data_type,l=!1,u=!1,d=!1;r&&(l=r.isCategorized(),u=r.isTimeSeries(),d=r.isCustomX());var h=Object.keys(t[0]||{}),g=h.length?h.filter(a.isNotX,a):[],f=h.length?h.filter(a.isX,a):[];g.forEach(function(r){var s=n.getXKey(r);d||u?f.indexOf(s)>=0?i=(e&&a.data.xs[r]||[]).concat(t.map(function(t){return t[s]}).filter(tS).map(function(t,e){return a.generateTargetX(t,r,e)})):o.data_x?i=n.getOtherTargetXs():tF(o.data_xs)&&(i=a.getXValuesOfXKey(s,a.data.targets)):i=t.map(function(t,e){return e}),i&&(n.data.xs[r]=i)}),g.forEach(function(t){if(!n.data.xs[t])throw Error('x is not defined for id = "'.concat(t,'".'))});var p=g.map(function(e,i){var n=o.data_idConverter.bind(a.api)(e),r=a.getXKey(e),c=d&&l,u=c&&t.map(function(t){return t.x}).every(function(t){return o.axis_x_categories.indexOf(t)>-1}),h=t.__append__,g=null===r&&h?a.api.data.values(e).length:0;return{id:n,id_org:e,values:t.map(function(t,l){var d,f=t[r],p=t[e];return p=null===p||isNaN(p)||tB(p)?t$(p)||tB(p)?p:null:+p,(c||s.hasRadar)&&0===i&&!tL(f)?(u||0!==i||0!==l||h||(o.axis_x_categories=[]),-1===(d=o.axis_x_categories.indexOf(f))&&(d=o.axis_x_categories.length,o.axis_x_categories.push(f))):d=a.generateTargetX(f,e,g+l),(tL(p)||a.data.xs[e].length<=l)&&(d=void 0),{x:d,value:p,id:n,index:-1}}).filter(function(t){return tI(t.x)})}});if(p.forEach(function(t){var e;o.data_xSort&&(t.values=t.values.sort(function(t,e){return(t.x||0===t.x?t.x:1/0)-(e.x||0===e.x?e.x:1/0)})),t.values.forEach(function(t,e){return t.index=e}),null===(e=a.data.xs[t.id])||void 0===e||e.sort(function(t,e){return t-e})}),s.hasNegativeValue=a.hasNegativeValueInTargets(p),s.hasPositiveValue=a.hasPositiveValueInTargets(p),c&&a.isValidChartType(c)){var v=a.mapToIds(p).filter(function(t){return!(t in o.data_types)||!a.isValidChartType(o.data_types[t])});a.setTargetType(v,c)}return p.forEach(function(t){return a.cache.add(t.id_org,t,!0)}),p}},{isX:function(t){var e,i,n=this.config,a=n.data_x&&t===n.data_x,r=tF(n.data_xs)&&(e=n.data_xs,i=!1,Object.keys(e).forEach(function(n){return e[n]===t&&(i=!0)}),i);return a||r},isNotX:function(t){return!this.isX(t)},isStackNormalized:function(){var t=this.config;return!!(t.data_stack_normalize&&t.data_groups.length)},isGrouped:function(t){var e=this.config.data_groups;return t?e.some(function(e){return e.indexOf(t)>=0&&e.length>1}):e.length>0},getXKey:function(t){var e=this.config;return e.data_x?e.data_x:tF(e.data_xs)?e.data_xs[t]:null},getXValuesOfXKey:function(t,e){var i,n=this;return(e&&tF(e)?n.mapToIds(e):[]).forEach(function(e){n.getXKey(e)===t&&(i=n.data.xs[e])}),i},getIndexByX:function(t,e){return e?e.indexOf(tC(t)?t:+t):(this.filterByX(this.data.targets,t)[0]||{index:null}).index},getXValue:function(t,e){return t in this.data.xs&&this.data.xs[t]&&tS(this.data.xs[t][e])?this.data.xs[t][e]:e},getOtherTargetXs:function(){var t=Object.keys(this.data.xs);return t.length?this.data.xs[t[0]]:null},getOtherTargetX:function(t){var e=this.getOtherTargetXs();return e&&t<e.length?e[t]:null},addXs:function(t){var e=this.config;Object.keys(t).forEach(function(i){e.data_xs[i]=t[i]})},isMultipleX:function(){return!this.config.axis_x_forceAsSingle&&(tF(this.config.data_xs)||this.hasType("bubble")||this.hasType("scatter"))},addName:function(t){var e,i=this.config;return t&&(e=i.data_names[t.id],t.name=void 0!==e?e:t.id),t},getAllValuesOnIndex:function(t,e){void 0===e&&(e=!1);var i=this,n=i.filterTargetsToShow(i.data.targets).map(function(e){return i.addName(i.getValueOnIndex(e.values,t))});return e&&(n=n.filter(function(t){return t&&"value"in t&&tS(t.value)})),n},getValueOnIndex:function(t,e){var i=t.filter(function(t){return t.index===e});return i.length?i[0]:null},updateTargetX:function(t,e){var i=this;t.forEach(function(t){t.values.forEach(function(n,a){n.x=i.generateTargetX(e[a],t.id,a)}),i.data.xs[t.id]=e})},updateTargetXs:function(t,e){var i=this;t.forEach(function(t){e[t.id]&&i.updateTargetX([t],e[t.id])})},generateTargetX:function(t,e,i){var n=this.axis,a=(null==n?void 0:n.isCategorized())?i:t||i;return(null==n?void 0:n.isTimeSeries())?a=t9.bind(this)(t||this.getXValue(e,i)):(null==n?void 0:n.isCustomX())&&!(null==n?void 0:n.isCategorized())&&(a=tS(t)?+t:this.getXValue(e,i)),a},updateXs:function(t){t.length&&(this.axis.xs=t.map(function(t){return t.x}))},getPrevX:function(t){var e=this.axis.xs[t-1];return tI(e)?e:null},getNextX:function(t){var e=this.axis.xs[t+1];return tI(e)?e:null},getBaseValue:function(t){var e=this.state.hasAxis,i=t.value;return i&&e&&(this.isAreaRangeType(t)?i=this.getRangedData(t,"mid"):this.isBubbleZType(t)&&(i=this.getBubbleZData(i,"y"))),i},getMinMaxValue:function(t){var e,i,n=this.getBaseValue.bind(this);return(t||this.data.targets.map(function(t){return t.values})).forEach(function(t,a){var r=t.map(n).filter(tR);e=Math.min.apply(Math,G([a?e:1/0],r,!1)),i=Math.max.apply(Math,G([a?i:-1/0],r,!1))}),{min:e,max:i}},getMinMaxData:function(){var t=this,e=er.dataMinMax,i=t.cache.get(e);if(!i){var n=t.data.targets.map(function(t){return t.values}),a=t.getMinMaxValue(n),r=[],o=[];n.forEach(function(e){var i=t.getFilteredDataByValue(e,a.min),n=t.getFilteredDataByValue(e,a.max);i.length&&(r=r.concat(i)),n.length&&(o=o.concat(n))}),t.cache.add(e,i={min:r,max:o})}return i},getTotalPerIndex:function(){var t=er.dataTotalPerIndex,e=this.cache.get(t);return(this.config.data_groups.length||this.isStackNormalized())&&!e&&(e=[],this.data.targets.forEach(function(t){t.values.forEach(function(t,i){e[i]||(e[i]=0),e[i]+=tR(t.value)?t.value:0})})),e},getTotalDataSum:function(t){var e=er.dataTotalSum,i=this.cache.get(e);if(!tR(i)){var n=t5(this.data.targets.map(function(t){return t.values})).map(function(t){return t.value});i=n.length?n.reduce(function(t,e){return t+e}):0,this.cache.add(e,i)}return t&&(i-=this.getHiddenTotalDataSum()),i},getHiddenTotalDataSum:function(){var t=this.api,e=this.state.hiddenTargetIds,i=0;return e.length&&(i=t.data.values.bind(t)(e).reduce(function(t,e){return t+e})),i},getFilteredDataByValue:function(t,e){var i=this;return t.filter(function(t){return i.getBaseValue(t)===e})},getMaxDataCount:function(){return Math.max.apply(Math,G(G([],this.data.targets.map(function(t){return t.values.length}),!1),[0],!1))},getMaxDataCountTarget:function(){var t=this.filterTargetsToShow()||[],e=t.length,i=this.config.axis_x_inverted;return e>1?t=t4(t2(t=t.map(function(t){return t.values}).reduce(function(t,e){return t.concat(e)}).map(function(t){return t.x}))).map(function(t,e,n){return{x:t,index:i?n.length-e-1:e}}):e&&(t=t[0].values.concat()),t},mapToIds:function(t){return t.map(function(t){return t.id})},mapToTargetIds:function(t){return t?t$(t)?t.concat():[t]:this.mapToIds(this.data.targets)},hasTarget:function(t,e){for(var i=this.mapToIds(t),n=0,a=void 0;a=i[n];n++)if(a===e)return!0;return!1},isTargetToShow:function(t){return 0>this.state.hiddenTargetIds.indexOf(t)},isLegendToShow:function(t){return 0>this.state.hiddenLegendIds.indexOf(t)},filterTargetsToShow:function(t){var e=this;return(t||e.data.targets).filter(function(t){return e.isTargetToShow(t.id)})},mapTargetsToUniqueXs:function(t){var e=this.axis,i=[];return(null==t?void 0:t.length)&&(i=t2(t5(t.map(function(t){return t.values.map(function(t){return+t.x})}))),i=(null==e?void 0:e.isTimeSeries())?i.map(function(t){return new Date(+t)}):i.map(Number)),t4(i)},addTargetIds:function(t,e){var i=this.state;(t$(e)?e:[e]).forEach(function(e){0>i[t].indexOf(e)&&i[t].push(e)})},removeTargetIds:function(t,e){var i=this.state;(t$(e)?e:[e]).forEach(function(e){var n=i[t].indexOf(e);n>=0&&i[t].splice(n,1)})},addHiddenTargetIds:function(t){this.addTargetIds("hiddenTargetIds",t)},removeHiddenTargetIds:function(t){this.removeTargetIds("hiddenTargetIds",t)},addHiddenLegendIds:function(t){this.addTargetIds("hiddenLegendIds",t)},removeHiddenLegendIds:function(t){this.removeTargetIds("hiddenLegendIds",t)},getValuesAsIdKeyed:function(t){var e=this,i=e.state.hasAxis,n={},a=e.isMultipleX(),r=a?e.mapTargetsToUniqueXs(t).map(function(t){return tC(t)?t:+t}):null;return t.forEach(function(t){var o=[];t.values.filter(function(t){var e=t.value;return tS(e)||null===e}).forEach(function(t){var n=t.value;null!==n&&e.isCandlestickType(t)&&(n=t$(n)?n.slice(0,4):[n.open,n.high,n.low,n.close]),t$(n)?o.push.apply(o,n):tB(n)&&"high"in n?o.push.apply(o,Object.values(n)):e.isBubbleZType(t)?o.push(i&&e.getBubbleZData(n,"y")):a?o[e.getIndexByX(t.x,r)]=n:o.push(n)}),n[t.id]=o}),n},checkValueInTargets:function(t,e){for(var i,n=Object.keys(t),a=0;a<n.length;a++){i=t[n[a]].values;for(var r=0;r<i.length;r++)if(e(i[r].value))return!0}return!1},hasMultiTargets:function(){return this.filterTargetsToShow().length>1},hasNegativeValueInTargets:function(t){return this.checkValueInTargets(t,function(t){return t<0})},hasPositiveValueInTargets:function(t){return this.checkValueInTargets(t,function(t){return t>0})},orderTargets:function(t){var e=G([],t,!0),i=this.getSortCompareFn();return i&&e.sort(i),e},getSortCompareFn:function(t){void 0===t&&(t=!1);var e,i=this.config.data_order,n=/asc/i.test(i),a=/desc/i.test(i);if(n||a){var r=function(t,e){return t+Math.abs(e.value)},o=function(t){return tR(t)?t:"values"in t?t.values.reduce(r,0):t.value};e=function(e,i){var a=o(e),r=o(i);return t?n?a-r:r-a:n?r-a:a-r}}else tE(i)&&(e=i.bind(this.api));return e||null},filterByX:function(t,e){return t5(t.map(function(t){return t.values})).filter(function(t){return t.x-e==0})},filterRemoveNull:function(t){var e=this;return t.filter(function(t){return tS(e.getBaseValue(t))})},filterByXDomain:function(t,e){return t.map(function(t){return{id:t.id,id_org:t.id_org,values:t.values.filter(function(t){return e[0]<=t.x&&t.x<=e[1]})}})},hasDataLabel:function(){var t=this.config.data_labels;return tO(t)&&t||tP(t)&&tF(t)},hasNullDataValue:function(t){return t.some(function(t){return null===t.value})},getDataIndexFromEvent:function(t){var e,i=this.$el,n=this.config,a=this.state,r=a.hasRadar,o=a.inputType,s=a.eventReceiver,l=s.coords,u=s.rect;if(r){var d=t.target;/tspan/i.test(d.tagName)&&(d=d.parentNode);var h=(0,c.A)(d).datum();e=h&&1===Object.keys(h).length?h.index:void 0}else{var g=n.axis_rotated,f=tQ(i.chart.node()),p="touch"===o&&t.changedTouches?t.changedTouches[0]:t,v=g?p.clientY+f.y:p.clientX+f.x;if(et(i.svg)){var x=[v,0];g&&x.reverse(),v=t0.apply(void 0,G([i.eventRect.node()],x,!1))[g?"y":"x"]}else v-=g?u.top:u.left;e=function t(e,i,n,a,r){if(n>a)return -1;var o=Math.floor((n+a)/2),s=e[o],c=s.x,l=s.w,u=void 0===l?0:l;return(r&&(c=e[o].y,u=e[o].h),i>=c&&i<=c+u)?o:i<c?t(e,i,n,o-1,r):t(e,i,o+1,a,r)}(l,v,0,l.length-1,g)}return e},getDataLabelLength:function(t,e,i){var n=this,a=[0,0];return n.$el.chart.select("svg").selectAll(".dummy").data([t,e]).enter().append("text").text(function(t){return n.dataLabelFormat(t.id)(t)}).each(function(t,e){a[e]=1.3*this.getBoundingClientRect()[i]}).remove(),a},isNoneArc:function(t){return this.hasTarget(this.data.targets,t.id)},isArc:function(t){return"data"in t&&this.hasTarget(this.data.targets,t.data.id)},findSameXOfValues:function(t,e){var i,n=t[e].x,a=[];for(i=e-1;i>=0&&n===t[i].x;i--)a.push(t[i]);for(i=e;i<t.length&&n===t[i].x;i++)a.push(t[i]);return a},findClosestFromTargets:function(t,e){var i=this,n=t.map(function(t){return i.findClosest(t.values,e)});return i.findClosest(n,e)},findClosest:function(t,e){var i,n,a=this,r=a.$el.main,o=t.filter(function(t){return t&&tS(t.value)});return o.filter(function(t){return a.isBarType(t.id)||a.isCandlestickType(t.id)}).forEach(function(t){var e=a.isBarType(t.id)?".".concat(W.chartBar,".").concat(Y.target).concat(a.getTargetSelectorSuffix(t.id)," .").concat(W.bar,"-").concat(t.index):".".concat(Z.chartCandlestick,".").concat(Y.target).concat(a.getTargetSelectorSuffix(t.id)," .").concat(Z.candlestick,"-").concat(t.index," path");!n&&a.isWithinBar(r.select(e).node())&&(n=t)}),o.filter(function(t){return!a.isBarType(t.id)&&!a.isCandlestickType(t.id)}).forEach(function(t){var i=a.dist(t,e);i<a.getPointSensitivity(t)&&(n=t)}),n},dist:function(t,e){var i=this.config.axis_rotated,n=this.scale,a=this.circleY(t,t.index);return Math.sqrt(Math.pow((n.zoom||n.x)(t.x)-e[+i],2)+Math.pow(a-e[+!i],2))},convertValuesToStep:function(t){var e=this.axis,i=this.config.line_step_type,n=!!e&&e.isCategorized(),a=t$(t)?t.concat():[t];if(!(n||/step\-(after|before)/.test(i)))return t;if(a.length){var r=a[0],o=a[a.length-1],s=r.id,c=r.x;a.unshift({x:--c,value:r.value,id:s}),n&&"step-after"===i&&a.unshift({x:--c,value:r.value,id:s}),c=o.x,a.push({x:++c,value:o.value,id:s}),n&&"step-before"===i&&a.push({x:++c,value:o.value,id:s})}return a},convertValuesToRange:function(t){var e=t$(t)?t.concat():[t],i=[];return e.forEach(function(t){var e=t.x,n=t.id;i.push({x:e,id:n,value:t.value[0]}),i.push({x:e,id:n,value:t.value[2]})}),i},updateDataAttributes:function(t,e){var i=this.config["data_".concat(t)];return tL(e)||(Object.keys(e).forEach(function(t){i[t]=e[t]}),this.redraw({withLegend:!0})),i},getRangedData:function(t,e,i){void 0===e&&(e=""),void 0===i&&(i="areaRange");var n=null==t?void 0:t.value;if(t$(n))if("bar"===i)return n.reduce(function(t,e){return e-t});else{var a=({areaRange:["high","mid","low"],candlestick:["open","high","low","close","volume"]})[i].indexOf(e);return a>=0&&n?n[a]:void 0}return n&&e?n[e]:n},setRatioForGroupedData:function(t){var e=this;if(e.config.data_groups.length&&t.some(function(t){return e.isGrouped(t.id)})){var i=function(t){return e.getRatio("index",t,!0)};t.forEach(function(t){"values"in t?t.values.forEach(i):i(t)})}},getRatio:function(t,e,i){void 0===i&&(i=!1);var n=this.config,a=this.state,r=this.api,o=0;if(e&&r.data.shown().length)if(o=e.ratio||e.value,"arc"===t)if(this.pie.padAngle()())o=e.value/this.getTotalDataSum(!0);else{var s=n.gauge_fullCircle?this.getArcLength():-2*this.getStartingAngle(),c=this.hasType("gauge")?s:2*Math.PI;o=(e.endAngle-e.startAngle)/c}else if("index"===t){var l=r.data.values.bind(r),u=this.getTotalPerIndex();if(a.hiddenTargetIds.length){var d=l(a.hiddenTargetIds,!1);d.length&&(d=d.reduce(function(t,e){return t.map(function(t,i){return(tR(t)?t:0)+e[i]})}),u=u.map(function(t,e){return t-d[e]}))}var h=u[e.index];e.ratio=tR(e.value)&&u&&h?e.value/h:0,o=e.ratio}else if("radar"===t)o=parseFloat(String(Math.max(e.value,0)))/a.current.dataMax*n.radar_size_ratio;else if("bar"===t){var g=this.getYScaleById.bind(this)(e.id).domain().reduce(function(t,e){return e-t});o=0===g?0:Math.abs(this.getRangedData(e,null,t)/g)}else"treemap"===t&&(o/=this.getTotalDataSum(!0));return i&&o?100*o:o},updateDataIndexByX:function(t){var e=t.reduce(function(t,e,i){return t[Number(e.x)]=i,t},{});this.data.targets.forEach(function(t){t.values.forEach(function(t,i){var n=e[Number(t.x)];void 0===n&&(n=i),t.index=n})})},isBubbleZType:function(t){return this.isBubbleType(t)&&(tB(t.value)&&("z"in t.value||"y"in t.value)||t$(t.value)&&t.value.length>=2)},isBarRangeType:function(t){var e=t.value;return this.isBarType(t)&&t$(e)&&e.length>=2&&e.every(function(t){return tR(t)})},getDataById:function(t){var e,i=this.cache.get(t)||this.api.data(t);return null!==(e=null==i?void 0:i[0])&&void 0!==e?e:i}},{load:function(t,e){var i=this,n=i.axis,a=i.data,r=i.org,o=i.scale,s=e.append,c={domain:null,currentDomain:null,x:null},l=t;l&&(e.filter&&(l=l.filter(e.filter)),(e.type||e.types)&&l.forEach(function(t){var n,a=(null===(n=e.types)||void 0===n?void 0:n[t.id])||e.type;i.setTargetType(t.id,a)}),a.targets.forEach(function(t){for(var e=0;e<l.length;e++)if(t.id===l[e].id){t.values=s?t.values.concat(l[e].values):l[e].values,l.splice(e,1);break}}),a.targets=a.targets.concat(l)),i.updateTargets(a.targets),o.zoom&&(c.x=n.isCategorized()?o.x.orgScale():(r.xScale||o.x).copy(),c.domain=i.getXDomain(a.targets),c.x.domain(c.domain),c.currentDomain=i.zoom.getDomain(),i.withinRange(c.currentDomain,void 0,c.domain)||(o.x.domain(c.domain),o.zoom=null,i.$el.eventRect.property("__zoom",null))),i.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0}),o.zoom?(r.xDomain=c.domain,r.xScale=c.x,n.isCategorized()&&(c.currentDomain=i.getZoomDomainValue(c.currentDomain),r.xDomain=i.getZoomDomainValue(r.xDomain),r.xScale=c.x.domain(r.xDomain)),i.updateCurrentZoomTransform(c.x,c.currentDomain)):r.xScale&&r.xScale.domain(r.xDomain),i.updateTypesElements(),eb.call(i,e.done,e.resizeAfter)},loadFromArgs:function(t){var e=this;e.config&&(e.cache.reset(),e.convertData(t,function(i){var n=t.data||i;t.append&&(n.__append__=!0),n&&e.load(e.convertDataToTargets(n),t)}))},unload:function(t,e){var i,n=this,a=n.state,r=n.$el,o=n.$T,s=!!(null===(i=n.hasLegendDefsPoint)||void 0===i?void 0:i.call(n)),c=e,l=t;if(n.cache.reset(),c||(c=function(){}),!(l=l.filter(function(t){return n.hasTarget(n.data.targets,t)}))||0===l.length){c();return}o(r.svg.selectAll(l.map(function(t){return n.selectorTarget(t)}))).style("opacity","0").remove().call(tV,c),l.forEach(function(t){var e,i=n.getTargetSelectorSuffix(t);a.withoutFadeIn[t]=!1,r.legend&&r.legend.selectAll(".".concat(tt.legendItem).concat(i)).remove(),n.data.targets=n.data.targets.filter(function(e){return e.id!==t}),s&&(null===(e=r.defs)||void 0===e||e.select("#".concat(n.getDefsPointId(i))).remove())}),a.hasFunnel&&n.updateFunnel(n.data.targets),a.hasTreemap&&n.updateTargetsForTreemap(n.data.targets),n.updateTypesElements()}},{categoryName:function(t){var e,i=this.config.axis_x_categories;return null!==(e=null==i?void 0:i[t])&&void 0!==e?e:t}},{generateClass:function(t,e){return" ".concat(t," ").concat(t+this.getTargetSelectorSuffix(e))},getClass:function(t,e){var i=this,n=/s$/.test(t),a=/^(area|arc|line|funnel|treemap)s?$/.test(t),r=n?"id":"index";return function(o){var s=o.data||o;return((e?i.generateClass(th[n?"shapes":"shape"],s[r]):"")+i.generateClass(th[t],s[a?"id":r])).trim()}},getChartClass:function(t){var e=this;return function(i){return th["chart".concat(t)]+e.classTarget((i.data?i.data:i).id)}},generateExtraLineClass:function(){var t=this.config.line_classes||[],e=[];return function(i){var n,a=i.id||(null===(n=i.data)||void 0===n?void 0:n.id)||i;return 0>e.indexOf(a)&&e.push(a),t[e.indexOf(a)%t.length]}},classRegion:function(t,e){return"".concat(this.generateClass(th.region,e)," ").concat("class"in t?t.class:"")},classTarget:function(t){var e=this.config.data_classes[t],i="";return e&&(i=" ".concat(th.target,"-").concat(e)),this.generateClass(th.target,t)+i},classFocus:function(t){return this.classFocused(t)+this.classDefocused(t)},classFocused:function(t){return" ".concat(this.state.focusedTargetIds.indexOf(t.id)>=0?th.focused:"")},classDefocused:function(t){return" ".concat(this.state.defocusedTargetIds.indexOf(t.id)>=0?th.defocused:"")},getTargetSelectorSuffix:function(t){return(t||0===t?"-".concat(t):"").replace(/[\x00-\x20\x7F-\xA0\s?!@#$%^&*()_=+,.<>'":;\[\]\/|~`{}\\]/g,"-")},selectorTarget:function(t,e,i){void 0===e&&(e=""),void 0===i&&(i="");var n=this.getTargetSelectorSuffix(t);return"".concat(e,".").concat(th.target+n," ").concat(i,", ").concat(e,".").concat(th.circles+n," ").concat(i)},selectorTargets:function(t,e){var i=this,n=t||[];return n.length?n.map(function(t){return i.selectorTarget(t,e)}):null},selectorLegend:function(t){return".".concat(th.legendItem+this.getTargetSelectorSuffix(t))},selectorLegends:function(t){var e=this;return(null==t?void 0:t.length)?t.map(function(t){return e.selectorLegend(t)}):null}},{generateColor:function(){var t=this,e=t.$el,i=t.config,n=i.data_colors,a=i.data_color,r=[],o=tF(i.color_pattern)?i.color_pattern:(0,v.A)(function(t){var e=er.colorPattern,i=tb.body,n=i[e];if(!n){var a=t.classed(K.colorPattern,!0).style("background-image");t.classed(K.colorPattern,!1),a.indexOf(";")>-1&&(n=a.replace(/url[^#]*|["'()]|(\s|%20)/g,"").split(";").map(function(t){return t.trim().replace(/[\"'\s]/g,"")}).filter(Boolean),i[e]=n)}return n}(e.chart)||eA).range(),s=o;if(tE(i.color_tiles)){var c=i.color_tiles.bind(t.api)(),l=o.map(function(e,i){var n=e.replace(/[#\(\)\s,]/g,""),a="".concat(t.state.datetimeId,"-pattern-").concat(n,"-").concat(i);return ew(c[i%c.length],e,a)});o=l.map(function(t){return"url(#".concat(t.id,")")}),t.patterns=l}return function(e){var c,l,u=e.id||(null===(c=e.data)||void 0===c?void 0:c.id)||e,d=t.isTypeOf(u,["line","spline","step"])||!i.data_types[u];return tE(n[u])?l=n[u].bind(t.api)(e):n[u]?l=n[u]:(0>r.indexOf(u)&&r.push(u),l=d?s[r.indexOf(u)%s.length]:o[r.indexOf(u)%o.length],n[u]=l),tE(a)?a.bind(t.api)(l,e):l}},generateLevelColor:function(){var t=this.config,e=t.color_pattern,i=t.color_threshold,n="value"===i.unit,a=i.max||100,r=i.values&&i.values.length?i.values:[];return tF(i)?function(t){for(var i=n?t:100*t/a,o=e[e.length-1],s=0,c=r.length;s<c;s++)if(i<=r[s]){o=e[s];break}return o}:null},generateTextBGColorFilter:function(t,e){void 0===e&&(e={x:0,y:0,width:1,height:1});var i=this,n=i.$el,a=i.state;if(t){var r=[];tC(t)?r.push(""):tB(t)&&(r=Object.keys(t)),r.forEach(function(r){var o="".concat(a.datetimeId,"-labels-bg").concat(i.getTargetSelectorSuffix(r)).concat(tC(t)?i.getTargetSelectorSuffix(t):"");n.defs.append("filter").attr("x",e.x).attr("y",e.y).attr("width",e.width).attr("height",e.height).attr("id",o).html('<feFlood flood-color="'.concat(""===r?t:t[r],'" />\n						<feComposite in="SourceGraphic" />'))})}},getGradienColortUrl:function(t){return"url(#".concat(this.state.datetimeId,"-gradient").concat(this.getTargetSelectorSuffix(t),")")},updateLinearGradient:function(){var t=this,e=t.config,i=t.data.targets,n=t.state.datetimeId,a=t.$el.defs;i.forEach(function(i){var r="".concat(n,"-gradient").concat(t.getTargetSelectorSuffix(i.id)),o=t.hasPointType()&&e.point_radialGradient,s=t.isAreaType(i)&&"area"||t.isBarType(i)&&"bar";if((o||s)&&a.select("#".concat(r)).empty()){var c=t.color(i),l={defs:null,stops:[]};if(o){var u=o.cx,d=o.cy,h=o.r,g=o.stops,f=void 0===g?[[.1,c,0],[.9,c,1]]:g;l.stops=f,l.defs=a.append("radialGradient").attr("id","".concat(r)).attr("cx",void 0===u?.3:u).attr("cy",void 0===d?.3:d).attr("r",void 0===h?.7:h)}else{var p=e.axis_rotated,v=e["".concat(s,"_linearGradient")],x=v.x,m=void 0===x?p?[1,0]:[0,0]:x,_=v.y,y=void 0===_?p?[0,0]:[0,1]:_,T=v.stops,f=void 0===T?[[0,c,1],[1,c,0]]:T;l.stops=f,l.defs=a.append("linearGradient").attr("id","".concat(r)).attr("x1",m[0]).attr("x2",m[1]).attr("y1",y[0]).attr("y2",y[1])}l.stops.forEach(function(e){var n=e[0],a=e[1],r=e[2],o=tE(a)?a.bind(t.api)(i.id):a;l.defs&&l.defs.append("stop").attr("offset",n).attr("stop-color",o||c).attr("stop-opacity",r)})}})},setOverColor:function(t,e){var i=this,n=i.config,a=i.$el.main,r=n.color_onover,o=t?r:i.color;tB(o)?o=function(t){var e=t.id;return e in r?r[e]:i.color(e)}:tC(o)?o=function(){return r}:tE(r)&&(o=o.bind(i.api)),a.selectAll(tB(e)?".".concat(j.arc).concat(i.getTargetSelectorSuffix(e.id)):".".concat(ts.shape,"-").concat(e)).style("fill",o)}},{getYDomainMinMax:function(t,e){var i=this.axis,n=this.config,a="min"===e,r=n.data_groups,o=this.mapToIds(t),s=this.getValuesAsIdKeyed(t);if(r.length>0){var c=this["has".concat(a?"Negative":"Positive","ValueInTargets")](t);r.forEach(function(t){var e=t.filter(function(t){return o.indexOf(t)>=0});if(e.length){var n=e[0],r=i.getId(n);c&&s[n]&&(s[n]=s[n].map(function(t){return(a?t<0:t>0)?t:0})),e.filter(function(t,e){return e>0}).forEach(function(t){if(s[t]){var e=i.getId(t);s[t].forEach(function(t,i){var o=+t;e!==r||c&&(a?o>0:o<0)||(s[n][i]+=o)})}})}})}return t6(e,Object.keys(s).map(function(t){return t6(e,s[t])}))},isHiddenTargetWithYDomain:function(t){var e=this;return e.state.hiddenTargetIds.some(function(i){return e.axis.getId(i)===t})},getYDomain:function(t,e,i){var n=this,a=n.axis,r=n.config,o=n.scale,s="axis_".concat(e);if(n.isStackNormalized())return[0,100];var c=(null==o?void 0:o[e])&&"log"===o[e].type,l=t.filter(function(t){return a.getId(t.id)===e}),u=i?n.filterByXDomain(l,i):l;if(0===u.length)if(n.isHiddenTargetWithYDomain(e))return o[e].domain();else return"y2"===e?o.y.domain():n.getYDomain(t,"y2",i);var d=r["".concat(s,"_min")],h=r["".concat(s,"_max")],g=r["".concat(s,"_center")],f=r["".concat(s,"_inverted")],p=n.hasDataLabel()&&r.axis_rotated,v=n.hasDataLabel()&&!r.axis_rotated,x=n.getYDomainMinMax(u,"min"),m=n.getYDomainMinMax(u,"max"),_=G([es.BAR,es.BUBBLE,es.SCATTER],el.Line,!0).some(function(t){var e=t.indexOf("area")>-1?"area":t;return n.hasType(t,u,!0)&&r["".concat(e,"_zerobased")]});x=tS(d)?d:tS(h)?x<=h?x:h-10:x,m=tS(h)?h:tS(d)?d<=m?m:d+10:m,isNaN(x)&&(x=0),isNaN(m)&&(m=x),x===m&&(x<0?m=0:x=0);var y=x>=0&&m>=0,T=x<=0&&m<=0;(tS(d)&&y||tS(h)&&T)&&(_=!1),_&&(y&&(x=0),T&&(m=0));var b=Math.abs(m-x),w={top:.1*b,bottom:.1*b};if(tI(g)){var A=Math.max(Math.abs(x),Math.abs(m));m=g+A,x=g-A}if(p){var k=tz(o.y.range()),S=n.getDataLabelLength(x,m,"width").map(function(t){return t/k});["bottom","top"].forEach(function(t,e){w[t]+=b*(S[e]/(1-S[0]-S[1]))})}else if(v){var E=n.getDataLabelLength(x,m,"height");["bottom","top"].forEach(function(t,e){w[t]+=n.convertPixelToScale("y",E[e],b)})}w=n.getResettedPadding(w);var C=r["".concat(s,"_padding")];tF(C)&&["bottom","top"].forEach(function(t){w[t]=a.getPadding(C,t,w[t],b)}),_&&(y&&(w.bottom=x),T&&(w.top=-m));var R=c?[x,m].map(function(t){return t<0?0:t}):[x-w.bottom,m+w.top];return f?R.reverse():R},getXDomainMinMax:function(t,e){var i,n=this.config["axis_x_".concat(e)],a=t6(e,t.map(function(t){return t6(e,t.values.map(function(t){return t.x}))})),r=tB(n)?n.value:n;return r=tI(r)&&(null===(i=this.axis)||void 0===i?void 0:i.isTimeSeries())?t9.bind(this)(r):r,tB(n)&&n.fit&&("min"===e&&r<a||"max"===e&&r>a)&&(r=void 0),tI(r)?r:a},getXDomainPadding:function(t,e){var i,n=this.axis,a=this.config.axis_x_padding,r=n.isTimeSeries()&&e,o=tz(t);if(n.isCategorized()||r)i=0;else if(this.hasType("bar")){var s=this.getMaxDataCount();i=s>1?o/(s-1)/2:.5}else i=this.getResettedPadding(.01*o);var c=tR(a)?{left:a,right:a}:a,l=c.left,u=void 0===l?i:l,d=c.right,h=void 0===d?i:d;if("px"===a.unit){var g=Math.abs(o+.2*o);u=n.getPadding(a,"left",i,g),h=n.getPadding(a,"right",i,g)}else{var f=o+u+h;if(r&&f){var p=o/e/f;u=u/f/p,h=h/f/p}}return{left:u,right:h}},getXDomain:function(t){var e=this.axis,i=this.config,n=this.scale.x,a=i.axis_x_inverted,r=[this.getXDomainMinMax(t,"min"),this.getXDomainMinMax(t,"max")],o=r[0],s=void 0===o?0:o,c=r[1],l=void 0===c?0:c;if("log"!==n.type){var u=e.isCategorized(),d=e.isTimeSeries(),h=this.getXDomainPadding(r),g=r[0],f=r[1];g-f!=0||u||(d?(g=new Date(.5*g.getTime()),f=new Date(1.5*f.getTime())):(g=0===g?1:.5*g,f=0===f?-1:1.5*f)),(g||0===g)&&(s=d?new Date(g.getTime()-h.left):g-h.left),(f||0===f)&&(l=d?new Date(f.getTime()+h.right):f+h.right)}return a?[l,s]:[s,l]},updateXDomain:function(t,e,i,n,a){var r=this.config,o=this.org,s=this.scale,c=s.x,l=s.subX,u=r.zoom_enabled;if(i&&(c.domain(a||t4(this.getXDomain(t),!r.axis_x_inverted)),o.xDomain=c.domain(),l.domain(c.domain()),null===(d=this.brush)||void 0===d||d.scale(l)),e){var d,h,g=!a&&this.brush&&(h=tU(this))&&h[0]!==h[1]?tU(this).map(l.invert):o.xDomain;c.domain(g)}return(i||e)&&u&&this.zoom.updateScaleExtent(),n&&c.domain(this.trimXDomain(c.orgDomain())),c.domain()},trimXDomain:function(t){var e=this.config.axis_x_inverted,i=this.getZoomDomain(),n=i[0],a=i[1];return(e?t[0]>=n:t[0]<=n)&&(t[1]=+t[1]+(n-t[0]),t[0]=n),(e?t[1]<=a:t[1]>=a)&&(t[0]=+t[0]-(t[1]-a),t[1]=a),t},getZoomDomain:function(t,e){void 0===t&&(t="zoom"),void 0===e&&(e=!1);var i=this.config,n=this.scale,a=this.org,r=e&&n[t]?n[t].domain():a.xDomain,o=r[0],s=r[1];return"zoom"===t&&(tI(i.zoom_x_min)&&(o=t6("min",[o,i.zoom_x_min])),tI(i.zoom_x_max)&&(s=t6("max",[s,i.zoom_x_max]))),[o,s]},getZoomDomainValue:function(t){var e=this.config;if(this.axis.isCategorized()&&Array.isArray(t)){var i=e.axis_x_inverted;return t.map(function(t,e){return Number(t)+(0===e?+i:+!i)})}return t},convertPixelToScale:function(t,e,i){var n=this.config,a=this.state,r=n.axis_rotated;return i*(e/a["x"===t?r?"height":"width":r?"width":"height"])},withinRange:function(t,e,i){void 0===e&&(e=[0,0]);var n=this.config.axis_x_inverted,a=i[0],r=i[1];if(Array.isArray(t)){var o=G([],t,!0);if(n&&o.reverse(),o[0]<o[1])return t.every(function(i,o){return(0===o?n?+i<=a:+i>=a:n?+i>=r:+i<=r)&&!t.every(function(t,i){return t===e[i]})})}return!1}},{setExpand:function(t,e,i){var n=this.config;this.$el.circle&&n.point_focus_expand_enabled&&this.expandCircles(t,e,i),this.expandBarTypeShapes(!0,t,e,i)},expandBarTypeShapes:function(t,e,i,n){void 0===t&&(t=!0);var a=this;["bar","candlestick"].filter(function(t){return a.$el[t]}).forEach(function(r){n&&a.$el[r].classed(Y.EXPANDED,!1),a.getShapeByIndex(r,e,i).classed(Y.EXPANDED,t)})},setOverOut:function(t,e){var i=this,n=i.config,a=i.state,r=a.hasFunnel,o=a.hasRadar,s=a.hasTreemap,l=i.$el.main,u=tB(e);if(u||-1!==e){var d=n[t?"data_onover":"data_onout"].bind(i.api);if(n.color_onover&&i.setOverColor(t,e,u),u&&1){var h=i.getTargetSelectorSuffix(e.id),g=r||s?"".concat(Y.target+h," .").concat(ts.shape):j.arc+h;d(e,l.select(".".concat(g)).node())}else if(n.tooltip_grouped)t&&(o&&i.isPointFocusOnly()?i.showCircleFocus(i.getAllValuesOnIndex(e,!0)):i.setExpand(e,null,!0)),i.isMultipleX()||l.selectAll(".".concat(ts.shape,"-").concat(e)).each(function(t){d(t,this)});else{var f=i.cache.get(er.setOverOut)||[],p=l.selectAll(".".concat(ts.shape,"-").concat(e)).filter(function(t){return i.isWithinShape(this,t)}),v=p.filter(function(){var t=this;return f.every(function(e){return e!==t})});if(!t||p.empty()||f.length===v.size()&&v.nodes().every(function(t,e){return t!==f[e]}))for(;f.length;){var x=f.pop();n.data_onout.bind(i.api)((0,c.A)(x).datum(),x)}v.each(function(){t&&(d((0,c.A)(this).datum(),this),f.push(this))}),i.cache.add(er.setOverOut,f)}}},callOverOutForTouch:function(t){var e=this.cache.get(er.callOverOutForTouch);(tB(t)&&e?t.id!==e.id:t!==e)&&((e||tR(e))&&this.setOverOut(!1,e),(t||tR(t))&&this.setOverOut(!0,t),this.cache.add(er.callOverOutForTouch,t))},getDraggableSelection:function(){var t=this,e=t.config,i=t.state;return e.interaction_enabled&&e.data_selection_draggable&&t.drag?(0,p.A)().on("drag",function(e){i.event=e,t.drag(tH(e,this))}).on("start",function(e){i.event=e,t.dragstart(tH(e,this))}).on("end",function(e){i.event=e,t.dragend()}):function(){}},dispatchEvent:function(t,e,i){var n,a,r,o=this.config,s=this.state,c=s.eventReceiver,l=s.hasAxis,u=s.hasFunnel,d=s.hasRadar,h=s.hasTreemap,g=this.$el,f=g.eventRect,p=g.funnel,v=g.radar,x=g.svg,m=g.treemap,_=null===(r=null===(a=(u||h)&&c.rect||d&&v.axes.select(".".concat(U.axis,"-").concat(e," text"))||f||(null===(n=this.getArcElementByIdOrIndex)||void 0===n?void 0:n.call(this,e)))||void 0===a?void 0:a.node)||void 0===r?void 0:r.call(a);if(_){var y=this.isMultipleX(),T=o.axis_rotated,b=_.getBoundingClientRect(),w=b.width,A=b.left,k=b.top;if(l&&!d&&!y){var S=c.coords[e];S?(w=S.w,A+=S.x,k+=S.y):(w=0,A=0,k=0)}var E=A+(i?i[0]:0)+(y||T?0:w/2),C=k+(i?i[1]:0)+4*!!T;if(et(x)){var R=t0(this.$el.eventRect.node(),E,C,!1);E=R.x,C=R.y}var L={screenX:E,screenY:C,clientX:E,clientY:C,bubbles:d};(u||h)&&(_=(null!=p?p:m).node()),t8[/^(mouse|click)/.test(t)?"mouse":"touch"](_,t,L)}},setDragStatus:function(t){this.state.dragging=t},unbindZoomEvent:function(){var t=this.$el,e=t.eventRect,i=t.zoomResetBtn;null==e||e.on(".zoom wheel.zoom .drag",null),null==i||i.on("click",null).style("display","none")},unbindAllEvents:function(){var t,e=this.$el,i=e.arcs,n=e.eventRect,a=e.legend,r=e.region,o=e.svg,s=e.treemap,c=this.brush;[o,n,null==r?void 0:r.list,null==c?void 0:c.getSelection(),null==i?void 0:i.selectAll("path"),null==a?void 0:a.selectAll("g"),s].forEach(function(t){return null==t?void 0:t.on("wheel click mouseover mousemove mouseout touchstart touchmove touchend touchstart.eventRect touchmove.eventRect touchend.eventRect .brush .drag .zoom wheel.zoom dblclick.zoom",null)}),null===(t=this.unbindZoomEvent)||void 0===t||t.call(this)}},{yFormat:function(t){return ek(this,"y",t)},y2Format:function(t){return ek(this,"y2",t)},getDefaultValueFormat:function(){var t=this,e=t.defaultArcValueFormat,i=t.yFormat,n=t.y2Format,a=t.hasArcType(null,["gauge","polar","radar"]);return function(r,o,s){return(a?e:t.axis&&"y2"===t.axis.getId(s)?n:i).call(t,r,o)}},defaultValueFormat:function(t){return t$(t)?t.join("~"):tS(t)?+t:""},defaultArcValueFormat:function(t,e){return"".concat((100*e).toFixed(1),"%")},defaultPolarValueFormat:function(t){return"".concat(t)},dataLabelFormat:function(t){var e=this.config.data_labels,i=function(t){var e=t;return t$(t)?e=t.join("~"):tB(t)&&(e=Object.values(t).join("~")),e},n=i;return tE(e.format)?n=e.format:tP(e.format)&&(n=e.format[t]?!0===e.format[t]?i:e.format[t]:function(){return""}),n.bind(this.api)}},{initLegend:function(){var t=this.config,e=this.$el;this.legendItemTextBox={},this.state.legendHasRendered=!1,t.legend_show?(t.legend_contents_bindto||(e.legend=this.$el.svg.append("g").classed(tt.legend,!0).attr("transform",this.getTranslate("legend"))),this.updateLegend()):this.state.hiddenLegendIds=this.mapToIds(this.data.targets)},updateLegend:function(t,e,i){var n,a=this,r=a.config,o=a.state,s=a.scale,c=a.$el,l=e||{withTransform:!1,withTransitionForTransform:!1,withTransition:!1};l.withTransition=tM(l,"withTransition",!0),l.withTransitionForTransform=tM(l,"withTransitionForTransform",!0),r.legend_contents_bindto&&r.legend_contents_template?a.updateLegendTemplate():o.hasTreemap||a.updateLegendElement(t||a.mapToIds(a.data.targets),l,i),null===(n=c.legend)||void 0===n||n.selectAll(".".concat(tt.legendItem)).classed(tt.legendItemHidden,function(t){var e=!a.isTargetToShow(t);return e&&(this.style.opacity=null),e}),a.updateScales(!1,!s.zoom),a.updateSvgSize(),a.transformAll(l.withTransitionForTransform,i),o.legendHasRendered=!0},updateLegendTemplate:function(){var t=this,e=t.config,i=t.$el,n=(0,c.A)(e.legend_contents_bindto),a=e.legend_contents_template;if(!n.empty()){var r=t.mapToIds(t.data.targets),o=[],s="";r.forEach(function(e){var i=tE(a)?a.bind(t.api)(e,t.color(e),t.api.data(e)[0].values):t7(a,{COLOR:t.color(e),TITLE:e});i&&(o.push(e),s+=i)});var l=n.html(s).selectAll(function(){return this.childNodes}).data(o);t.setLegendItem(l),i.legend=n}},updateSizeForLegend:function(t){var e=this.config,i=this.state,n=i.isLegendTop,a=i.isLegendLeft,r=i.isLegendRight,o=i.isLegendInset,s=i.current,c=t.width,l=t.height,u={top:n?this.getCurrentPaddingByDirection("top")+e.legend_inset_y+5.5:s.height-l-this.getCurrentPaddingByDirection("bottom")-e.legend_inset_y,left:a?this.getCurrentPaddingByDirection("left")+e.legend_inset_x+.5:s.width-c-this.getCurrentPaddingByDirection("right")-e.legend_inset_x+.5};this.state.margin3={top:r?0:o?u.top:s.height-l,right:NaN,bottom:0,left:r?s.width-c:o?u.left:0}},transformLegend:function(t){var e=this.$el.legend;(0,this.$T)(e,t).attr("transform",this.getTranslate("legend"))},updateLegendStep:function(t){this.state.legendStep=t},updateLegendItemWidth:function(t){this.state.legendItemWidth=t},updateLegendItemHeight:function(t){this.state.legendItemHeight=t},updateLegendItemColor:function(t,e){var i=this.$el.legend;i&&i.select(".".concat(tt.legendItem,"-").concat(t," line")).style("stroke",e)},getLegendWidth:function(){var t=this.state,e=t.current.width,i=t.isLegendRight,n=t.isLegendInset,a=t.legendItemWidth,r=t.legendStep;return this.config.legend_show?i||n?a*(r+1):e:0},getLegendHeight:function(){var t,e=this.state,i=e.current,n=e.isLegendRight,a=e.legendItemHeight,r=e.legendStep,o=(null===(t=this.config.padding)||void 0===t?void 0:t.mode)==="fit";return this.config.legend_show?n?i.height:Math.max(o?10:20,a)*(r+1):0},opacityForUnfocusedLegend:function(t){return t.classed(tt.legendItemHidden)?null:"0.3"},toggleFocusLegend:function(t,e){var i=this,n=i.$el.legend,a=i.$T,r=i.mapToTargetIds(t);n&&a(n.selectAll(".".concat(tt.legendItem)).filter(function(t){return r.indexOf(t)>=0}).classed(tn.legendItemFocused,e)).style("opacity",function(){return e?null:i.opacityForUnfocusedLegend.call(i,(0,c.A)(this))})},revertLegend:function(){var t=this.$el.legend,e=this.$T;t&&e(t.selectAll(".".concat(tt.legendItem)).classed(tn.legendItemFocused,!1)).style("opacity",null)},showLegend:function(t){var e=this.config,i=this.$el,n=this.$T;!e.legend_show&&(e.legend_show=!0,i.legend?i.legend.style("visibility",null):this.initLegend(),this.state.legendHasRendered||this.updateLegend()),this.removeHiddenLegendIds(t),n(i.legend.selectAll(this.selectorLegends(t)).style("visibility",null)).style("opacity",null)},hideLegend:function(t){var e=this.config,i=this.$el.legend;e.legend_show&&tX(t)&&(e.legend_show=!1,i.style("visibility","hidden")),this.addHiddenLegendIds(t),i.selectAll(this.selectorLegends(t)).style("opacity","0").style("visibility","hidden")},getLegendItemTextBox:function(t,e){var i,n=this.cache,a=this.state,r=er.legendItemTextBox;return t&&((i=!a.redrawing&&n.get(r)||{})[t]||(i[t]=this.getTextRect(e,tt.legendItem),n.add(r,i)),i=i[t]),i},setLegendItem:function(t){var e=this,i=e.$el,n=e.api,a=e.config,r=e.state,o="touch"===r.inputType,s=e.hasType("gauge"),l=a.boost_useCssRule,u=a.legend_item_interaction;t.attr("class",function(t){var i=(0,c.A)(this);return(!i.empty()&&i.attr("class")||"")+e.generateClass(tt.legendItem,t)}).style("visibility",function(t){return e.isLegendToShow(t)?null:"hidden"}),a.interaction_enabled&&(l&&[[".".concat(tt.legendItem),"cursor:pointer"],[".".concat(tt.legendItem," text"),"pointer-events:none"],[".".concat(tt.legendItemPoint," text"),"pointer-events:none"],[".".concat(tt.legendItemTile),"pointer-events:none"],[".".concat(tt.legendItemEvent),"fill-opacity:0"]].forEach(function(t){var n=t[0],a=t[1];e.setCssRule(!1,n,[a])(i.legend)}),t.on(u.dblclick?"dblclick":"click",u||tE(a.legend_item_onclick)?function(t,i){if(!tN(a.legend_item_onclick,n,i,!r.hiddenTargetIds.includes(i))){var s=t.altKey,l=t.target;"dblclick"===t.type||s?r.hiddenTargetIds.length&&-1===l.parentNode.getAttribute("class").indexOf(tt.legendItemHidden)?n.show():(n.hide(),n.show(i)):(n.toggle(i),(0,c.A)(this).classed(tn.legendItemFocused,!1))}o&&e.hideTooltip()}:null),o||t.on("mouseout",u||tE(a.legend_item_onout)?function(t,i){tN(a.legend_item_onout,n,i,!r.hiddenTargetIds.includes(i))||((0,c.A)(this).classed(tn.legendItemFocused,!1),s&&e.undoMarkOverlapped(e,".".concat(Q.gaugeValue)),e.api.revert())}:null).on("mouseover",u||tE(a.legend_item_onover)?function(t,i){!tN(a.legend_item_onover,n,i,!r.hiddenTargetIds.includes(i))&&((0,c.A)(this).classed(tn.legendItemFocused,!0),s&&e.markOverlapped(i,e,".".concat(Q.gaugeValue)),!r.transiting&&e.isTargetToShow(i)&&n.focus(i))}:null),!t.empty()&&t.on("click mouseout mouseover")&&t.style("cursor",e.getStylePropValue("pointer")))},updateLegendElement:function(t,e){var i,n,a,r=this,o=r.config,s=r.state,c=r.$el.legend,l=r.$T,u="circle"!==o.legend_item_tile_type,d=o.legend_item_tile_r,h={width:u?o.legend_item_tile_width:2*d,height:u?o.legend_item_tile_height:2*d},g={padding:{top:4,right:10},max:{width:0,height:0},posMin:10,step:0,tileWidth:h.width+5,totalLength:0},f={offsets:{},widths:{},heights:{},margins:[0],steps:{}},p=t.filter(function(t){return!tI(o.data_names[t])||null!==o.data_names[t]}),v=e.withTransition,x=r.getUpdateLegendPositions(p,g,f);s.isLegendInset&&(g.step=o.legend_inset_step?o.legend_inset_step:p.length,r.updateLegendStep(g.step)),s.isLegendRight?(i=function(t){return g.max.width*f.steps[t]},n=function(t){return f.margins[f.steps[t]]+f.offsets[t]}):s.isLegendInset?(i=function(t){return g.max.width*f.steps[t]+10},n=function(t){return f.margins[f.steps[t]]+f.offsets[t]}):(i=function(t){return f.margins[f.steps[t]]+f.offsets[t]},n=function(t){return g.max.height*f.steps[t]});var m={xText:function(t,e){return i(t,e)+4+h.width},xRect:function(t,e){return i(t,e)},x1Tile:function(t,e){return i(t,e)-2},x2Tile:function(t,e){return i(t,e)-2+h.width},yText:function(t,e){return n(t,e)+9},yRect:function(t,e){return n(t,e)-5},yTile:function(t,e){return n(t,e)+4}};r.generateLegendItem(p,h,x,m),a=c.select(".".concat(tt.legendBackground," rect")),s.isLegendInset&&g.max.width>0&&0===a.size()&&(a=c.insert("g",".".concat(tt.legendItem)).attr("class",tt.legendBackground).append("rect")),o.legend_tooltip&&c.selectAll("title").data(p).text(function(t){return eE.bind(r)(t,!1)}),l(c.selectAll("text").data(p).text(function(t){return eE.bind(r)(t)}).each(function(t,e){x(this,t,e)}),v).attr("x",m.xText).attr("y",m.yText),l(c.selectAll("rect.".concat(tt.legendItemEvent)).data(p),v).attr("width",function(t){return f.widths[t]}).attr("height",function(t){return f.heights[t]}).attr("x",m.xRect).attr("y",m.yRect),r.updateLegendItemPos(p,v,m),a&&l(a,v).attr("height",r.getLegendHeight()-12).attr("width",g.max.width*(g.step+1)+10),r.updateLegendItemWidth(g.max.width),r.updateLegendItemHeight(g.max.height),r.updateLegendStep(g.step)},getUpdateLegendPositions:function(t,e,i){var n=this,a=n.config,r=n.state,o=r.isLegendRight||r.isLegendInset;return function(s,c,l){var u,d=l===t.length-1,h=n.getLegendItemTextBox(c,s),g=h.width+e.tileWidth+(d&&!o?0:e.padding.right)+a.legend_padding,f=h.height+e.padding.top,p=o?f:g,v=o?n.getLegendHeight():n.getLegendWidth(),x=function(t,n){!n&&(u=(v-e.totalLength-p)/2)<e.posMin&&(u=(v-p)/2,e.totalLength=0,e.step++),i.steps[t]=e.step,i.margins[e.step]=r.isLegendInset?10:u,i.offsets[t]=e.totalLength,e.totalLength+=p};if(0===l&&(e.totalLength=0,e.step=0,e.max.width=0,e.max.height=0),a.legend_show&&!n.isLegendToShow(c)){i.widths[c]=0,i.heights[c]=0,i.steps[c]=0,i.offsets[c]=0;return}i.widths[c]=g,i.heights[c]=f,(!e.max.width||g>=e.max.width)&&(e.max.width=g),(!e.max.height||f>=e.max.height)&&(e.max.height=f);var m=o?e.max.height:e.max.width;a.legend_equally?(Object.keys(i.widths).forEach(function(t){return i.widths[t]=e.max.width}),Object.keys(i.heights).forEach(function(t){return i.heights[t]=e.max.height}),(u=(v-m*t.length)/2)<e.posMin?(e.totalLength=0,e.step=0,t.forEach(function(t){return x(t)})):x(c,!0)):x(c)}},generateLegendItem:function(t,e,i,n){var a=this,r=a.config,o=a.state,s=a.$el.legend,c=r.legend_usePoint,u=r.legend_item_tile_r,d=r.legend_item_tile_type,h="circle"!==d,g=o.isLegendRight||o.isLegendInset,f=s.selectAll(".".concat(tt.legendItem)).data(t).enter().append("g");if(a.setLegendItem(f),r.legend_tooltip&&f.append("title").text(function(t){return t}),f.append("text").text(function(t){return eE.bind(a)(t)}).each(function(t,e){i(this,t,e)}).style("pointer-events",a.getStylePropValue("none")).attr("x",g?n.xText:-200).attr("y",g?-200:n.yText),f.append("rect").attr("class",tt.legendItemEvent).style("fill-opacity",a.getStylePropValue("0")).attr("x",g?n.xRect:-200).attr("y",g?-200:n.yRect),c){var p=[];f.append(function(t){var e=tF(r.point_pattern)?r.point_pattern:[r.point_type];-1===p.indexOf(t)&&p.push(t);var i=e[p.indexOf(t)%e.length];return"rectangle"===i&&(i="rect"),tb.createElementNS(l.A.svg,"hasValidPointType"in a&&a.hasValidPointType(i)?i:"use")}).attr("class",tt.legendItemPoint).style("fill",eS.bind(a)).style("pointer-events",a.getStylePropValue("none")).attr("href",function(t,e,i){var n=i[e].nodeName.toLowerCase(),r=a.getTargetSelectorSuffix(t);return"use"===n?"#".concat(o.datetimeId,"-point").concat(r):void 0})}else f.append(h?"line":d).attr("class",tt.legendItemTile).style("stroke",eS.bind(a)).style("pointer-events",a.getStylePropValue("none")).call(function(t){"circle"===d?t.attr("r",u).style("fill",eS.bind(a)).attr("cx",g?n.x2Tile:-200).attr("cy",g?-200:n.yTile):h&&t.attr("stroke-width",e.height).attr("x1",g?n.x1Tile:-200).attr("y1",g?-200:n.yTile).attr("x2",g?n.x2Tile:-200).attr("y2",g?-200:n.yTile)})},updateLegendItemPos:function(t,e,i){var n=this.config,a=this.$el.legend,r=this.$T,o=n.legend_usePoint,s=n.legend_item_tile_type,l="circle"!==s;if(o){var u=a.selectAll(".".concat(tt.legendItemPoint)).data(t);r(u,e).each(function(){var t=this.nodeName.toLowerCase(),e=n.point_r,a="x",r="y",o=2,s=2.5,l=null,u=null,d=null;if("circle"===t){var h=.2*e;a="cx",r="cy",l=e+h,o=2*e,s=-h}else if("rect"===t){var h=2.5*e;u=h,d=h,s=3}(0,c.A)(this).attr(a,function(t){return i.x1Tile(t)+o}).attr(r,function(t){return i.yTile(t)-s}).attr("r",l).attr("width",u).attr("height",d)})}else{var u=a.selectAll(".".concat(tt.legendItemTile)).data(t);r(u,e).style("stroke",eS.bind(this)).call(function(t){"circle"===s?t.attr("cx",function(t){var e=i.x2Tile(t);return e-(e-i.x1Tile(t))/2}).attr("cy",i.yTile):l&&t.attr("x1",i.x1Tile).attr("y1",i.yTile).attr("x2",i.x2Tile).attr("y2",i.yTile)})}}},{redraw:function(t){void 0===t&&(t={});var e,i,n,a,r=this,o=r.config,s=r.state,c=r.$el,l=c.main,u=c.treemap;s.redrawing=!0;var d=r.filterTargetsToShow(r.data.targets),h=t.flow,g=t.initializing,f=r.getWithOption(t),p=f.Transition?o.transition_duration:0,v=f.TransitionForExit?p:0,x=f.TransitionForAxis?p:0,m=null===(e=r.axis)||void 0===e?void 0:e.generateTransitions(x);r.updateSizes(g),f.Legend&&o.legend_show?(t.withTransition=!!p,u||r.updateLegend(r.mapToIds(r.data.targets),t,m)):f.Dimension&&r.updateDimension(!0),o.data_empty_label_text&&l.select("text.".concat(tl.text,".").concat(Y.empty)).attr("x",s.width/2).attr("y",s.height/2).text(o.data_empty_label_text).style("display",d.length?"none":null),s.hasAxis?(r.axis.redrawAxis(d,f,m,h,g),r.hasGrid()&&r.updateGrid(),o.regions.length&&r.updateRegion(),["bar","candlestick","line","area"].forEach(function(t){var e=tK(t);(/^(line|area)$/.test(t)&&r.hasTypeOf(e)||r.hasType(t))&&r["update".concat(e)](f.TransitionForExit)}),c.text&&l.selectAll(".".concat(to.selectedCircles)).filter(r.isBarType.bind(r)).selectAll("circle").remove(),o.interaction_enabled&&!h&&f.EventRect&&(r.redrawEventRect(),null===(i=r.bindZoomEvent)||void 0===i||i.call(r))):(c.arcs&&r.redrawArc(p,v,f.Transform),c.radar&&r.redrawRadar(),c.polar&&r.redrawPolar(),c.funnel&&r.redrawFunnel(),u&&r.updateTreemap(v)),!s.resizing&&!u&&(r.hasPointType()||s.hasRadar)?r.updateCircle():(null===(n=r.hasLegendDefsPoint)||void 0===n?void 0:n.call(r))&&r.data.targets.forEach(r.point("create",this)),r.hasDataLabel()&&!r.hasArcType(null,["radar"])&&r.updateText(),null===(a=r.redrawTitle)||void 0===a||a.call(r),g&&r.updateTypesElements(),r.generateRedrawList(d,h,p,f.Subchart),r.updateTooltipOnRedraw(),r.callPluginHook("$redraw",t,p)},generateRedrawList:function(t,e,i,n){var a=this,r=a.config,o=a.state,s=a.getDrawShape();o.hasAxis&&r.subchart_show&&a.redrawSubchart(n,i,s);var c=e&&a.generateFlow({targets:t,flow:e,duration:e.duration,shape:s,xv:a.xv.bind(a)}),l=(i||c)&&ee(),u=a.getRedrawList(s,e,c,l),d=function(){c&&c(),o.redrawing=!1,tN(r.onrendered,a.api)};if(d)if(l&&u.length){var h=eh();(0,b.kY)().duration(i).each(function(){u.reduce(function(t,e){return t.concat(e)},[]).forEach(function(t){return h.add(t)})}).call(h,d)}else o.transiting||d();a.mapToIds(a.data.targets).forEach(function(t){o.withoutFadeIn[t]=!0})},getRedrawList:function(t,e,i,n){var a=this,r=a.config,o=a.state,s=o.hasAxis,c=o.hasRadar,l=o.hasTreemap,u=a.$el.grid,d=t.pos,h=d.cx,g=d.cy,f=d.xForText,p=d.yForText,v=[];return s&&((r.grid_x_lines.length||r.grid_y_lines.length)&&v.push(a.redrawGrid(n)),r.regions.length&&v.push(a.redrawRegion(n)),Object.keys(t.type).forEach(function(e){var i=tK(e),r=t.type[e];(/^(area|line)$/.test(e)&&a.hasTypeOf(i)||a.hasType(e))&&v.push(a["redraw".concat(i)](r,n))}),!e&&u.main&&v.push(a.updateGridFocus())),(!a.hasArcType()||c)&&tF(r.data_labels)&&!1!==r.data_labels&&v.push(a.redrawText(f,p,e,n)),(a.hasPointType()||c)&&!a.isPointFocusOnly()&&a.redrawCircle&&v.push(a.redrawCircle(h,g,n,i)),l&&v.push(a.redrawTreemap(n)),v},updateAndRedraw:function(t){void 0===t&&(t={});var e,i=this.config,n=this.state;t.withTransition=tM(t,"withTransition",!0),t.withTransform=tM(t,"withTransform",!1),t.withLegend=tM(t,"withLegend",!1),t.withUpdateXDomain=!0,t.withUpdateOrgXDomain=!0,t.withTransitionForExit=!1,t.withTransitionForTransform=tM(t,"withTransitionForTransform",t.withTransition),t.withLegend&&i.legend_show||(n.hasAxis&&(e=this.axis.generateTransitions(t.withTransitionForAxis?i.transition_duration:0)),this.updateScales(),this.updateSvgSize(),this.transformAll(t.withTransitionForTransform,e)),this.redraw(t,e)}},{getXScale:function(t,e,i,n){var a="append"!==this.state.loading&&this.scale.zoom||eC(this.axis.getAxisType("x"),t,e);return this.getCustomizedXScale(i?a.domain(i):a,n)},getYScale:function(t,e,i,n){var a=eC(this.axis.getAxisType(t),e,i);return n&&a.domain(n),a},getYScaleById:function(t,e){void 0===e&&(e=!1);var i,n=(null===(i=this.axis)||void 0===i?void 0:i.getId(t))==="y2",a=e?n?"subY2":"subY":n?"y2":"y";return this.scale[a]},getCustomizedXScale:function(t,e){var i=this,n=e||function(){return i.axis.x.tickOffset()},a=i.config.axis_x_inverted,r=function(e){return t(e)+n()};for(var o in t)r[o]=t[o];return r.orgDomain=function(){return t.domain()},r.orgScale=function(){return t},i.axis.isCategorized()&&(r.domain=function(e){var i=e;return arguments.length?(t.domain(i),r):(i=this.orgDomain(),a?[i[0]+1,i[1]]:[i[0],i[1]+1])}),r},updateScales:function(t,e){void 0===e&&(e=!0);var i,n,a=this.axis,r=this.config,o=this.format,s=this.org,c=this.scale,l=this.state,u=l.current,d=l.width,h=l.height,g=l.width2,f=l.height2,p=l.hasAxis,v=l.hasTreemap;if(p){var m=r.axis_rotated,_=this.getResettedPadding(1),y={x:m?_:0,y:m?0:h,subY:m?0:f},T={x:m?h:d,y:m?d:_,subY:m?g:1},b=e&&(null===(i=c.x)||void 0===i?void 0:i.orgDomain()),w=e&&s.xDomain;c.x=this.getXScale(y.x,T.x,b,function(){return a.x.tickOffset()}),c.subX=this.getXScale(y.x,T.x,w,function(t){var e;return t%1?0:(null!==(e=a.subX)&&void 0!==e?e:a.x).tickOffset()}),o.xAxisTick=a.getXAxisTickFormat(),o.subXAxisTick=a.getXAxisTickFormat(!0),a.setAxis("x",c.x,r.axis_x_tick_outer,t),r.subchart_show&&a.setAxis("subX",c.subX,r.axis_x_tick_outer,t),c.y=this.getYScale("y",y.y,T.y,c.y?c.y.domain():r.axis_y_default),c.subY=this.getYScale("y",y.subY,T.subY,c.subY?c.subY.domain():r.axis_y_default),a.setAxis("y",c.y,r.axis_y_tick_outer,t),r.axis_y2_show&&(c.y2=this.getYScale("y2",y.y,T.y,c.y2?c.y2.domain():r.axis_y2_default),c.subY2=this.getYScale("y2",y.subY,T.subY,c.subY2?c.subY2.domain():r.axis_y2_default),a.setAxis("y2",c.y2,r.axis_y2_tick_outer,t))}else if(v){var A=this.getCurrentPadding();c.x=(0,x.A)().rangeRound([A.left,u.width-A.right]),c.y=(0,x.A)().rangeRound([A.top,u.height-A.bottom])}else null===(n=this.updateArc)||void 0===n||n.call(this)},xx:function(t){var e=this.config,i=this.scale,n=i.x,a=i.zoom,r=e.zoom_enabled&&a?a:n;return t?r(tS(t.x)?t.x:t):null},xv:function(t){var e=this.axis,i=this.config,n=this.scale,a=n.x,r=n.zoom,o=i.zoom_enabled&&r?r:a,s=this.getBaseValue(t);return e.isTimeSeries()?s=t9.call(this,s):e.isCategorized()&&tC(s)&&(s=i.axis_x_categories.indexOf(s)),o(s)},yv:function(t){var e=this.scale,i=e.y,n=e.y2;return(t.axis&&"y2"===t.axis?n:i)(this.getBaseValue(t))},subxx:function(t){return t?this.scale.subX(t.x):null}},{getDrawShape:function(){var t=this,e=t.config.axis_rotated,i=t.state,n=i.hasRadar,a=i.hasTreemap,r={type:{},indices:{},pos:{}};if(a||["bar","candlestick","line","area"].forEach(function(e){var i=tK(/^(bubble|scatter)$/.test(e)?"line":e);if(t.hasType(e)||t.hasTypeOf(i)||"line"===e&&(t.hasType("bubble")||t.hasType("scatter"))){var n=t.getShapeIndices(t["is".concat(i,"Type")]),a=t["generateDraw".concat(i)];r.indices[e]=n,r.type[e]=a?a.bind(t)(n,!1):void 0}}),!t.hasArcType()||n||a){var o=void 0,s=void 0;a||(o=n?t.radarCircleX:e?t.circleY:t.circleX,s=n?t.radarCircleY:e?t.circleX:t.circleY),r.pos={xForText:t.generateXYForText(r.indices,!0),yForText:t.generateXYForText(r.indices,!1),cx:(o||function(){}).bind(t),cy:(s||function(){}).bind(t)}}return r},getShapeIndices:function(t){var e=this.config,i=e.data_xs,n=tF(i),a={},r=n?{}:0;return n&&t2(Object.keys(i).map(function(t){return i[t]})).forEach(function(t){r[t]=0,a[t]={}}),this.filterTargetsToShow(this.data.targets.filter(t,this)).forEach(function(t){for(var n,o=(t.id in i)?i[t.id]:"",s=o?a[o]:a,c=0,l=void 0;l=e.data_groups[c];c++)if(!(0>l.indexOf(t.id)))for(var u=0,d=void 0;d=l[u];u++){if(d in s){s[t.id]=s[d];break}t.id!==d&&o&&(s[d]=null!==(n=s[t.id])&&void 0!==n?n:r[o])}tL(s[t.id])&&(s[t.id]=o?r[o]++:r++,s.__max__=(o?r[o]:r)-1)}),a},getIndices:function(t,e,i){var n=this.config,a=n.data_xs,r=n.bar_indices_removeNull,o=e.id,s=e.index;if(this.isBarType(o)&&r){var c={};return this.getAllValuesOnIndex(s,!0).forEach(function(t,e){c[t.id]=e,c.__max__=e}),c}return tF(a)?t[a[o]]:t},getIndicesMax:function(t){return tF(this.config.data_xs)?Object.keys(t).map(function(e){return t[e].__max__||0}).reduce(function(t,e){return t+e}):t.__max__},getShapeX:function(t,e,i){var n=this,a=n.config,r=n.scale,o=i?r.subX:r.zoom||r.x,s=a.bar_overlap,c=a.bar_padding,l=function(t,e){return t+e},u=tP(t)&&(t._$total.length?t._$total.reduce(l)/2:0);return function(i){var a=n.getIndices(e,i,"getShapeX"),r=i.id in a?a[i.id]:0,d=(a.__max__||0)+1,h=0;if(tF(i.x)){var g=o(i.x,!0);if(u){var f=t[i.id]||t._$width;h=s?g-f/2:g-f+t._$total.slice(0,r+1).reduce(l)-u}else h=g-(tR(t)?t:t._$width)*(d/2-(s?1:r))}return t&&h&&d>1&&c&&(r&&(h+=c*r),d>2?h-=(d-1)*c/2:2===d&&(h-=c/2)),h}},getShapeY:function(t){var e=this,i=e.isStackNormalized();return function(n){var a=n.value;return tR(n)?a=n:e.isAreaRangeType(n)?a=e.getBaseValue(n,"mid"):i?a=e.getRatio("index",n,!0):e.isBubbleZType(n)?a=e.getBubbleZData(n.value,"y"):e.isBarRangeType(n)&&(a=a[1]),e.getYScaleById(n.id,t)(a)}},getShapeYMin:function(t){var e=this.axis.getId(t),i=this.scale[e].domain()[0],n=this.config["axis_".concat(e,"_inverted")];return this.isGrouped(t)||n||!(i>0)?0:i},getShapeOffsetData:function(t){var e=this,i=e.orderTargets(e.filterTargetsToShow(e.data.targets.filter(t,e))),n=e.isStackNormalized(),a=i.map(function(t){var i=t.values,a={};e.isStepType(t)&&(i=e.convertValuesToStep(i));var r=i.reduce(function(t,i){var r=Number(i.x);return t[r]=i,a[r]=n?e.getRatio("index",i,!0):i.value,t},{});return{id:t.id,rowValues:i,rowValueMapByXValue:r,values:a}});return{indexMapByTargetId:i.reduce(function(t,e,i){return t[e.id]=i,t},{}),shapeOffsetTargets:a}},getShapeOffset:function(t,e,i){var n=this,a=n.getShapeOffsetData(t),r=a.shapeOffsetTargets,o=a.indexMapByTargetId,s=n.config.data_groupsZeroAs;return function(t,a){var c=t.id,l=t.value,u=t.x,d=n.getIndices(e,t),h=n.getYScaleById(c,i);if(n.isBarRangeType(t))return h(l[0]);var g=Number(u),f=h("zero"===s?0:n.getShapeYMin(c)),p=f;return r.filter(function(t){return t.id!==c&&d[t.id]===d[c]}).forEach(function(t){var e=t.id,i=t.rowValueMapByXValue,n=t.rowValues,r=t.values;if(o[e]<o[c]){var u=r[g],d=n[a];d&&Number(d.x)===g||(d=i[g]),(null==d?void 0:d.value)*l>=0&&tR(u)&&(0!==l||"positive"===s&&u>0||"negative"===s&&u<0)&&(p+=h(u)-f)}}),p}},circleY:function(t,e){var i,n=t.id;return this.isGrouped(n)&&(i=eO.bind(this)(t)),i?i(t,e)[0][1]:this.getYScaleById(n)(this.getBaseValue(t))},getBarW:function(t,e,i){var n,a,r,o,s,c=this,l=c.config,u=c.org,d=c.scale,h=c.state,g=c.getMaxDataCount(),f="bar"===t&&(null===(n=l.data_groups)||void 0===n?void 0:n.length),p="".concat(t,"_width"),v=(null!==(r=null===(a=c.getZoomTransform)||void 0===a?void 0:a.call(c))&&void 0!==r?r:{k:1}).k,x=[null!==(o=l.axis_x_min)&&void 0!==o?o:u.xDomain[0],null!==(s=l.axis_x_max)&&void 0!==s?s:u.xDomain[1]].map(c.axis.isTimeSeries()?t9.bind(c):Number),m=e.tickInterval(g);if(d.zoom&&!c.axis.isCategorized()&&v>1){var _=x.every(function(t,e){return t===u.xDomain[e]});m=u.xDomain.map(function(t,e){var i=_?t:t-Math.abs(x[e]);return d.zoom(i)}).reduce(function(t,e){return Math.abs(t)+e})/g}var y=function(t){var e=t?l[p][t]:l[p],n=t?e.ratio:l["".concat(p,"_ratio")],a=t?e.max:l["".concat(p,"_max")],r=tR(e)?e:tE(e)?e.call(c,h.width,i,g):i?m*n/i:0;return a&&r>a?a:r},T=y();return!f&&tP(l[p])&&(T={_$width:T,_$total:[]},c.filterTargetsToShow(c.data.targets).forEach(function(t){l[p][t.id]&&(T[t.id]=y(t.id),T._$total.push(T[t.id]||T._$width))})),T},getShapeByIndex:function(t,e,i){var n=this.$el,a=tS(e)?"-".concat(e):"",r=n[t];return r&&!r.empty()?r.filter(function(t){return!i||t.id===i}).filter(function(t){return!tS(e)||t.index===e}):(i?n.main.selectAll(".".concat(th["".concat(t,"s")]).concat(this.getTargetSelectorSuffix(i))):n.main).selectAll(".".concat(th[t]).concat(a))},isWithinShape:function(t,e){var i,n,a=(0,c.A)(t);return this.isTargetToShow(e.id)?(null===(i=this.hasValidPointType)||void 0===i?void 0:i.call(this,t.nodeName))?n=this.isStepType(e)?this.isWithinStep(t,this.getYScaleById(e.id)(this.getBaseValue(e))):this.isWithinCircle(t,this.isBubbleType(e)?1.5*this.pointSelectR(e):0):"path"===t.nodeName&&(n=!a.classed(th.bar)||this.isWithinBar(t)):n=!1,n},getInterpolate:function(t){var e=this.getInterpolateType(t);return({basis:w.Ay,"basis-closed":A.A,"basis-open":k.A,bundle:S.A,cardinal:E.Ay,"cardinal-closed":C.A,"cardinal-open":R.A,"catmull-rom":L.A,"catmull-rom-closed":I.A,"catmull-rom-open":O.A,"monotone-x":D.G,"monotone-y":D.N,natural:z.A,"linear-closed":P.A,linear:X.A,step:F.Ay,"step-after":F.Ps,"step-before":F.Ko})[e]},getInterpolateType:function(t){var e=this.config,i=e.spline_interpolation_type,n=this.isInterpolationType(i)?i:"cardinal";return this.isSplineType(t)?n:this.isStepType(t)?e.line_step_type:"linear"},isWithinBar:function(t){var e=tH(this.state.event,t),i=tj(t),n=i[0],a=i[1],r=Math.min(n.x,a.x),o=Math.min(n.y,a.y),s=this.config.bar_sensitivity,c=t.getBBox(),l=c.width,u=c.height;return r-s<e[0]&&e[0]<r+l+s&&o-s<e[1]&&e[1]<o+u+s}},{setContainerSize:function(){var t=this.state;t.current.width=this.getCurrentWidth(),t.current.height=this.getCurrentHeight()},getCurrentWidth:function(){return this.config.size_width||this.getParentWidth()},getCurrentHeight:function(){var t=this.config,e=t.size_height||this.getParentHeight();return e>0?e:320/(this.hasType("gauge")&&!t.gauge_fullCircle?2:1)},getParentRectValue:function(t){for(var e="offset".concat(tK(t)),i=this.$el.chart.node(),n=0;n<30&&i&&"BODY"!==i.tagName;){try{n=i.getBoundingClientRect()[t]}catch{e in i&&(n=i[e])}i=i.parentNode}var a=tb.body[e];return n>a&&(n=a),n},getParentWidth:function(){return this.getParentRectValue("width")},getParentHeight:function(){var t=this.$el.chart.style("height"),e=0;return t&&(e=/px$/.test(t)?parseInt(t,10):this.getParentRectValue("height")),e},getSvgLeft:function(t){var e=this.config,i=this.state.hasAxis,n=this.$el,a=e.axis_rotated,r=a||!a&&!e.axis_y_inner,o=a?U.axisX:U.axisY,s=n.main.select(".".concat(o)).node(),c=i&&e["axis_".concat(a?"x":"y","_label")],l=0;if(i&&(tC(c)||tC(c.text)||/^inner-/.test(null==c?void 0:c.position))){var u=n.main.select(".".concat(o,"-label"));u.empty()||(l=u.node().getBoundingClientRect().left)}var d=s&&r?s.getBoundingClientRect():{right:0},h=n.chart.node().getBoundingClientRect().left+l,g=this.hasArcType(),f=d.right-h-(g?0:this.getCurrentPaddingByDirection("left",t));return f>0?f:0},updateDimension:function(t){var e,i=this.config,n=this.state.hasAxis,a=this.$el;n&&!t&&this.axis.x&&i.axis_rotated&&(null===(e=this.axis.subX)||void 0===e||e.create(a.axis.subX)),this.updateScales(t),this.updateSvgSize(),this.transformAll(!1)},updateSvgSize:function(){var t=this.config,e=this.state,i=e.clip,n=e.current,a=e.hasAxis,r=e.width,o=e.height,s=this.$el.svg;if("viewBox"===t.resize_auto?s.attr("viewBox","0 0 ".concat(n.width," ").concat(n.height)):s.attr("width",n.width).attr("height",n.height),a){var c=s.select(".".concat(tc.brush," .overlay")),l={width:0,height:0};c.size()&&(l.width=+c.attr("width"),l.height=+c.attr("height")),s.selectAll(["#".concat(i.id),"#".concat(i.idGrid)]).select("rect").attr("width",r).attr("height",o),s.select("#".concat(i.idXAxis)).select("rect").call(this.setXAxisClipPath.bind(this)),s.select("#".concat(i.idYAxis)).select("rect").call(this.setYAxisClipPath.bind(this)),i.idSubchart&&s.select("#".concat(i.idSubchart)).select("rect").attr("width",r).attr("height",l.height)}},getCurrentPaddingByDirection:function(t,e,i){void 0===e&&(e=!1),void 0===i&&(i=!1);var n,a=this.config,r=this.$el,o=this.state.hasAxis,s=a.axis_rotated,c=(null===(n=a.padding)||void 0===n?void 0:n.mode)==="fit",l=tR(a["padding_".concat(t)])?a["padding_".concat(t)]:void 0,u=o?({top:s?"y2":null,bottom:s?"y":"x",left:s?"x":"y",right:s?null:"y2"})[t]:null,d=/^(left|right)$/.test(t),h=u&&a["axis_".concat(u,"_inner")],g=u&&a["axis_".concat(u,"_show")],f=u?a["axis_".concat(u,"_axes")].length:0,p=u?d?this.getAxisWidthByAxisId(u,e):this.getHorizontalAxisHeight(u):0,v=0;!c&&d&&(p=10*Math.ceil(p/10));var x=o&&d&&(h||tL(l)&&!g)?0:c?(g?p:0)+(null!=l?l:0):tL(l)?p:l;return d&&o?(u&&(c||h)&&a["axis_".concat(u,"_label")].text&&(x+=20*!!this.axis.getAxisLabelPosition(u).isOuter),"right"===t?(x+=s?!c&&tL(l)?10:2:!g||h?c?2:1:0,x+=i?this.axis.getXAxisTickTextY2Overflow(20):0):"left"===t&&s&&tL(l)&&(x=a.axis_x_show?c?p:Math.max(p,40):1)):"top"===t?(r.title&&r.title.node()&&(x+=this.getTitlePadding()),v=s&&!h?f:0):"bottom"===t&&o&&s&&!g&&(x+=1),x+p*f-v},getCurrentPadding:function(t){void 0===t&&(t=!1);var e=this,i=["top","bottom","left","right"].map(function(i){return e.getCurrentPaddingByDirection(i,null,t)});return{top:i[0],bottom:i[1],left:i[2],right:i[3]}},getResettedPadding:function(t){var e=this.config,i=tR(t),n=i?0:{};return!1===e.padding?i||Object.keys(t).forEach(function(i){n[i]=tX(e.data_labels)||!1===e.data_labels||"top"!==i?0:t[i]}):n=t,n},updateSizes:function(t){var e,i,n,a,r,o=this.config,s=this.state,c=this.$el.legend,l=o.axis_rotated,u=this.hasArcType()||s.hasFunnel||s.hasTreemap,d=(null===(e=o.padding)||void 0===e?void 0:e.mode)==="fit";t||this.setContainerSize();var h={width:c?this.getLegendWidth():0,height:c?this.getLegendHeight():0};!u&&o.axis_x_show&&o.axis_x_tick_autorotate&&this.updateXAxisTickClip();var g={right:o.legend_show&&s.isLegendRight?this.getLegendWidth()+20*!d:0,bottom:!o.legend_show||s.isLegendRight||s.isLegendInset?0:h.height},f=l||u?0:this.getHorizontalAxisHeight("x"),p=o.subchart_axis_x_show&&o.subchart_axis_x_tick_text_show?f:30,v=o.subchart_show&&!u?o.subchart_size_height+p:0,x=this.hasType("gauge")&&o.arc_needle_show&&!o.gauge_fullCircle&&!o.gauge_label_show?10:0,m=this.getCurrentPadding(!0);if(s.margin=!u&&l?{top:m.top,right:u?0:m.right+g.right,bottom:g.bottom+m.bottom,left:v+(u?0:m.left)}:{top:4*!d+m.top,right:u?0:m.right+g.right,bottom:x+v+g.bottom+m.bottom,left:u?0:m.left},s.margin=this.getResettedPadding(s.margin),s.margin2=l?{top:s.margin.top,right:NaN,bottom:20+g.bottom,left:this.state.rotatedPadding.left}:{top:s.current.height-v-g.bottom,right:NaN,bottom:p+g.bottom,left:s.margin.left},s.margin3={top:0,right:NaN,bottom:0,left:0},null===(i=this.updateSizeForLegend)||void 0===i||i.call(this,h),s.width=s.current.width-s.margin.left-s.margin.right,s.height=s.current.height-s.margin.top-s.margin.bottom,s.width<0&&(s.width=0),s.height<0&&(s.height=0),s.width2=l?s.margin.left-s.rotatedPadding.left-s.rotatedPadding.right:s.width,s.height2=l?s.height:s.current.height-s.margin2.top-s.margin2.bottom,s.width2<0&&(s.width2=0),s.height2<0&&(s.height2=0),this.hasArcType()){var _=this.hasType("gauge"),y=o.legend_show&&s.isLegendRight,T=null!==(n=s.hasRadar&&this.cache.get(er.radarTextWidth))&&void 0!==n?n:0;s.arcWidth=s.width-(y?h.width+10:0)-T,s.arcHeight=s.height-(y&&!_?0:10),(null===(a=o.arc_rangeText_values)||void 0===a?void 0:a.length)&&(_?(s.arcWidth-=25,s.arcHeight-=10,s.margin.left+=10):(s.arcHeight-=20,s.margin.top+=10)),_&&!o.gauge_fullCircle&&(s.arcHeight+=s.height-this.getPaddingBottomForGauge()),null===(r=this.updateRadius)||void 0===r||r.call(this)}s.isLegendRight&&u&&(s.margin3.left=s.arcWidth/2+1.1*s.radiusExpanded)}},{setCssRule:function(t,e,i,n){var a=this,r=a.config,o=a.state,s=o.cssRule,c=o.style;return r.boost_useCssRule?function(r){r.each(function(r){var o,l,u,d,h,g,f=n&&(null==n?void 0:n.call(a,r)),p="".concat(t?".".concat(ts.shapes+a.getTargetSelectorSuffix(r.id)):"").concat(e);e in s&&c.sheet.deleteRule(s[p]),a.state.cssRule[p]=(o=c,l=p,u=i.filter(Boolean).map(function(t){return tC(f)&&-1===t.indexOf(":")?"".concat(t,": ").concat(f):t||""}),d=o.rootSelector,h=o.sheet,g="".concat(void 0===d?"":d," ").concat(l.replace(/\s?(bb-)/g,".$1").replace(/\.+/g,".")," {").concat(u.join(";"),"}"),h[h.insertRule?"insertRule":"addRule"](g,h.cssRules.length))})}:function(){}},getStylePropValue:function(t){return this.config.boost_useCssRule?null:tE(t)?t.bind(this):t}},{opacityForText:function(t){return this.isBarType(t)&&!this.meetsLabelThreshold(Math.abs(this.getRatio("bar",t)),"bar")?"0":this.hasDataLabel?null:"0"},initText:function(){var t=this.$el;t.main.select(".".concat(Y.chart)).append("g").attr("class",tl.chartTexts).style("pointer-events",t.funnel||t.treemap?"none":null)},updateTargetsForText:function(t){var e=this.getChartClass("Text"),i=this.getClass("texts","id"),n=this.classFocus.bind(this);this.$el.main.select(".".concat(tl.chartTexts)).selectAll(".".concat(tl.chartText)).data(t).attr("class",function(t){return"".concat(e(t)).concat(n(t)).trim()}).enter().append("g").style("opacity","0").attr("class",e).call(this.setCssRule(!0," .".concat(tl.text),["fill","pointer-events:none"],this.updateTextColor)).append("g").attr("class",i)},updateText:function(){var t=this,e=t.$el,i=t.$T,n=t.config,a=t.axis,r=t.getClass("text","index"),o=n.data_labels.centered,s=e.main.selectAll(".".concat(tl.texts)).selectAll(".".concat(tl.text)).data(t.labelishData.bind(t));i(s.exit()).style("fill-opacity","0").remove(),e.text=s.enter().append("text").merge(s).attr("class",r).attr("text-anchor",function(e){var i=n["axis_".concat(null==a?void 0:a.getId(e.id),"_inverted")]?e.value>0:e.value<0;if(t.isCandlestickType(e)){var r=t.getCandlestickData(e);i=!(null==r?void 0:r._isUp)}else if(t.isTreemapType(e))return o?"middle":"start";return n.axis_rotated?i?"end":"start":"middle"}).style("fill",t.getStylePropValue(t.updateTextColor)).style("fill-opacity","0").each(function(e,i,n){var a=(0,c.A)(this),r=e.value;if(t.isBubbleZType(e))r=t.getBubbleZData(r,"z");else if(t.isCandlestickType(e)){var o=t.getCandlestickData(e);o&&(r=o.close)}tR(r=t.isTreemapType(e)?t.treemapDataLabelFormat(e)(a):t.dataLabelFormat(e.id)(r,e.id,e.index,n))?this.textContent=r:tY(a,r)})},updateTextColor:function(t){var e,i=this.config,n=i.data_labels_colors,a=this.isArcType(t)&&!this.isRadarType(t)||this.isFunnelType(t)||this.isTreemapType(t)?null:this.color(t);if(tC(n)?e=n:tB(n)?e=n[(t.data||t).id]:tE(n)&&(e=n.bind(this.api)(a,t)),this.isCandlestickType(t)&&!tE(n)){var r=this.getCandlestickData(t);if(!(null==r?void 0:r._isUp)){var o=i.candlestick_color_down;e=tB(o)?o[t.id]:o}}return e||a},updateTextBGColor:function(t,e){var i=this.$el,n="";if(tC(e)||tB(e)){var a=tC(e)?"":this.getTargetSelectorSuffix("id"in t?t.id:t.data.id),r=i.defs.select(["filter[id*='labels-bg","']"].join(a));r.size()&&(n="url(#".concat(r.attr("id"),")"))}return n||null},redrawText:function(t,e,i,n){var a,r=this,o=r.$T,s=r.axis,c=r.config,l=r.state.hasTreemap,u=tZ(!0),d=c.axis_rotated,h=c.data_labels.rotate,g=(a="middle",h>0&&h<=170?a="end":h>190&&h<=360&&(a="start"),a),f=h?"rotate(".concat(h,")"):"";return r.$el.text.style("fill",r.getStylePropValue(r.updateTextColor)).attr("filter",function(t){return r.updateTextBGColor.bind(r)(t,c.data_labels_backgroundColors)}).style("fill-opacity",i?0:r.opacityForText.bind(r)).each(function(i,a){var p=o(l&&this.childElementCount?this.parentNode:this,!!(n&&this.getAttribute("x")),u),v=c["axis_".concat(null==s?void 0:s.getId(i.id),"_inverted")],x={x:t.bind(this)(i,a),y:e.bind(this)(i,a)};h&&(x=eR.bind(r)(i,x,g,d,v),p.attr("text-anchor",g)),this.childElementCount||h?p.attr("transform","translate(".concat(x.x," ").concat(x.y,") ").concat(f)):p.attr("x",x.x).attr("y",x.y)}),!0},getTextRect:function(t,e){var i=t.node?t.node():t;/text/i.test(i.tagName)||(i=i.querySelector("text"));var n=i.textContent,a="".concat(er.textRect,"-").concat(n.replace(/\W/g,"_")),r=this.cache.get(a);return r||(this.$el.svg.append("text").style("visibility","hidden").style("font",(0,c.A)(i).style("font")).classed(e,!0).text(n).call(function(t){r=tW(t.node())}).remove(),this.cache.add(a,r)),r},generateXYForText:function(t,e){var i=this,n=i.state,a=n.hasRadar,r=n.hasFunnel,o=n.hasTreemap,s=Object.keys(t),c={},l=e?i.getXForText:i.getYForText;return r&&s.push("funnel"),a&&s.push("radar"),o&&s.push("treemap"),s.forEach(function(e){c[e]=i["generateGet".concat(tK(e),"Points")](t[e],!1)}),function(t,e){var n=i.isAreaType(t)&&"area"||i.isBarType(t)&&"bar"||i.isCandlestickType(t)&&"candlestick"||i.isFunnelType(t)&&"funnel"||i.isRadarType(t)&&"radar"||i.isTreemapType(t)&&"treemap"||"line";return l.call(i,c[n](t,e),t,this)}},getCenteredTextPos:function(t,e,i,n){var a=this.config,r=a.axis_rotated,o=this.isBarType(t),s=this.isTreemapType(t);if(a.data_labels.centered&&(o||s)){var c=tW(i);if(o){var l=this.getRangedData(t,null,"bar")>=0;if(r){var u=(l?e[1][1]-e[0][1]:e[0][1]-e[1][1])/2+c.width/2;return l?-u-3:u+2}var d=(l?e[0][1]-e[1][1]:e[1][1]-e[0][1])/2+c.height/2;return l?d:-d-2}if(s)return"x"===n?(e[1][0]-e[0][0])/2:(e[1][1]-e[0][1])/2+c.height/2}return 0},getXForText:function(t,e,i){var n,a=this.config,r=a.axis_rotated,o=this.isFunnelType(e),s=this.isTreemapType(e),c=t?t[0][0]:0;if(this.isCandlestickType(e))r?c=(null===(n=this.getCandlestickData(e))||void 0===n?void 0:n._isUp)?t[2][2]+4:t[2][1]-4:c+=(t[1][0]-c)/2;else if(o)c+=this.state.current.width/2;else if(s)c+=5*!a.data_labels.centered;else if(r){var l=a["axis_".concat(this.axis.getId(e.id),"_inverted")],u=this.isBarType(e)?4:6,d=e.value;c=t[2][1],l?c-=u*(d>0?1:-1):c+=u*(d<0?-1:1)}else c=this.hasType("bar")?(t[2][0]+t[0][0])/2:c;return(r||s)&&(c+=this.getCenteredTextPos(e,t,i,"x")),c+eL.call(this,e,"x")},getYForText:function(t,e,i){var n,a=this.axis,r=this.config,o=this.state,s=r.axis_rotated,c=r["axis_".concat(null==a?void 0:a.getId(e.id),"_inverted")],l=this.isBarType(e),u=this.isFunnelType(e),d=this.isTreemapType(e),h=r.point_r,g=tW(i),f=e.value,p=3;if(this.isCandlestickType(e))f=this.getCandlestickData(e),s?(n=t[0][0],n+=(t[1][0]-n)/2+p):(n=f&&f._isUp?t[2][2]-p:t[2][1]+4*p,c&&(n+=15*(f._isUp?1:-1)));else if(u)n=t?t[0][1]+(t[1][1]-t[0][1])/2+g.height/2-3:0;else if(d)n=t[0][1]+(r.data_labels.centered?0:g.height+5);else if(s)n=(t[0][0]+t[2][0]+.6*g.height)/2;else if(n=t[2][1],tR(h)&&h>5&&(this.isLineType(e)||this.isScatterType(e))&&(p+=r.point_r/2.3),f<0||0===f&&!o.hasPositiveValue&&o.hasNegativeValue)n+=c?l?-3:-5:g.height+(l?-p:p);else{var v=-(2*p);l?v=-p:this.isBubbleType(e)&&(v=p),c&&(v=l?10:15),n+=v}return(!s||d)&&(n+=this.getCenteredTextPos(e,t,i,"y")),n+eL.call(this,e,"y")},markOverlapped:function(t,e,i){var n=e.$el.arcs.selectAll(i),a=n.filter(function(e){return e.data.id!==t}),r=n.filter(function(e){return e.data.id===t}),o=t1(r.node()),s=function(t,e){return Math.sqrt(Math.pow(t,2)+Math.pow(e,2))};r.node()&&a.each(function(){var t=t1(this),e=(0,c.A)(this),i=s(o.e,o.f)>s(t.e,t.f)?r:e,n=Math.ceil(Math.abs(o.e-t.e))<Math.ceil(i.node().getComputedTextLength()),a=Math.ceil(Math.abs(o.f-t.f))<parseInt(r.style("font-size"),10);e.classed(tl.TextOverlapping,n&&a)})},undoMarkOverlapped:function(t,e){t.$el.arcs.selectAll(e).each(function(){(0,u.A)([this,this.previousSibling]).classed(tl.TextOverlapping,!1)})},meetsLabelThreshold:function(t,e){return void 0===t&&(t=0),t>=(this.config["".concat(e,"_label_threshold")]||0)}},{initTitle:function(){var t=this.config,e=this.$el;t.title_text&&(e.title=e.svg.append("g"),tY(e.title.append("text").style("text-anchor",eI(t.title_position)).attr("class",tl.title),t.title_text,[.3,1.5]))},redrawTitle:function(){var t=this.config,e=this.state.current,i=this.$el.title;if(i){var n=eI(t.title_position,e.width),a=(t.title_padding.top||0)+this.getTextRect(this.$el.title,tl.title).height;i.attr("transform","translate(".concat(n,", ").concat(a,")"))}},getTitlePadding:function(){var t=this.$el.title,e=this.config;return(e.title_padding.top||0)+(t?this.getTextRect(t,tl.title).height:0)+(e.title_padding.bottom||0)}},{initTooltip:function(){var t=this.config,e=this.$el;e.tooltip=(0,c.A)(t.tooltip_contents.bindto),e.tooltip.empty()&&(e.tooltip=e.chart.append("div").attr("class",tu.tooltipContainer).style("position","absolute").style("pointer-events","none").style("display","none")),this.bindTooltipResizePos()},initShowTooltip:function(){var t,e,i=this.config,n=this.$el,a=this.state,r=a.hasAxis,o=a.hasRadar;if(i.tooltip_init_show){(null===(e=this.axis)||void 0===e?void 0:e.isTimeSeries())&&tC(i.tooltip_init_x)&&(i.tooltip_init_x=t9.call(this,i.tooltip_init_x)),this.api.tooltip.show({data:((t={})[!(r||o)?"index":"x"]=i.tooltip_init_x,t)});var s=i.tooltip_init_position;if(!i.tooltip_contents.bindto&&!tX(s)){var c=s.top,l=void 0===c?0:c,u=s.left,d=void 0===u?50:u;n.tooltip.style("top",tC(l)?l:"".concat(l,"px")).style("left",tC(d)?d:"".concat(d,"px")).style("display",null)}}},getTooltipHTML:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=this.api,n=this.config;return tE(n.tooltip_contents)?n.tooltip_contents.bind(i).apply(void 0,t):this.getTooltipContent.apply(this,t)},getTooltipContent:function(t,e,i,n){var a,r,o,s,c,l,u=this,d=u.api,h=u.config,g=u.state,f=u.$el,p=["title","name","value"].map(function(t){var e=h["tooltip_format_".concat(t)];return tE(e)?e.bind(d):e}),v=p[0],x=p[1],m=p[2],_=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];return tG((v||e).apply(void 0,t))},y=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return tG((x||function(t){return t}).apply(void 0,t))},T=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return tG((m||(g.hasTreemap||u.isStackNormalized()?function(t,e){return"".concat((100*e).toFixed(2),"%")}:i)).apply(void 0,t))},b=h.tooltip_order,w=function(t){return u.axis&&u.isBubbleZType(t)?u.getBubbleZData(t.value,"z"):u.getBaseValue(t)},A=u.levelColor?function(t){return u.levelColor(t.value)}:function(t){return n(t)},k=h.tooltip_contents,S=k.template,E=u.mapToTargetIds();if(null===b&&h.data_groups.length){var C=u.orderTargets(u.data.targets).map(function(t){return t.id}).reverse();t.sort(function(t,e){var i=t?t.value:null,n=e?e.value:null;return i>0&&n>0&&(i=t.id?C.indexOf(t.id):null,n=e.id?C.indexOf(e.id):null),i-n})}else if(/^(asc|desc)$/.test(b)){var R="asc"===b;t.sort(function(t,e){var i=t?w(t):null,n=e?w(e):null;return R?i-n:n-i})}else tE(b)&&t.sort(b.bind(d));var L=u.getTooltipContentTemplate(S),I=t.length;for(l=0;l<I;l++)!function(){if((o=t[l])&&(w(o)||0===w(o))){if(tL(r)){var e=(g.hasAxis||g.hasRadar)&&_(o.x);r=t7(L[0],{CLASS_TOOLTIP:tu.tooltip,TITLE:tS(e)?S?e:'<tr><th colspan="2">'.concat(e,"</th></tr>"):""})}if(!o.ratio&&f.arcs&&(s=["arc",u.$el.arcs.select("path.".concat(j.arc,"-").concat(o.id)).data()[0]],o.ratio=u.getRatio.apply(u,s)),s=[o.ratio,o.id,o.index],u.isAreaRangeType(o)){var i=["high","low"].map(function(t){return T.apply(void 0,G([u.getRangedData(o,t)],s,!1))}),n=i[0],d=i[1],h=T.apply(void 0,G([w(o)],s,!1));c="<b>Mid:</b> ".concat(h," <b>High:</b> ").concat(n," <b>Low:</b> ").concat(d)}else if(u.isCandlestickType(o)){var p=["open","high","low","close","volume"].map(function(t){return u.getRangedData(o,t,"candlestick")?T.apply(void 0,G([u.getRangedData(o,t,"candlestick")],s,!1)):void 0}),v=p[0],n=p[1],d=p[2],x=p[3],m=p[4];c="<b>Open:</b> ".concat(v," <b>High:</b> ").concat(n," <b>Low:</b> ").concat(d," <b>Close:</b> ").concat(x).concat(m?" <b>Volume:</b> ".concat(m):"")}else if(u.isBarRangeType(o)){var b=o.value,C=o.id,R=o.index;c="".concat(T(b,void 0,C,R))}else c=T.apply(void 0,G([w(o)],s,!1));if(void 0!==c){if(null===o.name)return;var I=y.apply(void 0,G([null!==(a=o.name)&&void 0!==a?a:o.id],s,!1)),O=A(o),D={CLASS_TOOLTIP_NAME:tu.tooltipName+u.getTargetSelectorSuffix(o.id),COLOR:S||!u.patterns?O:'<svg><rect style="fill:'.concat(O,'" width="10" height="10"></rect></svg>'),NAME:I,VALUE:c};if(S&&tB(k.text)){var z=E.indexOf(o.id);Object.keys(k.text).forEach(function(t){D[t]=k.text[t][z]})}r+=t7(L[1],D)}}}();return"".concat(r,"</table>")},getTooltipContentTemplate:function(t){return(t||'<table class="{=CLASS_TOOLTIP}"><tbody>\n				{=TITLE}\n				{{<tr class="{=CLASS_TOOLTIP_NAME}">\n					<td class="name">'.concat(this.patterns?"{=COLOR}":'<span style="background-color:{=COLOR}"></span>','{=NAME}</td>\n					<td class="value">{=VALUE}</td>\n				</tr>}}\n			</tbody></table>')).replace(/(\r?\n|\t)/g,"").split(/{{(.*)}}/)},setTooltipPosition:function(t,e){var i,n,a=this,r=a.config,o=a.scale,s=a.state,c=a.$el,l=c.eventRect,u=c.tooltip,d=c.svg,h=r.tooltip_contents.bindto,g=r.axis_rotated,f=null==u?void 0:u.datum();if(!h&&f){var p=null!=t?t:JSON.parse(f.current),v=tH(s.event,null!=e?e:null==l?void 0:l.node()),x={x:v[0],y:v[1]};if(s.hasAxis&&o.x&&f&&"x"in f){var m=function(t,e,i){void 0===t&&(t=0),void 0===i&&(i="y");var n,r=o[e?null===(n=a.axis)||void 0===n?void 0:n.getId(e):i];return r?r(t)+(g?s.margin.left:s.margin.top):0};x.xAxis=o.x(f.x)+(r.tooltip_position?g?s.margin.top:s.margin.left:0),1===p.length?x.yAxis=m(p[0].value,p[0].id):x.yAxis=m}var _=f.width,y=void 0===_?0:_,T=f.height,b=void 0===T?0:T,w=null!==(n=null===(i=r.tooltip_position)||void 0===i?void 0:i.bind(a.api)(p,y,b,null==l?void 0:l.node(),x))&&void 0!==n?n:et(d)?a.getTooltipPositionViewBox.bind(a)(y,b,x):a.getTooltipPosition.bind(a)(y,b,x);["top","left"].forEach(function(t){var e=w[t];u.style(t,"".concat(e,"px")),"left"!==t||f.xPosInPercent||(f.xPosInPercent=e/s.current.width*100)})}},getTooltipPositionViewBox:function(t,e,i){var n,a,r=this.$el,o=r.eventRect,s=r.svg,c=this.config,l=this.state,u=c.axis_rotated,d=this.hasArcType()||l.hasFunnel||l.hasTreemap,h=null!==(a=null===(n=d?s:o)||void 0===n?void 0:n.node())&&void 0!==a?a:l.event.target,g=i.x,f=i.y;l.hasAxis&&(g=u?g:i.xAxis,f=u?i.xAxis:f);var p=t0(h,g,f,!1),v=h.getBoundingClientRect(),x=t0(h,20,0,!1).x,m=p.y,_=p.x+t/2+x;return d&&(l.hasFunnel||l.hasTreemap||l.hasRadar?(_-=t/2+x,m+=e):(m+=v.height/2,_+=v.width/2-(t-x))),_+t>v.width&&(_=v.width-t-x),m+e>v.height&&(m-=2*e),{top:m,left:_}},getTooltipPosition:function(t,e,i){var n,a,r,o=this.config,s=this.scale,c=this.state,l=c.width,u=c.height,d=c.current,h=c.hasFunnel,g=c.hasRadar,f=c.hasTreemap,p=c.isLegendRight,v=c.inputType,x=this.hasType("gauge")&&!o.gauge_fullCircle,m=o.axis_rotated,_=this.hasArcType(),y=this.getSvgLeft(!0),T=y+d.width-this.getCurrentPaddingByDirection("right"),b=i.x,w=i.y;if(g)b+=b>=l/2?15:-(t+15),w+=15;else if(_){if("touch"!==v){var A=null!==(a=null===(n=this.getTitlePadding)||void 0===n?void 0:n.call(this))&&void 0!==a?a:0;A&&x&&(null===(r=o.arc_rangeText_values)||void 0===r?void 0:r.length)&&(A+=10),b+=(l-(p?this.getLegendWidth():0))/2,w+=(x?u:u/2+e)+A}}else if(h||f)w+=e;else{var k={top:this.getCurrentPaddingByDirection("top",!0),left:this.getCurrentPaddingByDirection("left",!0)};m?(b+=y+k.left+20,w=k.top+i.xAxis+20,T-=y):(b=y+k.left+20+(s.zoom?b:i.xAxis),w+=k.top-5)}b+t+15>T&&(b-=t+(h||f||_?0:m?40:38)),w+e>d.height&&(w-=x?1.5*e:e+(f?e+10:30));var S={top:w,left:b};return Object.keys(S).forEach(function(t){S[t]<0&&(S[t]=0)}),S},showTooltip:function(t,e){var i=this,n=i.config,a=i.$el.tooltip,r=t.filter(function(t){return t&&tS(i.getBaseValue(t))});if(a&&0!==r.length&&n.tooltip_show){var o=a.datum(),s=JSON.stringify(t);if(!o||o.current!==s){var c=t.concat().sort()[0],l=c.index,u=c.x;tN(n.tooltip_onshow,i.api,t),a.html(i.getTooltipHTML(t,i.axis?i.axis.getXAxisTickFormat():i.categoryName.bind(i),i.getDefaultValueFormat(),i.color)).style("display",null).style("visibility",null).datum(o={index:l,x:u,current:s,width:a.property("offsetWidth"),height:a.property("offsetHeight")}),tN(n.tooltip_onshown,i.api,t),i._handleLinkedCharts(!0,l)}i.setTooltipPosition(r,e)}},bindTooltipResizePos:function(){var t=this.resizeFunction,e=this.state,i=this.$el.tooltip;t.add(function(){if("block"===i.style("display")){var t=e.current,n=i.datum(),a=n.width,r=n.xPosInPercent,o=t.width/100*r,s=t.width-(o+a);s<0&&(o+=s),i.style("left","".concat(o,"px"))}})},hideTooltip:function(t){var e,i=this.api,n=this.config,a=this.$el.tooltip;if(a&&"none"!==a.style("display")&&(!n.tooltip_doNotHide||t)){var r=JSON.parse(null!==(e=a.datum().current)&&void 0!==e?e:{});tN(n.tooltip_onhide,i,r),a.style("display","none").style("visibility","hidden").datum(null),tN(n.tooltip_onhidden,i,r)}},_handleLinkedCharts:function(t,e){var i=this,n=i.charts,a=i.config,r=i.state.event;if((null==r?void 0:r.isTrusted)&&a.tooltip_linked&&n.length>1){var o=a.tooltip_linked_name;n.filter(function(t){return t!==i.api}).forEach(function(i){var n=i.internal,a=n.config,r=n.$el,s=a.tooltip_linked,c=a.tooltip_linked_name,l=tb.body.contains(r.chart.node());if(s&&o===c&&l){var u=r.tooltip.data()[0],d=e!==(null==u?void 0:u.index);try{i.tooltip[t&&d?"show":"hide"]({index:e})}catch{}}})}},updateTooltipOnRedraw:function(t,e){var i,n=this,a=n.config,r=n.$el,o=r.eventRect,s=r.svg,l=r.tooltip,u=n.state,d=u.event,h=u.hasAxis,g=u.hasRadar,f=u.hasTreemap;if((null==l?void 0:l.style("display"))==="block"&&d){var p=null!=t?t:null===(i=g?s:o)||void 0===i?void 0:i.node();if(h||g)if(n.isMultipleX())n.selectRectForMultipleXs(p,!1);else{var v=null!=e?e:n.getDataIndexFromEvent(d);-1===e?n.api.tooltip.hide():(n.selectRectForSingle(p,v),n.setExpand(v,null,!0))}else{var x=d.clientX,m=d.clientY;setTimeout(function(){var t=[x,m].every(Number.isFinite)&&tb.elementFromPoint(x,m),e=t&&(0,c.A)(t).datum();if(e){var i=n.hasArcType()?n.convertToArcData(n.updateAngle(e)):null==e?void 0:e.data;f&&(t=s.node()),i&&n.showTooltip([i],t)}else n.api.tooltip.hide()},a.transition_duration)}}}},{getTranslate:function(t,e){void 0===e&&(e=0);var i,n,a,r=this.config,o=this.state,s=r.axis_rotated,c=0;if(e&&/^(x|y2?)$/.test(t)&&(c=this.getAxisSize(t)*e),"main"===t)n=tD(o.margin.left),a=tD(o.margin.top);else if("context"===t)n=tD(o.margin2.left),a=tD(o.margin2.top);else if("legend"===t)n=o.margin3.left,a=o.margin3.top;else if("x"===t)n=s?-c:0,a=s?0:o.height+c;else if("y"===t)n=s?0:-c,a=s?o.height+c:0;else if("y2"===t)n=s?0:o.width+c,a=s?-c-1:0;else if("subX"===t)n=0,a=s?0:o.height2;else if("arc"===t)n=o.arcWidth/2,a=o.arcHeight/2,(null===(i=r.arc_rangeText_values)||void 0===i?void 0:i.length)&&(a+=5+(this.hasType("gauge")&&r.title_text?10:0));else if("polar"===t)n=o.arcWidth/2,a=o.arcHeight/2;else if("radar"===t){var l=this.getRadarSize(),u=l[0],d=l[1];n=o.width/2-u,a=o.height/2-d}return"translate(".concat(n,", ").concat(a,")")},transformMain:function(t,e){var i=this.$el.main,n=this.$T,a=(null==e?void 0:e.axisX)?e.axisX:n(i.select(".".concat(U.axisX)),t),r=(null==e?void 0:e.axisY)?e.axisY:n(i.select(".".concat(U.axisY)),t),o=(null==e?void 0:e.axisY2)?e.axisY2:n(i.select(".".concat(U.axisY2)),t);n(i,t).attr("transform",this.getTranslate("main")),a.attr("transform",this.getTranslate("x")),r.attr("transform",this.getTranslate("y")),o.attr("transform",this.getTranslate("y2")),i.select(".".concat(j.chartArcs)).attr("transform",this.getTranslate("arc"))},transformAll:function(t,e){var i=this.config,n=this.state,a=n.hasAxis,r=n.hasFunnel,o=n.hasTreemap,s=this.$el;r||o||this.transformMain(t,e),a&&i.subchart_show&&this.transformContext(t,e),s.legend&&this.transformLegend(t)}},{isValidChartType:function(t){return!!(t&&Object.values(es).indexOf(t)>-1)},setTargetType:function(t,e){var i=this.config,n=this.state.withoutFadeIn;this.mapToTargetIds(t).forEach(function(t){n[t]=e===i.data_types[t],i.data_types[t]=e}),t||(i.data_type=e)},updateTypesElements:function(){var t=this,e=t.state.current;Object.keys(es).forEach(function(i){var n=es[i],a=t.hasType(n,null,!0),r=e.types.indexOf(n);-1===r&&a?e.types.push(n):r>-1&&!a&&e.types.splice(r,1)}),t.setChartElements()},hasType:function(t,e,i){void 0===i&&(i=!1);var n,a=this.config,r=this.state.current,o=a.data_types,s=e||this.data.targets,c=!1;return!i&&(null===(n=r.types)||void 0===n?void 0:n.indexOf(t))>-1?c=!0:(null==s?void 0:s.length)?s.forEach(function(e){var i=o[e.id];i!==t&&(i||"line"!==t)||(c=!0)}):Object.keys(o).length?Object.keys(o).forEach(function(e){o[e]===t&&(c=!0)}):c=a.data_type===t,c},hasTypeOf:function(t,e,i){var n=this;return void 0===i&&(i=[]),t in el&&!el[t].filter(function(t){return -1===i.indexOf(t)}).every(function(t){return!n.hasType(t,e)})},isTypeOf:function(t,e){var i,n=tC(t)?t:t.id,a=this.config&&((null===(i=this.config.data_types)||void 0===i?void 0:i[n])||this.config.data_type);return t$(e)?e.indexOf(a)>=0:a===e},hasPointType:function(){return this.hasTypeOf("Line")||this.hasType("bubble")||this.hasType("scatter")},hasArcType:function(t,e){return this.hasTypeOf("Arc",t,e)},hasMultiArcGauge:function(){return this.hasType("gauge")&&"multi"===this.config.gauge_type},isLineType:function(t){var e=tC(t)?t:t.id;return!this.config.data_types[e]||this.isTypeOf(e,el.Line)},isStepType:function(t){return this.isTypeOf(t,el.Step)},isSplineType:function(t){return this.isTypeOf(t,el.Spline)},isAreaType:function(t){return this.isTypeOf(t,el.Area)},isAreaRangeType:function(t){return this.isTypeOf(t,el.AreaRange)},isBarType:function(t){return this.isTypeOf(t,"bar")},isBubbleType:function(t){return this.isTypeOf(t,"bubble")},isCandlestickType:function(t){return this.isTypeOf(t,"candlestick")},isScatterType:function(t){return this.isTypeOf(t,"scatter")},isTreemapType:function(t){return this.isTypeOf(t,"treemap")},isPieType:function(t){return this.isTypeOf(t,"pie")},isFunnelType:function(t){return this.isTypeOf(t,"funnel")},isGaugeType:function(t){return this.isTypeOf(t,"gauge")},isDonutType:function(t){return this.isTypeOf(t,"donut")},isPolarType:function(t){return this.isTypeOf(t,"polar")},isRadarType:function(t){return this.isTypeOf(t,"radar")},isArcType:function(t){return this.isPieType(t)||this.isDonutType(t)||this.isGaugeType(t)||this.isPolarType(t)||this.isRadarType(t)},isCirclePoint:function(t){var e=this.config,i=e.point_pattern,n=!1;return(null==t?void 0:t.tagName)==="circle"||"circle"===e.point_type&&(!i||t$(i)&&0===i.length)},lineData:function(t){return this.isLineType(t)?[t]:[]},arcData:function(t){return this.isArcType(t.data)?[t]:[]},labelishData:function(t){return this.isBarType(t)||this.isLineType(t)||this.isScatterType(t)||this.isBubbleType(t)||this.isCandlestickType(t)||this.isFunnelType(t)||this.isRadarType(t)||this.isTreemapType(t)?t.values.filter(function(t){return tR(t.value)||!!t.value}):[]},barLineBubbleData:function(t){return this.isBarType(t)||this.isLineType(t)||this.isBubbleType(t)?t.values:[]},isInterpolationType:function(t){return["basis","basis-closed","basis-open","bundle","cardinal","cardinal-closed","cardinal-open","catmull-rom","catmull-rom-closed","catmull-rom-open","linear","linear-closed","monotone-x","monotone-y","natural"].indexOf(t)>=0}}]);var eP=function(t){var e=this.internal.data.targets;if(!tL(t)){var i=t$(t)?t:[t];return e.filter(function(t){return i.some(function(e){return e===t.id})})}return e};tq(eP,{shown:function(t){return this.internal.filterTargetsToShow(this.data(t))},values:function(t,e){void 0===e&&(e=!0);var i=null;if(t){var n=this.data(t);t$(n)&&(i=[],n.forEach(function(t){var n=t.values.map(function(t){return t.value});e?i=i.concat(n):i.push(n)}))}return i},names:function(t){return this.internal.updateDataAttributes("names",t)},colors:function(t){return this.internal.updateDataAttributes("colors",t)},axes:function(t){return this.internal.updateDataAttributes("axes",t)},min:function(){return this.internal.getMinMaxData().min},max:function(){return this.internal.getMinMaxData().max}});var eX=function(t){var e;return null===(e=tT.btoa)||void 0===e?void 0:e.call(tT,encodeURIComponent(t).replace(/%([0-9A-F]{2})/g,function(t,e){return String.fromCharCode(Number("0x".concat(e)))}))};function eF(t,e,i){var n=this,a=this.internal,r=a.mapToTargetIds(e),o=a.state.hiddenTargetIds.map(function(t){return r.indexOf(t)>-1&&t}).filter(Boolean);a.state.toggling=!0,a["".concat(t?"remove":"add","HiddenTargetIds")](r);var s=a.$el.svg.selectAll(a.selectorTargets(r)),c=t?null:"0";t&&o.length&&(s.style("display",null),tN(a.config.data_onshown,this,o)),a.$T(s).style("opacity",c,"important").call(tV,function(){var e;t||0!==o.length||(s.style("display","none"),tN(null===(e=a.config)||void 0===e?void 0:e.data_onhidden,n,r)),s.style("opacity",c)}),i.withLegend&&a["".concat(t?"show":"hide","Legend")](r),a.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0}),a.state.toggling=!1}var e$=function t(e){this.plugins=[];var i=new eD(this);this.internal=i,function t(e,i,n){Object.keys(e).forEach(function(a){var r=tE(e[a]),o=i!==n,s=tF(e[a]),c=s&&Object.keys(e[a]).length>0;r&&(!o&&c||o)?i[a]=e[a].bind(n):s&&!r?i[a]={}:i[a]=e[a],c&&t(e[a],i[a],n)})}(t.prototype,this,this),ez.call(i,e),i.beforeInit(),i.init()};function eB(t,e,i){var n=t.config,a=function(t,i){var a=tR(i)?i:!1===i?void 0:null;null!==a&&(n["axis_".concat(t,"_").concat(e)]=a)};tI(i)&&(tP(i)?Object.keys(i).forEach(function(t){a(t,i[t])}):(tR(i)||!1===i)&&["y","y2"].forEach(function(t){a(t,i)}),t.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0}))}function eM(t,e){var i=t.config;return{x:i["axis_x_".concat(e)],y:i["axis_y_".concat(e)],y2:i["axis_y2_".concat(e)]}}function eN(t,e){var i=this.internal,n=i.config,a=n.transition_duration&&ee(),r="grid_".concat(e,"_lines");return t&&(n[r]=t,i.updateGrid(),i.redrawGrid(a)),n[r]}function eV(t,e){var i="grid_".concat(e,"_lines");return eN.bind(this)(this.internal.config[i].concat(t||[]),e)}function eG(t,e){this.internal.removeGridLines(t,e)}tq(e$.prototype,[{resize:function(t){var e=this.internal,i=e.config,n=e.state;n.rendered&&(i.size_width=t?t.width:null,i.size_height=t?t.height:null,n.resizing=!0,this.flush(!1),e.resizeFunction())},flush:function(t){var e,i,n=this.internal,a=n.state,r=n.$el.zoomResetBtn;a.rendered?(a.resizing?null===(e=n.brush)||void 0===e||e.updateResize():null===(i=n.axis)||void 0===i||i.setOrient(),null==r||r.style("display","none"),n.scale.zoom=null,t?n.redraw({withTransform:!0,withUpdateXDomain:!0,withUpdateOrgXDomain:!0,withLegend:!0}):n.updateAndRedraw({withLegend:!0,withTransition:!1,withTransitionForTransform:!1}),!a.resizing&&n.brush&&(n.brush.getSelection().call(n.brush.move),n.unselectRect())):n.initToRender(!0)},destroy:function(){var t,e=this,i=this.internal,n=i.$el,a=n.chart,r=n.style,o=n.svg;if(tF(i))for(var s in i.callPluginHook("$willDestroy"),i.charts.splice(i.charts.indexOf(this),1),i.unbindAllEvents(),o.select("*").interrupt(),i.resizeFunction.clear(),null===(t=i.resizeFunction.resizeObserver)||void 0===t||t.disconnect(),tT.removeEventListener("resize",i.resizeFunction),a.classed("bb",!1).style("position",null).selectChildren().remove(),r&&r.parentNode.removeChild(r),Object.keys(this).forEach(function(t){"internal"===t&&Object.keys(i).forEach(function(t){i[t]=null}),e[t]=null,delete e[t]}),this)this[s]=function(){};return null},config:function(t,e,i){var n,a=this.internal,r=a.config,o=a.state,s=null==t?void 0:t.replace(/\./g,"_");return t&&s in r?tI(e)?(r[s]=e,n=e,i&&this.flush()):n=r[s]:(0==arguments.length||tX(t))&&(n=o.orgConfig),n}},{color:function(t){return this.internal.color(t)}},{data:eP},{export:function(t,e){var i,n,a,r,o,s,c,u,d,h,g,f,p,v,x,m,_,y,T,b,w=this,A=this.internal,k=A.state,S=A.$el,E=S.chart,C=S.svg,R=k.current,L=R.width,I=R.height,O=t3({width:L,height:I,preserveAspectRatio:!0,preserveFontStyle:!1,mimeType:"image/png"},t),D=(i=E.node(),n={width:L,height:I},r=(a=O||n).width,o=a.height,s=new XMLSerializer,c=i.cloneNode(!0),h=(u=tJ(tb.styleSheets),d=[],u.forEach(function(t){var e;try{t.cssRules&&t.cssRules.length&&(d=d.concat(tJ(t.cssRules)))}catch(i){null===(e=tT.console)||void 0===e||e.warn("Error while reading rules from ".concat(t.href,": ").concat(i.toString()))}}),d).filter(function(t){return t.cssText}).map(function(t){return t.cssText}),c.setAttribute("xmlns",l.A.xhtml),c.style.margin="0",c.style.padding="0",O.preserveFontStyle&&c.querySelectorAll("text").forEach(function(t){t.innerHTML=""}),g=s.serializeToString(c),(f=tb.createElement("style")).appendChild(tb.createTextNode(h.join("\n"))),p=s.serializeToString(f),v='<svg xmlns="'.concat(l.A.svg,'" width="').concat(r,'" height="').concat(o,'" \n		viewBox="0 0 ').concat(n.width," ").concat(n.height,'" \n		preserveAspectRatio="').concat((null==O?void 0:O.preserveAspectRatio)===!1?"none":"xMinYMid meet",'">\n			<foreignObject width="100%" height="100%">\n				').concat(p,"\n				").concat(g.replace(/(url\()[^#]+/g,"$1"),"\n			</foreignObject></svg>"),"data:image/svg+xml;base64,".concat(eX(v))),z=O.preserveFontStyle?(_=(m=(x=C.node()).getBoundingClientRect()).left,y=m.top,T=function(t){return t.textContent||t.childElementCount},b=[],tJ(x.querySelectorAll("text")).filter(T).forEach(function(t){var e=function(t){var e,i,n,a,r,o,s,c,l,u,d,h,g,f,p,v,x,m=tT.getComputedStyle(t),T=m.fill,b=m.fontFamily,w=m.fontSize,A=m.textAnchor,k=m.transform,S=(i=(e={left:_,top:y}).top,n=e.left,r=(a=t.getBBox()).x,o=a.y,c=(s=t.getScreenCTM()).a,l=s.b,u=s.c,d=s.d,h=s.e,g=s.f,p=(f=t.getBoundingClientRect()).width,{x:c*r+u*o+h-n,y:l*r+d*o+g-i+((v=f.height)-Math.round(v/4)),width:p,height:v}),E=S.x,C=S.y,R=S.width,L=S.height;return(x={})[t.textContent]={x:E,y:C,width:R,height:L,fill:T,fontFamily:b,fontSize:w,textAnchor:A,transform:k},x};if(t.childElementCount>1)return tJ(t.querySelectorAll("tspan")).filter(T).forEach(function(t){b.push(e(t))}),[];b.push(e(t))}),b):[];if(e&&tE(e)){var P=new Image;P.crossOrigin="Anonymous",P.onload=function(){var t=tb.createElement("canvas"),i=t.getContext("2d");t.width=O.width||L,t.height=O.height||I,i.drawImage(P,0,0),z.length&&(!function(t,e){e.forEach(function(e){Object.keys(e).forEach(function(i){var n=e[i],a=n.x,r=n.y,o=n.width,s=n.height,c=n.fill,l=n.fontFamily,u=n.fontSize,d=n.transform;if(t.save(),t.font="".concat(u," ").concat(l),t.fillStyle=c,"none"===d)t.fillText(i,a,r);else{var h=d.replace(/(matrix|\(|\))/g,"").split(",");h.splice(4).every(function(t){return 0==+t})?(h.push(a+o-o/4),h.push(r-s+s/3)):(h.push(a),h.push(r)),t.transform.apply(t,h),t.fillText(i,0,0)}t.restore()})})}(i,z),z.length=0),e.bind(w)(t.toDataURL(O.mimeType))},P.src=D}return D}},{focus:function(t){var e=this.internal,i=e.state,n=e.mapToTargetIds(t),a=e.$el.svg.selectAll(e.selectorTargets(n.filter(e.isTargetToShow,e)));this.revert(),this.defocus(),a.classed(tn.focused,!0).classed(tn.defocused,!1),e.hasArcType()&&!i.hasRadar&&(e.expandArc(n),e.hasType("gauge")&&e.markOverlapped(t,e,".".concat(Q.gaugeValue))),e.toggleFocusLegend(n,!0),i.focusedTargetIds=n,i.defocusedTargetIds=i.defocusedTargetIds.filter(function(t){return 0>n.indexOf(t)})},defocus:function(t){var e=this.internal,i=e.state,n=e.mapToTargetIds(t);e.$el.svg.selectAll(e.selectorTargets(n.filter(e.isTargetToShow,e))).classed(tn.focused,!1).classed(tn.defocused,!0),e.hasArcType(null,["polar"])&&(e.unexpandArc(n),e.hasType("gauge")&&e.undoMarkOverlapped(e,".".concat(Q.gaugeValue))),e.toggleFocusLegend(n,!1),i.focusedTargetIds=i.focusedTargetIds.filter(function(t){return 0>n.indexOf(t)}),i.defocusedTargetIds=n},revert:function(t){var e=this.internal,i=e.config,n=e.state,a=e.$el,r=e.mapToTargetIds(t);a.svg.selectAll(e.selectorTargets(r)).classed(tn.focused,!1).classed(tn.defocused,!1),e.hasArcType(null,["polar"])&&e.unexpandArc(r),i.legend_show&&(e.showLegend(r.filter(e.isLegendToShow.bind(e))),a.legend.selectAll(e.selectorLegends(r)).filter(function(){return(0,c.A)(this).classed(tn.legendItemFocused)}).classed(tn.legendItemFocused,!1)),n.focusedTargetIds=[],n.defocusedTargetIds=[]}},{legend:{show:function(t){var e=this.internal;e.showLegend(e.mapToTargetIds(t)),e.updateAndRedraw({withLegend:!0})},hide:function(t){var e=this.internal;e.hideLegend(e.mapToTargetIds(t)),e.updateAndRedraw({withLegend:!0})}}},{load:function(t){var e=this.internal,i=e.config;t.xs&&e.addXs(t.xs),"names"in t&&this.data.names(t.names),"classes"in t&&Object.keys(t.classes).forEach(function(e){i.data_classes[e]=t.classes[e]}),"categories"in t&&e.axis.isCategorized()&&(i.axis_x_categories=t.categories),"axes"in t&&Object.keys(t.axes).forEach(function(e){i.data_axes[e]=t.axes[e]}),"colors"in t&&Object.keys(t.colors).forEach(function(e){i.data_colors[e]=t.colors[e]}),"unload"in t&&!1!==t.unload?e.unload(e.mapToTargetIds(!0===t.unload?null:t.unload),function(){tk(function(){return e.loadFromArgs(t)})}):e.loadFromArgs(t)},unload:function(t){var e=this.internal,i=t||{};tX(i)&&this.tooltip.hide(),t$(i)?i={ids:i}:tC(i)&&(i={ids:[i]});var n=e.mapToTargetIds(i.ids);e.unload(n,function(){e.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0}),e.cache.remove(n),eb.call(e,i.done,i.resizeAfter)})}},{show:function(t,e){void 0===e&&(e={}),eF.call(this,!0,t,e)},hide:function(t,e){void 0===e&&(e={}),eF.call(this,!1,t,e)},toggle:function(t,e){var i=this;void 0===e&&(e={});var n=this.internal,a={show:[],hide:[]};n.mapToTargetIds(t).forEach(function(t){return a[n.isTargetToShow(t)?"hide":"show"].push(t)}),a.show.length&&this.show(a.show,e),a.hide.length&&setTimeout(function(){return i.hide(a.hide,e)},0)}},{tooltip:{show:function(t){var e,i,n,a,r,o=this.internal,s=o.$el,c=o.config,l=o.state,u=l.eventReceiver,d=l.hasFunnel,h=l.hasTreemap,g=l.inputType;if(t.mouse&&(r=t.mouse),t.data){var f=t.data,p=null===(e=o.getYScaleById(f.id))||void 0===e?void 0:e(f.value);if((d||h)&&f.id){var v=o.selectorTarget(f.id,void 0,".".concat(ts.shape));u.rect=s.main.select(v)}else o.isMultipleX()?r=[o.xx(f),p]:(c.tooltip_grouped||(r=[0,p]),a=null!==(i=f.index)&&void 0!==i?i:o.hasArcType()&&f.id?null===(n=o.getArcElementByIdOrIndex(f.id))||void 0===n?void 0:n.datum().index:o.getIndexByX(f.x))}else tI(t.x)?a=o.getIndexByX(t.x):tI(t.index)&&(a=t.index);("mouse"===g?["mouseover","mousemove"]:["touchstart"]).forEach(function(t){o.dispatchEvent(t,a,r)})},hide:function(){var t,e,i,n=this.internal,a=n.state.inputType,r=n.$el.tooltip,o=null==r?void 0:r.datum();if(o){var s=JSON.parse(o.current)[0].index;("mouse"===a?["mouseout"]:["touchend"]).forEach(function(t){n.dispatchEvent(t,s)})}"touch"===a&&n.callOverOutForTouch(),n.hideTooltip(!0),null===(t=n.hideGridFocus)||void 0===t||t.call(n),null===(e=n.unexpandCircles)||void 0===e||e.call(n),null===(i=n.expandBarTypeShapes)||void 0===i||i.call(n,!1)}}}]);var eY=function(t){return eN.bind(this)(t,"x")};tq(eY,{add:function(t){return eV.bind(this)(t,"x")},remove:function(t){return eG.bind(this)(t,!0)}});var ej=function(t){return eN.bind(this)(t,"y")};function eH(t,e){void 0===e&&(e=!1);var i=this.internal,n=i.config,a=n.transition_duration&&ee();return t?(n.regions=e?n.regions.concat(t):t,i.updateRegion(),i.redrawRegion(a),e?n.regions:t):n.regions}tq(ej,{add:function(t){return eV.bind(this)(t,"y")},remove:function(t){return eG.bind(this)(t,!1)}});var eU=function(t){return eH.bind(this)(t)};tq(eU,{add:function(t){return eH.bind(this)(t,!0)},remove:function(t){var e=this.internal,i=e.config,n=e.$T,a=t||{},r=tM(a,"classes",[tr.region]),o=e.$el.main.select(".".concat(tr.regions)).selectAll(r.map(function(t){return".".concat(t)}));return n(o).style("opacity","0").remove(),o=i.regions,Object.keys(a).length?i.regions=o=o.filter(function(t){var e=!1;return!t.class||(t.class.split(" ").forEach(function(t){r.indexOf(t)>=0&&(e=!0)}),!e)}):i.regions=[],o}});var eW=function(){function t(t){var e=eC(),i=t.config,n=t.params;this.owner=t,this.config=i,this.scale=e,(i.noTransition||!n.config.transition_duration)&&(i.withoutTransition=!0),i.range=this.scaleExtent((n.orgXScale||e).range())}return t.getSizeFor1Char=function(t,e){void 0===e&&(e=!0);var i={w:5.5,h:11.5};return t.empty()||t.text("0").call(function(t){try{var e=t.node().getBBox(),n=e.width,a=e.height;n&&a&&(i.w=n,i.h=a)}finally{t.text("")}}),e&&(this.getSizeFor1Char=function(){return i}),i},t.prototype.getTickTransformSetter=function(t){var e=this.config,i="x"===t?function(t){return"translate(".concat(t+e.tickOffset,",0)")}:function(t){return"translate(0,".concat(t,")")};return function(t,e){t.attr("transform",function(t){var n=e(t);return tS(t)?i(n):null})}},t.prototype.scaleExtent=function(t){var e=t[0],i=t[t.length-1];return e<i?[e,i]:[i,e]},t.prototype.generateTicks=function(t,e){var i=this.owner.params.tickStepSize,n=t.domain(),a=n[0],r=n[1],o=[];if(e&&i)for(var s=Math.round(a);s<=r;)o.push(s),s+=i;else if(t.ticks){var c=this.config.tickArguments;if("log"!==t.type||c)o=t.ticks.apply(t,this.config.tickArguments||[]);else{var l=eC("_log").domain([a>0?a:1,r]).range(t.range());o=l.ticks();for(var u=r.toFixed().length;o.length>15;u--)o=l.ticks(u);o.splice(0,1,a),o.splice(o.length-1,1,r)}o=o.map(function(t){return tC(t)&&tR(t)&&!isNaN(t)&&Math.round(10*t)/10||t})}return o},t.prototype.copyScale=function(){var t=this.scale.copy();return t.domain().length||t.domain(this.scale.domain()),t.type=this.scale.type,t},t.prototype.textFormatted=function(t){var e=this.config.tickFormat,i=/\d+\.\d+0{5,}\d$/.test(t)?+String(t).replace(/0+\d$/,""):t,n=e?e(i):i;return tI(n)?n:""},t.prototype.transitionise=function(t){var e=this.config,i=t;if(e.withoutTransition)i=t.interrupt();else if(e.transition||!this.owner.params.noTransition)try{i=t.transition(e.transition)}catch{}return i},t}(),eZ=function(){function t(t){void 0===t&&(t={});var e={innerTickSize:6,outerTickSize:6*!!t.outerTick,orient:"bottom",range:[],tickArguments:null,tickCentered:null,tickCulling:!0,tickFormat:null,tickLength:9,tickOffset:0,tickPadding:3,tickValues:null,transition:null,noTransition:t.noTransition};e.tickLength=Math.max(e.innerTickSize,0)+e.tickPadding,this.config=e,this.params=t,this.helper=new eW(this)}return t.prototype.create=function(t){var e,i=this,n=i.config,a=i.helper,r=i.params,o=a.scale,s=n.orient,l=this.splitTickText.bind(i),u=/^(left|right)$/.test(s),d=/^(top|bottom)$/.test(s),h=a.getTickTransformSetter(d?"x":"y"),g=h===a.axisX?"y":"x",f=/^(top|left)$/.test(s)?-1:1,p=r.tickTextRotate;this.config.range=o.rangeExtent?o.rangeExtent():a.scaleExtent((r.orgXScale||o).range());var v=n.innerTickSize,x=n.tickLength,m=n.range,_=r.id,y=_&&/^(x|y|y2)$/.test(_)?r.config["axis_".concat(_,"_tick_text_position")]:{x:0,y:0},T="subX"===_?"subchart_axis_x":"axis_".concat(_),b=r.config["".concat(T,"_show")],w={tick:!!b&&r.config["".concat(T,"_tick_show")],text:!!b&&r.config["".concat(T,"_tick_text_show")]},A=r.config.axis_evalTextSize;t.each(function(){var t=(0,c.A)(this),_=this.__chart__||o,T=a.copyScale();e=t,this.__chart__=T,n.tickOffset=r.isCategory?(T(1)-T(0))/2:0;var b=t.selectAll(".domain").data([0]);if(b.enter().append("path").attr("class","domain").merge(b).attr("d",function(){var t=n.outerTickSize*f;return d?"M".concat(m[0],",").concat(t,"V0H").concat(m[1],"V").concat(t):"M".concat(t,",").concat(m[0],"H0V").concat(m[1],"H").concat(t)}),w.tick||w.text){var k,S=n.tickValues||a.generateTicks(T,u);i.generatedTicks=S;var E=t.selectAll(".tick").data(S,T),C=E.enter().insert("g",".domain").attr("class","tick"),R=E.exit().remove();E=C.merge(E),w.tick&&C.append("line"),w.text&&C.append("text");var L=E.select("text"),I=tE(A)?A.bind(i.params.owner.api)(L.node()):eW.getSizeFor1Char(L,A),O=[],D=L.selectAll("tspan").data(function(t,e){var i=r.tickMultiline?l(t,T,S,u,I.w):t$(a.textFormatted(t))?a.textFormatted(t).concat():[a.textFormatted(t)];return O[e]=i.length,i.map(function(t){return{index:e,splitted:t}})});D.exit().remove(),(D=D.enter().append("tspan").merge(D).text(function(t){return t.splitted})).attr("x",d?0:x*f).attr("dx",(k=0,/(top|bottom)/.test(s)&&p&&(k=8*Math.sin(p/180*Math.PI)*("top"===s?-1:1)),k+(y.x||0))).attr("dy",function(t,e){var i=".71em",n=0;return"top"!==s&&(n=I.h,0===e&&(n=u?-((O[t.index]-1)*(I.h/2)-3):0===y.y?i:0)),tR(n)&&y.y?n+y.y:n||i});var z=E.select("line"),P=E.select("text");if(C.select("line").attr("".concat(g,"2"),v*f),C.select("text").attr(g,x*f),i.setTickLineTextPosition(z,P),r.tickTitle){var X=P.select("title");(X.empty()?P.append("title"):X).text(function(t){return r.tickTitle[t]})}if(T.bandwidth){var F=T,$=F.bandwidth()/2;T=_=function(t){return F(t)+$}}else _.bandwidth?_=T:h(R,T);E=r.owner.state.flowing?a.transitionise(E):r.owner.$T(E),h(C,_),h(E.style("opacity",null),T)}}),this.g=e},t.prototype.getGeneratedTicks=function(t){var e,i=(null===(e=this.generatedTicks)||void 0===e?void 0:e.length)-1,n=this.generatedTicks;if(i>t){var a=Math.round(i/t+.1);n=this.generatedTicks.map(function(t,e){return e%a==0?t:null}).filter(function(t){return null!==t}).splice(0,t)}return n},t.prototype.getTickXY=function(){var t=this.config,e={x:0,y:0};return this.params.isCategory&&(e.x=t.tickCentered?0:t.tickOffset,e.y=t.tickCentered?t.tickOffset:0),e},t.prototype.getTickSize=function(t){var e=this.helper.scale,i=this.config,n=i.innerTickSize,a=i.range,r=e(t)+(i.tickCentered?0:i.tickOffset);return a[0]<r&&r<a[1]?n:0},t.prototype.setTickLineTextPosition=function(t,e){var i=this.getTickXY(),n=this.config,a=n.innerTickSize,r=n.orient,o=n.tickLength,s=n.tickOffset,c=this.params.tickTextRotate,l=function(t){var e=["start","end"];return"top"===r&&e.reverse(),t?e[t>0?0:1]:"middle"},u=function(t){return t?"rotate(".concat(t,")"):null},d=function(t){return t?11.5-t/("bottom"===r?15:23)*2.5*(t>0?1:-1):o},h=this.params.owner.config,g=h.axis_rotated,f=h.axis_x_tick_text_inner;switch(r){case"bottom":t.attr("x1",i.x).attr("x2",i.x).attr("y2",this.getTickSize.bind(this)),e.attr("x",0).attr("y",d(c)).style("text-anchor",l(c)).style("text-anchor",function(t,e,i){var n=i.length;return!g&&0===e&&(!0===f||f.first)?"start":!g&&e===n-1&&(!0===f||f.last)?"end":l(c)}).attr("transform",u(c));break;case"top":t.attr("x2",0).attr("y2",-a),e.attr("x",0).attr("y",-(2*d(c))).style("text-anchor",l(c)).attr("transform",u(c));break;case"left":t.attr("x2",-a).attr("y1",i.y).attr("y2",i.y),e.attr("x",-o).attr("y",s).style("text-anchor","end");break;case"right":t.attr("x2",a).attr("y2",0),e.attr("x",o).attr("y",0).style("text-anchor","start")}},t.prototype.splitTickText=function(t,e,i,n,a){var r=this.params,o=this.helper.textFormatted(t),s=tC(o)&&o.indexOf("\n")>-1?o.split("\n"):[];if(s.length)return s;if(t$(o))return o;var c=r.tickWidth;return(!c||c<=0)&&(c=n?95:r.isCategory?(r.isInverted?e(i[0])-e(i[1]):e(i[1])-e(i[0]))-12:110),function t(e,i){for(var n,r,o=1;o<i.length;o++)if(" "===i.charAt(o)&&(n=o),r=a*i.substr(0,o+1).length,c<r)return t(e.concat(i.substr(0,n||o)),i.slice(n?n+1:o));return e.concat(i)}(s,String(o))},t.prototype.scale=function(t){return arguments.length?(this.helper.scale=t,this):this.helper.scale},t.prototype.orient=function(t){return arguments.length?(this.config.orient=t in{top:1,right:1,bottom:1,left:1}?String(t):"bottom",this):this.config.orient},t.prototype.tickFormat=function(t){var e=this.config;return arguments.length?(e.tickFormat=t,this):e.tickFormat},t.prototype.tickCentered=function(t){var e=this.config;return arguments.length?(e.tickCentered=t,this):e.tickCentered},t.prototype.tickOffset=function(){return this.config.tickOffset},t.prototype.tickInterval=function(t){var e,i,n=this.config,a=n.outerTickSize,r=n.tickOffset,o=n.tickValues;if(this.params.isCategory)i=2*r;else{var s=null!==(e=this.params.owner.scale.zoom)&&void 0!==e?e:this.helper.scale;i=(this.g.select("path.domain").node().getTotalLength()-2*a)/(t||this.g.selectAll("line").size());var c=o?o.map(function(t,e,i){var n=e+1;return n<i.length?s(i[n])-s(t):null}).filter(Boolean):[];i=Math.min.apply(Math,G(G([],c,!1),[i],!1))}return i===1/0?0:i},t.prototype.ticks=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=this.config;return t.length?(i.tickArguments=tJ(t),this):i.tickArguments},t.prototype.tickCulling=function(t){var e=this.config;return arguments.length?(e.tickCulling=t,this):e.tickCulling},t.prototype.tickValues=function(t){var e=this,i=this.config;if(tE(t))i.tickValues=function(){return t(e.helper.scale.domain())};else{if(!arguments.length)return i.tickValues;i.tickValues=t}return this},t.prototype.setTransition=function(t){return this.config.transition=t,this},t}(),eq=function(){function t(t){this.axesList={},this.tick={x:null,y:null,y2:null},this.xs=[],this.orient={x:"bottom",y:"left",y2:"right",subX:"bottom"},this.owner=t,this.setOrient()}return t.prototype.getAxisClassName=function(t){return"".concat(U.axis," ").concat(U["axis".concat(tK(t))])},t.prototype.isHorizontal=function(t,e){var i=t.config.axis_rotated;return e?i:!i},t.prototype.isCategorized=function(){var t=this.owner,e=t.config,i=t.state;return e.axis_x_type.indexOf("category")>=0||i.hasRadar},t.prototype.isCustomX=function(){var t=this.owner.config;return!this.isTimeSeries()&&(t.data_x||tF(t.data_xs))},t.prototype.isTimeSeries=function(t){return void 0===t&&(t="x"),"timeseries"===this.owner.config["axis_".concat(t,"_type")]},t.prototype.isLog=function(t){return void 0===t&&(t="x"),"log"===this.owner.config["axis_".concat(t,"_type")]},t.prototype.isTimeSeriesY=function(){return this.isTimeSeries("y")},t.prototype.getAxisType=function(t){void 0===t&&(t="x");var e="linear";return this.isTimeSeries(t)?e=this.owner.config.axis_x_localtime?"time":"utc":this.isLog(t)&&(e="log"),e},t.prototype.getExtent=function(){var t=this.owner,e=t.config,i=t.scale,n=e.axis_x_extent;if(n){if(tE(n))n=n.bind(t.api)(t.getXDomain(t.data.targets),i.subX);else if(this.isTimeSeries()&&n.every(isNaN)){var a=t9.bind(t);n=n.map(function(t){return i.subX(a(t))})}}return n},t.prototype.init=function(){var t=this,e=this.owner,i=e.config,n=e.$el,a=n.main,r=n.axis,o=e.state.clip,s=["x","y"];i.axis_y2_show&&s.push("y2"),s.forEach(function(n){var s=t.getAxisClassName(n);r[n]=a.append("g").attr("class",s).attr("clip-path",function(){var t=null;return"x"===n?t=o.pathXAxis:"y"===n&&(t=o.pathYAxis),t}).attr("transform",e.getTranslate(n)).style("visibility",i["axis_".concat(n,"_show")]?null:"hidden"),t.generateAxes(n)})},t.prototype.setOrient=function(){var t=this.owner.config,e=t.axis_rotated,i=t.axis_y_inner,n=t.axis_y2_inner;this.orient={x:e?"left":"bottom",y:e?i?"top":"bottom":i?"right":"left",y2:e?n?"bottom":"top":n?"left":"right",subX:e?"left":"bottom"}},t.prototype.generateAxes=function(t){var e,i=this.owner,n=i.config,a=[],r=n["axis_".concat(t,"_axes")],o=n.axis_rotated;"x"===t?e=o?B.V4:B.l7:"y"===t?e=o?B.l7:B.V4:"y2"===t&&(e=o?B.tl:B.eH),r.length&&r.forEach(function(n){var r=n.tick||{},o=i.scale[t].copy();n.domain&&o.domain(n.domain),a.push(e(o).ticks(r.count).tickFormat(tE(r.format)?r.format.bind(i.api):function(t){return t}).tickValues(r.values).tickSizeOuter(6*(!1!==r.outer)))}),this.axesList[t]=a},t.prototype.updateAxes=function(){var t=this,e=this.owner,i=e.config,n=e.$el.main,a=e.$T;Object.keys(this.axesList).forEach(function(r){var o=i["axis_".concat(r,"_axes")],s=e.scale[r].copy(),c=s.range();t.axesList[r].forEach(function(l,u){var d=l.scale().range();c.every(function(t,e){return t===d[e]})||l.scale().range(c);var h="".concat(t.getAxisClassName(r),"-").concat(u+1),g=n.select(".".concat(h.replace(/\s/,".")));g.empty()?g=n.append("g").attr("class",h).style("visibility",i["axis_".concat(r,"_show")]?null:"hidden").call(l):(o[u].domain&&s.domain(o[u].domain),a(g).call(l.scale(s))),g.attr("transform",e.getTranslate(r,u+1))})})},t.prototype.setAxis=function(t,e,i,n){var a=this.owner;"subX"!==t&&(this.tick[t]=this.getTickValues(t)),this[t]=this.getAxis(t,e,i,"x"===t&&(!!a.scale.zoom||!!a.config.subchart_show||!!a.state.resizing)||n)},t.prototype.getAxis=function(t,e,i,n,a){var r,o=this.owner,s=o.config,c=/^(x|subX)$/.test(t),l=c?"x":t,u=c&&this.isCategorized(),d=this.orient[t],h=a?0:o.getAxisTickRotate(l);if(c)r="subX"===t?o.format.subXAxisTick:o.format.xAxisTick;else{var g=s["axis_".concat(t,"_tick_format")];tE(g)&&(r=g.bind(o.api))}var f=this.tick[l],p=t3({outerTick:i,noTransition:n,config:s,id:t,tickTextRotate:h,owner:o},c&&{isCategory:u,isInverted:s.axis_x_inverted,tickMultiline:s.axis_x_tick_multiline,tickWidth:s.axis_x_tick_width,tickTitle:u&&s.axis_x_tick_tooltip&&o.api.categories(),orgXScale:o.scale.x});c||(p.tickStepSize=s["axis_".concat(l,"_tick_stepSize")]);var v=new eZ(p).scale(c&&o.scale.zoom||e).orient(d);if(c&&this.isTimeSeries()&&f&&!tE(f)){var x=t9.bind(o);f=f.map(function(t){return x(t)})}else!c&&this.isTimeSeriesY()&&(v.ticks(s.axis_y_tick_time_value),f=null);f&&v.tickValues(f),v.tickFormat(r||!c&&o.isStackNormalized()&&function(t){return"".concat(t,"%")}),u&&(v.tickCentered(s.axis_x_tick_centered),tX(s.axis_x_tick_culling)&&(s.axis_x_tick_culling=!1));var m=s["axis_".concat(l,"_tick_count")];return m&&v.ticks(m),v},t.prototype.updateXAxisTickValues=function(t,e){var i,n,a=this.owner,r=a.config,o=r.axis_x_tick_fit,s=r.axis_x_tick_count;return(o||s&&o)&&(n=a.mapTargetsToUniqueXs(t),this.isCategorized()&&s>n.length&&(s=n.length),n=this.generateTickValues(n,s,this.isTimeSeries())),e?e.tickValues(n):this.x&&(this.x.tickValues(n),null===(i=this.subX)||void 0===i||i.tickValues(n)),n},t.prototype.getId=function(t){var e=this.owner,i=e.config,n=e.scale,a=i.data_axes[t];return a&&n[a]||(a="y"),a},t.prototype.getXAxisTickFormat=function(t){var e,i=this.owner,n=i.config,a=i.format,r=t&&n.subchart_axis_x_tick_format||n.axis_x_tick_format,o=this.isTimeSeries(),s=this.isCategorized();return r?tE(r)?e=r.bind(i.api):o&&(e=function(t){return t?a.axisTime(r)(t):""}):e=o?a.defaultAxisTime:s?i.categoryName:function(t){return t<0?t.toFixed(0):t},tE(e)?function(t){return e.apply(i,s?[t,i.categoryName(t)]:[t])}:e},t.prototype.getTickValues=function(t){var e=this.owner,i=e.config["axis_".concat(t,"_tick_values")],n=e["".concat(t,"Axis")];return(tE(i)?i.call(e.api):i)||(n?n.tickValues():void 0)},t.prototype.getLabelOptionByAxisId=function(t){return this.owner.config["axis_".concat(t,"_label")]},t.prototype.getLabelText=function(t){var e=this.getLabelOptionByAxisId(t);return tC(e)?e:e?e.text:null},t.prototype.setLabelText=function(t,e){var i=this.owner.config,n=this.getLabelOptionByAxisId(t);tC(n)?i["axis_".concat(t,"_label")]=e:n&&(n.text=e)},t.prototype.getLabelPosition=function(t,e){var i=this.owner.config.axis_rotated,n=this.getLabelOptionByAxisId(t),a=tP(n)&&n.position?n.position:e[+!i],r=function(t){return!!~a.indexOf(t)};return{isInner:r("inner"),isOuter:r("outer"),isLeft:r("left"),isCenter:r("center"),isRight:r("right"),isTop:r("top"),isMiddle:r("middle"),isBottom:r("bottom")}},t.prototype.getAxisLabelPosition=function(t){return this.getLabelPosition(t,"x"===t?["inner-top","inner-right"]:["inner-right","inner-top"])},t.prototype.getLabelPositionById=function(t){return this.getAxisLabelPosition(t)},t.prototype.xForAxisLabel=function(t){var e=this.owner,i=e.state,n=i.width,a=i.height,r=this.getAxisLabelPosition(t),o=r.isMiddle?-a/2:0;return this.isHorizontal(e,"x"!==t)?o=r.isLeft?0:r.isCenter?n/2:n:r.isBottom&&(o=-a),o},t.prototype.textAnchorForAxisLabel=function(t){var e=this.owner,i=this.getAxisLabelPosition(t),n=i.isMiddle?"middle":"end";return this.isHorizontal(e,"x"!==t)?n=i.isLeft?"start":i.isCenter?"middle":"end":i.isBottom&&(n="start"),n},t.prototype.dxForAxisLabel=function(t){var e=this.owner,i=this.getAxisLabelPosition(t),n=i.isBottom?"0.5em":"0";return this.isHorizontal(e,"x"!==t)?n=i.isLeft?"0.5em":i.isRight?"-0.5em":"0":i.isTop&&(n="-0.5em"),n},t.prototype.dyForAxisLabel=function(t){var e,i=this.owner,n=i.config,a=n.axis_rotated,r=this.getAxisLabelPosition(t).isInner,o=n["axis_".concat(t,"_tick_rotate")]?i.getHorizontalAxisHeight(t):0,s=this.getMaxTickSize(t).width;if("x"===t){var c=n.axis_x_height;e=a?r?"1.2em":-25-s:r?"-0.5em":c?c-10:o?o-10:"3em"}else e=({y:["-0.5em",10,"3em","1.2em",10],y2:["1.2em",-20,"-2.2em","-0.5em",15]})[t],e=a?r?e[0]:o?o*("y2"===t?-1:1)-e[1]:e[2]:r?e[3]:(e[4]+(n["axis_".concat(t,"_inner")]?0:s+e[4]))*("y"===t?-1:1);return e},t.prototype.getMaxTickSize=function(t,e){var i=this.owner,n=i.config,a=i.state.current,r=i.$el,o=r.svg,s=r.chart,c=a.maxTickSize[t],l="axis_".concat(t),u={width:0,height:0};if(e||!n["".concat(l,"_show")]||c.width>0&&0===i.filterTargetsToShow().length)return c;if(o){var d=/^y2?$/.test(t),h=i.filterTargetsToShow(i.data.targets),g=i.scale[t].copy().domain(i["get".concat(d?"Y":"X","Domain")](h,t)),f=g.domain(),p=f[0]===f[1]&&f.every(function(t){return t>0}),v=t$(c.domain)&&c.domain[0]===c.domain[1]&&c.domain.every(function(t){return t>0});if(p||v)return c.size;c.domain=f,d||c.ticks.splice(0);var x=this.getAxis(t,g,!1,!1,!0),m=n["".concat(l,"_tick_rotate")],_=n["".concat(l,"_tick_count")];!n["".concat(l,"_tick_values")]&&_&&x.tickValues(this.generateTickValues(f,_,d?this.isTimeSeriesY():this.isTimeSeries())),d||this.updateXAxisTickValues(h,x);var y=s.append("svg").style("visibility","hidden").style("position","fixed").style("top","0").style("left","0");x.create(y),y.selectAll("text").attr("transform",tR(m)?"rotate(".concat(m,")"):null).each(function(t,e){var i=this.getBoundingClientRect(),n=i.width,a=i.height;u.width=Math.max(u.width,n),u.height=Math.max(u.height,a),d||(c.ticks[e]=n)}),y.remove()}return Object.keys(u).forEach(function(t){u[t]>0&&(c[t]=u[t])}),c},t.prototype.getXAxisTickTextY2Overflow=function(t){var e=this.owner,i=e.axis,n=e.config,a=e.state,r=a.current,o=a.isLegendRight,s=a.legendItemWidth,c=e.getAxisTickRotate("x"),l=c>0&&c<90;if((i.isCategorized()||i.isTimeSeries())&&n.axis_x_tick_fit&&(!n.axis_x_tick_culling||tX(n.axis_x_tick_culling))&&!n.axis_x_tick_multiline&&l){var u=n.axis_y2_show&&r.maxTickSize.y2.width||0,d=r.width-e.getCurrentPaddingByDirection("left");return Math.min(Math.max(0,this.getXAxisTickMaxOverflow(c,d-t)-u-(o&&s||0))+t,d/2)}return 0},t.prototype.getXAxisTickMaxOverflow=function(t,e){for(var i=this.owner,n=i.axis,a=i.config,r=i.state,o=n.isTimeSeries(),s=r.current.maxTickSize.x.ticks,c=s.length,l=r.axis.x.padding,u=l.left,d=l.right,h=0,g=c-(o&&a.axis_x_tick_fit?.5:0),f=0;f<c;f++){var p=f+1,v=Math.cos(Math.PI*t/180)*s[f],x=p-(o?1:.5)+u;if(!(x<=0)){var m=(e-v)/x,_=d*m,y=(g-p)*m+_;h=Math.max(h,v-m/2-y)}}var T=i.filterTargetsToShow(i.data.targets),b=0;if(!o&&a.axis_x_tick_count<=T.length&&T[0].values.length){var w=eC(i.axis.getAxisType("x"),0,e-h).domain([-1*u,i.getXDomainMax(i.data.targets)+1+d]);b=(w(1)-w(0))/2}return h+b},t.prototype.updateLabels=function(t){var e=this,i=this.owner,n=i.config,a=i.$el.main,r=i.$T,o=n.axis_rotated;["x","y","y2"].forEach(function(i){var n=e.getLabelText(i),s="axis".concat(tK(i)),c=U["".concat(s,"Label")];if(n){var l=a.select("text.".concat(c));l.empty()&&(l=a.select("g.".concat(U[s])).insert("text",":first-child").attr("class",c).attr("transform",["rotate(-90)",null]["x"===i?+!o:+o]).style("text-anchor",function(){return e.textAnchorForAxisLabel(i)})),r(l,t).attr("x",function(){return e.xForAxisLabel(i)}).attr("dx",function(){return e.dxForAxisLabel(i)}).attr("dy",function(){return e.dyForAxisLabel(i)}).text(n)}})},t.prototype.getPadding=function(t,e,i,n){var a=tR(t)?t:t[e];return tS(a)?this.owner.convertPixelToScale(/(bottom|top)/.test(e)?"y":"x",a,n):i},t.prototype.generateTickValues=function(t,e,i){var n=t;if(e){var a=tE(e)?e():e;if(1===a)n=[t[0]];else if(2===a)n=[t[0],t[t.length-1]];else if(a>2){var r=this.isCategorized(),o=a-2,s=t[0],c=t[t.length-1],l=(c-s)/(o+1),u=void 0;n=[s];for(var d=0;d<o;d++)u=+s+l*(d+1),n.push(i?new Date(u):r?Math.round(u):u);n.push(c)}}return i||(n=n.sort(function(t,e){return t-e})),n},t.prototype.generateTransitions=function(t){var e=this.owner,i=e.$el.axis,n=e.$T,a=["x","y","y2","subX"].map(function(e){return n(i[e],t)});return{axisX:a[0],axisY:a[1],axisY2:a[2],axisSubX:a[3]}},t.prototype.redraw=function(t,e,i){var n=this,a=this.owner,r=a.config,o=a.state,s=a.$el,c=e?"0":null;["x","y","y2","subX"].forEach(function(e){var a=n[e],o=s.axis[e];a&&o&&(i||r.transition_duration||(a.config.withoutTransition=!0),o.style("opacity",c),a.create(t["axis".concat(tK(e))]))}),this.updateAxes(),!o.rendered&&r.axis_tooltip&&this.setAxisTooltip()},t.prototype.redrawAxis=function(t,e,i,n,a){var r,o,s,c,l=this,u=this.owner,d=u.config,h=u.scale,g=u.$el,f=!!h.zoom;!f&&this.isCategorized()&&0===t.length&&h.x.domain([0,g.axis.x.selectAll(".tick").size()]),h.x&&t.length?(f||u.updateXDomain(t,e.UpdateXDomain,e.UpdateOrgXDomain,e.TrimXDomain),d.axis_x_tick_values||this.updateXAxisTickValues(t)):this.x&&(this.x.tickValues([]),null===(r=this.subX)||void 0===r||r.tickValues([])),d.zoom_rescale&&!n&&(c=h.x.orgDomain()),["y","y2"].forEach(function(e){var i="axis_".concat(e,"_"),n=h[e];if(n){var a=d["".concat(i,"tick_values")],r=d["".concat(i,"tick_count")];if(n.domain(u.getYDomain(t,e,c)),!a&&r){var o=u.axis[e],s=n.domain();o.tickValues(l.generateTickValues(s,s.every(function(t){return 0===t})?1:r,l.isTimeSeriesY()))}}}),this.redraw(i,u.hasArcType(),a),this.updateLabels(e.Transition),(e.UpdateXDomain||e.UpdateXAxis||e.Y)&&t.length&&this.setCulling(),e.Y&&(null===(o=h.subY)||void 0===o||o.domain(u.getYDomain(t,"y")),null===(s=h.subY2)||void 0===s||s.domain(u.getYDomain(t,"y2")))},t.prototype.setCulling=function(){var t=this.owner,e=t.config,i=t.state,n=i.clip,a=i.current,r=t.$el;["subX","x","y","y2"].forEach(function(t){var i=r.axis[t],o="axis_".concat("subX"===t?"x":t,"_tick_culling"),s=e[o];if(i&&s){var c,l=i.selectAll(".tick"),u=t4(l.data()),d=u.length,h=e["".concat(o,"_max")],g=e["".concat(o,"_lines")];if(d){for(var f=1;f<d;f++)if(d/f<h){c=f;break}l.each(function(t){var e=g?this.querySelector("text"):this;e&&(e.style.display=u.indexOf(t)%c?"none":null)})}else l.style("display",null);if("x"===t){var p=a.maxTickSize.x.clipPath?n.pathXAxisTickTexts:null;r.svg.selectAll(".".concat(U.axisX," .tick text")).attr("clip-path",p)}}})},t.prototype.setAxisTooltip=function(){var t,e=this.owner,i=e.config,n=i.axis_rotated,a=i.axis_tooltip,r=e.$el,o=r.axis,s=r.axisTooltip,c=null!==(t=a.backgroundColor)&&void 0!==t?t:"black";e.generateTextBGColorFilter(c,{x:-.15,y:-.2,width:1.3,height:1.3}),["x","y","y2"].forEach(function(t){var i,a,r;if(tC(c)||c[t])if(s[t]=null===(i=o[t])||void 0===i?void 0:i.append("text").classed(U["axis".concat(t.toUpperCase(),"Tooltip")],!0).attr("filter",e.updateTextBGColor({id:t},c)),n){var l="x"===t?"x":"y",u="y"===t?"1.15em":"x"===t?"-0.3em":"-0.4em";null===(a=s[t])||void 0===a||a.attr(l,u).attr("d".concat("x"===t?"y":"x"),"x"===t?"0.4em":"-1.3em").style("text-anchor","x"===t?"end":null)}else{var l="x"===t?"y":"x",u="x"===t?"1.15em":"".concat("y"===t?"-":"","0.4em");null===(r=s[t])||void 0===r||r.attr(l,u).attr("d".concat("x"===t?"x":"y"),"x"===t?"-1em":"0.3em").style("text-anchor","y"===t?"end":null)}})},t}(),eK=function(t){return tS(t.position)||"end"},eJ=function(t){return"start"===t.position?4:"middle"===t.position?0:-4};function eQ(t,e,i){return function(n){var a=t?0:e;return"start"===n.position?a=t?-i:0:"middle"===n.position&&(a=(t?-i:e)/2),a}}function e0(t,e){t.each(function(){var t=(0,c.A)(this);["x1","x2","y1","y2"].forEach(function(e){return t.attr(e,+t.attr(e))})})}var e1=V(V(V({axis_evalTextSize:!0,axis_rotated:!1,axis_tooltip:!1},{axis_x_clipPath:!0,axis_x_show:!0,axis_x_forceAsSingle:!1,axis_x_type:"indexed",axis_x_localtime:!0,axis_x_categories:[],axis_x_tick_centered:!1,axis_x_tick_format:void 0,axis_x_tick_culling:{},axis_x_tick_culling_max:10,axis_x_tick_culling_lines:!0,axis_x_tick_count:void 0,axis_x_tick_show:!0,axis_x_tick_text_show:!0,axis_x_tick_text_inner:!1,axis_x_tick_text_position:{x:0,y:0},axis_x_tick_fit:!0,axis_x_tick_values:null,axis_x_tick_autorotate:!1,axis_x_tick_rotate:0,axis_x_tick_outer:!0,axis_x_tick_multiline:!0,axis_x_tick_width:null,axis_x_tick_tooltip:!1,axis_x_max:void 0,axis_x_min:void 0,axis_x_inverted:!1,axis_x_padding:{},axis_x_height:void 0,axis_x_extent:void 0,axis_x_label:{},axis_x_axes:[]}),{axis_y_clipPath:!0,axis_y_show:!0,axis_y_type:"indexed",axis_y_max:void 0,axis_y_min:void 0,axis_y_inverted:!1,axis_y_center:void 0,axis_y_inner:!1,axis_y_label:{},axis_y_tick_format:void 0,axis_y_tick_culling:!1,axis_y_tick_culling_max:5,axis_y_tick_culling_lines:!0,axis_y_tick_outer:!0,axis_y_tick_values:null,axis_y_tick_rotate:0,axis_y_tick_count:void 0,axis_y_tick_show:!0,axis_y_tick_stepSize:null,axis_y_tick_text_show:!0,axis_y_tick_text_position:{x:0,y:0},axis_y_tick_time_value:void 0,axis_y_padding:{},axis_y_default:void 0,axis_y_axes:[]}),{axis_y2_show:!1,axis_y2_type:"indexed",axis_y2_max:void 0,axis_y2_min:void 0,axis_y2_inverted:!1,axis_y2_center:void 0,axis_y2_inner:!1,axis_y2_label:{},axis_y2_tick_format:void 0,axis_y2_tick_culling:!1,axis_y2_tick_culling_max:5,axis_y2_tick_culling_lines:!0,axis_y2_tick_outer:!0,axis_y2_tick_values:null,axis_y2_tick_rotate:0,axis_y2_tick_count:void 0,axis_y2_tick_show:!0,axis_y2_tick_stepSize:null,axis_y2_tick_text_show:!0,axis_y2_tick_text_position:{x:0,y:0},axis_y2_padding:{},axis_y2_default:void 0,axis_y2_axes:[]}),e2=[{axis:{labels:function(t){var e,i=this.internal;return t&&(Object.keys(t).forEach(function(e){i.axis.setLabelText(e,t[e])}),i.axis.updateLabels()),["x","y","y2"].forEach(function(t){var n=i.axis.getLabelText(t);n&&(e||(e={}),e[t]=n)}),e},min:function(t){var e=this.internal;return tS(t)||!1===t?eB(e,"min",t):eM(e,"min")},max:function(t){var e=this.internal;return tS(t)||!1===t?eB(e,"max",t):eM(e,"max")},range:function(t){var e=this.axis;if(!arguments.length)return{max:e.max(),min:e.min()};var i=t.min,n=t.max;tI(n)&&e.max(n),tI(i)&&e.min(i)}}},{category:function(t,e){var i=this.internal,n=i.config;return arguments.length>1&&(n.axis_x_categories[t]=e,i.redraw()),n.axis_x_categories[t]},categories:function(t){var e=this.internal,i=e.config;if(!t||!Array.isArray(t)){var n=i.axis_x_categories;return tX(n)?Object.values(e.data.xs)[0]:n}return i.axis_x_categories=t,e.redraw(),i.axis_x_categories}},{flow:function(t){var e,i=this.internal;(t.json||t.rows||t.columns)&&i.convertData(t,function(n){e=n,function(){var n,a,r,o=0,s=0;if(!i.state.redrawing&&e&&ee()){var c=[],l=i.getMaxDataCount(),u=i.convertDataToTargets(e,!0),d=i.axis.isTimeSeries();i.data.targets.forEach(function(t){for(var e=!1,i=0;i<u.length;i++)if(t.id===u[i].id){e=!0,t.values[t.values.length-1]&&(s=t.values[t.values.length-1].index+1),o=u[i].values.length;for(var n=0;n<o;n++)u[i].values[n].index=s+n,d||(u[i].values[n].x=s+n);t.values=t.values.concat(u[i].values),u.splice(i,1);break}e||c.push(t.id)}),i.data.targets.forEach(function(t){for(var e=0;e<c.length;e++)if(t.id===c[e]){s=t.values[t.values.length-1].index+1;for(var n=0;n<o;n++)t.values.push({id:t.id,index:s+n,x:d?i.getOtherTargetX(s+n):s+n,value:null})}}),i.data.targets.length&&u.forEach(function(t){for(var e=[],n=i.data.targets[0].values[0].index;n<s;n++)e.push({id:t.id,index:n,x:d?i.getOtherTargetX(n):n,value:null});t.values.forEach(function(t){t.index+=s,d||(t.x+=s)}),t.values=e.concat(t.values)}),i.data.targets=i.data.targets.concat(u);var h=i.data.targets[0],g=h.values[0];tI(t.to)?(o=0,r=d?t9.call(i,t.to):t.to,h.values.forEach(function(t){t.x<r&&o++})):tI(t.length)&&(o=t.length),l?1===l&&d&&(a=(h.values[h.values.length-1].x-g.x)/2,n=[new Date(+g.x-a),new Date(+g.x+a)]):(a=d?h.values.length>1?h.values[h.values.length-1].x-g.x:g.x-i.getXDomain(i.data.targets)[0]:1,n=[g.x-a,g.x]),n&&i.updateXDomain(null,!0,!0,!1,n),i.updateTargets(i.data.targets),i.redraw({flow:{index:g.index,length:o,duration:tS(t.duration)?t.duration:i.config.transition_duration,done:t.done,orgDataCount:l},withLegend:!0,withTransition:l>1,withTrimXDomain:!1,withUpdateXAxis:!0})}}()})}},{xgrids:eY,ygrids:ej},{groups:function(t){var e=this.internal,i=e.config;return tL(t)||(i.data_groups=t,e.redraw()),i.data_groups}},{regions:eU},{x:function(t){var e=this.internal,i=e.axis,n=e.data,a=i.isCustomX()&&i.isCategorized();return t$(t)&&(a?this.categories(t):(e.updateTargetX(n.targets,t),e.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0}))),a?this.categories():n.xs},xs:function(t){var e=this.internal;return tB(t)&&(e.updateTargetXs(e.data.targets,t),e.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0})),e.data.xs}}],e5={axis:{getAxisInstance:function(){return this.axis||new eq(this)}},clip:{initClip:function(){var t=this.state,e=t.clip,i=t.datetimeId;e.id="".concat(i,"-clip"),e.idXAxis="".concat(e.id,"-xaxis"),e.idYAxis="".concat(e.id,"-yaxis"),e.idGrid="".concat(e.id,"-grid"),e.path=this.getClipPath(e.id),e.pathXAxis=this.getClipPath(e.idXAxis),e.pathYAxis=this.getClipPath(e.idYAxis),e.pathGrid=this.getClipPath(e.idGrid)},getClipPath:function(t){var e=this.config;return!e.clipPath&&/-clip$/.test(t)||!e.axis_x_clipPath&&/-clip-xaxis$/.test(t)||!e.axis_y_clipPath&&/-clip-yaxis$/.test(t)?null:"url(#".concat(t,")")},appendClip:function(t,e){e&&t.append("clipPath").attr("id",e).append("rect")},setXAxisClipPath:function(t){var e=this.config,i=this.state,n=i.margin,a=i.width,r=i.height,o=e.axis_rotated,s=Math.max(30,n.left)-20*!o,c=(o?n.top+r+10:n.bottom)+20,l=o?n.left+20:a+10+s;t.attr("x",o?-(1+s):-(s-1)).attr("y",-15).attr("width",l).attr("height",c)},setYAxisClipPath:function(t){var e=this.config,i=this.state,n=i.margin,a=i.width,r=i.height,o=e.axis_rotated,s=Math.max(30,n.left)-20*!!o,c=e.axis_y_inner,l=c&&!o?e.axis_y_label.text?-20:-1:o?-(1+s):-(s-1),u=-(o?20:n.top),d=(o?a+15+s:n.left+20)+20*!!c,h=(o?n.bottom+10:n.top+r)+10;t.attr("x",l).attr("y",u).attr("width",d).attr("height",h)},updateXAxisTickClip:function(){var t=this.config,e=this.state,i=e.clip,n=e.xAxisHeight,a=this.$el.defs,r=this.getHorizontalAxisHeight("x");if(a&&!i.idXAxisTickTexts){var o="".concat(i.id,"-xaxisticktexts");this.appendClip(a,o),i.pathXAxisTickTexts=this.getClipPath(i.idXAxisTickTexts),i.idXAxisTickTexts=o}!t.axis_x_tick_multiline&&this.getAxisTickRotate("x")&&r!==n&&(this.setXAxisTickClipWidth(),this.setXAxisTickTextClipPathWidth()),this.state.xAxisHeight=r},setXAxisTickClipWidth:function(){var t=this.config,e=this.state.current.maxTickSize,i=this.getAxisTickRotate("x");if(!t.axis_x_tick_multiline&&i){var n=Math.sin(Math.PI/180*Math.abs(i));e.x.clipPath=(this.getHorizontalAxisHeight("x")-20)/n}else e.x.clipPath=null},setXAxisTickTextClipPathWidth:function(){var t=this.state,e=t.clip,i=t.current,n=this.$el.svg;n&&n.select("#".concat(e.idXAxisTickTexts," rect")).attr("width",i.maxTickSize.x.clipPath).attr("height",30)}},eventrect:{initEventRect:function(){this.$el.main.select(".".concat(Y.chart)).append("g").attr("class",ti.eventRects).style("fill-opacity","0")},redrawEventRect:function(){var t,e=this.config,i=this.state,n=this.$el,a=this.isMultipleX(),r=e.axis_x_inverted;if(n.eventRect)this.updateEventRect(n.eventRect,!0);else if(this.data.targets.length){var o=this.$el.main.select(".".concat(ti.eventRects)).style("cursor",e.zoom_enabled&&"drag"!==e.zoom_type?e.axis_rotated?"ns-resize":"ew-resize":null).classed(ti.eventRectsMultiple,a).classed(ti.eventRectsSingle,!a).selectAll(".".concat(ti.eventRect)).data([0]).enter().append("rect");this.updateEventRect(o),this.updateEventType(o),o.call(this.getDraggableSelection()),n.eventRect=o,"touch"!==this.state.inputType||n.svg.on("touchstart.eventRect")||this.hasArcType()||this.bindTouchOnEventRect(),i.rendered&&this.updateEventRect(n.eventRect,!0)}if(!a){var s=this.getMaxDataCountTarget();(!e.data_xSort||r)&&s.sort(function(t,e){return r?e.x-t.x:t.x-e.x}),this.updateDataIndexByX(s),this.updateXs(s),null===(t=this.updatePointClass)||void 0===t||t.call(this,!0),i.eventReceiver.data=s}this.updateEventRectData()},bindTouchOnEventRect:function(){var t,e=this,i=e.config,n=e.state,a=e.$el,r=a.eventRect,o=a.svg,s=function(t){if(e.isMultipleX())e.selectRectForMultipleXs(t);else{var i=e.getDataIndexFromEvent(n.event);e.callOverOutForTouch(i),-1===i?e.unselectRect():e.selectRectForSingle(t,i)}},c=function(){e.unselectRect(),e.callOverOutForTouch()},l=i.interaction_inputType_touch.preventDefault,u=tO(l)&&l||!1,d=!isNaN(l)&&l||null,h=function(e){var n=e.type,a=e.changedTouches[0]["client".concat(i.axis_rotated?"Y":"X")];"touchstart"===n?u?e.preventDefault():null!==d&&(t=a):"touchmove"===n&&(u||!0===t||null!==d&&Math.abs(t-a)>=d)&&(t=!0,e.preventDefault())};r.on("touchstart",function(t){n.event=t,e.updateEventRect()}).on("touchstart.eventRect touchmove.eventRect",function(t){(n.event=t,!r.empty()&&r.classed(ti.eventRect))?n.dragging||n.flowing||e.hasArcType()||t.touches.length>1||(h(t),s(r.node())):c()},!0).on("touchend.eventRect",function(t){n.event=t,!r.empty()&&r.classed(ti.eventRect)&&(e.hasArcType()||!e.toggleShape||n.cancelClick)&&n.cancelClick&&(n.cancelClick=!1)},!0),o.on("touchstart",function(t){n.event=t;var e=t.target;e&&e!==r.node()&&c()})},updateEventRect:function(t,e){void 0===e&&(e=!1);var i=this.state,n=this.$el,a=i.eventReceiver,r=i.width,o=i.height,s=i.rendered,c=i.resizing,l=t||n.eventRect;if((!s||c||e)&&(l.attr("x",0).attr("y",0).attr("width",r).attr("height",o),(!s||e)&&l.classed(ti.eventRect,!0)),a){var u=tQ(n.chart.node());a.rect=l.node().getBoundingClientRect().toJSON(),a.rect.top+=u.y,a.rect.left+=u.x}},updateEventType:function(t){var e=tO(t),i=e?this.$el.eventRect:t,n=!!e&&t!==(null==i?void 0:i.datum().multipleX);i&&(n&&(null==i||i.on("mouseover mousemove mouseout click",null)),this.isMultipleX()?this.generateEventRectsForMultipleXs(i):this.generateEventRectsForSingleX(i))},updateEventRectData:function(){var t=this,e=t.config,i=t.scale,n=t.state,a=i.zoom||i.x,r=e.axis_rotated,o=t.isMultipleX();if(t.updateEventType(o),o)s=0,c=0,l=n.width,u=n.height;else{var s,c,l,u,d,h=void 0;if(t.axis.isCategorized())d=t.getEventRectWidth(),h=function(t){return a(t.x)-d/2};else{var g=function(e){var i=e.index;return{prev:t.getPrevX(i),next:t.getNextX(i)}};d=function(t){var e,i=g(t),o=a.domain();return null===i.prev&&null===i.next?e=r?n.height:n.width:null===i.prev?e=(a(i.next)+a(t.x))/2:null===i.next?e=a(o[1])-(a(i.prev)+a(t.x))/2:(Object.keys(i).forEach(function(t,e){var n;i[t]=null!==(n=i[t])&&void 0!==n?n:o[e]}),e=Math.max(0,(a(i.next)-a(i.prev))/2)),e},h=function(t){var e,i=g(t);return null===i.prev&&null===i.next?0:null===i.prev?a(a.domain()[0]):(a(t.x)+a(i.prev))/2}}s=r?0:h,c=r?h:0,l=r?n.width:d,u=r?d:n.height}var f=n.eventReceiver,p=function(t,e){return tE(t)?t(e):t};f.coords.splice(f.data.length),f.data.forEach(function(t,e){f.coords[e]={x:p(s,t),y:p(c,t),w:p(l,t),h:p(u,t)}})},selectRectForSingle:function(t,e){var i,n,a=this,r=a.config,o=a.$el,s=o.main,c=o.circle,l=r.data_selection_enabled,u=r.data_selection_grouped,d=r.data_selection_isselectable,h=r.tooltip_grouped,g=a.getAllValuesOnIndex(e);if(!h||(a.showTooltip(g,t),null===(i=a.showGridFocus)||void 0===i||i.call(a,g),l&&!u)){c||s.selectAll(".".concat(Y.EXPANDED,":not(.").concat(ts.shape,"-").concat(e,")")).classed(Y.EXPANDED,!1);var f=s.selectAll(".".concat(ts.shape,"-").concat(e)).classed(Y.EXPANDED,!0).style("cursor",d?"pointer":null).filter(function(t){return a.isWithinShape(this,t)});f.empty()&&!h&&r.interaction_onout&&(null===(n=a.hideGridFocus)||void 0===n||n.call(a),a.hideTooltip(),u||a.setExpand(e)),f.call(function(i){var n,r,o=i.data();l&&(u||(null==d?void 0:d.bind(a.api)(o)))&&(t.style.cursor="pointer"),h||(a.showTooltip(o,t),null===(n=a.showGridFocus)||void 0===n||n.call(a,o),null===(r=a.unexpandCircles)||void 0===r||r.call(a),i.each(function(t){return a.setExpand(e,t.id)}))})}},selectRectForMultipleXs:function(t,e){void 0===e&&(e=!0);var i=this,n=i.config,a=i.state,r=i.filterTargetsToShow(i.data.targets);if(!(a.dragging||i.hasArcType(r))){var o=tH(a.event,t),s=i.findClosestFromTargets(r,o);if(e&&a.mouseover&&(!s||s.id!==a.mouseover.id)&&(n.data_onout.call(i.api,a.mouseover),a.mouseover=void 0),!s){i.unselectRect();return}var c=(i.isBubbleType(s)||i.isScatterType(s)||!n.tooltip_grouped?[s]:i.filterByX(r,s.x)).map(function(t){return i.addName(t)});i.showTooltip(c,t),i.setExpand(s.index,s.id,!0),i.showGridFocus(c);var l=i.dist(s,o);(i.isBarType(s.id)||l<i.getPointSensitivity(s))&&(i.$el.svg.select(".".concat(ti.eventRect)).style("cursor","pointer"),e&&!a.mouseover&&(n.data_onover.call(i.api,s),a.mouseover=s))}},unselectRect:function(){var t=this.$el,e=t.circle,i=t.tooltip;this.$el.svg.select(".".concat(ti.eventRect)).style("cursor",null),this.hideGridFocus(),i&&(this.hideTooltip(),this._handleLinkedCharts(!1)),e&&!this.isPointFocusOnly()&&this.unexpandCircles(),this.expandBarTypeShapes(!1)},generateEventRectsForSingleX:function(t){var e=this,i=e.config,n=e.state,a=n.eventReceiver,r=t.style("cursor",i.data_selection_enabled&&i.data_selection_grouped?"pointer":null).on("click",function(t){n.event=t;var i=a.currentIdx,r=a.data[-1===i?e.getDataIndexFromEvent(t):i];e.clickHandlerForSingleX.bind(this)(r,e)}).datum({multipleX:!1});if("mouse"===n.inputType){var o=function(t){var i=t?e.getDataIndexFromEvent(t):a.currentIdx;return i>-1?a.data[i]:null};r.on("mouseover",function(t){n.event=t,e.updateEventRect(),Object.values(e.$el.axisTooltip).forEach(function(t){return null==t?void 0:t.style("display",null)})}).on("mousemove",function(t){var r=o(t);if(n.event=t,r){var s=r.index,c=i.line_step_type;if(i.line_step_tooltipMatch&&e.hasType("step")&&/^step\-(before|after)$/.test(c)){var l=e.scale.zoom||e.scale.x,u=e.axis.xs[s],d=l.invert(tH(t,this)[0]);"step-after"===c&&d<u?s-=1:"step-before"===c&&d>u&&(s+=1)}e.showAxisGridFocus();var h=i.tooltip_grouped&&s===a.currentIdx;if(n.dragging||n.flowing||e.hasArcType()||h){i.tooltip_show&&h&&e.setTooltipPosition();return}s!==a.currentIdx&&(e.setOverOut(!1,a.currentIdx),a.currentIdx=s),-1===s?e.unselectRect():e.selectRectForSingle(this,s),e.setOverOut(-1!==s,s)}}).on("mouseout",function(t){n.event=t,!(!i||e.hasArcType())&&-1!==a.currentIdx&&i.interaction_onout&&(e.hideAxisGridFocus(),e.unselectRect(),e.setOverOut(!1,a.currentIdx),a.currentIdx=-1)})}return r},clickHandlerForSingleX:function(t,e){var i=e.config,n=e.state,a=e.$el.main;if(!t||e.hasArcType()||n.cancelClick){n.cancelClick&&(n.cancelClick=!1);return}var r=t.index;a.selectAll(".".concat(ts.shape,"-").concat(r)).each(function(t){var n;(i.data_selection_grouped||e.isWithinShape(this,t))&&(null===(n=e.toggleShape)||void 0===n||n.call(e,this,t,r),i.data_onclick.bind(e.api)(t,this))})},generateEventRectsForMultipleXs:function(t){var e=this,i=e.config,n=e.state;t.on("click",function(t){n.event=t,e.clickHandlerForMultipleXS.bind(this)(e)}).datum({multipleX:!0}),"mouse"===n.inputType&&t.on("mouseover mousemove",function(t){n.event=t,e.selectRectForMultipleXs(this)}).on("mouseout",function(t){n.event=t,!(!e.config||e.hasArcType())&&i.interaction_onout&&e.unselectRect()})},clickHandlerForMultipleXS:function(t){var e=t.config,i=t.state,n=t.filterTargetsToShow(t.data.targets);if(!t.hasArcType(n)){var a=tH(i.event,this),r=t.findClosestFromTargets(n,a),o=t.getPointSensitivity(r);r&&(t.isBarType(r.id)||t.dist(r,a)<o)&&t.$el.main.selectAll(".".concat(ts.shapes).concat(t.getTargetSelectorSuffix(r.id))).selectAll(".".concat(ts.shape,"-").concat(r.index)).each(function(){var i;(e.data_selection_grouped||t.isWithinShape(this,r))&&(null===(i=t.toggleShape)||void 0===i||i.call(t,this,r,r.index),e.data_onclick.bind(t.api)(r,this))})}}},flow:{generateFlow:function(t){var e=this,i=e.data,n=e.state,a=e.$el;return function(){var r=t.flow.length;n.flowing=!0,i.targets.forEach(function(t){t.values.splice(0,r)}),e.updateXGrid&&e.updateXGrid(!0);var o={};["axis.x","grid.x","gridLines.x","region.list","text","bar","line","area","circle"].forEach(function(t){var e=t.split("."),i=a[e[0]];i&&e.length>1&&(i=i[e[1]]),(null==i?void 0:i.size())&&(o[t]=i)}),e.hideGridFocus(),e.setFlowList(o,t)}},setFlowList:function(t,e){var i,n=this,a=e.flow,r=e.targets,o=a.duration,s=void 0===o?e.duration:o,c=a.index,l=a.length,u=a.orgDataCount,d=n.getFlowTransform(r,u,c,l),h=eh();h.add(Object.keys(t).map(function(e){return i=t[e].transition().ease(M.s).duration(s),i="axis.x"===e?i.call(function(t){n.axis.x.setTransition(t).create(t)}):"region.list"===e?i.filter(n.isRegionOnX).attr("transform",d):i.attr("transform",d)})),i.call(h,function(){n.cleanUpFlow(t,e)})},cleanUpFlow:function(t,e){var i=this,n=i.config,a=i.state,r=i.$el.svg,o=n.axis_rotated,s=e.flow,c=e.shape,l=e.xv,u=c.pos,d=u.cx,h=u.cy,g=u.xForText,f=u.yForText,p=s.done,v=s.length;v&&(["circle","text","shape","eventRect"].forEach(function(t){for(var e=[],i=0;i<v;i++)e.push(".".concat(th[t],"-").concat(i));r.selectAll(".".concat(th["".concat(t,"s")])).selectAll(e).remove()}),r.select(".".concat(th.xgrid)).remove()),Object.keys(t).forEach(function(e){var r=t[e];"axis.x"!==e&&r.attr("transform",null),"grid.x"===e?r.attr(a.xgridAttr):"gridLines.x"===e?(r.attr("x1",o?0:l).attr("x2",o?a.width:l),r.select("text").attr("x",o?a.width:0).attr("y",l)):/^(area|bar|line)$/.test(e)?r.attr("d",c.type[e]):"text"===e?r.attr("x",g).attr("y",f).style("fill-opacity",i.opacityForText.bind(i)):"circle"===e?i.isCirclePoint()?r.attr("cx",d).attr("cy",h):r.attr("x",function(t){return d(t)-n.point_r}).attr("y",function(t){return h(t)-n.point_r}):"region.list"===e&&r.select("rect").filter(i.isRegionOnX).attr("x",i.regionX.bind(i)).attr("width",i.regionWidth.bind(i))}),n.interaction_enabled&&i.redrawEventRect(),(void 0===p?function(){}:p).call(i.api),a.flowing=!1},getFlowTransform:function(t,e,i,n){var a,r=this.data,o=this.scale.x,s=r.targets[0].values,c=this.getValueOnIndex(s,i),l=this.getValueOnIndex(s,i+n),u=o.domain(),d=this.updateXDomain(t,!0,!0);e?a=1===e||(null==c?void 0:c.x)===(null==l?void 0:l.x)||this.axis.isTimeSeries()?o(u[0])-o(d[0]):o((null==c?void 0:c.x)||0)-o(l.x):1!==s.length?a=o(u[0])-o(d[0]):this.axis.isTimeSeries()?(c=this.getValueOnIndex(s,0),l=this.getValueOnIndex(s,s.length-1),a=o(c.x)-o(l.x)):a=tz(d)/2;var h=tz(u)/tz(d);return"translate(".concat(a,",0) scale(").concat(h,",1)")}},grid:{hasGrid:function(){var t=this.config;return["x","y"].some(function(e){return t["grid_".concat(e,"_show")]||t["grid_".concat(e,"_lines")].length})},initGrid:function(){this.hasGrid()&&this.initGridLines(),this.initFocusGrid()},initGridLines:function(){var t=this.config,e=this.state.clip,i=this.$el;(t.grid_x_lines.length||t.grid_y_lines.length)&&(i.gridLines.main=i.main.insert("g",".".concat(Y.chart).concat(t.grid_lines_front?" + *":"")).attr("clip-path",e.pathGrid).attr("class","".concat(ta.grid," ").concat(ta.gridLines)),i.gridLines.main.append("g").attr("class",ta.xgridLines),i.gridLines.main.append("g").attr("class",ta.ygridLines),i.gridLines.x=(0,u.A)([]))},updateXGrid:function(t){var e=this.config,i=this.scale,n=this.state,a=this.$el,r=a.main,o=a.grid,s=e.axis_rotated,l=this.generateGridData(e.grid_x_type,i.x),u=this.axis.isCategorized()?this.axis.x.tickOffset():0,d=function(t){return(i.zoom||i.x)(t)+u*(s?-1:1)};n.xgridAttr=s?{x1:0,x2:n.width,y1:d,y2:d}:{x1:d,x2:d,y1:0,y2:n.height},o.x=r.select(".".concat(ta.xgrids)).selectAll(".".concat(ta.xgrid)).data(l),o.x.exit().remove(),o.x=o.x.enter().append("line").attr("class",ta.xgrid).merge(o.x),t||o.x.each(function(){var t=(0,c.A)(this);Object.keys(n.xgridAttr).forEach(function(e){t.attr(e,n.xgridAttr[e]).style("opacity",function(){return t.attr(s?"y1":"x1")===(s?n.height:0)?"0":null})})})},updateYGrid:function(){var t=this.axis,e=this.config,i=this.scale,n=this.state,a=this.$el,r=a.grid,o=a.main,s=e.axis_rotated,c=function(t){return i.y(t)},l=t.y.getGeneratedTicks(e.grid_y_ticks)||this.scale.y.ticks(e.grid_y_ticks);r.y=o.select(".".concat(ta.ygrids)).selectAll(".".concat(ta.ygrid)).data(l),r.y.exit().remove(),r.y=r.y.enter().append("line").attr("class",ta.ygrid).merge(r.y),r.y.attr("x1",s?c:0).attr("x2",s?c:n.width).attr("y1",s?0:c).attr("y2",s?n.height:c),e0(r.y)},updateGrid:function(){var t=this.$el,e=t.grid;t.gridLines.main||this.initGridLines(),e.main.style("visibility",this.hasArcType()?"hidden":null),this.hideGridFocus(),this.updateGridLines("x"),this.updateGridLines("y")},updateGridLines:function(t){var e=this.config,i=this.$el,n=i.gridLines,a=i.main,r=this.$T,o=e.axis_rotated,s="x"===t;e["grid_".concat(t,"_show")]&&this["update".concat(t.toUpperCase(),"Grid")]();var l=a.select(".".concat(ta["".concat(t,"gridLines")])).selectAll(".".concat(ta["".concat(t,"gridLine")])).data(e["grid_".concat(t,"_lines")]);r(l.exit()).style("opacity","0").remove();var u=l.enter().append("g");u.append("line").style("opacity","0"),(l=u.merge(l)).each(function(t){var e=(0,c.A)(this);e.select("text").empty()&&t.text&&e.append("text").style("opacity","0")}),r(l.attr("class",function(e){return"".concat(ta["".concat(t,"gridLine")]," ").concat(e.class||"").trim()}).select("text").attr("text-anchor",eK).attr("transform",function(){return s?o?null:"rotate(-90)":o?"rotate(-90)":null}).attr("dx",eJ).attr("dy",-5)).text(function(t){var e;return null!==(e=t.text)&&void 0!==e?e:this.remove()}),n[t]=l},redrawGrid:function(t){var e=this.config.axis_rotated,i=this.state,n=i.width,a=i.height,r=this.$el.gridLines,o=this.$T,s=this.xv.bind(this),c=this.yv.bind(this),l=r.x.select("line"),u=r.x.select("text"),d=r.y.select("line"),h=r.y.select("text");return l=o(l,t).attr("x1",e?0:s).attr("x2",e?n:s).attr("y1",e?s:0).attr("y2",e?s:a),u=o(u,t).attr("x",eQ(!e,n,a)).attr("y",s),d=o(d,t).attr("x1",e?c:0).attr("x2",e?c:n).attr("y1",e?0:c).attr("y2",e?a:c),h=o(h,t).attr("x",eQ(e,n,a)).attr("y",c),[l.style("opacity",null),u.style("opacity",null),d.style("opacity",null),h.style("opacity",null)]},initFocusGrid:function(){var t=this.config,e=this.state.clip,i=this.$el,n=t.grid_front,a=".".concat(n&&i.gridLines.main?ta.gridLines:Y.chart).concat(n?" + *":""),r=i.main.insert("g",a).attr("clip-path",e.pathGrid).attr("class",ta.grid);if(i.grid.main=r,t.grid_x_show&&r.append("g").attr("class",ta.xgrids),t.grid_y_show&&r.append("g").attr("class",ta.ygrids),t.axis_tooltip){var o=r.append("g").attr("class","bb-axis-tooltip");o.append("line").attr("class","bb-axis-tooltip-x"),o.append("line").attr("class","bb-axis-tooltip-y")}t.interaction_enabled&&t.grid_focus_show&&!t.axis_tooltip&&(r.append("g").attr("class",tn.xgridFocus).append("line").attr("class",tn.xgridFocus),t.grid_focus_y&&!t.tooltip_grouped&&r.append("g").attr("class",tn.ygridFocus).append("line").attr("class",tn.ygridFocus))},showAxisGridFocus:function(){for(var t,e,i=this.config,n=this.format,a=this.state,r=a.event,o=a.width,s=a.height,l=i.axis_rotated,u=tH(r,null===(t=this.$el.eventRect)||void 0===t?void 0:t.node()),d=u[0],h=u[1],g={x:d,y:h},f=0,p=Object.entries(this.$el.axisTooltip);f<p.length;f++){var v=p[f],x=v[0],m=v[1],_="x"===x&&!l||"x"!==x&&l?"x":"y",y=g[_],T=null===(e=this.scale[x])||void 0===e?void 0:e.invert(y);T&&(T="x"===x&&this.axis.isTimeSeries()?n.xAxisTick(T):null==T?void 0:T.toFixed(2),null==m||m.attr(_,y).text(T))}this.$el.main.selectAll("line.bb-axis-tooltip-x, line.bb-axis-tooltip-y").style("visibility",null).each(function(t,e){var i=(0,c.A)(this);0===e?i.attr("x1",d).attr("x2",d).attr("y1",e?0:s).attr("y2",e?s:0):i.attr("x1",e?0:o).attr("x2",e?o:0).attr("y1",h).attr("y2",h)})},hideAxisGridFocus:function(){this.$el.main.selectAll("line.bb-axis-tooltip-x, line.bb-axis-tooltip-y").style("visibility","hidden"),Object.values(this.$el.axisTooltip).forEach(function(t){return null==t?void 0:t.style("display","none")})},showGridFocus:function(t){var e,i=this,n=i.config,a=i.state,r=a.width,o=a.height,s=n.axis_rotated,l=i.$el.main.selectAll("line.".concat(tn.xgridFocus,", line.").concat(tn.ygridFocus)),u=(t||[l.datum()]).filter(function(t){return t&&tS(i.getBaseValue(t))});if(!(!n.tooltip_show||0===u.length||!n.axis_x_forceAsSingle&&i.hasType("bubble")||i.hasArcType())){var d=n.grid_focus_edge&&!n.tooltip_grouped,h=i.xx.bind(i);l.style("visibility",null).data(u.concat(u)).each(function(t){var e,n=(0,c.A)(this),a={x:h(t),y:i.getYScaleById(t.id)(t.value)};if(n.classed(tn.xgridFocus))e=s?[null,a.x,d?a.y:r,a.x]:[a.x,d?a.y:null,a.x,o];else{var l="y2"===i.axis.getId(t.id);e=s?[a.y,d&&!l?a.x:null,a.y,d&&l?a.x:o]:[d&&l?a.x:null,a.y,d&&!l?a.x:r,a.y]}["x1","y1","x2","y2"].forEach(function(t,i){return n.attr(t,e[i])})}),e0(l),null===(e=i.showCircleFocus)||void 0===e||e.call(i,t)}},hideGridFocus:function(){var t,e=this.state,i=e.inputType,n=e.resizing,a=this.$el.main;"mouse"!==i&&n||(a.selectAll("line.".concat(tn.xgridFocus,", line.").concat(tn.ygridFocus)).style("visibility","hidden"),null===(t=this.hideCircleFocus)||void 0===t||t.call(this))},updateGridFocus:function(){var t,e=this.state,i=e.inputType,n=e.width,a=e.height,r=e.resizing,o=this.$el.grid.main.select("line.".concat(tn.xgridFocus));if("touch"===i)o.empty()?r&&(null===(t=this.showCircleFocus)||void 0===t||t.call(this)):this.showGridFocus();else{var s=this.config.axis_rotated;o.attr("x1",s?0:-10).attr("x2",s?n:-10).attr("y1",s?-10:0).attr("y2",s?-10:a)}return!0},generateGridData:function(t,e){var i=this.$el.main.select(".".concat(U.axisX)).selectAll(".tick").size(),n=[];if("year"===t)for(var a=this.getXDomain().map(function(t){return t.getFullYear()}),r=a[0],o=a[1],s=r;s<=o;s++)n.push(new Date("".concat(s,"-01-01 00:00:00")));else(n=e.ticks(10)).length>i&&(n=n.filter(function(t){return 0>String(t).indexOf(".")}));return n},getGridFilterToRemove:function(t){return t?function(e){var i=!1;return(t$(t)?t.concat():[t]).forEach(function(t){("value"in t&&e.value===t.value||"class"in t&&e.class===t.class)&&(i=!0)}),i}:function(){return!0}},removeGridLines:function(t,e){var i=this.config,n=this.$T,a=this.getGridFilterToRemove(t),r=e?ta.xgridLines:ta.ygridLines,o=e?ta.xgridLine:ta.ygridLine;n(this.$el.main.select(".".concat(r)).selectAll(".".concat(o)).filter(a)).style("opacity","0").remove();var s="grid_".concat(e?"x":"y","_lines");i[s]=i[s].filter(function(t){return!a(t)})}},region:{initRegion:function(){var t=this.$el;t.region.main=t.main.insert("g",":first-child").attr("clip-path",this.state.clip.path).attr("class",tr.regions)},updateRegion:function(){var t=this.config,e=this.$el.region,i=this.$T;e.main||this.initRegion(),e.main.style("visibility",this.hasArcType()?"hidden":null);var n=e.main.selectAll(".".concat(tr.region)).data(t.regions);i(n.exit()).style("opacity","0").remove();var a=n.enter().append("g");a.append("rect").style("fill-opacity","0"),e.list=a.merge(n).attr("class",this.classRegion.bind(this)),e.list.each(function(t){var e;(0,c.A)(this).select("text").empty()&&(null===(e=t.label)||void 0===e?void 0:e.text)&&(0,c.A)(this).append("text").style("opacity","0")})},redrawRegion:function(t){var e=this.$el.region,i=this.$T,n=this.regionX.bind(this),a=this.regionY.bind(this),r=["width","height"],o=e.list.select("rect"),s=e.list.selectAll("text");return o=i(o,t).attr("x",n).attr("y",a).attr("width",this.regionWidth.bind(this)).attr("height",this.regionHeight.bind(this)),s=i(s,t).text(function(t){var e;return null===(e=t.label)||void 0===e?void 0:e.text}).attr("transform",function(t){return t.label.rotated?" rotate(-90)":null}).attr("transform",function(t){var e,i=this,o=null!==(e=t.label)&&void 0!==e?e:{},s=o.x,c=o.y,l=o.center,u=void 0!==l&&l,d=o.rotated,h=this.previousElementSibling,g={x:0,y:0};return tC(u)&&["x","y"].forEach(function(t,e){u.indexOf(t)>-1&&(g[t]=(+h.getAttribute(r[e])-tW(i)[r[e]])/2)}),"translate(".concat(n(t)+g.x+(void 0===s?0:s),", ").concat(a(t)+g.y+(void 0===c?0:c),")").concat(void 0!==d&&d?" rotate(-90)":"")}).attr("text-anchor",function(t){var e=t.label;return(null==e?void 0:e.rotated)?"end":null}).attr("dy","1em").style("fill",function(t){var e,i=t.label;return null!==(e=null==i?void 0:i.color)&&void 0!==e?e:null}),[o.style("fill-opacity",function(t){return tS(t.opacity)?t.opacity:null}).on("end",function(){(0,c.A)(this.parentNode).selectAll("rect:not([x])").remove()}),s.style("opacity",null)]},regionX:function(t){return this.getRegionSize("x",t)},regionY:function(t){return this.getRegionSize("y",t)},regionWidth:function(t){return this.getRegionSize("width",t)},regionHeight:function(t){return this.getRegionSize("height",t)},getRegionSize:function(t,e){var i,n=this.config,a=this.scale,r=this.state,o=n.axis_rotated,s=/(x|y|y2)/.test(t),c=s?"x"===t:"width"===t,l=!s&&this[c?"regionX":"regionY"](e),u=s?"start":"end",d=s?0:r[t];if("y"===e.axis||"y2"===e.axis?(s||c?s&&!c&&(u="end"):u="start",(c?o:!o)&&u in e&&(i=a[e.axis])):(c?!o:o)&&u in e&&(i=a.zoom||a.x),i){var h=0;d=e[u],this.axis.isTimeSeries(e.axis)?d=t9.call(this,d):/(x|width)/.test(t)&&this.axis.isCategorized()&&isNaN(d)&&(d=n.axis_x_categories.indexOf(d),h=this.axis.x.tickOffset()*("start"===u?-1:1)),d=i(d)+h}return s?d:d<l?0:d-l},isRegionOnX:function(t){return!t.axis||"x"===t.axis}},sizeAxis:{getAxisSize:function(t){var e=this.config.axis_rotated;return e&&"x"===t||!e&&/y2?/.test(t)?this.getAxisWidthByAxisId(t,!0):this.getHorizontalAxisHeight(t)},getAxisWidthByAxisId:function(t,e){if(!this.axis)return 40;var i,n,a=null===(i=this.axis)||void 0===i?void 0:i.getLabelPositionById(t),r=this.axis.getMaxTickSize(t,e).width,o=.5*(0===r);return r+((null===(n=this.config.padding)||void 0===n?void 0:n.mode)==="fit"?a.isInner?10+o:10:a.isInner?20+o:40)},getHorizontalAxisHeight:function(t){var e,i,n=this.config,a=this.state,r=a.rotatedPadding,o=a.isLegendRight,s=a.isLegendInset,c=n.axis_rotated,l=(null===(e=n.padding)||void 0===e?void 0:e.mode)==="fit",u=n["axis_".concat(t,"_inner")],d=n["axis_".concat(t,"_label")].text,h=(null===(i=n.padding)||void 0===i?void 0:i.mode)==="fit"?u&&!d?+("y"===t):20:30;if("x"===t&&!n.axis_x_show)return 8;if("x"===t&&tR(n.axis_x_height))return n.axis_x_height;if("y"===t&&!n.axis_y_show)return!n.legend_show||o||s?1:10;if("y2"===t&&!n.axis_y2_show)return l?0:r.top;var g=this.axis.getMaxTickSize(t),f=Math.abs(n.axis_x_tick_rotate)>0&&(!n.axis_x_tick_autorotate||this.needToRotateXAxisTickTexts());return(n.axis_x_tick_multiline||f)&&g.height>13&&(h+=g.height-13),h+10*!this.axis.getLabelPositionById(t).isInner+("y2"!==t||c?0:-10)},getEventRectWidth:function(){var t=this.config,e=this.axis,i=t.axis_x_inverted,n=e.x.tickInterval();return Math.max(0,i?Math.abs(n):n)},getAxisTickRotate:function(t){var e=this.axis,i=this.config,n=this.state,a=this.$el,r=i["axis_".concat(t,"_tick_rotate")];if("x"===t){var o=e.isCategorized()||e.isTimeSeries();if(i.axis_x_tick_fit&&o){var s=i.axis_x_tick_count,c=n.current.maxTickSize.x.ticks.length,l=0;if(s?l=s>c?c:s:c&&(l=c),l!==n.axis.x.tickCount){var u=this.data.targets;n.axis.x.padding=this.getXDomainPadding([this.getXDomainMinMax(u,"min"),this.getXDomainMinMax(u,"max")],l)}n.axis.x.tickCount=l}a.svg&&i.axis_x_tick_autorotate&&i.axis_x_tick_fit&&!i.axis_x_tick_multiline&&!i.axis_x_tick_culling&&o&&(r=this.needToRotateXAxisTickTexts()?i.axis_x_tick_rotate:0)}return r},needToRotateXAxisTickTexts:function(){var t=this.state,e=t.axis,i=t.current,n=t.isLegendRight,a=t.legendItemWidth,r=i.width-(n&&a)-this.getCurrentPaddingByDirection("left")-this.getCurrentPaddingByDirection("right"),o=e.x.tickCount+e.x.padding.left+e.x.padding.right;return this.axis.getMaxTickSize("x").width>(o?r/o:0)}}},e3={optDataAxis:{data_xs:{},data_xFormat:"%Y-%m-%d",data_xLocaltime:!0,data_xSort:!0,data_axes:{},data_regions:{},data_stack_normalize:!1},optAxis:e1,optGrid:{grid_x_show:!1,grid_x_type:"tick",grid_x_lines:[],grid_y_show:!1,grid_y_lines:[],grid_y_ticks:void 0,grid_focus_edge:!1,grid_focus_show:!0,grid_focus_y:!1,grid_front:!1,grid_lines_front:!0}};function e4(t,e,i){var n=this,a=[];if(tI(e))for(var r=function(t,e){return tL(t)?e:i?t9.call(n,t):t},o=0,s=void 0;s=e[o];o++){var c=r(s.start,t[0].x),l=r(s.end,t[t.length-1].x),u=s.style||{dasharray:"2 2"};a[o]={start:c,end:l,style:u}}return a}var e6={initLine:function(){var t=this.$el;t.line=t.main.select(".".concat(Y.chart)).append("g").attr("class",te.chartLines).call(this.setCssRule(!1,".".concat(te.chartLines),["pointer-events:none"]))},updateTargetsForLine:function(t){var e=this,i=e.$el,n=i.area,a=i.line,r=i.main,o=e.getChartClass("Line"),s=e.getClass("lines",!0),c=e.classFocus.bind(e);a||e.initLine();var l=t.filter(function(t){return!(e.isScatterType(t)||e.isBubbleType(t))}),u=r.select(".".concat(te.chartLines)).selectAll(".".concat(te.chartLine)).data(l).attr("class",function(t){return o(t)+c(t)}),d=u.enter().append("g").attr("class",o).style("opacity","0").style("pointer-events",e.getStylePropValue("none"));if(d.append("g").attr("class",s),e.hasTypeOf("Area")){var h=(!n&&d.empty()?u:d).filter(e.isAreaType.bind(e));e.initArea(h)}e.updateTargetForCircle(l,d)},updateLine:function(t,e){void 0===e&&(e=!1);var i=this,n=i.format.extraLineClasses,a=i.$el,r=i.$T,o=e?a.subchart:a,s=o.main.selectAll(".".concat(te.lines)).selectAll(".".concat(te.line)).data(i.lineData.bind(i));r(s.exit(),t).style("opacity","0").remove(),o.line=s.enter().append("path").attr("class",function(t){return"".concat(i.getClass("line",!0)(t)," ").concat(n(t)||"")}).style("stroke",i.color).merge(s).style("opacity",i.initialOpacity.bind(i)).attr("transform",null)},redrawLine:function(t,e,i){void 0===i&&(i=!1);var n=this.$el;return[(0,this.$T)((i?n.subchart:n).line,e,tZ()).attr("d",t).style("stroke",this.color).style("opacity",null)]},getCurve:function(t){var e=this;return e.config.axis_rotated&&e.isStepType(t)?function(i){var n=e.getInterpolate(t)(i);return n.orgPoint=n.point,n.pointRotated=function(t,e){1===this._point&&(this._point=2);var i=this._y*(1-this._t)+e*this._t;this._context.lineTo(this._x,i),this._context.lineTo(t,i),this._x=t,this._y=e},n.point=function(t,e){0===this._point?this.orgPoint(t,e):this.pointRotated(t,e)},n}:e.getInterpolate(t)},generateDrawLine:function(t,e){var i=this,n=i.config,a=i.scale,r=n.line_connectNull,o=n.axis_rotated,s=i.generateGetLinePoints(t,e),c=i.getYScaleById.bind(i),l=function(t){return(e?i.subxx:i.xx).call(i,t)},u=function(t,n){return i.isGrouped(t.id)?s(t,n)[0][1]:c(t.id,e)(i.getBaseValue(t))},d=(0,$.A)();d=o?d.x(u).y(l):d.x(l).y(u),r||(d=d.defined(function(t){return null!==i.getBaseValue(t)}));var h=e?a.subX:a.x;return function(t){var s,l=c(t.id,e),u=r?i.filterRemoveNull(t.values):t.values,g=0,f=0;if(i.isLineType(t)){var p=n.data_regions[t.id];p?s=i.lineWithRegions(u,a.zoom||h,l,p):(i.isStepType(t)&&(u=i.convertValuesToStep(u)),s=d.curve(i.getCurve(t))(u))}else u[0]&&(g=h(u[0].x),f=l(u[0].value)),s=o?"M ".concat(f," ").concat(g):"M ".concat(g," ").concat(f);return s||"M 0 0"}},lineWithRegions:function(t,e,i,n){for(var a,r,o,s,c=this.config.axis_rotated,l=this.axis.isTimeSeries(),u=e4.bind(this)(t,n,l),d=this.hasNullDataValue(t),h=c?function(t){return i(t.value)}:function(t){return e(t.x)},g=c?function(t){return e(t.x)}:function(t){return i(t.value)},f=function(t){return"M".concat(t[0][0],",").concat(t[0][1],"L").concat(t[1][0],",").concat(t[1][1])},p=l?function(t,n,a,s){var l=t.x.getTime(),u=n.x-t.x,d=new Date(l+u*a),h=new Date(l+u*(a+s));return f(c?[[i(r(a)),e(d)],[i(r(a+o)),e(h)]]:[[e(d),i(r(a))],[e(h),i(r(a+o))]])}:function(t,n,o,s){var l=e(n.x,!c),u=i(n.value,c),d=o+s,h=e(a(o),!c),g=i(r(o),c),p=e(a(d),!c),v=i(r(d),c);p>l&&(p=l),t.value>n.value&&(c?v<u:v>u)&&(v=u);var x=[[h,g],[p,v]];return c&&x.forEach(function(t){return t.reverse()}),f(x)},v={x:this.axis.getAxisType("x"),y:this.axis.getAxisType("y")},x="",m=this.$el.line.filter(function(e){return e.id===t[0].id}),_=m.clone().style("display","none"),y=function(t,e){return t.attr("d",e).node().getTotalLength()},T={dash:[],lastLength:0},b=!1,w=0,A=void 0;A=t[w];w++){var k=t[w-1],S=k&&tS(k.value),E=this.isWithinRegions(A.x,u);if(tS(A.value))if(!tL(u)&&E&&S){if(S)if(E=((null==E?void 0:E.dasharray)||"2 2").split(" ").map(Number),a=eC(v.x,k.x,A.x),r=eC(v.y,k.value,A.value),d){var C=Math.sqrt(Math.pow(e(A.x)-e(k.x),2)+Math.pow(i(A.value)-i(k.value),2));s=(o=E[0]/C)*E[1];for(var R=o;R<=1;R+=s)x+=p(k,A,R,o),R+s>=1&&(x+=p(k,A,1,0))}else{var L=[];if(b=A.x===t[t.length-1].x,l){var I=+k.x,O=new Date(I),D=new Date(I+(+A.x-I));L=[[e(O),i(r(0))],[e(D),i(r(1))]]}else L=[[e(a(0)),i(r(0))],[e(a(1)),i(r(1))]];c&&L.forEach(function(t){return t.reverse()});var z=y(_,x),P=y(_,x+="L".concat(L[1].join(","))),X=function(t,e,i,n){void 0===n&&(n=!1);for(var a,r=t?[t,0]:i,o=function(t){i.forEach(function(i){t+i<=e&&r.push(i),t+=i}),a=t},s=t||i.reduce(function(t,e){return t+e});s<=e;)o(s),s=a;return r.length%2!=0&&r.push(n?i[1]:0),{dash:r.join(" "),length:r.reduce(function(t,e){return t+e},0)}}(z-T.lastLength,P-T.lastLength,E,b);T.lastLength+=X.length,T.dash.push(X.dash)}}else x+="".concat(w&&S?"L":"M").concat(h(A),",").concat(g(A))}return T.dash.length&&(b||T.dash.push(y(_,x)),_.remove(),m.attr("stroke-dasharray",T.dash.join(" "))),x},isWithinRegions:function(t,e){for(var i=0,n=void 0;n=e[i];i++)if(n.start<t&&t<=n.end)return n.style;return!1},isWithinStep:function(t,e){return 30>Math.abs(e-tH(this.state.event,t)[1])},shouldDrawPointsForLine:function(t){var e=this.config.line_point;return!0===e||t$(e)&&-1!==e.indexOf(t.id)}},e8=function(){return tZ()},e7={initialOpacityForCircle:function(t){var e=this.config,i=this.state.withoutFadeIn,n=e.point_opacity;return tL(n)&&(n=null!==this.getBaseValue(t)&&i[t.id]?this.opacityForCircle(t):"0"),n},opacityForCircle:function(t){var e,i=this.config,n=i.point_opacity;return tL(n)&&(n=!i.point_show||(null===(e=this.isPointFocusOnly)||void 0===e?void 0:e.call(this))?"0":null,n=tS(this.getBaseValue(t))?this.isBubbleType(t)||this.isScatterType(t)?"0.5":n:"0"),n},initCircle:function(){var t=this.$el.main;this.point||(this.point=this.generatePoint()),(this.hasType("bubble")||this.hasType("scatter"))&&t.select(".".concat(Y.chart," > .").concat(q.chartCircles)).empty()&&t.select(".".concat(Y.chart)).append("g").attr("class",q.chartCircles)},updateTargetForCircle:function(t,e){var i=this,n=this,a=n.config,r=n.data,o=n.$el,s=a.interaction_enabled&&a.data_selection_enabled,l=s&&a.data_selection_isselectable,u=n.getClass("circles",!0);if(a.point_show){n.initCircle();var d=t,h=e;if(!d){d=r.targets.filter(function(t){return i.isScatterType(t)||i.isBubbleType(t)});var g=o.main.select(".".concat(q.chartCircles)).style("pointer-events","none").selectAll(".".concat(q.circles)).data(d);g.exit().remove(),h=g.enter()}s&&h.append("g").attr("class",function(t){return n.generateClass(to.selectedCircles,t.id)}),h.append("g").attr("class",u).call(function(t){n.setCssRule(!0,".".concat(q.circles),["cursor:pointer"],l)(t),n.setCssRule(!0," .".concat(q.circle),["fill","stroke"],n.color)(t)}).style("opacity",function(){return(0,c.A)(this.parentNode).attr("class").indexOf(q.chartCircles)>-1?"0":null}),s&&d.forEach(function(t){o.main.selectAll(".".concat(to.selectedCircles).concat(n.getTargetSelectorSuffix(t.id))).selectAll("".concat(to.selectedCircle)).each(function(e){e.value=t.values[e.index].value})})}},updateCircle:function(t){void 0===t&&(t=!1);var e=this,i=e.config,n=e.state,a=e.$el,r=e.isPointFocusOnly(),o=t?a.subchart:a;if(i.point_show&&!n.toggling){i.point_radialGradient&&e.updateLinearGradient();var s=o.main.selectAll(".".concat(q.circles)).selectAll(".".concat(q.circle)).data(function(t){return e.isLineType(t)&&e.shouldDrawPointsForLine(t)||e.isBubbleType(t)||e.isRadarType(t)||e.isScatterType(t)?r?[t.values[0]]:t.values:[]});s.exit().remove(),s.enter().filter(Boolean).append(e.point("create",this,e.pointR.bind(e),e.updateCircleColor.bind(e))),o.circle=o.main.selectAll(".".concat(q.circles," .").concat(q.circle)).style("stroke",e.getStylePropValue(e.color)).style("opacity",e.initialOpacityForCircle.bind(e))}},updateCircleColor:function(t){var e=this.getStylePropValue(this.color);return this.config.point_radialGradient?this.getGradienColortUrl(t.id):e?e(t):null},redrawCircle:function(t,e,i,n,a){void 0===a&&(a=!1);var r=this.state.rendered,o=this.$el,s=this.$T,c=a?o.subchart:o,l=c.main.selectAll(".".concat(to.selectedCircle));if(!this.config.point_show)return[];var u=this.point("update",this,t,e,this.updateCircleColor.bind(this),i,n,l),d=this.isCirclePoint()?"c":"",h=tZ(),g=this.opacityForCircle.bind(this),f=[];return c.circle.each(function(t){var e=u.bind(this)(t);e=s(e,i||!r,h).style("opacity",g),f.push(e)}),[f,s(l,i).attr("".concat(d,"x"),t).attr("".concat(d,"y"),e)]},showCircleFocus:function(t){var e=this,i=e.state,n=i.hasRadar,a=i.resizing,r=i.toggling,o=i.transiting,s=e.$el.circle;if(!1===o&&s&&e.isPointFocusOnly()){var l=(n?e.radarCircleX:e.circleX).bind(e),u=(n?e.radarCircleY:e.circleY).bind(e),d=r||tL(t),h=e.point("update",e,l,u,e.getStylePropValue(e.color),!a&&d);t&&(s=s.filter(function(e){var i,n=null===(i=t.filter)||void 0===i?void 0:i.call(t,function(t){return t.id===e.id});return!!n.length&&(0,c.A)(this).datum(n[0])})),s.attr("class",this.updatePointClass.bind(this)).style("opacity",null).each(function(t){var i=t.id,n=t.index,a=t.value,r="hidden";tS(a)&&(h.bind(this)(t),e.expandCircles(n,i),r=""),this.style.visibility=r})}},hideCircleFocus:function(){var t=this.$el.circle;this.isPointFocusOnly()&&t&&(this.unexpandCircles(),t.style("visibility","hidden"))},circleX:function(t){return this.xx(t)},updateCircleY:function(t){void 0===t&&(t=!1);var e=this,i=e.generateGetLinePoints(e.getShapeIndices(e.isLineType),t);return function(n,a){var r=n.id;return e.isGrouped(r)?i(n,a)[0][1]:e.getYScaleById(r,t)(e.getBaseValue(n))}},expandCircles:function(t,e,i){var n=this.pointExpandedR.bind(this);i&&this.unexpandCircles();var a=this.getShapeByIndex("circle",t,e).classed(Y.EXPANDED,!0),r=n(a)/this.config.point_r,o=1-r;this.isCirclePoint()?a.attr("r",n):a.each(function(){var t=(0,c.A)(this);if("circle"===this.tagName)t.attr("r",n);else{var e=this.getBBox(),i=e.width,a=e.height,s=o*(+t.attr("x")+i/2),l=o*(+t.attr("y")+a/2);t.attr("transform","translate(".concat(s," ").concat(l,") scale(").concat(r,")"))}})},unexpandCircles:function(t){var e=this.pointR.bind(this),i=this.getShapeByIndex("circle",t).filter(function(){return(0,c.A)(this).classed(Y.EXPANDED)}).classed(Y.EXPANDED,!1);if(i.attr("r",e),!this.isCirclePoint()){var n=e(i)/this.config.point_r;i.attr("transform",1!==n?"scale(".concat(n,")"):null)}},pointR:function(t){var e=this.config.point_r,i=e;return this.isBubbleType(t)?i=this.getBubbleR(t):tE(e)&&(i=e.bind(this.api)(t)),t.r=i,i},pointExpandedR:function(t){var e=this.config,i=this.isBubbleType(t)?1.15:1.75;return e.point_focus_expand_enabled?e.point_focus_expand_r||this.pointR(t)*i:this.pointR(t)},pointSelectR:function(t){var e=this.config.point_select_r;return tE(e)?e(t):e||4*this.pointR(t)},isPointFocusOnly:function(){return this.config.point_focus_only&&!this.hasType("bubble")&&!this.hasType("scatter")&&!this.hasArcType(null,["radar"])},isWithinCircle:function(t,e){var i=tH(this.state.event,t),n=(0,c.A)(t),a=this.isCirclePoint(t)?"c":"",r=this.getPointSensitivity(null==n?void 0:n.datum()),o=+n.attr("".concat(a,"x")),s=+n.attr("".concat(a,"y"));if(!(o||s)&&1===t.nodeType){var l=tW(t),u=l.x,d=l.y;o=u,s=d}return Math.sqrt(Math.pow(o-i[0],2)+Math.pow(s-i[1],2))<(e||r)},getPointSensitivity:function(t){var e=this.config.point_sensitivity;return t&&(tE(e)?e=e.call(this.api,t):"radius"===e&&(e=t.r)),e},updatePointClass:function(t){var e=this,i=e.$el.circle,n=!1;return(tB(t)||i)&&(n=!0===t?i.each(function(t){var i=e.getClass("circle",!0)(t);this.getAttribute("class").indexOf(Y.EXPANDED)>-1&&(i+=" ".concat(Y.EXPANDED)),this.setAttribute("class",i)}):e.getClass("circle",!0)(t)),n},generateGetLinePoints:function(t,e){var i=this,n=i.config,a=i.getShapeX(0,t,e),r=i.getShapeY(e),o=i.getShapeOffset(i.isLineType,t,e),s=i.getYScaleById.bind(i);return function(t,c){var l=s.call(i,t.id,e)(i.getShapeYMin(t.id)),u=o(t,c)||l,d=a(t),h=r(t);n.axis_rotated&&(t.value>0&&h<l||t.value<0&&l<h)&&(h=l);var g=[d,h-(l-u)];return[g,g,g,g]}},custom:{create:function(t,e,i){return t.append("use").attr("xlink:href","#".concat(e)).attr("class",this.updatePointClass.bind(this)).style("fill",i).node()},update:function(t,e,i,n,a,r,o){var s=t.node().getBBox(),c=s.width,l=s.height,u=function(t){return tS(t.value)?e(t)-c/2:0},d=t;return a&&(r&&d.attr("x",u),d=this.$T(d,a,e8()),o&&this.$T(o,a,e8())),d.attr("x",u).attr("y",function(t){return tS(t.value)?i(t)-l/2:0}).style("fill",n)}},circle:{create:function(t,e,i){return t.append("circle").attr("class",this.updatePointClass.bind(this)).attr("r",e).style("fill",i).node()},update:function(t,e,i,n,a,r,o){var s=t;return this.hasType("bubble")&&s.attr("r",this.pointR.bind(this)),a&&(r&&s.attr("cx",e),s.attr("cx")&&(s=this.$T(s,a,e8())),o&&this.$T(s,a,e8())),s.attr("cx",e).attr("cy",i).style("fill",n)}},rectangle:{create:function(t,e,i){var n=function(t){return 2*e(t)};return t.append("rect").attr("class",this.updatePointClass.bind(this)).attr("width",n).attr("height",n).style("fill",i).node()},update:function(t,e,i,n,a,r,o){var s=this.config.point_r,c=function(t){return e(t)-s},l=t;return a&&(r&&l.attr("x",c),l=this.$T(l,a,e8()),o&&this.$T(o,a,e8())),l.attr("x",c).attr("y",function(t){return i(t)-s}).style("fill",n)}}};function e9(t,e){var i,n=function(t,e){for(var i,n=t.attributes,a=0;i=n[a];a++)i=i.name,e.setAttribute(i,t.getAttribute(i))},a=new DOMParser().parseFromString(t,"image/svg+xml").documentElement,r=tb.createElementNS(l.A.svg,a.nodeName.toLowerCase());if(r.id=e,r.style.fill="inherit",r.style.stroke="inherit",n(a,r),null===(i=a.childNodes)||void 0===i?void 0:i.length){var o=(0,c.A)(r);"innerHTML"in r?o.html(a.innerHTML):tJ(a.childNodes).forEach(function(t){n(t,o.append(t.tagName).node())})}this.$el.defs.node().appendChild(r)}var it={hasValidPointType:function(t){return/^(circle|rect(angle)?|polygon|ellipse|use)$/i.test(t||this.config.point_type)},hasLegendDefsPoint:function(){var t,e=this.config;return e.legend_show&&(null===(t=e.point_pattern)||void 0===t?void 0:t.length)&&e.legend_usePoint},getDefsPointId:function(t){var e=this.state.datetimeId;return"".concat(e,"-point").concat(t)},generatePoint:function(){var t=this,e=t.$el,i=t.config,n=[],a=tF(i.point_pattern)?i.point_pattern:[i.point_type];return function(r,o){for(var s=[],l=2;l<arguments.length;l++)s[l-2]=arguments[l];return function(l){var u,d,h,g,f,p=t.getTargetSelectorSuffix(l.id||(null===(d=l.data)||void 0===d?void 0:d.id)||l),v=(0,c.A)(this);0>n.indexOf(p)&&n.push(p);var x=a[n.indexOf(p)%a.length];if(t.hasValidPointType(x))x=t[x];else if(!(tP(u=x||i.point_type)&&tE(u.create)&&tE(u.update))){var m=t.getDefsPointId(p);if(1>e.defs.select("#".concat(m)).size()&&e9.bind(t)(x,m),"create"===r)return null===(h=t.custom)||void 0===h?void 0:h.create.bind(o).apply(void 0,G([v,m],s,!1));if("update"===r)return null===(g=t.custom)||void 0===g?void 0:g.update.bind(o).apply(void 0,G([v],s,!1))}return null===(f=x[r])||void 0===f?void 0:f.bind(o).apply(void 0,G([v],s,!1))}}}};er.radarPoints,er.radarTextWidth;var ie={point_show:!0,point_r:2.5,point_radialGradient:!1,point_sensitivity:10,point_focus_expand_enabled:!0,point_focus_expand_r:void 0,point_focus_only:!1,point_opacity:void 0,point_pattern:[],point_select_r:void 0,point_type:"circle"},ii={line_connectNull:!1,line_step_type:"step",line_step_tooltipMatch:!1,line_zerobased:!1,line_classes:void 0,line_point:!0},ia={spline_interpolation_type:"cardinal"},ir=function(){var t,e,i;return t=void 0,e=[ia],i=[it,e7,e6].concat(t||[]),tq(eD.prototype,Object.values(e5).concat(i)),tq(e$.prototype,e2),ei.setOptions(Object.values(e3).concat([])),ei.setOptions([ie,ii].concat(e||[])),(ir=function(){return es.SPLINE})()};function io(t,e,i,n){void 0===t&&(t=!1);var a=this,r=a.config,o=a.$el.main,s=r.data_selection_grouped,l=r.data_selection_isselectable.bind(a.api);r.data_selection_enabled&&o.selectAll(".".concat(ts.shapes)).selectAll(".".concat(ts.shape)).each(function(r){var o=(0,c.A)(this),u=r.data?r.data:r,d=u.id,h=u.index,g=a.getToggle(this,r).bind(a),f=s||!e||e.indexOf(d)>=0,p=!i||i.indexOf(h)>=0,v=o.classed(to.SELECTED);!(o.classed(te.line)||o.classed(H.area))&&(t?f&&p&&l(r)&&!v?g(!0,o.classed(to.SELECTED,!0),r,h):tI(n)&&n&&v&&g(!1,o.classed(to.SELECTED,!1),r,h):f&&p&&l(r)&&v&&g(!1,o.classed(to.SELECTED,!1),r,h))})}var is={selected:function(t){var e=this.internal,i=[];return e.$el.main.selectAll(".".concat(ts.shapes+e.getTargetSelectorSuffix(t))).selectAll(".".concat(ts.shape)).filter(function(){return(0,c.A)(this).classed(to.SELECTED)}).each(function(t){return i.push(t)}),i},select:function(t,e,i){var n=this.internal;io.bind(n)(!0,t,e,i)},unselect:function(t,e){var i=this.internal;io.bind(i)(!1,t,e)}};tq(function(t){var e,i,n=this.internal,a=n.axis,r=n.brush,o=n.config,s=n.scale,c=s.x,l=s.subX,u=n.state;return o.subchart_show&&(Array.isArray(i=t)?(a.isTimeSeries()&&(i=i.map(function(t){return t9.bind(n)(t)})),n.withinRange(i,n.getZoomDomain("subX",!0),n.getZoomDomain("subX"))&&(u.domain=i,r.move(r.getSelection(),i.map(l)))):i=null!==(e=u.domain)&&void 0!==e?e:c.orgDomain()),i},{show:function(){var t,e,i=this.internal,n=i.$el.subchart,a=i.config,r=a.subchart_show;if(!r){i.unbindZoomEvent(),a.subchart_show=!r,n.main||i.initSubchart();var o=n.main.selectAll(".".concat(Y.target));i.data.targets.length!==o.size()&&(i.updateSizes(),i.updateTargetsForSubchart(i.data.targets),o=null===(t=n.main)||void 0===t?void 0:t.selectAll(".".concat(Y.target))),null==o||o.style("opacity",null),null===(e=n.main)||void 0===e||e.style("display",null),this.resize()}},hide:function(){var t=this.internal,e=t.$el.subchart.main,i=t.config;i.subchart_show&&(null==e?void 0:e.style("display"))!=="none"&&(i.subchart_show=!1,e.style("display","none"),this.resize())},toggle:function(){var t=this.internal.config;this.subchart[t.subchart_show?"hide":"show"]()},reset:function(){var t=this.internal.brush;t.clear(t.getSelection())}});var ic=function(t){var e,i,n=this.internal,a=n.axis,r=n.config,o=n.org,s=n.scale,c=n.state,l=a.isCategorized();if(r.zoom_enabled)if(Array.isArray(i=t)){if(a.isTimeSeries()&&(i=i.map(function(t){return t9.bind(n)(t)})),n.withinRange(i,n.getZoomDomain("zoom",!0),n.getZoomDomain("zoom"))){if(c.domain=i,i=n.getZoomDomainValue(i),n.api.tooltip.hide(),r.subchart_show){var u=s.zoom||s.x;n.brush.getSelection().call(n.brush.move,i.map(u))}else{var u=l?s.x.orgScale():o.xScale||s.x;n.updateCurrentZoomTransform(u,i)}n.setZoomResetButton()}}else i=n.zoom.getDomain();return null!==(e=c.domain)&&void 0!==e?e:i};tq(ic,{enable:function(t){var e=this.internal,i=e.config;/^(drag|wheel)$/.test(t)&&(i.zoom_type=t),i.zoom_enabled=!!t,e.zoom?!1===t&&e.bindZoomEvent(!1):(e.initZoom(),e.bindZoomEvent()),e.updateAndRedraw()},max:function(t){var e=this.internal,i=e.config,n=e.org.xDomain;return(0===t||t)&&(i.zoom_x_max=t6("max",[n[1],t])),i.zoom_x_max},min:function(t){var e=this.internal,i=e.config,n=e.org.xDomain;return(0===t||t)&&(i.zoom_x_min=t6("min",[n[0],t])),i.zoom_x_min},range:function(t){var e=this.zoom;if(tB(t)){var i=t.min,n=t.max;tI(i)&&e.min(i),tI(n)&&e.max(n)}return{min:e.min(),max:e.max()}}});var il={zoom:ic,unzoom:function(){var t=this.internal,e=t.config,i=t.$el,n=i.eventRect,a=i.zoomResetBtn,r=t.scale.zoom,o=t.state;r&&(e.subchart_show?t.brush.getSelection().call(t.brush.move,null):t.zoom.updateTransformScale(N.GS),t.updateZoom(!0),null==a||a.style("display","none"),(0,N._V)(n.node())!==N.GS&&t.zoom.transform(n,N.GS),o.domain=void 0)}},iu={initZoom:function(){this.scale.zoom=null,this.generateZoom(),"drag"===this.config.zoom_type&&this.initZoomBehaviour()},bindZoomEvent:function(t){void 0===t&&(t=!0);var e=this.config;e.zoom_enabled&&t?e.subchart_show||this.bindZoomOnEventRect():!1===t&&(this.api.unzoom(),this.unbindZoomEvent())},generateZoom:function(){var t=this,e=t.config,i=t.org,n=t.scale,a=(0,N.s_)().duration(0).on("start",t.onZoomStart.bind(t)).on("zoom",t.onZoom.bind(t)).on("end",t.onZoomEnd.bind(t));a.orgScaleExtent=function(){var i=e.zoom_extent||[1,10];return[i[0],Math.max(t.getMaxDataCount()/i[1],i[1])]},a.updateScaleExtent=function(){var e=tz(t.scale.x.orgDomain())/tz(t.getZoomDomain()),i=this.orgScaleExtent();return this.scaleExtent([i[0]*e,i[1]*e]),this},a.updateTransformScale=function(a,r){var o,s=e.axis_rotated;null===(o=i.xScale)||void 0===o||o.range(n.x.range());var c=a[s?"rescaleY":"rescaleX"](i.xScale||n.x);if(!c.domain().some(function(t){return/(Invalid Date|NaN)/.test(t.toString())})){var l=t.trimXDomain(c.domain()),u=e.zoom_rescale;if(c.domain(l,i.xDomain),r){var d=c(n.x.domain()[0]),h=s?a.x:d,g=s?d:a.y;t.$el.eventRect.property("__zoom",N.GS.translate(h,g).scale(a.k))}t.state.xTickOffset||(t.state.xTickOffset=t.axis.x.tickOffset()),n.zoom=t.getCustomizedXScale(c),t.axis.x.scale(n.zoom),u?(i.xScale||(i.xScale=n.x.copy()),n.x.domain(l)):i.xScale&&(n.x.domain(i.xScale.domain()),i.xScale=null)}},a.getDomain=function(){var e=n[n.zoom?"zoom":"subX"].domain();return t.axis.isCategorized()&&(e[1]-=2),e},t.zoom=a},onZoomStart:function(t){var e=t.sourceEvent;e&&(this.zoom.startEvent=e,this.state.zooming=!0,tN(this.config.zoom_onzoomstart,this.api,t))},onZoom:function(t){var e,i=this.config,n=this.scale,a=this.state,r=this.org,o=t.sourceEvent,s=(null==t?void 0:t.transform)===N.GS;if(!(!i.zoom_enabled||0===this.filterTargetsToShow(this.data.targets).length||!n.zoom&&(null==o?void 0:o.type.indexOf("touch"))>-1&&(null==o?void 0:o.touches.length)===1)){t.sourceEvent&&(a.zooming=!0,a.domain=void 0);var c=(null==o?void 0:o.type)==="mousemove",l=(null==o?void 0:o.wheelDelta)<0,u=t.transform;!c&&l&&n.x.domain().every(function(t,e){return t!==r.xDomain[e]})&&n.x.domain(r.xDomain),this.zoom.updateTransformScale(u,"wheel"===i.zoom_type&&o);var d=i.transition_duration>0&&!i.subchart_show&&(a.dragging||s||!t.sourceEvent);this.redraw({withTransition:d,withY:i.zoom_rescale,withSubchart:!1,withEventRect:!1,withDimension:!1}),this.state.cancelClick=c,s||tN(i.zoom_onzoom,this.api,null!==(e=this.state.domain)&&void 0!==e?e:this.zoom.getDomain())}},onZoomEnd:function(t){var e,i,n=this.config,a=this.state,r=this.zoom.startEvent,o=null==t?void 0:t.sourceEvent,s=(null==t?void 0:t.transform)===N.GS;(null==r?void 0:r.type.indexOf("touch"))>-1&&(r=r.changedTouches[0],o=null===(e=null==o?void 0:o.changedTouches)||void 0===e?void 0:e[0]),("drag"!==n.zoom_type||!o||r.clientX!==o.clientX||r.clientY!==o.clientY)&&(a.zooming=!1,this.redrawEventRect(),this.updateZoom(),!s&&(o||a.dragging)&&tN(n.zoom_onzoomend,this.api,null!==(i=this.state.domain)&&void 0!==i?i:this.zoom.getDomain()))},updateZoom:function(t){var e=this.scale,i=e.subX,n=e.x,a=e.zoom;if(a){var r=a.domain(),o=i.domain(),s=this.config.axis_x_inverted?(r[0]>=o[0]||r[0]+.015>=o[0])&&(o[1]>=r[1]||o[1]>=r[1]+.015):(r[0]<=o[0]||r[0]-.015<=o[0])&&(o[1]<=r[1]||o[1]<=r[1]-.015);(t||s)&&(this.axis.x.scale(i),n.domain(i.orgDomain()),this.scale.zoom=null)}},updateCurrentZoomTransform:function(t,e){var i,n=this.$el.eventRect,a=this.config.axis_rotated,r=[-t(e[0]),0],o=(i=N.GS.scale(t.range()[1]/(t(e[1])-t(e[0])))).translate.apply(i,a?r.reverse():r);n.call(this.zoom.transform,o)},bindZoomOnEventRect:function(){var t,e=this.config,i=this.$el,n=i.eventRect,a=i.svg,r="drag"===e.zoom_type?this.zoomBehaviour:this.zoom;tT.GestureEvent&&/^((?!chrome|android|mobile).)*safari/i.test(null===(t=tT.navigator)||void 0===t?void 0:t.userAgent)&&a.on("wheel",function(){}),null==n||n.call(r).on("dblclick.zoom",null)},initZoomBehaviour:function(){var t,e,i=this,n=i.config,a=i.state,r=n.axis_rotated,o=0,s=0,c={axis:r?"y":"x",attr:r?"height":"width",index:+!!r};i.zoomBehaviour=(0,p.A)().clickDistance(4).on("start",function(n){e=i.scale.zoom?null:i.axis.getExtent(),a.event=n,i.setDragStatus(!0),i.unselectRect(),t||(t=i.$el.main.append("rect").attr("clip-path",a.clip.path).attr("class",td.zoomBrush).attr("width",r?a.width:0).attr("height",r?0:a.height)),o=tH(n,this)[c.index],e&&(o<e[0]?o=e[0]:o>e[1]&&(o=e[1])),s=o,t.attr(c.axis,o).attr(c.attr,0),i.onZoomStart(n)}).on("drag",function(i){s=tH(i,this)[c.index],e&&(s>e[1]?s=e[1]:s<e[0]&&(s=e[0])),t.attr(c.axis,Math.min(o,s)).attr(c.attr,Math.abs(s-o))}).on("end",function(e){var n,r=i.scale.zoom||i.scale.x;a.event=e,t.attr(c.axis,0).attr(c.attr,0),o>s&&(o=(n=[s,o])[0],s=n[1]),o<0&&(s+=Math.abs(o),o=0),o!==s&&i.api.zoom([o,s].map(function(t){return r.invert(t)})),i.setDragStatus(!1)})},setZoomResetButton:function(){var t=this,e=t.config,i=t.$el,n=e.zoom_resetButton;n&&"drag"===e.zoom_type&&(i.zoomResetBtn?i.zoomResetBtn.style("display",null):i.zoomResetBtn=t.$el.chart.append("div").classed(Y.button,!0).append("span").on("click",function(){tE(n.onclick)&&n.onclick.bind(t.api)(this),t.api.unzoom()}).classed(td.buttonZoomReset,!0).text(n.text||"Reset Zoom"))},getZoomTransform:function(){var t=this.$el.eventRect;return(null==t?void 0:t.node())?(0,N._V)(t.node()):{k:1}}},id=V(V({},{drag:function(t){var e=this,i=e.config,n=e.state,a=e.$el.main,r=i.data_selection_grouped,o=i.interaction_enabled&&i.data_selection_isselectable;if(!e.hasArcType()&&i.data_selection_enabled&&(!i.zoom_enabled||e.zoom.altDomain)&&i.data_selection_multiple){var s=n.dragStart||[0,0],l=s[0],u=s[1],d=t[0],h=t[1],g=Math.min(l,d),f=Math.max(l,d),p=r?n.margin.top:Math.min(u,h),v=r?n.height:Math.max(u,h);a.select(".".concat(J.dragarea)).attr("x",g).attr("y",p).attr("width",f-g).attr("height",v-p),a.selectAll(".".concat(ts.shapes)).selectAll(".".concat(ts.shape)).filter(function(t){return null==o?void 0:o.bind(e.api)(t)}).each(function(t,i){var n,a=(0,c.A)(this),r=a.classed(to.SELECTED),o=a.classed(J.INCLUDED),s=!1;if(a.classed(q.circle)){var l=+ +a.attr("cx"),u=+ +a.attr("cy");n=e.togglePoint,s=g<l&&l<f&&p<u&&u<v}else{if(!a.classed(W.bar))return;var d,h,x,m,_=(h=(d=this.getBoundingClientRect()).width,x=d.height,{x:(m=tj(this))[0].x,y:Math.min(m[0].y,m[1].y),width:h,height:x}),l=_.x,u=_.y,y=_.width,T=_.height;n=e.togglePath,s=!(f<l||l+y<g)&&!(v<u||u+T<p)}s^o&&(a.classed(J.INCLUDED,!o),a.classed(to.SELECTED,!r),n.call(e,!r,a,t,i))})}},dragstart:function(t){var e=this.config,i=this.state,n=this.$el.main;!this.hasArcType()&&e.data_selection_enabled&&(i.dragStart=t,n.select(".".concat(Y.chart)).append("rect").attr("class",J.dragarea).style("opacity","0.1"),this.setDragStatus(!0))},dragend:function(){var t=this.config,e=this.$el.main,i=this.$T;!this.hasArcType()&&t.data_selection_enabled&&(i(e.select(".".concat(J.dragarea))).style("opacity","0").remove(),e.selectAll(".".concat(ts.shape)).classed(J.INCLUDED,!1),this.setDragStatus(!1))}}),{selectPoint:function(t,e,i){var n=this,a=n.config,r=n.$el.main,o=n.$T,s=a.axis_rotated,c=(s?n.circleY:n.circleX).bind(n),l=(s?n.circleX:n.circleY).bind(n),u=n.pointSelectR.bind(n);tN(a.data_onselected,n.api,e,t.node()),o(r.select(".".concat(to.selectedCircles).concat(n.getTargetSelectorSuffix(e.id))).selectAll(".".concat(to.selectedCircle,"-").concat(i)).data([e]).enter().append("circle").attr("class",function(){return n.generateClass(to.selectedCircle,i)}).attr("cx",c).attr("cy",l).attr("stroke",n.color).attr("r",function(t){return 1.4*n.pointSelectR(t)})).attr("r",u)},unselectPoint:function(t,e,i){var n=this.config,a=this.$el.main,r=this.$T;tN(n.data_onunselected,this.api,e,null==t?void 0:t.node()),r(a.select(".".concat(to.selectedCircles).concat(this.getTargetSelectorSuffix(e.id))).selectAll(".".concat(to.selectedCircle,"-").concat(i))).attr("r",0).remove()},togglePoint:function(t,e,i,n){this["".concat(t?"":"un","selectPoint")](e,i,n)},selectPath:function(t,e){var i=this.config;tN(i.data_onselected,this.api,e,t.node()),i.interaction_brighten&&t.style("filter","brightness(1.25)")},unselectPath:function(t,e){var i=this.config;tN(i.data_onunselected,this.api,e,t.node()),i.interaction_brighten&&t.style("filter",null)},togglePath:function(t,e,i,n){this["".concat(t?"":"un","selectPath")](e,i,n)},getToggle:function(t,e){return"path"===t.nodeName?this.togglePath:this.isStepType(e)?function(){}:this.togglePoint},toggleShape:function(t,e,i){var n=this.config,a=this.$el.main;if(n.data_selection_enabled&&n.data_selection_isselectable.bind(this.api)(e)){var r,o,s=(0,c.A)(t),l=s.classed(to.SELECTED),u=this.getToggle(t,e).bind(this);if(!n.data_selection_multiple){var d=null===(r=this.isPointFocusOnly)||void 0===r?void 0:r.call(this),h=".".concat(d?to.selectedCircles:ts.shapes);n.data_selection_grouped&&(h+=this.getTargetSelectorSuffix(e.id)),a.selectAll(h).selectAll(d?".".concat(to.selectedCircle):".".concat(ts.shape,".").concat(to.SELECTED)).classed(to.SELECTED,!1).each(function(t){var e=(0,c.A)(this);o=e,u(!1,e,t,t.index)})}o&&o.node()===s.node()||(s.classed(to.SELECTED,!l),u(!l,s,e,i))}}}),ih={data_selection_enabled:!1,data_selection_grouped:!1,data_selection_isselectable:function(){return!0},data_selection_multiple:!0,data_selection_draggable:!1,data_onselected:function(){},data_onunselected:function(){}},ig={zoom_enabled:!1,zoom_type:"wheel",zoom_extent:void 0,zoom_privileged:!1,zoom_rescale:!1,zoom_onzoom:void 0,zoom_onzoomstart:void 0,zoom_onzoomend:void 0,zoom_resetButton:!0,zoom_x_min:void 0,zoom_x_max:void 0},ip=function(){return tq(eD.prototype,id),tq(e$.prototype,is),ei.setOptions([ih]),(ip=function(){return!0})()},iv=function(){return tq(eD.prototype,iu),tq(e$.prototype,il),ei.setOptions([ig]),(iv=function(){return!0})()},ix={},im={version:"3.15.0",generate:function(t){var e=new e$(t3({},ix,t));return e.internal.charts=this.instance,this.instance.push(e),e},defaults:function(t){return tB(t)&&(ix=t),ix},instance:[],plugin:{}}}};